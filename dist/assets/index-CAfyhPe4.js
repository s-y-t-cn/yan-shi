import{an as ue,ao as Te,b as q,h as ee,a6 as de,d as A,j as te,a as H,r as C,L as M,R as ae,a5 as be,c as F,e as K,n as ve,g as B,z as Pe,_ as fe,q as se,ap as Se,aq as we,y as D,o as me,ar as $e,C as u,E as I,as as Ee,$ as xe,H as Be,Q as U,p as ke,f as Z,at as Oe,au as ne,a2 as Re,av as ze,x as Ae,aw as le,a0 as Ve,ax as Le,D as Fe,I as Me,A as De,s as Ie,v as Ue,af as Ke,w as Y,aa as qe,W as He,ac as We,l as re,m as je}from"./index-g37XHkO7.js";/* empty css               */import{f as Je,c as ie}from"./animation-BxPVrz3f.js";import{E as Qe}from"./index-Ct0d8tij.js";import{t as oe}from"./error-C6KkHRRa.js";import{c as R}from"./index-Cq1NGWuE.js";import{U as pe}from"./index-CWjOxhQe.js";import{f as Xe}from"./vnode-DwFJRcHj.js";import"./castArray-D6nup7xA.js";import"./index-vz8m2Jyi.js";import"./index-7XQ89VVv.js";import"./index-pm3rvx5C.js";import"./index-CdXg1XjN.js";import"./index-BP-IRLDI.js";import"./index-16XDJShn.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-ClVUFy22.js";import"./isEqual-sIzh-_wJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-QePRsbhT.js";import"./position-8TaTLdEo.js";import"./index-ekn85pdJ.js";import"./_baseClone-YGkPyP1V.js";import"./index-B--V0hz4.js";import"./index-9xp24Tp6.js";import"./index-BANbd_X-.js";import"./dropdown-D2TiOhAW.js";import"./index-D1fmgUib.js";import"./index-Di-CCxpl.js";import"./index-DBqnoAV3.js";import"./index-rcptLjZg.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";const Ye=(e,a,i)=>Xe(e.subTree).filter(s=>{var c;return Te(s)&&((c=s.type)==null?void 0:c.name)===a&&!!s.component}).map(s=>s.component.uid).map(s=>i[s]).filter(s=>!!s),Ge=(e,a)=>{const i={},d=ue([]);return{children:d,addChild:c=>{i[c.uid]=c,d.value=Ye(e,a,i)},removeChild:c=>{delete i[c],d.value=d.value.filter(b=>b.uid!==c)}}},W=Symbol("tabsRootContextKey"),Ze=q({tabs:{type:ee(Array),default:()=>de([])}}),he="ElTabBar",et=A({name:he}),tt=A({...et,props:Ze,setup(e,{expose:a}){const i=e,d=se(),t=te(W);t||oe(he,"<el-tabs><el-tab-bar /></el-tabs>");const s=H("tabs"),c=C(),b=C(),p=()=>{let v=0,l=0;const f=["top","bottom"].includes(t.props.tabPosition)?"width":"height",h=f==="width"?"x":"y",E=h==="x"?"left":"top";return i.tabs.every($=>{var V,o;const N=(o=(V=d.parent)==null?void 0:V.refs)==null?void 0:o[`tab-${$.uid}`];if(!N)return!1;if(!$.active)return!0;v=N[`offset${R(E)}`],l=N[`client${R(f)}`];const S=window.getComputedStyle(N);return f==="width"&&(l-=Number.parseFloat(S.paddingLeft)+Number.parseFloat(S.paddingRight),v+=Number.parseFloat(S.paddingLeft)),!1}),{[f]:`${l}px`,transform:`translate${R(h)}(${v}px)`}},y=()=>b.value=p();return M(()=>i.tabs,async()=>{await ae(),y()},{immediate:!0}),be(c,()=>y()),a({ref:c,update:y}),(v,l)=>(F(),K("div",{ref_key:"barRef",ref:c,class:ve([B(s).e("active-bar"),B(s).is(B(t).props.tabPosition)]),style:Pe(b.value)},null,6))}});var at=fe(tt,[["__file","tab-bar.vue"]]);const st=q({panes:{type:ee(Array),default:()=>de([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ot={tabClick:(e,a,i)=>i instanceof Event,tabRemove:(e,a)=>a instanceof Event},ce="ElTabNav",nt=A({name:ce,props:st,emits:ot,setup(e,{expose:a,emit:i}){const d=te(W);d||oe(ce,"<el-tabs><tab-nav /></el-tabs>");const t=H("tabs"),s=Se(),c=we(),b=C(),p=C(),y=C(),v=C(),l=C(!1),f=C(0),h=C(!1),E=C(!0),$=D(()=>["top","bottom"].includes(d.props.tabPosition)?"width":"height"),V=D(()=>({transform:`translate${$.value==="width"?"X":"Y"}(-${f.value}px)`})),o=()=>{if(!b.value)return;const r=b.value[`offset${R($.value)}`],m=f.value;if(!m)return;const n=m>r?m-r:0;f.value=n},N=()=>{if(!b.value||!p.value)return;const r=p.value[`offset${R($.value)}`],m=b.value[`offset${R($.value)}`],n=f.value;if(r-n<=m)return;const T=r-n>m*2?n+m:r-m;f.value=T},S=async()=>{const r=p.value;if(!l.value||!y.value||!b.value||!r)return;await ae();const m=y.value.querySelector(".is-active");if(!m)return;const n=b.value,T=["top","bottom"].includes(d.props.tabPosition),P=m.getBoundingClientRect(),g=n.getBoundingClientRect(),x=T?r.offsetWidth-g.width:r.offsetHeight-g.height,w=f.value;let _=w;T?(P.left<g.left&&(_=w-(g.left-P.left)),P.right>g.right&&(_=w+P.right-g.right)):(P.top<g.top&&(_=w-(g.top-P.top)),P.bottom>g.bottom&&(_=w+(P.bottom-g.bottom))),_=Math.max(_,0),f.value=Math.min(_,x)},k=()=>{var r;if(!p.value||!b.value)return;e.stretch&&((r=v.value)==null||r.update());const m=p.value[`offset${R($.value)}`],n=b.value[`offset${R($.value)}`],T=f.value;n<m?(l.value=l.value||{},l.value.prev=T,l.value.next=T+n<m,m-T<n&&(f.value=m-n)):(l.value=!1,T>0&&(f.value=0))},O=r=>{const m=r.code,{up:n,down:T,left:P,right:g}=U;if(![n,T,P,g].includes(m))return;const x=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),w=x.indexOf(r.target);let _;m===P||m===n?w===0?_=x.length-1:_=w-1:w<x.length-1?_=w+1:_=0,x[_].focus({preventScroll:!0}),x[_].click(),L()},L=()=>{E.value&&(h.value=!0)},j=()=>h.value=!1;return M(s,r=>{r==="hidden"?E.value=!1:r==="visible"&&setTimeout(()=>E.value=!0,50)}),M(c,r=>{r?setTimeout(()=>E.value=!0,50):E.value=!1}),be(y,k),me(()=>setTimeout(()=>S(),0)),$e(()=>k()),a({scrollToActiveTab:S,removeFocus:j}),()=>{const r=l.value?[u("span",{class:[t.e("nav-prev"),t.is("disabled",!l.value.prev)],onClick:o},[u(I,null,{default:()=>[u(Ee,null,null)]})]),u("span",{class:[t.e("nav-next"),t.is("disabled",!l.value.next)],onClick:N},[u(I,null,{default:()=>[u(xe,null,null)]})])]:null,m=e.panes.map((n,T)=>{var P,g,x,w;const _=n.uid,J=n.props.disabled,Q=(g=(P=n.props.name)!=null?P:n.index)!=null?g:`${T}`,X=!J&&(n.isClosable||e.editable);n.index=`${T}`;const ge=X?u(I,{class:"is-icon-close",onClick:z=>i("tabRemove",n,z)},{default:()=>[u(Be,null,null)]}):null,Ce=((w=(x=n.slots).label)==null?void 0:w.call(x))||n.props.label,Ne=!J&&n.active?0:-1;return u("div",{ref:`tab-${_}`,class:[t.e("item"),t.is(d.props.tabPosition),t.is("active",n.active),t.is("disabled",J),t.is("closable",X),t.is("focus",h.value)],id:`tab-${Q}`,key:`tab-${_}`,"aria-controls":`pane-${Q}`,role:"tab","aria-selected":n.active,tabindex:Ne,onFocus:()=>L(),onBlur:()=>j(),onClick:z=>{j(),i("tabClick",n,Q,z)},onKeydown:z=>{X&&(z.code===U.delete||z.code===U.backspace)&&i("tabRemove",n,z)}},[Ce,ge])});return u("div",{ref:y,class:[t.e("nav-wrap"),t.is("scrollable",!!l.value),t.is(d.props.tabPosition)]},[r,u("div",{class:t.e("nav-scroll"),ref:b},[u("div",{class:[t.e("nav"),t.is(d.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(d.props.tabPosition))],ref:p,style:V.value,role:"tablist",onKeydown:O},[e.type?null:u(at,{ref:v,tabs:[...e.panes]},null),m])])])}}}),lt=q({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ee(Function),default:()=>!0},stretch:Boolean}),G=e=>Re(e)||ze(e),rt={[pe]:e=>G(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>G(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>G(e),tabAdd:()=>!0},it=A({name:"ElTabs",props:lt,emits:rt,setup(e,{emit:a,slots:i,expose:d}){var t;const s=H("tabs"),c=D(()=>["left","right"].includes(e.tabPosition)),{children:b,addChild:p,removeChild:y}=Ge(se(),"ElTabPane"),v=C(),l=C((t=e.modelValue)!=null?t:"0"),f=async(o,N=!1)=>{var S,k,O;if(!(l.value===o||ne(o)))try{await((S=e.beforeLeave)==null?void 0:S.call(e,o,l.value))!==!1&&(l.value=o,N&&(a(pe,o),a("tabChange",o)),(O=(k=v.value)==null?void 0:k.removeFocus)==null||O.call(k))}catch{}},h=(o,N,S)=>{o.props.disabled||(f(N,!0),a("tabClick",o,S))},E=(o,N)=>{o.props.disabled||ne(o.props.name)||(N.stopPropagation(),a("edit",o.props.name,"remove"),a("tabRemove",o.props.name))},$=()=>{a("edit",void 0,"add"),a("tabAdd")};M(()=>e.modelValue,o=>f(o)),M(l,async()=>{var o;await ae(),(o=v.value)==null||o.scrollToActiveTab()}),ke(W,{props:e,currentName:l,registerPane:o=>{b.value.push(o)},sortPane:p,unregisterPane:y}),d({currentName:l});const V=({render:o})=>o();return()=>{const o=i["add-icon"],N=e.editable||e.addable?u("div",{class:[s.e("new-tab"),c.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:$,onKeydown:O=>{O.code===U.enter&&$()}},[o?Z(i,"add-icon"):u(I,{class:s.is("icon-plus")},{default:()=>[u(Oe,null,null)]})]):null,S=u("div",{class:[s.e("header"),c.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[u(V,{render:()=>{const O=b.value.some(L=>L.slots.label);return u(nt,{ref:v,currentName:l.value,editable:e.editable,type:e.type,panes:b.value,stretch:e.stretch,onTabClick:h,onTabRemove:E},{$stable:!O})}},null),N]),k=u("div",{class:s.e("content")},[Z(i,"default")]);return u("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[k,S])}}}),ct=q({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),_e="ElTabPane",ut=A({name:_e}),dt=A({...ut,props:ct,setup(e){const a=e,i=se(),d=Ae(),t=te(W);t||oe(_e,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=H("tab-pane"),c=C(),b=D(()=>a.closable||t.props.closable),p=le(()=>{var h;return t.currentName.value===((h=a.name)!=null?h:c.value)}),y=C(p.value),v=D(()=>{var h;return(h=a.name)!=null?h:c.value}),l=le(()=>!a.lazy||y.value||p.value);M(p,h=>{h&&(y.value=!0)});const f=Ve({uid:i.uid,slots:d,props:a,paneName:v,active:p,index:c,isClosable:b});return t.registerPane(f),me(()=>{t.sortPane(f)}),Le(()=>{t.unregisterPane(f.uid)}),(h,E)=>B(l)?Fe((F(),K("div",{key:0,id:`pane-${B(v)}`,class:ve(B(s).b()),role:"tabpanel","aria-hidden":!B(p),"aria-labelledby":`tab-${B(v)}`},[Z(h.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Me,B(p)]]):De("v-if",!0)}});var ye=fe(dt,[["__file","tab-pane.vue"]]);const bt=Ie(it,{TabPane:ye}),vt=Ue(ye),Wt=A({__name:"index",setup(e){var t;ie.baseUrl="http://localhost:8080",ie.token=Ke().token;const a=C(""),i=ue(),d=localStorage.getItem("SytPageEditor");return d&&(i.value=Je(d),a.value=(t=i.value[0])==null?void 0:t.uuid),(s,c)=>{const b=Qe,p=vt,y=bt;return F(),K("div",null,[u(b,{type:"info",effect:"dark"},{default:Y(()=>[qe("由低代码页面编辑器生成")]),_:1}),u(y,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=v=>a.value=v)},{default:Y(()=>[(F(!0),K(He,null,We(i.value,v=>(F(),re(p,{key:v.uuid,label:v.props.title,name:v.uuid,lazy:""},{default:Y(()=>[(F(),re(je(v.component)))]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}});export{Wt as default};
