import{aA as ce,o as oe,F as fe,_ as me,a6 as ve,a as x,z as M,v as te,y as K,bf as ye,aB as V,b as J,h as H,d as Y,M as R,f as E,a0 as pe,u as ge,i as Z,c as P,e as X,j as U,n as k,g as o,t as be,w as D,k as W,l as he,N as _,A as se,aE as Ce,aI as we,r as L,bg as Ee,J as ke,m as Me,bh as Te,a1 as G,R as Be,p as Ie,K as Se,P as De,$ as Le,Q as Ae,T as Fe,U as $e,q as Pe}from"./index-B2ff-rFN.js";import{P as j}from"./vnode-CgXj8ZtL.js";import{a as q,l as Q,H as Oe,k as ze,r as Ne,i as Re,E as Ye,U as Ue,j as ee,e as He}from"./index-CvnddM-F.js";import{_ as ne}from"./plugin-vue_export-helper-CqGSI99y.js";import{F as Ve,i as Xe,E as je}from"./focus-trap-VkXHYWcf.js";import{U as le}from"./index-CQNAlFu8.js";import{t as Ke}from"./typescript-PpV26QSH.js";import{a as We}from"./scroll-JHJnPUrU.js";const _e=(...e)=>t=>{e.forEach(a=>{ce(a)?a(t):a.value=t})},qe=(e,t,a,c)=>{let n={offsetX:0,offsetY:0};const u=m=>{const d=m.clientX,y=m.clientY,{offsetX:p,offsetY:h}=n,f=e.value.getBoundingClientRect(),r=f.left,w=f.top,A=f.width,O=f.height,F=document.documentElement.clientWidth,z=document.documentElement.clientHeight,N=-r+p,$=-w+h,T=F-r-A+p,B=z-w-O+h,C=s=>{let v=p+s.clientX-d,g=h+s.clientY-y;c!=null&&c.value||(v=Math.min(Math.max(v,N),T),g=Math.min(Math.max(g,$),B)),n={offsetX:v,offsetY:g},e.value&&(e.value.style.transform=`translate(${q(v)}, ${q(g)})`)},I=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",I)},i=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",u)},l=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};oe(()=>{fe(()=>{a.value?i():l()})}),me(()=>{l()})},xe=(e,t={})=>{ve(e)||Ke("[useLockscreen]","You need to pass a ref param to this function");const a=t.ns||x("popup"),c=M(()=>a.bm("parent","hidden"));if(!te||Q(document.body,c.value))return;let n=0,u=!1,i="0";const l=()=>{setTimeout(()=>{Ne(document==null?void 0:document.body,c.value),u&&document&&(document.body.style.width=i)},200)};K(e,m=>{if(!m){l();return}u=!Q(document.body,c.value),u&&(i=document.body.style.width),n=We(a.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,y=Oe(document.body,"overflowY");n>0&&(d||y==="scroll")&&u&&(document.body.style.width=`calc(100% - ${n}px)`),ze(document.body,c.value)}),ye(()=>l())},ae=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let t=!1,a=!1;return{onClick:i=>{t&&a&&e(i),t=a=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{a=i.target===i.currentTarget}}},Je=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:H([String,Array,Object])},zIndex:{type:H([String,Number])}}),Ze={click:e=>e instanceof MouseEvent},Ge="overlay";var Qe=Y({name:"ElOverlay",props:Je,emits:Ze,setup(e,{slots:t,emit:a}){const c=x(Ge),n=m=>{a("click",m)},{onClick:u,onMousedown:i,onMouseup:l}=ae(e.customMaskEvent?void 0:n);return()=>e.mask?R("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:i,onMouseup:l},[E(t,"default")],j.STYLE|j.CLASS|j.PROPS,["onClick","onMouseup","onMousedown"]):pe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(t,"default")])}});const eo=Qe,ie=Symbol("dialogInjectionKey"),re=J({center:Boolean,alignCenter:Boolean,closeIcon:{type:Re},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),oo={close:()=>!0},to=["aria-level"],so=["aria-label"],no=["id"],lo=Y({name:"ElDialogContent"}),ao=Y({...lo,props:re,emits:oo,setup(e){const t=e,{t:a}=ge(),{Close:c}=Ue,{dialogRef:n,headerRef:u,bodyId:i,ns:l,style:m}=Z(ie),{focusTrapRef:d}=Z(Ve),y=M(()=>[l.b(),l.is("fullscreen",t.fullscreen),l.is("draggable",t.draggable),l.is("align-center",t.alignCenter),{[l.m("center")]:t.center}]),p=_e(d,n),h=M(()=>t.draggable),f=M(()=>t.overflow);return qe(n,u,h,f),(r,w)=>(P(),X("div",{ref:o(p),class:k(o(y)),style:se(o(m)),tabindex:"-1"},[U("header",{ref_key:"headerRef",ref:u,class:k([o(l).e("header"),{"show-close":r.showClose}])},[E(r.$slots,"header",{},()=>[U("span",{role:"heading","aria-level":r.ariaLevel,class:k(o(l).e("title"))},be(r.title),11,to)]),r.showClose?(P(),X("button",{key:0,"aria-label":o(a)("el.dialog.close"),class:k(o(l).e("headerbtn")),type:"button",onClick:w[0]||(w[0]=A=>r.$emit("close"))},[R(o(Ye),{class:k(o(l).e("close"))},{default:D(()=>[(P(),W(he(r.closeIcon||o(c))))]),_:1},8,["class"])],10,so)):_("v-if",!0)],2),U("div",{id:o(i),class:k(o(l).e("body"))},[E(r.$slots,"default")],10,no),r.$slots.footer?(P(),X("footer",{key:0,class:k(o(l).e("footer"))},[E(r.$slots,"footer")],2)):_("v-if",!0)],6))}});var io=ne(ao,[["__file","dialog-content.vue"]]);const ro=J({...re,appendToBody:Boolean,appendTo:{type:H(String),default:"body"},beforeClose:{type:H(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),uo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[le]:e=>Ce(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},co=(e,t)=>{var a;const n=Me().emit,{nextZIndex:u}=we();let i="";const l=ee(),m=ee(),d=L(!1),y=L(!1),p=L(!1),h=L((a=e.zIndex)!=null?a:u());let f,r;const w=Ee("namespace",Te),A=M(()=>{const b={},S=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(b[`${S}-margin-top`]=e.top),e.width&&(b[`${S}-width`]=q(e.width))),b}),O=M(()=>e.alignCenter?{display:"flex"}:{});function F(){n("opened")}function z(){n("closed"),n(le,!1),e.destroyOnClose&&(p.value=!1)}function N(){n("close")}function $(){r==null||r(),f==null||f(),e.openDelay&&e.openDelay>0?{stop:f}=G(()=>I(),e.openDelay):I()}function T(){f==null||f(),r==null||r(),e.closeDelay&&e.closeDelay>0?{stop:r}=G(()=>s(),e.closeDelay):s()}function B(){function b(S){S||(y.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(b):T()}function C(){e.closeOnClickModal&&B()}function I(){te&&(d.value=!0)}function s(){d.value=!1}function v(){n("openAutoFocus")}function g(){n("closeAutoFocus")}function ue(b){var S;((S=b.detail)==null?void 0:S.focusReason)==="pointer"&&b.preventDefault()}e.lockScroll&&xe(d);function de(){e.closeOnPressEscape&&B()}return K(()=>e.modelValue,b=>{b?(y.value=!1,$(),p.value=!0,h.value=Xe(e.zIndex)?u():h.value++,ke(()=>{n("open"),t.value&&(t.value.scrollTop=0)})):d.value&&T()}),K(()=>e.fullscreen,b=>{t.value&&(b?(i=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=i)}),oe(()=>{e.modelValue&&(d.value=!0,p.value=!0,$())}),{afterEnter:F,afterLeave:z,beforeLeave:N,handleClose:B,onModalClick:C,close:T,doClose:s,onOpenAutoFocus:v,onCloseAutoFocus:g,onCloseRequested:de,onFocusoutPrevented:ue,titleId:l,bodyId:m,closed:y,style:A,overlayDialogStyle:O,rendered:p,visible:d,zIndex:h}},fo=["aria-label","aria-labelledby","aria-describedby"],mo=Y({name:"ElDialog",inheritAttrs:!1}),vo=Y({...mo,props:ro,emits:uo,setup(e,{expose:t}){const a=e,c=Be();He({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},M(()=>!!c.title));const n=x("dialog"),u=L(),i=L(),l=L(),{visible:m,titleId:d,bodyId:y,style:p,overlayDialogStyle:h,rendered:f,zIndex:r,afterEnter:w,afterLeave:A,beforeLeave:O,handleClose:F,onModalClick:z,onOpenAutoFocus:N,onCloseAutoFocus:$,onCloseRequested:T,onFocusoutPrevented:B}=co(a,u);Ie(ie,{dialogRef:u,headerRef:i,bodyId:y,ns:n,rendered:f,style:p});const C=ae(z),I=M(()=>a.draggable&&!a.fullscreen);return t({visible:m,dialogContentRef:l}),(s,v)=>(P(),W($e,{to:s.appendTo,disabled:s.appendTo!=="body"?!1:!s.appendToBody},[R(Fe,{name:"dialog-fade",onAfterEnter:o(w),onAfterLeave:o(A),onBeforeLeave:o(O),persisted:""},{default:D(()=>[Se(R(o(eo),{"custom-mask-event":"",mask:s.modal,"overlay-class":s.modalClass,"z-index":o(r)},{default:D(()=>[U("div",{role:"dialog","aria-modal":"true","aria-label":s.title||void 0,"aria-labelledby":s.title?void 0:o(d),"aria-describedby":o(y),class:k(`${o(n).namespace.value}-overlay-dialog`),style:se(o(h)),onClick:v[0]||(v[0]=(...g)=>o(C).onClick&&o(C).onClick(...g)),onMousedown:v[1]||(v[1]=(...g)=>o(C).onMousedown&&o(C).onMousedown(...g)),onMouseup:v[2]||(v[2]=(...g)=>o(C).onMouseup&&o(C).onMouseup(...g))},[R(o(je),{loop:"",trapped:o(m),"focus-start-el":"container",onFocusAfterTrapped:o(N),onFocusAfterReleased:o($),onFocusoutPrevented:o(B),onReleaseRequested:o(T)},{default:D(()=>[o(f)?(P(),W(io,De({key:0,ref_key:"dialogContentRef",ref:l},s.$attrs,{center:s.center,"align-center":s.alignCenter,"close-icon":s.closeIcon,draggable:o(I),overflow:s.overflow,fullscreen:s.fullscreen,"show-close":s.showClose,title:s.title,"aria-level":s.headerAriaLevel,onClose:o(F)}),Le({header:D(()=>[s.$slots.title?E(s.$slots,"title",{key:1}):E(s.$slots,"header",{key:0,close:o(F),titleId:o(d),titleClass:o(n).e("title")})]),default:D(()=>[E(s.$slots,"default")]),_:2},[s.$slots.footer?{name:"footer",fn:D(()=>[E(s.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):_("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,fo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ae,o(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var yo=ne(vo,[["__file","dialog.vue"]]);const Mo=Pe(yo);export{eo as E,uo as a,Mo as b,_e as c,ro as d,co as u};
