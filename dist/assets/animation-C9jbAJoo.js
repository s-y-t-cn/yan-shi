var ig=Object.defineProperty;var sg=(n,r,a)=>r in n?ig(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a;var Zp=(n,r,a)=>sg(n,typeof r!="symbol"?r+"":r,a);import{aP as isObject$4,an as shallowRef,aQ as isVNode,b as buildProps,aR as isNumber$1,x as useSlots,r as ref,y as computed,g as unref,L as watch,o as onMounted,a5 as useResizeObserver,U as onBeforeUnmount,p as provide,a2 as isString$1,q as getCurrentInstance,d as defineComponent,a as useNamespace,u as useLocale,c as openBlock,e as createElementBlock,l as createBlock,w as withCtx,C as withDirectives,k as createBaseVNode,n as normalizeClass,F as withModifiers,B as createVNode$1,E as ElIcon,aS as arrow_left_default,I as vShow,T as Transition,G as createCommentVNode,$ as arrow_right_default,f as renderSlot,z as normalizeStyle$1,W as Fragment,ac as renderList,t as toDisplayString,_ as _export_sfc,j as inject,a0 as reactive,ar as onUnmounted,aT as isUndefined,s as withInstall,v as withNoopInstall,m as resolveDynamicComponent,h as definePropType,a6 as mutable,a8 as isObject$5,aU as isArray$2,aa as createTextVNode,aV as withKeys,aW as markRaw,aX as full_screen_default,aY as scale_to_original_default,aZ as useZIndex,a_ as effectScope,R as nextTick,H as close_default,a$ as zoom_out_default,b0 as zoom_in_default,b1 as refresh_left_default,b2 as refresh_right_default,Q as EVENT_CODE,M as useEventListener,b3 as keysOf,b4 as useAttrs,b5 as fromPairs,b6 as isClient,b7 as useThrottleFn,D as mergeProps,b8 as isElement,b9 as useSizeProp,a9 as isNil,ba as onUpdated,S as arrow_down_default,bb as minus_default,bc as arrow_up_default,bd as plus_default,i as iconPropType,be as toRefs,a1 as h$1,bf as isFunction$1,bg as useDocumentVisibility,bh as useWindowFocus,bi as computedEager,bj as warning,bk as edit,ap as toRaw,bl as ElConfigProvider,ah as TransitionGroup,ag as isRef,bm as plus$1,bn as minus$1,aN as _delete,ak as pushScopeId,al as popScopeId,bo as picture,bp as getCurrentScope,bq as onScopeDispose,ao as useCssVars,N as resolveComponent,br as uploadFilled,bs as isReactive}from"./index-s4B7ioPK.js";import{d as debounce$1,b as Ee$3,a as ElTooltip,E as ElScrollbar}from"./index-DVNtIrui.js";import{U as UPDATE_MODEL_EVENT,C as CHANGE_EVENT,u as useAttrs$1,a as useAriaProps,I as INPUT_EVENT,E as ElInput}from"./index-6PRIxcmR.js";import{c as castArray}from"./castArray-DjozYBkr.js";import{E as ElCollapseTransition}from"./index-BO8A9Zfv.js";import{c as useIdInjection,d as useFormItem,b as useFormSize,e as useFormDisabled,f as useFormItemInputId,E as ElButton}from"./index-B0ZkurPq.js";import{E as ElText}from"./index-CwpaHunc.js";import{a as ElRadioGroup,c as ElRadioButton,E as ElDivider,b as ElRadio}from"./el-tooltip-CahaVNL3.js";import{t as throwError$1,d as debugWarn}from"./error-D6grspl3.js";import{v as vRepeatClick,E as ElDatePicker}from"./index-zPcudtAz.js";import{E as ElTag}from"./index-CQvSDagh.js";import{E as ElPopover}from"./index-BFVS5cBl.js";import{a as ElForm,E as ElFormItem}from"./index-DEE2qirR.js";import{_ as _export_sfc$1}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as isInContainer,E as ElColorPicker}from"./index-Cfy3EC5I.js";import{E as ElSwitch}from"./index-BZk7Lh6p.js";import{a as ElTeleport}from"./index-Bd9hyWKV.js";import{g as getScrollContainer}from"./scroll-CJZWUGJc.js";import{E as ElCard}from"./index-eEeYcRJ7.js";import{f as flattedChildren}from"./vnode-HXEciRAe.js";import{E as ElCheckboxGroup,a as ElCheckbox,b as ElTableColumn,c as ElTable}from"./index-BwZSQgcw.js";import{E as ElTree,a as ElTreeSelect}from"./el-checkbox-D0YVhm9J.js";import{c as capitalize,E as ElSelect,a as ElOption}from"./index-PaUEMjd7.js";import{c as commonjsGlobal,g as getDefaultExportFromCjs}from"./_commonjsHelpers-BosuxZz1.js";import{E as ElPagination}from"./index-B_7nBYnk.js";import{E as ElUpload}from"./index-DNEopPWV.js";import{c as commonjsRequire}from"./_commonjs-dynamic-modules-TDtrdbi3.js";var FUNC_ERROR_TEXT="Expected a function";function throttle$2(n,r,a){var s=!0,o=!0;if(typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$4(a)&&(s="leading"in a?!!a.leading:s,o="trailing"in a?!!a.trailing:o),debounce$1(n,r,{leading:s,maxWait:r,trailing:o})}const getOrderedChildren=(n,r,a)=>flattedChildren(n.subTree).filter(u=>{var c;return isVNode(u)&&((c=u.type)==null?void 0:c.name)===r&&!!u.component}).map(u=>u.component.uid).map(u=>a[u]).filter(u=>!!u),useOrderedChildren=(n,r)=>{const a={},s=shallowRef([]);return{children:s,addChild:c=>{a[c.uid]=c,s.value=getOrderedChildren(n,r,a)},removeChild:c=>{delete a[c],s.value=s.value.filter(p=>p.uid!==c)}}},carouselProps=buildProps({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),carouselEmits={change:(n,r)=>[n,r].every(isNumber$1)},carouselContextKey=Symbol("carouselContextKey"),THROTTLE_TIME=300,useCarousel=(n,r,a)=>{const{children:s,addChild:o,removeChild:u}=useOrderedChildren(getCurrentInstance(),"ElCarouselItem"),c=useSlots(),p=ref(-1),d=ref(null),_=ref(!1),ja=ref(),Ja=ref(0),ec=ref(!0),tc=ref(!0),rc=ref(!1),nc=computed(()=>n.arrow!=="never"&&!unref(eh)),ic=computed(()=>s.value.some(Lh=>Lh.props.label.toString().length>0)),uc=computed(()=>n.type==="card"),eh=computed(()=>n.direction==="vertical"),rh=computed(()=>n.height!=="auto"?{height:n.height}:{height:`${Ja.value}px`,overflow:"hidden"}),ah=throttle$2(Lh=>{dh(Lh)},THROTTLE_TIME,{trailing:!0}),ih=throttle$2(Lh=>{Dh(Lh)},THROTTLE_TIME),oh=Lh=>ec.value?p.value<=1?Lh<=1:Lh>1:!0;function uh(){d.value&&(clearInterval(d.value),d.value=null)}function ch(){n.interval<=0||!n.autoplay||d.value||(d.value=setInterval(()=>hh(),n.interval))}const hh=()=>{tc.value||(rc.value=!0),tc.value=!1,p.value<s.value.length-1?p.value=p.value+1:n.loop?p.value=0:rc.value=!1};function dh(Lh){if(tc.value||(rc.value=!0),tc.value=!1,isString$1(Lh)){const Qh=s.value.filter(jh=>jh.props.name===Lh);Qh.length>0&&(Lh=s.value.indexOf(Qh[0]))}if(Lh=Number(Lh),Number.isNaN(Lh)||Lh!==Math.floor(Lh))return;const Fh=s.value.length,Wh=p.value;Lh<0?p.value=n.loop?Fh-1:0:Lh>=Fh?p.value=n.loop?0:Fh-1:p.value=Lh,Wh===p.value&&gh(Wh),wh()}function gh(Lh){s.value.forEach((Fh,Wh)=>{Fh.translateItem(Wh,p.value,Lh)})}function fh(Lh,Fh){var Wh,Qh,jh,Hh;const qh=unref(s),nd=qh.length;if(nd===0||!Lh.states.inStage)return!1;const Sh=Fh+1,Gh=Fh-1,zh=nd-1,$h=qh[zh].states.active,Ph=qh[0].states.active,Vh=(Qh=(Wh=qh[Sh])==null?void 0:Wh.states)==null?void 0:Qh.active,Xh=(Hh=(jh=qh[Gh])==null?void 0:jh.states)==null?void 0:Hh.active;return Fh===zh&&Ph||Vh?"left":Fh===0&&$h||Xh?"right":!1}function vh(){_.value=!0,n.pauseOnHover&&uh()}function ph(){_.value=!1,ch()}function yh(){rc.value=!1}function xh(Lh){unref(eh)||s.value.forEach((Fh,Wh)=>{Lh===fh(Fh,Wh)&&(Fh.states.hover=!0)})}function _h(){unref(eh)||s.value.forEach(Lh=>{Lh.states.hover=!1})}function bh(Lh){Lh!==p.value&&(tc.value||(rc.value=!0)),p.value=Lh}function Dh(Lh){n.trigger==="hover"&&Lh!==p.value&&(p.value=Lh,tc.value||(rc.value=!0))}function Th(){dh(p.value-1)}function Ch(){dh(p.value+1)}function wh(){uh(),n.pauseOnHover||ch()}function Nh(Lh){n.height==="auto"&&(Ja.value=Lh)}function Rh(){var Lh;const Fh=(Lh=c.default)==null?void 0:Lh.call(c);if(!Fh)return null;const Wh=flattedChildren(Fh),Qh="ElCarouselItem",jh=Wh.filter(Hh=>isVNode(Hh)&&Hh.type.name===Qh);return(jh==null?void 0:jh.length)===2&&n.loop&&!uc.value?(ec.value=!0,jh):(ec.value=!1,null)}watch(()=>p.value,(Lh,Fh)=>{gh(Fh),ec.value&&(Lh=Lh%2,Fh=Fh%2),Fh>-1&&r("change",Lh,Fh)}),watch(()=>n.autoplay,Lh=>{Lh?ch():uh()}),watch(()=>n.loop,()=>{dh(p.value)}),watch(()=>n.interval,()=>{wh()});const kh=shallowRef();return onMounted(()=>{watch(()=>s.value,()=>{s.value.length>0&&dh(n.initialIndex)},{immediate:!0}),kh.value=useResizeObserver(ja.value,()=>{gh()}),ch()}),onBeforeUnmount(()=>{uh(),ja.value&&kh.value&&kh.value.stop()}),provide(carouselContextKey,{root:ja,isCardType:uc,isVertical:eh,items:s,loop:n.loop,cardScale:n.cardScale,addItem:o,removeItem:u,setActiveItem:dh,setContainerHeight:Nh}),{root:ja,activeIndex:p,arrowDisplay:nc,hasLabel:ic,hover:_,isCardType:uc,isTransitioning:rc,items:s,isVertical:eh,containerStyle:rh,isItemsTwoLength:ec,handleButtonEnter:xh,handleTransitionEnd:yh,handleButtonLeave:_h,handleIndicatorClick:bh,handleMouseEnter:vh,handleMouseLeave:ph,setActiveItem:dh,prev:Th,next:Ch,PlaceholderItem:Rh,isTwoLengthShow:oh,throttledArrowClick:ah,throttledIndicatorHover:ih}},COMPONENT_NAME$3="ElCarousel",__default__$e=defineComponent({name:COMPONENT_NAME$3}),_sfc_main$s=defineComponent({...__default__$e,props:carouselProps,emits:carouselEmits,setup(n,{expose:r,emit:a}){const s=n,{root:o,activeIndex:u,arrowDisplay:c,hasLabel:p,hover:d,isCardType:_,items:ja,isVertical:Ja,containerStyle:ec,handleButtonEnter:tc,handleButtonLeave:rc,isTransitioning:nc,handleIndicatorClick:ic,handleMouseEnter:uc,handleMouseLeave:eh,handleTransitionEnd:rh,setActiveItem:ah,prev:ih,next:oh,PlaceholderItem:uh,isTwoLengthShow:ch,throttledArrowClick:hh,throttledIndicatorHover:dh}=useCarousel(s,a),gh=useNamespace("carousel"),{t:fh}=useLocale(),vh=computed(()=>{const xh=[gh.b(),gh.m(s.direction)];return unref(_)&&xh.push(gh.m("card")),xh}),ph=computed(()=>{const xh=[gh.e("container")];return s.motionBlur&&unref(nc)&&xh.push(unref(Ja)?`${gh.namespace.value}-transitioning-vertical`:`${gh.namespace.value}-transitioning`),xh}),yh=computed(()=>{const xh=[gh.e("indicators"),gh.em("indicators",s.direction)];return unref(p)&&xh.push(gh.em("indicators","labels")),s.indicatorPosition==="outside"&&xh.push(gh.em("indicators","outside")),unref(Ja)&&xh.push(gh.em("indicators","right")),xh});return r({activeIndex:u,setActiveItem:ah,prev:ih,next:oh}),(xh,_h)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:o,class:normalizeClass(unref(vh)),onMouseenter:withModifiers(unref(uc),["stop"]),onMouseleave:withModifiers(unref(eh),["stop"])},[unref(c)?(openBlock(),createBlock(Transition,{key:0,name:"carousel-arrow-left",persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("button",{type:"button",class:normalizeClass([unref(gh).e("arrow"),unref(gh).em("arrow","left")]),"aria-label":unref(fh)("el.carousel.leftArrow"),onMouseenter:bh=>unref(tc)("left"),onMouseleave:unref(rc),onClick:withModifiers(bh=>unref(hh)(unref(u)-1),["stop"])},[createVNode$1(unref(ElIcon),null,{default:withCtx(()=>[createVNode$1(unref(arrow_left_default))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[vShow,(xh.arrow==="always"||unref(d))&&(s.loop||unref(u)>0)]])]),_:1})):createCommentVNode("v-if",!0),unref(c)?(openBlock(),createBlock(Transition,{key:1,name:"carousel-arrow-right",persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("button",{type:"button",class:normalizeClass([unref(gh).e("arrow"),unref(gh).em("arrow","right")]),"aria-label":unref(fh)("el.carousel.rightArrow"),onMouseenter:bh=>unref(tc)("right"),onMouseleave:unref(rc),onClick:withModifiers(bh=>unref(hh)(unref(u)+1),["stop"])},[createVNode$1(unref(ElIcon),null,{default:withCtx(()=>[createVNode$1(unref(arrow_right_default))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[vShow,(xh.arrow==="always"||unref(d))&&(s.loop||unref(u)<unref(ja).length-1)]])]),_:1})):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(ph)),style:normalizeStyle$1(unref(ec)),onTransitionend:unref(rh)},[createVNode$1(unref(uh)),renderSlot(xh.$slots,"default")],46,["onTransitionend"]),xh.indicatorPosition!=="none"?(openBlock(),createElementBlock("ul",{key:2,class:normalizeClass(unref(yh))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ja),(bh,Dh)=>withDirectives((openBlock(),createElementBlock("li",{key:Dh,class:normalizeClass([unref(gh).e("indicator"),unref(gh).em("indicator",xh.direction),unref(gh).is("active",Dh===unref(u))]),onMouseenter:Th=>unref(dh)(Dh),onClick:withModifiers(Th=>unref(ic)(Dh),["stop"])},[createBaseVNode("button",{class:normalizeClass(unref(gh).e("button")),"aria-label":unref(fh)("el.carousel.indicator",{index:Dh+1})},[unref(p)?(openBlock(),createElementBlock("span",{key:0},toDisplayString(bh.props.label),1)):createCommentVNode("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[vShow,unref(ch)(Dh)]])),128))],2)):createCommentVNode("v-if",!0),s.motionBlur?(openBlock(),createElementBlock("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[createBaseVNode("defs",null,[createBaseVNode("filter",{id:"elCarouselHorizontal"},[createBaseVNode("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),createBaseVNode("filter",{id:"elCarouselVertical"},[createBaseVNode("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):createCommentVNode("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var Carousel=_export_sfc(_sfc_main$s,[["__file","carousel.vue"]]);const carouselItemProps=buildProps({name:{type:String,default:""},label:{type:[String,Number],default:""}}),useCarouselItem=(n,r)=>{const a=inject(carouselContextKey),s=getCurrentInstance(),o=ref(),u=ref(!1),c=ref(0),p=ref(1),d=ref(!1),_=ref(!1),ja=ref(!1),Ja=ref(!1),{isCardType:ec,isVertical:tc,cardScale:rc}=a;function nc(ah,ih,oh){const uh=oh-1,ch=ih-1,hh=ih+1,dh=oh/2;return ih===0&&ah===uh?-1:ih===uh&&ah===0?oh:ah<ch&&ih-ah>=dh?oh+1:ah>hh&&ah-ih>=dh?-2:ah}function ic(ah,ih){var oh,uh;const ch=unref(tc)?((oh=a.root.value)==null?void 0:oh.offsetHeight)||0:((uh=a.root.value)==null?void 0:uh.offsetWidth)||0;return ja.value?ch*((2-rc)*(ah-ih)+1)/4:ah<ih?-(1+rc)*ch/4:(3+rc)*ch/4}function uc(ah,ih,oh){const uh=a.root.value;return uh?((oh?uh.offsetHeight:uh.offsetWidth)||0)*(ah-ih):0}const eh=(ah,ih,oh)=>{var uh;const ch=unref(ec),hh=(uh=a.items.value.length)!=null?uh:Number.NaN,dh=ah===ih;!ch&&!isUndefined(oh)&&(Ja.value=dh||ah===oh),!dh&&hh>2&&a.loop&&(ah=nc(ah,ih,hh));const gh=unref(tc);d.value=dh,ch?(ja.value=Math.round(Math.abs(ah-ih))<=1,c.value=ic(ah,ih),p.value=unref(d)?1:rc):c.value=uc(ah,ih,gh),_.value=!0,dh&&o.value&&a.setContainerHeight(o.value.offsetHeight)};function rh(){if(a&&unref(ec)){const ah=a.items.value.findIndex(({uid:ih})=>ih===s.uid);a.setActiveItem(ah)}}return onMounted(()=>{a.addItem({props:n,states:reactive({hover:u,translate:c,scale:p,active:d,ready:_,inStage:ja,animating:Ja}),uid:s.uid,translateItem:eh})}),onUnmounted(()=>{a.removeItem(s.uid)}),{carouselItemRef:o,active:d,animating:Ja,hover:u,inStage:ja,isVertical:tc,translate:c,isCardType:ec,scale:p,ready:_,handleItemClick:rh}},__default__$d=defineComponent({name:"ElCarouselItem"}),_sfc_main$r=defineComponent({...__default__$d,props:carouselItemProps,setup(n){const r=n,a=useNamespace("carousel"),{carouselItemRef:s,active:o,animating:u,hover:c,inStage:p,isVertical:d,translate:_,isCardType:ja,scale:Ja,ready:ec,handleItemClick:tc}=useCarouselItem(r),rc=computed(()=>[a.e("item"),a.is("active",o.value),a.is("in-stage",p.value),a.is("hover",c.value),a.is("animating",u.value),{[a.em("item","card")]:ja.value,[a.em("item","card-vertical")]:ja.value&&d.value}]),nc=computed(()=>{const uc=`${`translate${unref(d)?"Y":"X"}`}(${unref(_)}px)`,eh=`scale(${unref(Ja)})`;return{transform:[uc,eh].join(" ")}});return(ic,uc)=>withDirectives((openBlock(),createElementBlock("div",{ref_key:"carouselItemRef",ref:s,class:normalizeClass(unref(rc)),style:normalizeStyle$1(unref(nc)),onClick:unref(tc)},[unref(ja)?withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(a).e("mask"))},null,2)),[[vShow,!unref(o)]]):createCommentVNode("v-if",!0),renderSlot(ic.$slots,"default")],14,["onClick"])),[[vShow,unref(ec)]])}});var CarouselItem=_export_sfc(_sfc_main$r,[["__file","carousel-item.vue"]]);const ElCarousel=withInstall(Carousel,{CarouselItem}),ElCarouselItem=withNoopInstall(CarouselItem),rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$c=defineComponent({name:"ElRow"}),_sfc_main$q=defineComponent({...__default__$c,props:rowProps,setup(n){const r=n,a=useNamespace("row"),s=computed(()=>r.gutter);provide(rowContextKey,{gutter:s});const o=computed(()=>{const c={};return r.gutter&&(c.marginRight=c.marginLeft=`-${r.gutter/2}px`),c}),u=computed(()=>[a.b(),a.is(`justify-${r.justify}`,r.justify!=="start"),a.is(`align-${r.align}`,!!r.align)]);return(c,p)=>(openBlock(),createBlock(resolveDynamicComponent(c.tag),{class:normalizeClass(unref(u)),style:normalizeStyle$1(unref(o))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc(_sfc_main$q,[["__file","row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$b=defineComponent({name:"ElCol"}),_sfc_main$p=defineComponent({...__default__$b,props:colProps,setup(n){const r=n,{gutter:a}=inject(rowContextKey,{gutter:computed(()=>0)}),s=useNamespace("col"),o=computed(()=>{const c={};return a.value&&(c.paddingLeft=c.paddingRight=`${a.value/2}px`),c}),u=computed(()=>{const c=[];return["span","offset","pull","push"].forEach(_=>{const ja=r[_];isNumber$1(ja)&&(_==="span"?c.push(s.b(`${r[_]}`)):ja>0&&c.push(s.b(`${_}-${r[_]}`)))}),["xs","sm","md","lg","xl"].forEach(_=>{isNumber$1(r[_])?c.push(s.b(`${_}-${r[_]}`)):isObject$5(r[_])&&Object.entries(r[_]).forEach(([ja,Ja])=>{c.push(ja!=="span"?s.b(`${_}-${ja}-${Ja}`):s.b(`${_}-${Ja}`))})}),a.value&&c.push(s.is("guttered")),[s.b(),c]});return(c,p)=>(openBlock(),createBlock(resolveDynamicComponent(c.tag),{class:normalizeClass(unref(u)),style:normalizeStyle$1(unref(o))},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc(_sfc_main$p,[["__file","col.vue"]]);const ElCol=withInstall(Col),emitChangeFn=n=>isNumber$1(n)||isString$1(n)||isArray$2(n),collapseProps=buildProps({accordion:Boolean,modelValue:{type:definePropType([Array,String,Number]),default:()=>mutable([])}}),collapseEmits={[UPDATE_MODEL_EVENT]:emitChangeFn,[CHANGE_EVENT]:emitChangeFn},collapseContextKey=Symbol("collapseContextKey"),useCollapse=(n,r)=>{const a=ref(castArray(n.modelValue)),s=u=>{a.value=u;const c=n.accordion?a.value[0]:a.value;r(UPDATE_MODEL_EVENT,c),r(CHANGE_EVENT,c)},o=u=>{if(n.accordion)s([a.value[0]===u?"":u]);else{const c=[...a.value],p=c.indexOf(u);p>-1?c.splice(p,1):c.push(u),s(c)}};return watch(()=>n.modelValue,()=>a.value=castArray(n.modelValue),{deep:!0}),provide(collapseContextKey,{activeNames:a,handleItemClick:o}),{activeNames:a,setActiveNames:s}},useCollapseDOM=()=>{const n=useNamespace("collapse");return{rootKls:computed(()=>n.b())}},__default__$a=defineComponent({name:"ElCollapse"}),_sfc_main$o=defineComponent({...__default__$a,props:collapseProps,emits:collapseEmits,setup(n,{expose:r,emit:a}){const s=n,{activeNames:o,setActiveNames:u}=useCollapse(s,a),{rootKls:c}=useCollapseDOM();return r({activeNames:o,setActiveNames:u}),(p,d)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(c))},[renderSlot(p.$slots,"default")],2))}});var Collapse=_export_sfc(_sfc_main$o,[["__file","collapse.vue"]]);const collapseItemProps=buildProps({title:{type:String,default:""},name:{type:definePropType([String,Number]),default:void 0},disabled:Boolean}),useCollapseItem=n=>{const r=inject(collapseContextKey),{namespace:a}=useNamespace("collapse"),s=ref(!1),o=ref(!1),u=useIdInjection(),c=computed(()=>u.current++),p=computed(()=>{var ec;return(ec=n.name)!=null?ec:`${a.value}-id-${u.prefix}-${unref(c)}`}),d=computed(()=>r==null?void 0:r.activeNames.value.includes(unref(p)));return{focusing:s,id:c,isActive:d,handleFocus:()=>{setTimeout(()=>{o.value?o.value=!1:s.value=!0},50)},handleHeaderClick:()=>{n.disabled||(r==null||r.handleItemClick(unref(p)),s.value=!1,o.value=!0)},handleEnterClick:()=>{r==null||r.handleItemClick(unref(p))}}},useCollapseItemDOM=(n,{focusing:r,isActive:a,id:s})=>{const o=useNamespace("collapse"),u=computed(()=>[o.b("item"),o.is("active",unref(a)),o.is("disabled",n.disabled)]),c=computed(()=>[o.be("item","header"),o.is("active",unref(a)),{focusing:unref(r)&&!n.disabled}]),p=computed(()=>[o.be("item","arrow"),o.is("active",unref(a))]),d=computed(()=>o.be("item","wrap")),_=computed(()=>o.be("item","content")),ja=computed(()=>o.b(`content-${unref(s)}`)),Ja=computed(()=>o.b(`head-${unref(s)}`));return{arrowKls:p,headKls:c,rootKls:u,itemWrapperKls:d,itemContentKls:_,scopedContentId:ja,scopedHeadId:Ja}},__default__$9=defineComponent({name:"ElCollapseItem"}),_sfc_main$n=defineComponent({...__default__$9,props:collapseItemProps,setup(n,{expose:r}){const a=n,{focusing:s,id:o,isActive:u,handleFocus:c,handleHeaderClick:p,handleEnterClick:d}=useCollapseItem(a),{arrowKls:_,headKls:ja,rootKls:Ja,itemWrapperKls:ec,itemContentKls:tc,scopedContentId:rc,scopedHeadId:nc}=useCollapseItemDOM(a,{focusing:s,isActive:u,id:o});return r({isActive:u}),(ic,uc)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(Ja))},[createBaseVNode("button",{id:unref(nc),class:normalizeClass(unref(ja)),"aria-expanded":unref(u),"aria-controls":unref(rc),"aria-describedby":unref(rc),tabindex:ic.disabled?-1:0,type:"button",onClick:unref(p),onKeydown:withKeys(withModifiers(unref(d),["stop","prevent"]),["space","enter"]),onFocus:unref(c),onBlur:eh=>s.value=!1},[renderSlot(ic.$slots,"title",{},()=>[createTextVNode(toDisplayString(ic.title),1)]),createVNode$1(unref(ElIcon),{class:normalizeClass(unref(_))},{default:withCtx(()=>[createVNode$1(unref(arrow_right_default))]),_:1},8,["class"])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),createVNode$1(unref(ElCollapseTransition),null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:unref(rc),role:"region",class:normalizeClass(unref(ec)),"aria-hidden":!unref(u),"aria-labelledby":unref(nc)},[createBaseVNode("div",{class:normalizeClass(unref(tc))},[renderSlot(ic.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[vShow,unref(u)]])]),_:3})],2))}});var CollapseItem=_export_sfc(_sfc_main$n,[["__file","collapse-item.vue"]]);const ElCollapse=withInstall(Collapse,{CollapseItem}),ElCollapseItem=withNoopInstall(CollapseItem),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageViewerEmits={close:()=>!0,switch:n=>isNumber$1(n),rotate:n=>isNumber$1(n)},__default__$8=defineComponent({name:"ElImageViewer"}),_sfc_main$m=defineComponent({...__default__$8,props:imageViewerProps,emits:imageViewerEmits,setup(n,{expose:r,emit:a}){var s;const o=n,u={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:c}=useLocale(),p=useNamespace("image-viewer"),{nextZIndex:d}=useZIndex(),_=ref(),ja=ref([]),Ja=effectScope(),ec=ref(!0),tc=ref(o.initialIndex),rc=shallowRef(u.CONTAIN),nc=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),ic=ref((s=o.zIndex)!=null?s:d()),uc=computed(()=>{const{urlList:Th}=o;return Th.length<=1}),eh=computed(()=>tc.value===0),rh=computed(()=>tc.value===o.urlList.length-1),ah=computed(()=>o.urlList[tc.value]),ih=computed(()=>[p.e("btn"),p.e("prev"),p.is("disabled",!o.infinite&&eh.value)]),oh=computed(()=>[p.e("btn"),p.e("next"),p.is("disabled",!o.infinite&&rh.value)]),uh=computed(()=>{const{scale:Th,deg:Ch,offsetX:wh,offsetY:Nh,enableTransition:Rh}=nc.value;let kh=wh/Th,Lh=Nh/Th;const Fh=Ch*Math.PI/180,Wh=Math.cos(Fh),Qh=Math.sin(Fh);kh=kh*Wh+Lh*Qh,Lh=Lh*Wh-wh/Th*Qh;const jh={transform:`scale(${Th}) rotate(${Ch}deg) translate(${kh}px, ${Lh}px)`,transition:Rh?"transform .3s":""};return rc.value.name===u.CONTAIN.name&&(jh.maxWidth=jh.maxHeight="100%"),jh});function ch(){dh(),a("close")}function hh(){const Th=throttle$2(wh=>{switch(wh.code){case EVENT_CODE.esc:o.closeOnPressEscape&&ch();break;case EVENT_CODE.space:yh();break;case EVENT_CODE.left:_h();break;case EVENT_CODE.up:Dh("zoomIn");break;case EVENT_CODE.right:bh();break;case EVENT_CODE.down:Dh("zoomOut");break}}),Ch=throttle$2(wh=>{const Nh=wh.deltaY||wh.deltaX;Dh(Nh<0?"zoomIn":"zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})});Ja.run(()=>{useEventListener(document,"keydown",Th),useEventListener(document,"wheel",Ch)})}function dh(){Ja.stop()}function gh(){ec.value=!1}function fh(Th){ec.value=!1,Th.target.alt=c("el.image.error")}function vh(Th){if(ec.value||Th.button!==0||!_.value)return;nc.value.enableTransition=!1;const{offsetX:Ch,offsetY:wh}=nc.value,Nh=Th.pageX,Rh=Th.pageY,kh=throttle$2(Fh=>{nc.value={...nc.value,offsetX:Ch+Fh.pageX-Nh,offsetY:wh+Fh.pageY-Rh}}),Lh=useEventListener(document,"mousemove",kh);useEventListener(document,"mouseup",()=>{Lh()}),Th.preventDefault()}function ph(){nc.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function yh(){if(ec.value)return;const Th=keysOf(u),Ch=Object.values(u),wh=rc.value.name,Rh=(Ch.findIndex(kh=>kh.name===wh)+1)%Th.length;rc.value=u[Th[Rh]],ph()}function xh(Th){const Ch=o.urlList.length;tc.value=(Th+Ch)%Ch}function _h(){eh.value&&!o.infinite||xh(tc.value-1)}function bh(){rh.value&&!o.infinite||xh(tc.value+1)}function Dh(Th,Ch={}){if(ec.value)return;const{minScale:wh,maxScale:Nh}=o,{zoomRate:Rh,rotateDeg:kh,enableTransition:Lh}={zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0,...Ch};switch(Th){case"zoomOut":nc.value.scale>wh&&(nc.value.scale=Number.parseFloat((nc.value.scale/Rh).toFixed(3)));break;case"zoomIn":nc.value.scale<Nh&&(nc.value.scale=Number.parseFloat((nc.value.scale*Rh).toFixed(3)));break;case"clockwise":nc.value.deg+=kh,a("rotate",nc.value.deg);break;case"anticlockwise":nc.value.deg-=kh,a("rotate",nc.value.deg);break}nc.value.enableTransition=Lh}return watch(ah,()=>{nextTick(()=>{const Th=ja.value[0];Th!=null&&Th.complete||(ec.value=!0)})}),watch(tc,Th=>{ph(),a("switch",Th)}),onMounted(()=>{var Th,Ch;hh(),(Ch=(Th=_.value)==null?void 0:Th.focus)==null||Ch.call(Th)}),r({setActiveItem:xh}),(Th,Ch)=>(openBlock(),createBlock(unref(ElTeleport),{to:"body",disabled:!Th.teleported},{default:withCtx(()=>[createVNode$1(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:_,tabindex:-1,class:normalizeClass(unref(p).e("wrapper")),style:normalizeStyle$1({zIndex:ic.value})},[createBaseVNode("div",{class:normalizeClass(unref(p).e("mask")),onClick:withModifiers(wh=>Th.hideOnClickModal&&ch(),["self"])},null,10,["onClick"]),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref(p).e("btn"),unref(p).e("close")]),onClick:ch},[createVNode$1(unref(ElIcon),null,{default:withCtx(()=>[createVNode$1(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(uc)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(ih)),onClick:_h},[createVNode$1(unref(ElIcon),null,{default:withCtx(()=>[createVNode$1(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref(oh)),onClick:bh},[createVNode$1(unref(ElIcon),null,{default:withCtx(()=>[createVNode$1(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref(p).e("btn"),unref(p).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref(p).e("actions__inner"))},[createVNode$1(unref(ElIcon),{onClick:wh=>Dh("zoomOut")},{default:withCtx(()=>[createVNode$1(unref(zoom_out_default))]),_:1},8,["onClick"]),createVNode$1(unref(ElIcon),{onClick:wh=>Dh("zoomIn")},{default:withCtx(()=>[createVNode$1(unref(zoom_in_default))]),_:1},8,["onClick"]),createBaseVNode("i",{class:normalizeClass(unref(p).e("actions__divider"))},null,2),createVNode$1(unref(ElIcon),{onClick:yh},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(rc).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref(p).e("actions__divider"))},null,2),createVNode$1(unref(ElIcon),{onClick:wh=>Dh("anticlockwise")},{default:withCtx(()=>[createVNode$1(unref(refresh_left_default))]),_:1},8,["onClick"]),createVNode$1(unref(ElIcon),{onClick:wh=>Dh("clockwise")},{default:withCtx(()=>[createVNode$1(unref(refresh_right_default))]),_:1},8,["onClick"])],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref(p).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Th.urlList,(wh,Nh)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:Rh=>ja.value[Nh]=Rh,key:wh,src:wh,style:normalizeStyle$1(unref(uh)),class:normalizeClass(unref(p).e("img")),crossorigin:Th.crossorigin,onLoad:gh,onError:fh,onMousedown:vh},null,46,["src","crossorigin"])),[[vShow,Nh===tc.value]])),128))],2),renderSlot(Th.$slots,"default")],6)]),_:3})]),_:3},8,["disabled"]))}});var ImageViewer=_export_sfc(_sfc_main$m,[["__file","image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:definePropType(String)}}),imageEmits={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>isNumber$1(n),close:()=>!0,show:()=>!0},__default__$7=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$l=defineComponent({...__default__$7,props:imageProps,emits:imageEmits,setup(n,{emit:r}){const a=n;let s="";const{t:o}=useLocale(),u=useNamespace("image"),c=useAttrs(),p=computed(()=>fromPairs(Object.entries(c).filter(([bh])=>/^(data-|on[A-Z])/i.test(bh)||["id","style"].includes(bh)))),d=useAttrs$1({excludeListeners:!0,excludeKeys:computed(()=>Object.keys(p.value))}),_=ref(),ja=ref(!1),Ja=ref(!0),ec=ref(!1),tc=ref(),rc=ref(),nc=isClient&&"loading"in HTMLImageElement.prototype;let ic,uc;const eh=computed(()=>[u.e("inner"),ah.value&&u.e("preview"),Ja.value&&u.is("loading")]),rh=computed(()=>{const{fit:bh}=a;return isClient&&bh?{objectFit:bh}:{}}),ah=computed(()=>{const{previewSrcList:bh}=a;return Array.isArray(bh)&&bh.length>0}),ih=computed(()=>{const{previewSrcList:bh,initialIndex:Dh}=a;let Th=Dh;return Dh>bh.length-1&&(Th=0),Th}),oh=computed(()=>a.loading==="eager"?!1:!nc&&a.loading==="lazy"||a.lazy),uh=()=>{isClient&&(Ja.value=!0,ja.value=!1,_.value=a.src)};function ch(bh){Ja.value=!1,ja.value=!1,r("load",bh)}function hh(bh){Ja.value=!1,ja.value=!0,r("error",bh)}function dh(){isInContainer(tc.value,rc.value)&&(uh(),vh())}const gh=useThrottleFn(dh,200,!0);async function fh(){var bh;if(!isClient)return;await nextTick();const{scrollContainer:Dh}=a;isElement(Dh)?rc.value=Dh:isString$1(Dh)&&Dh!==""?rc.value=(bh=document.querySelector(Dh))!=null?bh:void 0:tc.value&&(rc.value=getScrollContainer(tc.value)),rc.value&&(ic=useEventListener(rc,"scroll",gh),setTimeout(()=>dh(),100))}function vh(){!isClient||!rc.value||!gh||(ic==null||ic(),rc.value=void 0)}function ph(bh){if(bh.ctrlKey){if(bh.deltaY<0)return bh.preventDefault(),!1;if(bh.deltaY>0)return bh.preventDefault(),!1}}function yh(){ah.value&&(uc=useEventListener("wheel",ph,{passive:!1}),s=document.body.style.overflow,document.body.style.overflow="hidden",ec.value=!0,r("show"))}function xh(){uc==null||uc(),document.body.style.overflow=s,ec.value=!1,r("close")}function _h(bh){r("switch",bh)}return watch(()=>a.src,()=>{oh.value?(Ja.value=!0,ja.value=!1,vh(),fh()):uh()}),onMounted(()=>{oh.value?fh():uh()}),(bh,Dh)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"container",ref:tc},unref(p),{class:[unref(u).b(),bh.$attrs.class]}),[ja.value?renderSlot(bh.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(u).e("error"))},toDisplayString(unref(o)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[_.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(d),{src:_.value,loading:bh.loading,style:unref(rh),class:unref(eh),crossorigin:bh.crossorigin,onClick:yh,onLoad:ch,onError:hh}),null,16,["src","loading","crossorigin"])):createCommentVNode("v-if",!0),Ja.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(u).e("wrapper"))},[renderSlot(bh.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(u).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(ah)?(openBlock(),createElementBlock(Fragment,{key:2},[ec.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":bh.zIndex,"initial-index":unref(ih),infinite:bh.infinite,"zoom-rate":bh.zoomRate,"min-scale":bh.minScale,"max-scale":bh.maxScale,"url-list":bh.previewSrcList,crossorigin:bh.crossorigin,"hide-on-click-modal":bh.hideOnClickModal,teleported:bh.previewTeleported,"close-on-press-escape":bh.closeOnPressEscape,onClose:xh,onSwitch:_h},{default:withCtx(()=>[bh.$slots.viewer?(openBlock(),createElementBlock("div",{key:0},[renderSlot(bh.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],16))}});var Image$1=_export_sfc(_sfc_main$l,[["__file","image.vue"]]);const ElImage=withInstall(Image$1),inputNumberProps=buildProps({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:useSizeProp,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||isNumber$1(n)||["min","max"].includes(n),default:null},name:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),inputNumberEmits={[CHANGE_EVENT]:(n,r)=>r!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[INPUT_EVENT]:n=>isNumber$1(n)||isNil(n),[UPDATE_MODEL_EVENT]:n=>isNumber$1(n)||isNil(n)},__default__$6=defineComponent({name:"ElInputNumber"}),_sfc_main$k=defineComponent({...__default__$6,props:inputNumberProps,emits:inputNumberEmits,setup(n,{expose:r,emit:a}){const s=n,{t:o}=useLocale(),u=useNamespace("input-number"),c=ref(),p=reactive({currentValue:s.modelValue,userInput:null}),{formItem:d}=useFormItem(),_=computed(()=>isNumber$1(s.modelValue)&&s.modelValue<=s.min),ja=computed(()=>isNumber$1(s.modelValue)&&s.modelValue>=s.max),Ja=computed(()=>{const yh=uc(s.step);return isUndefined(s.precision)?Math.max(uc(s.modelValue),yh):(yh>s.precision,s.precision)}),ec=computed(()=>s.controls&&s.controlsPosition==="right"),tc=useFormSize(),rc=useFormDisabled(),nc=computed(()=>{if(p.userInput!==null)return p.userInput;let yh=p.currentValue;if(isNil(yh))return"";if(isNumber$1(yh)){if(Number.isNaN(yh))return"";isUndefined(s.precision)||(yh=yh.toFixed(s.precision))}return yh}),ic=(yh,xh)=>{if(isUndefined(xh)&&(xh=Ja.value),xh===0)return Math.round(yh);let _h=String(yh);const bh=_h.indexOf(".");if(bh===-1||!_h.replace(".","").split("")[bh+xh])return yh;const Ch=_h.length;return _h.charAt(Ch-1)==="5"&&(_h=`${_h.slice(0,Math.max(0,Ch-1))}6`),Number.parseFloat(Number(_h).toFixed(xh))},uc=yh=>{if(isNil(yh))return 0;const xh=yh.toString(),_h=xh.indexOf(".");let bh=0;return _h!==-1&&(bh=xh.length-_h-1),bh},eh=(yh,xh=1)=>isNumber$1(yh)?ic(yh+s.step*xh):p.currentValue,rh=()=>{if(s.readonly||rc.value||ja.value)return;const yh=Number(nc.value)||0,xh=eh(yh);oh(xh),a(INPUT_EVENT,p.currentValue),vh()},ah=()=>{if(s.readonly||rc.value||_.value)return;const yh=Number(nc.value)||0,xh=eh(yh,-1);oh(xh),a(INPUT_EVENT,p.currentValue),vh()},ih=(yh,xh)=>{const{max:_h,min:bh,step:Dh,precision:Th,stepStrictly:Ch,valueOnClear:wh}=s;_h<bh&&throwError$1("InputNumber","min should not be greater than max.");let Nh=Number(yh);if(isNil(yh)||Number.isNaN(Nh))return null;if(yh===""){if(wh===null)return null;Nh=isString$1(wh)?{min:bh,max:_h}[wh]:wh}return Ch&&(Nh=ic(Math.round(Nh/Dh)*Dh,Th)),isUndefined(Th)||(Nh=ic(Nh,Th)),(Nh>_h||Nh<bh)&&(Nh=Nh>_h?_h:bh,xh&&a(UPDATE_MODEL_EVENT,Nh)),Nh},oh=(yh,xh=!0)=>{var _h;const bh=p.currentValue,Dh=ih(yh);if(!xh){a(UPDATE_MODEL_EVENT,Dh);return}bh===Dh&&yh||(p.userInput=null,a(UPDATE_MODEL_EVENT,Dh),bh!==Dh&&a(CHANGE_EVENT,Dh,bh),s.validateEvent&&((_h=d==null?void 0:d.validate)==null||_h.call(d,"change").catch(Th=>debugWarn())),p.currentValue=Dh)},uh=yh=>{p.userInput=yh;const xh=yh===""?null:Number(yh);a(INPUT_EVENT,xh),oh(xh,!1)},ch=yh=>{const xh=yh!==""?Number(yh):"";(isNumber$1(xh)&&!Number.isNaN(xh)||yh==="")&&oh(xh),vh(),p.userInput=null},hh=()=>{var yh,xh;(xh=(yh=c.value)==null?void 0:yh.focus)==null||xh.call(yh)},dh=()=>{var yh,xh;(xh=(yh=c.value)==null?void 0:yh.blur)==null||xh.call(yh)},gh=yh=>{a("focus",yh)},fh=yh=>{var xh;p.userInput=null,a("blur",yh),s.validateEvent&&((xh=d==null?void 0:d.validate)==null||xh.call(d,"blur").catch(_h=>debugWarn()))},vh=()=>{p.currentValue!==s.modelValue&&(p.currentValue=s.modelValue)},ph=yh=>{document.activeElement===yh.target&&yh.preventDefault()};return watch(()=>s.modelValue,(yh,xh)=>{const _h=ih(yh,!0);p.userInput===null&&_h!==xh&&(p.currentValue=_h)},{immediate:!0}),onMounted(()=>{var yh;const{min:xh,max:_h,modelValue:bh}=s,Dh=(yh=c.value)==null?void 0:yh.input;if(Dh.setAttribute("role","spinbutton"),Number.isFinite(_h)?Dh.setAttribute("aria-valuemax",String(_h)):Dh.removeAttribute("aria-valuemax"),Number.isFinite(xh)?Dh.setAttribute("aria-valuemin",String(xh)):Dh.removeAttribute("aria-valuemin"),Dh.setAttribute("aria-valuenow",p.currentValue||p.currentValue===0?String(p.currentValue):""),Dh.setAttribute("aria-disabled",String(rc.value)),!isNumber$1(bh)&&bh!=null){let Th=Number(bh);Number.isNaN(Th)&&(Th=null),a(UPDATE_MODEL_EVENT,Th)}Dh.addEventListener("wheel",ph,{passive:!1})}),onUpdated(()=>{var yh,xh;const _h=(yh=c.value)==null?void 0:yh.input;_h==null||_h.setAttribute("aria-valuenow",`${(xh=p.currentValue)!=null?xh:""}`)}),r({focus:hh,blur:dh}),(yh,xh)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(u).b(),unref(u).m(unref(tc)),unref(u).is("disabled",unref(rc)),unref(u).is("without-controls",!yh.controls),unref(u).is("controls-right",unref(ec))]),onDragstart:withModifiers(()=>{},["prevent"])},[yh.controls?withDirectives((openBlock(),createElementBlock("span",{key:0,role:"button","aria-label":unref(o)("el.inputNumber.decrease"),class:normalizeClass([unref(u).e("decrease"),unref(u).is("disabled",unref(_))]),onKeydown:withKeys(ah,["enter"])},[renderSlot(yh.$slots,"decrease-icon",{},()=>[createVNode$1(unref(ElIcon),null,{default:withCtx(()=>[unref(ec)?(openBlock(),createBlock(unref(arrow_down_default),{key:0})):(openBlock(),createBlock(unref(minus_default),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[unref(vRepeatClick),ah]]):createCommentVNode("v-if",!0),yh.controls?withDirectives((openBlock(),createElementBlock("span",{key:1,role:"button","aria-label":unref(o)("el.inputNumber.increase"),class:normalizeClass([unref(u).e("increase"),unref(u).is("disabled",unref(ja))]),onKeydown:withKeys(rh,["enter"])},[renderSlot(yh.$slots,"increase-icon",{},()=>[createVNode$1(unref(ElIcon),null,{default:withCtx(()=>[unref(ec)?(openBlock(),createBlock(unref(arrow_up_default),{key:0})):(openBlock(),createBlock(unref(plus_default),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[unref(vRepeatClick),rh]]):createCommentVNode("v-if",!0),createVNode$1(unref(ElInput),{id:yh.id,ref_key:"input",ref:c,type:"number",step:yh.step,"model-value":unref(nc),placeholder:yh.placeholder,readonly:yh.readonly,disabled:unref(rc),size:unref(tc),max:yh.max,min:yh.min,name:yh.name,"aria-label":yh.ariaLabel,"validate-event":!1,onKeydown:[withKeys(withModifiers(rh,["prevent"]),["up"]),withKeys(withModifiers(ah,["prevent"]),["down"])],onBlur:fh,onFocus:gh,onInput:uh,onChange:ch},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var InputNumber=_export_sfc(_sfc_main$k,[["__file","input-number.vue"]]);const ElInputNumber=withInstall(InputNumber),linkProps=buildProps({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:iconPropType}}),linkEmits={click:n=>n instanceof MouseEvent},__default__$5=defineComponent({name:"ElLink"}),_sfc_main$j=defineComponent({...__default__$5,props:linkProps,emits:linkEmits,setup(n,{emit:r}){const a=n,s=useNamespace("link"),o=computed(()=>[s.b(),s.m(a.type),s.is("disabled",a.disabled),s.is("underline",a.underline&&!a.disabled)]);function u(c){a.disabled||r("click",c)}return(c,p)=>(openBlock(),createElementBlock("a",{class:normalizeClass(unref(o)),href:c.disabled||!c.href?void 0:c.href,target:c.disabled||!c.href?void 0:c.target,onClick:u},[c.icon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(c.icon)))]),_:1})):createCommentVNode("v-if",!0),c.$slots.default?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(s).e("inner"))},[renderSlot(c.$slots,"default")],2)):createCommentVNode("v-if",!0),c.$slots.icon?renderSlot(c.$slots,"icon",{key:2}):createCommentVNode("v-if",!0)],10,["href","target"]))}});var Link=_export_sfc(_sfc_main$j,[["__file","link.vue"]]);const ElLink=withInstall(Link),sliderContextKey=Symbol("sliderContextKey"),sliderProps=buildProps({modelValue:{type:definePropType([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:useSizeProp,inputSize:useSizeProp,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:definePropType(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:definePropType(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ee$3,default:"top"},marks:{type:definePropType(Object)},validateEvent:{type:Boolean,default:!0},...useAriaProps(["ariaLabel"])}),isValidValue=n=>isNumber$1(n)||isArray$2(n)&&n.every(isNumber$1),sliderEmits={[UPDATE_MODEL_EVENT]:isValidValue,[INPUT_EVENT]:isValidValue,[CHANGE_EVENT]:isValidValue},useLifecycle=(n,r,a)=>{const s=ref();return onMounted(async()=>{n.range?(Array.isArray(n.modelValue)?(r.firstValue=Math.max(n.min,n.modelValue[0]),r.secondValue=Math.min(n.max,n.modelValue[1])):(r.firstValue=n.min,r.secondValue=n.max),r.oldValue=[r.firstValue,r.secondValue]):(typeof n.modelValue!="number"||Number.isNaN(n.modelValue)?r.firstValue=n.min:r.firstValue=Math.min(n.max,Math.max(n.min,n.modelValue)),r.oldValue=r.firstValue),useEventListener(window,"resize",a),await nextTick(),a()}),{sliderWrapper:s}},useMarks=n=>computed(()=>n.marks?Object.keys(n.marks).map(Number.parseFloat).sort((a,s)=>a-s).filter(a=>a<=n.max&&a>=n.min).map(a=>({point:a,position:(a-n.min)*100/(n.max-n.min),mark:n.marks[a]})):[]),useSlide=(n,r,a)=>{const{form:s,formItem:o}=useFormItem(),u=shallowRef(),c=ref(),p=ref(),d={firstButton:c,secondButton:p},_=computed(()=>n.disabled||(s==null?void 0:s.disabled)||!1),ja=computed(()=>Math.min(r.firstValue,r.secondValue)),Ja=computed(()=>Math.max(r.firstValue,r.secondValue)),ec=computed(()=>n.range?`${100*(Ja.value-ja.value)/(n.max-n.min)}%`:`${100*(r.firstValue-n.min)/(n.max-n.min)}%`),tc=computed(()=>n.range?`${100*(ja.value-n.min)/(n.max-n.min)}%`:"0%"),rc=computed(()=>n.vertical?{height:n.height}:{}),nc=computed(()=>n.vertical?{height:ec.value,bottom:tc.value}:{width:ec.value,left:tc.value}),ic=()=>{u.value&&(r.sliderSize=u.value[`client${n.vertical?"Height":"Width"}`])},uc=fh=>{const vh=n.min+fh*(n.max-n.min)/100;if(!n.range)return c;let ph;return Math.abs(ja.value-vh)<Math.abs(Ja.value-vh)?ph=r.firstValue<r.secondValue?"firstButton":"secondButton":ph=r.firstValue>r.secondValue?"firstButton":"secondButton",d[ph]},eh=fh=>{const vh=uc(fh);return vh.value.setPosition(fh),vh},rh=fh=>{r.firstValue=fh??n.min,ih(n.range?[ja.value,Ja.value]:fh??n.min)},ah=fh=>{r.secondValue=fh,n.range&&ih([ja.value,Ja.value])},ih=fh=>{a(UPDATE_MODEL_EVENT,fh),a(INPUT_EVENT,fh)},oh=async()=>{await nextTick(),a(CHANGE_EVENT,n.range?[ja.value,Ja.value]:n.modelValue)},uh=fh=>{var vh,ph,yh,xh,_h,bh;if(_.value||r.dragging)return;ic();let Dh=0;if(n.vertical){const Th=(yh=(ph=(vh=fh.touches)==null?void 0:vh.item(0))==null?void 0:ph.clientY)!=null?yh:fh.clientY;Dh=(u.value.getBoundingClientRect().bottom-Th)/r.sliderSize*100}else{const Th=(bh=(_h=(xh=fh.touches)==null?void 0:xh.item(0))==null?void 0:_h.clientX)!=null?bh:fh.clientX,Ch=u.value.getBoundingClientRect().left;Dh=(Th-Ch)/r.sliderSize*100}if(!(Dh<0||Dh>100))return eh(Dh)};return{elFormItem:o,slider:u,firstButton:c,secondButton:p,sliderDisabled:_,minValue:ja,maxValue:Ja,runwayStyle:rc,barStyle:nc,resetSize:ic,setPosition:eh,emitChange:oh,onSliderWrapperPrevent:fh=>{var vh,ph;((vh=d.firstButton.value)!=null&&vh.dragging||(ph=d.secondButton.value)!=null&&ph.dragging)&&fh.preventDefault()},onSliderClick:fh=>{uh(fh)&&oh()},onSliderDown:async fh=>{const vh=uh(fh);vh&&(await nextTick(),vh.value.onButtonDown(fh))},onSliderMarkerDown:fh=>{_.value||r.dragging||eh(fh)},setFirstValue:rh,setSecondValue:ah}},{left,down,right,up:up$1,home,end:end$1,pageUp,pageDown}=EVENT_CODE,useTooltip=(n,r,a)=>{const s=ref(),o=ref(!1),u=computed(()=>r.value instanceof Function),c=computed(()=>u.value&&r.value(n.modelValue)||n.modelValue),p=debounce$1(()=>{a.value&&(o.value=!0)},50),d=debounce$1(()=>{a.value&&(o.value=!1)},50);return{tooltip:s,tooltipVisible:o,formatValue:c,displayTooltip:p,hideTooltip:d}},useSliderButton=(n,r,a)=>{const{disabled:s,min:o,max:u,step:c,showTooltip:p,precision:d,sliderSize:_,formatTooltip:ja,emitChange:Ja,resetSize:ec,updateDragging:tc}=inject(sliderContextKey),{tooltip:rc,tooltipVisible:nc,formatValue:ic,displayTooltip:uc,hideTooltip:eh}=useTooltip(n,ja,p),rh=ref(),ah=computed(()=>`${(n.modelValue-o.value)/(u.value-o.value)*100}%`),ih=computed(()=>n.vertical?{bottom:ah.value}:{left:ah.value}),oh=()=>{r.hovering=!0,uc()},uh=()=>{r.hovering=!1,r.dragging||eh()},ch=wh=>{s.value||(wh.preventDefault(),bh(wh),window.addEventListener("mousemove",Dh),window.addEventListener("touchmove",Dh),window.addEventListener("mouseup",Th),window.addEventListener("touchend",Th),window.addEventListener("contextmenu",Th),rh.value.focus())},hh=wh=>{s.value||(r.newPosition=Number.parseFloat(ah.value)+wh/(u.value-o.value)*100,Ch(r.newPosition),Ja())},dh=()=>{hh(-c.value)},gh=()=>{hh(c.value)},fh=()=>{hh(-c.value*4)},vh=()=>{hh(c.value*4)},ph=()=>{s.value||(Ch(0),Ja())},yh=()=>{s.value||(Ch(100),Ja())},xh=wh=>{let Nh=!0;[left,down].includes(wh.key)?dh():[right,up$1].includes(wh.key)?gh():wh.key===home?ph():wh.key===end$1?yh():wh.key===pageDown?fh():wh.key===pageUp?vh():Nh=!1,Nh&&wh.preventDefault()},_h=wh=>{let Nh,Rh;return wh.type.startsWith("touch")?(Rh=wh.touches[0].clientY,Nh=wh.touches[0].clientX):(Rh=wh.clientY,Nh=wh.clientX),{clientX:Nh,clientY:Rh}},bh=wh=>{r.dragging=!0,r.isClick=!0;const{clientX:Nh,clientY:Rh}=_h(wh);n.vertical?r.startY=Rh:r.startX=Nh,r.startPosition=Number.parseFloat(ah.value),r.newPosition=r.startPosition},Dh=wh=>{if(r.dragging){r.isClick=!1,uc(),ec();let Nh;const{clientX:Rh,clientY:kh}=_h(wh);n.vertical?(r.currentY=kh,Nh=(r.startY-r.currentY)/_.value*100):(r.currentX=Rh,Nh=(r.currentX-r.startX)/_.value*100),r.newPosition=r.startPosition+Nh,Ch(r.newPosition)}},Th=()=>{r.dragging&&(setTimeout(()=>{r.dragging=!1,r.hovering||eh(),r.isClick||Ch(r.newPosition),Ja()},0),window.removeEventListener("mousemove",Dh),window.removeEventListener("touchmove",Dh),window.removeEventListener("mouseup",Th),window.removeEventListener("touchend",Th),window.removeEventListener("contextmenu",Th))},Ch=async wh=>{if(wh===null||Number.isNaN(+wh))return;wh<0?wh=0:wh>100&&(wh=100);const Nh=100/((u.value-o.value)/c.value);let kh=Math.round(wh/Nh)*Nh*(u.value-o.value)*.01+o.value;kh=Number.parseFloat(kh.toFixed(d.value)),kh!==n.modelValue&&a(UPDATE_MODEL_EVENT,kh),!r.dragging&&n.modelValue!==r.oldValue&&(r.oldValue=n.modelValue),await nextTick(),r.dragging&&uc(),rc.value.updatePopper()};return watch(()=>r.dragging,wh=>{tc(wh)}),useEventListener(rh,"touchstart",ch,{passive:!1}),{disabled:s,button:rh,tooltip:rc,tooltipVisible:nc,showTooltip:p,wrapperStyle:ih,formatValue:ic,handleMouseEnter:oh,handleMouseLeave:uh,onButtonDown:ch,onKeyDown:xh,setPosition:Ch}},useStops=(n,r,a,s)=>({stops:computed(()=>{if(!n.showStops||n.min>n.max)return[];if(n.step===0)return[];const c=(n.max-n.min)/n.step,p=100*n.step/(n.max-n.min),d=Array.from({length:c-1}).map((_,ja)=>(ja+1)*p);return n.range?d.filter(_=>_<100*(a.value-n.min)/(n.max-n.min)||_>100*(s.value-n.min)/(n.max-n.min)):d.filter(_=>_>100*(r.firstValue-n.min)/(n.max-n.min))}),getStopStyle:c=>n.vertical?{bottom:`${c}%`}:{left:`${c}%`}}),useWatch=(n,r,a,s,o,u)=>{const c=_=>{o(UPDATE_MODEL_EVENT,_),o(INPUT_EVENT,_)},p=()=>n.range?![a.value,s.value].every((_,ja)=>_===r.oldValue[ja]):n.modelValue!==r.oldValue,d=()=>{var _,ja;n.min>n.max&&throwError$1("Slider","min should not be greater than max.");const Ja=n.modelValue;n.range&&Array.isArray(Ja)?Ja[1]<n.min?c([n.min,n.min]):Ja[0]>n.max?c([n.max,n.max]):Ja[0]<n.min?c([n.min,Ja[1]]):Ja[1]>n.max?c([Ja[0],n.max]):(r.firstValue=Ja[0],r.secondValue=Ja[1],p()&&(n.validateEvent&&((_=u==null?void 0:u.validate)==null||_.call(u,"change").catch(ec=>debugWarn())),r.oldValue=Ja.slice())):!n.range&&typeof Ja=="number"&&!Number.isNaN(Ja)&&(Ja<n.min?c(n.min):Ja>n.max?c(n.max):(r.firstValue=Ja,p()&&(n.validateEvent&&((ja=u==null?void 0:u.validate)==null||ja.call(u,"change").catch(ec=>debugWarn())),r.oldValue=Ja)))};d(),watch(()=>r.dragging,_=>{_||d()}),watch(()=>n.modelValue,(_,ja)=>{r.dragging||Array.isArray(_)&&Array.isArray(ja)&&_.every((Ja,ec)=>Ja===ja[ec])&&r.firstValue===_[0]&&r.secondValue===_[1]||d()},{deep:!0}),watch(()=>[n.min,n.max],()=>{d()})},sliderButtonProps=buildProps({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ee$3,default:"top"}}),sliderButtonEmits={[UPDATE_MODEL_EVENT]:n=>isNumber$1(n)},__default__$4=defineComponent({name:"ElSliderButton"}),_sfc_main$i=defineComponent({...__default__$4,props:sliderButtonProps,emits:sliderButtonEmits,setup(n,{expose:r,emit:a}){const s=n,o=useNamespace("slider"),u=reactive({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:s.modelValue}),{disabled:c,button:p,tooltip:d,showTooltip:_,tooltipVisible:ja,wrapperStyle:Ja,formatValue:ec,handleMouseEnter:tc,handleMouseLeave:rc,onButtonDown:nc,onKeyDown:ic,setPosition:uc}=useSliderButton(s,u,a),{hovering:eh,dragging:rh}=toRefs(u);return r({onButtonDown:nc,onKeyDown:ic,setPosition:uc,hovering:eh,dragging:rh}),(ah,ih)=>(openBlock(),createElementBlock("div",{ref_key:"button",ref:p,class:normalizeClass([unref(o).e("button-wrapper"),{hover:unref(eh),dragging:unref(rh)}]),style:normalizeStyle$1(unref(Ja)),tabindex:unref(c)?-1:0,onMouseenter:unref(tc),onMouseleave:unref(rc),onMousedown:unref(nc),onFocus:unref(tc),onBlur:unref(rc),onKeydown:unref(ic)},[createVNode$1(unref(ElTooltip),{ref_key:"tooltip",ref:d,visible:unref(ja),placement:ah.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":ah.tooltipClass,disabled:!unref(_),persistent:""},{content:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(ec)),1)]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass([unref(o).e("button"),{hover:unref(eh),dragging:unref(rh)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var SliderButton=_export_sfc(_sfc_main$i,[["__file","button.vue"]]);const sliderMarkerProps=buildProps({mark:{type:definePropType([String,Object]),default:void 0}});var SliderMarker=defineComponent({name:"ElSliderMarker",props:sliderMarkerProps,setup(n){const r=useNamespace("slider"),a=computed(()=>isString$1(n.mark)?n.mark:n.mark.label),s=computed(()=>isString$1(n.mark)?void 0:n.mark.style);return()=>h$1("div",{class:r.e("marks-text"),style:s.value},a.value)}});const __default__$3=defineComponent({name:"ElSlider"}),_sfc_main$h=defineComponent({...__default__$3,props:sliderProps,emits:sliderEmits,setup(n,{expose:r,emit:a}){const s=n,o=useNamespace("slider"),{t:u}=useLocale(),c=reactive({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:p,slider:d,firstButton:_,secondButton:ja,sliderDisabled:Ja,minValue:ec,maxValue:tc,runwayStyle:rc,barStyle:nc,resetSize:ic,emitChange:uc,onSliderWrapperPrevent:eh,onSliderClick:rh,onSliderDown:ah,onSliderMarkerDown:ih,setFirstValue:oh,setSecondValue:uh}=useSlide(s,c,a),{stops:ch,getStopStyle:hh}=useStops(s,c,ec,tc),{inputId:dh,isLabeledByFormItem:gh}=useFormItemInputId(s,{formItemContext:p}),fh=useFormSize(),vh=computed(()=>s.inputSize||fh.value),ph=computed(()=>s.ariaLabel||u("el.slider.defaultLabel",{min:s.min,max:s.max})),yh=computed(()=>s.range?s.rangeStartLabel||u("el.slider.defaultRangeStartLabel"):ph.value),xh=computed(()=>s.formatValueText?s.formatValueText(Nh.value):`${Nh.value}`),_h=computed(()=>s.rangeEndLabel||u("el.slider.defaultRangeEndLabel")),bh=computed(()=>s.formatValueText?s.formatValueText(Rh.value):`${Rh.value}`),Dh=computed(()=>[o.b(),o.m(fh.value),o.is("vertical",s.vertical),{[o.m("with-input")]:s.showInput}]),Th=useMarks(s);useWatch(s,c,ec,tc,a,p);const Ch=computed(()=>{const Fh=[s.min,s.max,s.step].map(Wh=>{const Qh=`${Wh}`.split(".")[1];return Qh?Qh.length:0});return Math.max.apply(null,Fh)}),{sliderWrapper:wh}=useLifecycle(s,c,ic),{firstValue:Nh,secondValue:Rh,sliderSize:kh}=toRefs(c),Lh=Fh=>{c.dragging=Fh};return useEventListener(wh,"touchstart",eh,{passive:!1}),useEventListener(wh,"touchmove",eh,{passive:!1}),provide(sliderContextKey,{...toRefs(s),sliderSize:kh,disabled:Ja,precision:Ch,emitChange:uc,resetSize:ic,updateDragging:Lh}),r({onSliderClick:rh}),(Fh,Wh)=>{var Qh,jh;return openBlock(),createElementBlock("div",{id:Fh.range?unref(dh):void 0,ref_key:"sliderWrapper",ref:wh,class:normalizeClass(unref(Dh)),role:Fh.range?"group":void 0,"aria-label":Fh.range&&!unref(gh)?unref(ph):void 0,"aria-labelledby":Fh.range&&unref(gh)?(Qh=unref(p))==null?void 0:Qh.labelId:void 0},[createBaseVNode("div",{ref_key:"slider",ref:d,class:normalizeClass([unref(o).e("runway"),{"show-input":Fh.showInput&&!Fh.range},unref(o).is("disabled",unref(Ja))]),style:normalizeStyle$1(unref(rc)),onMousedown:unref(ah),onTouchstartPassive:unref(ah)},[createBaseVNode("div",{class:normalizeClass(unref(o).e("bar")),style:normalizeStyle$1(unref(nc))},null,6),createVNode$1(SliderButton,{id:Fh.range?void 0:unref(dh),ref_key:"firstButton",ref:_,"model-value":unref(Nh),vertical:Fh.vertical,"tooltip-class":Fh.tooltipClass,placement:Fh.placement,role:"slider","aria-label":Fh.range||!unref(gh)?unref(yh):void 0,"aria-labelledby":!Fh.range&&unref(gh)?(jh=unref(p))==null?void 0:jh.labelId:void 0,"aria-valuemin":Fh.min,"aria-valuemax":Fh.range?unref(Rh):Fh.max,"aria-valuenow":unref(Nh),"aria-valuetext":unref(xh),"aria-orientation":Fh.vertical?"vertical":"horizontal","aria-disabled":unref(Ja),"onUpdate:modelValue":unref(oh)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),Fh.range?(openBlock(),createBlock(SliderButton,{key:0,ref_key:"secondButton",ref:ja,"model-value":unref(Rh),vertical:Fh.vertical,"tooltip-class":Fh.tooltipClass,placement:Fh.placement,role:"slider","aria-label":unref(_h),"aria-valuemin":unref(Nh),"aria-valuemax":Fh.max,"aria-valuenow":unref(Rh),"aria-valuetext":unref(bh),"aria-orientation":Fh.vertical?"vertical":"horizontal","aria-disabled":unref(Ja),"onUpdate:modelValue":unref(uh)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):createCommentVNode("v-if",!0),Fh.showStops?(openBlock(),createElementBlock("div",{key:1},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ch),(Hh,qh)=>(openBlock(),createElementBlock("div",{key:qh,class:normalizeClass(unref(o).e("stop")),style:normalizeStyle$1(unref(hh)(Hh))},null,6))),128))])):createCommentVNode("v-if",!0),unref(Th).length>0?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Th),(Hh,qh)=>(openBlock(),createElementBlock("div",{key:qh,style:normalizeStyle$1(unref(hh)(Hh.position)),class:normalizeClass([unref(o).e("stop"),unref(o).e("marks-stop")])},null,6))),128))]),createBaseVNode("div",{class:normalizeClass(unref(o).e("marks"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Th),(Hh,qh)=>(openBlock(),createBlock(unref(SliderMarker),{key:qh,mark:Hh.mark,style:normalizeStyle$1(unref(hh)(Hh.position)),onMousedown:withModifiers(nd=>unref(ih)(Hh.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):createCommentVNode("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),Fh.showInput&&!Fh.range?(openBlock(),createBlock(unref(ElInputNumber),{key:0,ref:"input","model-value":unref(Nh),class:normalizeClass(unref(o).e("input")),step:Fh.step,disabled:unref(Ja),controls:Fh.showInputControls,min:Fh.min,max:Fh.max,precision:unref(Ch),debounce:Fh.debounce,size:unref(vh),"onUpdate:modelValue":unref(oh),onChange:unref(uc)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):createCommentVNode("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var Slider=_export_sfc(_sfc_main$h,[["__file","slider.vue"]]);const ElSlider=withInstall(Slider),statisticProps=buildProps({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:definePropType([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:definePropType([String,Object,Array])}}),__default__$2=defineComponent({name:"ElStatistic"}),_sfc_main$g=defineComponent({...__default__$2,props:statisticProps,setup(n,{expose:r}){const a=n,s=useNamespace("statistic"),o=computed(()=>{const{value:u,formatter:c,precision:p,decimalSeparator:d,groupSeparator:_}=a;if(isFunction$1(c))return c(u);if(!isNumber$1(u)||Number.isNaN(u))return u;let[ja,Ja=""]=String(u).split(".");return Ja=Ja.padEnd(p,"0").slice(0,p>0?p:0),ja=ja.replace(/\B(?=(\d{3})+(?!\d))/g,_),[ja,Ja].join(Ja?d:"")});return r({displayValue:o}),(u,c)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(s).b())},[u.$slots.title||u.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(s).e("head"))},[renderSlot(u.$slots,"title",{},()=>[createTextVNode(toDisplayString(u.title),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(s).e("content"))},[u.$slots.prefix||u.prefix?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(s).e("prefix"))},[renderSlot(u.$slots,"prefix",{},()=>[createBaseVNode("span",null,toDisplayString(u.prefix),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(unref(s).e("number")),style:normalizeStyle$1(u.valueStyle)},toDisplayString(unref(o)),7),u.$slots.suffix||u.suffix?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(s).e("suffix"))},[renderSlot(u.$slots,"suffix",{},()=>[createBaseVNode("span",null,toDisplayString(u.suffix),1)])],2)):createCommentVNode("v-if",!0)],2)],2))}});var Statistic=_export_sfc(_sfc_main$g,[["__file","statistic.vue"]]);const ElStatistic=withInstall(Statistic),tabsRootContextKey=Symbol("tabsRootContextKey"),tabBarProps=buildProps({tabs:{type:definePropType(Array),default:()=>mutable([])}}),COMPONENT_NAME$2="ElTabBar",__default__$1=defineComponent({name:COMPONENT_NAME$2}),_sfc_main$f=defineComponent({...__default__$1,props:tabBarProps,setup(n,{expose:r}){const a=n,s=getCurrentInstance(),o=inject(tabsRootContextKey);o||throwError$1(COMPONENT_NAME$2,"<el-tabs><el-tab-bar /></el-tabs>");const u=useNamespace("tabs"),c=ref(),p=ref(),d=()=>{let ja=0,Ja=0;const ec=["top","bottom"].includes(o.props.tabPosition)?"width":"height",tc=ec==="width"?"x":"y",rc=tc==="x"?"left":"top";return a.tabs.every(nc=>{var ic,uc;const eh=(uc=(ic=s.parent)==null?void 0:ic.refs)==null?void 0:uc[`tab-${nc.uid}`];if(!eh)return!1;if(!nc.active)return!0;ja=eh[`offset${capitalize(rc)}`],Ja=eh[`client${capitalize(ec)}`];const rh=window.getComputedStyle(eh);return ec==="width"&&(Ja-=Number.parseFloat(rh.paddingLeft)+Number.parseFloat(rh.paddingRight),ja+=Number.parseFloat(rh.paddingLeft)),!1}),{[ec]:`${Ja}px`,transform:`translate${capitalize(tc)}(${ja}px)`}},_=()=>p.value=d();return watch(()=>a.tabs,async()=>{await nextTick(),_()},{immediate:!0}),useResizeObserver(c,()=>_()),r({ref:c,update:_}),(ja,Ja)=>(openBlock(),createElementBlock("div",{ref_key:"barRef",ref:c,class:normalizeClass([unref(u).e("active-bar"),unref(u).is(unref(o).props.tabPosition)]),style:normalizeStyle$1(p.value)},null,6))}});var TabBar=_export_sfc(_sfc_main$f,[["__file","tab-bar.vue"]]);const tabNavProps=buildProps({panes:{type:definePropType(Array),default:()=>mutable([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),tabNavEmits={tabClick:(n,r,a)=>a instanceof Event,tabRemove:(n,r)=>r instanceof Event},COMPONENT_NAME$1="ElTabNav",TabNav=defineComponent({name:COMPONENT_NAME$1,props:tabNavProps,emits:tabNavEmits,setup(n,{expose:r,emit:a}){const s=inject(tabsRootContextKey);s||throwError$1(COMPONENT_NAME$1,"<el-tabs><tab-nav /></el-tabs>");const o=useNamespace("tabs"),u=useDocumentVisibility(),c=useWindowFocus(),p=ref(),d=ref(),_=ref(),ja=ref(),Ja=ref(!1),ec=ref(0),tc=ref(!1),rc=ref(!0),nc=computed(()=>["top","bottom"].includes(s.props.tabPosition)?"width":"height"),ic=computed(()=>({transform:`translate${nc.value==="width"?"X":"Y"}(-${ec.value}px)`})),uc=()=>{if(!p.value)return;const ch=p.value[`offset${capitalize(nc.value)}`],hh=ec.value;if(!hh)return;const dh=hh>ch?hh-ch:0;ec.value=dh},eh=()=>{if(!p.value||!d.value)return;const ch=d.value[`offset${capitalize(nc.value)}`],hh=p.value[`offset${capitalize(nc.value)}`],dh=ec.value;if(ch-dh<=hh)return;const gh=ch-dh>hh*2?dh+hh:ch-hh;ec.value=gh},rh=async()=>{const ch=d.value;if(!Ja.value||!_.value||!p.value||!ch)return;await nextTick();const hh=_.value.querySelector(".is-active");if(!hh)return;const dh=p.value,gh=["top","bottom"].includes(s.props.tabPosition),fh=hh.getBoundingClientRect(),vh=dh.getBoundingClientRect(),ph=gh?ch.offsetWidth-vh.width:ch.offsetHeight-vh.height,yh=ec.value;let xh=yh;gh?(fh.left<vh.left&&(xh=yh-(vh.left-fh.left)),fh.right>vh.right&&(xh=yh+fh.right-vh.right)):(fh.top<vh.top&&(xh=yh-(vh.top-fh.top)),fh.bottom>vh.bottom&&(xh=yh+(fh.bottom-vh.bottom))),xh=Math.max(xh,0),ec.value=Math.min(xh,ph)},ah=()=>{var ch;if(!d.value||!p.value)return;n.stretch&&((ch=ja.value)==null||ch.update());const hh=d.value[`offset${capitalize(nc.value)}`],dh=p.value[`offset${capitalize(nc.value)}`],gh=ec.value;dh<hh?(Ja.value=Ja.value||{},Ja.value.prev=gh,Ja.value.next=gh+dh<hh,hh-gh<dh&&(ec.value=hh-dh)):(Ja.value=!1,gh>0&&(ec.value=0))},ih=ch=>{const hh=ch.code,{up:dh,down:gh,left:fh,right:vh}=EVENT_CODE;if(![dh,gh,fh,vh].includes(hh))return;const ph=Array.from(ch.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),yh=ph.indexOf(ch.target);let xh;hh===fh||hh===dh?yh===0?xh=ph.length-1:xh=yh-1:yh<ph.length-1?xh=yh+1:xh=0,ph[xh].focus({preventScroll:!0}),ph[xh].click(),oh()},oh=()=>{rc.value&&(tc.value=!0)},uh=()=>tc.value=!1;return watch(u,ch=>{ch==="hidden"?rc.value=!1:ch==="visible"&&setTimeout(()=>rc.value=!0,50)}),watch(c,ch=>{ch?setTimeout(()=>rc.value=!0,50):rc.value=!1}),useResizeObserver(_,ah),onMounted(()=>setTimeout(()=>rh(),0)),onUpdated(()=>ah()),r({scrollToActiveTab:rh,removeFocus:uh}),()=>{const ch=Ja.value?[createVNode$1("span",{class:[o.e("nav-prev"),o.is("disabled",!Ja.value.prev)],onClick:uc},[createVNode$1(ElIcon,null,{default:()=>[createVNode$1(arrow_left_default,null,null)]})]),createVNode$1("span",{class:[o.e("nav-next"),o.is("disabled",!Ja.value.next)],onClick:eh},[createVNode$1(ElIcon,null,{default:()=>[createVNode$1(arrow_right_default,null,null)]})])]:null,hh=n.panes.map((dh,gh)=>{var fh,vh,ph,yh;const xh=dh.uid,_h=dh.props.disabled,bh=(vh=(fh=dh.props.name)!=null?fh:dh.index)!=null?vh:`${gh}`,Dh=!_h&&(dh.isClosable||n.editable);dh.index=`${gh}`;const Th=Dh?createVNode$1(ElIcon,{class:"is-icon-close",onClick:Nh=>a("tabRemove",dh,Nh)},{default:()=>[createVNode$1(close_default,null,null)]}):null,Ch=((yh=(ph=dh.slots).label)==null?void 0:yh.call(ph))||dh.props.label,wh=!_h&&dh.active?0:-1;return createVNode$1("div",{ref:`tab-${xh}`,class:[o.e("item"),o.is(s.props.tabPosition),o.is("active",dh.active),o.is("disabled",_h),o.is("closable",Dh),o.is("focus",tc.value)],id:`tab-${bh}`,key:`tab-${xh}`,"aria-controls":`pane-${bh}`,role:"tab","aria-selected":dh.active,tabindex:wh,onFocus:()=>oh(),onBlur:()=>uh(),onClick:Nh=>{uh(),a("tabClick",dh,bh,Nh)},onKeydown:Nh=>{Dh&&(Nh.code===EVENT_CODE.delete||Nh.code===EVENT_CODE.backspace)&&a("tabRemove",dh,Nh)}},[Ch,Th])});return createVNode$1("div",{ref:_,class:[o.e("nav-wrap"),o.is("scrollable",!!Ja.value),o.is(s.props.tabPosition)]},[ch,createVNode$1("div",{class:o.e("nav-scroll"),ref:p},[createVNode$1("div",{class:[o.e("nav"),o.is(s.props.tabPosition),o.is("stretch",n.stretch&&["top","bottom"].includes(s.props.tabPosition))],ref:d,style:ic.value,role:"tablist",onKeydown:ih},[n.type?null:createVNode$1(TabBar,{ref:ja,tabs:[...n.panes]},null),hh])])])}}}),tabsProps=buildProps({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:definePropType(Function),default:()=>!0},stretch:Boolean}),isPaneName=n=>isString$1(n)||isNumber$1(n),tabsEmits={[UPDATE_MODEL_EVENT]:n=>isPaneName(n),tabClick:(n,r)=>r instanceof Event,tabChange:n=>isPaneName(n),edit:(n,r)=>["remove","add"].includes(r),tabRemove:n=>isPaneName(n),tabAdd:()=>!0},Tabs=defineComponent({name:"ElTabs",props:tabsProps,emits:tabsEmits,setup(n,{emit:r,slots:a,expose:s}){var o;const u=useNamespace("tabs"),c=computed(()=>["left","right"].includes(n.tabPosition)),{children:p,addChild:d,removeChild:_}=useOrderedChildren(getCurrentInstance(),"ElTabPane"),ja=ref(),Ja=ref((o=n.modelValue)!=null?o:"0"),ec=async(uc,eh=!1)=>{var rh,ah,ih;if(!(Ja.value===uc||isUndefined(uc)))try{await((rh=n.beforeLeave)==null?void 0:rh.call(n,uc,Ja.value))!==!1&&(Ja.value=uc,eh&&(r(UPDATE_MODEL_EVENT,uc),r("tabChange",uc)),(ih=(ah=ja.value)==null?void 0:ah.removeFocus)==null||ih.call(ah))}catch{}},tc=(uc,eh,rh)=>{uc.props.disabled||(ec(eh,!0),r("tabClick",uc,rh))},rc=(uc,eh)=>{uc.props.disabled||isUndefined(uc.props.name)||(eh.stopPropagation(),r("edit",uc.props.name,"remove"),r("tabRemove",uc.props.name))},nc=()=>{r("edit",void 0,"add"),r("tabAdd")};watch(()=>n.modelValue,uc=>ec(uc)),watch(Ja,async()=>{var uc;await nextTick(),(uc=ja.value)==null||uc.scrollToActiveTab()}),provide(tabsRootContextKey,{props:n,currentName:Ja,registerPane:uc=>{p.value.push(uc)},sortPane:d,unregisterPane:_}),s({currentName:Ja});const ic=({render:uc})=>uc();return()=>{const uc=a["add-icon"],eh=n.editable||n.addable?createVNode$1("div",{class:[u.e("new-tab"),c.value&&u.e("new-tab-vertical")],tabindex:"0",onClick:nc,onKeydown:ih=>{ih.code===EVENT_CODE.enter&&nc()}},[uc?renderSlot(a,"add-icon"):createVNode$1(ElIcon,{class:u.is("icon-plus")},{default:()=>[createVNode$1(plus_default,null,null)]})]):null,rh=createVNode$1("div",{class:[u.e("header"),c.value&&u.e("header-vertical"),u.is(n.tabPosition)]},[createVNode$1(ic,{render:()=>{const ih=p.value.some(oh=>oh.slots.label);return createVNode$1(TabNav,{ref:ja,currentName:Ja.value,editable:n.editable,type:n.type,panes:p.value,stretch:n.stretch,onTabClick:tc,onTabRemove:rc},{$stable:!ih})}},null),eh]),ah=createVNode$1("div",{class:u.e("content")},[renderSlot(a,"default")]);return createVNode$1("div",{class:[u.b(),u.m(n.tabPosition),{[u.m("card")]:n.type==="card",[u.m("border-card")]:n.type==="border-card"}]},[ah,rh])}}}),tabPaneProps=buildProps({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),COMPONENT_NAME="ElTabPane",__default__=defineComponent({name:COMPONENT_NAME}),_sfc_main$e=defineComponent({...__default__,props:tabPaneProps,setup(n){const r=n,a=getCurrentInstance(),s=useSlots(),o=inject(tabsRootContextKey);o||throwError$1(COMPONENT_NAME,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const u=useNamespace("tab-pane"),c=ref(),p=computed(()=>r.closable||o.props.closable),d=computedEager(()=>{var tc;return o.currentName.value===((tc=r.name)!=null?tc:c.value)}),_=ref(d.value),ja=computed(()=>{var tc;return(tc=r.name)!=null?tc:c.value}),Ja=computedEager(()=>!r.lazy||_.value||d.value);watch(d,tc=>{tc&&(_.value=!0)});const ec=reactive({uid:a.uid,slots:s,props:r,paneName:ja,active:d,index:c,isClosable:p});return o.registerPane(ec),onMounted(()=>{o.sortPane(ec)}),onUnmounted(()=>{o.unregisterPane(ec.uid)}),(tc,rc)=>unref(Ja)?withDirectives((openBlock(),createElementBlock("div",{key:0,id:`pane-${unref(ja)}`,class:normalizeClass(unref(u).b()),role:"tabpanel","aria-hidden":!unref(d),"aria-labelledby":`tab-${unref(ja)}`},[renderSlot(tc.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[vShow,unref(d)]]):createCommentVNode("v-if",!0)}});var TabPane=_export_sfc(_sfc_main$e,[["__file","tab-pane.vue"]]);const ElTabs=withInstall(Tabs,{TabPane}),ElTabPane=withNoopInstall(TabPane);function debounce(n,r){let a=null;return function(...s){let o=this;a&&clearTimeout(a),a=setTimeout(()=>{n.apply(o,s),a=null},r)}}function throttle$1(n,r){let a=null;return function(...s){let o=this;a||(n.apply(o,s),a=setTimeout(()=>a=null,r))}}function generateRule(n,r){return{none:{required:!1},default:{required:!0,message:r,trigger:"change"},phone:{required:!0,validator:new Function("rule","value","callback",`if (value === '') {
          callback(new Error('${r}'))
        } else {
          if (!/^1[3-9]\\d{9}$/.test(value)) {
            callback(new Error('${r}'))
          }
          callback()
        }`),trigger:"blur"}}[n]}class UndoHistory{constructor(){Zp(this,"history",[]);Zp(this,"maxLength",10);Zp(this,"index",-1)}push(r){let a=this.history.slice(0,this.index+1);a.push(r),this.index=a.length-1,a.length>this.maxLength&&a.shift(),this.history=a}undo(r){const{index:a,history:s}=this;if(a<0)return;const o=a===0?s[0]:s[--this.index];r(o)}redo(r){const{index:a,history:s}=this,o=s.length;if(a>o-1)return;const u=a===o-1?s[o-1]:s[++this.index];r(u)}}function camel2Kebab(n){return n.replaceAll(/[A-Z]/g,r=>`-${r.toLowerCase()}`)}function obj2Style(n){const r=[];for(const[a,s]of Object.entries(n))r.push(`${camel2Kebab(a)}: ${s===""?"unset":s.toString().replaceAll('"',"")}`);return`{
  ${r.join(`;
  `)};
}
`}function setElStylePos(n,r,a,s){let{[a]:o}=n.getBoundingClientRect();const u=()=>{if(!s)return 1;const _=window.getComputedStyle(s).getPropertyValue("transform").match(/matrix\(([-\d\.]+), ([-\d\.]+), ([-\d\.]+), ([-\d\.]+), ([-\d\.]+), ([-\d\.]+)\)/);return+(_==null?void 0:_[1])||1};let c=window.getComputedStyle(n).getPropertyValue(a);c=Number.parseFloat(c)||0,n.style[a]=`${(r-o)/u()+c}px`}function isComponent(n){return!!(n!=null&&n.render||n!=null&&n.setup)}async function text2Img(n){const r=new Image,a=document.createElement("canvas"),s=a.getContext("2d"),o=15;s.font=`${o}px math`;const u=s.measureText(n).width,c=10,p=c*2;return s.strokeStyle="rgb(0 100 200 / 1)",s.strokeRect(0,0,u+p,o+p),s.fillStyle="rgb(0 100 200 / 0.5)",s.fillRect(0,0,u+p,o+p),s.fillStyle="#fff",s.textBaseline="top",s.fillText(n,c,c),r.src=a.toDataURL(),await new Promise(d=>{r.onload=d}),r}async function file2Base64(n){const r=new FileReader,a=new Promise(s=>{r.addEventListener("load",()=>s(r.result))});return r.readAsDataURL(n),a}function uploadFile(n){const r=document.createElement("input");r.setAttribute("type","file"),r.click(),r.onchange=function(){n==null||n(r.files[0])}}function downloadFile(n,r=""){const a=new File([n],r),s=URL.createObjectURL(a),o=document.createElement("A");o.download=r,o.href=s,o.click(),URL.revokeObjectURL(s)}function gps2Amap([n,r]){function a(p,d){let _=-100+2*p+3*d+.2*d*d+.1*p*d+.2*Math.sqrt(Math.abs(p));return _+=(20*Math.sin(6*p*Math.PI)+20*Math.sin(2*p*Math.PI))*2/3,_+=(20*Math.sin(d*Math.PI)+40*Math.sin(d/3*Math.PI))*2/3,_+=(160*Math.sin(d/12*Math.PI)+320*Math.sin(d*Math.PI/30))*2/3,_}function s(p,d){let _=300+p+2*d+.1*p*p+.1*p*d+.1*Math.sqrt(Math.abs(p));return _+=(20*Math.sin(6*p*Math.PI)+20*Math.sin(2*p*Math.PI))*2/3,_+=(20*Math.sin(p*Math.PI)+40*Math.sin(p/3*Math.PI))*2/3,_+=(150*Math.sin(p/12*Math.PI)+300*Math.sin(p/30*Math.PI))*2/3,_}function o(p,d){let _=6378245,ja=.006693421622965943,Ja=a(p-105,d-35),ec=s(p-105,d-35),tc=d/180*Math.PI,rc=Math.sin(tc);rc=1-ja*rc*rc;let nc=Math.sqrt(rc);return Ja=Ja*180/(_*(1-ja)/(rc*nc)*Math.PI),ec=ec*180/(_/nc*Math.cos(tc)*Math.PI),{longitude:ec,latitude:Ja}}function u(p,d){return p<72.004||p>137.8347||d<.8293||d>55.8271}function c(p,d){let _=Number(p),ja=Number(d);if(u(p,ja))return[_,ja];{let Ja=o(_,ja);return[_+Ja.longitude,ja+Ja.latitude]}}return c(n,r)}function baidu2Amap([n,r]){let a=Math.PI*3e3/180,s=n-.0065,o=r-.006,u=Math.sqrt(s*s+o*o)-2e-5*Math.sin(o*a),c=Math.atan2(o,s)-3e-6*Math.cos(s*a),p=u*Math.cos(c),d=u*Math.sin(c);return[p,d]}function getVisibleRect(n){const r=n.offsetParent;return window.getComputedStyle(r).getPropertyValue("overflow")!=="visible"||r.tagName==="BODY"?r.getBoundingClientRect():getVisibleRect(r)}function generateUUID(){var c;if((c=window.crypto)!=null&&c.randomUUID)return crypto.randomUUID();const n=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],r=Math.random()*4294967295|0,a=Math.random()*4294967295|0,s=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(n[r&255]+n[r>>8&255]+n[r>>16&255]+n[r>>24&255]+"-"+n[a&255]+n[a>>8&255]+"-"+n[a>>16&15|64]+n[a>>24&255]+"-"+n[s&63|128]+n[s>>8&255]+"-"+n[s>>16&255]+n[s>>24&255]+n[o&255]+n[o>>8&255]+n[o>>16&255]+n[o>>24&255]).toLowerCase()}const params="_params_wcfro_77",classes={"item-node":"_item-node_wcfro_1","view-card":"_view-card_wcfro_9","view-card-header":"_view-card-header_wcfro_41","view-card-body":"_view-card-body_wcfro_55",params,"params-title":"_params-title_wcfro_89","params-item":"_params-item_wcfro_99","params-item-label":"_params-item-label_wcfro_111","params-item-content":"_params-item-content_wcfro_123","distance-box":"_distance-box_wcfro_133","distance-left":"_distance-left_wcfro_145","distance-right":"_distance-right_wcfro_159","distance-top":"_distance-top_wcfro_173","distance-bottom":"_distance-bottom_wcfro_187"},state=reactive({}),storeRaw=`import { reactive } from 'vue'\r
\r
export const state = reactive({})\r
`,_sfc_main$d=defineComponent({__name:"Tip",props:["content"],setup(n){return(r,a)=>(openBlock(),createBlock(unref(ElTooltip),{content:n.content,effect:"light",placement:"top",teleported:!1},{default:withCtx(()=>[createVNode$1(unref(ElIcon),{color:"var(--el-color-warning)",size:15},{default:withCtx(()=>[createVNode$1(unref(warning))]),_:1})]),_:1},8,["content"]))}});function _isSlot$7(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!isVNode(n)}class ItemNode{constructor(r){Zp(this,"uuid",generateUUID());Zp(this,"isItemNode",!0);Zp(this,"path","");Zp(this,"name","");Zp(this,"props",reactive({style:{position:"relative",zIndex:"auto",boxSizing:"border-box"},watchState:[]}));Zp(this,"elRef",ref());Zp(this,"viewRef",ref());Zp(this,"children",reactive([]));Zp(this,"active",!1);Zp(this,"watchStateOptions",[{value:"hide",label:"隐藏元素"}]);Zp(this,"styleDisplay","block");Object.defineProperty(this,"children",{writable:!1}),r&&(this.uuid=r.uuid,this.path=r.path,this.name=r.name,this.props=reactive(r.props),r.children.forEach(a=>this.add(a))),this.component=markRaw(defineComponent((a,{emit:s,slots:o})=>{let u;text2Img(this.name).then(rc=>u=rc);const c=rc=>{if(!this.elRef.value)return;rc.stopPropagation();const nc=new Event("select-node",{bubbles:!0,cancelable:!1});nc.targetNode=this,this.elRef.value.dispatchEvent(nc)},p=rc=>{if(!this.elRef.value)return;rc.stopPropagation();const nc=new Event("hover-node",{bubbles:!0,cancelable:!1});nc.targetNode=this,this.elRef.value.dispatchEvent(nc)},d=rc=>{if(!this.elRef.value)return;rc.stopPropagation(),rc.dataTransfer.setDragImage(u,0,0);const nc=new Event("drag-node",{bubbles:!0,cancelable:!1});nc.targetNode=this,this.elRef.value.dispatchEvent(nc)},_=rc=>{rc.preventDefault()},ja=rc=>{if(!this.elRef.value)return;rc.stopPropagation();const nc=new Event("dragenter-node",{bubbles:!0,cancelable:!1});nc.targetNode=this,this.elRef.value.dispatchEvent(nc)},Ja=rc=>{if(!this.elRef.value)return;rc.stopPropagation();const nc=new Event("drop-node",{bubbles:!0,cancelable:!1});nc.targetNode=this,this.elRef.value.dispatchEvent(nc)},ec=new Set,tc=rc=>{this.props.style.display=rc?"none":this.styleDisplay};return watch(()=>this.props.watchState,()=>{ec.forEach(rc=>rc()),this.props.watchState.forEach(rc=>{rc.type=="hide"&&ec.add(watch(()=>state[rc.stateProperty],tc))})},{immediate:!0,deep:!0}),onUnmounted(()=>{ec.forEach(rc=>rc())}),()=>{var rc;return createVNode$1("div",{ref:this.elRef,class:`${classes["item-node"]}`,style:this.props.style,onMousedown:c,onMouseover:p,onDragstart:d,onDragover:_,onDragenter:ja,onDrop:Ja},[(rc=o.default)==null?void 0:rc.call(o)])}})),this.view=markRaw(defineComponent((a,{slots:s})=>{const o=u=>{u.stopPropagation();const c=new Event("drag-node",{bubbles:!0,cancelable:!1});c.targetNode=new(Object.getPrototypeOf(this)).constructor,this.viewRef.value.dispatchEvent(c)};return()=>{var u;return createVNode$1("div",{ref:this.viewRef,class:classes["view-card"],draggable:!0,onDragstart:o},[createVNode$1("div",{class:classes["view-card-header"]},[this.name]),createVNode$1("div",{class:classes["view-card-body"]},[(u=s.default)==null?void 0:u.call(s)])])}},{props:["header"]})),this.params=markRaw(defineComponent((a,{slots:s})=>()=>createVNode$1(Fragment,null,[createVNode$1(ElCollapse,{modelValue:["1","2"],class:classes.params},{default:()=>[createVNode$1(ElCollapseItem,{name:"1"},{title:()=>createVNode$1(ElText,{class:classes["params-title"],tag:"b"},{default:()=>[createTextVNode("样式")]}),default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("宽度")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.style.width,"onUpdate:modelValue":o=>this.props.style.width=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("高度")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.style.height,"onUpdate:modelValue":o=>this.props.style.height=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("内边距")]}),createVNode$1("div",{class:`${classes["params-item-content"]} ${classes["distance-box"]}`},[createVNode$1(ElInput,{class:classes["distance-left"],modelValue:this.props.style.paddingLeft,"onUpdate:modelValue":o=>this.props.style.paddingLeft=o,placeholder:"左",size:"small"},null),createVNode$1(ElInput,{class:classes["distance-right"],modelValue:this.props.style.paddingRight,"onUpdate:modelValue":o=>this.props.style.paddingRight=o,placeholder:"右",size:"small"},null),createVNode$1(ElInput,{class:classes["distance-top"],modelValue:this.props.style.paddingTop,"onUpdate:modelValue":o=>this.props.style.paddingTop=o,placeholder:"上",size:"small"},null),createVNode$1(ElInput,{class:classes["distance-bottom"],modelValue:this.props.style.paddingBottom,"onUpdate:modelValue":o=>this.props.style.paddingBottom=o,placeholder:"下",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("外边距")]}),createVNode$1("div",{class:`${classes["params-item-content"]} ${classes["distance-box"]}`},[createVNode$1(ElInput,{class:classes["distance-left"],modelValue:this.props.style.marginLeft,"onUpdate:modelValue":o=>this.props.style.marginLeft=o,placeholder:"左",size:"small"},null),createVNode$1(ElInput,{class:classes["distance-right"],modelValue:this.props.style.marginRight,"onUpdate:modelValue":o=>this.props.style.marginRight=o,placeholder:"右",size:"small"},null),createVNode$1(ElInput,{class:classes["distance-top"],modelValue:this.props.style.marginTop,"onUpdate:modelValue":o=>this.props.style.marginTop=o,placeholder:"上",size:"small"},null),createVNode$1(ElInput,{class:classes["distance-bottom"],modelValue:this.props.style.marginBottom,"onUpdate:modelValue":o=>this.props.style.marginBottom=o,placeholder:"下",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("定位")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.style.position,"onUpdate:modelValue":o=>{this.props.style.position=o,this.props.style.zIndex=this.props.style.left=this.props.style.top="auto"},size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"relative",label:"相对",size:"small"},null),createVNode$1(ElRadioButton,{value:"absolute",label:"绝对",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("层级")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:Number(this.props.style.zIndex),"onUpdate:modelValue":o=>this.props.style.zIndex=(o==null?void 0:o.toString())??"auto",min:0,"controls-position":"right",size:"small"},null)])]),createVNode$1(Fragment,null,[this.props.style.position=="absolute"&&[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("左距")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.style.left,"onUpdate:modelValue":o=>this.props.style.left=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("上距")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.style.top,"onUpdate:modelValue":o=>this.props.style.top=o,size:"small"},null)])])]])]}),createVNode$1(ElCollapseItem,{name:"2"},{title:()=>createVNode$1(ElText,{class:classes["params-title"],tag:"b"},{default:()=>[createTextVNode("组件参数")]}),default:()=>{var o;return[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("依赖变量"),createVNode$1(_sfc_main$d,{content:"依赖的全局状态state的属性"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{const u={stateProperty:"none",type:"none"};this.props.watchState.push(u)}},{default:()=>[createTextVNode("+ 添加")]}),createVNode$1("br",null,null),this.props.watchState.map((u,c)=>createVNode$1(ElTag,{closable:!0,type:"primary",onClose:()=>this.props.watchState.splice(c,1)},{default:()=>createVNode$1("span",{style:{flex:"1",display:"flex",justifyContent:"space-between"}},[createVNode$1("span",null,[u.stateProperty]),createVNode$1("span",null,[createVNode$1(ElPopover,{width:250,trigger:"click",teleported:!1,placement:"top"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-primary)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>{let p;return createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"80px"},{default:()=>[createVNode$1(ElFormItem,{label:"state属性"},{default:()=>[createVNode$1(ElInput,{modelValue:u.stateProperty,"onUpdate:modelValue":d=>u.stateProperty=d},null)]}),createVNode$1(ElFormItem,{label:"触发的方法"},{default:()=>[createVNode$1(ElRadioGroup,{modelValue:u.type,"onUpdate:modelValue":d=>u.type=d,size:"small"},_isSlot$7(p=this.watchStateOptions.map(d=>createVNode$1(ElRadioButton,{value:d.value,label:d.label,size:"small"},null)))?p:{default:()=>[p]})]})]})])}})])])}))])]),(o=s.default)==null?void 0:o.call(s)]}})]})])))}updateStyle(){if(!this.elRef.value)return;const r=this.props.style,a=this.elRef.value.style,s=["width","height","left","top","transform"];for(let o of s)r[o]=a.getPropertyValue(o)}traverse(r){r(this);const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].traverse(r)}traverseAncestors(r){const a=this.parent;a&&(r(a),a.traverseAncestors(r))}getPage(){let r=this.isNPage&&this;return this.traverseAncestors(a=>r=a.isNPage&&a),r}checkChild(r){let a=!0;return this.traverseAncestors(s=>s===r&&(a=!1)),a}add(r){this.checkChild(r)&&(r.parent&&r.parent.remove(r),r.parent=this,this.children.push(r))}insert(r,a,s="before"){if(!this.checkChild(r)||r===a)return;r.parent&&r.parent.remove(r);const o=this.children.indexOf(a);o!=-1&&(r.parent=this,s==="before"?this.children.splice(o,0,r):s==="after"&&this.children.splice(o+1,0,r))}remove(r){r.parent=null;const a=this.children.indexOf(r);a!==-1&&this.children.splice(a,1)}copy(r){Object.assign(this.props,r.props)}destroy(){}toVue(){const r=this.constructor.name.replace(/^N(\w)/,(p,d)=>d.toLowerCase()),[a,s]=this.uuid.split("-"),o=`${camel2Kebab(r)}-${s}`,u=this.props.watchState.find(p=>p.type=="hide");return{name:r,uuid:this.uuid,imports:{"./imports/store.js":{state:"state"}},importFiles:{"store.js":storeRaw},script:`
      `,template:`
<div${u?` v-show="state.${u.stateProperty}"`:""} class="${o}">
  <slot></slot>
</div>
      `,style:`
.${o} ${obj2Style(toRaw(this.props.style))}
      `}}}Zp(ItemNode,"preview",!0);class ContainerNode extends ItemNode{constructor(a){super(a);Zp(this,"isContainerNode",!0);if(!a){const u=this.props.style;this.props.style={...u,minWidth:"50px",minHeight:"16px",backgroundSize:"100% 100%",paddingTop:"5px",paddingRight:"5px",paddingBottom:"5px",paddingLeft:"5px",borderWidth:"1px",borderStyle:"solid",borderColor:"rgba(0, 0, 0, 0.15)",backgroundImage:"unset"}}const s=this.view;this.view=markRaw(defineComponent(u=>(this.props.style.borderColor="rgba(255, 255, 255, 0.15)",()=>createVNode$1(s,null,{default:()=>[createVNode$1(this.component,{style:{flexShrink:"0",width:"100px",height:"50px",transform:"scale(0.8)"}},null)]}))));const o=this.params;this.params=markRaw(defineComponent((u,{slots:c})=>{var d,_;const p=ref(`${((_=(d=this.props.style.backgroundImage)==null?void 0:d.match(/url\('?(.*?)'?\)/is))==null?void 0:_[1])??""}`);return()=>createVNode$1(o,null,{default:()=>{var ja;return[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("边框色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.style.borderColor,"onUpdate:modelValue":Ja=>this.props.style.borderColor=Ja||"rgba(0, 0, 0, 0)","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("背景色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.style.backgroundColor,"onUpdate:modelValue":Ja=>this.props.style.backgroundColor=Ja||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("背景图片")]}),createVNode$1("div",{class:classes["params-item-content"]},[p.value?createVNode$1(Fragment,null,[createVNode$1(ElImage,{style:"width: 50px",src:p.value,fit:"contain"},null)]):null,createVNode$1(ElInput,{modelValue:p.value,"onUpdate:modelValue":Ja=>p.value=Ja,placeholder:"图片地址",size:"small",clearable:!0,onChange:Ja=>this.props.style.backgroundImage=`url('${Ja}')`},null),createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{uploadFile(Ja=>{file2Base64(Ja).then(ec=>{p.value=ec,this.props.style.backgroundImage=`url('${ec}')`})})}},{default:()=>[createTextVNode("选择背景图")]})])]),(ja=c.default)==null?void 0:ja.call(c)]}})}))}}/*! Element Plus v2.8.0 */var zhCn={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};class NPage extends ContainerNode{constructor(a){super(a);Zp(this,"isNPage",!0);if(!a){this.path="./components/NPage/NPage.tsx",this.name="页面",this.props.name="新页面";const u=this.props.style;this.props.style={...u,width:"1000px",flexShrink:"0",flexGrow:"0",backgroundColor:"#fff",height:"800px",transform:"none",inset:"auto"},this.props.themeColor="hsla(0, 0%, 100%, 1)",this.setTheme(this.props.themeColor)}const s=this.component;this.component=markRaw(defineComponent(u=>{const c=shallowRef();return watch(()=>this.props.style.transform,()=>{setTimeout(()=>{var p;(p=c.value)==null||p.update()},2e3)}),()=>createVNode$1(s,null,{default:()=>[createVNode$1(ElConfigProvider,{locale:zhCn},{default:()=>[createVNode$1(ElScrollbar,{ref:c},{default:()=>[createVNode$1(TransitionGroup,{name:"list"},{default:()=>this.children.map((p,d)=>h$1(p.component,{key:p.uuid}))})]})]})]})},{name:"NPage"}));const o=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(o,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("页面名")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.name,"onUpdate:modelValue":u=>this.props.name=u,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("主题色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.themeColor,"onUpdate:modelValue":u=>{this.props.themeColor=u||"hsla(223, 0%, 100%, 1)",this.setTheme(this.props.themeColor)},colorFormat:"hsl","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("缩放")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElButton,{onClick:()=>this.props.style.transform="",type:"primary",size:"small"},{default:()=>[createTextVNode("重置")]})])])]})))}resetStyle(){this.props.style.transform="",this.props.style.position="relative",this.props.style.left=this.props.style.top="auto"}setTheme(a){let[,s,o,u,c]=a.match(/hsla?\((\d{0,3})[, ]+(\d+)%[, ]+(\d+)%[, ]+([\d\.]+)\)/i);s=Number.parseFloat(s),o=Number.parseFloat(o),u=Number.parseFloat(u),c=Number.parseFloat(c);const p=Math.min(Math.max(0,u>50?u-5:u+5),100),d=Math.min(Math.max(0,u>50?u-10:u+10),100),_=Math.min(Math.max(0,u>50?u-15:u+15),100),ja=Math.min(Math.max(0,u>50?u-20:u+20),100),Ja=Math.min(Math.max(0,u>50?u-25:u+25),100),ec=Math.min(Math.max(0,u>50?u-30:u+30),100),tc={"--el-color-primary":`hsla(${s}, ${o}%, 50%, 1)`,"--el-text-color-regular":u>50?"#333":"#ccc","--el-fill-color-blank":a,"--el-fill-color-light":`hsla(${s}, ${o}%, ${p}%, ${c})`,"--el-fill-color-lighter":`hsla(${s}, ${o}%, ${d}%, ${c})`,"--el-bg-color-overlay":a,"--el-bg-color":a,"--el-border-color":`hsla(${s}, ${o}%, ${_}%, ${c})`,"--el-border-color-light":`hsla(${s}, ${o}%, ${ja}%, ${c})`,"--el-border-color-lighter":`hsla(${s}, ${o}%, ${Ja}%, ${c})`,"--el-border-color-hover":`hsla(${s}, ${o}%, ${ec}%, ${c})`,"--el-border":"1px solid var(--el-border-color)","--ec-text-color":u>50?"#333":"#ccc","--ec-border-color":`hsla(${s}, ${o}%, ${_}%, ${c})`,"--ec-background-color":a};Object.assign(this.props.style,tc)}getAllNodes(){const a=[];return this.traverse(s=>a.push(toRaw(s))),a}toVue(){const a=super.toVue();return a.imports={...a.imports,"element-plus":{ElConfigProvider:"ElConfigProvider",ElScrollbar:"ElScrollbar"},"element-plus/dist/locale/zh-cn.mjs":{default:"zhCn"}},a.template=a.template.replace("<slot></slot>",`
  <ElConfigProvider :locale="zhCn">
    <ElScrollbar>
      ${this.children.map(s=>s.uuid).join(`
    `)}
    </ElScrollbar>
  </ElConfigProvider>
      `),a}}Zp(NPage,"preview",!1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(n,r){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},extendStatics(n,r)};function __extends(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");extendStatics(n,r);function a(){this.constructor=n}n.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var Browser=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),Env=function(){function n(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(n,r){var a=r.browser,s=n.match(/Firefox\/([\d.]+)/),o=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),u=n.match(/Edge?\/([\d.]+)/),c=/micromessenger/i.test(n);s&&(a.firefox=!0,a.version=s[1]),o&&(a.ie=!0,a.version=o[1]),u&&(a.edge=!0,a.version=u[1],a.newEdge=+u[1].split(".")[0]>18),c&&(a.weChat=!0),r.svgSupported=typeof SVGRect<"u",r.touchEventsSupported="ontouchstart"in window&&!a.ie&&!a.edge,r.pointerEventsSupported="onpointerdown"in window&&(a.edge||a.ie&&+a.version>=11),r.domSupported=typeof document<"u";var p=document.documentElement.style;r.transform3dSupported=(a.ie&&"transition"in p||a.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in p)&&!("OTransition"in p),r.transformSupported=r.transform3dSupported||a.ie&&+a.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(n){var r={};if(typeof JSON>"u")return r;for(var a=0;a<n.length;a++){var s=String.fromCharCode(a+32),o=(n.charCodeAt(a)-OFFSET)/SCALE;r[s]=o}return r}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,r;return function(a,s){if(!n){var o=platformApi.createCanvas();n=o&&o.getContext("2d")}if(n)return r!==s&&(r=n.font=s||DEFAULT_FONT),n.measureText(a);a=a||"",s=s||DEFAULT_FONT;var u=/(\d+)px/.exec(s),c=u&&+u[1]||DEFAULT_FONT_SIZE,p=0;if(s.indexOf("mono")>=0)p=c*a.length;else for(var d=0;d<a.length;d++){var _=DEFAULT_TEXT_WIDTH_MAP[a[d]];p+=_==null?c:_*c}return{width:p}}}(),loadImage:function(n,r,a){var s=new Image;return s.onload=r,s.onerror=a,s.src=n,s}},BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,r){return n["[object "+r+"]"]=!0,n},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,r){return n["[object "+r+"Array]"]=!0,n},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach$1=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart$1=2311;function guid$1(){return idStart$1++}function logError(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];typeof console<"u"&&console.error.apply(console,n)}function clone$4(n){if(n==null||typeof n!="object")return n;var r=n,a=objToString.call(n);if(a==="[object Array]"){if(!isPrimitive(n)){r=[];for(var s=0,o=n.length;s<o;s++)r[s]=clone$4(n[s])}}else if(TYPED_ARRAY[a]){if(!isPrimitive(n)){var u=n.constructor;if(u.from)r=u.from(n);else{r=new u(n.length);for(var s=0,o=n.length;s<o;s++)r[s]=n[s]}}}else if(!BUILTIN_OBJECT[a]&&!isPrimitive(n)&&!isDom(n)){r={};for(var c in n)n.hasOwnProperty(c)&&c!==protoKey&&(r[c]=clone$4(n[c]))}return r}function merge(n,r,a){if(!isObject$3(r)||!isObject$3(n))return a?clone$4(r):n;for(var s in r)if(r.hasOwnProperty(s)&&s!==protoKey){var o=n[s],u=r[s];isObject$3(u)&&isObject$3(o)&&!isArray$1(u)&&!isArray$1(o)&&!isDom(u)&&!isDom(o)&&!isBuiltInObject(u)&&!isBuiltInObject(o)&&!isPrimitive(u)&&!isPrimitive(o)?merge(o,u,a):(a||!(s in n))&&(n[s]=clone$4(r[s]))}return n}function mergeAll(n,r){for(var a=n[0],s=1,o=n.length;s<o;s++)a=merge(a,n[s],r);return a}function extend$2(n,r){if(Object.assign)Object.assign(n,r);else for(var a in r)r.hasOwnProperty(a)&&a!==protoKey&&(n[a]=r[a]);return n}function defaults(n,r,a){for(var s=keys(r),o=0;o<s.length;o++){var u=s[o];(a?r[u]!=null:n[u]==null)&&(n[u]=r[u])}return n}function indexOf(n,r){if(n){if(n.indexOf)return n.indexOf(r);for(var a=0,s=n.length;a<s;a++)if(n[a]===r)return a}return-1}function inherits(n,r){var a=n.prototype;function s(){}s.prototype=r.prototype,n.prototype=new s;for(var o in a)a.hasOwnProperty(o)&&(n.prototype[o]=a[o]);n.prototype.constructor=n,n.superClass=r}function mixin(n,r,a){if(n="prototype"in n?n.prototype:n,r="prototype"in r?r.prototype:r,Object.getOwnPropertyNames)for(var s=Object.getOwnPropertyNames(r),o=0;o<s.length;o++){var u=s[o];u!=="constructor"&&(a?r[u]!=null:n[u]==null)&&(n[u]=r[u])}else defaults(n,r,a)}function isArrayLike(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function each$f(n,r,a){if(n&&r)if(n.forEach&&n.forEach===nativeForEach$1)n.forEach(r,a);else if(n.length===+n.length)for(var s=0,o=n.length;s<o;s++)r.call(a,n[s],s,n);else for(var u in n)n.hasOwnProperty(u)&&r.call(a,n[u],u,n)}function map$1(n,r,a){if(!n)return[];if(!r)return slice(n);if(n.map&&n.map===nativeMap)return n.map(r,a);for(var s=[],o=0,u=n.length;o<u;o++)s.push(r.call(a,n[o],o,n));return s}function reduce(n,r,a,s){if(n&&r){for(var o=0,u=n.length;o<u;o++)a=r.call(s,a,n[o],o,n);return a}}function filter(n,r,a){if(!n)return[];if(!r)return slice(n);if(n.filter&&n.filter===nativeFilter)return n.filter(r,a);for(var s=[],o=0,u=n.length;o<u;o++)r.call(a,n[o],o,n)&&s.push(n[o]);return s}function find$1(n,r,a){if(n&&r){for(var s=0,o=n.length;s<o;s++)if(r.call(a,n[s],s,n))return n[s]}}function keys(n){if(!n)return[];if(Object.keys)return Object.keys(n);var r=[];for(var a in n)n.hasOwnProperty(a)&&r.push(a);return r}function bindPolyfill(n,r){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return function(){return n.apply(r,a.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return function(){return n.apply(this,r.concat(nativeSlice.call(arguments)))}}function isArray$1(n){return Array.isArray?Array.isArray(n):objToString.call(n)==="[object Array]"}function isFunction(n){return typeof n=="function"}function isString(n){return typeof n=="string"}function isStringSafe(n){return objToString.call(n)==="[object String]"}function isNumber(n){return typeof n=="number"}function isObject$3(n){var r=typeof n;return r==="function"||!!n&&r==="object"}function isBuiltInObject(n){return!!BUILTIN_OBJECT[objToString.call(n)]}function isTypedArray(n){return!!TYPED_ARRAY[objToString.call(n)]}function isDom(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function isGradientObject(n){return n.colorStops!=null}function isImagePatternObject(n){return n.image!=null}function isRegExp(n){return objToString.call(n)==="[object RegExp]"}function eqNaN(n){return n!==n}function retrieve$1(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var a=0,s=n.length;a<s;a++)if(n[a]!=null)return n[a]}function retrieve2(n,r){return n??r}function retrieve3(n,r,a){return n??r??a}function slice(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return nativeSlice.apply(n,r)}function normalizeCssArray$1(n){if(typeof n=="number")return[n,n,n,n];var r=n.length;return r===2?[n[0],n[1],n[0],n[1]]:r===3?[n[0],n[1],n[2],n[1]]:n}function assert(n,r){if(!n)throw new Error(r)}function trim$1(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(n){n[primitiveKey]=!0}function isPrimitive(n){return n[primitiveKey]}var MapPolyfill=function(){function n(){this.data={}}return n.prototype.delete=function(r){var a=this.has(r);return a&&delete this.data[r],a},n.prototype.has=function(r){return this.data.hasOwnProperty(r)},n.prototype.get=function(r){return this.data[r]},n.prototype.set=function(r,a){return this.data[r]=a,this},n.prototype.keys=function(){return keys(this.data)},n.prototype.forEach=function(r){var a=this.data;for(var s in a)a.hasOwnProperty(s)&&r(a[s],s)},n}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function n(r){var a=isArray$1(r);this.data=maybeNativeMap();var s=this;r instanceof n?r.each(o):r&&each$f(r,o);function o(u,c){a?s.set(u,c):s.set(c,u)}}return n.prototype.hasKey=function(r){return this.data.has(r)},n.prototype.get=function(r){return this.data.get(r)},n.prototype.set=function(r,a){return this.data.set(r,a),a},n.prototype.each=function(r,a){this.data.forEach(function(s,o){r.call(a,s,o)})},n.prototype.keys=function(){var r=this.data.keys();return isNativeMapSupported?Array.from(r):r},n.prototype.removeKey=function(r){this.data.delete(r)},n}();function createHashMap(n){return new HashMap(n)}function concatArray(n,r){for(var a=new n.constructor(n.length+r.length),s=0;s<n.length;s++)a[s]=n[s];for(var o=n.length,s=0;s<r.length;s++)a[s+o]=r[s];return a}function createObject(n,r){var a;if(Object.create)a=Object.create(n);else{var s=function(){};s.prototype=n,a=new s}return r&&extend$2(a,r),a}function disableUserSelect(n){var r=n.style;r.webkitUserSelect="none",r.userSelect="none",r.webkitTapHighlightColor="rgba(0,0,0,0)",r["-webkit-touch-callout"]="none"}function hasOwn(n,r){return n.hasOwnProperty(r)}function noop$1(){}var RADIAN_TO_DEGREE=180/Math.PI;function create$3(n,r){return n==null&&(n=0),r==null&&(r=0),[n,r]}function copy$1(n,r){return n[0]=r[0],n[1]=r[1],n}function clone$3(n){return[n[0],n[1]]}function set$1(n,r,a){return n[0]=r,n[1]=a,n}function add$1(n,r,a){return n[0]=r[0]+a[0],n[1]=r[1]+a[1],n}function scaleAndAdd$1(n,r,a,s){return n[0]=r[0]+a[0]*s,n[1]=r[1]+a[1]*s,n}function sub$1(n,r,a){return n[0]=r[0]-a[0],n[1]=r[1]-a[1],n}function len(n){return Math.sqrt(lenSquare(n))}function lenSquare(n){return n[0]*n[0]+n[1]*n[1]}function scale$2(n,r,a){return n[0]=r[0]*a,n[1]=r[1]*a,n}function normalize$5(n,r){var a=len(r);return a===0?(n[0]=0,n[1]=0):(n[0]=r[0]/a,n[1]=r[1]/a),n}function distance(n,r){return Math.sqrt((n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1]))}var dist$3=distance;function distanceSquare(n,r){return(n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1])}var distSquare=distanceSquare;function lerp$2(n,r,a,s){return n[0]=r[0]+s*(a[0]-r[0]),n[1]=r[1]+s*(a[1]-r[1]),n}function applyTransform$1(n,r,a){var s=r[0],o=r[1];return n[0]=a[0]*s+a[2]*o+a[4],n[1]=a[1]*s+a[3]*o+a[5],n}function min$1(n,r,a){return n[0]=Math.min(r[0],a[0]),n[1]=Math.min(r[1],a[1]),n}function max$1(n,r,a){return n[0]=Math.max(r[0],a[0]),n[1]=Math.max(r[1],a[1]),n}var Param=function(){function n(r,a){this.target=r,this.topTarget=a&&a.topTarget}return n}(),Draggable=function(){function n(r){this.handler=r,r.on("mousedown",this._dragStart,this),r.on("mousemove",this._drag,this),r.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(r){for(var a=r.target;a&&!a.draggable;)a=a.parent||a.__hostTarget;a&&(this._draggingTarget=a,a.dragging=!0,this._x=r.offsetX,this._y=r.offsetY,this.handler.dispatchToElement(new Param(a,r),"dragstart",r.event))},n.prototype._drag=function(r){var a=this._draggingTarget;if(a){var s=r.offsetX,o=r.offsetY,u=s-this._x,c=o-this._y;this._x=s,this._y=o,a.drift(u,c,r),this.handler.dispatchToElement(new Param(a,r),"drag",r.event);var p=this.handler.findHover(s,o,a).target,d=this._dropTarget;this._dropTarget=p,a!==p&&(d&&p!==d&&this.handler.dispatchToElement(new Param(d,r),"dragleave",r.event),p&&p!==d&&this.handler.dispatchToElement(new Param(p,r),"dragenter",r.event))}},n.prototype._dragEnd=function(r){var a=this._draggingTarget;a&&(a.dragging=!1),this.handler.dispatchToElement(new Param(a,r),"dragend",r.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,r),"drop",r.event),this._draggingTarget=null,this._dropTarget=null},n}(),Eventful=function(){function n(r){r&&(this._$eventProcessor=r)}return n.prototype.on=function(r,a,s,o){this._$handlers||(this._$handlers={});var u=this._$handlers;if(typeof a=="function"&&(o=s,s=a,a=null),!s||!r)return this;var c=this._$eventProcessor;a!=null&&c&&c.normalizeQuery&&(a=c.normalizeQuery(a)),u[r]||(u[r]=[]);for(var p=0;p<u[r].length;p++)if(u[r][p].h===s)return this;var d={h:s,query:a,ctx:o||this,callAtLast:s.zrEventfulCallAtLast},_=u[r].length-1,ja=u[r][_];return ja&&ja.callAtLast?u[r].splice(_,0,d):u[r].push(d),this},n.prototype.isSilent=function(r){var a=this._$handlers;return!a||!a[r]||!a[r].length},n.prototype.off=function(r,a){var s=this._$handlers;if(!s)return this;if(!r)return this._$handlers={},this;if(a){if(s[r]){for(var o=[],u=0,c=s[r].length;u<c;u++)s[r][u].h!==a&&o.push(s[r][u]);s[r]=o}s[r]&&s[r].length===0&&delete s[r]}else delete s[r];return this},n.prototype.trigger=function(r){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(!this._$handlers)return this;var o=this._$handlers[r],u=this._$eventProcessor;if(o)for(var c=a.length,p=o.length,d=0;d<p;d++){var _=o[d];if(!(u&&u.filter&&_.query!=null&&!u.filter(r,_.query)))switch(c){case 0:_.h.call(_.ctx);break;case 1:_.h.call(_.ctx,a[0]);break;case 2:_.h.call(_.ctx,a[0],a[1]);break;default:_.h.apply(_.ctx,a);break}}return u&&u.afterTrigger&&u.afterTrigger(r),this},n.prototype.triggerWithContext=function(r){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(!this._$handlers)return this;var o=this._$handlers[r],u=this._$eventProcessor;if(o)for(var c=a.length,p=a[c-1],d=o.length,_=0;_<d;_++){var ja=o[_];if(!(u&&u.filter&&ja.query!=null&&!u.filter(r,ja.query)))switch(c){case 0:ja.h.call(p);break;case 1:ja.h.call(p,a[0]);break;case 2:ja.h.call(p,a[0],a[1]);break;default:ja.h.apply(p,a.slice(1,c-1));break}}return u&&u.afterTrigger&&u.afterTrigger(r),this},n}(),LN2=Math.log(2);function determinant(n,r,a,s,o,u){var c=s+"-"+o,p=n.length;if(u.hasOwnProperty(c))return u[c];if(r===1){var d=Math.round(Math.log((1<<p)-1&~o)/LN2);return n[a][d]}for(var _=s|1<<a,ja=a+1;s&1<<ja;)ja++;for(var Ja=0,ec=0,tc=0;ec<p;ec++){var rc=1<<ec;rc&o||(Ja+=(tc%2?-1:1)*n[a][ec]*determinant(n,r-1,ja,_,o|rc,u),tc++)}return u[c]=Ja,Ja}function buildTransformer(n,r){var a=[[n[0],n[1],1,0,0,0,-r[0]*n[0],-r[0]*n[1]],[0,0,0,n[0],n[1],1,-r[1]*n[0],-r[1]*n[1]],[n[2],n[3],1,0,0,0,-r[2]*n[2],-r[2]*n[3]],[0,0,0,n[2],n[3],1,-r[3]*n[2],-r[3]*n[3]],[n[4],n[5],1,0,0,0,-r[4]*n[4],-r[4]*n[5]],[0,0,0,n[4],n[5],1,-r[5]*n[4],-r[5]*n[5]],[n[6],n[7],1,0,0,0,-r[6]*n[6],-r[6]*n[7]],[0,0,0,n[6],n[7],1,-r[7]*n[6],-r[7]*n[7]]],s={},o=determinant(a,8,0,0,0,s);if(o!==0){for(var u=[],c=0;c<8;c++)for(var p=0;p<8;p++)u[p]==null&&(u[p]=0),u[p]+=((c+p)%2?-1:1)*determinant(a,7,c===0?1:0,1<<c,1<<p,s)/o*r[c];return function(d,_,ja){var Ja=_*u[6]+ja*u[7]+1;d[0]=(_*u[0]+ja*u[1]+u[2])/Ja,d[1]=(_*u[3]+ja*u[4]+u[5])/Ja}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(n,r,a,s,o){return transformCoordWithViewport(_calcOut$1,r,s,o,!0)&&transformCoordWithViewport(n,a,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(n,r,a,s,o){if(r.getBoundingClientRect&&env.domSupported&&!isCanvasEl(r)){var u=r[EVENT_SAVED_PROP]||(r[EVENT_SAVED_PROP]={}),c=prepareCoordMarkers(r,u),p=preparePointerTransformer(c,u,o);if(p)return p(n,a,s),!0}return!1}function prepareCoordMarkers(n,r){var a=r.markers;if(a)return a;a=r.markers=[];for(var s=["left","right"],o=["top","bottom"],u=0;u<4;u++){var c=document.createElement("div"),p=c.style,d=u%2,_=(u>>1)%2;p.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",s[d]+":0",o[_]+":0",s[1-d]+":auto",o[1-_]+":auto",""].join("!important;"),n.appendChild(c),a.push(c)}return a}function preparePointerTransformer(n,r,a){for(var s=a?"invTrans":"trans",o=r[s],u=r.srcCoords,c=[],p=[],d=!0,_=0;_<4;_++){var ja=n[_].getBoundingClientRect(),Ja=2*_,ec=ja.left,tc=ja.top;c.push(ec,tc),d=d&&u&&ec===u[Ja]&&tc===u[Ja+1],p.push(n[_].offsetLeft,n[_].offsetTop)}return d&&o?o:(r.srcCoords=c,r[s]=a?buildTransformer(p,c):buildTransformer(c,p))}function isCanvasEl(n){return n.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(n){return n==null?"":(n+"").replace(replaceReg,function(r,a){return replaceMap[a]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(n,r,a,s){return a=a||{},s?calculateZrXY(n,r,a):firefoxNotSupportOffsetXY&&r.layerX!=null&&r.layerX!==r.offsetX?(a.zrX=r.layerX,a.zrY=r.layerY):r.offsetX!=null?(a.zrX=r.offsetX,a.zrY=r.offsetY):calculateZrXY(n,r,a),a}function calculateZrXY(n,r,a){if(env.domSupported&&n.getBoundingClientRect){var s=r.clientX,o=r.clientY;if(isCanvasEl(n)){var u=n.getBoundingClientRect();a.zrX=s-u.left,a.zrY=o-u.top;return}else if(transformCoordWithViewport(_calcOut,n,s,o)){a.zrX=_calcOut[0],a.zrY=_calcOut[1];return}}a.zrX=a.zrY=0}function getNativeEvent(n){return n||window.event}function normalizeEvent(n,r,a){if(r=getNativeEvent(r),r.zrX!=null)return r;var s=r.type,o=s&&s.indexOf("touch")>=0;if(o){var c=s!=="touchend"?r.targetTouches[0]:r.changedTouches[0];c&&clientToLocal(n,c,r,a)}else{clientToLocal(n,r,r,a);var u=getWheelDeltaMayPolyfill(r);r.zrDelta=u?u/120:-(r.detail||0)/3}var p=r.button;return r.which==null&&p!==void 0&&MOUSE_EVENT_REG.test(r.type)&&(r.which=p&1?1:p&2?3:p&4?2:0),r}function getWheelDeltaMayPolyfill(n){var r=n.wheelDelta;if(r)return r;var a=n.deltaX,s=n.deltaY;if(a==null||s==null)return r;var o=Math.abs(s!==0?s:a),u=s>0?-1:s<0?1:a>0?-1:1;return 3*o*u}function addEventListener(n,r,a,s){n.addEventListener(r,a,s)}function removeEventListener(n,r,a,s){n.removeEventListener(r,a,s)}var stop=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(n){return n.which===2||n.which===3}var GestureMgr=function(){function n(){this._track=[]}return n.prototype.recognize=function(r,a,s){return this._doTrack(r,a,s),this._recognize(r)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(r,a,s){var o=r.touches;if(o){for(var u={points:[],touches:[],target:a,event:r},c=0,p=o.length;c<p;c++){var d=o[c],_=clientToLocal(s,d,{});u.points.push([_.zrX,_.zrY]),u.touches.push(d)}this._track.push(u)}},n.prototype._recognize=function(r){for(var a in recognizers)if(recognizers.hasOwnProperty(a)){var s=recognizers[a](this._track,r);if(s)return s}},n}();function dist$2(n){var r=n[1][0]-n[0][0],a=n[1][1]-n[0][1];return Math.sqrt(r*r+a*a)}function center$1(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var recognizers={pinch:function(n,r){var a=n.length;if(a){var s=(n[a-1]||{}).points,o=(n[a-2]||{}).points||s;if(o&&o.length>1&&s&&s.length>1){var u=dist$2(s)/dist$2(o);!isFinite(u)&&(u=1),r.pinchScale=u;var c=center$1(s);return r.pinchX=c[0],r.pinchY=c[1],{type:"pinch",target:n[0].target,event:r}}}}};function create$2(){return[1,0,0,1,0,0]}function identity$1(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function copy(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n}function mul(n,r,a){var s=r[0]*a[0]+r[2]*a[1],o=r[1]*a[0]+r[3]*a[1],u=r[0]*a[2]+r[2]*a[3],c=r[1]*a[2]+r[3]*a[3],p=r[0]*a[4]+r[2]*a[5]+r[4],d=r[1]*a[4]+r[3]*a[5]+r[5];return n[0]=s,n[1]=o,n[2]=u,n[3]=c,n[4]=p,n[5]=d,n}function translate(n,r,a){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4]+a[0],n[5]=r[5]+a[1],n}function rotate(n,r,a,s){s===void 0&&(s=[0,0]);var o=r[0],u=r[2],c=r[4],p=r[1],d=r[3],_=r[5],ja=Math.sin(a),Ja=Math.cos(a);return n[0]=o*Ja+p*ja,n[1]=-o*ja+p*Ja,n[2]=u*Ja+d*ja,n[3]=-u*ja+Ja*d,n[4]=Ja*(c-s[0])+ja*(_-s[1])+s[0],n[5]=Ja*(_-s[1])-ja*(c-s[0])+s[1],n}function scale$1(n,r,a){var s=a[0],o=a[1];return n[0]=r[0]*s,n[1]=r[1]*o,n[2]=r[2]*s,n[3]=r[3]*o,n[4]=r[4]*s,n[5]=r[5]*o,n}function invert(n,r){var a=r[0],s=r[2],o=r[4],u=r[1],c=r[3],p=r[5],d=a*c-u*s;return d?(d=1/d,n[0]=c*d,n[1]=-u*d,n[2]=-s*d,n[3]=a*d,n[4]=(s*p-c*o)*d,n[5]=(u*o-a*p)*d,n):null}function clone$2(n){var r=create$2();return copy(r,n),r}var Point=function(){function n(r,a){this.x=r||0,this.y=a||0}return n.prototype.copy=function(r){return this.x=r.x,this.y=r.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(r,a){return this.x=r,this.y=a,this},n.prototype.equal=function(r){return r.x===this.x&&r.y===this.y},n.prototype.add=function(r){return this.x+=r.x,this.y+=r.y,this},n.prototype.scale=function(r){this.x*=r,this.y*=r},n.prototype.scaleAndAdd=function(r,a){this.x+=r.x*a,this.y+=r.y*a},n.prototype.sub=function(r){return this.x-=r.x,this.y-=r.y,this},n.prototype.dot=function(r){return this.x*r.x+this.y*r.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var r=this.len();return this.x/=r,this.y/=r,this},n.prototype.distance=function(r){var a=this.x-r.x,s=this.y-r.y;return Math.sqrt(a*a+s*s)},n.prototype.distanceSquare=function(r){var a=this.x-r.x,s=this.y-r.y;return a*a+s*s},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(r){if(r){var a=this.x,s=this.y;return this.x=r[0]*a+r[2]*s+r[4],this.y=r[1]*a+r[3]*s+r[5],this}},n.prototype.toArray=function(r){return r[0]=this.x,r[1]=this.y,r},n.prototype.fromArray=function(r){this.x=r[0],this.y=r[1]},n.set=function(r,a,s){r.x=a,r.y=s},n.copy=function(r,a){r.x=a.x,r.y=a.y},n.len=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},n.lenSquare=function(r){return r.x*r.x+r.y*r.y},n.dot=function(r,a){return r.x*a.x+r.y*a.y},n.add=function(r,a,s){r.x=a.x+s.x,r.y=a.y+s.y},n.sub=function(r,a,s){r.x=a.x-s.x,r.y=a.y-s.y},n.scale=function(r,a,s){r.x=a.x*s,r.y=a.y*s},n.scaleAndAdd=function(r,a,s,o){r.x=a.x+s.x*o,r.y=a.y+s.y*o},n.lerp=function(r,a,s,o){var u=1-o;r.x=u*a.x+o*s.x,r.y=u*a.y+o*s.y},n}(),mathMin$b=Math.min,mathMax$b=Math.max,lt$4=new Point,rb=new Point,lb=new Point,rt$3=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function n(r,a,s,o){s<0&&(r=r+s,s=-s),o<0&&(a=a+o,o=-o),this.x=r,this.y=a,this.width=s,this.height=o}return n.prototype.union=function(r){var a=mathMin$b(r.x,this.x),s=mathMin$b(r.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$b(r.x+r.width,this.x+this.width)-a:this.width=r.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$b(r.y+r.height,this.y+this.height)-s:this.height=r.height,this.x=a,this.y=s},n.prototype.applyTransform=function(r){n.applyTransform(this,this,r)},n.prototype.calculateTransform=function(r){var a=this,s=r.width/a.width,o=r.height/a.height,u=create$2();return translate(u,u,[-a.x,-a.y]),scale$1(u,u,[s,o]),translate(u,u,[r.x,r.y]),u},n.prototype.intersect=function(r,a){if(!r)return!1;r instanceof n||(r=n.create(r));var s=this,o=s.x,u=s.x+s.width,c=s.y,p=s.y+s.height,d=r.x,_=r.x+r.width,ja=r.y,Ja=r.y+r.height,ec=!(u<d||_<o||p<ja||Ja<c);if(a){var tc=1/0,rc=0,nc=Math.abs(u-d),ic=Math.abs(_-o),uc=Math.abs(p-ja),eh=Math.abs(Ja-c),rh=Math.min(nc,ic),ah=Math.min(uc,eh);u<d||_<o?rh>rc&&(rc=rh,nc<ic?Point.set(maxTv$1,-nc,0):Point.set(maxTv$1,ic,0)):rh<tc&&(tc=rh,nc<ic?Point.set(minTv$1,nc,0):Point.set(minTv$1,-ic,0)),p<ja||Ja<c?ah>rc&&(rc=ah,uc<eh?Point.set(maxTv$1,0,-uc):Point.set(maxTv$1,0,eh)):rh<tc&&(tc=rh,uc<eh?Point.set(minTv$1,0,uc):Point.set(minTv$1,0,-eh))}return a&&Point.copy(a,ec?minTv$1:maxTv$1),ec},n.prototype.contain=function(r,a){var s=this;return r>=s.x&&r<=s.x+s.width&&a>=s.y&&a<=s.y+s.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(r){n.copy(this,r)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(r){return new n(r.x,r.y,r.width,r.height)},n.copy=function(r,a){r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height},n.applyTransform=function(r,a,s){if(!s){r!==a&&n.copy(r,a);return}if(s[1]<1e-5&&s[1]>-1e-5&&s[2]<1e-5&&s[2]>-1e-5){var o=s[0],u=s[3],c=s[4],p=s[5];r.x=a.x*o+c,r.y=a.y*u+p,r.width=a.width*o,r.height=a.height*u,r.width<0&&(r.x+=r.width,r.width=-r.width),r.height<0&&(r.y+=r.height,r.height=-r.height);return}lt$4.x=lb.x=a.x,lt$4.y=rt$3.y=a.y,rb.x=rt$3.x=a.x+a.width,rb.y=lb.y=a.y+a.height,lt$4.transform(s),rt$3.transform(s),rb.transform(s),lb.transform(s),r.x=mathMin$b(lt$4.x,rb.x,lb.x,rt$3.x),r.y=mathMin$b(lt$4.y,rb.y,lb.y,rt$3.y);var d=mathMax$b(lt$4.x,rb.x,lb.x,rt$3.x),_=mathMax$b(lt$4.y,rb.y,lb.y,rt$3.y);r.width=d-r.x,r.height=_-r.y},n}(),SILENT="silent";function makeEventPacket(n,r,a){return{type:n,event:a,target:r.target,topTarget:r.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.handler=null,a}return r.prototype.dispose=function(){},r.prototype.setCursor=function(){},r}(Eventful),HoveredResult=function(){function n(r,a){this.x=r,this.y=a}return n}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler$1=function(n){__extends(r,n);function r(a,s,o,u,c){var p=n.call(this)||this;return p._hovered=new HoveredResult(0,0),p.storage=a,p.painter=s,p.painterRoot=u,p._pointerSize=c,o=o||new EmptyProxy,p.proxy=null,p.setHandlerProxy(o),p._draggingMgr=new Draggable(p),p}return r.prototype.setHandlerProxy=function(a){this.proxy&&this.proxy.dispose(),a&&(each$f(handlerNames,function(s){a.on&&a.on(s,this[s],this)},this),a.handler=this),this.proxy=a},r.prototype.mousemove=function(a){var s=a.zrX,o=a.zrY,u=isOutsideBoundary(this,s,o),c=this._hovered,p=c.target;p&&!p.__zr&&(c=this.findHover(c.x,c.y),p=c.target);var d=this._hovered=u?new HoveredResult(s,o):this.findHover(s,o),_=d.target,ja=this.proxy;ja.setCursor&&ja.setCursor(_?_.cursor:"default"),p&&_!==p&&this.dispatchToElement(c,"mouseout",a),this.dispatchToElement(d,"mousemove",a),_&&_!==p&&this.dispatchToElement(d,"mouseover",a)},r.prototype.mouseout=function(a){var s=a.zrEventControl;s!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",a),s!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:a})},r.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},r.prototype.dispatch=function(a,s){var o=this[a];o&&o.call(this,s)},r.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},r.prototype.setCursorStyle=function(a){var s=this.proxy;s.setCursor&&s.setCursor(a)},r.prototype.dispatchToElement=function(a,s,o){a=a||{};var u=a.target;if(!(u&&u.silent)){for(var c="on"+s,p=makeEventPacket(s,a,o);u&&(u[c]&&(p.cancelBubble=!!u[c].call(u,p)),u.trigger(s,p),u=u.__hostTarget?u.__hostTarget:u.parent,!p.cancelBubble););p.cancelBubble||(this.trigger(s,p),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(d){typeof d[c]=="function"&&d[c].call(d,p),d.trigger&&d.trigger(s,p)}))}},r.prototype.findHover=function(a,s,o){var u=this.storage.getDisplayList(),c=new HoveredResult(a,s);if(setHoverTarget(u,c,a,s,o),this._pointerSize&&!c.target){for(var p=[],d=this._pointerSize,_=d/2,ja=new BoundingRect(a-_,s-_,d,d),Ja=u.length-1;Ja>=0;Ja--){var ec=u[Ja];ec!==o&&!ec.ignore&&!ec.ignoreCoarsePointer&&(!ec.parent||!ec.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(ec.getBoundingRect()),ec.transform&&tmpRect$1.applyTransform(ec.transform),tmpRect$1.intersect(ja)&&p.push(ec))}if(p.length)for(var tc=4,rc=Math.PI/12,nc=Math.PI*2,ic=0;ic<_;ic+=tc)for(var uc=0;uc<nc;uc+=rc){var eh=a+ic*Math.cos(uc),rh=s+ic*Math.sin(uc);if(setHoverTarget(p,c,eh,rh,o),c.target)return c}}return c},r.prototype.processGesture=function(a,s){this._gestureMgr||(this._gestureMgr=new GestureMgr);var o=this._gestureMgr;s==="start"&&o.clear();var u=o.recognize(a,this.findHover(a.zrX,a.zrY,null).target,this.proxy.dom);if(s==="end"&&o.clear(),u){var c=u.type;a.gestureEvent=c;var p=new HoveredResult;p.target=u.target,this.dispatchToElement(p,c,u.event)}},r}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){Handler$1.prototype[n]=function(r){var a=r.zrX,s=r.zrY,o=isOutsideBoundary(this,a,s),u,c;if((n!=="mouseup"||!o)&&(u=this.findHover(a,s),c=u.target),n==="mousedown")this._downEl=c,this._downPoint=[r.zrX,r.zrY],this._upEl=c;else if(n==="mouseup")this._upEl=c;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$3(this._downPoint,[r.zrX,r.zrY])>4)return;this._downPoint=null}this.dispatchToElement(u,n,r)}});function isHover(n,r,a){if(n[n.rectHover?"rectContain":"contain"](r,a)){for(var s=n,o=void 0,u=!1;s;){if(s.ignoreClip&&(u=!0),!u){var c=s.getClipPath();if(c&&!c.contain(r,a))return!1}s.silent&&(o=!0);var p=s.__hostTarget;s=p||s.parent}return o?SILENT:!0}return!1}function setHoverTarget(n,r,a,s,o){for(var u=n.length-1;u>=0;u--){var c=n[u],p=void 0;if(c!==o&&!c.ignore&&(p=isHover(c,a,s))&&(!r.topTarget&&(r.topTarget=c),p!==SILENT)){r.target=c;break}}}function isOutsideBoundary(n,r,a){var s=n.painter;return r<0||r>s.getWidth()||a<0||a>s.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(n){for(var r=0;n>=DEFAULT_MIN_MERGE;)r|=n&1,n>>=1;return n+r}function makeAscendingRun(n,r,a,s){var o=r+1;if(o===a)return 1;if(s(n[o++],n[r])<0){for(;o<a&&s(n[o],n[o-1])<0;)o++;reverseRun(n,r,o)}else for(;o<a&&s(n[o],n[o-1])>=0;)o++;return o-r}function reverseRun(n,r,a){for(a--;r<a;){var s=n[r];n[r++]=n[a],n[a--]=s}}function binaryInsertionSort(n,r,a,s,o){for(s===r&&s++;s<a;s++){for(var u=n[s],c=r,p=s,d;c<p;)d=c+p>>>1,o(u,n[d])<0?p=d:c=d+1;var _=s-c;switch(_){case 3:n[c+3]=n[c+2];case 2:n[c+2]=n[c+1];case 1:n[c+1]=n[c];break;default:for(;_>0;)n[c+_]=n[c+_-1],_--}n[c]=u}}function gallopLeft(n,r,a,s,o,u){var c=0,p=0,d=1;if(u(n,r[a+o])>0){for(p=s-o;d<p&&u(n,r[a+o+d])>0;)c=d,d=(d<<1)+1,d<=0&&(d=p);d>p&&(d=p),c+=o,d+=o}else{for(p=o+1;d<p&&u(n,r[a+o-d])<=0;)c=d,d=(d<<1)+1,d<=0&&(d=p);d>p&&(d=p);var _=c;c=o-d,d=o-_}for(c++;c<d;){var ja=c+(d-c>>>1);u(n,r[a+ja])>0?c=ja+1:d=ja}return d}function gallopRight(n,r,a,s,o,u){var c=0,p=0,d=1;if(u(n,r[a+o])<0){for(p=o+1;d<p&&u(n,r[a+o-d])<0;)c=d,d=(d<<1)+1,d<=0&&(d=p);d>p&&(d=p);var _=c;c=o-d,d=o-_}else{for(p=s-o;d<p&&u(n,r[a+o+d])>=0;)c=d,d=(d<<1)+1,d<=0&&(d=p);d>p&&(d=p),c+=o,d+=o}for(c++;c<d;){var ja=c+(d-c>>>1);u(n,r[a+ja])<0?d=ja:c=ja+1}return d}function TimSort(n,r){var a=DEFAULT_MIN_GALLOPING,s,o,u=0,c=[];s=[],o=[];function p(tc,rc){s[u]=tc,o[u]=rc,u+=1}function d(){for(;u>1;){var tc=u-2;if(tc>=1&&o[tc-1]<=o[tc]+o[tc+1]||tc>=2&&o[tc-2]<=o[tc]+o[tc-1])o[tc-1]<o[tc+1]&&tc--;else if(o[tc]>o[tc+1])break;ja(tc)}}function _(){for(;u>1;){var tc=u-2;tc>0&&o[tc-1]<o[tc+1]&&tc--,ja(tc)}}function ja(tc){var rc=s[tc],nc=o[tc],ic=s[tc+1],uc=o[tc+1];o[tc]=nc+uc,tc===u-3&&(s[tc+1]=s[tc+2],o[tc+1]=o[tc+2]),u--;var eh=gallopRight(n[ic],n,rc,nc,0,r);rc+=eh,nc-=eh,nc!==0&&(uc=gallopLeft(n[rc+nc-1],n,ic,uc,uc-1,r),uc!==0&&(nc<=uc?Ja(rc,nc,ic,uc):ec(rc,nc,ic,uc)))}function Ja(tc,rc,nc,ic){var uc=0;for(uc=0;uc<rc;uc++)c[uc]=n[tc+uc];var eh=0,rh=nc,ah=tc;if(n[ah++]=n[rh++],--ic===0){for(uc=0;uc<rc;uc++)n[ah+uc]=c[eh+uc];return}if(rc===1){for(uc=0;uc<ic;uc++)n[ah+uc]=n[rh+uc];n[ah+ic]=c[eh];return}for(var ih=a,oh,uh,ch;;){oh=0,uh=0,ch=!1;do if(r(n[rh],c[eh])<0){if(n[ah++]=n[rh++],uh++,oh=0,--ic===0){ch=!0;break}}else if(n[ah++]=c[eh++],oh++,uh=0,--rc===1){ch=!0;break}while((oh|uh)<ih);if(ch)break;do{if(oh=gallopRight(n[rh],c,eh,rc,0,r),oh!==0){for(uc=0;uc<oh;uc++)n[ah+uc]=c[eh+uc];if(ah+=oh,eh+=oh,rc-=oh,rc<=1){ch=!0;break}}if(n[ah++]=n[rh++],--ic===0){ch=!0;break}if(uh=gallopLeft(c[eh],n,rh,ic,0,r),uh!==0){for(uc=0;uc<uh;uc++)n[ah+uc]=n[rh+uc];if(ah+=uh,rh+=uh,ic-=uh,ic===0){ch=!0;break}}if(n[ah++]=c[eh++],--rc===1){ch=!0;break}ih--}while(oh>=DEFAULT_MIN_GALLOPING||uh>=DEFAULT_MIN_GALLOPING);if(ch)break;ih<0&&(ih=0),ih+=2}if(a=ih,a<1&&(a=1),rc===1){for(uc=0;uc<ic;uc++)n[ah+uc]=n[rh+uc];n[ah+ic]=c[eh]}else{if(rc===0)throw new Error;for(uc=0;uc<rc;uc++)n[ah+uc]=c[eh+uc]}}function ec(tc,rc,nc,ic){var uc=0;for(uc=0;uc<ic;uc++)c[uc]=n[nc+uc];var eh=tc+rc-1,rh=ic-1,ah=nc+ic-1,ih=0,oh=0;if(n[ah--]=n[eh--],--rc===0){for(ih=ah-(ic-1),uc=0;uc<ic;uc++)n[ih+uc]=c[uc];return}if(ic===1){for(ah-=rc,eh-=rc,oh=ah+1,ih=eh+1,uc=rc-1;uc>=0;uc--)n[oh+uc]=n[ih+uc];n[ah]=c[rh];return}for(var uh=a;;){var ch=0,hh=0,dh=!1;do if(r(c[rh],n[eh])<0){if(n[ah--]=n[eh--],ch++,hh=0,--rc===0){dh=!0;break}}else if(n[ah--]=c[rh--],hh++,ch=0,--ic===1){dh=!0;break}while((ch|hh)<uh);if(dh)break;do{if(ch=rc-gallopRight(c[rh],n,tc,rc,rc-1,r),ch!==0){for(ah-=ch,eh-=ch,rc-=ch,oh=ah+1,ih=eh+1,uc=ch-1;uc>=0;uc--)n[oh+uc]=n[ih+uc];if(rc===0){dh=!0;break}}if(n[ah--]=c[rh--],--ic===1){dh=!0;break}if(hh=ic-gallopLeft(n[eh],c,0,ic,ic-1,r),hh!==0){for(ah-=hh,rh-=hh,ic-=hh,oh=ah+1,ih=rh+1,uc=0;uc<hh;uc++)n[oh+uc]=c[ih+uc];if(ic<=1){dh=!0;break}}if(n[ah--]=n[eh--],--rc===0){dh=!0;break}uh--}while(ch>=DEFAULT_MIN_GALLOPING||hh>=DEFAULT_MIN_GALLOPING);if(dh)break;uh<0&&(uh=0),uh+=2}if(a=uh,a<1&&(a=1),ic===1){for(ah-=rc,eh-=rc,oh=ah+1,ih=eh+1,uc=rc-1;uc>=0;uc--)n[oh+uc]=n[ih+uc];n[ah]=c[rh]}else{if(ic===0)throw new Error;for(ih=ah-(ic-1),uc=0;uc<ic;uc++)n[ih+uc]=c[uc]}}return{mergeRuns:d,forceMergeRuns:_,pushRun:p}}function sort$2(n,r,a,s){a||(a=0),s||(s=n.length);var o=s-a;if(!(o<2)){var u=0;if(o<DEFAULT_MIN_MERGE){u=makeAscendingRun(n,a,s,r),binaryInsertionSort(n,a,s,a+u,r);return}var c=TimSort(n,r),p=minRunLength(o);do{if(u=makeAscendingRun(n,a,s,r),u<p){var d=o;d>p&&(d=p),binaryInsertionSort(n,a,a+d,a+u,r),u=d}c.pushRun(a,u),c.mergeRuns(),o-=u,a+=u}while(o!==0);c.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(n,r){return n.zlevel===r.zlevel?n.z===r.z?n.z2-r.z2:n.z-r.z:n.zlevel-r.zlevel}var Storage=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return n.prototype.traverse=function(r,a){for(var s=0;s<this._roots.length;s++)this._roots[s].traverse(r,a)},n.prototype.getDisplayList=function(r,a){a=a||!1;var s=this._displayList;return(r||!s.length)&&this.updateDisplayList(a),s},n.prototype.updateDisplayList=function(r){this._displayListLen=0;for(var a=this._roots,s=this._displayList,o=0,u=a.length;o<u;o++)this._updateAndAddDisplayable(a[o],null,r);s.length=this._displayListLen,sort$2(s,shapeCompareFunc)},n.prototype._updateAndAddDisplayable=function(r,a,s){if(!(r.ignore&&!s)){r.beforeUpdate(),r.update(),r.afterUpdate();var o=r.getClipPath();if(r.ignoreClip)a=null;else if(o){a?a=a.slice():a=[];for(var u=o,c=r;u;)u.parent=c,u.updateTransform(),a.push(u),c=u,u=u.getClipPath()}if(r.childrenRef){for(var p=r.childrenRef(),d=0;d<p.length;d++){var _=p[d];r.__dirty&&(_.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(_,a,s)}r.__dirty=0}else{var ja=r;a&&a.length?ja.__clipPaths=a:ja.__clipPaths&&ja.__clipPaths.length>0&&(ja.__clipPaths=[]),isNaN(ja.z)&&(logInvalidZError(),ja.z=0),isNaN(ja.z2)&&(logInvalidZError(),ja.z2=0),isNaN(ja.zlevel)&&(logInvalidZError(),ja.zlevel=0),this._displayList[this._displayListLen++]=ja}var Ja=r.getDecalElement&&r.getDecalElement();Ja&&this._updateAndAddDisplayable(Ja,a,s);var ec=r.getTextGuideLine();ec&&this._updateAndAddDisplayable(ec,a,s);var tc=r.getTextContent();tc&&this._updateAndAddDisplayable(tc,a,s)}},n.prototype.addRoot=function(r){r.__zr&&r.__zr.storage===this||this._roots.push(r)},n.prototype.delRoot=function(r){if(r instanceof Array){for(var a=0,s=r.length;a<s;a++)this.delRoot(r[a]);return}var o=indexOf(this._roots,r);o>=0&&this._roots.splice(o,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var easingFuncs={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var r,a=.1,s=.4;return n===0?0:n===1?1:(!a||a<1?(a=1,r=s/4):r=s*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(n-=1))*Math.sin((n-r)*(2*Math.PI)/s)))},elasticOut:function(n){var r,a=.1,s=.4;return n===0?0:n===1?1:(!a||a<1?(a=1,r=s/4):r=s*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*n)*Math.sin((n-r)*(2*Math.PI)/s)+1)},elasticInOut:function(n){var r,a=.1,s=.4;return n===0?0:n===1?1:(!a||a<1?(a=1,r=s/4):r=s*Math.asin(1/a)/(2*Math.PI),(n*=2)<1?-.5*(a*Math.pow(2,10*(n-=1))*Math.sin((n-r)*(2*Math.PI)/s)):a*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*(2*Math.PI)/s)*.5+1)},backIn:function(n){var r=1.70158;return n*n*((r+1)*n-r)},backOut:function(n){var r=1.70158;return--n*n*((r+1)*n+r)+1},backInOut:function(n){var r=2.5949095;return(n*=2)<1?.5*(n*n*((r+1)*n-r)):.5*((n-=2)*n*((r+1)*n+r)+2)},bounceIn:function(n){return 1-easingFuncs.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?easingFuncs.bounceIn(n*2)*.5:easingFuncs.bounceOut(n*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$5=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$3(),_v1=create$3(),_v2=create$3();function isAroundZero$1(n){return n>-EPSILON$5&&n<EPSILON$5}function isNotAroundZero$1(n){return n>EPSILON$5||n<-EPSILON$5}function cubicAt(n,r,a,s,o){var u=1-o;return u*u*(u*n+3*o*r)+o*o*(o*s+3*u*a)}function cubicDerivativeAt(n,r,a,s,o){var u=1-o;return 3*(((r-n)*u+2*(a-r)*o)*u+(s-a)*o*o)}function cubicRootAt(n,r,a,s,o,u){var c=s+3*(r-a)-n,p=3*(a-r*2+n),d=3*(r-n),_=n-o,ja=p*p-3*c*d,Ja=p*d-9*c*_,ec=d*d-3*p*_,tc=0;if(isAroundZero$1(ja)&&isAroundZero$1(Ja))if(isAroundZero$1(p))u[0]=0;else{var rc=-d/p;rc>=0&&rc<=1&&(u[tc++]=rc)}else{var nc=Ja*Ja-4*ja*ec;if(isAroundZero$1(nc)){var ic=Ja/ja,rc=-p/c+ic,uc=-ic/2;rc>=0&&rc<=1&&(u[tc++]=rc),uc>=0&&uc<=1&&(u[tc++]=uc)}else if(nc>0){var eh=mathSqrt$3(nc),rh=ja*p+1.5*c*(-Ja+eh),ah=ja*p+1.5*c*(-Ja-eh);rh<0?rh=-mathPow$2(-rh,ONE_THIRD):rh=mathPow$2(rh,ONE_THIRD),ah<0?ah=-mathPow$2(-ah,ONE_THIRD):ah=mathPow$2(ah,ONE_THIRD);var rc=(-p-(rh+ah))/(3*c);rc>=0&&rc<=1&&(u[tc++]=rc)}else{var ih=(2*ja*p-3*c*Ja)/(2*mathSqrt$3(ja*ja*ja)),oh=Math.acos(ih)/3,uh=mathSqrt$3(ja),ch=Math.cos(oh),rc=(-p-2*uh*ch)/(3*c),uc=(-p+uh*(ch+THREE_SQRT*Math.sin(oh)))/(3*c),hh=(-p+uh*(ch-THREE_SQRT*Math.sin(oh)))/(3*c);rc>=0&&rc<=1&&(u[tc++]=rc),uc>=0&&uc<=1&&(u[tc++]=uc),hh>=0&&hh<=1&&(u[tc++]=hh)}}return tc}function cubicExtrema(n,r,a,s,o){var u=6*a-12*r+6*n,c=9*r+3*s-3*n-9*a,p=3*r-3*n,d=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(u)){var _=-p/u;_>=0&&_<=1&&(o[d++]=_)}}else{var ja=u*u-4*c*p;if(isAroundZero$1(ja))o[0]=-u/(2*c);else if(ja>0){var Ja=mathSqrt$3(ja),_=(-u+Ja)/(2*c),ec=(-u-Ja)/(2*c);_>=0&&_<=1&&(o[d++]=_),ec>=0&&ec<=1&&(o[d++]=ec)}}return d}function cubicSubdivide(n,r,a,s,o,u){var c=(r-n)*o+n,p=(a-r)*o+r,d=(s-a)*o+a,_=(p-c)*o+c,ja=(d-p)*o+p,Ja=(ja-_)*o+_;u[0]=n,u[1]=c,u[2]=_,u[3]=Ja,u[4]=Ja,u[5]=ja,u[6]=d,u[7]=s}function cubicProjectPoint(n,r,a,s,o,u,c,p,d,_,ja){var Ja,ec=.005,tc=1/0,rc,nc,ic,uc;_v0[0]=d,_v0[1]=_;for(var eh=0;eh<1;eh+=.05)_v1[0]=cubicAt(n,a,o,c,eh),_v1[1]=cubicAt(r,s,u,p,eh),ic=distSquare(_v0,_v1),ic<tc&&(Ja=eh,tc=ic);tc=1/0;for(var rh=0;rh<32&&!(ec<EPSILON_NUMERIC);rh++)rc=Ja-ec,nc=Ja+ec,_v1[0]=cubicAt(n,a,o,c,rc),_v1[1]=cubicAt(r,s,u,p,rc),ic=distSquare(_v1,_v0),rc>=0&&ic<tc?(Ja=rc,tc=ic):(_v2[0]=cubicAt(n,a,o,c,nc),_v2[1]=cubicAt(r,s,u,p,nc),uc=distSquare(_v2,_v0),nc<=1&&uc<tc?(Ja=nc,tc=uc):ec*=.5);return ja&&(ja[0]=cubicAt(n,a,o,c,Ja),ja[1]=cubicAt(r,s,u,p,Ja)),mathSqrt$3(tc)}function cubicLength(n,r,a,s,o,u,c,p,d){for(var _=n,ja=r,Ja=0,ec=1/d,tc=1;tc<=d;tc++){var rc=tc*ec,nc=cubicAt(n,a,o,c,rc),ic=cubicAt(r,s,u,p,rc),uc=nc-_,eh=ic-ja;Ja+=Math.sqrt(uc*uc+eh*eh),_=nc,ja=ic}return Ja}function quadraticAt$1(n,r,a,s){var o=1-s;return o*(o*n+2*s*r)+s*s*a}function quadraticDerivativeAt(n,r,a,s){return 2*((1-s)*(r-n)+s*(a-r))}function quadraticRootAt(n,r,a,s,o){var u=n-2*r+a,c=2*(r-n),p=n-s,d=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(c)){var _=-p/c;_>=0&&_<=1&&(o[d++]=_)}}else{var ja=c*c-4*u*p;if(isAroundZero$1(ja)){var _=-c/(2*u);_>=0&&_<=1&&(o[d++]=_)}else if(ja>0){var Ja=mathSqrt$3(ja),_=(-c+Ja)/(2*u),ec=(-c-Ja)/(2*u);_>=0&&_<=1&&(o[d++]=_),ec>=0&&ec<=1&&(o[d++]=ec)}}return d}function quadraticExtremum(n,r,a){var s=n+a-2*r;return s===0?.5:(n-r)/s}function quadraticSubdivide(n,r,a,s,o){var u=(r-n)*s+n,c=(a-r)*s+r,p=(c-u)*s+u;o[0]=n,o[1]=u,o[2]=p,o[3]=p,o[4]=c,o[5]=a}function quadraticProjectPoint(n,r,a,s,o,u,c,p,d){var _,ja=.005,Ja=1/0;_v0[0]=c,_v0[1]=p;for(var ec=0;ec<1;ec+=.05){_v1[0]=quadraticAt$1(n,a,o,ec),_v1[1]=quadraticAt$1(r,s,u,ec);var tc=distSquare(_v0,_v1);tc<Ja&&(_=ec,Ja=tc)}Ja=1/0;for(var rc=0;rc<32&&!(ja<EPSILON_NUMERIC);rc++){var nc=_-ja,ic=_+ja;_v1[0]=quadraticAt$1(n,a,o,nc),_v1[1]=quadraticAt$1(r,s,u,nc);var tc=distSquare(_v1,_v0);if(nc>=0&&tc<Ja)_=nc,Ja=tc;else{_v2[0]=quadraticAt$1(n,a,o,ic),_v2[1]=quadraticAt$1(r,s,u,ic);var uc=distSquare(_v2,_v0);ic<=1&&uc<Ja?(_=ic,Ja=uc):ja*=.5}}return d&&(d[0]=quadraticAt$1(n,a,o,_),d[1]=quadraticAt$1(r,s,u,_)),mathSqrt$3(Ja)}function quadraticLength(n,r,a,s,o,u,c){for(var p=n,d=r,_=0,ja=1/c,Ja=1;Ja<=c;Ja++){var ec=Ja*ja,tc=quadraticAt$1(n,a,o,ec),rc=quadraticAt$1(r,s,u,ec),nc=tc-p,ic=rc-d;_+=Math.sqrt(nc*nc+ic*ic),p=tc,d=rc}return _}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(n){var r=n&&regexp.exec(n);if(r){var a=r[1].split(","),s=+trim$1(a[0]),o=+trim$1(a[1]),u=+trim$1(a[2]),c=+trim$1(a[3]);if(isNaN(s+o+u+c))return;var p=[];return function(d){return d<=0?0:d>=1?1:cubicRootAt(0,s,u,1,d,p)&&cubicAt(0,o,c,1,p[0])}}}var Clip=function(){function n(r){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=r.life||1e3,this._delay=r.delay||0,this.loop=r.loop||!1,this.onframe=r.onframe||noop$1,this.ondestroy=r.ondestroy||noop$1,this.onrestart=r.onrestart||noop$1,r.easing&&this.setEasing(r.easing)}return n.prototype.step=function(r,a){if(this._inited||(this._startTime=r+this._delay,this._inited=!0),this._paused){this._pausedTime+=a;return}var s=this._life,o=r-this._startTime-this._pausedTime,u=o/s;u<0&&(u=0),u=Math.min(u,1);var c=this.easingFunc,p=c?c(u):u;if(this.onframe(p),u===1)if(this.loop){var d=o%s;this._startTime=r-d,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(r){this.easing=r,this.easingFunc=isFunction(r)?r:easingFuncs[r]||createCubicEasingFunc(r)},n}(),Entry=function(){function n(r){this.value=r}return n}(),LinkedList$1=function(){function n(){this._len=0}return n.prototype.insert=function(r){var a=new Entry(r);return this.insertEntry(a),a},n.prototype.insertEntry=function(r){this.head?(this.tail.next=r,r.prev=this.tail,r.next=null,this.tail=r):this.head=this.tail=r,this._len++},n.prototype.remove=function(r){var a=r.prev,s=r.next;a?a.next=s:this.head=s,s?s.prev=a:this.tail=a,r.next=r.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),LRU$1=function(){function n(r){this._list=new LinkedList$1,this._maxSize=10,this._map={},this._maxSize=r}return n.prototype.put=function(r,a){var s=this._list,o=this._map,u=null;if(o[r]==null){var c=s.len(),p=this._lastRemovedEntry;if(c>=this._maxSize&&c>0){var d=s.head;s.remove(d),delete o[d.key],u=d.value,this._lastRemovedEntry=d}p?p.value=a:p=new Entry(a),p.key=r,s.insertEntry(p),o[r]=p}return u},n.prototype.get=function(r){var a=this._map[r],s=this._list;if(a!=null)return a!==s.tail&&(s.remove(a),s.insertEntry(a)),a.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),kCSSColorTable$1={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte$1(n){return n=Math.round(n),n<0?0:n>255?255:n}function clampCssAngle$1(n){return n=Math.round(n),n<0?0:n>360?360:n}function clampCssFloat$1(n){return n<0?0:n>1?1:n}function parseCssInt$1(n){var r=n;return r.length&&r.charAt(r.length-1)==="%"?clampCssByte$1(parseFloat(r)/100*255):clampCssByte$1(parseInt(r,10))}function parseCssFloat$1(n){var r=n;return r.length&&r.charAt(r.length-1)==="%"?clampCssFloat$1(parseFloat(r)/100):clampCssFloat$1(parseFloat(r))}function cssHueToRgb$1(n,r,a){return a<0?a+=1:a>1&&(a-=1),a*6<1?n+(r-n)*a*6:a*2<1?r:a*3<2?n+(r-n)*(2/3-a)*6:n}function lerpNumber$1(n,r,a){return n+(r-n)*a}function setRgba$1(n,r,a,s,o){return n[0]=r,n[1]=a,n[2]=s,n[3]=o,n}function copyRgba$1(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n}var colorCache$1=new LRU$1(20),lastRemovedArr$1=null;function putToCache$1(n,r){lastRemovedArr$1&&copyRgba$1(lastRemovedArr$1,r),lastRemovedArr$1=colorCache$1.put(n,lastRemovedArr$1||r.slice())}function parse(n,r){if(n){r=r||[];var a=colorCache$1.get(n);if(a)return copyRgba$1(r,a);n=n+"";var s=n.replace(/ /g,"").toLowerCase();if(s in kCSSColorTable$1)return copyRgba$1(r,kCSSColorTable$1[s]),putToCache$1(n,r),r;var o=s.length;if(s.charAt(0)==="#"){if(o===4||o===5){var u=parseInt(s.slice(1,4),16);if(!(u>=0&&u<=4095)){setRgba$1(r,0,0,0,1);return}return setRgba$1(r,(u&3840)>>4|(u&3840)>>8,u&240|(u&240)>>4,u&15|(u&15)<<4,o===5?parseInt(s.slice(4),16)/15:1),putToCache$1(n,r),r}else if(o===7||o===9){var u=parseInt(s.slice(1,7),16);if(!(u>=0&&u<=16777215)){setRgba$1(r,0,0,0,1);return}return setRgba$1(r,(u&16711680)>>16,(u&65280)>>8,u&255,o===9?parseInt(s.slice(7),16)/255:1),putToCache$1(n,r),r}return}var c=s.indexOf("("),p=s.indexOf(")");if(c!==-1&&p+1===o){var d=s.substr(0,c),_=s.substr(c+1,p-(c+1)).split(","),ja=1;switch(d){case"rgba":if(_.length!==4)return _.length===3?setRgba$1(r,+_[0],+_[1],+_[2],1):setRgba$1(r,0,0,0,1);ja=parseCssFloat$1(_.pop());case"rgb":if(_.length>=3)return setRgba$1(r,parseCssInt$1(_[0]),parseCssInt$1(_[1]),parseCssInt$1(_[2]),_.length===3?ja:parseCssFloat$1(_[3])),putToCache$1(n,r),r;setRgba$1(r,0,0,0,1);return;case"hsla":if(_.length!==4){setRgba$1(r,0,0,0,1);return}return _[3]=parseCssFloat$1(_[3]),hsla2rgba$1(_,r),putToCache$1(n,r),r;case"hsl":if(_.length!==3){setRgba$1(r,0,0,0,1);return}return hsla2rgba$1(_,r),putToCache$1(n,r),r;default:return}}setRgba$1(r,0,0,0,1)}}function hsla2rgba$1(n,r){var a=(parseFloat(n[0])%360+360)%360/360,s=parseCssFloat$1(n[1]),o=parseCssFloat$1(n[2]),u=o<=.5?o*(s+1):o+s-o*s,c=o*2-u;return r=r||[],setRgba$1(r,clampCssByte$1(cssHueToRgb$1(c,u,a+1/3)*255),clampCssByte$1(cssHueToRgb$1(c,u,a)*255),clampCssByte$1(cssHueToRgb$1(c,u,a-1/3)*255),1),n.length===4&&(r[3]=n[3]),r}function rgba2hsla$1(n){if(n){var r=n[0]/255,a=n[1]/255,s=n[2]/255,o=Math.min(r,a,s),u=Math.max(r,a,s),c=u-o,p=(u+o)/2,d,_;if(c===0)d=0,_=0;else{p<.5?_=c/(u+o):_=c/(2-u-o);var ja=((u-r)/6+c/2)/c,Ja=((u-a)/6+c/2)/c,ec=((u-s)/6+c/2)/c;r===u?d=ec-Ja:a===u?d=1/3+ja-ec:s===u&&(d=2/3+Ja-ja),d<0&&(d+=1),d>1&&(d-=1)}var tc=[d*360,_,p];return n[3]!=null&&tc.push(n[3]),tc}}function lift(n,r){var a=parse(n);if(a){for(var s=0;s<3;s++)r<0?a[s]=a[s]*(1-r)|0:a[s]=(255-a[s])*r+a[s]|0,a[s]>255?a[s]=255:a[s]<0&&(a[s]=0);return stringify(a,a.length===4?"rgba":"rgb")}}function fastLerp(n,r,a){if(!(!(r&&r.length)||!(n>=0&&n<=1))){a=a||[];var s=n*(r.length-1),o=Math.floor(s),u=Math.ceil(s),c=r[o],p=r[u],d=s-o;return a[0]=clampCssByte$1(lerpNumber$1(c[0],p[0],d)),a[1]=clampCssByte$1(lerpNumber$1(c[1],p[1],d)),a[2]=clampCssByte$1(lerpNumber$1(c[2],p[2],d)),a[3]=clampCssFloat$1(lerpNumber$1(c[3],p[3],d)),a}}function lerp$1(n,r,a){if(!(!(r&&r.length)||!(n>=0&&n<=1))){var s=n*(r.length-1),o=Math.floor(s),u=Math.ceil(s),c=parse(r[o]),p=parse(r[u]),d=s-o,_=stringify([clampCssByte$1(lerpNumber$1(c[0],p[0],d)),clampCssByte$1(lerpNumber$1(c[1],p[1],d)),clampCssByte$1(lerpNumber$1(c[2],p[2],d)),clampCssFloat$1(lerpNumber$1(c[3],p[3],d))],"rgba");return a?{color:_,leftIndex:o,rightIndex:u,value:s}:_}}function modifyHSL(n,r,a,s){var o=parse(n);if(n)return o=rgba2hsla$1(o),r!=null&&(o[0]=clampCssAngle$1(r)),a!=null&&(o[1]=parseCssFloat$1(a)),s!=null&&(o[2]=parseCssFloat$1(s)),stringify(hsla2rgba$1(o),"rgba")}function modifyAlpha(n,r){var a=parse(n);if(a&&r!=null)return a[3]=clampCssFloat$1(r),stringify(a,"rgba")}function stringify(n,r){if(!(!n||!n.length)){var a=n[0]+","+n[1]+","+n[2];return(r==="rgba"||r==="hsva"||r==="hsla")&&(a+=","+n[3]),r+"("+a+")"}}function lum(n,r){var a=parse(n);return a?(.299*a[0]+.587*a[1]+.114*a[2])*a[3]/255+(1-a[3])*r:0}var liftedColorCache=new LRU$1(100);function liftColor(n){if(isString(n)){var r=liftedColorCache.get(n);return r||(r=lift(n,-.1),liftedColorCache.put(n,r)),r}else if(isGradientObject(n)){var a=extend$2({},n);return a.colorStops=map$1(n.colorStops,function(s){return{offset:s.offset,color:lift(s.color,-.1)}}),a}return n}var mathRound$1=Math.round;function normalizeColor(n){var r;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var a=parse(n);a&&(n="rgb("+a[0]+","+a[1]+","+a[2]+")",r=a[3])}return{color:n,opacity:r??1}}var EPSILON$4=1e-4;function isAroundZero(n){return n<EPSILON$4&&n>-EPSILON$4}function round3(n){return mathRound$1(n*1e3)/1e3}function round4(n){return mathRound$1(n*1e4)/1e4}function getMatrixStr(n){return"matrix("+round3(n[0])+","+round3(n[1])+","+round3(n[2])+","+round3(n[3])+","+round4(n[4])+","+round4(n[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(n,r,a){return a==="top"?n+=r/2:a==="bottom"&&(n-=r/2),n}function hasShadow(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function getShadowKey(n){var r=n.style,a=n.getGlobalScale();return[r.shadowColor,(r.shadowBlur||0).toFixed(2),(r.shadowOffsetX||0).toFixed(2),(r.shadowOffsetY||0).toFixed(2),a[0],a[1]].join(",")}function isImagePattern(n){return n&&!!n.image}function isSVGPattern(n){return n&&!!n.svgElement}function isPattern(n){return isImagePattern(n)||isSVGPattern(n)}function isLinearGradient(n){return n.type==="linear"}function isRadialGradient(n){return n.type==="radial"}function isGradient(n){return n&&(n.type==="linear"||n.type==="radial")}function getIdURL(n){return"url(#"+n+")"}function getPathPrecision(n){var r=n.getGlobalScale(),a=Math.max(r[0],r[1]);return Math.max(Math.ceil(Math.log(a)/Math.log(10)),1)}function getSRTTransformString(n){var r=n.x||0,a=n.y||0,s=(n.rotation||0)*RADIAN_TO_DEGREE,o=retrieve2(n.scaleX,1),u=retrieve2(n.scaleY,1),c=n.skewX||0,p=n.skewY||0,d=[];return(r||a)&&d.push("translate("+r+"px,"+a+"px)"),s&&d.push("rotate("+s+")"),(o!==1||u!==1)&&d.push("scale("+o+","+u+")"),(c||p)&&d.push("skew("+mathRound$1(c*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(p*RADIAN_TO_DEGREE)+"deg)"),d.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(n,r,a){return(r-n)*a+n}function interpolate1DArray(n,r,a,s){for(var o=r.length,u=0;u<o;u++)n[u]=interpolateNumber$1(r[u],a[u],s);return n}function interpolate2DArray(n,r,a,s){for(var o=r.length,u=o&&r[0].length,c=0;c<o;c++){n[c]||(n[c]=[]);for(var p=0;p<u;p++)n[c][p]=interpolateNumber$1(r[c][p],a[c][p],s)}return n}function add1DArray(n,r,a,s){for(var o=r.length,u=0;u<o;u++)n[u]=r[u]+a[u]*s;return n}function add2DArray(n,r,a,s){for(var o=r.length,u=o&&r[0].length,c=0;c<o;c++){n[c]||(n[c]=[]);for(var p=0;p<u;p++)n[c][p]=r[c][p]+a[c][p]*s}return n}function fillColorStops(n,r){for(var a=n.length,s=r.length,o=a>s?r:n,u=Math.min(a,s),c=o[u-1]||{color:[0,0,0,0],offset:0},p=u;p<Math.max(a,s);p++)o.push({offset:c.offset,color:c.color.slice()})}function fillArray(n,r,a){var s=n,o=r;if(!(!s.push||!o.push)){var u=s.length,c=o.length;if(u!==c){var p=u>c;if(p)s.length=c;else for(var d=u;d<c;d++)s.push(a===1?o[d]:arraySlice.call(o[d]))}for(var _=s[0]&&s[0].length,d=0;d<s.length;d++)if(a===1)isNaN(s[d])&&(s[d]=o[d]);else for(var ja=0;ja<_;ja++)isNaN(s[d][ja])&&(s[d][ja]=o[d][ja])}}function cloneValue(n){if(isArrayLike(n)){var r=n.length;if(isArrayLike(n[0])){for(var a=[],s=0;s<r;s++)a.push(arraySlice.call(n[s]));return a}return arraySlice.call(n)}return n}function rgba2String(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function guessArrayDim(n){return isArrayLike(n&&n[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(n){return n===VALUE_TYPE_LINEAR_GRADIENT||n===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(n){return n===VALUE_TYPE_1D_ARRAY||n===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function n(r){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=r}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(r,a,s){this._needsSort=!0;var o=this.keyframes,u=o.length,c=!1,p=VALUE_TYPE_UNKOWN,d=a;if(isArrayLike(a)){var _=guessArrayDim(a);p=_,(_===1&&!isNumber(a[0])||_===2&&!isNumber(a[0][0]))&&(c=!0)}else if(isNumber(a)&&!eqNaN(a))p=VALUE_TYPE_NUMBER;else if(isString(a))if(!isNaN(+a))p=VALUE_TYPE_NUMBER;else{var ja=parse(a);ja&&(d=ja,p=VALUE_TYPE_COLOR)}else if(isGradientObject(a)){var Ja=extend$2({},d);Ja.colorStops=map$1(a.colorStops,function(tc){return{offset:tc.offset,color:parse(tc.color)}}),isLinearGradient(a)?p=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(a)&&(p=VALUE_TYPE_RADIAL_GRADIENT),d=Ja}u===0?this.valType=p:(p!==this.valType||p===VALUE_TYPE_UNKOWN)&&(c=!0),this.discrete=this.discrete||c;var ec={time:r,value:d,rawValue:a,percent:0};return s&&(ec.easing=s,ec.easingFunc=isFunction(s)?s:easingFuncs[s]||createCubicEasingFunc(s)),o.push(ec),ec},n.prototype.prepare=function(r,a){var s=this.keyframes;this._needsSort&&s.sort(function(nc,ic){return nc.time-ic.time});for(var o=this.valType,u=s.length,c=s[u-1],p=this.discrete,d=isArrayValueType(o),_=isGradientValueType(o),ja=0;ja<u;ja++){var Ja=s[ja],ec=Ja.value,tc=c.value;Ja.percent=Ja.time/r,p||(d&&ja!==u-1?fillArray(ec,tc,o):_&&fillColorStops(ec.colorStops,tc.colorStops))}if(!p&&o!==VALUE_TYPE_RADIAL_GRADIENT&&a&&this.needsAnimate()&&a.needsAnimate()&&o===a.valType&&!a._finished){this._additiveTrack=a;for(var rc=s[0].value,ja=0;ja<u;ja++)o===VALUE_TYPE_NUMBER?s[ja].additiveValue=s[ja].value-rc:o===VALUE_TYPE_COLOR?s[ja].additiveValue=add1DArray([],s[ja].value,rc,-1):isArrayValueType(o)&&(s[ja].additiveValue=o===VALUE_TYPE_1D_ARRAY?add1DArray([],s[ja].value,rc,-1):add2DArray([],s[ja].value,rc,-1))}},n.prototype.step=function(r,a){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var s=this._additiveTrack!=null,o=s?"additiveValue":"value",u=this.valType,c=this.keyframes,p=c.length,d=this.propName,_=u===VALUE_TYPE_COLOR,ja,Ja=this._lastFr,ec=Math.min,tc,rc;if(p===1)tc=rc=c[0];else{if(a<0)ja=0;else if(a<this._lastFrP){var nc=ec(Ja+1,p-1);for(ja=nc;ja>=0&&!(c[ja].percent<=a);ja--);ja=ec(ja,p-2)}else{for(ja=Ja;ja<p&&!(c[ja].percent>a);ja++);ja=ec(ja-1,p-2)}rc=c[ja+1],tc=c[ja]}if(tc&&rc){this._lastFr=ja,this._lastFrP=a;var ic=rc.percent-tc.percent,uc=ic===0?1:ec((a-tc.percent)/ic,1);rc.easingFunc&&(uc=rc.easingFunc(uc));var eh=s?this._additiveValue:_?tmpRgba:r[d];if((isArrayValueType(u)||_)&&!eh&&(eh=this._additiveValue=[]),this.discrete)r[d]=uc<1?tc.rawValue:rc.rawValue;else if(isArrayValueType(u))u===VALUE_TYPE_1D_ARRAY?interpolate1DArray(eh,tc[o],rc[o],uc):interpolate2DArray(eh,tc[o],rc[o],uc);else if(isGradientValueType(u)){var rh=tc[o],ah=rc[o],ih=u===VALUE_TYPE_LINEAR_GRADIENT;r[d]={type:ih?"linear":"radial",x:interpolateNumber$1(rh.x,ah.x,uc),y:interpolateNumber$1(rh.y,ah.y,uc),colorStops:map$1(rh.colorStops,function(uh,ch){var hh=ah.colorStops[ch];return{offset:interpolateNumber$1(uh.offset,hh.offset,uc),color:rgba2String(interpolate1DArray([],uh.color,hh.color,uc))}}),global:ah.global},ih?(r[d].x2=interpolateNumber$1(rh.x2,ah.x2,uc),r[d].y2=interpolateNumber$1(rh.y2,ah.y2,uc)):r[d].r=interpolateNumber$1(rh.r,ah.r,uc)}else if(_)interpolate1DArray(eh,tc[o],rc[o],uc),s||(r[d]=rgba2String(eh));else{var oh=interpolateNumber$1(tc[o],rc[o],uc);s?this._additiveValue=oh:r[d]=oh}s&&this._addToTarget(r)}}},n.prototype._addToTarget=function(r){var a=this.valType,s=this.propName,o=this._additiveValue;a===VALUE_TYPE_NUMBER?r[s]=r[s]+o:a===VALUE_TYPE_COLOR?(parse(r[s],tmpRgba),add1DArray(tmpRgba,tmpRgba,o,1),r[s]=rgba2String(tmpRgba)):a===VALUE_TYPE_1D_ARRAY?add1DArray(r[s],r[s],o,1):a===VALUE_TYPE_2D_ARRAY&&add2DArray(r[s],r[s],o,1)},n}(),Animator=function(){function n(r,a,s,o){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=r,this._loop=a,a&&o){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=o,this._allowDiscrete=s}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(r){this._target=r},n.prototype.when=function(r,a,s){return this.whenWithKeys(r,a,keys(a),s)},n.prototype.whenWithKeys=function(r,a,s,o){for(var u=this._tracks,c=0;c<s.length;c++){var p=s[c],d=u[p];if(!d){d=u[p]=new Track(p);var _=void 0,ja=this._getAdditiveTrack(p);if(ja){var Ja=ja.keyframes,ec=Ja[Ja.length-1];_=ec&&ec.value,ja.valType===VALUE_TYPE_COLOR&&_&&(_=rgba2String(_))}else _=this._target[p];if(_==null)continue;r>0&&d.addKeyframe(0,cloneValue(_),o),this._trackKeys.push(p)}d.addKeyframe(r,cloneValue(a[p]),o)}return this._maxTime=Math.max(this._maxTime,r),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(r){return this._maxTime=r,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var r=this._doneCbs;if(r)for(var a=r.length,s=0;s<a;s++)r[s].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var r=this.animation,a=this._abortedCbs;if(r&&r.removeClip(this._clip),this._clip=null,a)for(var s=0;s<a.length;s++)a[s].call(this)},n.prototype._setTracksFinished=function(){for(var r=this._tracks,a=this._trackKeys,s=0;s<a.length;s++)r[a[s]].setFinished()},n.prototype._getAdditiveTrack=function(r){var a,s=this._additiveAnimators;if(s)for(var o=0;o<s.length;o++){var u=s[o].getTrack(r);u&&(a=u)}return a},n.prototype.start=function(r){if(!(this._started>0)){this._started=1;for(var a=this,s=[],o=this._maxTime||0,u=0;u<this._trackKeys.length;u++){var c=this._trackKeys[u],p=this._tracks[c],d=this._getAdditiveTrack(c),_=p.keyframes,ja=_.length;if(p.prepare(o,d),p.needsAnimate())if(!this._allowDiscrete&&p.discrete){var Ja=_[ja-1];Ja&&(a._target[p.propName]=Ja.rawValue),p.setFinished()}else s.push(p)}if(s.length||this._force){var ec=new Clip({life:o,loop:this._loop,delay:this._delay||0,onframe:function(tc){a._started=2;var rc=a._additiveAnimators;if(rc){for(var nc=!1,ic=0;ic<rc.length;ic++)if(rc[ic]._clip){nc=!0;break}nc||(a._additiveAnimators=null)}for(var ic=0;ic<s.length;ic++)s[ic].step(a._target,tc);var uc=a._onframeCbs;if(uc)for(var ic=0;ic<uc.length;ic++)uc[ic](a._target,tc)},ondestroy:function(){a._doneCallback()}});this._clip=ec,this.animation&&this.animation.addClip(ec),r&&ec.setEasing(r)}else this._doneCallback();return this}},n.prototype.stop=function(r){if(this._clip){var a=this._clip;r&&a.onframe(1),this._abortedCallback()}},n.prototype.delay=function(r){return this._delay=r,this},n.prototype.during=function(r){return r&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(r)),this},n.prototype.done=function(r){return r&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(r)),this},n.prototype.aborted=function(r){return r&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(r)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(r){return this._tracks[r]},n.prototype.getTracks=function(){var r=this;return map$1(this._trackKeys,function(a){return r._tracks[a]})},n.prototype.stopTracks=function(r,a){if(!r.length||!this._clip)return!0;for(var s=this._tracks,o=this._trackKeys,u=0;u<r.length;u++){var c=s[r[u]];c&&!c.isFinished()&&(a?c.step(this._target,1):this._started===1&&c.step(this._target,0),c.setFinished())}for(var p=!0,u=0;u<o.length;u++)if(!s[o[u]].isFinished()){p=!1;break}return p&&this._abortedCallback(),p},n.prototype.saveTo=function(r,a,s){if(r){a=a||this._trackKeys;for(var o=0;o<a.length;o++){var u=a[o],c=this._tracks[u];if(!(!c||c.isFinished())){var p=c.keyframes,d=p[s?0:p.length-1];d&&(r[u]=cloneValue(d.rawValue))}}}},n.prototype.__changeFinalValue=function(r,a){a=a||keys(r);for(var s=0;s<a.length;s++){var o=a[s],u=this._tracks[o];if(u){var c=u.keyframes;if(c.length>1){var p=c.pop();u.addKeyframe(p.time,r[o]),u.prepare(this._maxTime,u.getAdditiveTrack())}}}},n}();const Animator$1=Animator;function getTime(){return new Date().getTime()}var Animation=function(n){__extends(r,n);function r(a){var s=n.call(this)||this;return s._running=!1,s._time=0,s._pausedTime=0,s._pauseStart=0,s._paused=!1,a=a||{},s.stage=a.stage||{},s}return r.prototype.addClip=function(a){a.animation&&this.removeClip(a),this._head?(this._tail.next=a,a.prev=this._tail,a.next=null,this._tail=a):this._head=this._tail=a,a.animation=this},r.prototype.addAnimator=function(a){a.animation=this;var s=a.getClip();s&&this.addClip(s)},r.prototype.removeClip=function(a){if(a.animation){var s=a.prev,o=a.next;s?s.next=o:this._head=o,o?o.prev=s:this._tail=s,a.next=a.prev=a.animation=null}},r.prototype.removeAnimator=function(a){var s=a.getClip();s&&this.removeClip(s),a.animation=null},r.prototype.update=function(a){for(var s=getTime()-this._pausedTime,o=s-this._time,u=this._head;u;){var c=u.next,p=u.step(s,o);p&&(u.ondestroy(),this.removeClip(u)),u=c}this._time=s,a||(this.trigger("frame",o),this.stage.update&&this.stage.update())},r.prototype._startLoop=function(){var a=this;this._running=!0;function s(){a._running&&(requestAnimationFrame$1(s),!a._paused&&a.update())}requestAnimationFrame$1(s)},r.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},r.prototype.stop=function(){this._running=!1},r.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},r.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},r.prototype.clear=function(){for(var a=this._head;a;){var s=a.next;a.prev=a.next=a.animation=null,a=s}this._head=this._tail=null},r.prototype.isFinished=function(){return this._head==null},r.prototype.animate=function(a,s){s=s||{},this.start();var o=new Animator$1(a,s.loop);return this.addAnimator(o),o},r}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],r=["touchstart","touchend","touchmove"],a={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},s=map$1(n,function(o){var u=o.replace("mouse","pointer");return a.hasOwnProperty(u)?u:o});return{mouse:n,touch:r,pointer:s}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(n){var r=n.pointerType;return r==="pen"||r==="touch"}function setTouchTimer(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function markTouch(n){n&&(n.zrByTouch=!0)}function normalizeGlobalEvent(n,r){return normalizeEvent(n.dom,new FakeGlobalEvent(n,r),!0)}function isLocalEl(n,r){for(var a=r,s=!1;a&&a.nodeType!==9&&!(s=a.domBelongToZr||a!==r&&a===n.painterRoot);)a=a.parentNode;return s}var FakeGlobalEvent=function(){function n(r,a){this.stopPropagation=noop$1,this.stopImmediatePropagation=noop$1,this.preventDefault=noop$1,this.type=a.type,this.target=this.currentTarget=r.dom,this.pointerType=a.pointerType,this.clientX=a.clientX,this.clientY=a.clientY}return n}(),localDOMHandlers={mousedown:function(n){n=normalizeEvent(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=normalizeEvent(this.dom,n);var r=this.__mayPointerCapture;r&&(n.zrX!==r[0]||n.zrY!==r[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=normalizeEvent(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=normalizeEvent(this.dom,n);var r=n.toElement||n.relatedTarget;isLocalEl(this,r)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){wheelEventSupported=!0,n=normalizeEvent(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){wheelEventSupported||(n=normalizeEvent(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),localDOMHandlers.mousemove.call(this,n),localDOMHandlers.mousedown.call(this,n)},touchmove:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.handler.processGesture(n,"change"),localDOMHandlers.mousemove.call(this,n)},touchend:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.handler.processGesture(n,"end"),localDOMHandlers.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,n)},pointerdown:function(n){localDOMHandlers.mousedown.call(this,n)},pointermove:function(n){isPointerFromTouch(n)||localDOMHandlers.mousemove.call(this,n)},pointerup:function(n){localDOMHandlers.mouseup.call(this,n)},pointerout:function(n){isPointerFromTouch(n)||localDOMHandlers.mouseout.call(this,n)}};each$f(["click","dblclick","contextmenu"],function(n){localDOMHandlers[n]=function(r){r=normalizeEvent(this.dom,r),this.trigger(n,r)}});var globalDOMHandlers={pointermove:function(n){isPointerFromTouch(n)||globalDOMHandlers.mousemove.call(this,n)},pointerup:function(n){globalDOMHandlers.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var r=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),r&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function mountLocalDOMEventListeners(n,r){var a=r.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(s){mountSingleDOMEventListener(r,s,function(o){a[s].call(n,o)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(s){mountSingleDOMEventListener(r,s,function(o){a[s].call(n,o),setTouchTimer(r)})}),each$f(localNativeListenerNames.mouse,function(s){mountSingleDOMEventListener(r,s,function(o){o=getNativeEvent(o),r.touching||a[s].call(n,o)})}))}function mountGlobalDOMEventListeners(n,r){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,a):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,a);function a(s){function o(u){u=getNativeEvent(u),isLocalEl(n,u.target)||(u=normalizeGlobalEvent(n,u),r.domHandlers[s].call(n,u))}mountSingleDOMEventListener(r,s,o,{capture:!0})}}function mountSingleDOMEventListener(n,r,a,s){n.mounted[r]=a,n.listenerOpts[r]=s,addEventListener(n.domTarget,r,a,s)}function unmountDOMEventListeners(n){var r=n.mounted;for(var a in r)r.hasOwnProperty(a)&&removeEventListener(n.domTarget,a,r[a],n.listenerOpts[a]);n.mounted={}}var DOMHandlerScope=function(){function n(r,a){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=r,this.domHandlers=a}return n}(),HandlerDomProxy=function(n){__extends(r,n);function r(a,s){var o=n.call(this)||this;return o.__pointerCapturing=!1,o.dom=a,o.painterRoot=s,o._localHandlerScope=new DOMHandlerScope(a,localDOMHandlers),globalEventSupported&&(o._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(o,o._localHandlerScope),o}return r.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},r.prototype.setCursor=function(a){this.dom.style&&(this.dom.style.cursor=a||"default")},r.prototype.__togglePointerCapture=function(a){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+a){this.__pointerCapturing=a;var s=this._globalHandlerScope;a?mountGlobalDOMEventListeners(this,s):unmountDOMEventListeners(s)}},r}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity$1,EPSILON$3=5e-5;function isNotAroundZero(n){return n>EPSILON$3||n<-EPSILON$3}var scaleTmp=[],tmpTransform=[],originTransform=create$2(),abs$1=Math.abs,Transformable=function(){function n(){}return n.prototype.getLocalTransform=function(r){return n.getLocalTransform(this,r)},n.prototype.setPosition=function(r){this.x=r[0],this.y=r[1]},n.prototype.setScale=function(r){this.scaleX=r[0],this.scaleY=r[1]},n.prototype.setSkew=function(r){this.skewX=r[0],this.skewY=r[1]},n.prototype.setOrigin=function(r){this.originX=r[0],this.originY=r[1]},n.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},n.prototype.updateTransform=function(){var r=this.parent&&this.parent.transform,a=this.needLocalTransform(),s=this.transform;if(!(a||r)){s&&(mIdentity(s),this.invTransform=null);return}s=s||create$2(),a?this.getLocalTransform(s):mIdentity(s),r&&(a?mul(s,r,s):copy(s,r)),this.transform=s,this._resolveGlobalScaleRatio(s)},n.prototype._resolveGlobalScaleRatio=function(r){var a=this.globalScaleRatio;if(a!=null&&a!==1){this.getGlobalScale(scaleTmp);var s=scaleTmp[0]<0?-1:1,o=scaleTmp[1]<0?-1:1,u=((scaleTmp[0]-s)*a+s)/scaleTmp[0]||0,c=((scaleTmp[1]-o)*a+o)/scaleTmp[1]||0;r[0]*=u,r[1]*=u,r[2]*=c,r[3]*=c}this.invTransform=this.invTransform||create$2(),invert(this.invTransform,r)},n.prototype.getComputedTransform=function(){for(var r=this,a=[];r;)a.push(r),r=r.parent;for(;r=a.pop();)r.updateTransform();return this.transform},n.prototype.setLocalTransform=function(r){if(r){var a=r[0]*r[0]+r[1]*r[1],s=r[2]*r[2]+r[3]*r[3],o=Math.atan2(r[1],r[0]),u=Math.PI/2+o-Math.atan2(r[3],r[2]);s=Math.sqrt(s)*Math.cos(u),a=Math.sqrt(a),this.skewX=u,this.skewY=0,this.rotation=-o,this.x=+r[4],this.y=+r[5],this.scaleX=a,this.scaleY=s,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var r=this.parent,a=this.transform;r&&r.transform&&(r.invTransform=r.invTransform||create$2(),mul(tmpTransform,r.invTransform,a),a=tmpTransform);var s=this.originX,o=this.originY;(s||o)&&(originTransform[4]=s,originTransform[5]=o,mul(tmpTransform,a,originTransform),tmpTransform[4]-=s,tmpTransform[5]-=o,a=tmpTransform),this.setLocalTransform(a)}},n.prototype.getGlobalScale=function(r){var a=this.transform;return r=r||[],a?(r[0]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),r[1]=Math.sqrt(a[2]*a[2]+a[3]*a[3]),a[0]<0&&(r[0]=-r[0]),a[3]<0&&(r[1]=-r[1]),r):(r[0]=1,r[1]=1,r)},n.prototype.transformCoordToLocal=function(r,a){var s=[r,a],o=this.invTransform;return o&&applyTransform$1(s,s,o),s},n.prototype.transformCoordToGlobal=function(r,a){var s=[r,a],o=this.transform;return o&&applyTransform$1(s,s,o),s},n.prototype.getLineScale=function(){var r=this.transform;return r&&abs$1(r[0]-1)>1e-10&&abs$1(r[3]-1)>1e-10?Math.sqrt(abs$1(r[0]*r[3]-r[2]*r[1])):1},n.prototype.copyTransform=function(r){copyTransform(this,r)},n.getLocalTransform=function(r,a){a=a||[];var s=r.originX||0,o=r.originY||0,u=r.scaleX,c=r.scaleY,p=r.anchorX,d=r.anchorY,_=r.rotation||0,ja=r.x,Ja=r.y,ec=r.skewX?Math.tan(r.skewX):0,tc=r.skewY?Math.tan(-r.skewY):0;if(s||o||p||d){var rc=s+p,nc=o+d;a[4]=-rc*u-ec*nc*c,a[5]=-nc*c-tc*rc*u}else a[4]=a[5]=0;return a[0]=u,a[3]=c,a[1]=tc*u,a[2]=ec*c,_&&rotate(a,a,_),a[4]+=s+ja,a[5]+=o+Ja,a},n.initDefaultProps=function(){var r=n.prototype;r.scaleX=r.scaleY=r.globalScaleRatio=1,r.x=r.y=r.originX=r.originY=r.skewX=r.skewY=r.rotation=r.anchorX=r.anchorY=0}(),n}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(n,r){for(var a=0;a<TRANSFORMABLE_PROPS.length;a++){var s=TRANSFORMABLE_PROPS[a];n[s]=r[s]}}var textWidthCache={};function getWidth(n,r){r=r||DEFAULT_FONT;var a=textWidthCache[r];a||(a=textWidthCache[r]=new LRU$1(500));var s=a.get(n);return s==null&&(s=platformApi.measureText(n,r).width,a.put(n,s)),s}function innerGetBoundingRect(n,r,a,s){var o=getWidth(n,r),u=getLineHeight(r),c=adjustTextX(0,o,a),p=adjustTextY(0,u,s),d=new BoundingRect(c,p,o,u);return d}function getBoundingRect(n,r,a,s){var o=((n||"")+"").split(`
`),u=o.length;if(u===1)return innerGetBoundingRect(o[0],r,a,s);for(var c=new BoundingRect(0,0,0,0),p=0;p<o.length;p++){var d=innerGetBoundingRect(o[p],r,a,s);p===0?c.copy(d):c.union(d)}return c}function adjustTextX(n,r,a){return a==="right"?n-=r:a==="center"&&(n-=r/2),n}function adjustTextY(n,r,a){return a==="middle"?n-=r/2:a==="bottom"&&(n-=r),n}function getLineHeight(n){return getWidth("国",n)}function parsePercent$1(n,r){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*r:parseFloat(n):n}function calculateTextPosition(n,r,a){var s=r.position||"inside",o=r.distance!=null?r.distance:5,u=a.height,c=a.width,p=u/2,d=a.x,_=a.y,ja="left",Ja="top";if(s instanceof Array)d+=parsePercent$1(s[0],a.width),_+=parsePercent$1(s[1],a.height),ja=null,Ja=null;else switch(s){case"left":d-=o,_+=p,ja="right",Ja="middle";break;case"right":d+=o+c,_+=p,Ja="middle";break;case"top":d+=c/2,_-=o,ja="center",Ja="bottom";break;case"bottom":d+=c/2,_+=u+o,ja="center";break;case"inside":d+=c/2,_+=p,ja="center",Ja="middle";break;case"insideLeft":d+=o,_+=p,Ja="middle";break;case"insideRight":d+=c-o,_+=p,ja="right",Ja="middle";break;case"insideTop":d+=c/2,_+=o,ja="center";break;case"insideBottom":d+=c/2,_+=u-o,ja="center",Ja="bottom";break;case"insideTopLeft":d+=o,_+=o;break;case"insideTopRight":d+=c-o,_+=o,ja="right";break;case"insideBottomLeft":d+=o,_+=u-o,Ja="bottom";break;case"insideBottomRight":d+=c-o,_+=u-o,ja="right",Ja="bottom";break}return n=n||{},n.x=d,n.y=_,n.align=ja,n.verticalAlign=Ja,n}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(n,r){return n[r]=!0,n},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element$1=function(){function n(r){this.id=guid$1(),this.animators=[],this.currentStates=[],this.states={},this._init(r)}return n.prototype._init=function(r){this.attr(r)},n.prototype.drift=function(r,a,s){switch(this.draggable){case"horizontal":a=0;break;case"vertical":r=0;break}var o=this.transform;o||(o=this.transform=[1,0,0,1,0,0]),o[4]+=r,o[5]+=a,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(r){var a=this._textContent;if(a&&(!a.ignore||r)){this.textConfig||(this.textConfig={});var s=this.textConfig,o=s.local,u=a.innerTransformable,c=void 0,p=void 0,d=!1;u.parent=o?this:null;var _=!1;if(u.copyTransform(a),s.position!=null){var ja=tmpBoundingRect;s.layoutRect?ja.copy(s.layoutRect):ja.copy(this.getBoundingRect()),o||ja.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,s,ja):calculateTextPosition(tmpTextPosCalcRes,s,ja),u.x=tmpTextPosCalcRes.x,u.y=tmpTextPosCalcRes.y,c=tmpTextPosCalcRes.align,p=tmpTextPosCalcRes.verticalAlign;var Ja=s.origin;if(Ja&&s.rotation!=null){var ec=void 0,tc=void 0;Ja==="center"?(ec=ja.width*.5,tc=ja.height*.5):(ec=parsePercent$1(Ja[0],ja.width),tc=parsePercent$1(Ja[1],ja.height)),_=!0,u.originX=-u.x+ec+(o?0:ja.x),u.originY=-u.y+tc+(o?0:ja.y)}}s.rotation!=null&&(u.rotation=s.rotation);var rc=s.offset;rc&&(u.x+=rc[0],u.y+=rc[1],_||(u.originX=-rc[0],u.originY=-rc[1]));var nc=s.inside==null?typeof s.position=="string"&&s.position.indexOf("inside")>=0:s.inside,ic=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),uc=void 0,eh=void 0,rh=void 0;nc&&this.canBeInsideText()?(uc=s.insideFill,eh=s.insideStroke,(uc==null||uc==="auto")&&(uc=this.getInsideTextFill()),(eh==null||eh==="auto")&&(eh=this.getInsideTextStroke(uc),rh=!0)):(uc=s.outsideFill,eh=s.outsideStroke,(uc==null||uc==="auto")&&(uc=this.getOutsideFill()),(eh==null||eh==="auto")&&(eh=this.getOutsideStroke(uc),rh=!0)),uc=uc||"#000",(uc!==ic.fill||eh!==ic.stroke||rh!==ic.autoStroke||c!==ic.align||p!==ic.verticalAlign)&&(d=!0,ic.fill=uc,ic.stroke=eh,ic.autoStroke=rh,ic.align=c,ic.verticalAlign=p,a.setDefaultTextStyle(ic)),a.__dirty|=REDRAW_BIT,d&&a.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(r){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},n.prototype.getOutsideStroke=function(r){var a=this.__zr&&this.__zr.getBackgroundColor(),s=typeof a=="string"&&parse(a);s||(s=[255,255,255,1]);for(var o=s[3],u=this.__zr.isDarkMode(),c=0;c<3;c++)s[c]=s[c]*o+(u?0:255)*(1-o);return s[3]=1,stringify(s,"rgba")},n.prototype.traverse=function(r,a){},n.prototype.attrKV=function(r,a){r==="textConfig"?this.setTextConfig(a):r==="textContent"?this.setTextContent(a):r==="clipPath"?this.setClipPath(a):r==="extra"?(this.extra=this.extra||{},extend$2(this.extra,a)):this[r]=a},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(r,a){if(typeof r=="string")this.attrKV(r,a);else if(isObject$3(r))for(var s=r,o=keys(s),u=0;u<o.length;u++){var c=o[u];this.attrKV(c,r[c])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(r){this._innerSaveToNormal(r);for(var a=this._normalState,s=0;s<this.animators.length;s++){var o=this.animators[s],u=o.__fromStateTransition;if(!(o.getLoop()||u&&u!==PRESERVED_NORMAL_STATE)){var c=o.targetName,p=c?a[c]:a;o.saveTo(p)}}},n.prototype._innerSaveToNormal=function(r){var a=this._normalState;a||(a=this._normalState={}),r.textConfig&&!a.textConfig&&(a.textConfig=this.textConfig),this._savePrimaryToNormal(r,a,PRIMARY_STATES_KEYS$1)},n.prototype._savePrimaryToNormal=function(r,a,s){for(var o=0;o<s.length;o++){var u=s[o];r[u]!=null&&!(u in a)&&(a[u]=this[u])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(r){return this.states[r]},n.prototype.ensureState=function(r){var a=this.states;return a[r]||(a[r]={}),a[r]},n.prototype.clearStates=function(r){this.useState(PRESERVED_NORMAL_STATE,!1,r)},n.prototype.useState=function(r,a,s,o){var u=r===PRESERVED_NORMAL_STATE,c=this.hasState();if(!(!c&&u)){var p=this.currentStates,d=this.stateTransition;if(!(indexOf(p,r)>=0&&(a||p.length===1))){var _;if(this.stateProxy&&!u&&(_=this.stateProxy(r)),_||(_=this.states&&this.states[r]),!_&&!u){logError("State "+r+" not exists.");return}u||this.saveCurrentToNormalState(_);var ja=!!(_&&_.hoverLayer||o);ja&&this._toggleHoverLayerFlag(!0),this._applyStateObj(r,_,this._normalState,a,!s&&!this.__inHover&&d&&d.duration>0,d);var Ja=this._textContent,ec=this._textGuide;return Ja&&Ja.useState(r,a,s,ja),ec&&ec.useState(r,a,s,ja),u?(this.currentStates=[],this._normalState={}):a?this.currentStates.push(r):this.currentStates=[r],this._updateAnimationTargets(),this.markRedraw(),!ja&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),_}}},n.prototype.useStates=function(r,a,s){if(!r.length)this.clearStates();else{var o=[],u=this.currentStates,c=r.length,p=c===u.length;if(p){for(var d=0;d<c;d++)if(r[d]!==u[d]){p=!1;break}}if(p)return;for(var d=0;d<c;d++){var _=r[d],ja=void 0;this.stateProxy&&(ja=this.stateProxy(_,r)),ja||(ja=this.states[_]),ja&&o.push(ja)}var Ja=o[c-1],ec=!!(Ja&&Ja.hoverLayer||s);ec&&this._toggleHoverLayerFlag(!0);var tc=this._mergeStates(o),rc=this.stateTransition;this.saveCurrentToNormalState(tc),this._applyStateObj(r.join(","),tc,this._normalState,!1,!a&&!this.__inHover&&rc&&rc.duration>0,rc);var nc=this._textContent,ic=this._textGuide;nc&&nc.useStates(r,a,ec),ic&&ic.useStates(r,a,ec),this._updateAnimationTargets(),this.currentStates=r.slice(),this.markRedraw(),!ec&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},n.prototype.isSilent=function(){for(var r=this.silent,a=this.parent;!r&&a;){if(a.silent){r=!0;break}a=a.parent}return r},n.prototype._updateAnimationTargets=function(){for(var r=0;r<this.animators.length;r++){var a=this.animators[r];a.targetName&&a.changeTarget(this[a.targetName])}},n.prototype.removeState=function(r){var a=indexOf(this.currentStates,r);if(a>=0){var s=this.currentStates.slice();s.splice(a,1),this.useStates(s)}},n.prototype.replaceState=function(r,a,s){var o=this.currentStates.slice(),u=indexOf(o,r),c=indexOf(o,a)>=0;u>=0?c?o.splice(u,1):o[u]=a:s&&!c&&o.push(a),this.useStates(o)},n.prototype.toggleState=function(r,a){a?this.useState(r,!0):this.removeState(r)},n.prototype._mergeStates=function(r){for(var a={},s,o=0;o<r.length;o++){var u=r[o];extend$2(a,u),u.textConfig&&(s=s||{},extend$2(s,u.textConfig))}return s&&(a.textConfig=s),a},n.prototype._applyStateObj=function(r,a,s,o,u,c){var p=!(a&&o);a&&a.textConfig?(this.textConfig=extend$2({},o?this.textConfig:s.textConfig),extend$2(this.textConfig,a.textConfig)):p&&s.textConfig&&(this.textConfig=s.textConfig);for(var d={},_=!1,ja=0;ja<PRIMARY_STATES_KEYS$1.length;ja++){var Ja=PRIMARY_STATES_KEYS$1[ja],ec=u&&DEFAULT_ANIMATABLE_MAP[Ja];a&&a[Ja]!=null?ec?(_=!0,d[Ja]=a[Ja]):this[Ja]=a[Ja]:p&&s[Ja]!=null&&(ec?(_=!0,d[Ja]=s[Ja]):this[Ja]=s[Ja])}if(!u)for(var ja=0;ja<this.animators.length;ja++){var tc=this.animators[ja],rc=tc.targetName;tc.getLoop()||tc.__changeFinalValue(rc?(a||s)[rc]:a||s)}_&&this._transitionState(r,d,c)},n.prototype._attachComponent=function(r){if(!(r.__zr&&!r.__hostTarget)&&r!==this){var a=this.__zr;a&&r.addSelfToZr(a),r.__zr=a,r.__hostTarget=this}},n.prototype._detachComponent=function(r){r.__zr&&r.removeSelfFromZr(r.__zr),r.__zr=null,r.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(r){this._clipPath&&this._clipPath!==r&&this.removeClipPath(),this._attachComponent(r),this._clipPath=r,this.markRedraw()},n.prototype.removeClipPath=function(){var r=this._clipPath;r&&(this._detachComponent(r),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(r){var a=this._textContent;a!==r&&(a&&a!==r&&this.removeTextContent(),r.innerTransformable=new Transformable,this._attachComponent(r),this._textContent=r,this.markRedraw())},n.prototype.setTextConfig=function(r){this.textConfig||(this.textConfig={}),extend$2(this.textConfig,r),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var r=this._textContent;r&&(r.innerTransformable=null,this._detachComponent(r),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(r){this._textGuide&&this._textGuide!==r&&this.removeTextGuideLine(),this._attachComponent(r),this._textGuide=r,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var r=this._textGuide;r&&(this._detachComponent(r),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var r=this.__zr;r&&(this.__inHover?r.refreshHover():r.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(r){this.__inHover=r;var a=this._textContent,s=this._textGuide;a&&(a.__inHover=r),s&&(s.__inHover=r)},n.prototype.addSelfToZr=function(r){if(this.__zr!==r){this.__zr=r;var a=this.animators;if(a)for(var s=0;s<a.length;s++)r.animation.addAnimator(a[s]);this._clipPath&&this._clipPath.addSelfToZr(r),this._textContent&&this._textContent.addSelfToZr(r),this._textGuide&&this._textGuide.addSelfToZr(r)}},n.prototype.removeSelfFromZr=function(r){if(this.__zr){this.__zr=null;var a=this.animators;if(a)for(var s=0;s<a.length;s++)r.animation.removeAnimator(a[s]);this._clipPath&&this._clipPath.removeSelfFromZr(r),this._textContent&&this._textContent.removeSelfFromZr(r),this._textGuide&&this._textGuide.removeSelfFromZr(r)}},n.prototype.animate=function(r,a,s){var o=r?this[r]:this,u=new Animator$1(o,a,s);return r&&(u.targetName=r),this.addAnimator(u,r),u},n.prototype.addAnimator=function(r,a){var s=this.__zr,o=this;r.during(function(){o.updateDuringAnimation(a)}).done(function(){var u=o.animators,c=indexOf(u,r);c>=0&&u.splice(c,1)}),this.animators.push(r),s&&s.animation.addAnimator(r),s&&s.wakeUp()},n.prototype.updateDuringAnimation=function(r){this.markRedraw()},n.prototype.stopAnimation=function(r,a){for(var s=this.animators,o=s.length,u=[],c=0;c<o;c++){var p=s[c];!r||r===p.scope?p.stop(a):u.push(p)}return this.animators=u,this},n.prototype.animateTo=function(r,a,s){animateTo(this,r,a,s)},n.prototype.animateFrom=function(r,a,s){animateTo(this,r,a,s,!0)},n.prototype._transitionState=function(r,a,s,o){for(var u=animateTo(this,a,s,o),c=0;c<u.length;c++)u[c].__fromStateTransition=r},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var r=n.prototype;r.type="element",r.name="",r.ignore=r.silent=r.isGroup=r.draggable=r.dragging=r.ignoreClip=r.__inHover=!1,r.__dirty=REDRAW_BIT;function a(s,o,u,c){Object.defineProperty(r,s,{get:function(){if(!this[o]){var d=this[o]=[];p(this,d)}return this[o]},set:function(d){this[u]=d[0],this[c]=d[1],this[o]=d,p(this,d)}});function p(d,_){Object.defineProperty(_,0,{get:function(){return d[u]},set:function(ja){d[u]=ja}}),Object.defineProperty(_,1,{get:function(){return d[c]},set:function(ja){d[c]=ja}})}}Object.defineProperty&&(a("position","_legacyPos","x","y"),a("scale","_legacyScale","scaleX","scaleY"),a("origin","_legacyOrigin","originX","originY"))}(),n}();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(n,r,a,s,o){a=a||{};var u=[];animateToShallow(n,"",n,r,a,s,u,o);var c=u.length,p=!1,d=a.done,_=a.aborted,ja=function(){p=!0,c--,c<=0&&(p?d&&d():_&&_())},Ja=function(){c--,c<=0&&(p?d&&d():_&&_())};c||d&&d(),u.length>0&&a.during&&u[0].during(function(rc,nc){a.during(nc)});for(var ec=0;ec<u.length;ec++){var tc=u[ec];ja&&tc.done(ja),Ja&&tc.aborted(Ja),a.force&&tc.duration(a.duration),tc.start(a.easing)}return u}function copyArrShallow(n,r,a){for(var s=0;s<a;s++)n[s]=r[s]}function is2DArray(n){return isArrayLike(n[0])}function copyValue(n,r,a){if(isArrayLike(r[a]))if(isArrayLike(n[a])||(n[a]=[]),isTypedArray(r[a])){var s=r[a].length;n[a].length!==s&&(n[a]=new r[a].constructor(s),copyArrShallow(n[a],r[a],s))}else{var o=r[a],u=n[a],c=o.length;if(is2DArray(o))for(var p=o[0].length,d=0;d<c;d++)u[d]?copyArrShallow(u[d],o[d],p):u[d]=Array.prototype.slice.call(o[d]);else copyArrShallow(u,o,c);u.length=o.length}else n[a]=r[a]}function isValueSame(n,r){return n===r||isArrayLike(n)&&isArrayLike(r)&&is1DArraySame(n,r)}function is1DArraySame(n,r){var a=n.length;if(a!==r.length)return!1;for(var s=0;s<a;s++)if(n[s]!==r[s])return!1;return!0}function animateToShallow(n,r,a,s,o,u,c,p){for(var d=keys(s),_=o.duration,ja=o.delay,Ja=o.additive,ec=o.setToFinal,tc=!isObject$3(u),rc=n.animators,nc=[],ic=0;ic<d.length;ic++){var uc=d[ic],eh=s[uc];if(eh!=null&&a[uc]!=null&&(tc||u[uc]))if(isObject$3(eh)&&!isArrayLike(eh)&&!isGradientObject(eh)){if(r){p||(a[uc]=eh,n.updateDuringAnimation(r));continue}animateToShallow(n,uc,a[uc],eh,o,u&&u[uc],c,p)}else nc.push(uc);else p||(a[uc]=eh,n.updateDuringAnimation(r),nc.push(uc))}var rh=nc.length;if(!Ja&&rh)for(var ah=0;ah<rc.length;ah++){var ih=rc[ah];if(ih.targetName===r){var oh=ih.stopTracks(nc);if(oh){var uh=indexOf(rc,ih);rc.splice(uh,1)}}}if(o.force||(nc=filter(nc,function(gh){return!isValueSame(s[gh],a[gh])}),rh=nc.length),rh>0||o.force&&!c.length){var ch=void 0,hh=void 0,dh=void 0;if(p){hh={},ec&&(ch={});for(var ah=0;ah<rh;ah++){var uc=nc[ah];hh[uc]=a[uc],ec?ch[uc]=s[uc]:a[uc]=s[uc]}}else if(ec){dh={};for(var ah=0;ah<rh;ah++){var uc=nc[ah];dh[uc]=cloneValue(a[uc]),copyValue(a,s,uc)}}var ih=new Animator$1(a,!1,!1,Ja?filter(rc,function(fh){return fh.targetName===r}):null);ih.targetName=r,o.scope&&(ih.scope=o.scope),ec&&ch&&ih.whenWithKeys(0,ch,nc),dh&&ih.whenWithKeys(0,dh,nc),ih.whenWithKeys(_??500,p?hh:s,nc).delay(ja||0),n.addAnimator(ih,r),c.push(ih)}}var Group$3=function(n){__extends(r,n);function r(a){var s=n.call(this)||this;return s.isGroup=!0,s._children=[],s.attr(a),s}return r.prototype.childrenRef=function(){return this._children},r.prototype.children=function(){return this._children.slice()},r.prototype.childAt=function(a){return this._children[a]},r.prototype.childOfName=function(a){for(var s=this._children,o=0;o<s.length;o++)if(s[o].name===a)return s[o]},r.prototype.childCount=function(){return this._children.length},r.prototype.add=function(a){return a&&a!==this&&a.parent!==this&&(this._children.push(a),this._doAdd(a)),this},r.prototype.addBefore=function(a,s){if(a&&a!==this&&a.parent!==this&&s&&s.parent===this){var o=this._children,u=o.indexOf(s);u>=0&&(o.splice(u,0,a),this._doAdd(a))}return this},r.prototype.replace=function(a,s){var o=indexOf(this._children,a);return o>=0&&this.replaceAt(s,o),this},r.prototype.replaceAt=function(a,s){var o=this._children,u=o[s];if(a&&a!==this&&a.parent!==this&&a!==u){o[s]=a,u.parent=null;var c=this.__zr;c&&u.removeSelfFromZr(c),this._doAdd(a)}return this},r.prototype._doAdd=function(a){a.parent&&a.parent.remove(a),a.parent=this;var s=this.__zr;s&&s!==a.__zr&&a.addSelfToZr(s),s&&s.refresh()},r.prototype.remove=function(a){var s=this.__zr,o=this._children,u=indexOf(o,a);return u<0?this:(o.splice(u,1),a.parent=null,s&&a.removeSelfFromZr(s),s&&s.refresh(),this)},r.prototype.removeAll=function(){for(var a=this._children,s=this.__zr,o=0;o<a.length;o++){var u=a[o];s&&u.removeSelfFromZr(s),u.parent=null}return a.length=0,this},r.prototype.eachChild=function(a,s){for(var o=this._children,u=0;u<o.length;u++){var c=o[u];a.call(s,c,u)}return this},r.prototype.traverse=function(a,s){for(var o=0;o<this._children.length;o++){var u=this._children[o],c=a.call(s,u);u.isGroup&&!c&&u.traverse(a,s)}return this},r.prototype.addSelfToZr=function(a){n.prototype.addSelfToZr.call(this,a);for(var s=0;s<this._children.length;s++){var o=this._children[s];o.addSelfToZr(a)}},r.prototype.removeSelfFromZr=function(a){n.prototype.removeSelfFromZr.call(this,a);for(var s=0;s<this._children.length;s++){var o=this._children[s];o.removeSelfFromZr(a)}},r.prototype.getBoundingRect=function(a){for(var s=new BoundingRect(0,0,0,0),o=a||this._children,u=[],c=null,p=0;p<o.length;p++){var d=o[p];if(!(d.ignore||d.invisible)){var _=d.getBoundingRect(),ja=d.getLocalTransform(u);ja?(BoundingRect.applyTransform(s,_,ja),c=c||s.clone(),c.union(s)):(c=c||_.clone(),c.union(_))}}return c||s},r}(Element$1);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(n){delete instances$1[n]}function isDarkMode(n){if(!n)return!1;if(typeof n=="string")return lum(n,1)<DARK_MODE_THRESHOLD;if(n.colorStops){for(var r=n.colorStops,a=0,s=r.length,o=0;o<s;o++)a+=lum(r[o].color,1);return a/=s,a<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function n(r,a,s){var o=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,s=s||{},this.dom=a,this.id=r;var u=new Storage,c=s.renderer||"canvas";painterCtors[c]||(c=keys(painterCtors)[0]),s.useDirtyRect=s.useDirtyRect==null?!1:s.useDirtyRect;var p=new painterCtors[c](a,u,s,r),d=s.ssr||p.ssrOnly;this.storage=u,this.painter=p;var _=!env.node&&!env.worker&&!d?new HandlerDomProxy(p.getViewportRoot(),p.root):null,ja=s.useCoarsePointer,Ja=ja==null||ja==="auto"?env.touchEventsSupported:!!ja,ec=44,tc;Ja&&(tc=retrieve2(s.pointerSize,ec)),this.handler=new Handler$1(u,p,_,p.root,tc),this.animation=new Animation({stage:{update:d?null:function(){return o._flush(!0)}}}),d||this.animation.start()}return n.prototype.add=function(r){this._disposed||!r||(this.storage.addRoot(r),r.addSelfToZr(this),this.refresh())},n.prototype.remove=function(r){this._disposed||!r||(this.storage.delRoot(r),r.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(r,a){this._disposed||(this.painter.configLayer&&this.painter.configLayer(r,a),this.refresh())},n.prototype.setBackgroundColor=function(r){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(r),this.refresh(),this._backgroundColor=r,this._darkMode=isDarkMode(r))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(r){this._darkMode=r},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(r){this._disposed||(r||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(r){var a,s=getTime();this._needsRefresh&&(a=!0,this.refreshImmediately(r)),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately());var o=getTime();a?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:o-s})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(r){this._sleepAfterStill=r},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(r){this._disposed||(r=r||{},this.painter.resize(r.width,r.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(r){this._disposed||this.handler.setCursorStyle(r)},n.prototype.findHover=function(r,a){if(!this._disposed)return this.handler.findHover(r,a)},n.prototype.on=function(r,a,s){return this._disposed||this.handler.on(r,a,s),this},n.prototype.off=function(r,a){this._disposed||this.handler.off(r,a)},n.prototype.trigger=function(r,a){this._disposed||this.handler.trigger(r,a)},n.prototype.clear=function(){if(!this._disposed){for(var r=this.storage.getRoots(),a=0;a<r.length;a++)r[a]instanceof Group$3&&r[a].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},n}();function init$2(n,r){var a=new ZRender(guid$1(),n,r);return instances$1[a.id]=a,a}function registerPainter(n,r){painterCtors[n]=r}var ssrDataGetter;function getElementSSRData(n){if(typeof ssrDataGetter=="function")return ssrDataGetter(n)}function registerSSRDataGetter(n){ssrDataGetter=n}var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(n){return n.replace(/^\s+|\s+$/g,"")}function linearMap$2(n,r,a,s){var o=r[0],u=r[1],c=a[0],p=a[1],d=u-o,_=p-c;if(d===0)return _===0?c:(c+p)/2;if(s)if(d>0){if(n<=o)return c;if(n>=u)return p}else{if(n>=o)return c;if(n<=u)return p}else{if(n===o)return c;if(n===u)return p}return(n-o)/d*_+c}function parsePercent(n,r){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return isString(n)?_trim(n).match(/%$/)?parseFloat(n)/100*r:parseFloat(n):n==null?NaN:+n}function round$3(n,r,a){return r==null&&(r=10),r=Math.min(Math.max(0,r),ROUND_SUPPORTED_PRECISION_MAX),n=(+n).toFixed(r),a?n:+n}function asc$2(n){return n.sort(function(r,a){return r-a}),n}function getPrecision(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var r=1,a=0;a<15;a++,r*=10)if(Math.round(n*r)/r===n)return a}return getPrecisionSafe(n)}function getPrecisionSafe(n){var r=n.toString().toLowerCase(),a=r.indexOf("e"),s=a>0?+r.slice(a+1):0,o=a>0?a:r.length,u=r.indexOf("."),c=u<0?0:o-1-u;return Math.max(0,c-s)}function getPixelPrecision(n,r){var a=Math.log,s=Math.LN10,o=Math.floor(a(n[1]-n[0])/s),u=Math.round(a(Math.abs(r[1]-r[0]))/s),c=Math.min(Math.max(-o+u,0),20);return isFinite(c)?c:20}function getPercentSeats(n,r){var a=reduce(n,function(tc,rc){return tc+(isNaN(rc)?0:rc)},0);if(a===0)return[];for(var s=Math.pow(10,r),o=map$1(n,function(tc){return(isNaN(tc)?0:tc)/a*s*100}),u=s*100,c=map$1(o,function(tc){return Math.floor(tc)}),p=reduce(c,function(tc,rc){return tc+rc},0),d=map$1(o,function(tc,rc){return tc-c[rc]});p<u;){for(var _=Number.NEGATIVE_INFINITY,ja=null,Ja=0,ec=d.length;Ja<ec;++Ja)d[Ja]>_&&(_=d[Ja],ja=Ja);++c[ja],d[ja]=0,++p}return map$1(c,function(tc){return tc/s})}function addSafe(n,r){var a=Math.max(getPrecision(n),getPrecision(r)),s=n+r;return a>ROUND_SUPPORTED_PRECISION_MAX?s:round$3(s,a)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(n){var r=Math.PI*2;return(n%r+r)%r}function isRadianAroundZero(n){return n>-RADIAN_EPSILON&&n<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(n){if(n instanceof Date)return n;if(isString(n)){var r=TIME_REG.exec(n);if(!r)return new Date(NaN);if(r[8]){var a=+r[4]||0;return r[8].toUpperCase()!=="Z"&&(a-=+r[8].slice(0,3)),new Date(Date.UTC(+r[1],+(r[2]||1)-1,+r[3]||1,a,+(r[5]||0),+r[6]||0,r[7]?+r[7].substring(0,3):0))}else return new Date(+r[1],+(r[2]||1)-1,+r[3]||1,+r[4]||0,+(r[5]||0),+r[6]||0,r[7]?+r[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function quantity(n){return Math.pow(10,quantityExponent(n))}function quantityExponent(n){if(n===0)return 0;var r=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,r)>=10&&r++,r}function nice(n,r){var a=quantityExponent(n),s=Math.pow(10,a),o=n/s,u;return o<1.5?u=1:o<2.5?u=2:o<4?u=3:o<7?u=5:u=10,n=u*s,a>=-20?+n.toFixed(a<0?-a:0):n}function quantile(n,r){var a=(n.length-1)*r+1,s=Math.floor(a),o=+n[s-1],u=a-s;return u?o+u*(n[s]-o):o}function reformIntervals(n){n.sort(function(d,_){return p(d,_,0)?-1:1});for(var r=-1/0,a=1,s=0;s<n.length;){for(var o=n[s].interval,u=n[s].close,c=0;c<2;c++)o[c]<=r&&(o[c]=r,u[c]=c?1:1-a),r=o[c],a=u[c];o[0]===o[1]&&u[0]*u[1]!==1?n.splice(s,1):s++}return n;function p(d,_,ja){return d.interval[ja]<_.interval[ja]||d.interval[ja]===_.interval[ja]&&(d.close[ja]-_.close[ja]===(ja?-1:1)||!ja&&p(d,_,1))}}function numericToNumber(n){var r=parseFloat(n);return r==n&&(r!==0||!isString(n)||n.indexOf("x")<=0)?r:NaN}function isNumeric(n){return!isNaN(numericToNumber(n))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(n,r){return r===0?n:getGreatestCommonDividor(r,n%r)}function getLeastCommonMultiple(n,r){return n==null?r:r==null?n:n*r/getGreatestCommonDividor(n,r)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(n,r,a){if(hasConsole){{if(storedLogs[r])return;storedLogs[r]=!0}console[n](ECHARTS_PREFIX+r)}}function warn(n,r){outputLog("warn",n)}function throwError(n){throw new Error(n)}function interpolateNumber(n,r,a){return(r-n)*a+n}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(n){return n instanceof Array?n:n==null?[]:[n]}function defaultEmphasis(n,r,a){if(n){n[r]=n[r]||{},n.emphasis=n.emphasis||{},n.emphasis[r]=n.emphasis[r]||{};for(var s=0,o=a.length;s<o;s++){var u=a[s];!n.emphasis[r].hasOwnProperty(u)&&n[r].hasOwnProperty(u)&&(n.emphasis[r][u]=n[r][u])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(n){return isObject$3(n)&&!isArray$1(n)&&!(n instanceof Date)?n.value:n}function isDataItemOption(n){return isObject$3(n)&&!(n instanceof Array)}function mappingToExists(n,r,a){var s=a==="normalMerge",o=a==="replaceMerge",u=a==="replaceAll";n=n||[],r=(r||[]).slice();var c=createHashMap();each$f(r,function(d,_){if(!isObject$3(d)){r[_]=null;return}});var p=prepareResult(n,c,a);return(s||o)&&mappingById(p,n,c,r),s&&mappingByName(p,r),s||o?mappingByIndex(p,r,o):u&&mappingInReplaceAllMode(p,r),makeIdAndName(p),p}function prepareResult(n,r,a){var s=[];if(a==="replaceAll")return s;for(var o=0;o<n.length;o++){var u=n[o];u&&u.id!=null&&r.set(u.id,o),s.push({existing:a==="replaceMerge"||isComponentIdInternal(u)?null:u,newOption:null,keyInfo:null,brandNew:null})}return s}function mappingById(n,r,a,s){each$f(s,function(o,u){if(!(!o||o.id==null)){var c=makeComparableKey(o.id),p=a.get(c);if(p!=null){var d=n[p];assert(!d.newOption,'Duplicated option on id "'+c+'".'),d.newOption=o,d.existing=r[p],s[u]=null}}})}function mappingByName(n,r){each$f(r,function(a,s){if(!(!a||a.name==null))for(var o=0;o<n.length;o++){var u=n[o].existing;if(!n[o].newOption&&u&&(u.id==null||a.id==null)&&!isComponentIdInternal(a)&&!isComponentIdInternal(u)&&keyExistAndEqual("name",u,a)){n[o].newOption=a,r[s]=null;return}}})}function mappingByIndex(n,r,a){each$f(r,function(s){if(s){for(var o,u=0;(o=n[u])&&(o.newOption||isComponentIdInternal(o.existing)||o.existing&&s.id!=null&&!keyExistAndEqual("id",s,o.existing));)u++;o?(o.newOption=s,o.brandNew=a):n.push({newOption:s,brandNew:a,existing:null,keyInfo:null}),u++}})}function mappingInReplaceAllMode(n,r){each$f(r,function(a){n.push({newOption:a,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(n){var r=createHashMap();each$f(n,function(a){var s=a.existing;s&&r.set(s.id,a)}),each$f(n,function(a){var s=a.newOption;assert(!s||s.id==null||!r.get(s.id)||r.get(s.id)===a,"id duplicates: "+(s&&s.id)),s&&s.id!=null&&r.set(s.id,a),!a.keyInfo&&(a.keyInfo={})}),each$f(n,function(a,s){var o=a.existing,u=a.newOption,c=a.keyInfo;if(isObject$3(u)){if(c.name=u.name!=null?makeComparableKey(u.name):o?o.name:DUMMY_COMPONENT_NAME_PREFIX+s,o)c.id=makeComparableKey(o.id);else if(u.id!=null)c.id=makeComparableKey(u.id);else{var p=0;do c.id="\0"+c.name+"\0"+p++;while(r.get(c.id))}r.set(c.id,a)}})}function keyExistAndEqual(n,r,a){var s=convertOptionIdName(r[n],null),o=convertOptionIdName(a[n],null);return s!=null&&o!=null&&s===o}function makeComparableKey(n){return convertOptionIdName(n,"")}function convertOptionIdName(n,r){return n==null?r:isString(n)?n:isNumber(n)||isStringSafe(n)?n+"":r}function isNameSpecified(n){var r=n.name;return!!(r&&r.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(n){return n&&n.id!=null&&makeComparableKey(n.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(n){return INTERNAL_COMPONENT_ID_PREFIX+n}function setComponentTypeToKeyInfo(n,r,a){each$f(n,function(s){var o=s.newOption;isObject$3(o)&&(s.keyInfo.mainType=r,s.keyInfo.subType=determineSubType(r,o,s.existing,a))})}function determineSubType(n,r,a,s){var o=r.type?r.type:a?a.subType:s.determineSubType(n,r);return o}function compressBatches(n,r){var a={},s={};return o(n||[],a),o(r||[],s,a),[u(a),u(s)];function o(c,p,d){for(var _=0,ja=c.length;_<ja;_++){var Ja=convertOptionIdName(c[_].seriesId,null);if(Ja==null)return;for(var ec=normalizeToArray(c[_].dataIndex),tc=d&&d[Ja],rc=0,nc=ec.length;rc<nc;rc++){var ic=ec[rc];tc&&tc[ic]?tc[ic]=null:(p[Ja]||(p[Ja]={}))[ic]=1}}}function u(c,p){var d=[];for(var _ in c)if(c.hasOwnProperty(_)&&c[_]!=null)if(p)d.push(+_);else{var ja=u(c[_],!0);ja.length&&d.push({seriesId:_,dataIndex:ja})}return d}}function queryDataIndex(n,r){if(r.dataIndexInside!=null)return r.dataIndexInside;if(r.dataIndex!=null)return isArray$1(r.dataIndex)?map$1(r.dataIndex,function(a){return n.indexOfRawIndex(a)}):n.indexOfRawIndex(r.dataIndex);if(r.name!=null)return isArray$1(r.name)?map$1(r.name,function(a){return n.indexOfName(a)}):n.indexOfName(r.name)}function makeInner(){var n="__ec_inner_"+innerUniqueIndex++;return function(r){return r[n]||(r[n]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(n,r,a){var s=preParseFinder(r,a),o=s.mainTypeSpecified,u=s.queryOptionMap,c=s.others,p=c,d=a?a.defaultMainType:null;return!o&&d&&u.set(d,{}),u.each(function(_,ja){var Ja=queryReferringComponents(n,ja,_,{useDefault:d===ja,enableAll:a&&a.enableAll!=null?a.enableAll:!0,enableNone:a&&a.enableNone!=null?a.enableNone:!0});p[ja+"Models"]=Ja.models,p[ja+"Model"]=Ja.models[0]}),p}function preParseFinder(n,r){var a;if(isString(n)){var s={};s[n+"Index"]=0,a=s}else a=n;var o=createHashMap(),u={},c=!1;return each$f(a,function(p,d){if(d==="dataIndex"||d==="dataIndexInside"){u[d]=p;return}var _=d.match(/^(\w+)(Index|Id|Name)$/)||[],ja=_[1],Ja=(_[2]||"").toLowerCase();if(!(!ja||!Ja||r&&r.includeMainTypes&&indexOf(r.includeMainTypes,ja)<0)){c=c||!!ja;var ec=o.get(ja)||o.set(ja,{});ec[Ja]=p}}),{mainTypeSpecified:c,queryOptionMap:o,others:u}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(n,r,a,s){s=s||SINGLE_REFERRING;var o=a.index,u=a.id,c=a.name,p={models:null,specified:o!=null||u!=null||c!=null};if(!p.specified){var d=void 0;return p.models=s.useDefault&&(d=n.getComponent(r))?[d]:[],p}return o==="none"||o===!1?(assert(s.enableNone,'`"none"` or `false` is not a valid value on index option.'),p.models=[],p):(o==="all"&&(assert(s.enableAll,'`"all"` is not a valid value on index option.'),o=u=c=null),p.models=n.queryComponents({mainType:r,index:o,id:u,name:c}),p)}function setAttribute(n,r,a){n.setAttribute?n.setAttribute(r,a):n[r]=a}function getAttribute(n,r){return n.getAttribute?n.getAttribute(r):n[r]}function getTooltipRenderMode(n){return n==="auto"?env.domSupported?"html":"richText":n||"html"}function groupData(n,r){var a=createHashMap(),s=[];return each$f(n,function(o){var u=r(o);(a.get(u)||(s.push(u),a.set(u,[]))).push(o)}),{keys:s,buckets:a}}function interpolateRawValues(n,r,a,s,o){var u=r==null||r==="auto";if(s==null)return s;if(isNumber(s)){var c=interpolateNumber(a||0,s,o);return round$3(c,u?Math.max(getPrecision(a||0),getPrecision(s)):r)}else{if(isString(s))return o<1?a:s;for(var p=[],d=a,_=s,ja=Math.max(d?d.length:0,_.length),Ja=0;Ja<ja;++Ja){var ec=n.getDimensionInfo(Ja);if(ec&&ec.type==="ordinal")p[Ja]=(o<1&&d?d:_)[Ja];else{var tc=d&&d[Ja]?d[Ja]:0,rc=_[Ja],c=interpolateNumber(tc,rc,o);p[Ja]=round$3(c,u?Math.max(getPrecision(tc),getPrecision(rc)):r)}}return p}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(n){var r={main:"",sub:""};if(n){var a=n.split(TYPE_DELIMITER);r.main=a[0]||"",r.sub=a[1]||""}return r}function checkClassType(n){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function isExtendedClass(n){return!!(n&&n[IS_EXTENDED_CLASS])}function enableClassExtend(n,r){n.$constructor=n,n.extend=function(a){var s=this,o;return isESClass(s)?o=function(u){__extends(c,u);function c(){return u.apply(this,arguments)||this}return c}(s):(o=function(){(a.$constructor||s).apply(this,arguments)},inherits(o,this)),extend$2(o.prototype,a),o[IS_EXTENDED_CLASS]=!0,o.extend=this.extend,o.superCall=superCall,o.superApply=superApply,o.superClass=s,o}}function isESClass(n){return isFunction(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function mountExtend(n,r){n.extend=r.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(n){var r=["__\0is_clz",classBase++].join("_");n.prototype[r]=!0,n.isInstance=function(a){return!!(a&&a[r])}}function superCall(n,r){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];return this.superClass.prototype[r].apply(n,a)}function superApply(n,r,a){return this.superClass.prototype[r].apply(n,a)}function enableClassManagement(n){var r={};n.registerClass=function(s){var o=s.type||s.prototype.type;if(o){checkClassType(o),s.prototype.type=o;var u=parseClassType(o);if(!u.sub)r[u.main]=s;else if(u.sub!==IS_CONTAINER){var c=a(u);c[u.sub]=s}}return s},n.getClass=function(s,o,u){var c=r[s];if(c&&c[IS_CONTAINER]&&(c=o?c[o]:null),u&&!c)throw new Error(o?"Component "+s+"."+(o||"")+" is used but not imported.":s+".type should be specified.");return c},n.getClassesByMainType=function(s){var o=parseClassType(s),u=[],c=r[o.main];return c&&c[IS_CONTAINER]?each$f(c,function(p,d){d!==IS_CONTAINER&&u.push(p)}):u.push(c),u},n.hasClass=function(s){var o=parseClassType(s);return!!r[o.main]},n.getAllClassMainTypes=function(){var s=[];return each$f(r,function(o,u){s.push(u)}),s},n.hasSubTypes=function(s){var o=parseClassType(s),u=r[o.main];return u&&u[IS_CONTAINER]};function a(s){var o=r[s.main];return(!o||!o[IS_CONTAINER])&&(o=r[s.main]={},o[IS_CONTAINER]=!0),o}}function makeStyleMapper(n,r){for(var a=0;a<n.length;a++)n[a][1]||(n[a][1]=n[a][0]);return r=r||!1,function(s,o,u){for(var c={},p=0;p<n.length;p++){var d=n[p][1];if(!(o&&indexOf(o,d)>=0||u&&indexOf(u,d)<0)){var _=s.getShallow(d,r);_!=null&&(c[n[p][0]]=_)}}return c}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function n(){}return n.prototype.getAreaStyle=function(r,a){return getAreaStyle(this,r,a)},n}(),globalImageCache=new LRU$1(50);function findExistImage(n){if(typeof n=="string"){var r=globalImageCache.get(n);return r&&r.image}else return n}function createOrUpdateImage(n,r,a,s,o){if(n)if(typeof n=="string"){if(r&&r.__zrImageSrc===n||!a)return r;var u=globalImageCache.get(n),c={hostEl:a,cb:s,cbPayload:o};return u?(r=u.image,!isImageReady(r)&&u.pending.push(c)):(r=platformApi.loadImage(n,imageOnLoad,imageOnLoad),r.__zrImageSrc=n,globalImageCache.put(n,r.__cachedImgObj={image:r,pending:[c]})),r}else return n;else return r}function imageOnLoad(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var r=0;r<n.pending.length;r++){var a=n.pending[r],s=a.cb;s&&s(this,a.cbPayload),a.hostEl.dirty()}n.pending.length=0}function isImageReady(n){return n&&n.width&&n.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(n,r,a,s,o){if(!r)return"";var u=(n+"").split(`
`);o=prepareTruncateOptions(r,a,s,o);for(var c=0,p=u.length;c<p;c++)u[c]=truncateSingleLine(u[c],o);return u.join(`
`)}function prepareTruncateOptions(n,r,a,s){s=s||{};var o=extend$2({},s);o.font=r,a=retrieve2(a,"..."),o.maxIterations=retrieve2(s.maxIterations,2);var u=o.minChar=retrieve2(s.minChar,0);o.cnCharWidth=getWidth("国",r);var c=o.ascCharWidth=getWidth("a",r);o.placeholder=retrieve2(s.placeholder,"");for(var p=n=Math.max(0,n-1),d=0;d<u&&p>=c;d++)p-=c;var _=getWidth(a,r);return _>p&&(a="",_=0),p=n-_,o.ellipsis=a,o.ellipsisWidth=_,o.contentWidth=p,o.containerWidth=n,o}function truncateSingleLine(n,r){var a=r.containerWidth,s=r.font,o=r.contentWidth;if(!a)return"";var u=getWidth(n,s);if(u<=a)return n;for(var c=0;;c++){if(u<=o||c>=r.maxIterations){n+=r.ellipsis;break}var p=c===0?estimateLength(n,o,r.ascCharWidth,r.cnCharWidth):u>0?Math.floor(n.length*o/u):0;n=n.substr(0,p),u=getWidth(n,s)}return n===""&&(n=r.placeholder),n}function estimateLength(n,r,a,s){for(var o=0,u=0,c=n.length;u<c&&o<r;u++){var p=n.charCodeAt(u);o+=0<=p&&p<=127?a:s}return u}function parsePlainText(n,r){n!=null&&(n+="");var a=r.overflow,s=r.padding,o=r.font,u=a==="truncate",c=getLineHeight(o),p=retrieve2(r.lineHeight,c),d=!!r.backgroundColor,_=r.lineOverflow==="truncate",ja=r.width,Ja;ja!=null&&(a==="break"||a==="breakAll")?Ja=n?wrapText(n,r.font,ja,a==="breakAll",0).lines:[]:Ja=n?n.split(`
`):[];var ec=Ja.length*p,tc=retrieve2(r.height,ec);if(ec>tc&&_){var rc=Math.floor(tc/p);Ja=Ja.slice(0,rc)}if(n&&u&&ja!=null)for(var nc=prepareTruncateOptions(ja,o,r.ellipsis,{minChar:r.truncateMinChar,placeholder:r.placeholder}),ic=0;ic<Ja.length;ic++)Ja[ic]=truncateSingleLine(Ja[ic],nc);for(var uc=tc,eh=0,ic=0;ic<Ja.length;ic++)eh=Math.max(getWidth(Ja[ic],o),eh);ja==null&&(ja=eh);var rh=eh;return s&&(uc+=s[0]+s[2],rh+=s[1]+s[3],ja+=s[1]+s[3]),d&&(rh=ja),{lines:Ja,height:tc,outerWidth:rh,outerHeight:uc,lineHeight:p,calculatedLineHeight:c,contentWidth:eh,contentHeight:ec,width:ja}}var RichTextToken=function(){function n(){}return n}(),RichTextLine=function(){function n(r){this.tokens=[],r&&(this.tokens=r)}return n}(),RichTextContentBlock=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return n}();function parseRichText(n,r){var a=new RichTextContentBlock;if(n!=null&&(n+=""),!n)return a;for(var s=r.width,o=r.height,u=r.overflow,c=(u==="break"||u==="breakAll")&&s!=null?{width:s,accumWidth:0,breakAll:u==="breakAll"}:null,p=STYLE_REG.lastIndex=0,d;(d=STYLE_REG.exec(n))!=null;){var _=d.index;_>p&&pushTokens(a,n.substring(p,_),r,c),pushTokens(a,d[2],r,c,d[1]),p=STYLE_REG.lastIndex}p<n.length&&pushTokens(a,n.substring(p,n.length),r,c);var ja=[],Ja=0,ec=0,tc=r.padding,rc=u==="truncate",nc=r.lineOverflow==="truncate";function ic(bh,Dh,Th){bh.width=Dh,bh.lineHeight=Th,Ja+=Th,ec=Math.max(ec,Dh)}e:for(var uc=0;uc<a.lines.length;uc++){for(var eh=a.lines[uc],rh=0,ah=0,ih=0;ih<eh.tokens.length;ih++){var oh=eh.tokens[ih],uh=oh.styleName&&r.rich[oh.styleName]||{},ch=oh.textPadding=uh.padding,hh=ch?ch[1]+ch[3]:0,dh=oh.font=uh.font||r.font;oh.contentHeight=getLineHeight(dh);var gh=retrieve2(uh.height,oh.contentHeight);if(oh.innerHeight=gh,ch&&(gh+=ch[0]+ch[2]),oh.height=gh,oh.lineHeight=retrieve3(uh.lineHeight,r.lineHeight,gh),oh.align=uh&&uh.align||r.align,oh.verticalAlign=uh&&uh.verticalAlign||"middle",nc&&o!=null&&Ja+oh.lineHeight>o){ih>0?(eh.tokens=eh.tokens.slice(0,ih),ic(eh,ah,rh),a.lines=a.lines.slice(0,uc+1)):a.lines=a.lines.slice(0,uc);break e}var fh=uh.width,vh=fh==null||fh==="auto";if(typeof fh=="string"&&fh.charAt(fh.length-1)==="%")oh.percentWidth=fh,ja.push(oh),oh.contentWidth=getWidth(oh.text,dh);else{if(vh){var ph=uh.backgroundColor,yh=ph&&ph.image;yh&&(yh=findExistImage(yh),isImageReady(yh)&&(oh.width=Math.max(oh.width,yh.width*gh/yh.height)))}var xh=rc&&s!=null?s-ah:null;xh!=null&&xh<oh.width?!vh||xh<hh?(oh.text="",oh.width=oh.contentWidth=0):(oh.text=truncateText(oh.text,xh-hh,dh,r.ellipsis,{minChar:r.truncateMinChar}),oh.width=oh.contentWidth=getWidth(oh.text,dh)):oh.contentWidth=getWidth(oh.text,dh)}oh.width+=hh,ah+=oh.width,uh&&(rh=Math.max(rh,oh.lineHeight))}ic(eh,ah,rh)}a.outerWidth=a.width=retrieve2(s,ec),a.outerHeight=a.height=retrieve2(o,Ja),a.contentHeight=Ja,a.contentWidth=ec,tc&&(a.outerWidth+=tc[1]+tc[3],a.outerHeight+=tc[0]+tc[2]);for(var uc=0;uc<ja.length;uc++){var oh=ja[uc],_h=oh.percentWidth;oh.width=parseInt(_h,10)/100*a.width}return a}function pushTokens(n,r,a,s,o){var u=r==="",c=o&&a.rich[o]||{},p=n.lines,d=c.font||a.font,_=!1,ja,Ja;if(s){var ec=c.padding,tc=ec?ec[1]+ec[3]:0;if(c.width!=null&&c.width!=="auto"){var rc=parsePercent$1(c.width,s.width)+tc;p.length>0&&rc+s.accumWidth>s.width&&(ja=r.split(`
`),_=!0),s.accumWidth=rc}else{var nc=wrapText(r,d,s.width,s.breakAll,s.accumWidth);s.accumWidth=nc.accumWidth+tc,Ja=nc.linesWidths,ja=nc.lines}}else ja=r.split(`
`);for(var ic=0;ic<ja.length;ic++){var uc=ja[ic],eh=new RichTextToken;if(eh.styleName=o,eh.text=uc,eh.isLineHolder=!uc&&!u,typeof c.width=="number"?eh.width=c.width:eh.width=Ja?Ja[ic]:getWidth(uc,d),!ic&&!_){var rh=(p[p.length-1]||(p[0]=new RichTextLine)).tokens,ah=rh.length;ah===1&&rh[0].isLineHolder?rh[0]=eh:(uc||!ah||u)&&rh.push(eh)}else p.push(new RichTextLine([eh]))}}function isAlphabeticLetter(n){var r=n.charCodeAt(0);return r>=32&&r<=591||r>=880&&r<=4351||r>=4608&&r<=5119||r>=7680&&r<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(n,r){return n[r]=!0,n},{});function isWordBreakChar(n){return isAlphabeticLetter(n)?!!breakCharMap[n]:!0}function wrapText(n,r,a,s,o){for(var u=[],c=[],p="",d="",_=0,ja=0,Ja=0;Ja<n.length;Ja++){var ec=n.charAt(Ja);if(ec===`
`){d&&(p+=d,ja+=_),u.push(p),c.push(ja),p="",d="",_=0,ja=0;continue}var tc=getWidth(ec,r),rc=s?!1:!isWordBreakChar(ec);if(u.length?ja+tc>a:o+ja+tc>a){ja?(p||d)&&(rc?(p||(p=d,d="",_=0,ja=_),u.push(p),c.push(ja-_),d+=ec,_+=tc,p="",ja=_):(d&&(p+=d,d="",_=0),u.push(p),c.push(ja),p=ec,ja=tc)):rc?(u.push(d),c.push(_),d=ec,_=tc):(u.push(ec),c.push(tc));continue}ja+=tc,rc?(d+=ec,_+=tc):(d&&(p+=d,d="",_=0),p+=ec)}return!u.length&&!p&&(p=n,d="",_=0),d&&(p+=d),p&&(u.push(p),c.push(ja)),u.length===1&&(ja+=o),{accumWidth:ja,lines:u,linesWidths:c}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype._init=function(a){for(var s=keys(a),o=0;o<s.length;o++){var u=s[o];u==="style"?this.useStyle(a[u]):n.prototype.attrKV.call(this,u,a[u])}this.style||this.useStyle({})},r.prototype.beforeBrush=function(){},r.prototype.afterBrush=function(){},r.prototype.innerBeforeBrush=function(){},r.prototype.innerAfterBrush=function(){},r.prototype.shouldBePainted=function(a,s,o,u){var c=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,a,s)||c&&!c[0]&&!c[3])return!1;if(o&&this.__clipPaths){for(var p=0;p<this.__clipPaths.length;++p)if(this.__clipPaths[p].isZeroArea())return!1}if(u&&this.parent)for(var d=this.parent;d;){if(d.ignore)return!1;d=d.parent}return!0},r.prototype.contain=function(a,s){return this.rectContain(a,s)},r.prototype.traverse=function(a,s){a.call(s,this)},r.prototype.rectContain=function(a,s){var o=this.transformCoordToLocal(a,s),u=this.getBoundingRect();return u.contain(o[0],o[1])},r.prototype.getPaintRect=function(){var a=this._paintRect;if(!this._paintRect||this.__dirty){var s=this.transform,o=this.getBoundingRect(),u=this.style,c=u.shadowBlur||0,p=u.shadowOffsetX||0,d=u.shadowOffsetY||0;a=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),s?BoundingRect.applyTransform(a,o,s):a.copy(o),(c||p||d)&&(a.width+=c*2+Math.abs(p),a.height+=c*2+Math.abs(d),a.x=Math.min(a.x,a.x+p-c),a.y=Math.min(a.y,a.y+d-c));var _=this.dirtyRectTolerance;a.isZero()||(a.x=Math.floor(a.x-_),a.y=Math.floor(a.y-_),a.width=Math.ceil(a.width+1+_*2),a.height=Math.ceil(a.height+1+_*2))}return a},r.prototype.setPrevPaintRect=function(a){a?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(a)):this._prevPaintRect=null},r.prototype.getPrevPaintRect=function(){return this._prevPaintRect},r.prototype.animateStyle=function(a){return this.animate("style",a)},r.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():this.markRedraw()},r.prototype.attrKV=function(a,s){a!=="style"?n.prototype.attrKV.call(this,a,s):this.style?this.setStyle(s):this.useStyle(s)},r.prototype.setStyle=function(a,s){return typeof a=="string"?this.style[a]=s:extend$2(this.style,a),this.dirtyStyle(),this},r.prototype.dirtyStyle=function(a){a||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},r.prototype.dirty=function(){this.dirtyStyle()},r.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},r.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},r.prototype.createStyle=function(a){return createObject(DEFAULT_COMMON_STYLE,a)},r.prototype.useStyle=function(a){a[STYLE_MAGIC_KEY]||(a=this.createStyle(a)),this.__inHover?this.__hoverStyle=a:this.style=a,this.dirtyStyle()},r.prototype.isStyleObject=function(a){return a[STYLE_MAGIC_KEY]},r.prototype._innerSaveToNormal=function(a){n.prototype._innerSaveToNormal.call(this,a);var s=this._normalState;a.style&&!s.style&&(s.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(a,s,PRIMARY_STATES_KEYS)},r.prototype._applyStateObj=function(a,s,o,u,c,p){n.prototype._applyStateObj.call(this,a,s,o,u,c,p);var d=!(s&&u),_;if(s&&s.style?c?u?_=s.style:(_=this._mergeStyle(this.createStyle(),o.style),this._mergeStyle(_,s.style)):(_=this._mergeStyle(this.createStyle(),u?this.style:o.style),this._mergeStyle(_,s.style)):d&&(_=o.style),_)if(c){var ja=this.style;if(this.style=this.createStyle(d?{}:ja),d)for(var Ja=keys(ja),ec=0;ec<Ja.length;ec++){var tc=Ja[ec];tc in _&&(_[tc]=_[tc],this.style[tc]=ja[tc])}for(var rc=keys(_),ec=0;ec<rc.length;ec++){var tc=rc[ec];this.style[tc]=this.style[tc]}this._transitionState(a,{style:_},p,this.getAnimationStyleProps())}else this.useStyle(_);for(var nc=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,ec=0;ec<nc.length;ec++){var tc=nc[ec];s&&s[tc]!=null?this[tc]=s[tc]:d&&o[tc]!=null&&(this[tc]=o[tc])}},r.prototype._mergeStates=function(a){for(var s=n.prototype._mergeStates.call(this,a),o,u=0;u<a.length;u++){var c=a[u];c.style&&(o=o||{},this._mergeStyle(o,c.style))}return o&&(s.style=o),s},r.prototype._mergeStyle=function(a,s){return extend$2(a,s),a},r.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},r.initDefaultProps=function(){var a=r.prototype;a.type="displayable",a.invisible=!1,a.z=0,a.z2=0,a.zlevel=0,a.culling=!1,a.cursor="pointer",a.rectHover=!1,a.incremental=!1,a._rect=null,a.dirtyRectTolerance=0,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),r}(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(n,r,a){return tmpRect.copy(n.getBoundingRect()),n.transform&&tmpRect.applyTransform(n.transform),viewRect.width=r,viewRect.height=a,!tmpRect.intersect(viewRect)}const Displayable$1=Displayable;var mathMin$a=Math.min,mathMax$a=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$3(),end=create$3(),extremity=create$3();function fromPoints(n,r,a){if(n.length!==0){for(var s=n[0],o=s[0],u=s[0],c=s[1],p=s[1],d=1;d<n.length;d++)s=n[d],o=mathMin$a(o,s[0]),u=mathMax$a(u,s[0]),c=mathMin$a(c,s[1]),p=mathMax$a(p,s[1]);r[0]=o,r[1]=c,a[0]=u,a[1]=p}}function fromLine(n,r,a,s,o,u){o[0]=mathMin$a(n,a),o[1]=mathMin$a(r,s),u[0]=mathMax$a(n,a),u[1]=mathMax$a(r,s)}var xDim=[],yDim=[];function fromCubic(n,r,a,s,o,u,c,p,d,_){var ja=cubicExtrema,Ja=cubicAt,ec=ja(n,a,o,c,xDim);d[0]=1/0,d[1]=1/0,_[0]=-1/0,_[1]=-1/0;for(var tc=0;tc<ec;tc++){var rc=Ja(n,a,o,c,xDim[tc]);d[0]=mathMin$a(rc,d[0]),_[0]=mathMax$a(rc,_[0])}ec=ja(r,s,u,p,yDim);for(var tc=0;tc<ec;tc++){var nc=Ja(r,s,u,p,yDim[tc]);d[1]=mathMin$a(nc,d[1]),_[1]=mathMax$a(nc,_[1])}d[0]=mathMin$a(n,d[0]),_[0]=mathMax$a(n,_[0]),d[0]=mathMin$a(c,d[0]),_[0]=mathMax$a(c,_[0]),d[1]=mathMin$a(r,d[1]),_[1]=mathMax$a(r,_[1]),d[1]=mathMin$a(p,d[1]),_[1]=mathMax$a(p,_[1])}function fromQuadratic(n,r,a,s,o,u,c,p){var d=quadraticExtremum,_=quadraticAt$1,ja=mathMax$a(mathMin$a(d(n,a,o),1),0),Ja=mathMax$a(mathMin$a(d(r,s,u),1),0),ec=_(n,a,o,ja),tc=_(r,s,u,Ja);c[0]=mathMin$a(n,o,ec),c[1]=mathMin$a(r,u,tc),p[0]=mathMax$a(n,o,ec),p[1]=mathMax$a(r,u,tc)}function fromArc(n,r,a,s,o,u,c,p,d){var _=min$1,ja=max$1,Ja=Math.abs(o-u);if(Ja%PI2$8<1e-4&&Ja>1e-4){p[0]=n-a,p[1]=r-s,d[0]=n+a,d[1]=r+s;return}if(start[0]=mathCos$4(o)*a+n,start[1]=mathSin$4(o)*s+r,end[0]=mathCos$4(u)*a+n,end[1]=mathSin$4(u)*s+r,_(p,start,end),ja(d,start,end),o=o%PI2$8,o<0&&(o=o+PI2$8),u=u%PI2$8,u<0&&(u=u+PI2$8),o>u&&!c?u+=PI2$8:o<u&&c&&(o+=PI2$8),c){var ec=u;u=o,o=ec}for(var tc=0;tc<u;tc+=Math.PI/2)tc>o&&(extremity[0]=mathCos$4(tc)*a+n,extremity[1]=mathSin$4(tc)*s+r,_(p,extremity,p),ja(d,extremity,d))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$9=Math.min,mathMax$9=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$a=Math.PI,PI2$7=PI$a*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(n){var r=Math.round(n/PI$a*1e8)/1e8;return r%2*PI$a}function normalizeArcAngles(n,r){var a=modPI2(n[0]);a<0&&(a+=PI2$7);var s=a-n[0],o=n[1];o+=s,!r&&o-a>=PI2$7?o=a+PI2$7:r&&a-o>=PI2$7?o=a-PI2$7:!r&&a>o?o=a+(PI2$7-modPI2(a-o)):r&&a<o&&(o=a-(PI2$7-modPI2(o-a))),n[0]=a,n[1]=o}var PathProxy=function(){function n(r){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,r&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(r,a,s){s=s||0,s>0&&(this._ux=mathAbs$2(s/devicePixelRatio/r)||0,this._uy=mathAbs$2(s/devicePixelRatio/a)||0)},n.prototype.setDPR=function(r){this.dpr=r},n.prototype.setContext=function(r){this._ctx=r},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(r,a){return this._drawPendingPt(),this.addData(CMD$4.M,r,a),this._ctx&&this._ctx.moveTo(r,a),this._x0=r,this._y0=a,this._xi=r,this._yi=a,this},n.prototype.lineTo=function(r,a){var s=mathAbs$2(r-this._xi),o=mathAbs$2(a-this._yi),u=s>this._ux||o>this._uy;if(this.addData(CMD$4.L,r,a),this._ctx&&u&&this._ctx.lineTo(r,a),u)this._xi=r,this._yi=a,this._pendingPtDist=0;else{var c=s*s+o*o;c>this._pendingPtDist&&(this._pendingPtX=r,this._pendingPtY=a,this._pendingPtDist=c)}return this},n.prototype.bezierCurveTo=function(r,a,s,o,u,c){return this._drawPendingPt(),this.addData(CMD$4.C,r,a,s,o,u,c),this._ctx&&this._ctx.bezierCurveTo(r,a,s,o,u,c),this._xi=u,this._yi=c,this},n.prototype.quadraticCurveTo=function(r,a,s,o){return this._drawPendingPt(),this.addData(CMD$4.Q,r,a,s,o),this._ctx&&this._ctx.quadraticCurveTo(r,a,s,o),this._xi=s,this._yi=o,this},n.prototype.arc=function(r,a,s,o,u,c){this._drawPendingPt(),tmpAngles[0]=o,tmpAngles[1]=u,normalizeArcAngles(tmpAngles,c),o=tmpAngles[0],u=tmpAngles[1];var p=u-o;return this.addData(CMD$4.A,r,a,s,s,o,p,0,c?0:1),this._ctx&&this._ctx.arc(r,a,s,o,u,c),this._xi=mathCos$3(u)*s+r,this._yi=mathSin$3(u)*s+a,this},n.prototype.arcTo=function(r,a,s,o,u){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(r,a,s,o,u),this},n.prototype.rect=function(r,a,s,o){return this._drawPendingPt(),this._ctx&&this._ctx.rect(r,a,s,o),this.addData(CMD$4.R,r,a,s,o),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var r=this._ctx,a=this._x0,s=this._y0;return r&&r.closePath(),this._xi=a,this._yi=s,this},n.prototype.fill=function(r){r&&r.fill(),this.toStatic()},n.prototype.stroke=function(r){r&&r.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(r){var a=r.length;!(this.data&&this.data.length===a)&&hasTypedArray&&(this.data=new Float32Array(a));for(var s=0;s<a;s++)this.data[s]=r[s];this._len=a},n.prototype.appendPath=function(r){r instanceof Array||(r=[r]);for(var a=r.length,s=0,o=this._len,u=0;u<a;u++)s+=r[u].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(o+s));for(var u=0;u<a;u++)for(var c=r[u].data,p=0;p<c.length;p++)this.data[o++]=c[p];this._len=o},n.prototype.addData=function(r,a,s,o,u,c,p,d,_){if(this._saveData){var ja=this.data;this._len+arguments.length>ja.length&&(this._expandData(),ja=this.data);for(var Ja=0;Ja<arguments.length;Ja++)ja[this._len++]=arguments[Ja]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var r=[],a=0;a<this._len;a++)r[a]=this.data[a];this.data=r}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var r=this.data;r instanceof Array&&(r.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(r)))}},n.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var r=this.data,a=0,s=0,o=0,u=0,c;for(c=0;c<this._len;){var p=r[c++],d=c===1;switch(d&&(a=r[c],s=r[c+1],o=a,u=s),p){case CMD$4.M:a=o=r[c++],s=u=r[c++],min2[0]=o,min2[1]=u,max2[0]=o,max2[1]=u;break;case CMD$4.L:fromLine(a,s,r[c],r[c+1],min2,max2),a=r[c++],s=r[c++];break;case CMD$4.C:fromCubic(a,s,r[c++],r[c++],r[c++],r[c++],r[c],r[c+1],min2,max2),a=r[c++],s=r[c++];break;case CMD$4.Q:fromQuadratic(a,s,r[c++],r[c++],r[c],r[c+1],min2,max2),a=r[c++],s=r[c++];break;case CMD$4.A:var _=r[c++],ja=r[c++],Ja=r[c++],ec=r[c++],tc=r[c++],rc=r[c++]+tc;c+=1;var nc=!r[c++];d&&(o=mathCos$3(tc)*Ja+_,u=mathSin$3(tc)*ec+ja),fromArc(_,ja,Ja,ec,tc,rc,nc,min2,max2),a=mathCos$3(rc)*Ja+_,s=mathSin$3(rc)*ec+ja;break;case CMD$4.R:o=a=r[c++],u=s=r[c++];var ic=r[c++],uc=r[c++];fromLine(o,u,o+ic,u+uc,min2,max2);break;case CMD$4.Z:a=o,s=u;break}min$1(min,min,min2),max$1(max,max,max2)}return c===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},n.prototype._calculateLength=function(){var r=this.data,a=this._len,s=this._ux,o=this._uy,u=0,c=0,p=0,d=0;this._pathSegLen||(this._pathSegLen=[]);for(var _=this._pathSegLen,ja=0,Ja=0,ec=0;ec<a;){var tc=r[ec++],rc=ec===1;rc&&(u=r[ec],c=r[ec+1],p=u,d=c);var nc=-1;switch(tc){case CMD$4.M:u=p=r[ec++],c=d=r[ec++];break;case CMD$4.L:{var ic=r[ec++],uc=r[ec++],eh=ic-u,rh=uc-c;(mathAbs$2(eh)>s||mathAbs$2(rh)>o||ec===a-1)&&(nc=Math.sqrt(eh*eh+rh*rh),u=ic,c=uc);break}case CMD$4.C:{var ah=r[ec++],ih=r[ec++],ic=r[ec++],uc=r[ec++],oh=r[ec++],uh=r[ec++];nc=cubicLength(u,c,ah,ih,ic,uc,oh,uh,10),u=oh,c=uh;break}case CMD$4.Q:{var ah=r[ec++],ih=r[ec++],ic=r[ec++],uc=r[ec++];nc=quadraticLength(u,c,ah,ih,ic,uc,10),u=ic,c=uc;break}case CMD$4.A:var ch=r[ec++],hh=r[ec++],dh=r[ec++],gh=r[ec++],fh=r[ec++],vh=r[ec++],ph=vh+fh;ec+=1,rc&&(p=mathCos$3(fh)*dh+ch,d=mathSin$3(fh)*gh+hh),nc=mathMax$9(dh,gh)*mathMin$9(PI2$7,Math.abs(vh)),u=mathCos$3(ph)*dh+ch,c=mathSin$3(ph)*gh+hh;break;case CMD$4.R:{p=u=r[ec++],d=c=r[ec++];var yh=r[ec++],xh=r[ec++];nc=yh*2+xh*2;break}case CMD$4.Z:{var eh=p-u,rh=d-c;nc=Math.sqrt(eh*eh+rh*rh),u=p,c=d;break}}nc>=0&&(_[Ja++]=nc,ja+=nc)}return this._pathLen=ja,ja},n.prototype.rebuildPath=function(r,a){var s=this.data,o=this._ux,u=this._uy,c=this._len,p,d,_,ja,Ja,ec,tc=a<1,rc,nc,ic=0,uc=0,eh,rh=0,ah,ih;if(!(tc&&(this._pathSegLen||this._calculateLength(),rc=this._pathSegLen,nc=this._pathLen,eh=a*nc,!eh)))e:for(var oh=0;oh<c;){var uh=s[oh++],ch=oh===1;switch(ch&&(_=s[oh],ja=s[oh+1],p=_,d=ja),uh!==CMD$4.L&&rh>0&&(r.lineTo(ah,ih),rh=0),uh){case CMD$4.M:p=_=s[oh++],d=ja=s[oh++],r.moveTo(_,ja);break;case CMD$4.L:{Ja=s[oh++],ec=s[oh++];var hh=mathAbs$2(Ja-_),dh=mathAbs$2(ec-ja);if(hh>o||dh>u){if(tc){var gh=rc[uc++];if(ic+gh>eh){var fh=(eh-ic)/gh;r.lineTo(_*(1-fh)+Ja*fh,ja*(1-fh)+ec*fh);break e}ic+=gh}r.lineTo(Ja,ec),_=Ja,ja=ec,rh=0}else{var vh=hh*hh+dh*dh;vh>rh&&(ah=Ja,ih=ec,rh=vh)}break}case CMD$4.C:{var ph=s[oh++],yh=s[oh++],xh=s[oh++],_h=s[oh++],bh=s[oh++],Dh=s[oh++];if(tc){var gh=rc[uc++];if(ic+gh>eh){var fh=(eh-ic)/gh;cubicSubdivide(_,ph,xh,bh,fh,tmpOutX),cubicSubdivide(ja,yh,_h,Dh,fh,tmpOutY),r.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}ic+=gh}r.bezierCurveTo(ph,yh,xh,_h,bh,Dh),_=bh,ja=Dh;break}case CMD$4.Q:{var ph=s[oh++],yh=s[oh++],xh=s[oh++],_h=s[oh++];if(tc){var gh=rc[uc++];if(ic+gh>eh){var fh=(eh-ic)/gh;quadraticSubdivide(_,ph,xh,fh,tmpOutX),quadraticSubdivide(ja,yh,_h,fh,tmpOutY),r.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}ic+=gh}r.quadraticCurveTo(ph,yh,xh,_h),_=xh,ja=_h;break}case CMD$4.A:var Th=s[oh++],Ch=s[oh++],wh=s[oh++],Nh=s[oh++],Rh=s[oh++],kh=s[oh++],Lh=s[oh++],Fh=!s[oh++],Wh=wh>Nh?wh:Nh,Qh=mathAbs$2(wh-Nh)>.001,jh=Rh+kh,Hh=!1;if(tc){var gh=rc[uc++];ic+gh>eh&&(jh=Rh+kh*(eh-ic)/gh,Hh=!0),ic+=gh}if(Qh&&r.ellipse?r.ellipse(Th,Ch,wh,Nh,Lh,Rh,jh,Fh):r.arc(Th,Ch,Wh,Rh,jh,Fh),Hh)break e;ch&&(p=mathCos$3(Rh)*wh+Th,d=mathSin$3(Rh)*Nh+Ch),_=mathCos$3(jh)*wh+Th,ja=mathSin$3(jh)*Nh+Ch;break;case CMD$4.R:p=_=s[oh],d=ja=s[oh+1],Ja=s[oh++],ec=s[oh++];var qh=s[oh++],nd=s[oh++];if(tc){var gh=rc[uc++];if(ic+gh>eh){var Sh=eh-ic;r.moveTo(Ja,ec),r.lineTo(Ja+mathMin$9(Sh,qh),ec),Sh-=qh,Sh>0&&r.lineTo(Ja+qh,ec+mathMin$9(Sh,nd)),Sh-=nd,Sh>0&&r.lineTo(Ja+mathMax$9(qh-Sh,0),ec+nd),Sh-=qh,Sh>0&&r.lineTo(Ja,ec+mathMax$9(nd-Sh,0));break e}ic+=gh}r.rect(Ja,ec,qh,nd);break;case CMD$4.Z:if(tc){var gh=rc[uc++];if(ic+gh>eh){var fh=(eh-ic)/gh;r.lineTo(_*(1-fh)+p*fh,ja*(1-fh)+d*fh);break e}ic+=gh}r.closePath(),_=p,ja=d}}},n.prototype.clone=function(){var r=new n,a=this.data;return r.data=a.slice?a.slice():Array.prototype.slice.call(a),r._len=this._len,r},n.CMD=CMD$4,n.initDefaultProps=function(){var r=n.prototype;r._saveData=!0,r._ux=0,r._uy=0,r._pendingPtDist=0,r._version=0}(),n}();function containStroke$4(n,r,a,s,o,u,c){if(o===0)return!1;var p=o,d=0,_=n;if(c>r+p&&c>s+p||c<r-p&&c<s-p||u>n+p&&u>a+p||u<n-p&&u<a-p)return!1;if(n!==a)d=(r-s)/(n-a),_=(n*s-a*r)/(n-a);else return Math.abs(u-n)<=p/2;var ja=d*u-c+_,Ja=ja*ja/(d*d+1);return Ja<=p/2*p/2}function containStroke$3(n,r,a,s,o,u,c,p,d,_,ja){if(d===0)return!1;var Ja=d;if(ja>r+Ja&&ja>s+Ja&&ja>u+Ja&&ja>p+Ja||ja<r-Ja&&ja<s-Ja&&ja<u-Ja&&ja<p-Ja||_>n+Ja&&_>a+Ja&&_>o+Ja&&_>c+Ja||_<n-Ja&&_<a-Ja&&_<o-Ja&&_<c-Ja)return!1;var ec=cubicProjectPoint(n,r,a,s,o,u,c,p,_,ja,null);return ec<=Ja/2}function containStroke$2(n,r,a,s,o,u,c,p,d){if(c===0)return!1;var _=c;if(d>r+_&&d>s+_&&d>u+_||d<r-_&&d<s-_&&d<u-_||p>n+_&&p>a+_&&p>o+_||p<n-_&&p<a-_&&p<o-_)return!1;var ja=quadraticProjectPoint(n,r,a,s,o,u,p,d,null);return ja<=_/2}var PI2$6=Math.PI*2;function normalizeRadian(n){return n%=PI2$6,n<0&&(n+=PI2$6),n}var PI2$5=Math.PI*2;function containStroke$1(n,r,a,s,o,u,c,p,d){if(c===0)return!1;var _=c;p-=n,d-=r;var ja=Math.sqrt(p*p+d*d);if(ja-_>a||ja+_<a)return!1;if(Math.abs(s-o)%PI2$5<1e-4)return!0;if(u){var Ja=s;s=normalizeRadian(o),o=normalizeRadian(Ja)}else s=normalizeRadian(s),o=normalizeRadian(o);s>o&&(o+=PI2$5);var ec=Math.atan2(d,p);return ec<0&&(ec+=PI2$5),ec>=s&&ec<=o||ec+PI2$5>=s&&ec+PI2$5<=o}function windingLine(n,r,a,s,o,u){if(u>r&&u>s||u<r&&u<s||s===r)return 0;var c=(u-r)/(s-r),p=s<r?1:-1;(c===1||c===0)&&(p=s<r?.5:-.5);var d=c*(a-n)+n;return d===o?1/0:d>o?p:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$2=1e-4;function isAroundEqual$1(n,r){return Math.abs(n-r)<EPSILON$2}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var n=extrema[0];extrema[0]=extrema[1],extrema[1]=n}function windingCubic(n,r,a,s,o,u,c,p,d,_){if(_>r&&_>s&&_>u&&_>p||_<r&&_<s&&_<u&&_<p)return 0;var ja=cubicRootAt(r,s,u,p,_,roots);if(ja===0)return 0;for(var Ja=0,ec=-1,tc=void 0,rc=void 0,nc=0;nc<ja;nc++){var ic=roots[nc],uc=ic===0||ic===1?.5:1,eh=cubicAt(n,a,o,c,ic);eh<d||(ec<0&&(ec=cubicExtrema(r,s,u,p,extrema),extrema[1]<extrema[0]&&ec>1&&swapExtrema(),tc=cubicAt(r,s,u,p,extrema[0]),ec>1&&(rc=cubicAt(r,s,u,p,extrema[1]))),ec===2?ic<extrema[0]?Ja+=tc<r?uc:-uc:ic<extrema[1]?Ja+=rc<tc?uc:-uc:Ja+=p<rc?uc:-uc:ic<extrema[0]?Ja+=tc<r?uc:-uc:Ja+=p<tc?uc:-uc)}return Ja}function windingQuadratic(n,r,a,s,o,u,c,p){if(p>r&&p>s&&p>u||p<r&&p<s&&p<u)return 0;var d=quadraticRootAt(r,s,u,p,roots);if(d===0)return 0;var _=quadraticExtremum(r,s,u);if(_>=0&&_<=1){for(var ja=0,Ja=quadraticAt$1(r,s,u,_),ec=0;ec<d;ec++){var tc=roots[ec]===0||roots[ec]===1?.5:1,rc=quadraticAt$1(n,a,o,roots[ec]);rc<c||(roots[ec]<_?ja+=Ja<r?tc:-tc:ja+=u<Ja?tc:-tc)}return ja}else{var tc=roots[0]===0||roots[0]===1?.5:1,rc=quadraticAt$1(n,a,o,roots[0]);return rc<c?0:u<r?tc:-tc}}function windingArc(n,r,a,s,o,u,c,p){if(p-=r,p>a||p<-a)return 0;var d=Math.sqrt(a*a-p*p);roots[0]=-d,roots[1]=d;var _=Math.abs(s-o);if(_<1e-4)return 0;if(_>=PI2$4-1e-4){s=0,o=PI2$4;var ja=u?1:-1;return c>=roots[0]+n&&c<=roots[1]+n?ja:0}if(s>o){var Ja=s;s=o,o=Ja}s<0&&(s+=PI2$4,o+=PI2$4);for(var ec=0,tc=0;tc<2;tc++){var rc=roots[tc];if(rc+n>c){var nc=Math.atan2(p,rc),ja=u?1:-1;nc<0&&(nc=PI2$4+nc),(nc>=s&&nc<=o||nc+PI2$4>=s&&nc+PI2$4<=o)&&(nc>Math.PI/2&&nc<Math.PI*1.5&&(ja=-ja),ec+=ja)}}return ec}function containPath(n,r,a,s,o){for(var u=n.data,c=n.len(),p=0,d=0,_=0,ja=0,Ja=0,ec,tc,rc=0;rc<c;){var nc=u[rc++],ic=rc===1;switch(nc===CMD$3.M&&rc>1&&(a||(p+=windingLine(d,_,ja,Ja,s,o))),ic&&(d=u[rc],_=u[rc+1],ja=d,Ja=_),nc){case CMD$3.M:ja=u[rc++],Ja=u[rc++],d=ja,_=Ja;break;case CMD$3.L:if(a){if(containStroke$4(d,_,u[rc],u[rc+1],r,s,o))return!0}else p+=windingLine(d,_,u[rc],u[rc+1],s,o)||0;d=u[rc++],_=u[rc++];break;case CMD$3.C:if(a){if(containStroke$3(d,_,u[rc++],u[rc++],u[rc++],u[rc++],u[rc],u[rc+1],r,s,o))return!0}else p+=windingCubic(d,_,u[rc++],u[rc++],u[rc++],u[rc++],u[rc],u[rc+1],s,o)||0;d=u[rc++],_=u[rc++];break;case CMD$3.Q:if(a){if(containStroke$2(d,_,u[rc++],u[rc++],u[rc],u[rc+1],r,s,o))return!0}else p+=windingQuadratic(d,_,u[rc++],u[rc++],u[rc],u[rc+1],s,o)||0;d=u[rc++],_=u[rc++];break;case CMD$3.A:var uc=u[rc++],eh=u[rc++],rh=u[rc++],ah=u[rc++],ih=u[rc++],oh=u[rc++];rc+=1;var uh=!!(1-u[rc++]);ec=Math.cos(ih)*rh+uc,tc=Math.sin(ih)*ah+eh,ic?(ja=ec,Ja=tc):p+=windingLine(d,_,ec,tc,s,o);var ch=(s-uc)*ah/rh+uc;if(a){if(containStroke$1(uc,eh,ah,ih,ih+oh,uh,r,ch,o))return!0}else p+=windingArc(uc,eh,ah,ih,ih+oh,uh,ch,o);d=Math.cos(ih+oh)*rh+uc,_=Math.sin(ih+oh)*ah+eh;break;case CMD$3.R:ja=d=u[rc++],Ja=_=u[rc++];var hh=u[rc++],dh=u[rc++];if(ec=ja+hh,tc=Ja+dh,a){if(containStroke$4(ja,Ja,ec,Ja,r,s,o)||containStroke$4(ec,Ja,ec,tc,r,s,o)||containStroke$4(ec,tc,ja,tc,r,s,o)||containStroke$4(ja,tc,ja,Ja,r,s,o))return!0}else p+=windingLine(ec,Ja,ec,tc,s,o),p+=windingLine(ja,tc,ja,Ja,s,o);break;case CMD$3.Z:if(a){if(containStroke$4(d,_,ja,Ja,r,s,o))return!0}else p+=windingLine(d,_,ja,Ja,s,o);d=ja,_=Ja;break}}return!a&&!isAroundEqual$1(_,Ja)&&(p+=windingLine(d,_,ja,Ja,s,o)||0),p!==0}function contain$2(n,r,a){return containPath(n,0,!1,r,a)}function containStroke(n,r,a,s){return containPath(n,r,!0,a,s)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.update=function(){var a=this;n.prototype.update.call(this);var s=this.style;if(s.decal){var o=this._decalEl=this._decalEl||new r;o.buildPath===r.prototype.buildPath&&(o.buildPath=function(d){a.buildPath(d,a.shape)}),o.silent=!0;var u=o.style;for(var c in s)u[c]!==s[c]&&(u[c]=s[c]);u.fill=s.fill?s.decal:null,u.decal=null,u.shadowColor=null,s.strokeFirst&&(u.stroke=null);for(var p=0;p<pathCopyParams.length;++p)o[pathCopyParams[p]]=this[pathCopyParams[p]];o.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},r.prototype.getDecalElement=function(){return this._decalEl},r.prototype._init=function(a){var s=keys(a);this.shape=this.getDefaultShape();var o=this.getDefaultStyle();o&&this.useStyle(o);for(var u=0;u<s.length;u++){var c=s[u],p=a[c];c==="style"?this.style?extend$2(this.style,p):this.useStyle(p):c==="shape"?extend$2(this.shape,p):n.prototype.attrKV.call(this,c,p)}this.style||this.useStyle({})},r.prototype.getDefaultStyle=function(){return null},r.prototype.getDefaultShape=function(){return{}},r.prototype.canBeInsideText=function(){return this.hasFill()},r.prototype.getInsideTextFill=function(){var a=this.style.fill;if(a!=="none"){if(isString(a)){var s=lum(a,0);return s>.5?DARK_LABEL_COLOR:s>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(a)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},r.prototype.getInsideTextStroke=function(a){var s=this.style.fill;if(isString(s)){var o=this.__zr,u=!!(o&&o.isDarkMode()),c=lum(a,0)<DARK_MODE_THRESHOLD;if(u===c)return s}},r.prototype.buildPath=function(a,s,o){},r.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},r.prototype.getUpdatedPathProxy=function(a){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,a),this.path},r.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},r.prototype.hasStroke=function(){var a=this.style,s=a.stroke;return!(s==null||s==="none"||!(a.lineWidth>0))},r.prototype.hasFill=function(){var a=this.style,s=a.fill;return s!=null&&s!=="none"},r.prototype.getBoundingRect=function(){var a=this._rect,s=this.style,o=!a;if(o){var u=!1;this.path||(u=!0,this.createPathProxy());var c=this.path;(u||this.__dirty&SHAPE_CHANGED_BIT)&&(c.beginPath(),this.buildPath(c,this.shape,!1),this.pathUpdated()),a=c.getBoundingRect()}if(this._rect=a,this.hasStroke()&&this.path&&this.path.len()>0){var p=this._rectStroke||(this._rectStroke=a.clone());if(this.__dirty||o){p.copy(a);var d=s.strokeNoScale?this.getLineScale():1,_=s.lineWidth;if(!this.hasFill()){var ja=this.strokeContainThreshold;_=Math.max(_,ja??4)}d>1e-10&&(p.width+=_/d,p.height+=_/d,p.x-=_/d/2,p.y-=_/d/2)}return p}return a},r.prototype.contain=function(a,s){var o=this.transformCoordToLocal(a,s),u=this.getBoundingRect(),c=this.style;if(a=o[0],s=o[1],u.contain(a,s)){var p=this.path;if(this.hasStroke()){var d=c.lineWidth,_=c.strokeNoScale?this.getLineScale():1;if(_>1e-10&&(this.hasFill()||(d=Math.max(d,this.strokeContainThreshold)),containStroke(p,d/_,a,s)))return!0}if(this.hasFill())return contain$2(p,a,s)}return!1},r.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},r.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},r.prototype.animateShape=function(a){return this.animate("shape",a)},r.prototype.updateDuringAnimation=function(a){a==="style"?this.dirtyStyle():a==="shape"?this.dirtyShape():this.markRedraw()},r.prototype.attrKV=function(a,s){a==="shape"?this.setShape(s):n.prototype.attrKV.call(this,a,s)},r.prototype.setShape=function(a,s){var o=this.shape;return o||(o=this.shape={}),typeof a=="string"?o[a]=s:extend$2(o,a),this.dirtyShape(),this},r.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},r.prototype.createStyle=function(a){return createObject(DEFAULT_PATH_STYLE,a)},r.prototype._innerSaveToNormal=function(a){n.prototype._innerSaveToNormal.call(this,a);var s=this._normalState;a.shape&&!s.shape&&(s.shape=extend$2({},this.shape))},r.prototype._applyStateObj=function(a,s,o,u,c,p){n.prototype._applyStateObj.call(this,a,s,o,u,c,p);var d=!(s&&u),_;if(s&&s.shape?c?u?_=s.shape:(_=extend$2({},o.shape),extend$2(_,s.shape)):(_=extend$2({},u?this.shape:o.shape),extend$2(_,s.shape)):d&&(_=o.shape),_)if(c){this.shape=extend$2({},this.shape);for(var ja={},Ja=keys(_),ec=0;ec<Ja.length;ec++){var tc=Ja[ec];typeof _[tc]=="object"?this.shape[tc]=_[tc]:ja[tc]=_[tc]}this._transitionState(a,{shape:ja},p)}else this.shape=_,this.dirtyShape()},r.prototype._mergeStates=function(a){for(var s=n.prototype._mergeStates.call(this,a),o,u=0;u<a.length;u++){var c=a[u];c.shape&&(o=o||{},this._mergeStyle(o,c.shape))}return o&&(s.shape=o),s},r.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},r.prototype.isZeroArea=function(){return!1},r.extend=function(a){var s=function(u){__extends(c,u);function c(p){var d=u.call(this,p)||this;return a.init&&a.init.call(d,p),d}return c.prototype.getDefaultStyle=function(){return clone$4(a.style)},c.prototype.getDefaultShape=function(){return clone$4(a.shape)},c}(r);for(var o in a)typeof a[o]=="function"&&(s.prototype[o]=a[o]);return s},r.initDefaultProps=function(){var a=r.prototype;a.type="path",a.strokeContainThreshold=5,a.segmentIgnoreThreshold=0,a.subPixelOptimize=!1,a.autoBatch=!1,a.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),r}(Displayable$1),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.hasStroke=function(){var a=this.style,s=a.stroke;return s!=null&&s!=="none"&&a.lineWidth>0},r.prototype.hasFill=function(){var a=this.style,s=a.fill;return s!=null&&s!=="none"},r.prototype.createStyle=function(a){return createObject(DEFAULT_TSPAN_STYLE,a)},r.prototype.setBoundingRect=function(a){this._rect=a},r.prototype.getBoundingRect=function(){var a=this.style;if(!this._rect){var s=a.text;s!=null?s+="":s="";var o=getBoundingRect(s,a.font,a.textAlign,a.textBaseline);if(o.x+=a.x||0,o.y+=a.y||0,this.hasStroke()){var u=a.lineWidth;o.x-=u/2,o.y-=u/2,o.width+=u,o.height+=u}this._rect=o}return this._rect},r.initDefaultProps=function(){var a=r.prototype;a.dirtyRectTolerance=10}(),r}(Displayable$1);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var ZRImage=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.createStyle=function(a){return createObject(DEFAULT_IMAGE_STYLE,a)},r.prototype._getSize=function(a){var s=this.style,o=s[a];if(o!=null)return o;var u=isImageLike$1(s.image)?s.image:this.__image;if(!u)return 0;var c=a==="width"?"height":"width",p=s[c];return p==null?u[a]:u[a]/u[c]*p},r.prototype.getWidth=function(){return this._getSize("width")},r.prototype.getHeight=function(){return this._getSize("height")},r.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},r.prototype.getBoundingRect=function(){var a=this.style;return this._rect||(this._rect=new BoundingRect(a.x||0,a.y||0,this.getWidth(),this.getHeight())),this._rect},r}(Displayable$1);ZRImage.prototype.type="image";function buildPath$2(n,r){var a=r.x,s=r.y,o=r.width,u=r.height,c=r.r,p,d,_,ja;o<0&&(a=a+o,o=-o),u<0&&(s=s+u,u=-u),typeof c=="number"?p=d=_=ja=c:c instanceof Array?c.length===1?p=d=_=ja=c[0]:c.length===2?(p=_=c[0],d=ja=c[1]):c.length===3?(p=c[0],d=ja=c[1],_=c[2]):(p=c[0],d=c[1],_=c[2],ja=c[3]):p=d=_=ja=0;var Ja;p+d>o&&(Ja=p+d,p*=o/Ja,d*=o/Ja),_+ja>o&&(Ja=_+ja,_*=o/Ja,ja*=o/Ja),d+_>u&&(Ja=d+_,d*=u/Ja,_*=u/Ja),p+ja>u&&(Ja=p+ja,p*=u/Ja,ja*=u/Ja),n.moveTo(a+p,s),n.lineTo(a+o-d,s),d!==0&&n.arc(a+o-d,s+d,d,-Math.PI/2,0),n.lineTo(a+o,s+u-_),_!==0&&n.arc(a+o-_,s+u-_,_,0,Math.PI/2),n.lineTo(a+ja,s+u),ja!==0&&n.arc(a+ja,s+u-ja,ja,Math.PI/2,Math.PI),n.lineTo(a,s+p),p!==0&&n.arc(a+p,s+p,p,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(n,r,a){if(r){var s=r.x1,o=r.x2,u=r.y1,c=r.y2;n.x1=s,n.x2=o,n.y1=u,n.y2=c;var p=a&&a.lineWidth;return p&&(round$2(s*2)===round$2(o*2)&&(n.x1=n.x2=subPixelOptimize$1(s,p,!0)),round$2(u*2)===round$2(c*2)&&(n.y1=n.y2=subPixelOptimize$1(u,p,!0))),n}}function subPixelOptimizeRect$1(n,r,a){if(r){var s=r.x,o=r.y,u=r.width,c=r.height;n.x=s,n.y=o,n.width=u,n.height=c;var p=a&&a.lineWidth;return p&&(n.x=subPixelOptimize$1(s,p,!0),n.y=subPixelOptimize$1(o,p,!0),n.width=Math.max(subPixelOptimize$1(s+u,p,!1)-n.x,u===0?0:1),n.height=Math.max(subPixelOptimize$1(o+c,p,!1)-n.y,c===0?0:1)),n}}function subPixelOptimize$1(n,r,a){if(!r)return n;var s=round$2(n*2);return(s+round$2(r))%2===0?s/2:(s+(a?1:-1))/2}var RectShape=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),subPixelOptimizeOutputShape$1={},Rect$2=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultShape=function(){return new RectShape},r.prototype.buildPath=function(a,s){var o,u,c,p;if(this.subPixelOptimize){var d=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,s,this.style);o=d.x,u=d.y,c=d.width,p=d.height,d.r=s.r,s=d}else o=s.x,u=s.y,c=s.width,p=s.height;s.r?buildPath$2(a,s):a.rect(o,u,c,p)},r.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},r}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(n){__extends(r,n);function r(a){var s=n.call(this)||this;return s.type="text",s._children=[],s._defaultStyle=DEFAULT_RICH_TEXT_COLOR,s.attr(a),s}return r.prototype.childrenRef=function(){return this._children},r.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var a=0;a<this._children.length;a++){var s=this._children[a];s.zlevel=this.zlevel,s.z=this.z,s.z2=this.z2,s.culling=this.culling,s.cursor=this.cursor,s.invisible=this.invisible}},r.prototype.updateTransform=function(){var a=this.innerTransformable;a?(a.updateTransform(),a.transform&&(this.transform=a.transform)):n.prototype.updateTransform.call(this)},r.prototype.getLocalTransform=function(a){var s=this.innerTransformable;return s?s.getLocalTransform(a):n.prototype.getLocalTransform.call(this,a)},r.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},r.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},r.prototype.addSelfToZr=function(a){n.prototype.addSelfToZr.call(this,a);for(var s=0;s<this._children.length;s++)this._children[s].__zr=a},r.prototype.removeSelfFromZr=function(a){n.prototype.removeSelfFromZr.call(this,a);for(var s=0;s<this._children.length;s++)this._children[s].__zr=null},r.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var a=new BoundingRect(0,0,0,0),s=this._children,o=[],u=null,c=0;c<s.length;c++){var p=s[c],d=p.getBoundingRect(),_=p.getLocalTransform(o);_?(a.copy(d),a.applyTransform(_),u=u||a.clone(),u.union(a)):(u=u||d.clone(),u.union(d))}this._rect=u||a}return this._rect},r.prototype.setDefaultTextStyle=function(a){this._defaultStyle=a||DEFAULT_RICH_TEXT_COLOR},r.prototype.setTextContent=function(a){},r.prototype._mergeStyle=function(a,s){if(!s)return a;var o=s.rich,u=a.rich||o&&{};return extend$2(a,s),o&&u?(this._mergeRich(u,o),a.rich=u):u&&(a.rich=u),a},r.prototype._mergeRich=function(a,s){for(var o=keys(s),u=0;u<o.length;u++){var c=o[u];a[c]=a[c]||{},extend$2(a[c],s[c])}},r.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},r.prototype._getOrCreateChild=function(a){var s=this._children[this._childCursor];return(!s||!(s instanceof a))&&(s=new a),this._children[this._childCursor++]=s,s.__zr=this.__zr,s.parent=this,s},r.prototype._updatePlainTexts=function(){var a=this.style,s=a.font||DEFAULT_FONT,o=a.padding,u=getStyleText(a),c=parsePlainText(u,a),p=needDrawBackground(a),d=!!a.backgroundColor,_=c.outerHeight,ja=c.outerWidth,Ja=c.contentWidth,ec=c.lines,tc=c.lineHeight,rc=this._defaultStyle,nc=a.x||0,ic=a.y||0,uc=a.align||rc.align||"left",eh=a.verticalAlign||rc.verticalAlign||"top",rh=nc,ah=adjustTextY(ic,c.contentHeight,eh);if(p||o){var ih=adjustTextX(nc,ja,uc),oh=adjustTextY(ic,_,eh);p&&this._renderBackground(a,a,ih,oh,ja,_)}ah+=tc/2,o&&(rh=getTextXForPadding(nc,uc,o),eh==="top"?ah+=o[0]:eh==="bottom"&&(ah-=o[2]));for(var uh=0,ch=!1,hh=getFill("fill"in a?a.fill:(ch=!0,rc.fill)),dh=getStroke("stroke"in a?a.stroke:!d&&(!rc.autoStroke||ch)?(uh=DEFAULT_STROKE_LINE_WIDTH,rc.stroke):null),gh=a.textShadowBlur>0,fh=a.width!=null&&(a.overflow==="truncate"||a.overflow==="break"||a.overflow==="breakAll"),vh=c.calculatedLineHeight,ph=0;ph<ec.length;ph++){var yh=this._getOrCreateChild(TSpan),xh=yh.createStyle();yh.useStyle(xh),xh.text=ec[ph],xh.x=rh,xh.y=ah,uc&&(xh.textAlign=uc),xh.textBaseline="middle",xh.opacity=a.opacity,xh.strokeFirst=!0,gh&&(xh.shadowBlur=a.textShadowBlur||0,xh.shadowColor=a.textShadowColor||"transparent",xh.shadowOffsetX=a.textShadowOffsetX||0,xh.shadowOffsetY=a.textShadowOffsetY||0),xh.stroke=dh,xh.fill=hh,dh&&(xh.lineWidth=a.lineWidth||uh,xh.lineDash=a.lineDash,xh.lineDashOffset=a.lineDashOffset||0),xh.font=s,setSeparateFont(xh,a),ah+=tc,fh&&yh.setBoundingRect(new BoundingRect(adjustTextX(xh.x,a.width,xh.textAlign),adjustTextY(xh.y,vh,xh.textBaseline),Ja,vh))}},r.prototype._updateRichTexts=function(){var a=this.style,s=getStyleText(a),o=parseRichText(s,a),u=o.width,c=o.outerWidth,p=o.outerHeight,d=a.padding,_=a.x||0,ja=a.y||0,Ja=this._defaultStyle,ec=a.align||Ja.align,tc=a.verticalAlign||Ja.verticalAlign,rc=adjustTextX(_,c,ec),nc=adjustTextY(ja,p,tc),ic=rc,uc=nc;d&&(ic+=d[3],uc+=d[0]);var eh=ic+u;needDrawBackground(a)&&this._renderBackground(a,a,rc,nc,c,p);for(var rh=!!a.backgroundColor,ah=0;ah<o.lines.length;ah++){for(var ih=o.lines[ah],oh=ih.tokens,uh=oh.length,ch=ih.lineHeight,hh=ih.width,dh=0,gh=ic,fh=eh,vh=uh-1,ph=void 0;dh<uh&&(ph=oh[dh],!ph.align||ph.align==="left");)this._placeToken(ph,a,ch,uc,gh,"left",rh),hh-=ph.width,gh+=ph.width,dh++;for(;vh>=0&&(ph=oh[vh],ph.align==="right");)this._placeToken(ph,a,ch,uc,fh,"right",rh),hh-=ph.width,fh-=ph.width,vh--;for(gh+=(u-(gh-ic)-(eh-fh)-hh)/2;dh<=vh;)ph=oh[dh],this._placeToken(ph,a,ch,uc,gh+ph.width/2,"center",rh),gh+=ph.width,dh++;uc+=ch}},r.prototype._placeToken=function(a,s,o,u,c,p,d){var _=s.rich[a.styleName]||{};_.text=a.text;var ja=a.verticalAlign,Ja=u+o/2;ja==="top"?Ja=u+a.height/2:ja==="bottom"&&(Ja=u+o-a.height/2);var ec=!a.isLineHolder&&needDrawBackground(_);ec&&this._renderBackground(_,s,p==="right"?c-a.width:p==="center"?c-a.width/2:c,Ja-a.height/2,a.width,a.height);var tc=!!_.backgroundColor,rc=a.textPadding;rc&&(c=getTextXForPadding(c,p,rc),Ja-=a.height/2-rc[0]-a.innerHeight/2);var nc=this._getOrCreateChild(TSpan),ic=nc.createStyle();nc.useStyle(ic);var uc=this._defaultStyle,eh=!1,rh=0,ah=getFill("fill"in _?_.fill:"fill"in s?s.fill:(eh=!0,uc.fill)),ih=getStroke("stroke"in _?_.stroke:"stroke"in s?s.stroke:!tc&&!d&&(!uc.autoStroke||eh)?(rh=DEFAULT_STROKE_LINE_WIDTH,uc.stroke):null),oh=_.textShadowBlur>0||s.textShadowBlur>0;ic.text=a.text,ic.x=c,ic.y=Ja,oh&&(ic.shadowBlur=_.textShadowBlur||s.textShadowBlur||0,ic.shadowColor=_.textShadowColor||s.textShadowColor||"transparent",ic.shadowOffsetX=_.textShadowOffsetX||s.textShadowOffsetX||0,ic.shadowOffsetY=_.textShadowOffsetY||s.textShadowOffsetY||0),ic.textAlign=p,ic.textBaseline="middle",ic.font=a.font||DEFAULT_FONT,ic.opacity=retrieve3(_.opacity,s.opacity,1),setSeparateFont(ic,_),ih&&(ic.lineWidth=retrieve3(_.lineWidth,s.lineWidth,rh),ic.lineDash=retrieve2(_.lineDash,s.lineDash),ic.lineDashOffset=s.lineDashOffset||0,ic.stroke=ih),ah&&(ic.fill=ah);var uh=a.contentWidth,ch=a.contentHeight;nc.setBoundingRect(new BoundingRect(adjustTextX(ic.x,uh,ic.textAlign),adjustTextY(ic.y,ch,ic.textBaseline),uh,ch))},r.prototype._renderBackground=function(a,s,o,u,c,p){var d=a.backgroundColor,_=a.borderWidth,ja=a.borderColor,Ja=d&&d.image,ec=d&&!Ja,tc=a.borderRadius,rc=this,nc,ic;if(ec||a.lineHeight||_&&ja){nc=this._getOrCreateChild(Rect$2),nc.useStyle(nc.createStyle()),nc.style.fill=null;var uc=nc.shape;uc.x=o,uc.y=u,uc.width=c,uc.height=p,uc.r=tc,nc.dirtyShape()}if(ec){var eh=nc.style;eh.fill=d||null,eh.fillOpacity=retrieve2(a.fillOpacity,1)}else if(Ja){ic=this._getOrCreateChild(ZRImage),ic.onload=function(){rc.dirtyStyle()};var rh=ic.style;rh.image=d.image,rh.x=o,rh.y=u,rh.width=c,rh.height=p}if(_&&ja){var eh=nc.style;eh.lineWidth=_,eh.stroke=ja,eh.strokeOpacity=retrieve2(a.strokeOpacity,1),eh.lineDash=a.borderDash,eh.lineDashOffset=a.borderDashOffset||0,nc.strokeContainThreshold=0,nc.hasFill()&&nc.hasStroke()&&(eh.strokeFirst=!0,eh.lineWidth*=2)}var ah=(nc||ic).style;ah.shadowBlur=a.shadowBlur||0,ah.shadowColor=a.shadowColor||"transparent",ah.shadowOffsetX=a.shadowOffsetX||0,ah.shadowOffsetY=a.shadowOffsetY||0,ah.opacity=retrieve3(a.opacity,s.opacity,1)},r.makeFont=function(a){var s="";return hasSeparateFont(a)&&(s=[a.fontStyle,a.fontWeight,parseFontSize(a.fontSize),a.fontFamily||"sans-serif"].join(" ")),s&&trim$1(s)||a.textFont||a.font},r}(Displayable$1),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?DEFAULT_FONT_SIZE+"px":n+"px"}function setSeparateFont(n,r){for(var a=0;a<FONT_PARTS.length;a++){var s=FONT_PARTS[a],o=r[s];o!=null&&(n[s]=o)}}function hasSeparateFont(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function normalizeTextStyle(n){return normalizeStyle(n),each$f(n.rich,normalizeStyle),n}function normalizeStyle(n){if(n){n.font=ZRText.makeFont(n);var r=n.align;r==="middle"&&(r="center"),n.align=r==null||VALID_TEXT_ALIGN[r]?r:"left";var a=n.verticalAlign;a==="center"&&(a="middle"),n.verticalAlign=a==null||VALID_TEXT_VERTICAL_ALIGN[a]?a:"top";var s=n.padding;s&&(n.padding=normalizeCssArray$1(n.padding))}}function getStroke(n,r){return n==null||r<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function getFill(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function getTextXForPadding(n,r,a){return r==="right"?n-a[1]:r==="center"?n+a[3]/2-a[1]/2:n+a[3]}function getStyleText(n){var r=n.text;return r!=null&&(r+=""),r}function needDrawBackground(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var getECData=makeInner(),setCommonECData=function(n,r,a,s){if(s){var o=getECData(s);o.dataIndex=a,o.dataType=r,o.seriesIndex=n,o.ssrType="chart",s.type==="group"&&s.traverse(function(u){var c=getECData(u);c.seriesIndex=n,c.dataIndex=a,c.dataType=r,c.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(n){return n!=null&&n!=="none"}function doChangeHoverState(n,r,a){n.onHoverStateChange&&(n.hoverState||0)!==a&&n.onHoverStateChange(r),n.hoverState=a}function singleEnterEmphasis(n){doChangeHoverState(n,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(n){n.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(n,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(n){doChangeHoverState(n,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(n){n.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(n,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(n){n.selected=!0}function singleLeaveSelect(n){n.selected=!1}function updateElementState(n,r,a){r(n,a)}function traverseUpdateState(n,r,a){updateElementState(n,r,a),n.isGroup&&n.traverse(function(s){updateElementState(s,r,a)})}function setStatesFlag(n,r){switch(r){case"emphasis":n.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":n.hoverState=HOVER_STATE_NORMAL;break;case"blur":n.hoverState=HOVER_STATE_BLUR;break;case"select":n.selected=!0}}function getFromStateStyle(n,r,a,s){for(var o=n.style,u={},c=0;c<r.length;c++){var p=r[c],d=o[p];u[p]=d??(s&&s[p])}for(var c=0;c<n.animators.length;c++){var _=n.animators[c];_.__fromStateTransition&&_.__fromStateTransition.indexOf(a)<0&&_.targetName==="style"&&_.saveTo(u,r)}return u}function createEmphasisDefaultState(n,r,a,s){var o=a&&indexOf(a,"select")>=0,u=!1;if(n instanceof Path){var c=getSavedStates(n),p=o&&c.selectFill||c.normalFill,d=o&&c.selectStroke||c.normalStroke;if(hasFillOrStroke(p)||hasFillOrStroke(d)){s=s||{};var _=s.style||{};_.fill==="inherit"?(u=!0,s=extend$2({},s),_=extend$2({},_),_.fill=p):!hasFillOrStroke(_.fill)&&hasFillOrStroke(p)?(u=!0,s=extend$2({},s),_=extend$2({},_),_.fill=liftColor(p)):!hasFillOrStroke(_.stroke)&&hasFillOrStroke(d)&&(u||(s=extend$2({},s),_=extend$2({},_)),_.stroke=liftColor(d)),s.style=_}}if(s&&s.z2==null){u||(s=extend$2({},s));var ja=n.z2EmphasisLift;s.z2=n.z2+(ja??Z2_EMPHASIS_LIFT)}return s}function createSelectDefaultState(n,r,a){if(a&&a.z2==null){a=extend$2({},a);var s=n.z2SelectLift;a.z2=n.z2+(s??Z2_SELECT_LIFT)}return a}function createBlurDefaultState(n,r,a){var s=indexOf(n.currentStates,r)>=0,o=n.style.opacity,u=s?null:getFromStateStyle(n,["opacity"],r,{opacity:1});a=a||{};var c=a.style||{};return c.opacity==null&&(a=extend$2({},a),c=extend$2({opacity:s?o:u.opacity*.1},c),a.style=c),a}function elementStateProxy(n,r){var a=this.states[n];if(this.style){if(n==="emphasis")return createEmphasisDefaultState(this,n,r,a);if(n==="blur")return createBlurDefaultState(this,n,a);if(n==="select")return createSelectDefaultState(this,n,a)}return a}function setDefaultStateProxy(n){n.stateProxy=elementStateProxy;var r=n.getTextContent(),a=n.getTextGuideLine();r&&(r.stateProxy=elementStateProxy),a&&(a.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(n,r){!shouldSilent(n,r)&&!n.__highByOuter&&traverseUpdateState(n,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(n,r){!shouldSilent(n,r)&&!n.__highByOuter&&traverseUpdateState(n,singleLeaveEmphasis)}function enterEmphasis(n,r){n.__highByOuter|=1<<(r||0),traverseUpdateState(n,singleEnterEmphasis)}function leaveEmphasis(n,r){!(n.__highByOuter&=~(1<<(r||0)))&&traverseUpdateState(n,singleLeaveEmphasis)}function enterBlur(n){traverseUpdateState(n,singleEnterBlur)}function leaveBlur(n){traverseUpdateState(n,singleLeaveBlur)}function enterSelect(n){traverseUpdateState(n,singleEnterSelect)}function leaveSelect(n){traverseUpdateState(n,singleLeaveSelect)}function shouldSilent(n,r){return n.__highDownSilentOnTouch&&r.zrByTouch}function allLeaveBlur(n){var r=n.getModel(),a=[],s=[];r.eachComponent(function(o,u){var c=getComponentStates(u),p=o==="series",d=p?n.getViewOfSeriesModel(u):n.getViewOfComponentModel(u);!p&&s.push(d),c.isBlured&&(d.group.traverse(function(_){singleLeaveBlur(_)}),p&&a.push(u)),c.isBlured=!1}),each$f(s,function(o){o&&o.toggleBlurSeries&&o.toggleBlurSeries(a,!1,r)})}function blurSeries(n,r,a,s){var o=s.getModel();a=a||"coordinateSystem";function u(_,ja){for(var Ja=0;Ja<ja.length;Ja++){var ec=_.getItemGraphicEl(ja[Ja]);ec&&leaveBlur(ec)}}if(n!=null&&!(!r||r==="none")){var c=o.getSeriesByIndex(n),p=c.coordinateSystem;p&&p.master&&(p=p.master);var d=[];o.eachSeries(function(_){var ja=c===_,Ja=_.coordinateSystem;Ja&&Ja.master&&(Ja=Ja.master);var ec=Ja&&p?Ja===p:ja;if(!(a==="series"&&!ja||a==="coordinateSystem"&&!ec||r==="series"&&ja)){var tc=s.getViewOfSeriesModel(_);if(tc.group.traverse(function(ic){ic.__highByOuter&&ja&&r==="self"||singleEnterBlur(ic)}),isArrayLike(r))u(_.getData(),r);else if(isObject$3(r))for(var rc=keys(r),nc=0;nc<rc.length;nc++)u(_.getData(rc[nc]),r[rc[nc]]);d.push(_),getComponentStates(_).isBlured=!0}}),o.eachComponent(function(_,ja){if(_!=="series"){var Ja=s.getViewOfComponentModel(ja);Ja&&Ja.toggleBlurSeries&&Ja.toggleBlurSeries(d,!0,o)}})}}function blurComponent(n,r,a){if(!(n==null||r==null)){var s=a.getModel().getComponent(n,r);if(s){getComponentStates(s).isBlured=!0;var o=a.getViewOfComponentModel(s);!o||!o.focusBlurEnabled||o.group.traverse(function(u){singleEnterBlur(u)})}}}function blurSeriesFromHighlightPayload(n,r,a){var s=n.seriesIndex,o=n.getData(r.dataType);if(o){var u=queryDataIndex(o,r);u=(isArray$1(u)?u[0]:u)||0;var c=o.getItemGraphicEl(u);if(!c)for(var p=o.count(),d=0;!c&&d<p;)c=o.getItemGraphicEl(d++);if(c){var _=getECData(c);blurSeries(s,_.focus,_.blurScope,a)}else{var ja=n.get(["emphasis","focus"]),Ja=n.get(["emphasis","blurScope"]);ja!=null&&blurSeries(s,ja,Ja,a)}}}function findComponentHighDownDispatchers(n,r,a,s){var o={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||r==null||a==null)return o;var u=s.getModel().getComponent(n,r);if(!u)return o;var c=s.getViewOfComponentModel(u);if(!c||!c.findHighDownDispatchers)return o;for(var p=c.findHighDownDispatchers(a),d,_=0;_<p.length;_++)if(getECData(p[_]).focus==="self"){d=!0;break}return{focusSelf:d,dispatchers:p}}function handleGlobalMouseOverForHighDown(n,r,a){var s=getECData(n),o=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,a),u=o.dispatchers,c=o.focusSelf;u?(c&&blurComponent(s.componentMainType,s.componentIndex,a),each$f(u,function(p){return enterEmphasisWhenMouseOver(p,r)})):(blurSeries(s.seriesIndex,s.focus,s.blurScope,a),s.focus==="self"&&blurComponent(s.componentMainType,s.componentIndex,a),enterEmphasisWhenMouseOver(n,r))}function handleGlobalMouseOutForHighDown(n,r,a){allLeaveBlur(a);var s=getECData(n),o=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,a).dispatchers;o?each$f(o,function(u){return leaveEmphasisWhenMouseOut(u,r)}):leaveEmphasisWhenMouseOut(n,r)}function toggleSelectionFromPayload(n,r,a){if(isSelectChangePayload(r)){var s=r.dataType,o=n.getData(s),u=queryDataIndex(o,r);isArray$1(u)||(u=[u]),n[r.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":r.type===SELECT_ACTION_TYPE?"select":"unselect"](u,s)}}function updateSeriesElementSelection(n){var r=n.getAllData();each$f(r,function(a){var s=a.data,o=a.type;s.eachItemGraphicEl(function(u,c){n.isSelected(c,o)?enterSelect(u):leaveSelect(u)})})}function getAllSelectedIndices(n){var r=[];return n.eachSeries(function(a){var s=a.getAllData();each$f(s,function(o){o.data;var u=o.type,c=a.getSelectedDataIndices();if(c.length>0){var p={dataIndex:c,seriesIndex:a.seriesIndex};u!=null&&(p.dataType=u),r.push(p)}})}),r}function enableHoverEmphasis(n,r,a){setAsHighDownDispatcher(n,!0),traverseUpdateState(n,setDefaultStateProxy),enableHoverFocus(n,r,a)}function disableHoverEmphasis(n){setAsHighDownDispatcher(n,!1)}function toggleHoverEmphasis(n,r,a,s){s?disableHoverEmphasis(n):enableHoverEmphasis(n,r,a)}function enableHoverFocus(n,r,a){var s=getECData(n);r!=null?(s.focus=r,s.blurScope=a):s.focus&&(s.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(n,r,a,s){a=a||"itemStyle";for(var o=0;o<OTHER_STATES.length;o++){var u=OTHER_STATES[o],c=r.getModel([u,a]),p=n.ensureState(u);p.style=s?s(c):c[defaultStyleGetterMap[a]]()}}function setAsHighDownDispatcher(n,r){var a=r===!1,s=n;n.highDownSilentOnTouch&&(s.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!a||s.__highDownDispatcher)&&(s.__highByOuter=s.__highByOuter||0,s.__highDownDispatcher=!a)}function isHighDownDispatcher(n){return!!(n&&n.__highDownDispatcher)}function enableComponentHighDownFeatures(n,r,a){var s=getECData(n);s.componentMainType=r.mainType,s.componentIndex=r.componentIndex,s.componentHighDownName=a}function getHighlightDigit(n){var r=_highlightKeyMap[n];return r==null&&_highlightNextDigit<=32&&(r=_highlightKeyMap[n]=_highlightNextDigit++),r}function isSelectChangePayload(n){var r=n.type;return r===SELECT_ACTION_TYPE||r===UNSELECT_ACTION_TYPE||r===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(n){var r=n.type;return r===HIGHLIGHT_ACTION_TYPE||r===DOWNPLAY_ACTION_TYPE}function savePathStates(n){var r=getSavedStates(n);r.normalFill=n.style.fill,r.normalStroke=n.style.stroke;var a=n.states.select||{};r.selectFill=a.style&&a.style.fill||null,r.selectStroke=a.style&&a.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(n,r){if(r){var a=n.data,s=n.len(),o,u,c,p,d,_,ja=CMD$2.M,Ja=CMD$2.C,ec=CMD$2.L,tc=CMD$2.R,rc=CMD$2.A,nc=CMD$2.Q;for(c=0,p=0;c<s;){switch(o=a[c++],p=c,u=0,o){case ja:u=1;break;case ec:u=1;break;case Ja:u=3;break;case nc:u=2;break;case rc:var ic=r[4],uc=r[5],eh=mathSqrt$2(r[0]*r[0]+r[1]*r[1]),rh=mathSqrt$2(r[2]*r[2]+r[3]*r[3]),ah=mathAtan2(-r[1]/rh,r[0]/eh);a[c]*=eh,a[c++]+=ic,a[c]*=rh,a[c++]+=uc,a[c++]*=eh,a[c++]*=rh,a[c++]+=ah,a[c++]+=ah,c+=2,p=c;break;case tc:_[0]=a[c++],_[1]=a[c++],applyTransform$1(_,_,r),a[p++]=_[0],a[p++]=_[1],_[0]+=a[c++],_[1]+=a[c++],applyTransform$1(_,_,r),a[p++]=_[0],a[p++]=_[1]}for(d=0;d<u;d++){var ih=points$2[d];ih[0]=a[c++],ih[1]=a[c++],applyTransform$1(ih,ih,r),a[p++]=ih[0],a[p++]=ih[1]}}n.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$9=Math.PI;function vMag(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function vRatio(n,r){return(n[0]*r[0]+n[1]*r[1])/(vMag(n)*vMag(r))}function vAngle(n,r){return(n[0]*r[1]<n[1]*r[0]?-1:1)*Math.acos(vRatio(n,r))}function processArc(n,r,a,s,o,u,c,p,d,_,ja){var Ja=d*(PI$9/180),ec=mathCos$2(Ja)*(n-a)/2+mathSin$2(Ja)*(r-s)/2,tc=-1*mathSin$2(Ja)*(n-a)/2+mathCos$2(Ja)*(r-s)/2,rc=ec*ec/(c*c)+tc*tc/(p*p);rc>1&&(c*=mathSqrt$1(rc),p*=mathSqrt$1(rc));var nc=(o===u?-1:1)*mathSqrt$1((c*c*(p*p)-c*c*(tc*tc)-p*p*(ec*ec))/(c*c*(tc*tc)+p*p*(ec*ec)))||0,ic=nc*c*tc/p,uc=nc*-p*ec/c,eh=(n+a)/2+mathCos$2(Ja)*ic-mathSin$2(Ja)*uc,rh=(r+s)/2+mathSin$2(Ja)*ic+mathCos$2(Ja)*uc,ah=vAngle([1,0],[(ec-ic)/c,(tc-uc)/p]),ih=[(ec-ic)/c,(tc-uc)/p],oh=[(-1*ec-ic)/c,(-1*tc-uc)/p],uh=vAngle(ih,oh);if(vRatio(ih,oh)<=-1&&(uh=PI$9),vRatio(ih,oh)>=1&&(uh=0),uh<0){var ch=Math.round(uh/PI$9*1e6)/1e6;uh=PI$9*2+ch%2*PI$9}ja.addData(_,eh,rh,c,p,ah,uh,Ja,u)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(n){var r=new PathProxy;if(!n)return r;var a=0,s=0,o=a,u=s,c,p=PathProxy.CMD,d=n.match(commandReg);if(!d)return r;for(var _=0;_<d.length;_++){for(var ja=d[_],Ja=ja.charAt(0),ec=void 0,tc=ja.match(numberReg$1)||[],rc=tc.length,nc=0;nc<rc;nc++)tc[nc]=parseFloat(tc[nc]);for(var ic=0;ic<rc;){var uc=void 0,eh=void 0,rh=void 0,ah=void 0,ih=void 0,oh=void 0,uh=void 0,ch=a,hh=s,dh=void 0,gh=void 0;switch(Ja){case"l":a+=tc[ic++],s+=tc[ic++],ec=p.L,r.addData(ec,a,s);break;case"L":a=tc[ic++],s=tc[ic++],ec=p.L,r.addData(ec,a,s);break;case"m":a+=tc[ic++],s+=tc[ic++],ec=p.M,r.addData(ec,a,s),o=a,u=s,Ja="l";break;case"M":a=tc[ic++],s=tc[ic++],ec=p.M,r.addData(ec,a,s),o=a,u=s,Ja="L";break;case"h":a+=tc[ic++],ec=p.L,r.addData(ec,a,s);break;case"H":a=tc[ic++],ec=p.L,r.addData(ec,a,s);break;case"v":s+=tc[ic++],ec=p.L,r.addData(ec,a,s);break;case"V":s=tc[ic++],ec=p.L,r.addData(ec,a,s);break;case"C":ec=p.C,r.addData(ec,tc[ic++],tc[ic++],tc[ic++],tc[ic++],tc[ic++],tc[ic++]),a=tc[ic-2],s=tc[ic-1];break;case"c":ec=p.C,r.addData(ec,tc[ic++]+a,tc[ic++]+s,tc[ic++]+a,tc[ic++]+s,tc[ic++]+a,tc[ic++]+s),a+=tc[ic-2],s+=tc[ic-1];break;case"S":uc=a,eh=s,dh=r.len(),gh=r.data,c===p.C&&(uc+=a-gh[dh-4],eh+=s-gh[dh-3]),ec=p.C,ch=tc[ic++],hh=tc[ic++],a=tc[ic++],s=tc[ic++],r.addData(ec,uc,eh,ch,hh,a,s);break;case"s":uc=a,eh=s,dh=r.len(),gh=r.data,c===p.C&&(uc+=a-gh[dh-4],eh+=s-gh[dh-3]),ec=p.C,ch=a+tc[ic++],hh=s+tc[ic++],a+=tc[ic++],s+=tc[ic++],r.addData(ec,uc,eh,ch,hh,a,s);break;case"Q":ch=tc[ic++],hh=tc[ic++],a=tc[ic++],s=tc[ic++],ec=p.Q,r.addData(ec,ch,hh,a,s);break;case"q":ch=tc[ic++]+a,hh=tc[ic++]+s,a+=tc[ic++],s+=tc[ic++],ec=p.Q,r.addData(ec,ch,hh,a,s);break;case"T":uc=a,eh=s,dh=r.len(),gh=r.data,c===p.Q&&(uc+=a-gh[dh-4],eh+=s-gh[dh-3]),a=tc[ic++],s=tc[ic++],ec=p.Q,r.addData(ec,uc,eh,a,s);break;case"t":uc=a,eh=s,dh=r.len(),gh=r.data,c===p.Q&&(uc+=a-gh[dh-4],eh+=s-gh[dh-3]),a+=tc[ic++],s+=tc[ic++],ec=p.Q,r.addData(ec,uc,eh,a,s);break;case"A":rh=tc[ic++],ah=tc[ic++],ih=tc[ic++],oh=tc[ic++],uh=tc[ic++],ch=a,hh=s,a=tc[ic++],s=tc[ic++],ec=p.A,processArc(ch,hh,a,s,oh,uh,rh,ah,ih,ec,r);break;case"a":rh=tc[ic++],ah=tc[ic++],ih=tc[ic++],oh=tc[ic++],uh=tc[ic++],ch=a,hh=s,a+=tc[ic++],s+=tc[ic++],ec=p.A,processArc(ch,hh,a,s,oh,uh,rh,ah,ih,ec,r);break}}(Ja==="z"||Ja==="Z")&&(ec=p.Z,r.addData(ec),a=o,s=u),c=ec}return r.toStatic(),r}var SVGPath=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.applyTransform=function(a){},r}(Path);function isPathProxy(n){return n.setData!=null}function createPathOptions(n,r){var a=createPathProxyFromString(n),s=extend$2({},r);return s.buildPath=function(o){if(isPathProxy(o)){o.setData(a.data);var u=o.getContext();u&&o.rebuildPath(u,1)}else{var u=o;a.rebuildPath(u,1)}},s.applyTransform=function(o){transformPath(a,o),this.dirtyShape()},s}function createFromString(n,r){return new SVGPath(createPathOptions(n,r))}function extendFromString(n,r){var a=createPathOptions(n,r),s=function(o){__extends(u,o);function u(c){var p=o.call(this,c)||this;return p.applyTransform=a.applyTransform,p.buildPath=a.buildPath,p}return u}(SVGPath);return s}function mergePath$1(n,r){for(var a=[],s=n.length,o=0;o<s;o++){var u=n[o];a.push(u.getUpdatedPathProxy(!0))}var c=new Path(r);return c.createPathProxy(),c.buildPath=function(p){if(isPathProxy(p)){p.appendPath(a);var d=p.getContext();d&&p.rebuildPath(d,1)}},c}function clonePath(n,r){r=r||{};var a=new Path;return n.shape&&a.setShape(n.shape),a.setStyle(n.style),r.bakeTransform?transformPath(a.path,n.getComputedTransform()):r.toLocal?a.setLocalTransform(n.getComputedTransform()):a.copyTransform(n),a.buildPath=n.buildPath,a.applyTransform=a.applyTransform,a.z=n.z,a.z2=n.z2,a.zlevel=n.zlevel,a}var CircleShape=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),Circle=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultShape=function(){return new CircleShape},r.prototype.buildPath=function(a,s){a.moveTo(s.cx+s.r,s.cy),a.arc(s.cx,s.cy,s.r,0,Math.PI*2)},r}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),Ellipse=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultShape=function(){return new EllipseShape},r.prototype.buildPath=function(a,s){var o=.5522848,u=s.cx,c=s.cy,p=s.rx,d=s.ry,_=p*o,ja=d*o;a.moveTo(u-p,c),a.bezierCurveTo(u-p,c-ja,u-_,c-d,u,c-d),a.bezierCurveTo(u+_,c-d,u+p,c-ja,u+p,c),a.bezierCurveTo(u+p,c+ja,u+_,c+d,u,c+d),a.bezierCurveTo(u-_,c+d,u-p,c+ja,u-p,c),a.closePath()},r}(Path);Ellipse.prototype.type="ellipse";const Ellipse$1=Ellipse;var PI$8=Math.PI,PI2$3=PI$8*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$8=Math.max,mathMin$8=Math.min,e$1=1e-4;function intersect(n,r,a,s,o,u,c,p){var d=a-n,_=s-r,ja=c-o,Ja=p-u,ec=Ja*d-ja*_;if(!(ec*ec<e$1))return ec=(ja*(r-u)-Ja*(n-o))/ec,[n+ec*d,r+ec*_]}function computeCornerTangents(n,r,a,s,o,u,c){var p=n-a,d=r-s,_=(c?u:-u)/mathSqrt(p*p+d*d),ja=_*d,Ja=-_*p,ec=n+ja,tc=r+Ja,rc=a+ja,nc=s+Ja,ic=(ec+rc)/2,uc=(tc+nc)/2,eh=rc-ec,rh=nc-tc,ah=eh*eh+rh*rh,ih=o-u,oh=ec*nc-rc*tc,uh=(rh<0?-1:1)*mathSqrt(mathMax$8(0,ih*ih*ah-oh*oh)),ch=(oh*rh-eh*uh)/ah,hh=(-oh*eh-rh*uh)/ah,dh=(oh*rh+eh*uh)/ah,gh=(-oh*eh+rh*uh)/ah,fh=ch-ic,vh=hh-uc,ph=dh-ic,yh=gh-uc;return fh*fh+vh*vh>ph*ph+yh*yh&&(ch=dh,hh=gh),{cx:ch,cy:hh,x0:-ja,y0:-Ja,x1:ch*(o/ih-1),y1:hh*(o/ih-1)}}function normalizeCornerRadius(n){var r;if(isArray$1(n)){var a=n.length;if(!a)return n;a===1?r=[n[0],n[0],0,0]:a===2?r=[n[0],n[0],n[1],n[1]]:a===3?r=n.concat(n[2]):r=n}else r=[n,n,n,n];return r}function buildPath$1(n,r){var a,s=mathMax$8(r.r,0),o=mathMax$8(r.r0||0,0),u=s>0,c=o>0;if(!(!u&&!c)){if(u||(s=o,o=0),o>s){var p=s;s=o,o=p}var d=r.startAngle,_=r.endAngle;if(!(isNaN(d)||isNaN(_))){var ja=r.cx,Ja=r.cy,ec=!!r.clockwise,tc=mathAbs$1(_-d),rc=tc>PI2$3&&tc%PI2$3;if(rc>e$1&&(tc=rc),!(s>e$1))n.moveTo(ja,Ja);else if(tc>PI2$3-e$1)n.moveTo(ja+s*mathCos$1(d),Ja+s*mathSin$1(d)),n.arc(ja,Ja,s,d,_,!ec),o>e$1&&(n.moveTo(ja+o*mathCos$1(_),Ja+o*mathSin$1(_)),n.arc(ja,Ja,o,_,d,ec));else{var nc=void 0,ic=void 0,uc=void 0,eh=void 0,rh=void 0,ah=void 0,ih=void 0,oh=void 0,uh=void 0,ch=void 0,hh=void 0,dh=void 0,gh=void 0,fh=void 0,vh=void 0,ph=void 0,yh=s*mathCos$1(d),xh=s*mathSin$1(d),_h=o*mathCos$1(_),bh=o*mathSin$1(_),Dh=tc>e$1;if(Dh){var Th=r.cornerRadius;Th&&(a=normalizeCornerRadius(Th),nc=a[0],ic=a[1],uc=a[2],eh=a[3]);var Ch=mathAbs$1(s-o)/2;if(rh=mathMin$8(Ch,uc),ah=mathMin$8(Ch,eh),ih=mathMin$8(Ch,nc),oh=mathMin$8(Ch,ic),hh=uh=mathMax$8(rh,ah),dh=ch=mathMax$8(ih,oh),(uh>e$1||ch>e$1)&&(gh=s*mathCos$1(_),fh=s*mathSin$1(_),vh=o*mathCos$1(d),ph=o*mathSin$1(d),tc<PI$8)){var wh=intersect(yh,xh,vh,ph,gh,fh,_h,bh);if(wh){var Nh=yh-wh[0],Rh=xh-wh[1],kh=gh-wh[0],Lh=fh-wh[1],Fh=1/mathSin$1(mathACos((Nh*kh+Rh*Lh)/(mathSqrt(Nh*Nh+Rh*Rh)*mathSqrt(kh*kh+Lh*Lh)))/2),Wh=mathSqrt(wh[0]*wh[0]+wh[1]*wh[1]);hh=mathMin$8(uh,(s-Wh)/(Fh+1)),dh=mathMin$8(ch,(o-Wh)/(Fh-1))}}}if(!Dh)n.moveTo(ja+yh,Ja+xh);else if(hh>e$1){var Qh=mathMin$8(uc,hh),jh=mathMin$8(eh,hh),Hh=computeCornerTangents(vh,ph,yh,xh,s,Qh,ec),qh=computeCornerTangents(gh,fh,_h,bh,s,jh,ec);n.moveTo(ja+Hh.cx+Hh.x0,Ja+Hh.cy+Hh.y0),hh<uh&&Qh===jh?n.arc(ja+Hh.cx,Ja+Hh.cy,hh,mathATan2(Hh.y0,Hh.x0),mathATan2(qh.y0,qh.x0),!ec):(Qh>0&&n.arc(ja+Hh.cx,Ja+Hh.cy,Qh,mathATan2(Hh.y0,Hh.x0),mathATan2(Hh.y1,Hh.x1),!ec),n.arc(ja,Ja,s,mathATan2(Hh.cy+Hh.y1,Hh.cx+Hh.x1),mathATan2(qh.cy+qh.y1,qh.cx+qh.x1),!ec),jh>0&&n.arc(ja+qh.cx,Ja+qh.cy,jh,mathATan2(qh.y1,qh.x1),mathATan2(qh.y0,qh.x0),!ec))}else n.moveTo(ja+yh,Ja+xh),n.arc(ja,Ja,s,d,_,!ec);if(!(o>e$1)||!Dh)n.lineTo(ja+_h,Ja+bh);else if(dh>e$1){var Qh=mathMin$8(nc,dh),jh=mathMin$8(ic,dh),Hh=computeCornerTangents(_h,bh,gh,fh,o,-jh,ec),qh=computeCornerTangents(yh,xh,vh,ph,o,-Qh,ec);n.lineTo(ja+Hh.cx+Hh.x0,Ja+Hh.cy+Hh.y0),dh<ch&&Qh===jh?n.arc(ja+Hh.cx,Ja+Hh.cy,dh,mathATan2(Hh.y0,Hh.x0),mathATan2(qh.y0,qh.x0),!ec):(jh>0&&n.arc(ja+Hh.cx,Ja+Hh.cy,jh,mathATan2(Hh.y0,Hh.x0),mathATan2(Hh.y1,Hh.x1),!ec),n.arc(ja,Ja,o,mathATan2(Hh.cy+Hh.y1,Hh.cx+Hh.x1),mathATan2(qh.cy+qh.y1,qh.cx+qh.x1),ec),Qh>0&&n.arc(ja+qh.cx,Ja+qh.cy,Qh,mathATan2(qh.y1,qh.x1),mathATan2(qh.y0,qh.x0),!ec))}else n.lineTo(ja+_h,Ja+bh),n.arc(ja,Ja,o,_,d,ec)}n.closePath()}}}var SectorShape=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),Sector=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultShape=function(){return new SectorShape},r.prototype.buildPath=function(a,s){buildPath$1(a,s)},r.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},r}(Path);Sector.prototype.type="sector";var RingShape=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),Ring=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultShape=function(){return new RingShape},r.prototype.buildPath=function(a,s){var o=s.cx,u=s.cy,c=Math.PI*2;a.moveTo(o+s.r,u),a.arc(o,u,s.r,0,c,!1),a.moveTo(o+s.r0,u),a.arc(o,u,s.r0,0,c,!0)},r}(Path);Ring.prototype.type="ring";const Ring$1=Ring;function smoothBezier(n,r,a,s){var o=[],u=[],c=[],p=[],d,_,ja,Ja;if(s){ja=[1/0,1/0],Ja=[-1/0,-1/0];for(var ec=0,tc=n.length;ec<tc;ec++)min$1(ja,ja,n[ec]),max$1(Ja,Ja,n[ec]);min$1(ja,ja,s[0]),max$1(Ja,Ja,s[1])}for(var ec=0,tc=n.length;ec<tc;ec++){var rc=n[ec];if(a)d=n[ec?ec-1:tc-1],_=n[(ec+1)%tc];else if(ec===0||ec===tc-1){o.push(clone$3(n[ec]));continue}else d=n[ec-1],_=n[ec+1];sub$1(u,_,d),scale$2(u,u,r);var nc=distance(rc,d),ic=distance(rc,_),uc=nc+ic;uc!==0&&(nc/=uc,ic/=uc),scale$2(c,u,-nc),scale$2(p,u,ic);var eh=add$1([],rc,c),rh=add$1([],rc,p);s&&(max$1(eh,eh,ja),min$1(eh,eh,Ja),max$1(rh,rh,ja),min$1(rh,rh,Ja)),o.push(eh),o.push(rh)}return a&&o.push(o.shift()),o}function buildPath(n,r,a){var s=r.smooth,o=r.points;if(o&&o.length>=2){if(s){var u=smoothBezier(o,s,a,r.smoothConstraint);n.moveTo(o[0][0],o[0][1]);for(var c=o.length,p=0;p<(a?c:c-1);p++){var d=u[p*2],_=u[p*2+1],ja=o[(p+1)%c];n.bezierCurveTo(d[0],d[1],_[0],_[1],ja[0],ja[1])}}else{n.moveTo(o[0][0],o[0][1]);for(var p=1,Ja=o.length;p<Ja;p++)n.lineTo(o[p][0],o[p][1])}a&&n.closePath()}}var PolygonShape=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),Polygon=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultShape=function(){return new PolygonShape},r.prototype.buildPath=function(a,s){buildPath(a,s,!0)},r}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),Polyline$1=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new PolylineShape},r.prototype.buildPath=function(a,s){buildPath(a,s,!1)},r}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),Line$2=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new LineShape},r.prototype.buildPath=function(a,s){var o,u,c,p;if(this.subPixelOptimize){var d=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,s,this.style);o=d.x1,u=d.y1,c=d.x2,p=d.y2}else o=s.x1,u=s.y1,c=s.x2,p=s.y2;var _=s.percent;_!==0&&(a.moveTo(o,u),_<1&&(c=o*(1-_)+c*_,p=u*(1-_)+p*_),a.lineTo(c,p))},r.prototype.pointAt=function(a){var s=this.shape;return[s.x1*(1-a)+s.x2*a,s.y1*(1-a)+s.y2*a]},r}(Path);Line$2.prototype.type="line";var out=[],BezierCurveShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function someVectorAt(n,r,a){var s=n.cpx2,o=n.cpy2;return s!=null||o!=null?[(a?cubicDerivativeAt:cubicAt)(n.x1,n.cpx1,n.cpx2,n.x2,r),(a?cubicDerivativeAt:cubicAt)(n.y1,n.cpy1,n.cpy2,n.y2,r)]:[(a?quadraticDerivativeAt:quadraticAt$1)(n.x1,n.cpx1,n.x2,r),(a?quadraticDerivativeAt:quadraticAt$1)(n.y1,n.cpy1,n.y2,r)]}var BezierCurve=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new BezierCurveShape},r.prototype.buildPath=function(a,s){var o=s.x1,u=s.y1,c=s.x2,p=s.y2,d=s.cpx1,_=s.cpy1,ja=s.cpx2,Ja=s.cpy2,ec=s.percent;ec!==0&&(a.moveTo(o,u),ja==null||Ja==null?(ec<1&&(quadraticSubdivide(o,d,c,ec,out),d=out[1],c=out[2],quadraticSubdivide(u,_,p,ec,out),_=out[1],p=out[2]),a.quadraticCurveTo(d,_,c,p)):(ec<1&&(cubicSubdivide(o,d,ja,c,ec,out),d=out[1],ja=out[2],c=out[3],cubicSubdivide(u,_,Ja,p,ec,out),_=out[1],Ja=out[2],p=out[3]),a.bezierCurveTo(d,_,ja,Ja,c,p)))},r.prototype.pointAt=function(a){return someVectorAt(this.shape,a,!1)},r.prototype.tangentAt=function(a){var s=someVectorAt(this.shape,a,!0);return normalize$5(s,s)},r}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),Arc=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new ArcShape},r.prototype.buildPath=function(a,s){var o=s.cx,u=s.cy,c=Math.max(s.r,0),p=s.startAngle,d=s.endAngle,_=s.clockwise,ja=Math.cos(p),Ja=Math.sin(p);a.moveTo(ja*c+o,Ja*c+u),a.arc(o,u,c,p,d,!_)},r}(Path);Arc.prototype.type="arc";var CompoundPath=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type="compound",a}return r.prototype._updatePathDirty=function(){for(var a=this.shape.paths,s=this.shapeChanged(),o=0;o<a.length;o++)s=s||a[o].shapeChanged();s&&this.dirtyShape()},r.prototype.beforeBrush=function(){this._updatePathDirty();for(var a=this.shape.paths||[],s=this.getGlobalScale(),o=0;o<a.length;o++)a[o].path||a[o].createPathProxy(),a[o].path.setScale(s[0],s[1],a[o].segmentIgnoreThreshold)},r.prototype.buildPath=function(a,s){for(var o=s.paths||[],u=0;u<o.length;u++)o[u].buildPath(a,o[u].shape,!0)},r.prototype.afterBrush=function(){for(var a=this.shape.paths||[],s=0;s<a.length;s++)a[s].pathUpdated()},r.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},r}(Path);const CompoundPath$1=CompoundPath;var Gradient=function(){function n(r){this.colorStops=r||[]}return n.prototype.addColorStop=function(r,a){this.colorStops.push({offset:r,color:a})},n}(),LinearGradient=function(n){__extends(r,n);function r(a,s,o,u,c,p){var d=n.call(this,c)||this;return d.x=a??0,d.y=s??0,d.x2=o??1,d.y2=u??0,d.type="linear",d.global=p||!1,d}return r}(Gradient),RadialGradient=function(n){__extends(r,n);function r(a,s,o,u,c){var p=n.call(this,u)||this;return p.x=a??.5,p.y=s??.5,p.r=o??.5,p.type="radial",p.global=c||!1,p}return r}(Gradient);const RadialGradient$1=RadialGradient;var extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function n(r,a){this._corners=[],this._axes=[],this._origin=[0,0];for(var s=0;s<4;s++)this._corners[s]=new Point;for(var s=0;s<2;s++)this._axes[s]=new Point;r&&this.fromBoundingRect(r,a)}return n.prototype.fromBoundingRect=function(r,a){var s=this._corners,o=this._axes,u=r.x,c=r.y,p=u+r.width,d=c+r.height;if(s[0].set(u,c),s[1].set(p,c),s[2].set(p,d),s[3].set(u,d),a)for(var _=0;_<4;_++)s[_].transform(a);Point.sub(o[0],s[1],s[0]),Point.sub(o[1],s[3],s[0]),o[0].normalize(),o[1].normalize();for(var _=0;_<2;_++)this._origin[_]=o[_].dot(s[0])},n.prototype.intersect=function(r,a){var s=!0,o=!a;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,r,minTv,maxTv,o,1)&&(s=!1,o)||!this._intersectCheckOneSide(r,this,minTv,maxTv,o,-1)&&(s=!1,o)||o||Point.copy(a,s?minTv:maxTv),s},n.prototype._intersectCheckOneSide=function(r,a,s,o,u,c){for(var p=!0,d=0;d<2;d++){var _=this._axes[d];if(this._getProjMinMaxOnAxis(d,r._corners,extent),this._getProjMinMaxOnAxis(d,a._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(p=!1,u)return p;var ja=Math.abs(extent2[0]-extent[1]),Ja=Math.abs(extent[0]-extent2[1]);Math.min(ja,Ja)>o.len()&&(ja<Ja?Point.scale(o,_,-ja*c):Point.scale(o,_,Ja*c))}else if(s){var ja=Math.abs(extent2[0]-extent[1]),Ja=Math.abs(extent[0]-extent2[1]);Math.min(ja,Ja)<s.len()&&(ja<Ja?Point.scale(s,_,ja*c):Point.scale(s,_,-Ja*c))}}return p},n.prototype._getProjMinMaxOnAxis=function(r,a,s){for(var o=this._axes[r],u=this._origin,c=a[0].dot(o)+u[r],p=c,d=c,_=1;_<a.length;_++){var ja=a[_].dot(o)+u[r];p=Math.min(ja,p),d=Math.max(ja,d)}s[0]=p,s[1]=d},n}();const OrientedBoundingRect$1=OrientedBoundingRect;var m=[],IncrementalDisplayable=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.notClear=!0,a.incremental=!0,a._displayables=[],a._temporaryDisplayables=[],a._cursor=0,a}return r.prototype.traverse=function(a,s){a.call(s,this)},r.prototype.useStyle=function(){this.style={}},r.prototype.getCursor=function(){return this._cursor},r.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},r.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},r.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},r.prototype.addDisplayable=function(a,s){s?this._temporaryDisplayables.push(a):this._displayables.push(a),this.markRedraw()},r.prototype.addDisplayables=function(a,s){s=s||!1;for(var o=0;o<a.length;o++)this.addDisplayable(a[o],s)},r.prototype.getDisplayables=function(){return this._displayables},r.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},r.prototype.eachPendingDisplayable=function(a){for(var s=this._cursor;s<this._displayables.length;s++)a&&a(this._displayables[s]);for(var s=0;s<this._temporaryDisplayables.length;s++)a&&a(this._temporaryDisplayables[s])},r.prototype.update=function(){this.updateTransform();for(var a=this._cursor;a<this._displayables.length;a++){var s=this._displayables[a];s.parent=this,s.update(),s.parent=null}for(var a=0;a<this._temporaryDisplayables.length;a++){var s=this._temporaryDisplayables[a];s.parent=this,s.update(),s.parent=null}},r.prototype.getBoundingRect=function(){if(!this._rect){for(var a=new BoundingRect(1/0,1/0,-1/0,-1/0),s=0;s<this._displayables.length;s++){var o=this._displayables[s],u=o.getBoundingRect().clone();o.needLocalTransform()&&u.applyTransform(o.getLocalTransform(m)),a.union(u)}this._rect=a}return this._rect},r.prototype.contain=function(a,s){var o=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(u.contain(o[0],o[1]))for(var c=0;c<this._displayables.length;c++){var p=this._displayables[c];if(p.contain(a,s))return!0}return!1},r}(Displayable$1);const IncrementalDisplayable$1=IncrementalDisplayable;var transitionStore=makeInner();function getAnimationConfig(n,r,a,s,o){var u;if(r&&r.ecModel){var c=r.ecModel.getUpdatePayload();u=c&&c.animation}var p=r&&r.isAnimationEnabled(),d=n==="update";if(p){var _=void 0,ja=void 0,Ja=void 0;s?(_=retrieve2(s.duration,200),ja=retrieve2(s.easing,"cubicOut"),Ja=0):(_=r.getShallow(d?"animationDurationUpdate":"animationDuration"),ja=r.getShallow(d?"animationEasingUpdate":"animationEasing"),Ja=r.getShallow(d?"animationDelayUpdate":"animationDelay")),u&&(u.duration!=null&&(_=u.duration),u.easing!=null&&(ja=u.easing),u.delay!=null&&(Ja=u.delay)),isFunction(Ja)&&(Ja=Ja(a,o)),isFunction(_)&&(_=_(a));var ec={duration:_||0,delay:Ja,easing:ja};return ec}else return null}function animateOrSetProps(n,r,a,s,o,u,c){var p=!1,d;isFunction(o)?(c=u,u=o,o=null):isObject$3(o)&&(u=o.cb,c=o.during,p=o.isFrom,d=o.removeOpt,o=o.dataIndex);var _=n==="leave";_||r.stopAnimation("leave");var ja=getAnimationConfig(n,s,o,_?d||{}:null,s&&s.getAnimationDelayParams?s.getAnimationDelayParams(r,o):null);if(ja&&ja.duration>0){var Ja=ja.duration,ec=ja.delay,tc=ja.easing,rc={duration:Ja,delay:ec||0,easing:tc,done:u,force:!!u||!!c,setToFinal:!_,scope:n,during:c};p?r.animateFrom(a,rc):r.animateTo(a,rc)}else r.stopAnimation(),!p&&r.attr(a),c&&c(1),u&&u()}function updateProps$1(n,r,a,s,o,u){animateOrSetProps("update",n,r,a,s,o,u)}function initProps(n,r,a,s,o,u){animateOrSetProps("enter",n,r,a,s,o,u)}function isElementRemoved(n){if(!n.__zr)return!0;for(var r=0;r<n.animators.length;r++){var a=n.animators[r];if(a.scope==="leave")return!0}return!1}function removeElement(n,r,a,s,o,u){isElementRemoved(n)||animateOrSetProps("leave",n,r,a,s,o,u)}function fadeOutDisplayable(n,r,a,s){n.removeTextContent(),n.removeTextGuideLine(),removeElement(n,{style:{opacity:0}},r,a,s)}function removeElementWithFadeOut(n,r,a){function s(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(o){o.isGroup||fadeOutDisplayable(o,r,a,s)}):fadeOutDisplayable(n,r,a,s)}function saveOldStyle(n){transitionStore(n).oldStyle=n.style}function getOldStyle(n){return transitionStore(n).oldStyle}var mathMax$7=Math.max,mathMin$7=Math.min,_customShapeMap={};function extendShape(n){return Path.extend(n)}var extendPathFromString=extendFromString;function extendPath(n,r){return extendPathFromString(n,r)}function registerShape(n,r){_customShapeMap[n]=r}function getShapeClass(n){if(_customShapeMap.hasOwnProperty(n))return _customShapeMap[n]}function makePath$1(n,r,a,s){var o=createFromString(n,r);return a&&(s==="center"&&(a=centerGraphic(a,o.getBoundingRect())),resizePath(o,a)),o}function makeImage(n,r,a){var s=new ZRImage({style:{image:n,x:r.x,y:r.y,width:r.width,height:r.height},onload:function(o){if(a==="center"){var u={width:o.width,height:o.height};s.setStyle(centerGraphic(r,u))}}});return s}function centerGraphic(n,r){var a=r.width/r.height,s=n.height*a,o;s<=n.width?o=n.height:(s=n.width,o=s/a);var u=n.x+n.width/2,c=n.y+n.height/2;return{x:u-s/2,y:c-o/2,width:s,height:o}}var mergePath=mergePath$1;function resizePath(n,r){if(n.applyTransform){var a=n.getBoundingRect(),s=a.calculateTransform(r);n.applyTransform(s)}}function subPixelOptimizeLine(n,r){return subPixelOptimizeLine$1(n,n,{lineWidth:r}),n}function subPixelOptimizeRect(n){return subPixelOptimizeRect$1(n.shape,n.shape,n.style),n}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(n,r){for(var a=identity$1([]);n&&n!==r;)mul(a,n.getLocalTransform(),a),n=n.parent;return a}function applyTransform(n,r,a){return r&&!isArrayLike(r)&&(r=Transformable.getLocalTransform(r)),a&&(r=invert([],r)),applyTransform$1([],n,r)}function transformDirection(n,r,a){var s=r[4]===0||r[5]===0||r[0]===0?1:Math.abs(2*r[4]/r[0]),o=r[4]===0||r[5]===0||r[2]===0?1:Math.abs(2*r[4]/r[2]),u=[n==="left"?-s:n==="right"?s:0,n==="top"?-o:n==="bottom"?o:0];return u=applyTransform(u,r,a),Math.abs(u[0])>Math.abs(u[1])?u[0]>0?"right":"left":u[1]>0?"bottom":"top"}function isNotGroup(n){return!n.isGroup}function isPath$1(n){return n.shape!=null}function groupTransition(n,r,a){if(!n||!r)return;function s(c){var p={};return c.traverse(function(d){isNotGroup(d)&&d.anid&&(p[d.anid]=d)}),p}function o(c){var p={x:c.x,y:c.y,rotation:c.rotation};return isPath$1(c)&&(p.shape=extend$2({},c.shape)),p}var u=s(n);r.traverse(function(c){if(isNotGroup(c)&&c.anid){var p=u[c.anid];if(p){var d=o(c);c.attr(o(p)),updateProps$1(c,d,a,getECData(c).dataIndex)}}})}function clipPointsByRect(n,r){return map$1(n,function(a){var s=a[0];s=mathMax$7(s,r.x),s=mathMin$7(s,r.x+r.width);var o=a[1];return o=mathMax$7(o,r.y),o=mathMin$7(o,r.y+r.height),[s,o]})}function clipRectByRect(n,r){var a=mathMax$7(n.x,r.x),s=mathMin$7(n.x+n.width,r.x+r.width),o=mathMax$7(n.y,r.y),u=mathMin$7(n.y+n.height,r.y+r.height);if(s>=a&&u>=o)return{x:a,y:o,width:s-a,height:u-o}}function createIcon(n,r,a){var s=extend$2({rectHover:!0},r),o=s.style={strokeNoScale:!0};if(a=a||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(o.image=n.slice(8),defaults(o,a),new ZRImage(s)):makePath$1(n.replace("path://",""),s,a,"center")}function linePolygonIntersect(n,r,a,s,o){for(var u=0,c=o[o.length-1];u<o.length;u++){var p=o[u];if(lineLineIntersect$1(n,r,a,s,p[0],p[1],c[0],c[1]))return!0;c=p}}function lineLineIntersect$1(n,r,a,s,o,u,c,p){var d=a-n,_=s-r,ja=c-o,Ja=p-u,ec=crossProduct2d$1(ja,Ja,d,_);if(nearZero(ec))return!1;var tc=n-o,rc=r-u,nc=crossProduct2d$1(tc,rc,d,_)/ec;if(nc<0||nc>1)return!1;var ic=crossProduct2d$1(tc,rc,ja,Ja)/ec;return!(ic<0||ic>1)}function crossProduct2d$1(n,r,a,s){return n*s-a*r}function nearZero(n){return n<=1e-6&&n>=-1e-6}function setTooltipConfig(n){var r=n.itemTooltipOption,a=n.componentModel,s=n.itemName,o=isString(r)?{formatter:r}:r,u=a.mainType,c=a.componentIndex,p={componentType:u,name:s,$vars:["name"]};p[u+"Index"]=c;var d=n.formatterParamsExtra;d&&each$f(keys(d),function(ja){hasOwn(p,ja)||(p[ja]=d[ja],p.$vars.push(ja))});var _=getECData(n.el);_.componentMainType=u,_.componentIndex=c,_.tooltipConfig={name:s,option:defaults({content:s,formatterParams:p},o)}}function traverseElement(n,r){var a;n.isGroup&&(a=r(n)),a||n.traverse(r)}function traverseElements(n,r){if(n)if(isArray$1(n))for(var a=0;a<n.length;a++)traverseElement(n[a],r);else traverseElement(n,r)}registerShape("circle",Circle);registerShape("ellipse",Ellipse$1);registerShape("sector",Sector);registerShape("ring",Ring$1);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$2);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath:CompoundPath$1,Ellipse:Ellipse$1,Group:Group$3,Image:ZRImage,IncrementalDisplayable:IncrementalDisplayable$1,Line:Line$2,LinearGradient,OrientedBoundingRect:OrientedBoundingRect$1,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient:RadialGradient$1,Rect:Rect$2,Ring:Ring$1,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath:makePath$1,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(n,r){for(var a=0;a<SPECIAL_STATES.length;a++){var s=SPECIAL_STATES[a],o=r[s],u=n.ensureState(s);u.style=u.style||{},u.style.text=o}var c=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:r.normal}),n.useStates(c,!0)}function getLabelText(n,r,a){var s=n.labelFetcher,o=n.labelDataIndex,u=n.labelDimIndex,c=r.normal,p;s&&(p=s.getFormattedLabel(o,"normal",null,u,c&&c.get("formatter"),a!=null?{interpolatedValue:a}:null)),p==null&&(p=isFunction(n.defaultText)?n.defaultText(o,n,a):n.defaultText);for(var d={normal:p},_=0;_<SPECIAL_STATES.length;_++){var ja=SPECIAL_STATES[_],Ja=r[ja];d[ja]=retrieve2(s?s.getFormattedLabel(o,ja,null,u,Ja&&Ja.get("formatter")):null,p)}return d}function setLabelStyle(n,r,a,s){a=a||EMPTY_OBJ;for(var o=n instanceof ZRText,u=!1,c=0;c<DISPLAY_STATES.length;c++){var p=r[DISPLAY_STATES[c]];if(p&&p.getShallow("show")){u=!0;break}}var d=o?n:n.getTextContent();if(u){o||(d||(d=new ZRText,n.setTextContent(d)),n.stateProxy&&(d.stateProxy=n.stateProxy));var _=getLabelText(a,r),ja=r.normal,Ja=!!ja.getShallow("show"),ec=createTextStyle(ja,s&&s.normal,a,!1,!o);ec.text=_.normal,o||n.setTextConfig(createTextConfig(ja,a,!1));for(var c=0;c<SPECIAL_STATES.length;c++){var tc=SPECIAL_STATES[c],p=r[tc];if(p){var rc=d.ensureState(tc),nc=!!retrieve2(p.getShallow("show"),Ja);if(nc!==Ja&&(rc.ignore=!nc),rc.style=createTextStyle(p,s&&s[tc],a,!0,!o),rc.style.text=_[tc],!o){var ic=n.ensureState(tc);ic.textConfig=createTextConfig(p,a,!0)}}}d.silent=!!ja.getShallow("silent"),d.style.x!=null&&(ec.x=d.style.x),d.style.y!=null&&(ec.y=d.style.y),d.ignore=!Ja,d.useStyle(ec),d.dirty(),a.enableTextSetter&&(labelInner(d).setLabelText=function(uc){var eh=getLabelText(a,r,uc);setLabelText(d,eh)})}else d&&(d.ignore=!0);n.dirty()}function getLabelStatesModels(n,r){r=r||"label";for(var a={normal:n.getModel(r)},s=0;s<SPECIAL_STATES.length;s++){var o=SPECIAL_STATES[s];a[o]=n.getModel([o,r])}return a}function createTextStyle(n,r,a,s,o){var u={};return setTextStyleCommon(u,n,a,s,o),r&&extend$2(u,r),u}function createTextConfig(n,r,a){r=r||{};var s={},o,u=n.getShallow("rotate"),c=retrieve2(n.getShallow("distance"),a?null:5),p=n.getShallow("offset");return o=n.getShallow("position")||(a?null:"inside"),o==="outside"&&(o=r.defaultOutsidePosition||"top"),o!=null&&(s.position=o),p!=null&&(s.offset=p),u!=null&&(u*=Math.PI/180,s.rotation=u),c!=null&&(s.distance=c),s.outsideFill=n.get("color")==="inherit"?r.inheritColor||null:"auto",s}function setTextStyleCommon(n,r,a,s,o){a=a||EMPTY_OBJ;var u=r.ecModel,c=u&&u.option.textStyle,p=getRichItemNames(r),d;if(p){d={};for(var _ in p)if(p.hasOwnProperty(_)){var ja=r.getModel(["rich",_]);setTokenTextStyle(d[_]={},ja,c,a,s,o,!1,!0)}}d&&(n.rich=d);var Ja=r.get("overflow");Ja&&(n.overflow=Ja);var ec=r.get("minMargin");ec!=null&&(n.margin=ec),setTokenTextStyle(n,r,c,a,s,o,!0,!1)}function getRichItemNames(n){for(var r;n&&n!==n.ecModel;){var a=(n.option||EMPTY_OBJ).rich;if(a){r=r||{};for(var s=keys(a),o=0;o<s.length;o++){var u=s[o];r[u]=1}}n=n.parentModel}return r}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(n,r,a,s,o,u,c,p){a=!o&&a||EMPTY_OBJ;var d=s&&s.inheritColor,_=r.getShallow("color"),ja=r.getShallow("textBorderColor"),Ja=retrieve2(r.getShallow("opacity"),a.opacity);(_==="inherit"||_==="auto")&&(d?_=d:_=null),(ja==="inherit"||ja==="auto")&&(d?ja=d:ja=null),u||(_=_||a.color,ja=ja||a.textBorderColor),_!=null&&(n.fill=_),ja!=null&&(n.stroke=ja);var ec=retrieve2(r.getShallow("textBorderWidth"),a.textBorderWidth);ec!=null&&(n.lineWidth=ec);var tc=retrieve2(r.getShallow("textBorderType"),a.textBorderType);tc!=null&&(n.lineDash=tc);var rc=retrieve2(r.getShallow("textBorderDashOffset"),a.textBorderDashOffset);rc!=null&&(n.lineDashOffset=rc),!o&&Ja==null&&!p&&(Ja=s&&s.defaultOpacity),Ja!=null&&(n.opacity=Ja),!o&&!u&&n.fill==null&&s.inheritColor&&(n.fill=s.inheritColor);for(var nc=0;nc<TEXT_PROPS_WITH_GLOBAL.length;nc++){var ic=TEXT_PROPS_WITH_GLOBAL[nc],uc=retrieve2(r.getShallow(ic),a[ic]);uc!=null&&(n[ic]=uc)}for(var nc=0;nc<TEXT_PROPS_SELF.length;nc++){var ic=TEXT_PROPS_SELF[nc],uc=r.getShallow(ic);uc!=null&&(n[ic]=uc)}if(n.verticalAlign==null){var eh=r.getShallow("baseline");eh!=null&&(n.verticalAlign=eh)}if(!c||!s.disableBox){for(var nc=0;nc<TEXT_PROPS_BOX.length;nc++){var ic=TEXT_PROPS_BOX[nc],uc=r.getShallow(ic);uc!=null&&(n[ic]=uc)}var rh=r.getShallow("borderType");rh!=null&&(n.borderDash=rh),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&d&&(n.backgroundColor=d),(n.borderColor==="auto"||n.borderColor==="inherit")&&d&&(n.borderColor=d)}}function getFont(n,r){var a=r&&r.getModel("textStyle");return trim$1([n.fontStyle||a&&a.getShallow("fontStyle")||"",n.fontWeight||a&&a.getShallow("fontWeight")||"",(n.fontSize||a&&a.getShallow("fontSize")||12)+"px",n.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(n,r,a,s){if(n){var o=labelInner(n);o.prevValue=o.value,o.value=a;var u=r.normal;o.valueAnimation=u.get("valueAnimation"),o.valueAnimation&&(o.precision=u.get("precision"),o.defaultInterpolatedText=s,o.statesModels=r)}}function animateLabelValue(n,r,a,s,o){var u=labelInner(n);if(!u.valueAnimation||u.prevValue===u.value)return;var c=u.defaultInterpolatedText,p=retrieve2(u.interpolatedValue,u.prevValue),d=u.value;function _(ja){var Ja=interpolateRawValues(a,u.precision,p,d,ja);u.interpolatedValue=ja===1?null:Ja;var ec=getLabelText({labelDataIndex:r,labelFetcher:o,defaultText:c?c(Ja):Ja+""},u.statesModels,Ja);setLabelText(n,ec)}n.percent=0,(u.prevValue==null?initProps:updateProps$1)(n,{percent:1},s,r,null,_)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function n(){}return n.prototype.getTextColor=function(r){var a=this.ecModel;return this.getShallow("color")||(!r&&a?a.get(PATH_COLOR):null)},n.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(r){for(var a={text:r,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},s=0;s<textStyleParams.length;s++)a[textStyleParams[s]]=this.getShallow(textStyleParams[s]);return tmpText.useStyle(a),tmpText.update(),tmpText.getBoundingRect()},n}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function n(){}return n.prototype.getLineStyle=function(r){return getLineStyle(this,r)},n}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function n(){}return n.prototype.getItemStyle=function(r,a){return getItemStyle(this,r,a)},n}(),Model=function(){function n(r,a,s){this.parentModel=a,this.ecModel=s,this.option=r}return n.prototype.init=function(r,a,s){},n.prototype.mergeOption=function(r,a){merge(this.option,r,!0)},n.prototype.get=function(r,a){return r==null?this.option:this._doGet(this.parsePath(r),!a&&this.parentModel)},n.prototype.getShallow=function(r,a){var s=this.option,o=s==null?s:s[r];if(o==null&&!a){var u=this.parentModel;u&&(o=u.getShallow(r))}return o},n.prototype.getModel=function(r,a){var s=r!=null,o=s?this.parsePath(r):null,u=s?this._doGet(o):this.option;return a=a||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(o)),new n(u,a,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var r=this.constructor;return new r(clone$4(this.option))},n.prototype.parsePath=function(r){return typeof r=="string"?r.split("."):r},n.prototype.resolveParentPath=function(r){return r},n.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(r,a){var s=this.option;if(!r)return s;for(var o=0;o<r.length&&!(r[o]&&(s=s&&typeof s=="object"?s[r[o]]:null,s==null));o++);return s==null&&a&&(s=a._doGet(this.resolveParentPath(r),a.parentModel)),s},n}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base$1=Math.round(Math.random()*10);function getUID(n){return[n||"",base$1++].join("_")}function enableSubTypeDefaulter(n){var r={};n.registerSubTypeDefaulter=function(a,s){var o=parseClassType(a);r[o.main]=s},n.determineSubType=function(a,s){var o=s.type;if(!o){var u=parseClassType(a).main;n.hasSubTypes(a)&&r[u]&&(o=r[u](s))}return o}}function enableTopologicalTravel(n,r){n.topologicalTravel=function(u,c,p,d){if(!u.length)return;var _=a(c),ja=_.graph,Ja=_.noEntryList,ec={};for(each$f(u,function(eh){ec[eh]=!0});Ja.length;){var tc=Ja.pop(),rc=ja[tc],nc=!!ec[tc];nc&&(p.call(d,tc,rc.originalDeps.slice()),delete ec[tc]),each$f(rc.successor,nc?uc:ic)}each$f(ec,function(){var eh="";throw new Error(eh)});function ic(eh){ja[eh].entryCount--,ja[eh].entryCount===0&&Ja.push(eh)}function uc(eh){ec[eh]=!0,ic(eh)}};function a(u){var c={},p=[];return each$f(u,function(d){var _=s(c,d),ja=_.originalDeps=r(d),Ja=o(ja,u);_.entryCount=Ja.length,_.entryCount===0&&p.push(d),each$f(Ja,function(ec){indexOf(_.predecessor,ec)<0&&_.predecessor.push(ec);var tc=s(c,ec);indexOf(tc.successor,ec)<0&&tc.successor.push(d)})}),{graph:c,noEntryList:p}}function s(u,c){return u[c]||(u[c]={predecessor:[],successor:[]}),u[c]}function o(u,c){var p=[];return each$f(u,function(d){indexOf(c,d)>=0&&p.push(d)}),p}}function inheritDefaultOption(n,r){return merge(merge({},n,!0),r,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return n.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(n,r){n=n.toUpperCase(),localeModels[n]=new Model(r),localeStorage[n]=r}function createLocaleObject(n){if(isString(n)){var r=localeStorage[n.toUpperCase()]||{};return n===LOCALE_ZH||n===LOCALE_EN?clone$4(r):merge(clone$4(r),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(n){return localeModels[n]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(n,r){return n+="","0000".substr(0,r-n.length)+n}function getPrimaryTimeUnit(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function isPrimaryTimeUnit(n){return n===getPrimaryTimeUnit(n)}function getDefaultFormatPrecisionOfInterval(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format(n,r,a,s){var o=parseDate(n),u=o[fullYearGetterName(a)](),c=o[monthGetterName(a)]()+1,p=Math.floor((c-1)/3)+1,d=o[dateGetterName(a)](),_=o["get"+(a?"UTC":"")+"Day"](),ja=o[hoursGetterName(a)](),Ja=(ja-1)%12+1,ec=o[minutesGetterName(a)](),tc=o[secondsGetterName(a)](),rc=o[millisecondsGetterName(a)](),nc=s instanceof Model?s:getLocaleModel(s||SYSTEM_LANG)||getDefaultLocaleModel(),ic=nc.getModel("time"),uc=ic.get("month"),eh=ic.get("monthAbbr"),rh=ic.get("dayOfWeek"),ah=ic.get("dayOfWeekAbbr");return(r||"").replace(/{yyyy}/g,u+"").replace(/{yy}/g,pad(u%100+"",2)).replace(/{Q}/g,p+"").replace(/{MMMM}/g,uc[c-1]).replace(/{MMM}/g,eh[c-1]).replace(/{MM}/g,pad(c,2)).replace(/{M}/g,c+"").replace(/{dd}/g,pad(d,2)).replace(/{d}/g,d+"").replace(/{eeee}/g,rh[_]).replace(/{ee}/g,ah[_]).replace(/{e}/g,_+"").replace(/{HH}/g,pad(ja,2)).replace(/{H}/g,ja+"").replace(/{hh}/g,pad(Ja+"",2)).replace(/{h}/g,Ja+"").replace(/{mm}/g,pad(ec,2)).replace(/{m}/g,ec+"").replace(/{ss}/g,pad(tc,2)).replace(/{s}/g,tc+"").replace(/{SSS}/g,pad(rc,3)).replace(/{S}/g,rc+"")}function leveledFormat(n,r,a,s,o){var u=null;if(isString(a))u=a;else if(isFunction(a))u=a(n.value,r,{level:n.level});else{var c=extend$2({},defaultLeveledFormatter);if(n.level>0)for(var p=0;p<primaryTimeUnits.length;++p)c[primaryTimeUnits[p]]="{primary|"+c[primaryTimeUnits[p]]+"}";var d=a?a.inherit===!1?a:defaults(a,c):c,_=getUnitFromValue(n.value,o);if(d[_])u=d[_];else if(d.inherit){for(var ja=timeUnits.indexOf(_),p=ja-1;p>=0;--p)if(d[_]){u=d[_];break}u=u||c.none}if(isArray$1(u)){var Ja=n.level==null?0:n.level>=0?n.level:u.length+n.level;Ja=Math.min(Ja,u.length-1),u=u[Ja]}}return format(new Date(n.value),u,o,s)}function getUnitFromValue(n,r){var a=parseDate(n),s=a[monthGetterName(r)]()+1,o=a[dateGetterName(r)](),u=a[hoursGetterName(r)](),c=a[minutesGetterName(r)](),p=a[secondsGetterName(r)](),d=a[millisecondsGetterName(r)](),_=d===0,ja=_&&p===0,Ja=ja&&c===0,ec=Ja&&u===0,tc=ec&&o===1,rc=tc&&s===1;return rc?"year":tc?"month":ec?"day":Ja?"hour":ja?"minute":_?"second":"millisecond"}function getUnitValue(n,r,a){var s=isNumber(n)?parseDate(n):n;switch(r=r||getUnitFromValue(n,a),r){case"year":return s[fullYearGetterName(a)]();case"half-year":return s[monthGetterName(a)]()>=6?1:0;case"quarter":return Math.floor((s[monthGetterName(a)]()+1)/4);case"month":return s[monthGetterName(a)]();case"day":return s[dateGetterName(a)]();case"half-day":return s[hoursGetterName(a)]()/24;case"hour":return s[hoursGetterName(a)]();case"minute":return s[minutesGetterName(a)]();case"second":return s[secondsGetterName(a)]();case"millisecond":return s[millisecondsGetterName(a)]()}}function fullYearGetterName(n){return n?"getUTCFullYear":"getFullYear"}function monthGetterName(n){return n?"getUTCMonth":"getMonth"}function dateGetterName(n){return n?"getUTCDate":"getDate"}function hoursGetterName(n){return n?"getUTCHours":"getHours"}function minutesGetterName(n){return n?"getUTCMinutes":"getMinutes"}function secondsGetterName(n){return n?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(n){return n?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(n){return n?"setUTCFullYear":"setFullYear"}function monthSetterName(n){return n?"setUTCMonth":"setMonth"}function dateSetterName(n){return n?"setUTCDate":"setDate"}function hoursSetterName(n){return n?"setUTCHours":"setHours"}function minutesSetterName(n){return n?"setUTCMinutes":"setMinutes"}function secondsSetterName(n){return n?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(n){return n?"setUTCMilliseconds":"setMilliseconds"}function addCommas(n){if(!isNumeric(n))return isString(n)?n:"-";var r=(n+"").split(".");return r[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(r.length>1?"."+r[1]:"")}function toCamelCase(n,r){return n=(n||"").toLowerCase().replace(/-(.)/g,function(a,s){return s.toUpperCase()}),r&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(n,r,a){var s="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function o(ja){return ja&&trim$1(ja)?ja:"-"}function u(ja){return!!(ja!=null&&!isNaN(ja)&&isFinite(ja))}var c=r==="time",p=n instanceof Date;if(c||p){var d=c?parseDate(n):n;if(isNaN(+d)){if(p)return"-"}else return format(d,s,a)}if(r==="ordinal")return isStringSafe(n)?o(n):isNumber(n)&&u(n)?n+"":"-";var _=numericToNumber(n);return u(_)?addCommas(_):isStringSafe(n)?o(n):typeof n=="boolean"?n+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(n,r){return"{"+n+(r??"")+"}"};function formatTpl(n,r,a){isArray$1(r)||(r=[r]);var s=r.length;if(!s)return"";for(var o=r[0].$vars||[],u=0;u<o.length;u++){var c=TPL_VAR_ALIAS[u];n=n.replace(wrapVar(c),wrapVar(c,0))}for(var p=0;p<s;p++)for(var d=0;d<o.length;d++){var _=r[p][o[d]];n=n.replace(wrapVar(TPL_VAR_ALIAS[d],p),a?encodeHTML(_):_)}return n}function formatTplSimple(n,r,a){return each$f(r,function(s,o){n=n.replace("{"+o+"}",s)}),n}function getTooltipMarker(n,r){var a=isString(n)?{color:n,extraCssText:r}:n||{},s=a.color,o=a.type;r=a.extraCssText;var u=a.renderMode||"html";if(!s)return"";if(u==="html")return o==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(s)+";"+(r||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(s)+";"+(r||"")+'"></span>';var c=a.markerId||"markerX";return{renderMode:u,content:"{"+c+"|}  ",style:o==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:s}:{width:10,height:10,borderRadius:5,backgroundColor:s}}}function formatTime(n,r,a){(n==="week"||n==="month"||n==="quarter"||n==="half-year"||n==="year")&&(n=`MM-dd
yyyy`);var s=parseDate(r),o="get",u=s[o+"FullYear"](),c=s[o+"Month"]()+1,p=s[o+"Date"](),d=s[o+"Hours"](),_=s[o+"Minutes"](),ja=s[o+"Seconds"](),Ja=s[o+"Milliseconds"]();return n=n.replace("MM",pad(c,2)).replace("M",c).replace("yyyy",u).replace("yy",pad(u%100+"",2)).replace("dd",pad(p,2)).replace("d",p).replace("hh",pad(d,2)).replace("h",d).replace("mm",pad(_,2)).replace("m",_).replace("ss",pad(ja,2)).replace("s",ja).replace("SSS",pad(Ja,3)),n}function convertToColorString(n,r){return r=r||"transparent",isString(n)?n:isObject$3(n)&&n.colorStops&&(n.colorStops[0]||{}).color||r}function windowOpen(n,r){if(r==="_blank"||r==="blank"){var a=window.open();a.opener=null,a.location.href=n}else window.open(n,r)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(n,r,a,s,o){var u=0,c=0;s==null&&(s=1/0),o==null&&(o=1/0);var p=0;r.eachChild(function(d,_){var ja=d.getBoundingRect(),Ja=r.childAt(_+1),ec=Ja&&Ja.getBoundingRect(),tc,rc;if(n==="horizontal"){var nc=ja.width+(ec?-ec.x+ja.x:0);tc=u+nc,tc>s||d.newline?(u=0,tc=nc,c+=p+a,p=ja.height):p=Math.max(p,ja.height)}else{var ic=ja.height+(ec?-ec.y+ja.y:0);rc=c+ic,rc>o||d.newline?(u+=p+a,c=0,rc=ic,p=ja.width):p=Math.max(p,ja.width)}d.newline||(d.x=u,d.y=c,d.markRedraw(),n==="horizontal"?u=tc+a:c=rc+a)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(n,r,a){var s=r.width,o=r.height,u=parsePercent(n.left,s),c=parsePercent(n.top,o),p=parsePercent(n.right,s),d=parsePercent(n.bottom,o);return(isNaN(u)||isNaN(parseFloat(n.left)))&&(u=0),(isNaN(p)||isNaN(parseFloat(n.right)))&&(p=s),(isNaN(c)||isNaN(parseFloat(n.top)))&&(c=0),(isNaN(d)||isNaN(parseFloat(n.bottom)))&&(d=o),a=normalizeCssArray(a||0),{width:Math.max(p-u-a[1]-a[3],0),height:Math.max(d-c-a[0]-a[2],0)}}function getLayoutRect(n,r,a){a=normalizeCssArray(a||0);var s=r.width,o=r.height,u=parsePercent(n.left,s),c=parsePercent(n.top,o),p=parsePercent(n.right,s),d=parsePercent(n.bottom,o),_=parsePercent(n.width,s),ja=parsePercent(n.height,o),Ja=a[2]+a[0],ec=a[1]+a[3],tc=n.aspect;switch(isNaN(_)&&(_=s-p-ec-u),isNaN(ja)&&(ja=o-d-Ja-c),tc!=null&&(isNaN(_)&&isNaN(ja)&&(tc>s/o?_=s*.8:ja=o*.8),isNaN(_)&&(_=tc*ja),isNaN(ja)&&(ja=_/tc)),isNaN(u)&&(u=s-p-_-ec),isNaN(c)&&(c=o-d-ja-Ja),n.left||n.right){case"center":u=s/2-_/2-a[3];break;case"right":u=s-_-ec;break}switch(n.top||n.bottom){case"middle":case"center":c=o/2-ja/2-a[0];break;case"bottom":c=o-ja-Ja;break}u=u||0,c=c||0,isNaN(_)&&(_=s-ec-u-(p||0)),isNaN(ja)&&(ja=o-Ja-c-(d||0));var rc=new BoundingRect(u+a[3],c+a[0],_,ja);return rc.margin=a,rc}function positionElement(n,r,a,s,o,u){var c=!o||!o.hv||o.hv[0],p=!o||!o.hv||o.hv[1],d=o&&o.boundingMode||"all";if(u=u||n,u.x=n.x,u.y=n.y,!c&&!p)return!1;var _;if(d==="raw")_=n.type==="group"?new BoundingRect(0,0,+r.width||0,+r.height||0):n.getBoundingRect();else if(_=n.getBoundingRect(),n.needLocalTransform()){var ja=n.getLocalTransform();_=_.clone(),_.applyTransform(ja)}var Ja=getLayoutRect(defaults({width:_.width,height:_.height},r),a,s),ec=c?Ja.x-_.x:0,tc=p?Ja.y-_.y:0;return d==="raw"?(u.x=ec,u.y=tc):(u.x+=ec,u.y+=tc),u===n&&n.markRedraw(),!0}function sizeCalculable(n,r){return n[HV_NAMES[r][0]]!=null||n[HV_NAMES[r][1]]!=null&&n[HV_NAMES[r][2]]!=null}function fetchLayoutMode(n){var r=n.layoutMode||n.constructor.layoutMode;return isObject$3(r)?r:r?{type:r}:null}function mergeLayoutParam(n,r,a){var s=a&&a.ignoreSize;!isArray$1(s)&&(s=[s,s]);var o=c(HV_NAMES[0],0),u=c(HV_NAMES[1],1);_(HV_NAMES[0],n,o),_(HV_NAMES[1],n,u);function c(ja,Ja){var ec={},tc=0,rc={},nc=0,ic=2;if(each$e(ja,function(rh){rc[rh]=n[rh]}),each$e(ja,function(rh){p(r,rh)&&(ec[rh]=rc[rh]=r[rh]),d(ec,rh)&&tc++,d(rc,rh)&&nc++}),s[Ja])return d(r,ja[1])?rc[ja[2]]=null:d(r,ja[2])&&(rc[ja[1]]=null),rc;if(nc===ic||!tc)return rc;if(tc>=ic)return ec;for(var uc=0;uc<ja.length;uc++){var eh=ja[uc];if(!p(ec,eh)&&p(n,eh)){ec[eh]=n[eh];break}}return ec}function p(ja,Ja){return ja.hasOwnProperty(Ja)}function d(ja,Ja){return ja[Ja]!=null&&ja[Ja]!=="auto"}function _(ja,Ja,ec){each$e(ja,function(tc){Ja[tc]=ec[tc]})}}function getLayoutParams(n){return copyLayoutParams({},n)}function copyLayoutParams(n,r){return r&&n&&each$e(LOCATION_PARAMS,function(a){r.hasOwnProperty(a)&&(n[a]=r[a])}),n}var inner$l=makeInner(),ComponentModel=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this,a,s,o)||this;return u.uid=getUID("ec_cpt_model"),u}return r.prototype.init=function(a,s,o){this.mergeDefaultAndTheme(a,o)},r.prototype.mergeDefaultAndTheme=function(a,s){var o=fetchLayoutMode(this),u=o?getLayoutParams(a):{},c=s.getTheme();merge(a,c.get(this.mainType)),merge(a,this.getDefaultOption()),o&&mergeLayoutParam(a,u,o)},r.prototype.mergeOption=function(a,s){merge(this.option,a,!0);var o=fetchLayoutMode(this);o&&mergeLayoutParam(this.option,a,o)},r.prototype.optionUpdated=function(a,s){},r.prototype.getDefaultOption=function(){var a=this.constructor;if(!isExtendedClass(a))return a.defaultOption;var s=inner$l(this);if(!s.defaultOption){for(var o=[],u=a;u;){var c=u.prototype.defaultOption;c&&o.push(c),u=u.superClass}for(var p={},d=o.length-1;d>=0;d--)p=merge(p,o[d],!0);s.defaultOption=p}return s.defaultOption},r.prototype.getReferringComponents=function(a,s){var o=a+"Index",u=a+"Id";return queryReferringComponents(this.ecModel,a,{index:this.get(o,!0),id:this.get(u,!0)},s)},r.prototype.getBoxLayoutParams=function(){var a=this;return{left:a.get("left"),top:a.get("top"),right:a.get("right"),bottom:a.get("bottom"),width:a.get("width"),height:a.get("height")}},r.prototype.getZLevelKey=function(){return""},r.prototype.setZLevel=function(a){this.option.zlevel=a},r.protoInitialize=function(){var a=r.prototype;a.type="component",a.id="",a.name="",a.mainType="",a.subType="",a.componentIndex=0}(),r}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(n){var r=[];return each$f(ComponentModel.getClassesByMainType(n),function(a){r=r.concat(a.dependencies||a.prototype.dependencies||[])}),r=map$1(r,function(a){return parseClassType(a).main}),n!=="dataset"&&indexOf(r,"dataset")<=0&&r.unshift("dataset"),r}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(n){innerGlobalModel(n).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(n,r,a){var s={},o=querySeriesUpstreamDatasetModel(r);if(!o||!n)return s;var u=[],c=[],p=r.ecModel,d=innerGlobalModel(p).datasetMap,_=o.uid+"_"+a.seriesLayoutBy,ja,Ja;n=n.slice(),each$f(n,function(nc,ic){var uc=isObject$3(nc)?nc:n[ic]={name:nc};uc.type==="ordinal"&&ja==null&&(ja=ic,Ja=rc(uc)),s[uc.name]=[]});var ec=d.get(_)||d.set(_,{categoryWayDim:Ja,valueWayDim:0});each$f(n,function(nc,ic){var uc=nc.name,eh=rc(nc);if(ja==null){var rh=ec.valueWayDim;tc(s[uc],rh,eh),tc(c,rh,eh),ec.valueWayDim+=eh}else if(ja===ic)tc(s[uc],0,eh),tc(u,0,eh);else{var rh=ec.categoryWayDim;tc(s[uc],rh,eh),tc(c,rh,eh),ec.categoryWayDim+=eh}});function tc(nc,ic,uc){for(var eh=0;eh<uc;eh++)nc.push(ic+eh)}function rc(nc){var ic=nc.dimsDef;return ic?ic.length:1}return u.length&&(s.itemName=u),c.length&&(s.seriesName=c),s}function makeSeriesEncodeForNameBased(n,r,a){var s={},o=querySeriesUpstreamDatasetModel(n);if(!o)return s;var u=r.sourceFormat,c=r.dimensionsDefine,p;(u===SOURCE_FORMAT_OBJECT_ROWS||u===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(c,function(ja,Ja){(isObject$3(ja)?ja.name:ja)==="name"&&(p=Ja)});var d=function(){for(var ja={},Ja={},ec=[],tc=0,rc=Math.min(5,a);tc<rc;tc++){var nc=doGuessOrdinal(r.data,u,r.seriesLayoutBy,c,r.startIndex,tc);ec.push(nc);var ic=nc===BE_ORDINAL.Not;if(ic&&ja.v==null&&tc!==p&&(ja.v=tc),(ja.n==null||ja.n===ja.v||!ic&&ec[ja.n]===BE_ORDINAL.Not)&&(ja.n=tc),uc(ja)&&ec[ja.n]!==BE_ORDINAL.Not)return ja;ic||(nc===BE_ORDINAL.Might&&Ja.v==null&&tc!==p&&(Ja.v=tc),(Ja.n==null||Ja.n===Ja.v)&&(Ja.n=tc))}function uc(eh){return eh.v!=null&&eh.n!=null}return uc(ja)?ja:uc(Ja)?Ja:null}();if(d){s.value=[d.v];var _=p??d.n;s.itemName=[_],s.seriesName=[_]}return s}function querySeriesUpstreamDatasetModel(n){var r=n.get("data",!0);if(!r)return queryReferringComponents(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:queryReferringComponents(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(n,r){return doGuessOrdinal(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,r)}function doGuessOrdinal(n,r,a,s,o,u){var c,p=5;if(isTypedArray(n))return BE_ORDINAL.Not;var d,_;if(s){var ja=s[u];isObject$3(ja)?(d=ja.name,_=ja.type):isString(ja)&&(d=ja)}if(_!=null)return _==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(r===SOURCE_FORMAT_ARRAY_ROWS){var Ja=n;if(a===SERIES_LAYOUT_BY_ROW){for(var ec=Ja[u],tc=0;tc<(ec||[]).length&&tc<p;tc++)if((c=ah(ec[o+tc]))!=null)return c}else for(var tc=0;tc<Ja.length&&tc<p;tc++){var rc=Ja[o+tc];if(rc&&(c=ah(rc[u]))!=null)return c}}else if(r===SOURCE_FORMAT_OBJECT_ROWS){var nc=n;if(!d)return BE_ORDINAL.Not;for(var tc=0;tc<nc.length&&tc<p;tc++){var ic=nc[tc];if(ic&&(c=ah(ic[d]))!=null)return c}}else if(r===SOURCE_FORMAT_KEYED_COLUMNS){var uc=n;if(!d)return BE_ORDINAL.Not;var ec=uc[d];if(!ec||isTypedArray(ec))return BE_ORDINAL.Not;for(var tc=0;tc<ec.length&&tc<p;tc++)if((c=ah(ec[tc]))!=null)return c}else if(r===SOURCE_FORMAT_ORIGINAL)for(var eh=n,tc=0;tc<eh.length&&tc<p;tc++){var ic=eh[tc],rh=getDataItemValue(ic);if(!isArray$1(rh))return BE_ORDINAL.Not;if((c=ah(rh[u]))!=null)return c}function ah(ih){var oh=isString(ih);if(ih!=null&&isFinite(ih)&&ih!=="")return oh?BE_ORDINAL.Might:BE_ORDINAL.Not;if(oh&&ih!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(n,r){assert(internalOptionCreatorMap.get(n)==null&&r),internalOptionCreatorMap.set(n,r)}function concatInternalOptions(n,r,a){var s=internalOptionCreatorMap.get(r);if(!s)return a;var o=s(n);return o?a.concat(o):a}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function n(){}return n.prototype.getColorFromPalette=function(r,a,s){var o=normalizeToArray(this.get("color",!0)),u=this.get("colorLayer",!0);return getFromPalette(this,innerColor,o,u,r,a,s)},n.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},n}();function getDecalFromPalette(n,r,a,s){var o=normalizeToArray(n.get(["aria","decal","decals"]));return getFromPalette(n,innerDecal,o,null,r,a,s)}function getNearestPalette(n,r){for(var a=n.length,s=0;s<a;s++)if(n[s].length>r)return n[s];return n[a-1]}function getFromPalette(n,r,a,s,o,u,c){u=u||n;var p=r(u),d=p.paletteIdx||0,_=p.paletteNameMap=p.paletteNameMap||{};if(_.hasOwnProperty(o))return _[o];var ja=c==null||!s?a:getNearestPalette(s,c);if(ja=ja||a,!(!ja||!ja.length)){var Ja=ja[d];return o&&(_[o]=Ja),p.paletteIdx=(d+1)%ja.length,Ja}}function clearPalette(n,r){r(n).paletteIdx=0,r(n).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(a,s,o,u,c,p){u=u||{},this.option=null,this._theme=new Model(u),this._locale=new Model(c),this._optionManager=p},r.prototype.setOption=function(a,s,o){var u=normalizeSetOptionInput(s);this._optionManager.setOption(a,o,u),this._resetOption(null,u)},r.prototype.resetOption=function(a,s){return this._resetOption(a,normalizeSetOptionInput(s))},r.prototype._resetOption=function(a,s){var o=!1,u=this._optionManager;if(!a||a==="recreate"){var c=u.mountOption(a==="recreate");!this.option||a==="recreate"?initBase(this,c):(this.restoreData(),this._mergeOption(c,s)),o=!0}if((a==="timeline"||a==="media")&&this.restoreData(),!a||a==="recreate"||a==="timeline"){var p=u.getTimelineOption(this);p&&(o=!0,this._mergeOption(p,s))}if(!a||a==="recreate"||a==="media"){var d=u.getMediaOption(this);d.length&&each$f(d,function(_){o=!0,this._mergeOption(_,s)},this)}return o},r.prototype.mergeOption=function(a){this._mergeOption(a,null)},r.prototype._mergeOption=function(a,s){var o=this.option,u=this._componentsMap,c=this._componentsCount,p=[],d=createHashMap(),_=s&&s.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(a,function(Ja,ec){Ja!=null&&(ComponentModel.hasClass(ec)?ec&&(p.push(ec),d.set(ec,!0)):o[ec]=o[ec]==null?clone$4(Ja):merge(o[ec],Ja,!0))}),_&&_.each(function(Ja,ec){ComponentModel.hasClass(ec)&&!d.get(ec)&&(p.push(ec),d.set(ec,!0))}),ComponentModel.topologicalTravel(p,ComponentModel.getAllClassMainTypes(),ja,this);function ja(Ja){var ec=concatInternalOptions(this,Ja,normalizeToArray(a[Ja])),tc=u.get(Ja),rc=tc?_&&_.get(Ja)?"replaceMerge":"normalMerge":"replaceAll",nc=mappingToExists(tc,ec,rc);setComponentTypeToKeyInfo(nc,Ja,ComponentModel),o[Ja]=null,u.set(Ja,null),c.set(Ja,0);var ic=[],uc=[],eh=0,rh;each$f(nc,function(ah,ih){var oh=ah.existing,uh=ah.newOption;if(!uh)oh&&(oh.mergeOption({},this),oh.optionUpdated({},!1));else{var ch=Ja==="series",hh=ComponentModel.getClass(Ja,ah.keyInfo.subType,!ch);if(!hh)return;if(Ja==="tooltip"){if(rh)return;rh=!0}if(oh&&oh.constructor===hh)oh.name=ah.keyInfo.name,oh.mergeOption(uh,this),oh.optionUpdated(uh,!1);else{var dh=extend$2({componentIndex:ih},ah.keyInfo);oh=new hh(uh,this,this,dh),extend$2(oh,dh),ah.brandNew&&(oh.__requireNewView=!0),oh.init(uh,this,this),oh.optionUpdated(null,!0)}}oh?(ic.push(oh.option),uc.push(oh),eh++):(ic.push(void 0),uc.push(void 0))},this),o[Ja]=ic,u.set(Ja,uc),c.set(Ja,eh),Ja==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},r.prototype.getOption=function(){var a=clone$4(this.option);return each$f(a,function(s,o){if(ComponentModel.hasClass(o)){for(var u=normalizeToArray(s),c=u.length,p=!1,d=c-1;d>=0;d--)u[d]&&!isComponentIdInternal(u[d])?p=!0:(u[d]=null,!p&&c--);u.length=c,a[o]=u}}),delete a[OPTION_INNER_KEY],a},r.prototype.getTheme=function(){return this._theme},r.prototype.getLocaleModel=function(){return this._locale},r.prototype.setUpdatePayload=function(a){this._payload=a},r.prototype.getUpdatePayload=function(){return this._payload},r.prototype.getComponent=function(a,s){var o=this._componentsMap.get(a);if(o){var u=o[s||0];if(u)return u;if(s==null){for(var c=0;c<o.length;c++)if(o[c])return o[c]}}},r.prototype.queryComponents=function(a){var s=a.mainType;if(!s)return[];var o=a.index,u=a.id,c=a.name,p=this._componentsMap.get(s);if(!p||!p.length)return[];var d;return o!=null?(d=[],each$f(normalizeToArray(o),function(_){p[_]&&d.push(p[_])})):u!=null?d=queryByIdOrName("id",u,p):c!=null?d=queryByIdOrName("name",c,p):d=filter(p,function(_){return!!_}),filterBySubType(d,a)},r.prototype.findComponents=function(a){var s=a.query,o=a.mainType,u=p(s),c=u?this.queryComponents(u):filter(this._componentsMap.get(o),function(_){return!!_});return d(filterBySubType(c,a));function p(_){var ja=o+"Index",Ja=o+"Id",ec=o+"Name";return _&&(_[ja]!=null||_[Ja]!=null||_[ec]!=null)?{mainType:o,index:_[ja],id:_[Ja],name:_[ec]}:null}function d(_){return a.filter?filter(_,a.filter):_}},r.prototype.eachComponent=function(a,s,o){var u=this._componentsMap;if(isFunction(a)){var c=s,p=a;u.each(function(Ja,ec){for(var tc=0;Ja&&tc<Ja.length;tc++){var rc=Ja[tc];rc&&p.call(c,ec,rc,rc.componentIndex)}})}else for(var d=isString(a)?u.get(a):isObject$3(a)?this.findComponents(a):null,_=0;d&&_<d.length;_++){var ja=d[_];ja&&s.call(o,ja,ja.componentIndex)}},r.prototype.getSeriesByName=function(a){var s=convertOptionIdName(a,null);return filter(this._componentsMap.get("series"),function(o){return!!o&&s!=null&&o.name===s})},r.prototype.getSeriesByIndex=function(a){return this._componentsMap.get("series")[a]},r.prototype.getSeriesByType=function(a){return filter(this._componentsMap.get("series"),function(s){return!!s&&s.subType===a})},r.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(a){return!!a})},r.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},r.prototype.eachSeries=function(a,s){assertSeriesInitialized(this),each$f(this._seriesIndices,function(o){var u=this._componentsMap.get("series")[o];a.call(s,u,o)},this)},r.prototype.eachRawSeries=function(a,s){each$f(this._componentsMap.get("series"),function(o){o&&a.call(s,o,o.componentIndex)})},r.prototype.eachSeriesByType=function(a,s,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];c.subType===a&&s.call(o,c,u)},this)},r.prototype.eachRawSeriesByType=function(a,s,o){return each$f(this.getSeriesByType(a),s,o)},r.prototype.isSeriesFiltered=function(a){return assertSeriesInitialized(this),this._seriesIndicesMap.get(a.componentIndex)==null},r.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},r.prototype.filterSeries=function(a,s){assertSeriesInitialized(this);var o=[];each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];a.call(s,c,u)&&o.push(u)},this),this._seriesIndices=o,this._seriesIndicesMap=createHashMap(o)},r.prototype.restoreData=function(a){reCreateSeriesIndices(this);var s=this._componentsMap,o=[];s.each(function(u,c){ComponentModel.hasClass(c)&&o.push(c)}),ComponentModel.topologicalTravel(o,ComponentModel.getAllClassMainTypes(),function(u){each$f(s.get(u),function(c){c&&(u!=="series"||!isNotTargetSeries(c,a))&&c.restoreData()})})},r.internalField=function(){reCreateSeriesIndices=function(a){var s=a._seriesIndices=[];each$f(a._componentsMap.get("series"),function(o){o&&s.push(o.componentIndex)}),a._seriesIndicesMap=createHashMap(s)},assertSeriesInitialized=function(a){},initBase=function(a,s){a.option={},a.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,a._componentsMap=createHashMap({series:[]}),a._componentsCount=createHashMap();var o=s.aria;isObject$3(o)&&o.enabled==null&&(o.enabled=!0),mergeTheme(s,a._theme.option),merge(s,globalDefault,!1),a._mergeOption(s,null)}}(),r}(Model);function isNotTargetSeries(n,r){if(r){var a=r.seriesIndex,s=r.seriesId,o=r.seriesName;return a!=null&&n.componentIndex!==a||s!=null&&n.id!==s||o!=null&&n.name!==o}}function mergeTheme(n,r){var a=n.color&&!n.colorLayer;each$f(r,function(s,o){o==="colorLayer"&&a||ComponentModel.hasClass(o)||(typeof s=="object"?n[o]=n[o]?merge(n[o],s,!1):clone$4(s):n[o]==null&&(n[o]=s))})}function queryByIdOrName(n,r,a){if(isArray$1(r)){var s=createHashMap();return each$f(r,function(u){if(u!=null){var c=convertOptionIdName(u,null);c!=null&&s.set(u,!0)}}),filter(a,function(u){return u&&s.get(u[n])})}else{var o=convertOptionIdName(r,null);return filter(a,function(u){return u&&o!=null&&u[n]===o})}}function filterBySubType(n,r){return r.hasOwnProperty("subType")?filter(n,function(a){return a&&a.subType===r.subType}):n}function normalizeSetOptionInput(n){var r=createHashMap();return n&&each$f(normalizeToArray(n.replaceMerge),function(a){r.set(a,!0)}),{replaceMergeMainTypeMap:r}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function n(r){each$f(availableMethods,function(a){this[a]=bind$1(r[a],r)},this)}return n}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(r,a){var s=[];each$f(coordinateSystemCreators,function(o,u){var c=o.create(r,a);s=s.concat(c||[])}),this._coordinateSystems=s},n.prototype.update=function(r,a){each$f(this._coordinateSystems,function(s){s.update&&s.update(r,a)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(r,a){coordinateSystemCreators[r]=a},n.get=function(r){return coordinateSystemCreators[r]},n}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function n(r){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=r}return n.prototype.setOption=function(r,a,s){r&&(each$f(normalizeToArray(r.series),function(c){c&&c.data&&isTypedArray(c.data)&&setAsPrimitive(c.data)}),each$f(normalizeToArray(r.dataset),function(c){c&&c.source&&isTypedArray(c.source)&&setAsPrimitive(c.source)})),r=clone$4(r);var o=this._optionBackup,u=parseRawOption(r,a,!o);this._newBaseOption=u.baseOption,o?(u.timelineOptions.length&&(o.timelineOptions=u.timelineOptions),u.mediaList.length&&(o.mediaList=u.mediaList),u.mediaDefault&&(o.mediaDefault=u.mediaDefault)):this._optionBackup=u},n.prototype.mountOption=function(r){var a=this._optionBackup;return this._timelineOptions=a.timelineOptions,this._mediaList=a.mediaList,this._mediaDefault=a.mediaDefault,this._currentMediaIndices=[],clone$4(r?a.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(r){var a,s=this._timelineOptions;if(s.length){var o=r.getComponent("timeline");o&&(a=clone$4(s[o.getCurrentIndex()]))}return a},n.prototype.getMediaOption=function(r){var a=this._api.getWidth(),s=this._api.getHeight(),o=this._mediaList,u=this._mediaDefault,c=[],p=[];if(!o.length&&!u)return p;for(var d=0,_=o.length;d<_;d++)applyMediaQuery(o[d].query,a,s)&&c.push(d);return!c.length&&u&&(c=[-1]),c.length&&!indicesEquals(c,this._currentMediaIndices)&&(p=map$1(c,function(ja){return clone$4(ja===-1?u.option:o[ja].option)})),this._currentMediaIndices=c,p},n}();function parseRawOption(n,r,a){var s=[],o,u,c=n.baseOption,p=n.timeline,d=n.options,_=n.media,ja=!!n.media,Ja=!!(d||p||c&&c.timeline);c?(u=c,u.timeline||(u.timeline=p)):((Ja||ja)&&(n.options=n.media=null),u=n),ja&&isArray$1(_)&&each$f(_,function(tc){tc&&tc.option&&(tc.query?s.push(tc):o||(o=tc))}),ec(u),each$f(d,function(tc){return ec(tc)}),each$f(s,function(tc){return ec(tc.option)});function ec(tc){each$f(r,function(rc){rc(tc,a)})}return{baseOption:u,timelineOptions:d||[],mediaDefault:o,mediaList:s}}function applyMediaQuery(n,r,a){var s={width:r,height:a,aspectratio:r/a},o=!0;return each$f(n,function(u,c){var p=c.match(QUERY_REG);if(!(!p||!p[1]||!p[2])){var d=p[1],_=p[2].toLowerCase();compare$1(s[_],u,d)||(o=!1)}}),o}function compare$1(n,r,a){return a==="min"?n>=r:a==="max"?n<=r:n===r}function indicesEquals(n,r){return n.join(",")===r.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(n){var r=n&&n.itemStyle;if(r)for(var a=0,s=POSSIBLE_STYLES.length;a<s;a++){var o=POSSIBLE_STYLES[a],u=r.normal,c=r.emphasis;u&&u[o]&&(n[o]=n[o]||{},n[o].normal?merge(n[o].normal,u[o]):n[o].normal=u[o],u[o]=null),c&&c[o]&&(n[o]=n[o]||{},n[o].emphasis?merge(n[o].emphasis,c[o]):n[o].emphasis=c[o],c[o]=null)}}function convertNormalEmphasis$1(n,r,a){if(n&&n[r]&&(n[r].normal||n[r].emphasis)){var s=n[r].normal,o=n[r].emphasis;s&&(a?(n[r].normal=n[r].emphasis=null,defaults(n[r],s)):n[r]=s),o&&(n.emphasis=n.emphasis||{},n.emphasis[r]=o,o.focus&&(n.emphasis.focus=o.focus),o.blurScope&&(n.emphasis.blurScope=o.blurScope))}}function removeEC3NormalStatus(n){convertNormalEmphasis$1(n,"itemStyle"),convertNormalEmphasis$1(n,"lineStyle"),convertNormalEmphasis$1(n,"areaStyle"),convertNormalEmphasis$1(n,"label"),convertNormalEmphasis$1(n,"labelLine"),convertNormalEmphasis$1(n,"upperLabel"),convertNormalEmphasis$1(n,"edgeLabel")}function compatTextStyle(n,r){var a=isObject$2(n)&&n[r],s=isObject$2(a)&&a.textStyle;if(s)for(var o=0,u=TEXT_STYLE_OPTIONS.length;o<u;o++){var c=TEXT_STYLE_OPTIONS[o];s.hasOwnProperty(c)&&(a[c]=s[c])}}function compatEC3CommonStyles(n){n&&(removeEC3NormalStatus(n),compatTextStyle(n,"label"),n.emphasis&&compatTextStyle(n.emphasis,"label"))}function processSeries(n){if(isObject$2(n)){compatEC2ItemStyle(n),removeEC3NormalStatus(n),compatTextStyle(n,"label"),compatTextStyle(n,"upperLabel"),compatTextStyle(n,"edgeLabel"),n.emphasis&&(compatTextStyle(n.emphasis,"label"),compatTextStyle(n.emphasis,"upperLabel"),compatTextStyle(n.emphasis,"edgeLabel"));var r=n.markPoint;r&&(compatEC2ItemStyle(r),compatEC3CommonStyles(r));var a=n.markLine;a&&(compatEC2ItemStyle(a),compatEC3CommonStyles(a));var s=n.markArea;s&&compatEC3CommonStyles(s);var o=n.data;if(n.type==="graph"){o=o||n.nodes;var u=n.links||n.edges;if(u&&!isTypedArray(u))for(var c=0;c<u.length;c++)compatEC3CommonStyles(u[c]);each$f(n.categories,function(_){removeEC3NormalStatus(_)})}if(o&&!isTypedArray(o))for(var c=0;c<o.length;c++)compatEC3CommonStyles(o[c]);if(r=n.markPoint,r&&r.data)for(var p=r.data,c=0;c<p.length;c++)compatEC3CommonStyles(p[c]);if(a=n.markLine,a&&a.data)for(var d=a.data,c=0;c<d.length;c++)isArray$1(d[c])?(compatEC3CommonStyles(d[c][0]),compatEC3CommonStyles(d[c][1])):compatEC3CommonStyles(d[c]);n.type==="gauge"?(compatTextStyle(n,"axisLabel"),compatTextStyle(n,"title"),compatTextStyle(n,"detail")):n.type==="treemap"?(convertNormalEmphasis$1(n.breadcrumb,"itemStyle"),each$f(n.levels,function(_){removeEC3NormalStatus(_)})):n.type==="tree"&&removeEC3NormalStatus(n.leaves)}}function toArr(n){return isArray$1(n)?n:n?[n]:[]}function toObj(n){return(isArray$1(n)?n[0]:n)||{}}function globalCompatStyle(n,r){each$d(toArr(n.series),function(s){isObject$2(s)&&processSeries(s)});var a=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];r&&a.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(a,function(s){each$d(toArr(n[s]),function(o){o&&(compatTextStyle(o,"axisLabel"),compatTextStyle(o.axisPointer,"label"))})}),each$d(toArr(n.parallel),function(s){var o=s&&s.parallelAxisDefault;compatTextStyle(o,"axisLabel"),compatTextStyle(o&&o.axisPointer,"label")}),each$d(toArr(n.calendar),function(s){convertNormalEmphasis$1(s,"itemStyle"),compatTextStyle(s,"dayLabel"),compatTextStyle(s,"monthLabel"),compatTextStyle(s,"yearLabel")}),each$d(toArr(n.radar),function(s){compatTextStyle(s,"name"),s.name&&s.axisName==null&&(s.axisName=s.name,delete s.name),s.nameGap!=null&&s.axisNameGap==null&&(s.axisNameGap=s.nameGap,delete s.nameGap)}),each$d(toArr(n.geo),function(s){isObject$2(s)&&(compatEC3CommonStyles(s),each$d(toArr(s.regions),function(o){compatEC3CommonStyles(o)}))}),each$d(toArr(n.timeline),function(s){compatEC3CommonStyles(s),convertNormalEmphasis$1(s,"label"),convertNormalEmphasis$1(s,"itemStyle"),convertNormalEmphasis$1(s,"controlStyle",!0);var o=s.data;isArray$1(o)&&each$f(o,function(u){isObject$3(u)&&(convertNormalEmphasis$1(u,"label"),convertNormalEmphasis$1(u,"itemStyle"))})}),each$d(toArr(n.toolbox),function(s){convertNormalEmphasis$1(s,"iconStyle"),each$d(s.feature,function(o){convertNormalEmphasis$1(o,"iconStyle")})}),compatTextStyle(toObj(n.axisPointer),"label"),compatTextStyle(toObj(n.tooltip).axisPointer,"label")}function get$1(n,r){for(var a=r.split(","),s=n,o=0;o<a.length&&(s=s&&s[a[o]],s!=null);o++);return s}function set(n,r,a,s){for(var o=r.split(","),u=n,c,p=0;p<o.length-1;p++)c=o[p],u[c]==null&&(u[c]={}),u=u[c];u[o[p]]==null&&(u[o[p]]=a)}function compatLayoutProperties(n){n&&each$f(LAYOUT_PROPERTIES,function(r){r[0]in n&&!(r[1]in n)&&(n[r[1]]=n[r[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(n){var r=n&&n.itemStyle;if(r)for(var a=0;a<BAR_ITEM_STYLE_MAP.length;a++){var s=BAR_ITEM_STYLE_MAP[a][1],o=BAR_ITEM_STYLE_MAP[a][0];r[s]!=null&&(r[o]=r[s])}}function compatPieLabel(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function compatSunburstState(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function compatGraphFocus(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function traverseTree(n,r){if(n)for(var a=0;a<n.length;a++)r(n[a]),n[a]&&traverseTree(n[a].children,r)}function globalBackwardCompat(n,r){globalCompatStyle(n,r),n.series=normalizeToArray(n.series),each$f(n.series,function(a){if(isObject$3(a)){var s=a.type;if(s==="line")a.clipOverflow!=null&&(a.clip=a.clipOverflow);else if(s==="pie"||s==="gauge"){a.clockWise!=null&&(a.clockwise=a.clockWise),compatPieLabel(a.label);var o=a.data;if(o&&!isTypedArray(o))for(var u=0;u<o.length;u++)compatPieLabel(o[u]);a.hoverOffset!=null&&(a.emphasis=a.emphasis||{},(a.emphasis.scaleSize=null)&&(a.emphasis.scaleSize=a.hoverOffset))}else if(s==="gauge"){var c=get$1(a,"pointer.color");c!=null&&set(a,"itemStyle.color",c)}else if(s==="bar"){compatBarItemStyle(a),compatBarItemStyle(a.backgroundStyle),compatBarItemStyle(a.emphasis);var o=a.data;if(o&&!isTypedArray(o))for(var u=0;u<o.length;u++)typeof o[u]=="object"&&(compatBarItemStyle(o[u]),compatBarItemStyle(o[u]&&o[u].emphasis))}else if(s==="sunburst"){var p=a.highlightPolicy;p&&(a.emphasis=a.emphasis||{},a.emphasis.focus||(a.emphasis.focus=p)),compatSunburstState(a),traverseTree(a.data,compatSunburstState)}else s==="graph"||s==="sankey"?compatGraphFocus(a):s==="map"&&(a.mapType&&!a.map&&(a.map=a.mapType),a.mapLocation&&defaults(a,a.mapLocation));a.hoverAnimation!=null&&(a.emphasis=a.emphasis||{},a.emphasis&&a.emphasis.scale==null&&(a.emphasis.scale=a.hoverAnimation)),compatLayoutProperties(a)}}),n.dataRange&&(n.visualMap=n.dataRange),each$f(COMPATITABLE_COMPONENTS,function(a){var s=n[a];s&&(isArray$1(s)||(s=[s]),each$f(s,function(o){compatLayoutProperties(o)}))})}function dataStack$1(n){var r=createHashMap();n.eachSeries(function(a){var s=a.get("stack");if(s){var o=r.get(s)||r.set(s,[]),u=a.getData(),c={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:a};if(!c.stackedDimension||!(c.isStackedByIndex||c.stackedByDimension))return;o.length&&u.setCalculationInfo("stackedOnSeries",o[o.length-1].seriesModel),o.push(c)}}),r.each(calculateStack)}function calculateStack(n){each$f(n,function(r,a){var s=[],o=[NaN,NaN],u=[r.stackResultDimension,r.stackedOverDimension],c=r.data,p=r.isStackedByIndex,d=r.seriesModel.get("stackStrategy")||"samesign";c.modify(u,function(_,ja,Ja){var ec=c.get(r.stackedDimension,Ja);if(isNaN(ec))return o;var tc,rc;p?rc=c.getRawIndex(Ja):tc=c.get(r.stackedByDimension,Ja);for(var nc=NaN,ic=a-1;ic>=0;ic--){var uc=n[ic];if(p||(rc=uc.data.rawIndexOf(uc.stackedByDimension,tc)),rc>=0){var eh=uc.data.getByRawIndex(uc.stackResultDimension,rc);if(d==="all"||d==="positive"&&eh>0||d==="negative"&&eh<0||d==="samesign"&&ec>=0&&eh>0||d==="samesign"&&ec<=0&&eh<0){ec=addSafe(ec,eh),nc=eh;break}}}return s[0]=ec,s[1]=nc,s})})}var SourceImpl=function(){function n(r){this.data=r.data||(r.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=r.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=r.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=r.startIndex||0,this.dimensionsDetectedCount=r.dimensionsDetectedCount,this.metaRawOption=r.metaRawOption;var a=this.dimensionsDefine=r.dimensionsDefine;if(a)for(var s=0;s<a.length;s++){var o=a[s];o.type==null&&guessOrdinal(this,s)===BE_ORDINAL.Must&&(o.type="ordinal")}}return n}();function isSourceInstance(n){return n instanceof SourceImpl}function createSource(n,r,a){a=a||detectSourceFormat(n);var s=r.seriesLayoutBy,o=determineSourceDimensions(n,a,s,r.sourceHeader,r.dimensions),u=new SourceImpl({data:n,sourceFormat:a,seriesLayoutBy:s,dimensionsDefine:o.dimensionsDefine,startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount,metaRawOption:clone$4(r)});return u}function createSourceFromSeriesDataOption(n){return new SourceImpl({data:n,sourceFormat:isTypedArray(n)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(n){return new SourceImpl({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:clone$4(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function detectSourceFormat(n){var r=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(n))r=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(n)){n.length===0&&(r=SOURCE_FORMAT_ARRAY_ROWS);for(var a=0,s=n.length;a<s;a++){var o=n[a];if(o!=null){if(isArray$1(o)||isTypedArray(o)){r=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(o)){r=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(n)){for(var u in n)if(hasOwn(n,u)&&isArrayLike(n[u])){r=SOURCE_FORMAT_KEYED_COLUMNS;break}}return r}function determineSourceDimensions(n,r,a,s,o){var u,c;if(!n)return{dimensionsDefine:normalizeDimensionsOption(o),startIndex:c,dimensionsDetectedCount:u};if(r===SOURCE_FORMAT_ARRAY_ROWS){var p=n;s==="auto"||s==null?arrayRowsTravelFirst(function(_){_!=null&&_!=="-"&&(isString(_)?c==null&&(c=1):c=0)},a,p,10):c=isNumber(s)?s:s?1:0,!o&&c===1&&(o=[],arrayRowsTravelFirst(function(_,ja){o[ja]=_!=null?_+"":""},a,p,1/0)),u=o?o.length:a===SERIES_LAYOUT_BY_ROW?p.length:p[0]?p[0].length:null}else if(r===SOURCE_FORMAT_OBJECT_ROWS)o||(o=objectRowsCollectDimensions(n));else if(r===SOURCE_FORMAT_KEYED_COLUMNS)o||(o=[],each$f(n,function(_,ja){o.push(ja)}));else if(r===SOURCE_FORMAT_ORIGINAL){var d=getDataItemValue(n[0]);u=isArray$1(d)&&d.length||1}return{startIndex:c,dimensionsDefine:normalizeDimensionsOption(o),dimensionsDetectedCount:u}}function objectRowsCollectDimensions(n){for(var r=0,a;r<n.length&&!(a=n[r++]););if(a)return keys(a)}function normalizeDimensionsOption(n){if(n){var r=createHashMap();return map$1(n,function(a,s){a=isObject$3(a)?a:{name:a};var o={name:a.name,displayName:a.displayName,type:a.type};if(o.name==null)return o;o.name+="",o.displayName==null&&(o.displayName=o.name);var u=r.get(o.name);return u?o.name+="-"+u.count++:r.set(o.name,{count:1}),o})}}function arrayRowsTravelFirst(n,r,a,s){if(r===SERIES_LAYOUT_BY_ROW)for(var o=0;o<a.length&&o<s;o++)n(a[o]?a[o][0]:null,o);else for(var u=a[0]||[],o=0;o<u.length&&o<s;o++)n(u[o],o)}function shouldRetrieveDataByName(n){var r=n.sourceFormat;return r===SOURCE_FORMAT_OBJECT_ROWS||r===SOURCE_FORMAT_KEYED_COLUMNS}var _a$4,_b,_c$1,providerMethods,mountMethods,DefaultDataProvider=function(){function n(r,a){var s=isSourceInstance(r)?r:createSourceFromSeriesDataOption(r);this._source=s;var o=this._data=s.data;s.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=a,this._data=o),mountMethods(this,o,s)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(r,a){},n.prototype.appendData=function(r){},n.prototype.clean=function(){},n.protoInitialize=function(){var r=n.prototype;r.pure=!1,r.persistent=!0}(),n.internalField=function(){var r;mountMethods=function(c,p,d){var _=d.sourceFormat,ja=d.seriesLayoutBy,Ja=d.startIndex,ec=d.dimensionsDefine,tc=providerMethods[getMethodMapKey(_,ja)];if(extend$2(c,tc),_===SOURCE_FORMAT_TYPED_ARRAY)c.getItem=a,c.count=o,c.fillStorage=s;else{var rc=getRawSourceItemGetter(_,ja);c.getItem=bind$1(rc,null,p,Ja,ec);var nc=getRawSourceDataCounter(_,ja);c.count=bind$1(nc,null,p,Ja,ec)}};var a=function(c,p){c=c-this._offset,p=p||[];for(var d=this._data,_=this._dimSize,ja=_*c,Ja=0;Ja<_;Ja++)p[Ja]=d[ja+Ja];return p},s=function(c,p,d,_){for(var ja=this._data,Ja=this._dimSize,ec=0;ec<Ja;ec++){for(var tc=_[ec],rc=tc[0]==null?1/0:tc[0],nc=tc[1]==null?-1/0:tc[1],ic=p-c,uc=d[ec],eh=0;eh<ic;eh++){var rh=ja[eh*Ja+ec];uc[c+eh]=rh,rh<rc&&(rc=rh),rh>nc&&(nc=rh)}tc[0]=rc,tc[1]=nc}},o=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(r={},r[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:u},r[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},r[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:u},r[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(c){var p=this._data;each$f(c,function(d,_){for(var ja=p[_]||(p[_]=[]),Ja=0;Ja<(d||[]).length;Ja++)ja.push(d[Ja])})}},r[SOURCE_FORMAT_ORIGINAL]={appendData:u},r[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(c){this._data=c},clean:function(){this._offset+=this.count(),this._data=null}},r);function u(c){for(var p=0;p<c.length;p++)this._data.push(c[p])}}(),n}(),getItemSimply=function(n,r,a,s){return n[s]},rawSourceItemGetterMap=(_a$4={},_a$4[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(n,r,a,s){return n[s+r]},_a$4[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(n,r,a,s,o){s+=r;for(var u=o||[],c=n,p=0;p<c.length;p++){var d=c[p];u[p]=d?d[s]:null}return u},_a$4[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a$4[SOURCE_FORMAT_KEYED_COLUMNS]=function(n,r,a,s,o){for(var u=o||[],c=0;c<a.length;c++){var p=a[c].name,d=n[p];u[c]=d?d[s]:null}return u},_a$4[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a$4);function getRawSourceItemGetter(n,r){var a=rawSourceItemGetterMap[getMethodMapKey(n,r)];return a}var countSimply=function(n,r,a){return n.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(n,r,a){return Math.max(0,n.length-r)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(n,r,a){var s=n[0];return s?Math.max(0,s.length-r):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(n,r,a){var s=a[0].name,o=n[s];return o?o.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(n,r){var a=rawSourceDataCounterMap[getMethodMapKey(n,r)];return a}var getRawValueSimply=function(n,r,a){return n[r]},rawSourceValueGetterMap=(_c$1={},_c$1[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c$1[SOURCE_FORMAT_OBJECT_ROWS]=function(n,r,a){return n[a]},_c$1[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c$1[SOURCE_FORMAT_ORIGINAL]=function(n,r,a){var s=getDataItemValue(n);return s instanceof Array?s[r]:s},_c$1[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c$1);function getRawSourceValueGetter(n){var r=rawSourceValueGetterMap[n];return r}function getMethodMapKey(n,r){return n===SOURCE_FORMAT_ARRAY_ROWS?n+"_"+r:n}function retrieveRawValue(n,r,a){if(n){var s=n.getRawDataItem(r);if(s!=null){var o=n.getStore(),u=o.getSource().sourceFormat;if(a!=null){var c=n.getDimensionIndex(a),p=o.getDimensionProperty(c);return getRawSourceValueGetter(u)(s,c,p)}else{var d=s;return u===SOURCE_FORMAT_ORIGINAL&&(d=getDataItemValue(s)),d}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function n(){}return n.prototype.getDataParams=function(r,a){var s=this.getData(a),o=this.getRawValue(r,a),u=s.getRawIndex(r),c=s.getName(r),p=s.getRawDataItem(r),d=s.getItemVisual(r,"style"),_=d&&d[s.getItemVisual(r,"drawType")||"fill"],ja=d&&d.stroke,Ja=this.mainType,ec=Ja==="series",tc=s.userOutput&&s.userOutput.get();return{componentType:Ja,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:ec?this.subType:null,seriesIndex:this.seriesIndex,seriesId:ec?this.id:null,seriesName:ec?this.name:null,name:c,dataIndex:u,data:p,dataType:a,value:o,color:_,borderColor:ja,dimensionNames:tc?tc.fullDimensions:null,encode:tc?tc.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(r,a,s,o,u,c){a=a||"normal";var p=this.getData(s),d=this.getDataParams(r,s);if(c&&(d.value=c.interpolatedValue),o!=null&&isArray$1(d.value)&&(d.value=d.value[o]),!u){var _=p.getItemModel(r);u=_.get(a==="normal"?["label","formatter"]:[a,"label","formatter"])}if(isFunction(u))return d.status=a,d.dimensionIndex=o,u(d);if(isString(u)){var ja=formatTpl(u,d);return ja.replace(DIMENSION_LABEL_REG,function(Ja,ec){var tc=ec.length,rc=ec;rc.charAt(0)==="["&&rc.charAt(tc-1)==="]"&&(rc=+rc.slice(1,tc-1));var nc=retrieveRawValue(p,r,rc);if(c&&isArray$1(c.interpolatedValue)){var ic=p.getDimensionIndex(rc);ic>=0&&(nc=c.interpolatedValue[ic])}return nc!=null?nc+"":""})}},n.prototype.getRawValue=function(r,a){return retrieveRawValue(this.getData(a),r)},n.prototype.formatTooltip=function(r,a,s){},n}();function normalizeTooltipFormatResult(n){var r,a;return isObject$3(n)?n.type&&(a=n):r=n,{text:r,frag:a}}function createTask(n){return new Task(n)}var Task=function(){function n(r){r=r||{},this._reset=r.reset,this._plan=r.plan,this._count=r.count,this._onDirty=r.onDirty,this._dirty=!0}return n.prototype.perform=function(r){var a=this._upstream,s=r&&r.skip;if(this._dirty&&a){var o=this.context;o.data=o.outputData=a.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var u;this._plan&&!s&&(u=this._plan(this.context));var c=ja(this._modBy),p=this._modDataCount||0,d=ja(r&&r.modBy),_=r&&r.modDataCount||0;(c!==d||p!==_)&&(u="reset");function ja(eh){return!(eh>=1)&&(eh=1),eh}var Ja;(this._dirty||u==="reset")&&(this._dirty=!1,Ja=this._doReset(s)),this._modBy=d,this._modDataCount=_;var ec=r&&r.step;if(a?this._dueEnd=a._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var tc=this._dueIndex,rc=Math.min(ec!=null?this._dueIndex+ec:1/0,this._dueEnd);if(!s&&(Ja||tc<rc)){var nc=this._progress;if(isArray$1(nc))for(var ic=0;ic<nc.length;ic++)this._doProgress(nc[ic],tc,rc,d,_);else this._doProgress(nc,tc,rc,d,_)}this._dueIndex=rc;var uc=this._settedOutputEnd!=null?this._settedOutputEnd:rc;this._outputDueEnd=uc}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(r,a,s,o,u){iterator.reset(a,s,o,u),this._callingProgress=r,this._callingProgress({start:a,end:s,count:s-a,next:iterator.next},this.context)},n.prototype._doReset=function(r){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var a,s;!r&&this._reset&&(a=this._reset(this.context),a&&a.progress&&(s=a.forceFirstProgress,a=a.progress),isArray$1(a)&&!a.length&&(a=null)),this._progress=a,this._modBy=this._modDataCount=null;var o=this._downstream;return o&&o.dirty(),s},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(r){(this._downstream!==r||this._dirty)&&(this._downstream=r,r._upstream=this,r.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(r){this._outputDueEnd=this._settedOutputEnd=r},n}(),iterator=function(){var n,r,a,s,o,u={reset:function(d,_,ja,Ja){r=d,n=_,a=ja,s=Ja,o=Math.ceil(s/a),u.next=a>1&&s>0?p:c}};return u;function c(){return r<n?r++:null}function p(){var d=r%o*a+Math.ceil(r/o),_=r>=n?null:d<s?d:r;return r++,_}}();function parseDataValue(n,r){var a=r&&r.type;return a==="ordinal"?n:(a==="time"&&!isNumber(n)&&n!=null&&n!=="-"&&(n=+parseDate(n)),n==null||n===""?NaN:+n)}var valueParserMap=createHashMap({number:function(n){return parseFloat(n)},time:function(n){return+parseDate(n)},trim:function(n){return isString(n)?trim$1(n):n}});function getRawValueParser(n){return valueParserMap.get(n)}var ORDER_COMPARISON_OP_MAP={lt:function(n,r){return n<r},lte:function(n,r){return n<=r},gt:function(n,r){return n>r},gte:function(n,r){return n>=r}},FilterOrderComparator=function(){function n(r,a){if(!isNumber(a)){var s="";throwError(s)}this._opFn=ORDER_COMPARISON_OP_MAP[r],this._rvalFloat=numericToNumber(a)}return n.prototype.evaluate=function(r){return isNumber(r)?this._opFn(r,this._rvalFloat):this._opFn(numericToNumber(r),this._rvalFloat)},n}(),SortOrderComparator=function(){function n(r,a){var s=r==="desc";this._resultLT=s?1:-1,a==null&&(a=s?"min":"max"),this._incomparable=a==="min"?-1/0:1/0}return n.prototype.evaluate=function(r,a){var s=isNumber(r)?r:numericToNumber(r),o=isNumber(a)?a:numericToNumber(a),u=isNaN(s),c=isNaN(o);if(u&&(s=this._incomparable),c&&(o=this._incomparable),u&&c){var p=isString(r),d=isString(a);p&&(s=d?r:0),d&&(o=p?a:0)}return s<o?this._resultLT:s>o?-this._resultLT:0},n}(),FilterEqualityComparator=function(){function n(r,a){this._rval=a,this._isEQ=r,this._rvalTypeof=typeof a,this._rvalFloat=numericToNumber(a)}return n.prototype.evaluate=function(r){var a=r===this._rval;if(!a){var s=typeof r;s!==this._rvalTypeof&&(s==="number"||this._rvalTypeof==="number")&&(a=numericToNumber(r)===this._rvalFloat)}return this._isEQ?a:!a},n}();function createFilterComparator(n,r){return n==="eq"||n==="ne"?new FilterEqualityComparator(n==="eq",r):hasOwn(ORDER_COMPARISON_OP_MAP,n)?new FilterOrderComparator(n,r):null}var ExternalSource=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(r){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(r){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(r,a){},n.prototype.retrieveValueFromItem=function(r,a){},n.prototype.convertValue=function(r,a){return parseDataValue(r,a)},n}();function createExternalSource(n,r){var a=new ExternalSource,s=n.data,o=a.sourceFormat=n.sourceFormat,u=n.startIndex,c="";n.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(c);var p=[],d={},_=n.dimensionsDefine;if(_)each$f(_,function(nc,ic){var uc=nc.name,eh={index:ic,name:uc,displayName:nc.displayName};if(p.push(eh),uc!=null){var rh="";hasOwn(d,uc)&&throwError(rh),d[uc]=eh}});else for(var ja=0;ja<n.dimensionsDetectedCount;ja++)p.push({index:ja});var Ja=getRawSourceItemGetter(o,SERIES_LAYOUT_BY_COLUMN);r.__isBuiltIn&&(a.getRawDataItem=function(nc){return Ja(s,u,p,nc)},a.getRawData=bind$1(getRawData,null,n)),a.cloneRawData=bind$1(cloneRawData,null,n);var ec=getRawSourceDataCounter(o,SERIES_LAYOUT_BY_COLUMN);a.count=bind$1(ec,null,s,u,p);var tc=getRawSourceValueGetter(o);a.retrieveValue=function(nc,ic){var uc=Ja(s,u,p,nc);return rc(uc,ic)};var rc=a.retrieveValueFromItem=function(nc,ic){if(nc!=null){var uc=p[ic];if(uc)return tc(nc,ic,uc.name)}};return a.getDimensionInfo=bind$1(getDimensionInfo,null,p,d),a.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,p),a}function getRawData(n){var r=n.sourceFormat;if(!isSupportedSourceFormat(r)){var a="";throwError(a)}return n.data}function cloneRawData(n){var r=n.sourceFormat,a=n.data;if(!isSupportedSourceFormat(r)){var s="";throwError(s)}if(r===SOURCE_FORMAT_ARRAY_ROWS){for(var o=[],u=0,c=a.length;u<c;u++)o.push(a[u].slice());return o}else if(r===SOURCE_FORMAT_OBJECT_ROWS){for(var o=[],u=0,c=a.length;u<c;u++)o.push(extend$2({},a[u]));return o}}function getDimensionInfo(n,r,a){if(a!=null){if(isNumber(a)||!isNaN(a)&&!hasOwn(r,a))return n[a];if(hasOwn(r,a))return r[a]}}function cloneAllDimensionInfo(n){return clone$4(n)}var externalTransformMap=createHashMap();function registerExternalTransform(n){n=clone$4(n);var r=n.type,a="";r||throwError(a);var s=r.split(":");s.length!==2&&throwError(a);var o=!1;s[0]==="echarts"&&(r=s[1],o=!0),n.__isBuiltIn=o,externalTransformMap.set(r,n)}function applyDataTransform(n,r,a){var s=normalizeToArray(n),o=s.length,u="";o||throwError(u);for(var c=0,p=o;c<p;c++){var d=s[c];r=applySingleDataTransform(d,r),c!==p-1&&(r.length=Math.max(r.length,1))}return r}function applySingleDataTransform(n,r,a,s){var o="";r.length||throwError(o),isObject$3(n)||throwError(o);var u=n.type,c=externalTransformMap.get(u);c||throwError(o);var p=map$1(r,function(_){return createExternalSource(_,c)}),d=normalizeToArray(c.transform({upstream:p[0],upstreamList:p,config:clone$4(n.config)}));return map$1(d,function(_,ja){var Ja="";isObject$3(_)||throwError(Ja),_.data||throwError(Ja);var ec=detectSourceFormat(_.data);isSupportedSourceFormat(ec)||throwError(Ja);var tc,rc=r[0];if(rc&&ja===0&&!_.dimensions){var nc=rc.startIndex;nc&&(_.data=rc.data.slice(0,nc).concat(_.data)),tc={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:nc,dimensions:rc.metaRawOption.dimensions}}else tc={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:_.dimensions};return createSource(_.data,tc,null)})}function isSupportedSourceFormat(n){return n===SOURCE_FORMAT_ARRAY_ROWS||n===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(n){return n>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(n){var r=n.constructor;return r===Array?n.slice():new r(n)}function prepareStore(n,r,a,s,o){var u=dataCtors[a||"float"];if(o){var c=n[r],p=c&&c.length;if(p!==s){for(var d=new u(s),_=0;_<p;_++)d[_]=c[_];n[r]=d}}else n[r]=new u(s)}var DataStore=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return n.prototype.initData=function(r,a,s){this._provider=r,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var o=r.getSource(),u=this.defaultDimValueGetter=defaultDimValueGetters[o.sourceFormat];this._dimValueGetter=s||u,this._rawExtent=[],shouldRetrieveDataByName(o),this._dimensions=map$1(a,function(c){return{type:c.type,property:c.property}}),this._initDataFromProvider(0,r.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(r,a){var s=this._calcDimNameToIdx,o=this._dimensions,u=s.get(r);if(u!=null){if(o[u].type===a)return u}else u=o.length;return o[u]={type:a},s.set(r,u),this._chunks[u]=new dataCtors[a||"float"](this._rawCount),this._rawExtent[u]=getInitialExtent(),u},n.prototype.collectOrdinalMeta=function(r,a){var s=this._chunks[r],o=this._dimensions[r],u=this._rawExtent,c=o.ordinalOffset||0,p=s.length;c===0&&(u[r]=getInitialExtent());for(var d=u[r],_=c;_<p;_++){var ja=s[_]=a.parseAndCollect(s[_]);isNaN(ja)||(d[0]=Math.min(ja,d[0]),d[1]=Math.max(ja,d[1]))}o.ordinalMeta=a,o.ordinalOffset=p,o.type="ordinal"},n.prototype.getOrdinalMeta=function(r){var a=this._dimensions[r],s=a.ordinalMeta;return s},n.prototype.getDimensionProperty=function(r){var a=this._dimensions[r];return a&&a.property},n.prototype.appendData=function(r){var a=this._provider,s=this.count();a.appendData(r);var o=a.count();return a.persistent||(o+=s),s<o&&this._initDataFromProvider(s,o,!0),[s,o]},n.prototype.appendValues=function(r,a){for(var s=this._chunks,o=this._dimensions,u=o.length,c=this._rawExtent,p=this.count(),d=p+Math.max(r.length,a||0),_=0;_<u;_++){var ja=o[_];prepareStore(s,_,ja.type,d,!0)}for(var Ja=[],ec=p;ec<d;ec++)for(var tc=ec-p,rc=0;rc<u;rc++){var ja=o[rc],nc=defaultDimValueGetters.arrayRows.call(this,r[tc]||Ja,ja.property,tc,rc);s[rc][ec]=nc;var ic=c[rc];nc<ic[0]&&(ic[0]=nc),nc>ic[1]&&(ic[1]=nc)}return this._rawCount=this._count=d,{start:p,end:d}},n.prototype._initDataFromProvider=function(r,a,s){for(var o=this._provider,u=this._chunks,c=this._dimensions,p=c.length,d=this._rawExtent,_=map$1(c,function(eh){return eh.property}),ja=0;ja<p;ja++){var Ja=c[ja];d[ja]||(d[ja]=getInitialExtent()),prepareStore(u,ja,Ja.type,a,s)}if(o.fillStorage)o.fillStorage(r,a,u,d);else for(var ec=[],tc=r;tc<a;tc++){ec=o.getItem(tc,ec);for(var rc=0;rc<p;rc++){var nc=u[rc],ic=this._dimValueGetter(ec,_[rc],tc,rc);nc[tc]=ic;var uc=d[rc];ic<uc[0]&&(uc[0]=ic),ic>uc[1]&&(uc[1]=ic)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=a,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(r,a){if(!(a>=0&&a<this._count))return NaN;var s=this._chunks[r];return s?s[this.getRawIndex(a)]:NaN},n.prototype.getValues=function(r,a){var s=[],o=[];if(a==null){a=r,r=[];for(var u=0;u<this._dimensions.length;u++)o.push(u)}else o=r;for(var u=0,c=o.length;u<c;u++)s.push(this.get(o[u],a));return s},n.prototype.getByRawIndex=function(r,a){if(!(a>=0&&a<this._rawCount))return NaN;var s=this._chunks[r];return s?s[a]:NaN},n.prototype.getSum=function(r){var a=this._chunks[r],s=0;if(a)for(var o=0,u=this.count();o<u;o++){var c=this.get(r,o);isNaN(c)||(s+=c)}return s},n.prototype.getMedian=function(r){var a=[];this.each([r],function(u){isNaN(u)||a.push(u)});var s=a.sort(function(u,c){return u-c}),o=this.count();return o===0?0:o%2===1?s[(o-1)/2]:(s[o/2]+s[o/2-1])/2},n.prototype.indexOfRawIndex=function(r){if(r>=this._rawCount||r<0)return-1;if(!this._indices)return r;var a=this._indices,s=a[r];if(s!=null&&s<this._count&&s===r)return r;for(var o=0,u=this._count-1;o<=u;){var c=(o+u)/2|0;if(a[c]<r)o=c+1;else if(a[c]>r)u=c-1;else return c}return-1},n.prototype.indicesOfNearest=function(r,a,s){var o=this._chunks,u=o[r],c=[];if(!u)return c;s==null&&(s=1/0);for(var p=1/0,d=-1,_=0,ja=0,Ja=this.count();ja<Ja;ja++){var ec=this.getRawIndex(ja),tc=a-u[ec],rc=Math.abs(tc);rc<=s&&((rc<p||rc===p&&tc>=0&&d<0)&&(p=rc,d=tc,_=0),tc===d&&(c[_++]=ja))}return c.length=_,c},n.prototype.getIndices=function(){var r,a=this._indices;if(a){var s=a.constructor,o=this._count;if(s===Array){r=new s(o);for(var u=0;u<o;u++)r[u]=a[u]}else r=new s(a.buffer,0,o)}else{var s=getIndicesCtor(this._rawCount);r=new s(this.count());for(var u=0;u<r.length;u++)r[u]=u}return r},n.prototype.filter=function(r,a){if(!this._count)return this;for(var s=this.clone(),o=s.count(),u=getIndicesCtor(s._rawCount),c=new u(o),p=[],d=r.length,_=0,ja=r[0],Ja=s._chunks,ec=0;ec<o;ec++){var tc=void 0,rc=s.getRawIndex(ec);if(d===0)tc=a(ec);else if(d===1){var nc=Ja[ja][rc];tc=a(nc,ec)}else{for(var ic=0;ic<d;ic++)p[ic]=Ja[r[ic]][rc];p[ic]=ec,tc=a.apply(null,p)}tc&&(c[_++]=rc)}return _<o&&(s._indices=c),s._count=_,s._extent=[],s._updateGetRawIdx(),s},n.prototype.selectRange=function(r){var a=this.clone(),s=a._count;if(!s)return this;var o=keys(r),u=o.length;if(!u)return this;var c=a.count(),p=getIndicesCtor(a._rawCount),d=new p(c),_=0,ja=o[0],Ja=r[ja][0],ec=r[ja][1],tc=a._chunks,rc=!1;if(!a._indices){var nc=0;if(u===1){for(var ic=tc[o[0]],uc=0;uc<s;uc++){var eh=ic[uc];(eh>=Ja&&eh<=ec||isNaN(eh))&&(d[_++]=nc),nc++}rc=!0}else if(u===2){for(var ic=tc[o[0]],rh=tc[o[1]],ah=r[o[1]][0],ih=r[o[1]][1],uc=0;uc<s;uc++){var eh=ic[uc],oh=rh[uc];(eh>=Ja&&eh<=ec||isNaN(eh))&&(oh>=ah&&oh<=ih||isNaN(oh))&&(d[_++]=nc),nc++}rc=!0}}if(!rc)if(u===1)for(var uc=0;uc<c;uc++){var uh=a.getRawIndex(uc),eh=tc[o[0]][uh];(eh>=Ja&&eh<=ec||isNaN(eh))&&(d[_++]=uh)}else for(var uc=0;uc<c;uc++){for(var ch=!0,uh=a.getRawIndex(uc),hh=0;hh<u;hh++){var dh=o[hh],eh=tc[dh][uh];(eh<r[dh][0]||eh>r[dh][1])&&(ch=!1)}ch&&(d[_++]=a.getRawIndex(uc))}return _<c&&(a._indices=d),a._count=_,a._extent=[],a._updateGetRawIdx(),a},n.prototype.map=function(r,a){var s=this.clone(r);return this._updateDims(s,r,a),s},n.prototype.modify=function(r,a){this._updateDims(this,r,a)},n.prototype._updateDims=function(r,a,s){for(var o=r._chunks,u=[],c=a.length,p=r.count(),d=[],_=r._rawExtent,ja=0;ja<a.length;ja++)_[a[ja]]=getInitialExtent();for(var Ja=0;Ja<p;Ja++){for(var ec=r.getRawIndex(Ja),tc=0;tc<c;tc++)d[tc]=o[a[tc]][ec];d[c]=Ja;var rc=s&&s.apply(null,d);if(rc!=null){typeof rc!="object"&&(u[0]=rc,rc=u);for(var ja=0;ja<rc.length;ja++){var nc=a[ja],ic=rc[ja],uc=_[nc],eh=o[nc];eh&&(eh[ec]=ic),ic<uc[0]&&(uc[0]=ic),ic>uc[1]&&(uc[1]=ic)}}}},n.prototype.lttbDownSample=function(r,a){var s=this.clone([r],!0),o=s._chunks,u=o[r],c=this.count(),p=0,d=Math.floor(1/a),_=this.getRawIndex(0),ja,Ja,ec,tc=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(c/d)+2)*2,c));tc[p++]=_;for(var rc=1;rc<c-1;rc+=d){for(var nc=Math.min(rc+d,c-1),ic=Math.min(rc+d*2,c),uc=(ic+nc)/2,eh=0,rh=nc;rh<ic;rh++){var ah=this.getRawIndex(rh),ih=u[ah];isNaN(ih)||(eh+=ih)}eh/=ic-nc;var oh=rc,uh=Math.min(rc+d,c),ch=rc-1,hh=u[_];ja=-1,ec=oh;for(var dh=-1,gh=0,rh=oh;rh<uh;rh++){var ah=this.getRawIndex(rh),ih=u[ah];if(isNaN(ih)){gh++,dh<0&&(dh=ah);continue}Ja=Math.abs((ch-uc)*(ih-hh)-(ch-rh)*(eh-hh)),Ja>ja&&(ja=Ja,ec=ah)}gh>0&&gh<uh-oh&&(tc[p++]=Math.min(dh,ec),ec=Math.max(dh,ec)),tc[p++]=ec,_=ec}return tc[p++]=this.getRawIndex(c-1),s._count=p,s._indices=tc,s.getRawIndex=this._getRawIdx,s},n.prototype.downSample=function(r,a,s,o){for(var u=this.clone([r],!0),c=u._chunks,p=[],d=Math.floor(1/a),_=c[r],ja=this.count(),Ja=u._rawExtent[r]=getInitialExtent(),ec=new(getIndicesCtor(this._rawCount))(Math.ceil(ja/d)),tc=0,rc=0;rc<ja;rc+=d){d>ja-rc&&(d=ja-rc,p.length=d);for(var nc=0;nc<d;nc++){var ic=this.getRawIndex(rc+nc);p[nc]=_[ic]}var uc=s(p),eh=this.getRawIndex(Math.min(rc+o(p,uc)||0,ja-1));_[eh]=uc,uc<Ja[0]&&(Ja[0]=uc),uc>Ja[1]&&(Ja[1]=uc),ec[tc++]=eh}return u._count=tc,u._indices=ec,u._updateGetRawIdx(),u},n.prototype.each=function(r,a){if(this._count)for(var s=r.length,o=this._chunks,u=0,c=this.count();u<c;u++){var p=this.getRawIndex(u);switch(s){case 0:a(u);break;case 1:a(o[r[0]][p],u);break;case 2:a(o[r[0]][p],o[r[1]][p],u);break;default:for(var d=0,_=[];d<s;d++)_[d]=o[r[d]][p];_[d]=u,a.apply(null,_)}}},n.prototype.getDataExtent=function(r){var a=this._chunks[r],s=getInitialExtent();if(!a)return s;var o=this.count(),u=!this._indices,c;if(u)return this._rawExtent[r].slice();if(c=this._extent[r],c)return c.slice();c=s;for(var p=c[0],d=c[1],_=0;_<o;_++){var ja=this.getRawIndex(_),Ja=a[ja];Ja<p&&(p=Ja),Ja>d&&(d=Ja)}return c=[p,d],this._extent[r]=c,c},n.prototype.getRawDataItem=function(r){var a=this.getRawIndex(r);if(this._provider.persistent)return this._provider.getItem(a);for(var s=[],o=this._chunks,u=0;u<o.length;u++)s.push(o[u][a]);return s},n.prototype.clone=function(r,a){var s=new n,o=this._chunks,u=r&&reduce(r,function(p,d){return p[d]=!0,p},{});if(u)for(var c=0;c<o.length;c++)s._chunks[c]=u[c]?cloneChunk(o[c]):o[c];else s._chunks=o;return this._copyCommonProps(s),a||(s._indices=this._cloneIndices()),s._updateGetRawIdx(),s},n.prototype._copyCommonProps=function(r){r._count=this._count,r._rawCount=this._rawCount,r._provider=this._provider,r._dimensions=this._dimensions,r._extent=clone$4(this._extent),r._rawExtent=clone$4(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var r=this._indices.constructor,a=void 0;if(r===Array){var s=this._indices.length;a=new r(s);for(var o=0;o<s;o++)a[o]=this._indices[o]}else a=new r(this._indices);return a}return null},n.prototype._getRawIdxIdentity=function(r){return r},n.prototype._getRawIdx=function(r){return r<this._count&&r>=0?this._indices[r]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function r(a,s,o,u){return parseDataValue(a[u],this._dimensions[u])}defaultDimValueGetters={arrayRows:r,objectRows:function(a,s,o,u){return parseDataValue(a[s],this._dimensions[u])},keyedColumns:r,original:function(a,s,o,u){var c=a&&(a.value==null?a:a.value);return parseDataValue(c instanceof Array?c[u]:c,this._dimensions[u])},typedArray:function(a,s,o,u){return a[u]}}}(),n}(),SourceManager=function(){function n(r){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=r}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(r,a){this._sourceList=r,this._upstreamSignList=a,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var r=this._sourceHost,a=this._getUpstreamSourceManagers(),s=!!a.length,o,u;if(isSeries(r)){var c=r,p=void 0,d=void 0,_=void 0;if(s){var ja=a[0];ja.prepareSource(),_=ja.getSource(),p=_.data,d=_.sourceFormat,u=[ja._getVersionSign()]}else p=c.get("data",!0),d=isTypedArray(p)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,u=[];var Ja=this._getSourceMetaRawOption()||{},ec=_&&_.metaRawOption||{},tc=retrieve2(Ja.seriesLayoutBy,ec.seriesLayoutBy)||null,rc=retrieve2(Ja.sourceHeader,ec.sourceHeader),nc=retrieve2(Ja.dimensions,ec.dimensions),ic=tc!==ec.seriesLayoutBy||!!rc!=!!ec.sourceHeader||nc;o=ic?[createSource(p,{seriesLayoutBy:tc,sourceHeader:rc,dimensions:nc},d)]:[]}else{var uc=r;if(s){var eh=this._applyTransform(a);o=eh.sourceList,u=eh.upstreamSignList}else{var rh=uc.get("source",!0);o=[createSource(rh,this._getSourceMetaRawOption(),null)],u=[]}}this._setLocalSource(o,u)},n.prototype._applyTransform=function(r){var a=this._sourceHost,s=a.get("transform",!0),o=a.get("fromTransformResult",!0);if(o!=null){var u="";r.length!==1&&doThrow(u)}var c,p=[],d=[];return each$f(r,function(_){_.prepareSource();var ja=_.getSource(o||0),Ja="";o!=null&&!ja&&doThrow(Ja),p.push(ja),d.push(_._getVersionSign())}),s?c=applyDataTransform(s,p,{datasetIndex:a.componentIndex}):o!=null&&(c=[cloneSourceShallow(p[0])]),{sourceList:c,upstreamSignList:d}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var r=this._getUpstreamSourceManagers(),a=0;a<r.length;a++){var s=r[a];if(s._isDirty()||this._upstreamSignList[a]!==s._getVersionSign())return!0}},n.prototype.getSource=function(r){r=r||0;var a=this._sourceList[r];if(!a){var s=this._getUpstreamSourceManagers();return s[0]&&s[0].getSource(r)}return a},n.prototype.getSharedDataStore=function(r){var a=r.makeStoreSchema();return this._innerGetDataStore(a.dimensions,r.source,a.hash)},n.prototype._innerGetDataStore=function(r,a,s){var o=0,u=this._storeList,c=u[o];c||(c=u[o]={});var p=c[s];if(!p){var d=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&d?p=d._innerGetDataStore(r,a,s):(p=new DataStore,p.initData(new DefaultDataProvider(a,r.length),r)),c[s]=p}return p},n.prototype._getUpstreamSourceManagers=function(){var r=this._sourceHost;if(isSeries(r)){var a=querySeriesUpstreamDatasetModel(r);return a?[a.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(r),function(s){return s.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var r=this._sourceHost,a,s,o;if(isSeries(r))a=r.get("seriesLayoutBy",!0),s=r.get("sourceHeader",!0),o=r.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var u=r;a=u.get("seriesLayoutBy",!0),s=u.get("sourceHeader",!0),o=u.get("dimensions",!0)}return{seriesLayoutBy:a,sourceHeader:s,dimensions:o}},n}();function disableTransformOptionMerge(n){var r=n.option.transform;r&&setAsPrimitive(n.option.transform)}function isSeries(n){return n.mainType==="series"}function doThrow(n){throw new Error(n)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipTextStyle(n,r){var a=n.color||"#6e7079",s=n.fontSize||12,o=n.fontWeight||"400",u=n.color||"#464646",c=n.fontSize||14,p=n.fontWeight||"900";return r==="html"?{nameStyle:"font-size:"+encodeHTML(s+"")+"px;color:"+encodeHTML(a)+";font-weight:"+encodeHTML(o+""),valueStyle:"font-size:"+encodeHTML(c+"")+"px;color:"+encodeHTML(u)+";font-weight:"+encodeHTML(p+"")}:{nameStyle:{fontSize:s,fill:a,fontWeight:o},valueStyle:{fontSize:c,fill:u,fontWeight:p}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(n,r){return r.type=n,r}function isSectionFragment(n){return n.type==="section"}function getBuilder(n){return isSectionFragment(n)?buildSection:buildNameValue}function getBlockGapLevel(n){if(isSectionFragment(n)){var r=0,a=n.blocks.length,s=a>1||a>0&&!n.noHeader;return each$f(n.blocks,function(o){var u=getBlockGapLevel(o);u>=r&&(r=u+ +(s&&(!u||isSectionFragment(o)&&!o.noHeader)))}),r}return 0}function buildSection(n,r,a,s){var o=r.noHeader,u=getGap(getBlockGapLevel(r)),c=[],p=r.blocks||[];assert(!p||isArray$1(p)),p=p||[];var d=n.orderMode;if(r.sortBlocks&&d){p=p.slice();var _={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(_,d)){var ja=new SortOrderComparator(_[d],null);p.sort(function(rc,nc){return ja.evaluate(rc.sortParam,nc.sortParam)})}else d==="seriesDesc"&&p.reverse()}each$f(p,function(rc,nc){var ic=r.valueFormatter,uc=getBuilder(rc)(ic?extend$2(extend$2({},n),{valueFormatter:ic}):n,rc,nc>0?u.html:0,s);uc!=null&&c.push(uc)});var Ja=n.renderMode==="richText"?c.join(u.richText):wrapBlockHTML(c.join(""),o?a:u.html);if(o)return Ja;var ec=makeValueReadable(r.header,"ordinal",n.useUTC),tc=getTooltipTextStyle(s,n.renderMode).nameStyle;return n.renderMode==="richText"?wrapInlineNameRichText(n,ec,tc)+u.richText+Ja:wrapBlockHTML('<div style="'+tc+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+encodeHTML(ec)+"</div>"+Ja,a)}function buildNameValue(n,r,a,s){var o=n.renderMode,u=r.noName,c=r.noValue,p=!r.markerType,d=r.name,_=n.useUTC,ja=r.valueFormatter||n.valueFormatter||function(ah){return ah=isArray$1(ah)?ah:[ah],map$1(ah,function(ih,oh){return makeValueReadable(ih,isArray$1(tc)?tc[oh]:tc,_)})};if(!(u&&c)){var Ja=p?"":n.markupStyleCreator.makeTooltipMarker(r.markerType,r.markerColor||"#333",o),ec=u?"":makeValueReadable(d,"ordinal",_),tc=r.valueType,rc=c?[]:ja(r.value,r.dataIndex),nc=!p||!u,ic=!p&&u,uc=getTooltipTextStyle(s,o),eh=uc.nameStyle,rh=uc.valueStyle;return o==="richText"?(p?"":Ja)+(u?"":wrapInlineNameRichText(n,ec,eh))+(c?"":wrapInlineValueRichText(n,rc,nc,ic,rh)):wrapBlockHTML((p?"":Ja)+(u?"":wrapInlineNameHTML(ec,!p,eh))+(c?"":wrapInlineValueHTML(rc,nc,ic,rh)),a)}}function buildTooltipMarkup(n,r,a,s,o,u){if(n){var c=getBuilder(n),p={useUTC:o,renderMode:a,orderMode:s,markupStyleCreator:r,valueFormatter:n.valueFormatter};return c(p,n,0,u)}}function getGap(n){return{html:HTML_GAPS[n],richText:RICH_TEXT_GAPS[n]}}function wrapBlockHTML(n,r){var a='<div style="clear:both"></div>',s="margin: "+r+"px 0 0";return'<div style="'+s+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+n+a+"</div>"}function wrapInlineNameHTML(n,r,a){var s=r?"margin-left:2px":"";return'<span style="'+a+";"+s+'">'+encodeHTML(n)+"</span>"}function wrapInlineValueHTML(n,r,a,s){var o=a?"10px":"20px",u=r?"float:right;margin-left:"+o:"";return n=isArray$1(n)?n:[n],'<span style="'+u+";"+s+'">'+map$1(n,function(c){return encodeHTML(c)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(n,r,a){return n.markupStyleCreator.wrapRichTextStyle(r,a)}function wrapInlineValueRichText(n,r,a,s,o){var u=[o],c=s?10:20;return a&&u.push({padding:[0,0,0,c],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(isArray$1(r)?r.join("  "):r,u)}function retrieveVisualColorForTooltipMarker(n,r){var a=n.getData().getItemVisual(r,"style"),s=a[n.visualDrawType];return convertToColorString(s)}function getPaddingFromTooltipModel(n,r){var a=n.get("padding");return a??(r==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function n(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(r,a,s){var o=s==="richText"?this._generateStyleName():null,u=getTooltipMarker({color:a,type:r,renderMode:s,markerId:o});return isString(u)?u:(this.richTextStyles[o]=u.style,u.content)},n.prototype.wrapRichTextStyle=function(r,a){var s={};isArray$1(a)?each$f(a,function(u){return extend$2(s,u)}):extend$2(s,a);var o=this._generateStyleName();return this.richTextStyles[o]=s,"{"+o+"|"+r+"}"},n}();function defaultSeriesFormatTooltip(n){var r=n.series,a=n.dataIndex,s=n.multipleSeries,o=r.getData(),u=o.mapDimensionsAll("defaultedTooltip"),c=u.length,p=r.getRawValue(a),d=isArray$1(p),_=retrieveVisualColorForTooltipMarker(r,a),ja,Ja,ec,tc;if(c>1||d&&!c){var rc=formatTooltipArrayValue(p,r,a,u,_);ja=rc.inlineValues,Ja=rc.inlineValueTypes,ec=rc.blocks,tc=rc.inlineValues[0]}else if(c){var nc=o.getDimensionInfo(u[0]);tc=ja=retrieveRawValue(o,a,u[0]),Ja=nc.type}else tc=ja=d?p[0]:p;var ic=isNameSpecified(r),uc=ic&&r.name||"",eh=o.getName(a),rh=s?uc:eh;return createTooltipMarkup("section",{header:uc,noHeader:s||!ic,sortParam:tc,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:_,name:rh,noName:!trim$1(rh),value:ja,valueType:Ja,dataIndex:a})].concat(ec||[])})}function formatTooltipArrayValue(n,r,a,s,o){var u=r.getData(),c=reduce(n,function(Ja,ec,tc){var rc=u.getDimensionInfo(tc);return Ja=Ja||rc&&rc.tooltip!==!1&&rc.displayName!=null},!1),p=[],d=[],_=[];s.length?each$f(s,function(Ja){ja(retrieveRawValue(u,a,Ja),Ja)}):each$f(n,ja);function ja(Ja,ec){var tc=u.getDimensionInfo(ec);!tc||tc.otherDims.tooltip===!1||(c?_.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:o,name:tc.displayName,value:Ja,valueType:tc.type})):(p.push(Ja),d.push(tc.type)))}return{inlineValues:p,inlineValueTypes:d,blocks:_}}var inner$k=makeInner();function getSelectionKey(n,r){return n.getName(r)||n.getId(r)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a._selectedDataIndicesMap={},a}return r.prototype.init=function(a,s,o){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(a,o);var u=inner$k(this).sourceManager=new SourceManager(this);u.prepareSource();var c=this.getInitialData(a,o);wrapData(c,this),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},r.prototype.mergeDefaultAndTheme=function(a,s){var o=fetchLayoutMode(this),u=o?getLayoutParams(a):{},c=this.subType;ComponentModel.hasClass(c)&&(c+="Series"),merge(a,s.getTheme().get(this.subType)),merge(a,this.getDefaultOption()),defaultEmphasis(a,"label",["show"]),this.fillDataTextStyle(a.data),o&&mergeLayoutParam(a,u,o)},r.prototype.mergeOption=function(a,s){a=merge(this.option,a,!0),this.fillDataTextStyle(a.data);var o=fetchLayoutMode(this);o&&mergeLayoutParam(this.option,a,o);var u=inner$k(this).sourceManager;u.dirty(),u.prepareSource();var c=this.getInitialData(a,s);wrapData(c,this),this.dataTask.dirty(),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},r.prototype.fillDataTextStyle=function(a){if(a&&!isTypedArray(a))for(var s=["show"],o=0;o<a.length;o++)a[o]&&a[o].label&&defaultEmphasis(a[o],"label",s)},r.prototype.getInitialData=function(a,s){},r.prototype.appendData=function(a){var s=this.getRawData();s.appendData(a.data)},r.prototype.getData=function(a){var s=getCurrentTask(this);if(s){var o=s.context.data;return a==null?o:o.getLinkedData(a)}else return inner$k(this).data},r.prototype.getAllData=function(){var a=this.getData();return a&&a.getLinkedDataAll?a.getLinkedDataAll():[{data:a}]},r.prototype.setData=function(a){var s=getCurrentTask(this);if(s){var o=s.context;o.outputData=a,s!==this.dataTask&&(o.data=a)}inner$k(this).data=a},r.prototype.getEncode=function(){var a=this.get("encode",!0);if(a)return createHashMap(a)},r.prototype.getSourceManager=function(){return inner$k(this).sourceManager},r.prototype.getSource=function(){return this.getSourceManager().getSource()},r.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},r.prototype.getColorBy=function(){var a=this.get("colorBy");return a||"series"},r.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},r.prototype.getBaseAxis=function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},r.prototype.formatTooltip=function(a,s,o){return defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:s})},r.prototype.isAnimationEnabled=function(){var a=this.ecModel;if(env.node&&!(a&&a.ssr))return!1;var s=this.getShallow("animation");return s&&this.getData().count()>this.getShallow("animationThreshold")&&(s=!1),!!s},r.prototype.restoreData=function(){this.dataTask.dirty()},r.prototype.getColorFromPalette=function(a,s,o){var u=this.ecModel,c=PaletteMixin.prototype.getColorFromPalette.call(this,a,s,o);return c||(c=u.getColorFromPalette(a,s,o)),c},r.prototype.coordDimToDataDim=function(a){return this.getRawData().mapDimensionsAll(a)},r.prototype.getProgressive=function(){return this.get("progressive")},r.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},r.prototype.select=function(a,s){this._innerSelect(this.getData(s),a)},r.prototype.unselect=function(a,s){var o=this.option.selectedMap;if(o){var u=this.option.selectedMode,c=this.getData(s);if(u==="series"||o==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var p=0;p<a.length;p++){var d=a[p],_=getSelectionKey(c,d);o[_]=!1,this._selectedDataIndicesMap[_]=-1}}},r.prototype.toggleSelect=function(a,s){for(var o=[],u=0;u<a.length;u++)o[0]=a[u],this.isSelected(a[u],s)?this.unselect(o,s):this.select(o,s)},r.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var a=this._selectedDataIndicesMap,s=keys(a),o=[],u=0;u<s.length;u++){var c=a[s[u]];c>=0&&o.push(c)}return o},r.prototype.isSelected=function(a,s){var o=this.option.selectedMap;if(!o)return!1;var u=this.getData(s);return(o==="all"||o[getSelectionKey(u,a)])&&!u.getItemModel(a).get(["select","disabled"])},r.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var a=this.option.universalTransition;return a?a===!0?!0:a&&a.enabled:!1},r.prototype._innerSelect=function(a,s){var o,u,c=this.option,p=c.selectedMode,d=s.length;if(!(!p||!d)){if(p==="series")c.selectedMap="all";else if(p==="multiple"){isObject$3(c.selectedMap)||(c.selectedMap={});for(var _=c.selectedMap,ja=0;ja<d;ja++){var Ja=s[ja],ec=getSelectionKey(a,Ja);_[ec]=!0,this._selectedDataIndicesMap[ec]=a.getRawIndex(Ja)}}else if(p==="single"||p===!0){var tc=s[d-1],ec=getSelectionKey(a,tc);c.selectedMap=(o={},o[ec]=!0,o),this._selectedDataIndicesMap=(u={},u[ec]=a.getRawIndex(tc),u)}}},r.prototype._initSelectedMapFromData=function(a){if(!this.option.selectedMap){var s=[];a.hasItemOption&&a.each(function(o){var u=a.getRawDataItem(o);u&&u.selected&&s.push(o)}),s.length>0&&this._innerSelect(a,s)}},r.registerClass=function(a){return ComponentModel.registerClass(a)},r.protoInitialize=function(){var a=r.prototype;a.type="series.__base__",a.seriesIndex=0,a.ignoreStyleOnData=!1,a.hasSymbolVisual=!1,a.defaultSymbol="circle",a.visualStyleAccessPath="itemStyle",a.visualDrawType="fill"}(),r}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(n){var r=n.name;isNameSpecified(n)||(n.name=getSeriesAutoName(n)||r)}function getSeriesAutoName(n){var r=n.getRawData(),a=r.mapDimensionsAll("seriesName"),s=[];return each$f(a,function(o){var u=r.getDimensionInfo(o);u.displayName&&s.push(u.displayName)}),s.join(" ")}function dataTaskCount(n){return n.model.getRawData().count()}function dataTaskReset(n){var r=n.model;return r.setData(r.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(n,r){r.outputData&&n.end>r.outputData.count()&&r.model.getRawData().cloneShallow(r.outputData)}function wrapData(n,r){each$f(concatArray(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(a){n.wrapMethod(a,curry$1(onDataChange,r))})}function onDataChange(n,r){var a=getCurrentTask(n);return a&&a.setOutputEnd((r||this).count()),r}function getCurrentTask(n){var r=(n.ecModel||{}).scheduler,a=r&&r.getPipeline(n.uid);if(a){var s=a.currentTask;if(s){var o=s.agentStubMap;o&&(s=o.get(n.uid))}return s}}var ComponentView=function(){function n(){this.group=new Group$3,this.uid=getUID("viewComponent")}return n.prototype.init=function(r,a){},n.prototype.render=function(r,a,s,o){},n.prototype.dispose=function(r,a){},n.prototype.updateView=function(r,a,s,o){},n.prototype.updateLayout=function(r,a,s,o){},n.prototype.updateVisual=function(r,a,s,o){},n.prototype.toggleBlurSeries=function(r,a,s){},n.prototype.eachRendered=function(r){var a=this.group;a&&a.traverse(r)},n}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var n=makeInner();return function(r){var a=n(r),s=r.pipelineContext,o=!!a.large,u=!!a.progressiveRender,c=a.large=!!(s&&s.large),p=a.progressiveRender=!!(s&&s.progressiveRender);return(o!==c||u!==p)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function n(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return n.prototype.init=function(r,a){},n.prototype.render=function(r,a,s,o){},n.prototype.highlight=function(r,a,s,o){var u=r.getData(o&&o.dataType);u&&toggleHighlight(u,o,"emphasis")},n.prototype.downplay=function(r,a,s,o){var u=r.getData(o&&o.dataType);u&&toggleHighlight(u,o,"normal")},n.prototype.remove=function(r,a){this.group.removeAll()},n.prototype.dispose=function(r,a){},n.prototype.updateView=function(r,a,s,o){this.render(r,a,s,o)},n.prototype.updateLayout=function(r,a,s,o){this.render(r,a,s,o)},n.prototype.updateVisual=function(r,a,s,o){this.render(r,a,s,o)},n.prototype.eachRendered=function(r){traverseElements(this.group,r)},n.markUpdateMethod=function(r,a){inner$j(r).updateMethod=a},n.protoInitialize=function(){var r=n.prototype;r.type="chart"}(),n}();function elSetState(n,r,a){n&&isHighDownDispatcher(n)&&(r==="emphasis"?enterEmphasis:leaveEmphasis)(n,a)}function toggleHighlight(n,r,a){var s=queryDataIndex(n,r),o=r&&r.highlightKey!=null?getHighlightDigit(r.highlightKey):null;s!=null?each$f(normalizeToArray(s),function(u){elSetState(n.getItemGraphicEl(u),a,o)}):n.eachItemGraphicEl(function(u){elSetState(u,a,o)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(n){return renderPlanner(n.model)}function renderTaskReset(n){var r=n.model,a=n.ecModel,s=n.api,o=n.payload,u=r.pipelineContext.progressiveRender,c=n.view,p=o&&inner$j(o).updateMethod,d=u?"incrementalPrepareRender":p&&c[p]?p:"render";return d!=="render"&&c[d](r,a,s,o),progressMethodMap[d]}var progressMethodMap={incrementalPrepareRender:{progress:function(n,r){r.view.incrementalRender(n,r.model,r.ecModel,r.api,r.payload)}},render:{forceFirstProgress:!0,progress:function(n,r){r.view.render(r.model,r.ecModel,r.api,r.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(n,r,a){var s,o=0,u=0,c=null,p,d,_,ja;r=r||0;function Ja(){u=new Date().getTime(),c=null,n.apply(d,_||[])}var ec=function(){for(var tc=[],rc=0;rc<arguments.length;rc++)tc[rc]=arguments[rc];s=new Date().getTime(),d=this,_=tc;var nc=ja||r,ic=ja||a;ja=null,p=s-(ic?o:u)-nc,clearTimeout(c),ic?c=setTimeout(Ja,nc):p>=0?Ja():c=setTimeout(Ja,-p),o=s};return ec.clear=function(){c&&(clearTimeout(c),c=null)},ec.debounceNextCall=function(tc){ja=tc},ec}function createOrUpdate(n,r,a,s){var o=n[r];if(o){var u=o[ORIGIN_METHOD]||o,c=o[THROTTLE_TYPE],p=o[RATE];if(p!==a||c!==s){if(a==null||!s)return n[r]=u;o=n[r]=throttle(u,a,s==="debounce"),o[ORIGIN_METHOD]=u,o[THROTTLE_TYPE]=s,o[RATE]=a}return o}}function clear$1(n,r){var a=n[r];a&&a[ORIGIN_METHOD]&&(a.clear&&a.clear(),n[r]=a[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(n,r){var a=n.visualStyleMapper||defaultStyleMappers[r];return a||(console.warn("Unknown style type '"+r+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(n,r){var a=n.visualDrawType||defaultColorKey[r];return a||(console.warn("Unknown style type '"+r+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,r){var a=n.getData(),s=n.visualStyleAccessPath||"itemStyle",o=n.getModel(s),u=getStyleMapper(n,s),c=u(o),p=o.getShallow("decal");p&&(a.setVisual("decal",p),p.dirty=!0);var d=getDefaultColorKey(n,s),_=c[d],ja=isFunction(_)?_:null,Ja=c.fill==="auto"||c.stroke==="auto";if(!c[d]||ja||Ja){var ec=n.getColorFromPalette(n.name,null,r.getSeriesCount());c[d]||(c[d]=ec,a.setVisual("colorFromPalette",!0)),c.fill=c.fill==="auto"||isFunction(c.fill)?ec:c.fill,c.stroke=c.stroke==="auto"||isFunction(c.stroke)?ec:c.stroke}if(a.setVisual("style",c),a.setVisual("drawType",d),!r.isSeriesFiltered(n)&&ja)return a.setVisual("colorFromPalette",!1),{dataEach:function(tc,rc){var nc=n.getDataParams(rc),ic=extend$2({},c);ic[d]=ja(nc),tc.setItemVisual(rc,"style",ic)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,r){if(!(n.ignoreStyleOnData||r.isSeriesFiltered(n))){var a=n.getData(),s=n.visualStyleAccessPath||"itemStyle",o=getStyleMapper(n,s),u=a.getVisual("drawType");return{dataEach:a.hasItemOption?function(c,p){var d=c.getRawDataItem(p);if(d&&d[s]){sharedModel.option=d[s];var _=o(sharedModel),ja=c.ensureUniqueItemVisual(p,"style");extend$2(ja,_),sharedModel.option.decal&&(c.setItemVisual(p,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),u in _&&c.setItemVisual(p,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(n){var r=createHashMap();n.eachSeries(function(a){var s=a.getColorBy();if(!a.isColorBySeries()){var o=a.type+"-"+s,u=r.get(o);u||(u={},r.set(o,u)),inner$i(a).scope=u}}),n.eachSeries(function(a){if(!(a.isColorBySeries()||n.isSeriesFiltered(a))){var s=a.getRawData(),o={},u=a.getData(),c=inner$i(a).scope,p=a.visualStyleAccessPath||"itemStyle",d=getDefaultColorKey(a,p);u.each(function(_){var ja=u.getRawIndex(_);o[ja]=_}),s.each(function(_){var ja=o[_],Ja=u.getItemVisual(ja,"colorFromPalette");if(Ja){var ec=u.ensureUniqueItemVisual(ja,"style"),tc=s.getName(_)||_+"",rc=s.count();ec[d]=a.getColorFromPalette(tc,c,rc)}})}})}},PI$7=Math.PI;function defaultLoading(n,r){r=r||{},defaults(r,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var a=new Group$3,s=new Rect$2({style:{fill:r.maskColor},zlevel:r.zlevel,z:1e4});a.add(s);var o=new ZRText({style:{text:r.text,fill:r.textColor,fontSize:r.fontSize,fontWeight:r.fontWeight,fontStyle:r.fontStyle,fontFamily:r.fontFamily},zlevel:r.zlevel,z:10001}),u=new Rect$2({style:{fill:"none"},textContent:o,textConfig:{position:"right",distance:10},zlevel:r.zlevel,z:10001});a.add(u);var c;return r.showSpinner&&(c=new Arc({shape:{startAngle:-PI$7/2,endAngle:-PI$7/2+.1,r:r.spinnerRadius},style:{stroke:r.color,lineCap:"round",lineWidth:r.lineWidth},zlevel:r.zlevel,z:10001}),c.animateShape(!0).when(1e3,{endAngle:PI$7*3/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:PI$7*3/2}).delay(300).start("circularInOut"),a.add(c)),a.resize=function(){var p=o.getBoundingRect().width,d=r.showSpinner?r.spinnerRadius:0,_=(n.getWidth()-d*2-(r.showSpinner&&p?10:0)-p)/2-(r.showSpinner&&p?0:5+p/2)+(r.showSpinner?0:p/2)+(p?0:d),ja=n.getHeight()/2;r.showSpinner&&c.setShape({cx:_,cy:ja}),u.setShape({x:_-d,y:ja-d,width:d*2,height:d*2}),s.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},a.resize(),a}var Scheduler=function(){function n(r,a,s,o){this._stageTaskMap=createHashMap(),this.ecInstance=r,this.api=a,s=this._dataProcessorHandlers=s.slice(),o=this._visualHandlers=o.slice(),this._allHandlers=s.concat(o)}return n.prototype.restoreData=function(r,a){r.restoreData(a),this._stageTaskMap.each(function(s){var o=s.overallTask;o&&o.dirty()})},n.prototype.getPerformArgs=function(r,a){if(r.__pipeline){var s=this._pipelineMap.get(r.__pipeline.id),o=s.context,u=!a&&s.progressiveEnabled&&(!o||o.progressiveRender)&&r.__idxInPipeline>s.blockIndex,c=u?s.step:null,p=o&&o.modDataCount,d=p!=null?Math.ceil(p/c):null;return{step:c,modBy:d,modDataCount:p}}},n.prototype.getPipeline=function(r){return this._pipelineMap.get(r)},n.prototype.updateStreamModes=function(r,a){var s=this._pipelineMap.get(r.uid),o=r.getData(),u=o.count(),c=s.progressiveEnabled&&a.incrementalPrepareRender&&u>=s.threshold,p=r.get("large")&&u>=r.get("largeThreshold"),d=r.get("progressiveChunkMode")==="mod"?u:null;r.pipelineContext=s.context={progressiveRender:c,modDataCount:d,large:p}},n.prototype.restorePipelines=function(r){var a=this,s=a._pipelineMap=createHashMap();r.eachSeries(function(o){var u=o.getProgressive(),c=o.uid;s.set(c,{id:c,head:null,tail:null,threshold:o.getProgressiveThreshold(),progressiveEnabled:u&&!(o.preventIncremental&&o.preventIncremental()),blockIndex:-1,step:Math.round(u||700),count:0}),a._pipe(o,o.dataTask)})},n.prototype.prepareStageTasks=function(){var r=this._stageTaskMap,a=this.api.getModel(),s=this.api;each$f(this._allHandlers,function(o){var u=r.get(o.uid)||r.set(o.uid,{}),c="";assert(!(o.reset&&o.overallReset),c),o.reset&&this._createSeriesStageTask(o,u,a,s),o.overallReset&&this._createOverallStageTask(o,u,a,s)},this)},n.prototype.prepareView=function(r,a,s,o){var u=r.renderTask,c=u.context;c.model=a,c.ecModel=s,c.api=o,u.__block=!r.incrementalPrepareRender,this._pipe(a,u)},n.prototype.performDataProcessorTasks=function(r,a){this._performStageTasks(this._dataProcessorHandlers,r,a,{block:!0})},n.prototype.performVisualTasks=function(r,a,s){this._performStageTasks(this._visualHandlers,r,a,s)},n.prototype._performStageTasks=function(r,a,s,o){o=o||{};var u=!1,c=this;each$f(r,function(d,_){if(!(o.visualType&&o.visualType!==d.visualType)){var ja=c._stageTaskMap.get(d.uid),Ja=ja.seriesTaskMap,ec=ja.overallTask;if(ec){var tc,rc=ec.agentStubMap;rc.each(function(ic){p(o,ic)&&(ic.dirty(),tc=!0)}),tc&&ec.dirty(),c.updatePayload(ec,s);var nc=c.getPerformArgs(ec,o.block);rc.each(function(ic){ic.perform(nc)}),ec.perform(nc)&&(u=!0)}else Ja&&Ja.each(function(ic,uc){p(o,ic)&&ic.dirty();var eh=c.getPerformArgs(ic,o.block);eh.skip=!d.performRawSeries&&a.isSeriesFiltered(ic.context.model),c.updatePayload(ic,s),ic.perform(eh)&&(u=!0)})}});function p(d,_){return d.setDirty&&(!d.dirtyMap||d.dirtyMap.get(_.__pipeline.id))}this.unfinished=u||this.unfinished},n.prototype.performSeriesTasks=function(r){var a;r.eachSeries(function(s){a=s.dataTask.perform()||a}),this.unfinished=a||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(r){var a=r.tail;do{if(a.__block){r.blockIndex=a.__idxInPipeline;break}a=a.getUpstream()}while(a)})},n.prototype.updatePayload=function(r,a){a!=="remain"&&(r.context.payload=a)},n.prototype._createSeriesStageTask=function(r,a,s,o){var u=this,c=a.seriesTaskMap,p=a.seriesTaskMap=createHashMap(),d=r.seriesType,_=r.getTargetSeries;r.createOnAllSeries?s.eachRawSeries(ja):d?s.eachRawSeriesByType(d,ja):_&&_(s,o).each(ja);function ja(Ja){var ec=Ja.uid,tc=p.set(ec,c&&c.get(ec)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));tc.context={model:Ja,ecModel:s,api:o,useClearVisual:r.isVisual&&!r.isLayout,plan:r.plan,reset:r.reset,scheduler:u},u._pipe(Ja,tc)}},n.prototype._createOverallStageTask=function(r,a,s,o){var u=this,c=a.overallTask=a.overallTask||createTask({reset:overallTaskReset});c.context={ecModel:s,api:o,overallReset:r.overallReset,scheduler:u};var p=c.agentStubMap,d=c.agentStubMap=createHashMap(),_=r.seriesType,ja=r.getTargetSeries,Ja=!0,ec=!1,tc="";assert(!r.createOnAllSeries,tc),_?s.eachRawSeriesByType(_,rc):ja?ja(s,o).each(rc):(Ja=!1,each$f(s.getSeries(),rc));function rc(nc){var ic=nc.uid,uc=d.set(ic,p&&p.get(ic)||(ec=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));uc.context={model:nc,overallProgress:Ja},uc.agent=c,uc.__block=Ja,u._pipe(nc,uc)}ec&&c.dirty()},n.prototype._pipe=function(r,a){var s=r.uid,o=this._pipelineMap.get(s);!o.head&&(o.head=a),o.tail&&o.tail.pipe(a),o.tail=a,a.__idxInPipeline=o.count++,a.__pipeline=o},n.wrapStageHandler=function(r,a){return isFunction(r)&&(r={overallReset:r,seriesType:detectSeriseType(r)}),r.uid=getUID("stageHandler"),a&&(r.visualType=a),r},n}();function overallTaskReset(n){n.overallReset(n.ecModel,n.api,n.payload)}function stubReset(n){return n.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function seriesTaskReset(n){n.useClearVisual&&n.data.clearAllVisual();var r=n.resetDefines=normalizeToArray(n.reset(n.model,n.ecModel,n.api,n.payload));return r.length>1?map$1(r,function(a,s){return makeSeriesTaskProgress(s)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(n){return function(r,a){var s=a.data,o=a.resetDefines[n];if(o&&o.dataEach)for(var u=r.start;u<r.end;u++)o.dataEach(s,u);else o&&o.progress&&o.progress(r,s)}}function seriesTaskCount(n){return n.data.count()}function detectSeriseType(n){seriesType=null;try{n(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(n){seriesType=n};ecModelMock.eachComponent=function(n){n.mainType==="series"&&n.subType&&(seriesType=n.subType)};function mockMethods(n,r){for(var a in r.prototype)n[a]=noop$1}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme$1={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme$1.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function n(){}return n.prototype.normalizeQuery=function(r){var a={},s={},o={};if(isString(r)){var u=parseClassType(r);a.mainType=u.main||null,a.subType=u.sub||null}else{var c=["Index","Name","Id"],p={name:1,dataIndex:1,dataType:1};each$f(r,function(d,_){for(var ja=!1,Ja=0;Ja<c.length;Ja++){var ec=c[Ja],tc=_.lastIndexOf(ec);if(tc>0&&tc===_.length-ec.length){var rc=_.slice(0,tc);rc!=="data"&&(a.mainType=rc,a[ec.toLowerCase()]=d,ja=!0)}}p.hasOwnProperty(_)&&(s[_]=d,ja=!0),ja||(o[_]=d)})}return{cptQuery:a,dataQuery:s,otherQuery:o}},n.prototype.filter=function(r,a){var s=this.eventInfo;if(!s)return!0;var o=s.targetEl,u=s.packedEvent,c=s.model,p=s.view;if(!c||!p)return!0;var d=a.cptQuery,_=a.dataQuery;return ja(d,c,"mainType")&&ja(d,c,"subType")&&ja(d,c,"index","componentIndex")&&ja(d,c,"name")&&ja(d,c,"id")&&ja(_,u,"name")&&ja(_,u,"dataIndex")&&ja(_,u,"dataType")&&(!p.filterForExposedEvent||p.filterForExposedEvent(r,a.otherQuery,o,u));function ja(Ja,ec,tc,rc){return Ja[tc]==null||ec[rc||tc]===Ja[tc]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,r){var a=n.getData();if(n.legendIcon&&a.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var s={},o={},u=!1,c=0;c<SYMBOL_PROPS_WITH_CB.length;c++){var p=SYMBOL_PROPS_WITH_CB[c],d=n.get(p);isFunction(d)?(u=!0,o[p]=d):s[p]=d}if(s.symbol=s.symbol||n.defaultSymbol,a.setVisual(extend$2({legendIcon:n.legendIcon||s.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},s)),r.isSeriesFiltered(n))return;var _=keys(o);function ja(Ja,ec){for(var tc=n.getRawValue(ec),rc=n.getDataParams(ec),nc=0;nc<_.length;nc++){var ic=_[nc];Ja.setItemVisual(ec,ic,o[ic](tc,rc))}}return{dataEach:u?ja:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,r){if(!n.hasSymbolVisual||r.isSeriesFiltered(n))return;var a=n.getData();function s(o,u){for(var c=o.getItemModel(u),p=0;p<SYMBOL_PROPS.length;p++){var d=SYMBOL_PROPS[p],_=c.getShallow(d,!0);_!=null&&o.setItemVisual(u,d,_)}}return{dataEach:a.hasItemOption?s:null}}};function getItemVisualFromData(n,r,a){switch(a){case"color":var s=n.getItemVisual(r,"style");return s[n.getVisual("drawType")];case"opacity":return n.getItemVisual(r,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(r,a)}}function getVisualFromData(n,r){switch(r){case"color":var a=n.getVisual("style");return a[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(r)}}function setItemVisualFromData(n,r,a,s){switch(a){case"color":var o=n.ensureUniqueItemVisual(r,"style");o[n.getVisual("drawType")]=s,n.setItemVisual(r,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(r,"style").opacity=s;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(r,a,s);break}}function createLegacyDataSelectAction(n,r){function a(s,o){var u=[];return s.eachComponent({mainType:"series",subType:n,query:o},function(c){u.push(c.seriesIndex)}),u}each$f([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(s){r(s[0],function(o,u,c){o=extend$2({},o),c.dispatchAction(extend$2(o,{type:s[1],seriesIndex:a(u,o)}))})})}function handleSeriesLegacySelectEvents(n,r,a,s,o){var u=n+r;a.isSilent(u)||s.eachComponent({mainType:"series",subType:"pie"},function(c){for(var p=c.seriesIndex,d=c.option.selectedMap,_=o.selected,ja=0;ja<_.length;ja++)if(_[ja].seriesIndex===p){var Ja=c.getData(),ec=queryDataIndex(Ja,o.fromActionPayload);a.trigger(u,{type:u,seriesId:c.id,name:isArray$1(ec)?Ja.getName(ec[0]):Ja.getName(ec),selected:isString(d)?d:extend$2({},d)})}})}function handleLegacySelectEvents(n,r,a){n.on("selectchanged",function(s){var o=a.getModel();s.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",r,o,s),handleSeriesLegacySelectEvents("pie","selectchanged",r,o,s)):s.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",r,o,s),handleSeriesLegacySelectEvents("pie","selected",r,o,s)):s.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",r,o,s),handleSeriesLegacySelectEvents("pie","unselected",r,o,s))})}function findEventDispatcher(n,r,a){for(var s;n&&!(r(n)&&(s=n,a));)n=n.__hostTarget||n.parent;return s}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function n(){this._id="__ec_inner_"+wmUniqueIndex++}return n.prototype.get=function(r){return this._guard(r)[this._id]},n.prototype.set=function(r,a){var s=this._guard(r);return supportDefineProperty?Object.defineProperty(s,this._id,{value:a,enumerable:!1,configurable:!0}):s[this._id]=a,this},n.prototype.delete=function(r){return this.has(r)?(delete this._guard(r)[this._id],!0):!1},n.prototype.has=function(r){return!!this._guard(r)[this._id]},n.prototype._guard=function(r){if(r!==Object(r))throw TypeError("Value of WeakMap is not a non-null object.");return r},n}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,r){var a=r.cx,s=r.cy,o=r.width/2,u=r.height/2;n.moveTo(a,s-u),n.lineTo(a+o,s+u),n.lineTo(a-o,s+u),n.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,r){var a=r.cx,s=r.cy,o=r.width/2,u=r.height/2;n.moveTo(a,s-u),n.lineTo(a+o,s),n.lineTo(a,s+u),n.lineTo(a-o,s),n.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,r){var a=r.x,s=r.y,o=r.width/5*3,u=Math.max(o,r.height),c=o/2,p=c*c/(u-c),d=s-u+c+p,_=Math.asin(p/c),ja=Math.cos(_)*c,Ja=Math.sin(_),ec=Math.cos(_),tc=c*.6,rc=c*.7;n.moveTo(a-ja,d+p),n.arc(a,d,c,Math.PI-_,Math.PI*2+_),n.bezierCurveTo(a+ja-Ja*tc,d+p+ec*tc,a,s-rc,a,s),n.bezierCurveTo(a,s-rc,a-ja+Ja*tc,d+p+ec*tc,a-ja,d+p),n.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,r){var a=r.height,s=r.width,o=r.x,u=r.y,c=s/3*2;n.moveTo(o,u),n.lineTo(o+c,u+a),n.lineTo(o,u+a/4*3),n.lineTo(o-c,u+a),n.lineTo(o,u),n.closePath()}}),symbolCtors={line:Line$2,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(n,r,a,s,o){o.x1=n,o.y1=r+s/2,o.x2=n+a,o.y2=r+s/2},rect:function(n,r,a,s,o){o.x=n,o.y=r,o.width=a,o.height=s},roundRect:function(n,r,a,s,o){o.x=n,o.y=r,o.width=a,o.height=s,o.r=Math.min(a,s)/4},square:function(n,r,a,s,o){var u=Math.min(a,s);o.x=n,o.y=r,o.width=u,o.height=u},circle:function(n,r,a,s,o){o.cx=n+a/2,o.cy=r+s/2,o.r=Math.min(a,s)/2},diamond:function(n,r,a,s,o){o.cx=n+a/2,o.cy=r+s/2,o.width=a,o.height=s},pin:function(n,r,a,s,o){o.x=n+a/2,o.y=r+s/2,o.width=a,o.height=s},arrow:function(n,r,a,s,o){o.x=n+a/2,o.y=r+s/2,o.width=a,o.height=s},triangle:function(n,r,a,s,o){o.cx=n+a/2,o.cy=r+s/2,o.width=a,o.height=s}},symbolBuildProxies={};each$f(symbolCtors,function(n,r){symbolBuildProxies[r]=new n});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,r,a){var s=calculateTextPosition(n,r,a),o=this.shape;return o&&o.symbolType==="pin"&&r.position==="inside"&&(s.y=a.y+a.height*.4),s},buildPath:function(n,r,a){var s=r.symbolType;if(s!=="none"){var o=symbolBuildProxies[s];o||(s="rect",o=symbolBuildProxies[s]),symbolShapeMakers[s](r.x,r.y,r.width,r.height,o.shape),o.buildPath(n,o.shape,a)}}});function symbolPathSetColor(n,r){if(this.type!=="image"){var a=this.style;this.__isEmptyBrush?(a.stroke=n,a.fill=r||"#fff",a.lineWidth=2):this.shape.symbolType==="line"?a.stroke=n:a.fill=n,this.markRedraw()}}function createSymbol$1(n,r,a,s,o,u,c){var p=n.indexOf("empty")===0;p&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var d;return n.indexOf("image://")===0?d=makeImage(n.slice(8),new BoundingRect(r,a,s,o),c?"center":"cover"):n.indexOf("path://")===0?d=makePath$1(n.slice(7),{},new BoundingRect(r,a,s,o),c?"center":"cover"):d=new SymbolClz({shape:{symbolType:n,x:r,y:a,width:s,height:o}}),d.__isEmptyBrush=p,d.setColor=symbolPathSetColor,u&&d.setColor(u),d}function normalizeSymbolSize(n){return isArray$1(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function normalizeSymbolOffset(n,r){if(n!=null)return isArray$1(n)||(n=[n,n]),[parsePercent(n[0],r[0])||0,parsePercent(retrieve2(n[1],n[0]),r[1])||0]}function isSafeNum(n){return isFinite(n)}function createLinearGradient(n,r,a){var s=r.x==null?0:r.x,o=r.x2==null?1:r.x2,u=r.y==null?0:r.y,c=r.y2==null?0:r.y2;r.global||(s=s*a.width+a.x,o=o*a.width+a.x,u=u*a.height+a.y,c=c*a.height+a.y),s=isSafeNum(s)?s:0,o=isSafeNum(o)?o:1,u=isSafeNum(u)?u:0,c=isSafeNum(c)?c:0;var p=n.createLinearGradient(s,u,o,c);return p}function createRadialGradient(n,r,a){var s=a.width,o=a.height,u=Math.min(s,o),c=r.x==null?.5:r.x,p=r.y==null?.5:r.y,d=r.r==null?.5:r.r;r.global||(c=c*s+a.x,p=p*o+a.y,d=d*u),c=isSafeNum(c)?c:.5,p=isSafeNum(p)?p:.5,d=d>=0&&isSafeNum(d)?d:.5;var _=n.createRadialGradient(c,p,0,c,p,d);return _}function getCanvasGradient(n,r,a){for(var s=r.type==="radial"?createRadialGradient(n,r,a):createLinearGradient(n,r,a),o=r.colorStops,u=0;u<o.length;u++)s.addColorStop(o[u].offset,o[u].color);return s}function isClipPathChanged(n,r){if(n===r||!n&&!r)return!1;if(!n||!r||n.length!==r.length)return!0;for(var a=0;a<n.length;a++)if(n[a]!==r[a])return!0;return!1}function parseInt10(n){return parseInt(n,10)}function getSize$1(n,r,a){var s=["width","height"][r],o=["clientWidth","clientHeight"][r],u=["paddingLeft","paddingTop"][r],c=["paddingRight","paddingBottom"][r];if(a[s]!=null&&a[s]!=="auto")return parseFloat(a[s]);var p=document.defaultView.getComputedStyle(n);return(n[o]||parseInt10(p[s])||parseInt10(n.style[s]))-(parseInt10(p[u])||0)-(parseInt10(p[c])||0)|0}function normalizeLineDash(n,r){return!n||n==="solid"||!(r>0)?null:n==="dashed"?[4*r,2*r]:n==="dotted"?[r]:isNumber(n)?[n]:isArray$1(n)?n:null}function getLineDash(n){var r=n.style,a=r.lineDash&&r.lineWidth>0&&normalizeLineDash(r.lineDash,r.lineWidth),s=r.lineDashOffset;if(a){var o=r.strokeNoScale&&n.getLineScale?n.getLineScale():1;o&&o!==1&&(a=map$1(a,function(u){return u/o}),s/=o)}return[a,s]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(n){var r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))}function isValidStrokeFillStyle(n){return typeof n=="string"&&n!=="none"}function styleHasFill(n){var r=n.fill;return r!=null&&r!=="none"}function doFillPath(n,r){if(r.fillOpacity!=null&&r.fillOpacity!==1){var a=n.globalAlpha;n.globalAlpha=r.fillOpacity*r.opacity,n.fill(),n.globalAlpha=a}else n.fill()}function doStrokePath(n,r){if(r.strokeOpacity!=null&&r.strokeOpacity!==1){var a=n.globalAlpha;n.globalAlpha=r.strokeOpacity*r.opacity,n.stroke(),n.globalAlpha=a}else n.stroke()}function createCanvasPattern(n,r,a){var s=createOrUpdateImage(r.image,r.__image,a);if(isImageReady(s)){var o=n.createPattern(s,r.repeat||"repeat");if(typeof DOMMatrix=="function"&&o&&o.setTransform){var u=new DOMMatrix;u.translateSelf(r.x||0,r.y||0),u.rotateSelf(0,0,(r.rotation||0)*RADIAN_TO_DEGREE),u.scaleSelf(r.scaleX||1,r.scaleY||1),o.setTransform(u)}return o}}function brushPath(n,r,a,s){var o,u=styleHasStroke(a),c=styleHasFill(a),p=a.strokePercent,d=p<1,_=!r.path;(!r.silent||d)&&_&&r.createPathProxy();var ja=r.path||pathProxyForDraw,Ja=r.__dirty;if(!s){var ec=a.fill,tc=a.stroke,rc=c&&!!ec.colorStops,nc=u&&!!tc.colorStops,ic=c&&!!ec.image,uc=u&&!!tc.image,eh=void 0,rh=void 0,ah=void 0,ih=void 0,oh=void 0;(rc||nc)&&(oh=r.getBoundingRect()),rc&&(eh=Ja?getCanvasGradient(n,ec,oh):r.__canvasFillGradient,r.__canvasFillGradient=eh),nc&&(rh=Ja?getCanvasGradient(n,tc,oh):r.__canvasStrokeGradient,r.__canvasStrokeGradient=rh),ic&&(ah=Ja||!r.__canvasFillPattern?createCanvasPattern(n,ec,r):r.__canvasFillPattern,r.__canvasFillPattern=ah),uc&&(ih=Ja||!r.__canvasStrokePattern?createCanvasPattern(n,tc,r):r.__canvasStrokePattern,r.__canvasStrokePattern=ah),rc?n.fillStyle=eh:ic&&(ah?n.fillStyle=ah:c=!1),nc?n.strokeStyle=rh:uc&&(ih?n.strokeStyle=ih:u=!1)}var uh=r.getGlobalScale();ja.setScale(uh[0],uh[1],r.segmentIgnoreThreshold);var ch,hh;n.setLineDash&&a.lineDash&&(o=getLineDash(r),ch=o[0],hh=o[1]);var dh=!0;(_||Ja&SHAPE_CHANGED_BIT)&&(ja.setDPR(n.dpr),d?ja.setContext(null):(ja.setContext(n),dh=!1),ja.reset(),r.buildPath(ja,r.shape,s),ja.toStatic(),r.pathUpdated()),dh&&ja.rebuildPath(n,d?p:1),ch&&(n.setLineDash(ch),n.lineDashOffset=hh),s||(a.strokeFirst?(u&&doStrokePath(n,a),c&&doFillPath(n,a)):(c&&doFillPath(n,a),u&&doStrokePath(n,a))),ch&&n.setLineDash([])}function brushImage(n,r,a){var s=r.__image=createOrUpdateImage(a.image,r.__image,r,r.onload);if(!(!s||!isImageReady(s))){var o=a.x||0,u=a.y||0,c=r.getWidth(),p=r.getHeight(),d=s.width/s.height;if(c==null&&p!=null?c=p*d:p==null&&c!=null?p=c/d:c==null&&p==null&&(c=s.width,p=s.height),a.sWidth&&a.sHeight){var _=a.sx||0,ja=a.sy||0;n.drawImage(s,_,ja,a.sWidth,a.sHeight,o,u,c,p)}else if(a.sx&&a.sy){var _=a.sx,ja=a.sy,Ja=c-_,ec=p-ja;n.drawImage(s,_,ja,Ja,ec,o,u,c,p)}else n.drawImage(s,o,u,c,p)}}function brushText(n,r,a){var s,o=a.text;if(o!=null&&(o+=""),o){n.font=a.font||DEFAULT_FONT,n.textAlign=a.textAlign,n.textBaseline=a.textBaseline;var u=void 0,c=void 0;n.setLineDash&&a.lineDash&&(s=getLineDash(r),u=s[0],c=s[1]),u&&(n.setLineDash(u),n.lineDashOffset=c),a.strokeFirst?(styleHasStroke(a)&&n.strokeText(o,a.x,a.y),styleHasFill(a)&&n.fillText(o,a.x,a.y)):(styleHasFill(a)&&n.fillText(o,a.x,a.y),styleHasStroke(a)&&n.strokeText(o,a.x,a.y)),u&&n.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(n,r,a,s,o){var u=!1;if(!s&&(a=a||{},r===a))return!1;if(s||r.opacity!==a.opacity){flushPathDrawn(n,o),u=!0;var c=Math.max(Math.min(r.opacity,1),0);n.globalAlpha=isNaN(c)?DEFAULT_COMMON_STYLE.opacity:c}(s||r.blend!==a.blend)&&(u||(flushPathDrawn(n,o),u=!0),n.globalCompositeOperation=r.blend||DEFAULT_COMMON_STYLE.blend);for(var p=0;p<SHADOW_NUMBER_PROPS.length;p++){var d=SHADOW_NUMBER_PROPS[p];(s||r[d]!==a[d])&&(u||(flushPathDrawn(n,o),u=!0),n[d]=n.dpr*(r[d]||0))}return(s||r.shadowColor!==a.shadowColor)&&(u||(flushPathDrawn(n,o),u=!0),n.shadowColor=r.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),u}function bindPathAndTextCommonStyle(n,r,a,s,o){var u=getStyle(r,o.inHover),c=s?null:a&&getStyle(a,o.inHover)||{};if(u===c)return!1;var p=bindCommonProps(n,u,c,s,o);if((s||u.fill!==c.fill)&&(p||(flushPathDrawn(n,o),p=!0),isValidStrokeFillStyle(u.fill)&&(n.fillStyle=u.fill)),(s||u.stroke!==c.stroke)&&(p||(flushPathDrawn(n,o),p=!0),isValidStrokeFillStyle(u.stroke)&&(n.strokeStyle=u.stroke)),(s||u.opacity!==c.opacity)&&(p||(flushPathDrawn(n,o),p=!0),n.globalAlpha=u.opacity==null?1:u.opacity),r.hasStroke()){var d=u.lineWidth,_=d/(u.strokeNoScale&&r.getLineScale?r.getLineScale():1);n.lineWidth!==_&&(p||(flushPathDrawn(n,o),p=!0),n.lineWidth=_)}for(var ja=0;ja<STROKE_PROPS.length;ja++){var Ja=STROKE_PROPS[ja],ec=Ja[0];(s||u[ec]!==c[ec])&&(p||(flushPathDrawn(n,o),p=!0),n[ec]=u[ec]||Ja[1])}return p}function bindImageStyle(n,r,a,s,o){return bindCommonProps(n,getStyle(r,o.inHover),a&&getStyle(a,o.inHover),s,o)}function setContextTransform(n,r){var a=r.transform,s=n.dpr||1;a?n.setTransform(s*a[0],s*a[1],s*a[2],s*a[3],s*a[4],s*a[5]):n.setTransform(s,0,0,s,0,0)}function updateClipStatus(n,r,a){for(var s=!1,o=0;o<n.length;o++){var u=n[o];s=s||u.isZeroArea(),setContextTransform(r,u),r.beginPath(),u.buildPath(r,u.shape),r.clip()}a.allClipped=s}function isTransformChanged(n,r){return n&&r?n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2]||n[3]!==r[3]||n[4]!==r[4]||n[5]!==r[5]:!(!n&&!r)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(n){var r=styleHasFill(n),a=styleHasStroke(n);return!(n.lineDash||!(+r^+a)||r&&typeof n.fill!="string"||a&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function flushPathDrawn(n,r){r.batchFill&&n.fill(),r.batchStroke&&n.stroke(),r.batchFill="",r.batchStroke=""}function getStyle(n,r){return r&&n.__hoverStyle||n.style}function brushSingle(n,r){brush$1(n,r,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(n,r,a,s){var o=r.transform;if(!r.shouldBePainted(a.viewWidth,a.viewHeight,!1,!1)){r.__dirty&=~REDRAW_BIT,r.__isRendered=!1;return}var u=r.__clipPaths,c=a.prevElClipPaths,p=!1,d=!1;if((!c||isClipPathChanged(u,c))&&(c&&c.length&&(flushPathDrawn(n,a),n.restore(),d=p=!0,a.prevElClipPaths=null,a.allClipped=!1,a.prevEl=null),u&&u.length&&(flushPathDrawn(n,a),n.save(),updateClipStatus(u,n,a),p=!0),a.prevElClipPaths=u),a.allClipped){r.__isRendered=!1;return}r.beforeBrush&&r.beforeBrush(),r.innerBeforeBrush();var _=a.prevEl;_||(d=p=!0);var ja=r instanceof Path&&r.autoBatch&&canPathBatch(r.style);p||isTransformChanged(o,_.transform)?(flushPathDrawn(n,a),setContextTransform(n,r)):ja||flushPathDrawn(n,a);var Ja=getStyle(r,a.inHover);r instanceof Path?(a.lastDrawType!==DRAW_TYPE_PATH&&(d=!0,a.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(n,r,_,d,a),(!ja||!a.batchFill&&!a.batchStroke)&&n.beginPath(),brushPath(n,r,Ja,ja),ja&&(a.batchFill=Ja.fill||"",a.batchStroke=Ja.stroke||"")):r instanceof TSpan?(a.lastDrawType!==DRAW_TYPE_TEXT&&(d=!0,a.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(n,r,_,d,a),brushText(n,r,Ja)):r instanceof ZRImage?(a.lastDrawType!==DRAW_TYPE_IMAGE&&(d=!0,a.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(n,r,_,d,a),brushImage(n,r,Ja)):r.getTemporalDisplayables&&(a.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(d=!0,a.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(n,r,a)),ja&&s&&flushPathDrawn(n,a),r.innerAfterBrush(),r.afterBrush&&r.afterBrush(),a.prevEl=r,r.__dirty=0,r.__isRendered=!0}function brushIncremental(n,r,a){var s=r.getDisplayables(),o=r.getTemporalDisplayables();n.save();var u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:a.viewWidth,viewHeight:a.viewHeight,inHover:a.inHover},c,p;for(c=r.getCursor(),p=s.length;c<p;c++){var d=s[c];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(n,d,u,c===p-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),u.prevEl=d}for(var _=0,ja=o.length;_<ja;_++){var d=o[_];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(n,d,u,_===ja-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),u.prevEl=d}r.clearTemporalDisplayables(),r.notClear=!0,n.restore()}var decalMap=new WeakMap$1,decalCache=new LRU$1(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(n,r){if(n==="none")return null;var a=r.getDevicePixelRatio(),s=r.getZr(),o=s.painter.type==="svg";n.dirty&&decalMap.delete(n);var u=decalMap.get(n);if(u)return u;var c=defaults(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});c.backgroundColor==="none"&&(c.backgroundColor=null);var p={repeat:"repeat"};return d(p),p.rotation=c.rotation,p.scaleX=p.scaleY=o?1:1/a,decalMap.set(n,p),n.dirty=!1,p;function d(_){for(var ja=[a],Ja=!0,ec=0;ec<decalKeys.length;++ec){var tc=c[decalKeys[ec]];if(tc!=null&&!isArray$1(tc)&&!isString(tc)&&!isNumber(tc)&&typeof tc!="boolean"){Ja=!1;break}ja.push(tc)}var rc;if(Ja){rc=ja.join(",")+(o?"-svg":"");var nc=decalCache.get(rc);nc&&(o?_.svgElement=nc:_.image=nc)}var ic=normalizeDashArrayX(c.dashArrayX),uc=normalizeDashArrayY(c.dashArrayY),eh=normalizeSymbolArray(c.symbol),rh=getLineBlockLengthX(ic),ah=getLineBlockLengthY(uc),ih=!o&&platformApi.createCanvas(),oh=o&&{tag:"g",attrs:{},key:"dcl",children:[]},uh=hh(),ch;ih&&(ih.width=uh.width*a,ih.height=uh.height*a,ch=ih.getContext("2d")),dh(),Ja&&decalCache.put(rc,ih||oh),_.image=ih,_.svgElement=oh,_.svgWidth=uh.width,_.svgHeight=uh.height;function hh(){for(var gh=1,fh=0,vh=rh.length;fh<vh;++fh)gh=getLeastCommonMultiple(gh,rh[fh]);for(var ph=1,fh=0,vh=eh.length;fh<vh;++fh)ph=getLeastCommonMultiple(ph,eh[fh].length);gh*=ph;var yh=ah*rh.length*eh.length;return{width:Math.max(1,Math.min(gh,c.maxTileWidth)),height:Math.max(1,Math.min(yh,c.maxTileHeight))}}function dh(){ch&&(ch.clearRect(0,0,ih.width,ih.height),c.backgroundColor&&(ch.fillStyle=c.backgroundColor,ch.fillRect(0,0,ih.width,ih.height)));for(var gh=0,fh=0;fh<uc.length;++fh)gh+=uc[fh];if(gh<=0)return;for(var vh=-ah,ph=0,yh=0,xh=0;vh<uh.height;){if(ph%2===0){for(var _h=yh/2%eh.length,bh=0,Dh=0,Th=0;bh<uh.width*2;){for(var Ch=0,fh=0;fh<ic[xh].length;++fh)Ch+=ic[xh][fh];if(Ch<=0)break;if(Dh%2===0){var wh=(1-c.symbolSize)*.5,Nh=bh+ic[xh][Dh]*wh,Rh=vh+uc[ph]*wh,kh=ic[xh][Dh]*c.symbolSize,Lh=uc[ph]*c.symbolSize,Fh=Th/2%eh[_h].length;Wh(Nh,Rh,kh,Lh,eh[_h][Fh])}bh+=ic[xh][Dh],++Th,++Dh,Dh===ic[xh].length&&(Dh=0)}++xh,xh===ic.length&&(xh=0)}vh+=uc[ph],++yh,++ph,ph===uc.length&&(ph=0)}function Wh(Qh,jh,Hh,qh,nd){var Sh=o?1:a,Gh=createSymbol$1(nd,Qh*Sh,jh*Sh,Hh*Sh,qh*Sh,c.color,c.symbolKeepAspect);if(o){var zh=s.painter.renderOneToVNode(Gh);zh&&oh.children.push(zh)}else brushSingle(ch,Gh)}}}}function normalizeSymbolArray(n){if(!n||n.length===0)return[["rect"]];if(isString(n))return[[n]];for(var r=!0,a=0;a<n.length;++a)if(!isString(n[a])){r=!1;break}if(r)return normalizeSymbolArray([n]);for(var s=[],a=0;a<n.length;++a)isString(n[a])?s.push([n[a]]):s.push(n[a]);return s}function normalizeDashArrayX(n){if(!n||n.length===0)return[[0,0]];if(isNumber(n)){var r=Math.ceil(n);return[[r,r]]}for(var a=!0,s=0;s<n.length;++s)if(!isNumber(n[s])){a=!1;break}if(a)return normalizeDashArrayX([n]);for(var o=[],s=0;s<n.length;++s)if(isNumber(n[s])){var r=Math.ceil(n[s]);o.push([r,r])}else{var r=map$1(n[s],function(p){return Math.ceil(p)});r.length%2===1?o.push(r.concat(r)):o.push(r)}return o}function normalizeDashArrayY(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(isNumber(n)){var r=Math.ceil(n);return[r,r]}var a=map$1(n,function(s){return Math.ceil(s)});return n.length%2?a.concat(a):a}function getLineBlockLengthX(n){return map$1(n,function(r){return getLineBlockLengthY(r)})}function getLineBlockLengthY(n){for(var r=0,a=0;a<n.length;++a)r+=n[a];return n.length%2===1?r*2:r}function decalVisual(n,r){n.eachRawSeries(function(a){if(!n.isSeriesFiltered(a)){var s=a.getData();s.hasItemVisual()&&s.each(function(c){var p=s.getItemVisual(c,"decal");if(p){var d=s.ensureUniqueItemVisual(c,"style");d.decal=createOrUpdatePatternFromDecal(p,r)}});var o=s.getVisual("decal");if(o){var u=s.getVisual("style");u.decal=createOrUpdatePatternFromDecal(o,r)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(n,r){implsStore[n]=r}function getImpl(n){return implsStore[n]}var TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(n){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,n,r)}}function createRegisterEventWithLowercaseMessageCenter(n){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return toLowercaseNameAndCallEventful(this,n,r)}}function toLowercaseNameAndCallEventful(n,r,a){return a[0]=a[0]&&a[0].toLowerCase(),Eventful.prototype[r].apply(n,a)}var MessageCenter=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this,new ECEventProcessor)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],o=o||{},isString(s)&&(s=themeStorage[s]),u._dom=a;var c="canvas",p="auto",d=!1;o.ssr&&registerSSRDataGetter(function(ec){var tc=getECData(ec),rc=tc.dataIndex;if(rc!=null){var nc=createHashMap();return nc.set("series_index",tc.seriesIndex),nc.set("data_index",rc),tc.ssrType&&nc.set("ssr_type",tc.ssrType),nc}});var _=u._zr=init$2(a,{renderer:o.renderer||c,devicePixelRatio:o.devicePixelRatio,width:o.width,height:o.height,ssr:o.ssr,useDirtyRect:retrieve2(o.useDirtyRect,d),useCoarsePointer:retrieve2(o.useCoarsePointer,p),pointerSize:o.pointerSize});u._ssr=o.ssr,u._throttledZrFlush=throttle(bind$1(_.flush,_),17),s=clone$4(s),s&&globalBackwardCompat(s,!0),u._theme=s,u._locale=createLocaleObject(o.locale||SYSTEM_LANG),u._coordSysMgr=new CoordinateSystemManager;var ja=u._api=createExtensionAPI(u);function Ja(ec,tc){return ec.__prio-tc.__prio}return sort$2(visualFuncs,Ja),sort$2(dataProcessorFuncs,Ja),u._scheduler=new Scheduler(u,ja,dataProcessorFuncs,visualFuncs),u._messageCenter=new MessageCenter,u._initEvents(),u.resize=bind$1(u.resize,u),_.animation.on("frame",u._onframe,u),bindRenderedEvent(_,u),bindMouseEvent(_,u),setAsPrimitive(u),u}return r.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var a=this._scheduler;if(this[PENDING_UPDATE]){var s=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(d){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,d}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}else if(a.unfinished){var o=TEST_FRAME_REMAIN_TIME,u=this._model,c=this._api;a.unfinished=!1;do{var p=+new Date;a.performSeriesTasks(u),a.performDataProcessorTasks(u),updateStreamModes(this,u),a.performVisualTasks(u),renderSeries(this,this._model,c,"remain",{}),o-=+new Date-p}while(o>0&&a.unfinished);a.unfinished||this._zr.flush()}}},r.prototype.getDom=function(){return this._dom},r.prototype.getId=function(){return this.id},r.prototype.getZr=function(){return this._zr},r.prototype.isSSR=function(){return this._ssr},r.prototype.setOption=function(a,s,o){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var u,c,p;if(isObject$3(s)&&(o=s.lazyUpdate,u=s.silent,c=s.replaceMerge,p=s.transition,s=s.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||s){var d=new OptionManager(this._api),_=this._theme,ja=this._model=new GlobalModel;ja.scheduler=this._scheduler,ja.ssr=this._ssr,ja.init(null,null,null,_,this._locale,d)}this._model.setOption(a,{replaceMerge:c},optionPreprocessorFuncs);var Ja={seriesTransition:p,optionChanged:!0};if(o)this[PENDING_UPDATE]={silent:u,updateParams:Ja},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,Ja)}catch(ec){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,ec}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},r.prototype.setTheme=function(){},r.prototype.getModel=function(){return this._model},r.prototype.getOption=function(){return this._model&&this._model.getOption()},r.prototype.getWidth=function(){return this._zr.getWidth()},r.prototype.getHeight=function(){return this._zr.getHeight()},r.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},r.prototype.getRenderedCanvas=function(a){return this.renderToCanvas(a)},r.prototype.renderToCanvas=function(a){a=a||{};var s=this._zr.painter;return s.getRenderedCanvas({backgroundColor:a.backgroundColor||this._model.get("backgroundColor"),pixelRatio:a.pixelRatio||this.getDevicePixelRatio()})},r.prototype.renderToSVGString=function(a){a=a||{};var s=this._zr.painter;return s.renderToString({useViewBox:a.useViewBox})},r.prototype.getSvgDataURL=function(){if(env.svgSupported){var a=this._zr,s=a.storage.getDisplayList();return each$f(s,function(o){o.stopAnimation(null,!0)}),a.painter.toDataURL()}},r.prototype.getDataURL=function(a){if(this._disposed){this.id;return}a=a||{};var s=a.excludeComponents,o=this._model,u=[],c=this;each$f(s,function(d){o.eachComponent({mainType:d},function(_){var ja=c._componentsMap[_.__viewId];ja.group.ignore||(u.push(ja),ja.group.ignore=!0)})});var p=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(a).toDataURL("image/"+(a&&a.type||"png"));return each$f(u,function(d){d.group.ignore=!1}),p},r.prototype.getConnectedDataURL=function(a){if(this._disposed){this.id;return}var s=a.type==="svg",o=this.group,u=Math.min,c=Math.max,p=1/0;if(connectedGroups[o]){var d=p,_=p,ja=-p,Ja=-p,ec=[],tc=a&&a.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(rh,ah){if(rh.group===o){var ih=s?rh.getZr().painter.getSvgDom().innerHTML:rh.renderToCanvas(clone$4(a)),oh=rh.getDom().getBoundingClientRect();d=u(oh.left,d),_=u(oh.top,_),ja=c(oh.right,ja),Ja=c(oh.bottom,Ja),ec.push({dom:ih,left:oh.left,top:oh.top})}}),d*=tc,_*=tc,ja*=tc,Ja*=tc;var rc=ja-d,nc=Ja-_,ic=platformApi.createCanvas(),uc=init$2(ic,{renderer:s?"svg":"canvas"});if(uc.resize({width:rc,height:nc}),s){var eh="";return each$f(ec,function(rh){var ah=rh.left-d,ih=rh.top-_;eh+='<g transform="translate('+ah+","+ih+')">'+rh.dom+"</g>"}),uc.painter.getSvgRoot().innerHTML=eh,a.connectedBackgroundColor&&uc.painter.setBackgroundColor(a.connectedBackgroundColor),uc.refreshImmediately(),uc.painter.toDataURL()}else return a.connectedBackgroundColor&&uc.add(new Rect$2({shape:{x:0,y:0,width:rc,height:nc},style:{fill:a.connectedBackgroundColor}})),each$f(ec,function(rh){var ah=new ZRImage({style:{x:rh.left*tc-d,y:rh.top*tc-_,image:rh.dom}});uc.add(ah)}),uc.refreshImmediately(),ic.toDataURL("image/"+(a&&a.type||"png"))}else return this.getDataURL(a)},r.prototype.convertToPixel=function(a,s){return doConvertPixel(this,"convertToPixel",a,s)},r.prototype.convertFromPixel=function(a,s){return doConvertPixel(this,"convertFromPixel",a,s)},r.prototype.containPixel=function(a,s){if(this._disposed){this.id;return}var o=this._model,u,c=parseFinder$1(o,a);return each$f(c,function(p,d){d.indexOf("Models")>=0&&each$f(p,function(_){var ja=_.coordinateSystem;if(ja&&ja.containPoint)u=u||!!ja.containPoint(s);else if(d==="seriesModels"){var Ja=this._chartsMap[_.__viewId];Ja&&Ja.containPoint&&(u=u||Ja.containPoint(s,_))}},this)},this),!!u},r.prototype.getVisual=function(a,s){var o=this._model,u=parseFinder$1(o,a,{defaultMainType:"series"}),c=u.seriesModel,p=c.getData(),d=u.hasOwnProperty("dataIndexInside")?u.dataIndexInside:u.hasOwnProperty("dataIndex")?p.indexOfRawIndex(u.dataIndex):null;return d!=null?getItemVisualFromData(p,d,s):getVisualFromData(p,s)},r.prototype.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]},r.prototype.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]},r.prototype._initEvents=function(){var a=this;each$f(MOUSE_EVENT_NAMES,function(s){var o=function(u){var c=a.getModel(),p=u.target,d,_=s==="globalout";if(_?d={}:p&&findEventDispatcher(p,function(rc){var nc=getECData(rc);if(nc&&nc.dataIndex!=null){var ic=nc.dataModel||c.getSeriesByIndex(nc.seriesIndex);return d=ic&&ic.getDataParams(nc.dataIndex,nc.dataType,p)||{},!0}else if(nc.eventData)return d=extend$2({},nc.eventData),!0},!0),d){var ja=d.componentType,Ja=d.componentIndex;(ja==="markLine"||ja==="markPoint"||ja==="markArea")&&(ja="series",Ja=d.seriesIndex);var ec=ja&&Ja!=null&&c.getComponent(ja,Ja),tc=ec&&a[ec.mainType==="series"?"_chartsMap":"_componentsMap"][ec.__viewId];d.event=u,d.type=s,a._$eventProcessor.eventInfo={targetEl:p,packedEvent:d,model:ec,view:tc},a.trigger(s,d)}};o.zrEventfulCallAtLast=!0,a._zr.on(s,o,a)}),each$f(eventActionMap,function(s,o){a._messageCenter.on(o,function(u){this.trigger(o,u)},a)}),each$f(["selectchanged"],function(s){a._messageCenter.on(s,function(o){this.trigger(s,o)},a)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},r.prototype.isDisposed=function(){return this._disposed},r.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},r.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var a=this.getDom();a&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var s=this,o=s._api,u=s._model;each$f(s._componentsViews,function(c){c.dispose(u,o)}),each$f(s._chartsViews,function(c){c.dispose(u,o)}),s._zr.dispose(),s._dom=s._model=s._chartsMap=s._componentsMap=s._chartsViews=s._componentsViews=s._scheduler=s._api=s._zr=s._throttledZrFlush=s._theme=s._coordSysMgr=s._messageCenter=null,delete instances[s.id]},r.prototype.resize=function(a){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(a);var s=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!s){var o=s.resetOption("media"),u=a&&a.silent;this[PENDING_UPDATE]&&(u==null&&(u=this[PENDING_UPDATE].silent),o=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{o&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend$2({duration:0},a&&a.animation)})}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},r.prototype.showLoading=function(a,s){if(this._disposed){this.id;return}if(isObject$3(a)&&(s=a,a=""),a=a||"default",this.hideLoading(),!!loadingEffects[a]){var o=loadingEffects[a](this._api,s),u=this._zr;this._loadingFX=o,u.add(o)}},r.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},r.prototype.makeActionFromEvent=function(a){var s=extend$2({},a);return s.type=eventActionMap[a.type],s},r.prototype.dispatchAction=function(a,s){if(this._disposed){this.id;return}if(isObject$3(s)||(s={silent:!!s}),!!actions[a.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(a);return}var o=s.silent;doDispatchAction.call(this,a,o);var u=s.flush;u?this._zr.flush():u!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}},r.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},r.prototype.appendData=function(a){if(this._disposed){this.id;return}var s=a.seriesIndex,o=this.getModel(),u=o.getSeriesByIndex(s);u.appendData(a),this._scheduler.unfinished=!0,this.getZr().wakeUp()},r.internalField=function(){prepare=function(Ja){var ec=Ja._scheduler;ec.restorePipelines(Ja._model),ec.prepareStageTasks(),prepareView(Ja,!0),prepareView(Ja,!1),ec.plan()},prepareView=function(Ja,ec){for(var tc=Ja._model,rc=Ja._scheduler,nc=ec?Ja._componentsViews:Ja._chartsViews,ic=ec?Ja._componentsMap:Ja._chartsMap,uc=Ja._zr,eh=Ja._api,rh=0;rh<nc.length;rh++)nc[rh].__alive=!1;ec?tc.eachComponent(function(oh,uh){oh!=="series"&&ah(uh)}):tc.eachSeries(ah);function ah(oh){var uh=oh.__requireNewView;oh.__requireNewView=!1;var ch="_ec_"+oh.id+"_"+oh.type,hh=!uh&&ic[ch];if(!hh){var dh=parseClassType(oh.type),gh=ec?ComponentView.getClass(dh.main,dh.sub):ChartView.getClass(dh.sub);hh=new gh,hh.init(tc,eh),ic[ch]=hh,nc.push(hh),uc.add(hh.group)}oh.__viewId=hh.__id=ch,hh.__alive=!0,hh.__model=oh,hh.group.__ecComponentInfo={mainType:oh.mainType,index:oh.componentIndex},!ec&&rc.prepareView(hh,oh,tc,eh)}for(var rh=0;rh<nc.length;){var ih=nc[rh];ih.__alive?rh++:(!ec&&ih.renderTask.dispose(),uc.remove(ih.group),ih.dispose(tc,eh),nc.splice(rh,1),ic[ih.__id]===ih&&delete ic[ih.__id],ih.__id=ih.group.__ecComponentInfo=null)}},updateDirectly=function(Ja,ec,tc,rc,nc){var ic=Ja._model;if(ic.setUpdatePayload(tc),!rc){each$f([].concat(Ja._componentsViews).concat(Ja._chartsViews),ih);return}var uc={};uc[rc+"Id"]=tc[rc+"Id"],uc[rc+"Index"]=tc[rc+"Index"],uc[rc+"Name"]=tc[rc+"Name"];var eh={mainType:rc,query:uc};nc&&(eh.subType=nc);var rh=tc.excludeSeriesId,ah;rh!=null&&(ah=createHashMap(),each$f(normalizeToArray(rh),function(oh){var uh=convertOptionIdName(oh,null);uh!=null&&ah.set(uh,!0)})),ic&&ic.eachComponent(eh,function(oh){var uh=ah&&ah.get(oh.id)!=null;if(!uh)if(isHighDownPayload(tc))if(oh instanceof SeriesModel)tc.type===HIGHLIGHT_ACTION_TYPE&&!tc.notBlur&&!oh.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(oh,tc,Ja._api);else{var ch=findComponentHighDownDispatchers(oh.mainType,oh.componentIndex,tc.name,Ja._api),hh=ch.focusSelf,dh=ch.dispatchers;tc.type===HIGHLIGHT_ACTION_TYPE&&hh&&!tc.notBlur&&blurComponent(oh.mainType,oh.componentIndex,Ja._api),dh&&each$f(dh,function(gh){tc.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(gh):leaveEmphasis(gh)})}else isSelectChangePayload(tc)&&oh instanceof SeriesModel&&(toggleSelectionFromPayload(oh,tc,Ja._api),updateSeriesElementSelection(oh),markStatusToUpdate(Ja))},Ja),ic&&ic.eachComponent(eh,function(oh){var uh=ah&&ah.get(oh.id)!=null;uh||ih(Ja[rc==="series"?"_chartsMap":"_componentsMap"][oh.__viewId])},Ja);function ih(oh){oh&&oh.__alive&&oh[ec]&&oh[ec](oh.__model,ic,Ja._api,tc)}},updateMethods={prepareAndUpdate:function(Ja){prepare(this),updateMethods.update.call(this,Ja,{optionChanged:Ja.newOption!=null})},update:function(Ja,ec){var tc=this._model,rc=this._api,nc=this._zr,ic=this._coordSysMgr,uc=this._scheduler;if(tc){tc.setUpdatePayload(Ja),uc.restoreData(tc,Ja),uc.performSeriesTasks(tc),ic.create(tc,rc),uc.performDataProcessorTasks(tc,Ja),updateStreamModes(this,tc),ic.update(tc,rc),a(tc),uc.performVisualTasks(tc,Ja),render(this,tc,rc,Ja,ec);var eh=tc.get("backgroundColor")||"transparent",rh=tc.get("darkMode");nc.setBackgroundColor(eh),rh!=null&&rh!=="auto"&&nc.setDarkMode(rh),lifecycle.trigger("afterupdate",tc,rc)}},updateTransform:function(Ja){var ec=this,tc=this._model,rc=this._api;if(tc){tc.setUpdatePayload(Ja);var nc=[];tc.eachComponent(function(uc,eh){if(uc!=="series"){var rh=ec.getViewOfComponentModel(eh);if(rh&&rh.__alive)if(rh.updateTransform){var ah=rh.updateTransform(eh,tc,rc,Ja);ah&&ah.update&&nc.push(rh)}else nc.push(rh)}});var ic=createHashMap();tc.eachSeries(function(uc){var eh=ec._chartsMap[uc.__viewId];if(eh.updateTransform){var rh=eh.updateTransform(uc,tc,rc,Ja);rh&&rh.update&&ic.set(uc.uid,1)}else ic.set(uc.uid,1)}),a(tc),this._scheduler.performVisualTasks(tc,Ja,{setDirty:!0,dirtyMap:ic}),renderSeries(this,tc,rc,Ja,{},ic),lifecycle.trigger("afterupdate",tc,rc)}},updateView:function(Ja){var ec=this._model;ec&&(ec.setUpdatePayload(Ja),ChartView.markUpdateMethod(Ja,"updateView"),a(ec),this._scheduler.performVisualTasks(ec,Ja,{setDirty:!0}),render(this,ec,this._api,Ja,{}),lifecycle.trigger("afterupdate",ec,this._api))},updateVisual:function(Ja){var ec=this,tc=this._model;tc&&(tc.setUpdatePayload(Ja),tc.eachSeries(function(rc){rc.getData().clearAllVisual()}),ChartView.markUpdateMethod(Ja,"updateVisual"),a(tc),this._scheduler.performVisualTasks(tc,Ja,{visualType:"visual",setDirty:!0}),tc.eachComponent(function(rc,nc){if(rc!=="series"){var ic=ec.getViewOfComponentModel(nc);ic&&ic.__alive&&ic.updateVisual(nc,tc,ec._api,Ja)}}),tc.eachSeries(function(rc){var nc=ec._chartsMap[rc.__viewId];nc.updateVisual(rc,tc,ec._api,Ja)}),lifecycle.trigger("afterupdate",tc,this._api))},updateLayout:function(Ja){updateMethods.update.call(this,Ja)}},doConvertPixel=function(Ja,ec,tc,rc){if(Ja._disposed){Ja.id;return}for(var nc=Ja._model,ic=Ja._coordSysMgr.getCoordinateSystems(),uc,eh=parseFinder$1(nc,tc),rh=0;rh<ic.length;rh++){var ah=ic[rh];if(ah[ec]&&(uc=ah[ec](nc,eh,rc))!=null)return uc}},updateStreamModes=function(Ja,ec){var tc=Ja._chartsMap,rc=Ja._scheduler;ec.eachSeries(function(nc){rc.updateStreamModes(nc,tc[nc.__viewId])})},doDispatchAction=function(Ja,ec){var tc=this,rc=this.getModel(),nc=Ja.type,ic=Ja.escapeConnect,uc=actions[nc],eh=uc.actionInfo,rh=(eh.update||"update").split(":"),ah=rh.pop(),ih=rh[0]!=null&&parseClassType(rh[0]);this[IN_MAIN_PROCESS_KEY]=!0;var oh=[Ja],uh=!1;Ja.batch&&(uh=!0,oh=map$1(Ja.batch,function(ph){return ph=defaults(extend$2({},ph),Ja),ph.batch=null,ph}));var ch=[],hh,dh=isSelectChangePayload(Ja),gh=isHighDownPayload(Ja);if(gh&&allLeaveBlur(this._api),each$f(oh,function(ph){if(hh=uc.action(ph,tc._model,tc._api),hh=hh||extend$2({},ph),hh.type=eh.event||hh.type,ch.push(hh),gh){var yh=preParseFinder(Ja),xh=yh.queryOptionMap,_h=yh.mainTypeSpecified,bh=_h?xh.keys()[0]:"series";updateDirectly(tc,ah,ph,bh),markStatusToUpdate(tc)}else dh?(updateDirectly(tc,ah,ph,"series"),markStatusToUpdate(tc)):ih&&updateDirectly(tc,ah,ph,ih.main,ih.sub)}),ah!=="none"&&!gh&&!dh&&!ih)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,Ja),this[PENDING_UPDATE]=null):updateMethods[ah].call(this,Ja)}catch(ph){throw this[IN_MAIN_PROCESS_KEY]=!1,ph}if(uh?hh={type:eh.event||nc,escapeConnect:ic,batch:ch}:hh=ch[0],this[IN_MAIN_PROCESS_KEY]=!1,!ec){var fh=this._messageCenter;if(fh.trigger(hh.type,hh),dh){var vh={type:"selectchanged",escapeConnect:ic,selected:getAllSelectedIndices(rc),isFromClick:Ja.isFromClick||!1,fromAction:Ja.type,fromActionPayload:Ja};fh.trigger(vh.type,vh)}}},flushPendingActions=function(Ja){for(var ec=this._pendingActions;ec.length;){var tc=ec.shift();doDispatchAction.call(this,tc,Ja)}},triggerUpdatedEvent=function(Ja){!Ja&&this.trigger("updated")},bindRenderedEvent=function(Ja,ec){Ja.on("rendered",function(tc){ec.trigger("rendered",tc),Ja.animation.isFinished()&&!ec[PENDING_UPDATE]&&!ec._scheduler.unfinished&&!ec._pendingActions.length&&ec.trigger("finished")})},bindMouseEvent=function(Ja,ec){Ja.on("mouseover",function(tc){var rc=tc.target,nc=findEventDispatcher(rc,isHighDownDispatcher);nc&&(handleGlobalMouseOverForHighDown(nc,tc,ec._api),markStatusToUpdate(ec))}).on("mouseout",function(tc){var rc=tc.target,nc=findEventDispatcher(rc,isHighDownDispatcher);nc&&(handleGlobalMouseOutForHighDown(nc,tc,ec._api),markStatusToUpdate(ec))}).on("click",function(tc){var rc=tc.target,nc=findEventDispatcher(rc,function(eh){return getECData(eh).dataIndex!=null},!0);if(nc){var ic=nc.selected?"unselect":"select",uc=getECData(nc);ec._api.dispatchAction({type:ic,dataType:uc.dataType,dataIndexInside:uc.dataIndex,seriesIndex:uc.seriesIndex,isFromClick:!0})}})};function a(Ja){Ja.clearColorPalette(),Ja.eachSeries(function(ec){ec.clearColorPalette()})}function s(Ja){var ec=[],tc=[],rc=!1;if(Ja.eachComponent(function(eh,rh){var ah=rh.get("zlevel")||0,ih=rh.get("z")||0,oh=rh.getZLevelKey();rc=rc||!!oh,(eh==="series"?tc:ec).push({zlevel:ah,z:ih,idx:rh.componentIndex,type:eh,key:oh})}),rc){var nc=ec.concat(tc),ic,uc;sort$2(nc,function(eh,rh){return eh.zlevel===rh.zlevel?eh.z-rh.z:eh.zlevel-rh.zlevel}),each$f(nc,function(eh){var rh=Ja.getComponent(eh.type,eh.idx),ah=eh.zlevel,ih=eh.key;ic!=null&&(ah=Math.max(ic,ah)),ih?(ah===ic&&ih!==uc&&ah++,uc=ih):uc&&(ah===ic&&ah++,uc=""),ic=ah,rh.setZLevel(ah)})}}render=function(Ja,ec,tc,rc,nc){s(ec),renderComponents(Ja,ec,tc,rc,nc),each$f(Ja._chartsViews,function(ic){ic.__alive=!1}),renderSeries(Ja,ec,tc,rc,nc),each$f(Ja._chartsViews,function(ic){ic.__alive||ic.remove(ec,tc)})},renderComponents=function(Ja,ec,tc,rc,nc,ic){each$f(ic||Ja._componentsViews,function(uc){var eh=uc.__model;_(eh,uc),uc.render(eh,ec,tc,rc),p(eh,uc),ja(eh,uc)})},renderSeries=function(Ja,ec,tc,rc,nc,ic){var uc=Ja._scheduler;nc=extend$2(nc||{},{updatedSeries:ec.getSeries()}),lifecycle.trigger("series:beforeupdate",ec,tc,nc);var eh=!1;ec.eachSeries(function(rh){var ah=Ja._chartsMap[rh.__viewId];ah.__alive=!0;var ih=ah.renderTask;uc.updatePayload(ih,rc),_(rh,ah),ic&&ic.get(rh.uid)&&ih.dirty(),ih.perform(uc.getPerformArgs(ih))&&(eh=!0),ah.group.silent=!!rh.get("silent"),c(rh,ah),updateSeriesElementSelection(rh)}),uc.unfinished=eh||uc.unfinished,lifecycle.trigger("series:layoutlabels",ec,tc,nc),lifecycle.trigger("series:transition",ec,tc,nc),ec.eachSeries(function(rh){var ah=Ja._chartsMap[rh.__viewId];p(rh,ah),ja(rh,ah)}),u(Ja,ec),lifecycle.trigger("series:afterupdate",ec,tc,nc)},markStatusToUpdate=function(Ja){Ja[STATUS_NEEDS_UPDATE_KEY]=!0,Ja.getZr().wakeUp()},applyChangedStates=function(Ja){Ja[STATUS_NEEDS_UPDATE_KEY]&&(Ja.getZr().storage.traverse(function(ec){isElementRemoved(ec)||o(ec)}),Ja[STATUS_NEEDS_UPDATE_KEY]=!1)};function o(Ja){for(var ec=[],tc=Ja.currentStates,rc=0;rc<tc.length;rc++){var nc=tc[rc];nc==="emphasis"||nc==="blur"||nc==="select"||ec.push(nc)}Ja.selected&&Ja.states.select&&ec.push("select"),Ja.hoverState===HOVER_STATE_EMPHASIS&&Ja.states.emphasis?ec.push("emphasis"):Ja.hoverState===HOVER_STATE_BLUR&&Ja.states.blur&&ec.push("blur"),Ja.useStates(ec)}function u(Ja,ec){var tc=Ja._zr,rc=tc.storage,nc=0;rc.traverse(function(ic){ic.isGroup||nc++}),nc>ec.get("hoverLayerThreshold")&&!env.node&&!env.worker&&ec.eachSeries(function(ic){if(!ic.preventUsingHoverLayer){var uc=Ja._chartsMap[ic.__viewId];uc.__alive&&uc.eachRendered(function(eh){eh.states.emphasis&&(eh.states.emphasis.hoverLayer=!0)})}})}function c(Ja,ec){var tc=Ja.get("blendMode")||null;ec.eachRendered(function(rc){rc.isGroup||(rc.style.blend=tc)})}function p(Ja,ec){if(!Ja.preventAutoZ){var tc=Ja.get("z")||0,rc=Ja.get("zlevel")||0;ec.eachRendered(function(nc){return d(nc,tc,rc,-1/0),!0})}}function d(Ja,ec,tc,rc){var nc=Ja.getTextContent(),ic=Ja.getTextGuideLine(),uc=Ja.isGroup;if(uc)for(var eh=Ja.childrenRef(),rh=0;rh<eh.length;rh++)rc=Math.max(d(eh[rh],ec,tc,rc),rc);else Ja.z=ec,Ja.zlevel=tc,rc=Math.max(Ja.z2,rc);if(nc&&(nc.z=ec,nc.zlevel=tc,isFinite(rc)&&(nc.z2=rc+2)),ic){var ah=Ja.textGuideLineConfig;ic.z=ec,ic.zlevel=tc,isFinite(rc)&&(ic.z2=rc+(ah&&ah.showAbove?1:-1))}return rc}function _(Ja,ec){ec.eachRendered(function(tc){if(!isElementRemoved(tc)){var rc=tc.getTextContent(),nc=tc.getTextGuideLine();tc.stateTransition&&(tc.stateTransition=null),rc&&rc.stateTransition&&(rc.stateTransition=null),nc&&nc.stateTransition&&(nc.stateTransition=null),tc.hasState()?(tc.prevStates=tc.currentStates,tc.clearStates()):tc.prevStates&&(tc.prevStates=null)}})}function ja(Ja,ec){var tc=Ja.getModel("stateAnimation"),rc=Ja.isAnimationEnabled(),nc=tc.get("duration"),ic=nc>0?{duration:nc,delay:tc.get("delay"),easing:tc.get("easing")}:null;ec.eachRendered(function(uc){if(uc.states&&uc.states.emphasis){if(isElementRemoved(uc))return;if(uc instanceof Path&&savePathStates(uc),uc.__dirty){var eh=uc.prevStates;eh&&uc.useStates(eh)}if(rc){uc.stateTransition=ic;var rh=uc.getTextContent(),ah=uc.getTextGuideLine();rh&&(rh.stateTransition=ic),ah&&(ah.stateTransition=ic)}uc.__dirty&&o(uc)}})}createExtensionAPI=function(Ja){return new(function(ec){__extends(tc,ec);function tc(){return ec!==null&&ec.apply(this,arguments)||this}return tc.prototype.getCoordinateSystems=function(){return Ja._coordSysMgr.getCoordinateSystems()},tc.prototype.getComponentByElement=function(rc){for(;rc;){var nc=rc.__ecComponentInfo;if(nc!=null)return Ja._model.getComponent(nc.mainType,nc.index);rc=rc.parent}},tc.prototype.enterEmphasis=function(rc,nc){enterEmphasis(rc,nc),markStatusToUpdate(Ja)},tc.prototype.leaveEmphasis=function(rc,nc){leaveEmphasis(rc,nc),markStatusToUpdate(Ja)},tc.prototype.enterBlur=function(rc){enterBlur(rc),markStatusToUpdate(Ja)},tc.prototype.leaveBlur=function(rc){leaveBlur(rc),markStatusToUpdate(Ja)},tc.prototype.enterSelect=function(rc){enterSelect(rc),markStatusToUpdate(Ja)},tc.prototype.leaveSelect=function(rc){leaveSelect(rc),markStatusToUpdate(Ja)},tc.prototype.getModel=function(){return Ja.getModel()},tc.prototype.getViewOfComponentModel=function(rc){return Ja.getViewOfComponentModel(rc)},tc.prototype.getViewOfSeriesModel=function(rc){return Ja.getViewOfSeriesModel(rc)},tc}(ExtensionAPI))(Ja)},enableConnect=function(Ja){function ec(tc,rc){for(var nc=0;nc<tc.length;nc++){var ic=tc[nc];ic[CONNECT_STATUS_KEY]=rc}}each$f(eventActionMap,function(tc,rc){Ja._messageCenter.on(rc,function(nc){if(connectedGroups[Ja.group]&&Ja[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(nc&&nc.escapeConnect)return;var ic=Ja.makeActionFromEvent(nc),uc=[];each$f(instances,function(eh){eh!==Ja&&eh.group===Ja.group&&uc.push(eh)}),ec(uc,CONNECT_STATUS_PENDING),each$f(uc,function(eh){eh[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&eh.dispatchAction(ic)}),ec(uc,CONNECT_STATUS_UPDATED)}})})}}(),r}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(n,r,a){var s=this;function o(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];r&&r.apply&&r.apply(this,u),s.off(n,o)}this.on.call(this,n,o,a)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(n){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(n,r,a){{var s=getInstanceByDom(n);if(s)return s}var o=new ECharts(n,r,a);return o.id="ec_"+idBase++,instances[o.id]=o,setAttribute(n,DOM_ATTRIBUTE_KEY,o.id),enableConnect(o),lifecycle.trigger("afterinit",o),o}function getInstanceByDom(n){return instances[getAttribute(n,DOM_ATTRIBUTE_KEY)]}function registerTheme(n,r){themeStorage[n]=r}function registerPreprocessor(n){indexOf(optionPreprocessorFuncs,n)<0&&optionPreprocessorFuncs.push(n)}function registerProcessor(n,r){normalizeRegister(dataProcessorFuncs,n,r,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(n){registerUpdateLifecycle("afterinit",n)}function registerPostUpdate(n){registerUpdateLifecycle("afterupdate",n)}function registerUpdateLifecycle(n,r){lifecycle.on(n,r)}function registerAction(n,r,a){isFunction(r)&&(a=r,r="");var s=isObject$3(n)?n.type:[n,n={event:r}][0];n.event=(n.event||s).toLowerCase(),r=n.event,!eventActionMap[r]&&(assert(ACTION_REG.test(s)&&ACTION_REG.test(r)),actions[s]||(actions[s]={action:a,actionInfo:n}),eventActionMap[r]=s)}function registerCoordinateSystem(n,r){CoordinateSystemManager.register(n,r)}function getCoordinateSystemDimensions(n){var r=CoordinateSystemManager.get(n);if(r)return r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice()}function registerLayout(n,r){normalizeRegister(visualFuncs,n,r,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(n,r){normalizeRegister(visualFuncs,n,r,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(n,r,a,s,o){if((isFunction(r)||isObject$3(r))&&(a=r,r=s),!(indexOf(registeredTasks,a)>=0)){registeredTasks.push(a);var u=Scheduler.wrapStageHandler(a,o);u.__prio=r,u.__raw=a,n.push(u)}}function registerLoading(n,r){loadingEffects[n]=r}function registerMap$1(n,r,a){var s=getImpl("registerMap");s&&s(n,r,a)}function getMap(n){var r=getImpl("getMap");return r&&r(n)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop$1);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop$1);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop$1);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop$1);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop$1);registerTheme("light",lightTheme);registerTheme("dark",theme$1);var extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(n){ComponentModel.registerClass(n)},registerComponentView:function(n){ComponentView.registerClass(n)},registerSeriesModel:function(n){SeriesModel.registerClass(n)},registerChartView:function(n){ChartView.registerClass(n)},registerSubTypeDefaulter:function(n,r){ComponentModel.registerSubTypeDefaulter(n,r)},registerPainter:function(n,r){registerPainter(n,r)}};function use(n){if(isArray$1(n)){each$f(n,function(r){use(r)});return}indexOf(extensions,n)>=0||(extensions.push(n),isFunction(n)&&(n={install:n}),n.install(extensionRegisters))}function dataIndexMapValueLength(n){return n==null?0:n.length||1}function defaultKeyGetter(n){return n}var DataDiffer=function(){function n(r,a,s,o,u,c){this._old=r,this._new=a,this._oldKeyGetter=s||defaultKeyGetter,this._newKeyGetter=o||defaultKeyGetter,this.context=u,this._diffModeMultiple=c==="multiple"}return n.prototype.add=function(r){return this._add=r,this},n.prototype.update=function(r){return this._update=r,this},n.prototype.updateManyToOne=function(r){return this._updateManyToOne=r,this},n.prototype.updateOneToMany=function(r){return this._updateOneToMany=r,this},n.prototype.updateManyToMany=function(r){return this._updateManyToMany=r,this},n.prototype.remove=function(r){return this._remove=r,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var r=this._old,a=this._new,s={},o=new Array(r.length),u=new Array(a.length);this._initIndexMap(r,null,o,"_oldKeyGetter"),this._initIndexMap(a,s,u,"_newKeyGetter");for(var c=0;c<r.length;c++){var p=o[c],d=s[p],_=dataIndexMapValueLength(d);if(_>1){var ja=d.shift();d.length===1&&(s[p]=d[0]),this._update&&this._update(ja,c)}else _===1?(s[p]=null,this._update&&this._update(d,c)):this._remove&&this._remove(c)}this._performRestAdd(u,s)},n.prototype._executeMultiple=function(){var r=this._old,a=this._new,s={},o={},u=[],c=[];this._initIndexMap(r,s,u,"_oldKeyGetter"),this._initIndexMap(a,o,c,"_newKeyGetter");for(var p=0;p<u.length;p++){var d=u[p],_=s[d],ja=o[d],Ja=dataIndexMapValueLength(_),ec=dataIndexMapValueLength(ja);if(Ja>1&&ec===1)this._updateManyToOne&&this._updateManyToOne(ja,_),o[d]=null;else if(Ja===1&&ec>1)this._updateOneToMany&&this._updateOneToMany(ja,_),o[d]=null;else if(Ja===1&&ec===1)this._update&&this._update(ja,_),o[d]=null;else if(Ja>1&&ec>1)this._updateManyToMany&&this._updateManyToMany(ja,_),o[d]=null;else if(Ja>1)for(var tc=0;tc<Ja;tc++)this._remove&&this._remove(_[tc]);else this._remove&&this._remove(_)}this._performRestAdd(c,o)},n.prototype._performRestAdd=function(r,a){for(var s=0;s<r.length;s++){var o=r[s],u=a[o],c=dataIndexMapValueLength(u);if(c>1)for(var p=0;p<c;p++)this._add&&this._add(u[p]);else c===1&&this._add&&this._add(u);a[o]=null}},n.prototype._initIndexMap=function(r,a,s,o){for(var u=this._diffModeMultiple,c=0;c<r.length;c++){var p="_ec_"+this[o](r[c],c);if(u||(s[c]=p),!!a){var d=a[p],_=dataIndexMapValueLength(d);_===0?(a[p]=c,u&&s.push(p)):_===1?a[p]=[d,c]:d.push(c)}}},n}(),DimensionUserOuput=function(){function n(r,a){this._encode=r,this._schema=a}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function summarizeDimensions(n,r){var a={},s=a.encode={},o=createHashMap(),u=[],c=[],p={};each$f(n.dimensions,function(ec){var tc=n.getDimensionInfo(ec),rc=tc.coordDim;if(rc){var nc=tc.coordDimIndex;getOrCreateEncodeArr(s,rc)[nc]=ec,tc.isExtraCoord||(o.set(rc,1),mayLabelDimType(tc.type)&&(u[0]=ec),getOrCreateEncodeArr(p,rc)[nc]=n.getDimensionIndex(tc.name)),tc.defaultTooltip&&c.push(ec)}VISUAL_DIMENSIONS.each(function(ic,uc){var eh=getOrCreateEncodeArr(s,uc),rh=tc.otherDims[uc];rh!=null&&rh!==!1&&(eh[rh]=tc.name)})});var d=[],_={};o.each(function(ec,tc){var rc=s[tc];_[tc]=rc[0],d=d.concat(rc)}),a.dataDimsOnCoord=d,a.dataDimIndicesOnCoord=map$1(d,function(ec){return n.getDimensionInfo(ec).storeDimIndex}),a.encodeFirstDimNotExtra=_;var ja=s.label;ja&&ja.length&&(u=ja.slice());var Ja=s.tooltip;return Ja&&Ja.length?c=Ja.slice():c.length||(c=u.slice()),s.defaultedLabel=u,s.defaultedTooltip=c,a.userOutput=new DimensionUserOuput(p,r),a}function getOrCreateEncodeArr(n,r){return n.hasOwnProperty(r)||(n[r]=[]),n[r]}function getDimensionTypeByAxis(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function mayLabelDimType(n){return!(n==="ordinal"||n==="time")}var SeriesDimensionDefine=function(){function n(r){this.otherDims={},r!=null&&extend$2(this,r)}return n}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function n(r){this.dimensions=r.dimensions,this._dimOmitted=r.dimensionOmitted,this.source=r.source,this._fullDimCount=r.fullDimensionCount,this._updateDimOmitted(r.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(r){this._dimOmitted=r,r&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},n.prototype.getSourceDimensionIndex=function(r){return retrieve2(this._dimNameMap.get(r),-1)},n.prototype.getSourceDimension=function(r){var a=this.source.dimensionsDefine;if(a)return a[r]},n.prototype.makeStoreSchema=function(){for(var r=this._fullDimCount,a=shouldRetrieveDataByName(this.source),s=!shouldOmitUnusedDimensions(r),o="",u=[],c=0,p=0;c<r;c++){var d=void 0,_=void 0,ja=void 0,Ja=this.dimensions[p];if(Ja&&Ja.storeDimIndex===c)d=a?Ja.name:null,_=Ja.type,ja=Ja.ordinalMeta,p++;else{var ec=this.getSourceDimension(c);ec&&(d=a?ec.name:null,_=ec.type)}u.push({property:d,type:_,ordinalMeta:ja}),a&&d!=null&&(!Ja||!Ja.isCalculationCoord)&&(o+=s?d.replace(/\`/g,"`1").replace(/\$/g,"`2"):d),o+="$",o+=dimTypeShort[_]||"f",ja&&(o+=ja.uid),o+="$"}var tc=this.source,rc=[tc.seriesLayoutBy,tc.startIndex,o].join("$$");return{dimensions:u,hash:rc}},n.prototype.makeOutputDimensionNames=function(){for(var r=[],a=0,s=0;a<this._fullDimCount;a++){var o=void 0,u=this.dimensions[s];if(u&&u.storeDimIndex===a)u.isCalculationCoord||(o=u.name),s++;else{var c=this.getSourceDimension(a);c&&(o=c.name)}r.push(o)}return r},n.prototype.appendCalculationDimension=function(r){this.dimensions.push(r),r.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function isSeriesDataSchema(n){return n instanceof SeriesDataSchema}function createDimNameMap(n){for(var r=createHashMap(),a=0;a<(n||[]).length;a++){var s=n[a],o=isObject$3(s)?s.name:s;o!=null&&r.get(o)==null&&r.set(o,a)}return r}function ensureSourceDimNameMap(n){var r=inner$h(n);return r.dimNameMap||(r.dimNameMap=createDimNameMap(n.dimensionsDefine))}function shouldOmitUnusedDimensions(n){return n>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function n(r,a){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var s,o=!1;isSeriesDataSchema(r)?(s=r.dimensions,this._dimOmitted=r.isDimensionOmitted(),this._schema=r):(o=!0,s=r),s=s||["x","y"];for(var u={},c=[],p={},d=!1,_={},ja=0;ja<s.length;ja++){var Ja=s[ja],ec=isString(Ja)?new SeriesDimensionDefine({name:Ja}):Ja instanceof SeriesDimensionDefine?Ja:new SeriesDimensionDefine(Ja),tc=ec.name;ec.type=ec.type||"float",ec.coordDim||(ec.coordDim=tc,ec.coordDimIndex=0);var rc=ec.otherDims=ec.otherDims||{};c.push(tc),u[tc]=ec,_[tc]!=null&&(d=!0),ec.createInvertedIndices&&(p[tc]=[]),rc.itemName===0&&(this._nameDimIdx=ja),rc.itemId===0&&(this._idDimIdx=ja),o&&(ec.storeDimIndex=ja)}if(this.dimensions=c,this._dimInfos=u,this._initGetDimensionInfo(d),this.hostModel=a,this._invertedIndicesMap=p,this._dimOmitted){var nc=this._dimIdxToName=createHashMap();each$f(c,function(ic){nc.set(u[ic].storeDimIndex,ic)})}}return n.prototype.getDimension=function(r){var a=this._recognizeDimIndex(r);if(a==null)return r;if(a=r,!this._dimOmitted)return this.dimensions[a];var s=this._dimIdxToName.get(a);if(s!=null)return s;var o=this._schema.getSourceDimension(a);if(o)return o.name},n.prototype.getDimensionIndex=function(r){var a=this._recognizeDimIndex(r);if(a!=null)return a;if(r==null)return-1;var s=this._getDimInfo(r);return s?s.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(r):-1},n.prototype._recognizeDimIndex=function(r){if(isNumber(r)||r!=null&&!isNaN(r)&&!this._getDimInfo(r)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(r)<0))return+r},n.prototype._getStoreDimIndex=function(r){var a=this.getDimensionIndex(r);return a},n.prototype.getDimensionInfo=function(r){return this._getDimInfo(this.getDimension(r))},n.prototype._initGetDimensionInfo=function(r){var a=this._dimInfos;this._getDimInfo=r?function(s){return a.hasOwnProperty(s)?a[s]:void 0}:function(s){return a[s]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(r,a){var s=this._dimSummary;if(a==null)return s.encodeFirstDimNotExtra[r];var o=s.encode[r];return o?o[a]:null},n.prototype.mapDimensionsAll=function(r){var a=this._dimSummary,s=a.encode[r];return(s||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(r,a,s){var o=this,u;if(r instanceof DataStore&&(u=r),!u){var c=this.dimensions,p=isSourceInstance(r)||isArrayLike(r)?new DefaultDataProvider(r,c.length):r;u=new DataStore;var d=map(c,function(_){return{type:o._dimInfos[_].type,property:_}});u.initData(p,d,s)}this._store=u,this._nameList=(a||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,u.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(r){var a=this._store.appendData(r);this._doInit(a[0],a[1])},n.prototype.appendValues=function(r,a){var s=this._store.appendValues(r,a.length),o=s.start,u=s.end,c=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),a)for(var p=o;p<u;p++){var d=p-o;this._nameList[p]=a[d],c&&makeIdFromName(this,p)}},n.prototype._updateOrdinalMeta=function(){for(var r=this._store,a=this.dimensions,s=0;s<a.length;s++){var o=this._dimInfos[a[s]];o.ordinalMeta&&r.collectOrdinalMeta(o.storeDimIndex,o.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var r=this._store.getProvider();return this._idDimIdx==null&&r.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!r.fillStorage},n.prototype._doInit=function(r,a){if(!(r>=a)){var s=this._store,o=s.getProvider();this._updateOrdinalMeta();var u=this._nameList,c=this._idList,p=o.getSource().sourceFormat,d=p===SOURCE_FORMAT_ORIGINAL;if(d&&!o.pure)for(var _=[],ja=r;ja<a;ja++){var Ja=o.getItem(ja,_);if(!this.hasItemOption&&isDataItemOption(Ja)&&(this.hasItemOption=!0),Ja){var ec=Ja.name;u[ja]==null&&ec!=null&&(u[ja]=convertOptionIdName(ec,null));var tc=Ja.id;c[ja]==null&&tc!=null&&(c[ja]=convertOptionIdName(tc,null))}}if(this._shouldMakeIdFromName())for(var ja=r;ja<a;ja++)makeIdFromName(this,ja);prepareInvertedIndex(this)}},n.prototype.getApproximateExtent=function(r){return this._approximateExtent[r]||this._store.getDataExtent(this._getStoreDimIndex(r))},n.prototype.setApproximateExtent=function(r,a){a=this.getDimension(a),this._approximateExtent[a]=r.slice()},n.prototype.getCalculationInfo=function(r){return this._calculationInfo[r]},n.prototype.setCalculationInfo=function(r,a){isObject$1(r)?extend$2(this._calculationInfo,r):this._calculationInfo[r]=a},n.prototype.getName=function(r){var a=this.getRawIndex(r),s=this._nameList[a];return s==null&&this._nameDimIdx!=null&&(s=getIdNameFromStore(this,this._nameDimIdx,a)),s==null&&(s=""),s},n.prototype._getCategory=function(r,a){var s=this._store.get(r,a),o=this._store.getOrdinalMeta(r);return o?o.categories[s]:s},n.prototype.getId=function(r){return getId(this,this.getRawIndex(r))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(r,a){var s=this._store,o=this._dimInfos[r];if(o)return s.get(o.storeDimIndex,a)},n.prototype.getByRawIndex=function(r,a){var s=this._store,o=this._dimInfos[r];if(o)return s.getByRawIndex(o.storeDimIndex,a)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(r){return this._store.getDataExtent(this._getStoreDimIndex(r))},n.prototype.getSum=function(r){return this._store.getSum(this._getStoreDimIndex(r))},n.prototype.getMedian=function(r){return this._store.getMedian(this._getStoreDimIndex(r))},n.prototype.getValues=function(r,a){var s=this,o=this._store;return isArray$1(r)?o.getValues(map(r,function(u){return s._getStoreDimIndex(u)}),a):o.getValues(r)},n.prototype.hasValue=function(r){for(var a=this._dimSummary.dataDimIndicesOnCoord,s=0,o=a.length;s<o;s++)if(isNaN(this._store.get(a[s],r)))return!1;return!0},n.prototype.indexOfName=function(r){for(var a=0,s=this._store.count();a<s;a++)if(this.getName(a)===r)return a;return-1},n.prototype.getRawIndex=function(r){return this._store.getRawIndex(r)},n.prototype.indexOfRawIndex=function(r){return this._store.indexOfRawIndex(r)},n.prototype.rawIndexOf=function(r,a){var s=r&&this._invertedIndicesMap[r],o=s[a];return o==null||isNaN(o)?INDEX_NOT_FOUND:o},n.prototype.indicesOfNearest=function(r,a,s){return this._store.indicesOfNearest(this._getStoreDimIndex(r),a,s)},n.prototype.each=function(r,a,s){isFunction(r)&&(s=a,a=r,r=[]);var o=s||this,u=map(normalizeDimensions(r),this._getStoreDimIndex,this);this._store.each(u,o?bind$1(a,o):a)},n.prototype.filterSelf=function(r,a,s){isFunction(r)&&(s=a,a=r,r=[]);var o=s||this,u=map(normalizeDimensions(r),this._getStoreDimIndex,this);return this._store=this._store.filter(u,o?bind$1(a,o):a),this},n.prototype.selectRange=function(r){var a=this,s={},o=keys(r);return each$f(o,function(u){var c=a._getStoreDimIndex(u);s[c]=r[u]}),this._store=this._store.selectRange(s),this},n.prototype.mapArray=function(r,a,s){isFunction(r)&&(s=a,a=r,r=[]),s=s||this;var o=[];return this.each(r,function(){o.push(a&&a.apply(this,arguments))},s),o},n.prototype.map=function(r,a,s,o){var u=s||o||this,c=map(normalizeDimensions(r),this._getStoreDimIndex,this),p=cloneListForMapAndSample(this);return p._store=this._store.map(c,u?bind$1(a,u):a),p},n.prototype.modify=function(r,a,s,o){var u=s||o||this,c=map(normalizeDimensions(r),this._getStoreDimIndex,this);this._store.modify(c,u?bind$1(a,u):a)},n.prototype.downSample=function(r,a,s,o){var u=cloneListForMapAndSample(this);return u._store=this._store.downSample(this._getStoreDimIndex(r),a,s,o),u},n.prototype.lttbDownSample=function(r,a){var s=cloneListForMapAndSample(this);return s._store=this._store.lttbDownSample(this._getStoreDimIndex(r),a),s},n.prototype.getRawDataItem=function(r){return this._store.getRawDataItem(r)},n.prototype.getItemModel=function(r){var a=this.hostModel,s=this.getRawDataItem(r);return new Model(s,a,a&&a.ecModel)},n.prototype.diff=function(r){var a=this;return new DataDiffer(r?r.getStore().getIndices():[],this.getStore().getIndices(),function(s){return getId(r,s)},function(s){return getId(a,s)})},n.prototype.getVisual=function(r){var a=this._visual;return a&&a[r]},n.prototype.setVisual=function(r,a){this._visual=this._visual||{},isObject$1(r)?extend$2(this._visual,r):this._visual[r]=a},n.prototype.getItemVisual=function(r,a){var s=this._itemVisuals[r],o=s&&s[a];return o??this.getVisual(a)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(r,a){var s=this._itemVisuals,o=s[r];o||(o=s[r]={});var u=o[a];return u==null&&(u=this.getVisual(a),isArray$1(u)?u=u.slice():isObject$1(u)&&(u=extend$2({},u)),o[a]=u),u},n.prototype.setItemVisual=function(r,a,s){var o=this._itemVisuals[r]||{};this._itemVisuals[r]=o,isObject$1(a)?extend$2(o,a):o[a]=s},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(r,a){isObject$1(r)?extend$2(this._layout,r):this._layout[r]=a},n.prototype.getLayout=function(r){return this._layout[r]},n.prototype.getItemLayout=function(r){return this._itemLayouts[r]},n.prototype.setItemLayout=function(r,a,s){this._itemLayouts[r]=s?extend$2(this._itemLayouts[r]||{},a):a},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(r,a){var s=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(s,this.dataType,r,a),this._graphicEls[r]=a},n.prototype.getItemGraphicEl=function(r){return this._graphicEls[r]},n.prototype.eachItemGraphicEl=function(r,a){each$f(this._graphicEls,function(s,o){s&&r&&r.call(a,s,o)})},n.prototype.cloneShallow=function(r){return r||(r=new n(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(r,this),r._store=this._store,r},n.prototype.wrapMethod=function(r,a){var s=this[r];isFunction(s)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(r),this[r]=function(){var o=s.apply(this,arguments);return a.apply(this,[o].concat(slice(arguments)))})},n.internalField=function(){prepareInvertedIndex=function(r){var a=r._invertedIndicesMap;each$f(a,function(s,o){var u=r._dimInfos[o],c=u.ordinalMeta,p=r._store;if(c){s=a[o]=new CtorInt32Array(c.categories.length);for(var d=0;d<s.length;d++)s[d]=INDEX_NOT_FOUND;for(var d=0;d<p.count();d++)s[p.get(u.storeDimIndex,d)]=d}})},getIdNameFromStore=function(r,a,s){return convertOptionIdName(r._getCategory(a,s),null)},getId=function(r,a){var s=r._idList[a];return s==null&&r._idDimIdx!=null&&(s=getIdNameFromStore(r,r._idDimIdx,a)),s==null&&(s=ID_PREFIX+a),s},normalizeDimensions=function(r){return isArray$1(r)||(r=r!=null?[r]:[]),r},cloneListForMapAndSample=function(r){var a=new n(r._schema?r._schema:map(r.dimensions,r._getDimInfo,r),r.hostModel);return transferProperties(a,r),a},transferProperties=function(r,a){each$f(TRANSFERABLE_PROPERTIES.concat(a.__wrappedMethods||[]),function(s){a.hasOwnProperty(s)&&(r[s]=a[s])}),r.__wrappedMethods=a.__wrappedMethods,each$f(CLONE_PROPERTIES,function(s){r[s]=clone$4(a[s])}),r._calculationInfo=extend$2({},a._calculationInfo)},makeIdFromName=function(r,a){var s=r._nameList,o=r._idList,u=r._nameDimIdx,c=r._idDimIdx,p=s[a],d=o[a];if(p==null&&u!=null&&(s[a]=p=getIdNameFromStore(r,u,a)),d==null&&c!=null&&(o[a]=d=getIdNameFromStore(r,c,a)),d==null&&p!=null){var _=r._nameRepeatCount,ja=_[p]=(_[p]||0)+1;d=p,ja>1&&(d+="__ec__"+ja),o[a]=d}}}(),n}();function createDimensions(n,r){return prepareSeriesDataSchema(n,r).dimensions}function prepareSeriesDataSchema(n,r){isSourceInstance(n)||(n=createSourceFromSeriesDataOption(n)),r=r||{};var a=r.coordDimensions||[],s=r.dimensionsDefine||n.dimensionsDefine||[],o=createHashMap(),u=[],c=getDimCount(n,a,s,r.dimensionsCount),p=r.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(c),d=s===n.dimensionsDefine,_=d?ensureSourceDimNameMap(n):createDimNameMap(s),ja=r.encodeDefine;!ja&&r.encodeDefaulter&&(ja=r.encodeDefaulter(n,c));for(var Ja=createHashMap(ja),ec=new CtorInt32Array$1(c),tc=0;tc<ec.length;tc++)ec[tc]=-1;function rc(hh){var dh=ec[hh];if(dh<0){var gh=s[hh],fh=isObject$3(gh)?gh:{name:gh},vh=new SeriesDimensionDefine,ph=fh.name;ph!=null&&_.get(ph)!=null&&(vh.name=vh.displayName=ph),fh.type!=null&&(vh.type=fh.type),fh.displayName!=null&&(vh.displayName=fh.displayName);var yh=u.length;return ec[hh]=yh,vh.storeDimIndex=hh,u.push(vh),vh}return u[dh]}if(!p)for(var tc=0;tc<c;tc++)rc(tc);Ja.each(function(hh,dh){var gh=normalizeToArray(hh).slice();if(gh.length===1&&!isString(gh[0])&&gh[0]<0){Ja.set(dh,!1);return}var fh=Ja.set(dh,[]);each$f(gh,function(vh,ph){var yh=isString(vh)?_.get(vh):vh;yh!=null&&yh<c&&(fh[ph]=yh,ic(rc(yh),dh,ph))})});var nc=0;each$f(a,function(hh){var dh,gh,fh,vh;if(isString(hh))dh=hh,vh={};else{vh=hh,dh=vh.name;var ph=vh.ordinalMeta;vh.ordinalMeta=null,vh=extend$2({},vh),vh.ordinalMeta=ph,gh=vh.dimsDef,fh=vh.otherDims,vh.name=vh.coordDim=vh.coordDimIndex=vh.dimsDef=vh.otherDims=null}var yh=Ja.get(dh);if(yh!==!1){if(yh=normalizeToArray(yh),!yh.length)for(var xh=0;xh<(gh&&gh.length||1);xh++){for(;nc<c&&rc(nc).coordDim!=null;)nc++;nc<c&&yh.push(nc++)}each$f(yh,function(_h,bh){var Dh=rc(_h);if(d&&vh.type!=null&&(Dh.type=vh.type),ic(defaults(Dh,vh),dh,bh),Dh.name==null&&gh){var Th=gh[bh];!isObject$3(Th)&&(Th={name:Th}),Dh.name=Dh.displayName=Th.name,Dh.defaultTooltip=Th.defaultTooltip}fh&&defaults(Dh.otherDims,fh)})}});function ic(hh,dh,gh){VISUAL_DIMENSIONS.get(dh)!=null?hh.otherDims[dh]=gh:(hh.coordDim=dh,hh.coordDimIndex=gh,o.set(dh,!0))}var uc=r.generateCoord,eh=r.generateCoordCount,rh=eh!=null;eh=uc?eh||1:0;var ah=uc||"value";function ih(hh){hh.name==null&&(hh.name=hh.coordDim)}if(p)each$f(u,function(hh){ih(hh)}),u.sort(function(hh,dh){return hh.storeDimIndex-dh.storeDimIndex});else for(var oh=0;oh<c;oh++){var uh=rc(oh),ch=uh.coordDim;ch==null&&(uh.coordDim=genCoordDimName(ah,o,rh),uh.coordDimIndex=0,(!uc||eh<=0)&&(uh.isExtraCoord=!0),eh--),ih(uh),uh.type==null&&(guessOrdinal(n,oh)===BE_ORDINAL.Must||uh.isExtraCoord&&(uh.otherDims.itemName!=null||uh.otherDims.seriesName!=null))&&(uh.type="ordinal")}return removeDuplication(u),new SeriesDataSchema({source:n,dimensions:u,fullDimensionCount:c,dimensionOmitted:p})}function removeDuplication(n){for(var r=createHashMap(),a=0;a<n.length;a++){var s=n[a],o=s.name,u=r.get(o)||0;u>0&&(s.name=o+(u-1)),u++,r.set(o,u)}}function getDimCount(n,r,a,s){var o=Math.max(n.dimensionsDetectedCount||1,r.length,a.length,s||0);return each$f(r,function(u){var c;isObject$3(u)&&(c=u.dimsDef)&&(o=Math.max(o,c.length))}),o}function genCoordDimName(n,r,a){if(a||r.hasKey(n)){for(var s=0;r.hasKey(n+s);)s++;n+=s}return r.set(n,!0),n}var CoordSysInfo=function(){function n(r){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=r}return n}();function getCoordSysInfoBySeries(n){var r=n.get("coordinateSystem"),a=new CoordSysInfo(r),s=fetchers[r];if(s)return s(n,a,a.axisMap,a.categoryAxisMap),a}var fetchers={cartesian2d:function(n,r,a,s){var o=n.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],u=n.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];r.coordSysDims=["x","y"],a.set("x",o),a.set("y",u),isCategory(o)&&(s.set("x",o),r.firstCategoryDimIndex=0),isCategory(u)&&(s.set("y",u),r.firstCategoryDimIndex==null&&(r.firstCategoryDimIndex=1))},singleAxis:function(n,r,a,s){var o=n.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];r.coordSysDims=["single"],a.set("single",o),isCategory(o)&&(s.set("single",o),r.firstCategoryDimIndex=0)},polar:function(n,r,a,s){var o=n.getReferringComponents("polar",SINGLE_REFERRING).models[0],u=o.findAxisModel("radiusAxis"),c=o.findAxisModel("angleAxis");r.coordSysDims=["radius","angle"],a.set("radius",u),a.set("angle",c),isCategory(u)&&(s.set("radius",u),r.firstCategoryDimIndex=0),isCategory(c)&&(s.set("angle",c),r.firstCategoryDimIndex==null&&(r.firstCategoryDimIndex=1))},geo:function(n,r,a,s){r.coordSysDims=["lng","lat"]},parallel:function(n,r,a,s){var o=n.ecModel,u=o.getComponent("parallel",n.get("parallelIndex")),c=r.coordSysDims=u.dimensions.slice();each$f(u.parallelAxisIndex,function(p,d){var _=o.getComponent("parallelAxis",p),ja=c[d];a.set(ja,_),isCategory(_)&&(s.set(ja,_),r.firstCategoryDimIndex==null&&(r.firstCategoryDimIndex=d))})}};function isCategory(n){return n.get("type")==="category"}function enableDataStack(n,r,a){a=a||{};var s=a.byIndex,o=a.stackedCoordDimension,u,c,p;isLegacyDimensionsInput(r)?u=r:(c=r.schema,u=c.dimensions,p=r.store);var d=!!(n&&n.get("stack")),_,ja,Ja,ec;if(each$f(u,function(eh,rh){isString(eh)&&(u[rh]=eh={name:eh}),d&&!eh.isExtraCoord&&(!s&&!_&&eh.ordinalMeta&&(_=eh),!ja&&eh.type!=="ordinal"&&eh.type!=="time"&&(!o||o===eh.coordDim)&&(ja=eh))}),ja&&!s&&!_&&(s=!0),ja){Ja="__\0ecstackresult_"+n.id,ec="__\0ecstackedover_"+n.id,_&&(_.createInvertedIndices=!0);var tc=ja.coordDim,rc=ja.type,nc=0;each$f(u,function(eh){eh.coordDim===tc&&nc++});var ic={name:Ja,coordDim:tc,coordDimIndex:nc,type:rc,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length},uc={name:ec,coordDim:ec,coordDimIndex:nc+1,type:rc,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length+1};c?(p&&(ic.storeDimIndex=p.ensureCalculationDimension(ec,rc),uc.storeDimIndex=p.ensureCalculationDimension(Ja,rc)),c.appendCalculationDimension(ic),c.appendCalculationDimension(uc)):(u.push(ic),u.push(uc))}return{stackedDimension:ja&&ja.name,stackedByDimension:_&&_.name,isStackedByIndex:s,stackedOverDimension:ec,stackResultDimension:Ja}}function isLegacyDimensionsInput(n){return!isSeriesDataSchema(n.schema)}function isDimensionStacked$2(n,r){return!!r&&r===n.getCalculationInfo("stackedDimension")}function getStackedDimension(n,r){return isDimensionStacked$2(n,r)?n.getCalculationInfo("stackResultDimension"):r}function getCoordSysDimDefs(n,r){var a=n.get("coordinateSystem"),s=CoordinateSystemManager.get(a),o;return r&&r.coordSysDims&&(o=map$1(r.coordSysDims,function(u){var c={name:u},p=r.axisMap.get(u);if(p){var d=p.get("type");c.type=getDimensionTypeByAxis(d)}return c})),o||(o=s&&(s.getDimensionsInfo?s.getDimensionsInfo():s.dimensions.slice())||["x","y"]),o}function injectOrdinalMeta(n,r,a){var s,o;return a&&each$f(n,function(u,c){var p=u.coordDim,d=a.categoryAxisMap.get(p);d&&(s==null&&(s=c),u.ordinalMeta=d.getOrdinalMeta(),r&&(u.createInvertedIndices=!0)),u.otherDims.itemName!=null&&(o=!0)}),!o&&s!=null&&(n[s].otherDims.itemName=0),s}function createSeriesData(n,r,a){a=a||{};var s=r.getSourceManager(),o,u=!1;n?(u=!0,o=createSourceFromSeriesDataOption(n)):(o=s.getSource(),u=o.sourceFormat===SOURCE_FORMAT_ORIGINAL);var c=getCoordSysInfoBySeries(r),p=getCoordSysDimDefs(r,c),d=a.useEncodeDefaulter,_=isFunction(d)?d:d?curry$1(makeSeriesEncodeForAxisCoordSys,p,r):null,ja={coordDimensions:p,generateCoord:a.generateCoord,encodeDefine:r.getEncode(),encodeDefaulter:_,canOmitUnusedDimensions:!u},Ja=prepareSeriesDataSchema(o,ja),ec=injectOrdinalMeta(Ja.dimensions,a.createInvertedIndices,c),tc=u?null:s.getSharedDataStore(Ja),rc=enableDataStack(r,{schema:Ja,store:tc}),nc=new SeriesData(Ja,r);nc.setCalculationInfo(rc);var ic=ec!=null&&isNeedCompleteOrdinalData(o)?function(uc,eh,rh,ah){return ah===ec?rh:this.defaultDimValueGetter(uc,eh,rh,ah)}:null;return nc.hasItemOption=!1,nc.initData(u?o:tc,null,ic),nc}function isNeedCompleteOrdinalData(n){if(n.sourceFormat===SOURCE_FORMAT_ORIGINAL){var r=firstDataNotNull(n.data||[]);return!isArray$1(getDataItemValue(r))}}function firstDataNotNull(n){for(var r=0;r<n.length&&n[r]==null;)r++;return n[r]}var Scale=function(){function n(r){this._setting=r||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(r){return this._setting[r]},n.prototype.unionExtent=function(r){var a=this._extent;r[0]<a[0]&&(a[0]=r[0]),r[1]>a[1]&&(a[1]=r[1])},n.prototype.unionExtentFromData=function(r,a){this.unionExtent(r.getApproximateExtent(a))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(r,a){var s=this._extent;isNaN(r)||(s[0]=r),isNaN(a)||(s[1]=a)},n.prototype.isInExtentRange=function(r){return this._extent[0]<=r&&this._extent[1]>=r},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(r){this._isBlank=r},n}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function n(r){this.categories=r.categories||[],this._needCollect=r.needCollect,this._deduplication=r.deduplication,this.uid=++uidBase}return n.createByAxisModel=function(r){var a=r.option,s=a.data,o=s&&map$1(s,getName);return new n({categories:o,needCollect:!o,deduplication:a.dedplication!==!1})},n.prototype.getOrdinal=function(r){return this._getOrCreateMap().get(r)},n.prototype.parseAndCollect=function(r){var a,s=this._needCollect;if(!isString(r)&&!s)return r;if(s&&!this._deduplication)return a=this.categories.length,this.categories[a]=r,a;var o=this._getOrCreateMap();return a=o.get(r),a==null&&(s?(a=this.categories.length,this.categories[a]=r,o.set(r,a)):a=NaN),a},n.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},n}();function getName(n){return isObject$3(n)&&n.value!=null?n.value:n+""}function isIntervalOrLogScale(n){return n.type==="interval"||n.type==="log"}function intervalScaleNiceTicks(n,r,a,s){var o={},u=n[1]-n[0],c=o.interval=nice(u/r);a!=null&&c<a&&(c=o.interval=a),s!=null&&c>s&&(c=o.interval=s);var p=o.intervalPrecision=getIntervalPrecision(c),d=o.niceTickExtent=[round$3(Math.ceil(n[0]/c)*c,p),round$3(Math.floor(n[1]/c)*c,p)];return fixExtent(d,n),o}function increaseInterval(n){var r=Math.pow(10,quantityExponent(n)),a=n/r;return a?a===2?a=3:a===3?a=5:a*=2:a=1,round$3(a*r)}function getIntervalPrecision(n){return getPrecision(n)+2}function clamp$1(n,r,a){n[r]=Math.max(Math.min(n[r],a[1]),a[0])}function fixExtent(n,r){!isFinite(n[0])&&(n[0]=r[0]),!isFinite(n[1])&&(n[1]=r[1]),clamp$1(n,0,r),clamp$1(n,1,r),n[0]>n[1]&&(n[0]=n[1])}function contain$1(n,r){return n>=r[0]&&n<=r[1]}function normalize$4(n,r){return r[1]===r[0]?.5:(n-r[0])/(r[1]-r[0])}function scale(n,r){return n*(r[1]-r[0])+r[0]}var OrdinalScale=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;s.type="ordinal";var o=s.getSetting("ordinalMeta");return o||(o=new OrdinalMeta({})),isArray$1(o)&&(o=new OrdinalMeta({categories:map$1(o,function(u){return isObject$3(u)?u.value:u})})),s._ordinalMeta=o,s._extent=s.getSetting("extent")||[0,o.categories.length-1],s}return r.prototype.parse=function(a){return a==null?NaN:isString(a)?this._ordinalMeta.getOrdinal(a):Math.round(a)},r.prototype.contain=function(a){return a=this.parse(a),contain$1(a,this._extent)&&this._ordinalMeta.categories[a]!=null},r.prototype.normalize=function(a){return a=this._getTickNumber(this.parse(a)),normalize$4(a,this._extent)},r.prototype.scale=function(a){return a=Math.round(scale(a,this._extent)),this.getRawOrdinalNumber(a)},r.prototype.getTicks=function(){for(var a=[],s=this._extent,o=s[0];o<=s[1];)a.push({value:o}),o++;return a},r.prototype.getMinorTicks=function(a){},r.prototype.setSortInfo=function(a){if(a==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var s=a.ordinalNumbers,o=this._ordinalNumbersByTick=[],u=this._ticksByOrdinalNumber=[],c=0,p=this._ordinalMeta.categories.length,d=Math.min(p,s.length);c<d;++c){var _=s[c];o[c]=_,u[_]=c}for(var ja=0;c<p;++c){for(;u[ja]!=null;)ja++;o.push(ja),u[ja]=c}},r.prototype._getTickNumber=function(a){var s=this._ticksByOrdinalNumber;return s&&a>=0&&a<s.length?s[a]:a},r.prototype.getRawOrdinalNumber=function(a){var s=this._ordinalNumbersByTick;return s&&a>=0&&a<s.length?s[a]:a},r.prototype.getLabel=function(a){if(!this.isBlank()){var s=this.getRawOrdinalNumber(a.value),o=this._ordinalMeta.categories[s];return o==null?"":o+""}},r.prototype.count=function(){return this._extent[1]-this._extent[0]+1},r.prototype.unionExtentFromData=function(a,s){this.unionExtent(a.getApproximateExtent(s))},r.prototype.isInExtentRange=function(a){return a=this._getTickNumber(a),this._extent[0]<=a&&this._extent[1]>=a},r.prototype.getOrdinalMeta=function(){return this._ordinalMeta},r.prototype.calcNiceTicks=function(){},r.prototype.calcNiceExtent=function(){},r.type="ordinal",r}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type="interval",a._interval=0,a._intervalPrecision=2,a}return r.prototype.parse=function(a){return a},r.prototype.contain=function(a){return contain$1(a,this._extent)},r.prototype.normalize=function(a){return normalize$4(a,this._extent)},r.prototype.scale=function(a){return scale(a,this._extent)},r.prototype.setExtent=function(a,s){var o=this._extent;isNaN(a)||(o[0]=parseFloat(a)),isNaN(s)||(o[1]=parseFloat(s))},r.prototype.unionExtent=function(a){var s=this._extent;a[0]<s[0]&&(s[0]=a[0]),a[1]>s[1]&&(s[1]=a[1]),this.setExtent(s[0],s[1])},r.prototype.getInterval=function(){return this._interval},r.prototype.setInterval=function(a){this._interval=a,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(a)},r.prototype.getTicks=function(a){var s=this._interval,o=this._extent,u=this._niceExtent,c=this._intervalPrecision,p=[];if(!s)return p;var d=1e4;o[0]<u[0]&&(a?p.push({value:roundNumber(u[0]-s,c)}):p.push({value:o[0]}));for(var _=u[0];_<=u[1]&&(p.push({value:_}),_=roundNumber(_+s,c),_!==p[p.length-1].value);)if(p.length>d)return[];var ja=p.length?p[p.length-1].value:u[1];return o[1]>ja&&(a?p.push({value:roundNumber(ja+s,c)}):p.push({value:o[1]})),p},r.prototype.getMinorTicks=function(a){for(var s=this.getTicks(!0),o=[],u=this.getExtent(),c=1;c<s.length;c++){for(var p=s[c],d=s[c-1],_=0,ja=[],Ja=p.value-d.value,ec=Ja/a;_<a-1;){var tc=roundNumber(d.value+(_+1)*ec);tc>u[0]&&tc<u[1]&&ja.push(tc),_++}o.push(ja)}return o},r.prototype.getLabel=function(a,s){if(a==null)return"";var o=s&&s.precision;o==null?o=getPrecision(a.value)||0:o==="auto"&&(o=this._intervalPrecision);var u=roundNumber(a.value,o,!0);return addCommas(u)},r.prototype.calcNiceTicks=function(a,s,o){a=a||5;var u=this._extent,c=u[1]-u[0];if(isFinite(c)){c<0&&(c=-c,u.reverse());var p=intervalScaleNiceTicks(u,a,s,o);this._intervalPrecision=p.intervalPrecision,this._interval=p.interval,this._niceExtent=p.niceTickExtent}},r.prototype.calcNiceExtent=function(a){var s=this._extent;if(s[0]===s[1])if(s[0]!==0){var o=Math.abs(s[0]);a.fixMax||(s[1]+=o/2),s[0]-=o/2}else s[1]=1;var u=s[1]-s[0];isFinite(u)||(s[0]=0,s[1]=1),this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval);var c=this._interval;a.fixMin||(s[0]=roundNumber(Math.floor(s[0]/c)*c)),a.fixMax||(s[1]=roundNumber(Math.ceil(s[1]/c)*c))},r.prototype.setNiceExtent=function(a,s){this._niceExtent=[a,s]},r.type="interval",r}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(n){return isArray$1(n)?supportFloat32Array?new Float32Array(n):n:new Float32ArrayCtor(n)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(n){return n.get("stack")||STACK_PREFIX+n.seriesIndex}function getAxisKey$1(n){return n.dim+n.index}function getLayoutOnAxis(n){var r=[],a=n.axis,s="axis0";if(a.type==="category"){for(var o=a.getBandWidth(),u=0;u<n.count;u++)r.push(defaults({bandWidth:o,axisKey:s,stackId:STACK_PREFIX+u},n));for(var c=doCalBarWidthAndOffset(r),p=[],u=0;u<n.count;u++){var d=c[s][STACK_PREFIX+u];d.offsetCenter=d.offset+d.width/2,p.push(d)}return p}}function prepareLayoutBarSeries(n,r){var a=[];return r.eachSeriesByType(n,function(s){isOnCartesian(s)&&a.push(s)}),a}function getValueAxesMinGaps(n){var r={};each$f(n,function(d){var _=d.coordinateSystem,ja=_.getBaseAxis();if(!(ja.type!=="time"&&ja.type!=="value"))for(var Ja=d.getData(),ec=ja.dim+"_"+ja.index,tc=Ja.getDimensionIndex(Ja.mapDimension(ja.dim)),rc=Ja.getStore(),nc=0,ic=rc.count();nc<ic;++nc){var uc=rc.get(tc,nc);r[ec]?r[ec].push(uc):r[ec]=[uc]}});var a={};for(var s in r)if(r.hasOwnProperty(s)){var o=r[s];if(o){o.sort(function(d,_){return d-_});for(var u=null,c=1;c<o.length;++c){var p=o[c]-o[c-1];p>0&&(u=u===null?p:Math.min(u,p))}a[s]=u}}return a}function makeColumnLayout(n){var r=getValueAxesMinGaps(n),a=[];return each$f(n,function(s){var o=s.coordinateSystem,u=o.getBaseAxis(),c=u.getExtent(),p;if(u.type==="category")p=u.getBandWidth();else if(u.type==="value"||u.type==="time"){var d=u.dim+"_"+u.index,_=r[d],ja=Math.abs(c[1]-c[0]),Ja=u.scale.getExtent(),ec=Math.abs(Ja[1]-Ja[0]);p=_?ja/ec*_:ja}else{var tc=s.getData();p=Math.abs(c[1]-c[0])/tc.count()}var rc=parsePercent(s.get("barWidth"),p),nc=parsePercent(s.get("barMaxWidth"),p),ic=parsePercent(s.get("barMinWidth")||(isInLargeMode(s)?.5:1),p),uc=s.get("barGap"),eh=s.get("barCategoryGap");a.push({bandWidth:p,barWidth:rc,barMaxWidth:nc,barMinWidth:ic,barGap:uc,barCategoryGap:eh,axisKey:getAxisKey$1(u),stackId:getSeriesStackId$1(s)})}),doCalBarWidthAndOffset(a)}function doCalBarWidthAndOffset(n){var r={};each$f(n,function(s,o){var u=s.axisKey,c=s.bandWidth,p=r[u]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},d=p.stacks;r[u]=p;var _=s.stackId;d[_]||p.autoWidthCount++,d[_]=d[_]||{width:0,maxWidth:0};var ja=s.barWidth;ja&&!d[_].width&&(d[_].width=ja,ja=Math.min(p.remainedWidth,ja),p.remainedWidth-=ja);var Ja=s.barMaxWidth;Ja&&(d[_].maxWidth=Ja);var ec=s.barMinWidth;ec&&(d[_].minWidth=ec);var tc=s.barGap;tc!=null&&(p.gap=tc);var rc=s.barCategoryGap;rc!=null&&(p.categoryGap=rc)});var a={};return each$f(r,function(s,o){a[o]={};var u=s.stacks,c=s.bandWidth,p=s.categoryGap;if(p==null){var d=keys(u).length;p=Math.max(35-d*4,15)+"%"}var _=parsePercent(p,c),ja=parsePercent(s.gap,1),Ja=s.remainedWidth,ec=s.autoWidthCount,tc=(Ja-_)/(ec+(ec-1)*ja);tc=Math.max(tc,0),each$f(u,function(uc){var eh=uc.maxWidth,rh=uc.minWidth;if(uc.width){var ah=uc.width;eh&&(ah=Math.min(ah,eh)),rh&&(ah=Math.max(ah,rh)),uc.width=ah,Ja-=ah+ja*ah,ec--}else{var ah=tc;eh&&eh<ah&&(ah=Math.min(eh,Ja)),rh&&rh>ah&&(ah=rh),ah!==tc&&(uc.width=ah,Ja-=ah+ja*ah,ec--)}}),tc=(Ja-_)/(ec+(ec-1)*ja),tc=Math.max(tc,0);var rc=0,nc;each$f(u,function(uc,eh){uc.width||(uc.width=tc),nc=uc,rc+=uc.width*(1+ja)}),nc&&(rc-=nc.width*ja);var ic=-rc/2;each$f(u,function(uc,eh){a[o][eh]=a[o][eh]||{bandWidth:c,offset:ic,width:uc.width},ic+=uc.width*(1+ja)})}),a}function retrieveColumnLayout(n,r,a){if(n&&r){var s=n[getAxisKey$1(r)];return s!=null&&a!=null?s[getSeriesStackId$1(a)]:s}}function layout$3(n,r){var a=prepareLayoutBarSeries(n,r),s=makeColumnLayout(a);each$f(a,function(o){var u=o.getData(),c=o.coordinateSystem,p=c.getBaseAxis(),d=getSeriesStackId$1(o),_=s[getAxisKey$1(p)][d],ja=_.offset,Ja=_.width;u.setLayout({bandWidth:_.bandWidth,offset:ja,size:Ja})})}function createProgressiveLayout(n){return{seriesType:n,plan:createRenderPlanner(),reset:function(r){if(isOnCartesian(r)){var a=r.getData(),s=r.coordinateSystem,o=s.getBaseAxis(),u=s.getOtherAxis(o),c=a.getDimensionIndex(a.mapDimension(u.dim)),p=a.getDimensionIndex(a.mapDimension(o.dim)),d=r.get("showBackground",!0),_=a.mapDimension(u.dim),ja=a.getCalculationInfo("stackResultDimension"),Ja=isDimensionStacked$2(a,_)&&!!a.getCalculationInfo("stackedOnSeries"),ec=u.isHorizontal(),tc=getValueAxisStart(o,u),rc=isInLargeMode(r),nc=r.get("barMinHeight")||0,ic=ja&&a.getDimensionIndex(ja),uc=a.getLayout("size"),eh=a.getLayout("offset");return{progress:function(rh,ah){for(var ih=rh.count,oh=rc&&createFloat32Array(ih*3),uh=rc&&d&&createFloat32Array(ih*3),ch=rc&&createFloat32Array(ih),hh=s.master.getRect(),dh=ec?hh.width:hh.height,gh,fh=ah.getStore(),vh=0;(gh=rh.next())!=null;){var ph=fh.get(Ja?ic:c,gh),yh=fh.get(p,gh),xh=tc,_h=void 0;Ja&&(_h=+ph-fh.get(c,gh));var bh=void 0,Dh=void 0,Th=void 0,Ch=void 0;if(ec){var wh=s.dataToPoint([ph,yh]);if(Ja){var Nh=s.dataToPoint([_h,yh]);xh=Nh[0]}bh=xh,Dh=wh[1]+eh,Th=wh[0]-xh,Ch=uc,Math.abs(Th)<nc&&(Th=(Th<0?-1:1)*nc)}else{var wh=s.dataToPoint([yh,ph]);if(Ja){var Nh=s.dataToPoint([yh,_h]);xh=Nh[1]}bh=wh[0]+eh,Dh=xh,Th=uc,Ch=wh[1]-xh,Math.abs(Ch)<nc&&(Ch=(Ch<=0?-1:1)*nc)}rc?(oh[vh]=bh,oh[vh+1]=Dh,oh[vh+2]=ec?Th:Ch,uh&&(uh[vh]=ec?hh.x:bh,uh[vh+1]=ec?Dh:hh.y,uh[vh+2]=dh),ch[gh]=gh):ah.setItemLayout(gh,{x:bh,y:Dh,width:Th,height:Ch}),vh+=3}rc&&ah.setLayout({largePoints:oh,largeDataIndices:ch,largeBackgroundPoints:uh,valueAxisHorizontal:ec})}}}}}}function isOnCartesian(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function isInLargeMode(n){return n.pipelineContext&&n.pipelineContext.large}function getValueAxisStart(n,r){return r.toGlobalCoord(r.dataToCoord(r.type==="log"?1:0))}var bisect=function(n,r,a,s){for(;a<s;){var o=a+s>>>1;n[o][1]<r?a=o+1:s=o}return a},TimeScale=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="time",s}return r.prototype.getLabel=function(a){var s=this.getSetting("useUTC");return format(a.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,s,this.getSetting("locale"))},r.prototype.getFormattedLabel=function(a,s,o){var u=this.getSetting("useUTC"),c=this.getSetting("locale");return leveledFormat(a,s,o,c,u)},r.prototype.getTicks=function(){var a=this._interval,s=this._extent,o=[];if(!a)return o;o.push({value:s[0],level:0});var u=this.getSetting("useUTC"),c=getIntervalTicks(this._minLevelUnit,this._approxInterval,u,s);return o=o.concat(c),o.push({value:s[1],level:0}),o},r.prototype.calcNiceExtent=function(a){var s=this._extent;if(s[0]===s[1]&&(s[0]-=ONE_DAY,s[1]+=ONE_DAY),s[1]===-1/0&&s[0]===1/0){var o=new Date;s[1]=+new Date(o.getFullYear(),o.getMonth(),o.getDate()),s[0]=s[1]-ONE_DAY}this.calcNiceTicks(a.splitNumber,a.minInterval,a.maxInterval)},r.prototype.calcNiceTicks=function(a,s,o){a=a||10;var u=this._extent,c=u[1]-u[0];this._approxInterval=c/a,s!=null&&this._approxInterval<s&&(this._approxInterval=s),o!=null&&this._approxInterval>o&&(this._approxInterval=o);var p=scaleIntervals.length,d=Math.min(bisect(scaleIntervals,this._approxInterval,0,p),p-1);this._interval=scaleIntervals[d][1],this._minLevelUnit=scaleIntervals[Math.max(d-1,0)][0]},r.prototype.parse=function(a){return isNumber(a)?a:+parseDate(a)},r.prototype.contain=function(a){return contain$1(this.parse(a),this._extent)},r.prototype.normalize=function(a){return normalize$4(this.parse(a),this._extent)},r.prototype.scale=function(a){return scale(a,this._extent)},r.type="time",r}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(n,r,a,s){var o=parseDate(r),u=parseDate(a),c=function(rc){return getUnitValue(o,rc,s)===getUnitValue(u,rc,s)},p=function(){return c("year")},d=function(){return p()&&c("month")},_=function(){return d()&&c("day")},ja=function(){return _()&&c("hour")},Ja=function(){return ja()&&c("minute")},ec=function(){return Ja()&&c("second")},tc=function(){return ec()&&c("millisecond")};switch(n){case"year":return p();case"month":return d();case"day":return _();case"hour":return ja();case"minute":return Ja();case"second":return ec();case"millisecond":return tc()}}function getDateInterval(n,r){return n/=ONE_DAY,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function getMonthInterval(n){var r=30*ONE_DAY;return n/=r,n>6?6:n>3?3:n>2?2:1}function getHourInterval(n){return n/=ONE_HOUR,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function getMinutesAndSecondsInterval(n,r){return n/=r?ONE_MINUTE:ONE_SECOND,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function getMillisecondsInterval(n){return nice(n)}function getFirstTimestampOfUnit(n,r,a){var s=new Date(n);switch(getPrimaryTimeUnit(r)){case"year":case"month":s[monthSetterName(a)](0);case"day":s[dateSetterName(a)](1);case"hour":s[hoursSetterName(a)](0);case"minute":s[minutesSetterName(a)](0);case"second":s[secondsSetterName(a)](0),s[millisecondsSetterName(a)](0)}return s.getTime()}function getIntervalTicks(n,r,a,s){var o=1e4,u=timeUnits,c=0;function p(dh,gh,fh,vh,ph,yh,xh){for(var _h=new Date(gh),bh=gh,Dh=_h[vh]();bh<fh&&bh<=s[1];)xh.push({value:bh}),Dh+=dh,_h[ph](Dh),bh=_h.getTime();xh.push({value:bh,notAdd:!0})}function d(dh,gh,fh){var vh=[],ph=!gh.length;if(!isUnitValueSame(getPrimaryTimeUnit(dh),s[0],s[1],a)){ph&&(gh=[{value:getFirstTimestampOfUnit(new Date(s[0]),dh,a)},{value:s[1]}]);for(var yh=0;yh<gh.length-1;yh++){var xh=gh[yh].value,_h=gh[yh+1].value;if(xh!==_h){var bh=void 0,Dh=void 0,Th=void 0,Ch=!1;switch(dh){case"year":bh=Math.max(1,Math.round(r/ONE_DAY/365)),Dh=fullYearGetterName(a),Th=fullYearSetterName(a);break;case"half-year":case"quarter":case"month":bh=getMonthInterval(r),Dh=monthGetterName(a),Th=monthSetterName(a);break;case"week":case"half-week":case"day":bh=getDateInterval(r),Dh=dateGetterName(a),Th=dateSetterName(a),Ch=!0;break;case"half-day":case"quarter-day":case"hour":bh=getHourInterval(r),Dh=hoursGetterName(a),Th=hoursSetterName(a);break;case"minute":bh=getMinutesAndSecondsInterval(r,!0),Dh=minutesGetterName(a),Th=minutesSetterName(a);break;case"second":bh=getMinutesAndSecondsInterval(r,!1),Dh=secondsGetterName(a),Th=secondsSetterName(a);break;case"millisecond":bh=getMillisecondsInterval(r),Dh=millisecondsGetterName(a),Th=millisecondsSetterName(a);break}p(bh,xh,_h,Dh,Th,Ch,vh),dh==="year"&&fh.length>1&&yh===0&&fh.unshift({value:fh[0].value-bh})}}for(var yh=0;yh<vh.length;yh++)fh.push(vh[yh]);return vh}}for(var _=[],ja=[],Ja=0,ec=0,tc=0;tc<u.length&&c++<o;++tc){var rc=getPrimaryTimeUnit(u[tc]);if(isPrimaryTimeUnit(u[tc])){d(u[tc],_[_.length-1]||[],ja);var nc=u[tc+1]?getPrimaryTimeUnit(u[tc+1]):null;if(rc!==nc){if(ja.length){ec=Ja,ja.sort(function(dh,gh){return dh.value-gh.value});for(var ic=[],uc=0;uc<ja.length;++uc){var eh=ja[uc].value;(uc===0||ja[uc-1].value!==eh)&&(ic.push(ja[uc]),eh>=s[0]&&eh<=s[1]&&Ja++)}var rh=(s[1]-s[0])/r;if(Ja>rh*1.5&&ec>rh/1.5||(_.push(ic),Ja>rh||n===u[tc]))break}ja=[]}}}for(var ah=filter(map$1(_,function(dh){return filter(dh,function(gh){return gh.value>=s[0]&&gh.value<=s[1]&&!gh.notAdd})}),function(dh){return dh.length>0}),ih=[],oh=ah.length-1,tc=0;tc<ah.length;++tc)for(var uh=ah[tc],ch=0;ch<uh.length;++ch)ih.push({value:uh[ch].value,level:oh-tc});ih.sort(function(dh,gh){return dh.value-gh.value});for(var hh=[],tc=0;tc<ih.length;++tc)(tc===0||ih[tc].value!==ih[tc-1].value)&&hh.push(ih[tc]);return hh}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type="log",a.base=10,a._originalScale=new IntervalScale,a._interval=0,a}return r.prototype.getTicks=function(a){var s=this._originalScale,o=this._extent,u=s.getExtent(),c=intervalScaleProto.getTicks.call(this,a);return map$1(c,function(p){var d=p.value,_=round$3(mathPow$1(this.base,d));return _=d===o[0]&&this._fixMin?fixRoundingError(_,u[0]):_,_=d===o[1]&&this._fixMax?fixRoundingError(_,u[1]):_,{value:_}},this)},r.prototype.setExtent=function(a,s){var o=mathLog$1(this.base);a=mathLog$1(Math.max(0,a))/o,s=mathLog$1(Math.max(0,s))/o,intervalScaleProto.setExtent.call(this,a,s)},r.prototype.getExtent=function(){var a=this.base,s=scaleProto.getExtent.call(this);s[0]=mathPow$1(a,s[0]),s[1]=mathPow$1(a,s[1]);var o=this._originalScale,u=o.getExtent();return this._fixMin&&(s[0]=fixRoundingError(s[0],u[0])),this._fixMax&&(s[1]=fixRoundingError(s[1],u[1])),s},r.prototype.unionExtent=function(a){this._originalScale.unionExtent(a);var s=this.base;a[0]=mathLog$1(a[0])/mathLog$1(s),a[1]=mathLog$1(a[1])/mathLog$1(s),scaleProto.unionExtent.call(this,a)},r.prototype.unionExtentFromData=function(a,s){this.unionExtent(a.getApproximateExtent(s))},r.prototype.calcNiceTicks=function(a){a=a||10;var s=this._extent,o=s[1]-s[0];if(!(o===1/0||o<=0)){var u=quantity(o),c=a/o*u;for(c<=.5&&(u*=10);!isNaN(u)&&Math.abs(u)<1&&Math.abs(u)>0;)u*=10;var p=[round$3(mathCeil$1(s[0]/u)*u),round$3(mathFloor$1(s[1]/u)*u)];this._interval=u,this._niceExtent=p}},r.prototype.calcNiceExtent=function(a){intervalScaleProto.calcNiceExtent.call(this,a),this._fixMin=a.fixMin,this._fixMax=a.fixMax},r.prototype.parse=function(a){return a},r.prototype.contain=function(a){return a=mathLog$1(a)/mathLog$1(this.base),contain$1(a,this._extent)},r.prototype.normalize=function(a){return a=mathLog$1(a)/mathLog$1(this.base),normalize$4(a,this._extent)},r.prototype.scale=function(a){return a=scale(a,this._extent),mathPow$1(this.base,a)},r.type="log",r}(Scale),proto$5=LogScale.prototype;proto$5.getMinorTicks=intervalScaleProto.getMinorTicks;proto$5.getLabel=intervalScaleProto.getLabel;function fixRoundingError(n,r){return roundingErrorFix(n,getPrecision(r))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function n(r,a,s){this._prepareParams(r,a,s)}return n.prototype._prepareParams=function(r,a,s){s[1]<s[0]&&(s=[NaN,NaN]),this._dataMin=s[0],this._dataMax=s[1];var o=this._isOrdinal=r.type==="ordinal";this._needCrossZero=r.type==="interval"&&a.getNeedCrossZero&&a.getNeedCrossZero();var u=this._modelMinRaw=a.get("min",!0);isFunction(u)?this._modelMinNum=parseAxisModelMinMax(r,u({min:s[0],max:s[1]})):u!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(r,u));var c=this._modelMaxRaw=a.get("max",!0);if(isFunction(c)?this._modelMaxNum=parseAxisModelMinMax(r,c({min:s[0],max:s[1]})):c!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(r,c)),o)this._axisDataLen=a.getCategories().length;else{var p=a.get("boundaryGap"),d=isArray$1(p)?p:[p||0,p||0];typeof d[0]=="boolean"||typeof d[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(d[0],1),parsePercent$1(d[1],1)]}},n.prototype.calculate=function(){var r=this._isOrdinal,a=this._dataMin,s=this._dataMax,o=this._axisDataLen,u=this._boundaryGapInner,c=r?null:s-a||Math.abs(a),p=this._modelMinRaw==="dataMin"?a:this._modelMinNum,d=this._modelMaxRaw==="dataMax"?s:this._modelMaxNum,_=p!=null,ja=d!=null;p==null&&(p=r?o?0:NaN:a-u[0]*c),d==null&&(d=r?o?o-1:NaN:s+u[1]*c),(p==null||!isFinite(p))&&(p=NaN),(d==null||!isFinite(d))&&(d=NaN);var Ja=eqNaN(p)||eqNaN(d)||r&&!o;this._needCrossZero&&(p>0&&d>0&&!_&&(p=0),p<0&&d<0&&!ja&&(d=0));var ec=this._determinedMin,tc=this._determinedMax;return ec!=null&&(p=ec,_=!0),tc!=null&&(d=tc,ja=!0),{min:p,max:d,minFixed:_,maxFixed:ja,isBlank:Ja}},n.prototype.modifyDataMinMax=function(r,a){this[DATA_MIN_MAX_ATTR[r]]=a},n.prototype.setDeterminedMinMax=function(r,a){var s=DETERMINED_MIN_MAX_ATTR[r];this[s]=a},n.prototype.freeze=function(){this.frozen=!0},n}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(n,r,a){var s=n.rawExtentInfo;return s||(s=new ScaleRawExtentInfo(n,r,a),n.rawExtentInfo=s,s)}function parseAxisModelMinMax(n,r){return r==null?null:eqNaN(r)?NaN:n.parse(r)}function getScaleExtent(n,r){var a=n.type,s=ensureScaleRawExtentInfo(n,r,n.getExtent()).calculate();n.setBlank(s.isBlank);var o=s.min,u=s.max,c=r.ecModel;if(c&&a==="time"){var p=prepareLayoutBarSeries("bar",c),d=!1;if(each$f(p,function(Ja){d=d||Ja.getBaseAxis()===r.axis}),d){var _=makeColumnLayout(p),ja=adjustScaleForOverflow(o,u,r,_);o=ja.min,u=ja.max}}return{extent:[o,u],fixMin:s.minFixed,fixMax:s.maxFixed}}function adjustScaleForOverflow(n,r,a,s){var o=a.axis.getExtent(),u=o[1]-o[0],c=retrieveColumnLayout(s,a.axis);if(c===void 0)return{min:n,max:r};var p=1/0;each$f(c,function(tc){p=Math.min(tc.offset,p)});var d=-1/0;each$f(c,function(tc){d=Math.max(tc.offset+tc.width,d)}),p=Math.abs(p),d=Math.abs(d);var _=p+d,ja=r-n,Ja=1-(p+d)/u,ec=ja/Ja-ja;return r+=ec*(d/_),n-=ec*(p/_),{min:n,max:r}}function niceScaleExtent(n,r){var a=r,s=getScaleExtent(n,a),o=s.extent,u=a.get("splitNumber");n instanceof LogScale&&(n.base=a.get("logBase"));var c=n.type,p=a.get("interval"),d=c==="interval"||c==="time";n.setExtent(o[0],o[1]),n.calcNiceExtent({splitNumber:u,fixMin:s.fixMin,fixMax:s.fixMax,minInterval:d?a.get("minInterval"):null,maxInterval:d?a.get("maxInterval"):null}),p!=null&&n.setInterval&&n.setInterval(p)}function createScaleByModel$1(n,r){if(r=r||n.get("type"),r)switch(r){case"category":return new OrdinalScale({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(Scale.getClass(r)||IntervalScale)}}function ifAxisCrossZero(n){var r=n.scale.getExtent(),a=r[0],s=r[1];return!(a>0&&s>0||a<0&&s<0)}function makeLabelFormatter(n){var r=n.getLabelModel().get("formatter"),a=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(s){return function(o,u){return n.scale.getFormattedLabel(o,u,s)}}(r):isString(r)?function(s){return function(o){var u=n.scale.getLabel(o),c=s.replace("{value}",u??"");return c}}(r):isFunction(r)?function(s){return function(o,u){return a!=null&&(u=o.value-a),s(getAxisRawValue(n,o),u,o.level!=null?{level:o.level}:null)}}(r):function(s){return n.scale.getLabel(s)}}function getAxisRawValue(n,r){return n.type==="category"?n.scale.getLabel(r):r.value}function estimateLabelUnionRect(n){var r=n.model,a=n.scale;if(!(!r.get(["axisLabel","show"])||a.isBlank())){var s,o,u=a.getExtent();a instanceof OrdinalScale?o=a.count():(s=a.getTicks(),o=s.length);var c=n.getLabelModel(),p=makeLabelFormatter(n),d,_=1;o>40&&(_=Math.ceil(o/40));for(var ja=0;ja<o;ja+=_){var Ja=s?s[ja]:{value:u[0]+ja},ec=p(Ja,ja),tc=c.getTextRect(ec),rc=rotateTextRect(tc,c.get("rotate")||0);d?d.union(rc):d=rc}return d}}function rotateTextRect(n,r){var a=r*Math.PI/180,s=n.width,o=n.height,u=s*Math.abs(Math.cos(a))+Math.abs(o*Math.sin(a)),c=s*Math.abs(Math.sin(a))+Math.abs(o*Math.cos(a)),p=new BoundingRect(n.x,n.y,u,c);return p}function getOptionCategoryInterval(n){var r=n.get("interval");return r??"auto"}function shouldShowAllLabels(n){return n.type==="category"&&getOptionCategoryInterval(n.getLabelModel())===0}function getDataDimensionsOnAxis(n,r){var a={};return each$f(n.mapDimensionsAll(r),function(s){a[getStackedDimension(n,s)]=!0}),keys(a)}function unionAxisExtentFromData(n,r,a){r&&each$f(getDataDimensionsOnAxis(r,a),function(s){var o=r.getApproximateExtent(s);o[0]<n[0]&&(n[0]=o[0]),o[1]>n[1]&&(n[1]=o[1])})}var AxisModelCommonMixin=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var r=this.option;return!r.scale},n.prototype.getCoordSysModel=function(){},n}();function createList$3(n){return createSeriesData(null,n)}var dataStack={isDimensionStacked:isDimensionStacked$2,enableDataStack,getStackedDimension};function createScale(n,r){var a=r;r instanceof Model||(a=new Model(r));var s=createScaleByModel$1(a);return s.setExtent(n[0],n[1]),niceScaleExtent(s,a),s}function mixinAxisModelCommonMethods(n){mixin(n,AxisModelCommonMixin)}var EPSILON$1=1e-8;function isAroundEqual(n,r){return Math.abs(n-r)<EPSILON$1}function contain(n,r,a){var s=0,o=n[0];if(!o)return!1;for(var u=1;u<n.length;u++){var c=n[u];s+=windingLine(o[0],o[1],c[0],c[1],r,a),o=c}var p=n[0];return(!isAroundEqual(o[0],p[0])||!isAroundEqual(o[1],p[1]))&&(s+=windingLine(o[0],o[1],p[0],p[1],r,a)),s!==0}var TMP_TRANSFORM=[];function transformPoints(n,r){for(var a=0;a<n.length;a++)applyTransform$1(n[a],n[a],r)}function updateBBoxFromPoints(n,r,a,s){for(var o=0;o<n.length;o++){var u=n[o];s&&(u=s.project(u)),u&&isFinite(u[0])&&isFinite(u[1])&&(min$1(r,r,u),max$1(a,a,u))}}function centroid$1(n){for(var r=0,a=0,s=0,o=n.length,u=n[o-1][0],c=n[o-1][1],p=0;p<o;p++){var d=n[p][0],_=n[p][1],ja=u*_-d*c;r+=ja,a+=(u+d)*ja,s+=(c+_)*ja,u=d,c=_}return r?[a/r/3,s/r/3,r]:[n[0][0]||0,n[0][1]||0]}var Region=function(){function n(r){this.name=r}return n.prototype.setCenter=function(r){this._center=r},n.prototype.getCenter=function(){var r=this._center;return r||(r=this._center=this.calcCenter()),r},n}(),GeoJSONPolygonGeometry=function(){function n(r,a){this.type="polygon",this.exterior=r,this.interiors=a}return n}(),GeoJSONLineStringGeometry=function(){function n(r){this.type="linestring",this.points=r}return n}(),GeoJSONRegion=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this,a)||this;return u.type="geoJSON",u.geometries=s,u._center=o&&[o[0],o[1]],u}return r.prototype.calcCenter=function(){for(var a=this.geometries,s,o=0,u=0;u<a.length;u++){var c=a[u],p=c.exterior,d=p&&p.length;d>o&&(s=c,o=d)}if(s)return centroid$1(s.exterior);var _=this.getBoundingRect();return[_.x+_.width/2,_.y+_.height/2]},r.prototype.getBoundingRect=function(a){var s=this._rect;if(s&&!a)return s;var o=[1/0,1/0],u=[-1/0,-1/0],c=this.geometries;return each$f(c,function(p){p.type==="polygon"?updateBBoxFromPoints(p.exterior,o,u,a):each$f(p.points,function(d){updateBBoxFromPoints(d,o,u,a)})}),isFinite(o[0])&&isFinite(o[1])&&isFinite(u[0])&&isFinite(u[1])||(o[0]=o[1]=u[0]=u[1]=0),s=new BoundingRect(o[0],o[1],u[0]-o[0],u[1]-o[1]),a||(this._rect=s),s},r.prototype.contain=function(a){var s=this.getBoundingRect(),o=this.geometries;if(!s.contain(a[0],a[1]))return!1;e:for(var u=0,c=o.length;u<c;u++){var p=o[u];if(p.type==="polygon"){var d=p.exterior,_=p.interiors;if(contain(d,a[0],a[1])){for(var ja=0;ja<(_?_.length:0);ja++)if(contain(_[ja],a[0],a[1]))continue e;return!0}}}return!1},r.prototype.transformTo=function(a,s,o,u){var c=this.getBoundingRect(),p=c.width/c.height;o?u||(u=o/p):o=p*u;for(var d=new BoundingRect(a,s,o,u),_=c.calculateTransform(d),ja=this.geometries,Ja=0;Ja<ja.length;Ja++){var ec=ja[Ja];ec.type==="polygon"?(transformPoints(ec.exterior,_),each$f(ec.interiors,function(tc){transformPoints(tc,_)})):each$f(ec.points,function(tc){transformPoints(tc,_)})}c=this._rect,c.copy(d),this._center=[c.x+c.width/2,c.y+c.height/2]},r.prototype.cloneShallow=function(a){a==null&&(a=this.name);var s=new r(a,this.geometries,this._center);return s._rect=this._rect,s.transformTo=null,s},r}(Region),GeoSVGRegion=function(n){__extends(r,n);function r(a,s){var o=n.call(this,a)||this;return o.type="geoSVG",o._elOnlyForCalculate=s,o}return r.prototype.calcCenter=function(){for(var a=this._elOnlyForCalculate,s=a.getBoundingRect(),o=[s.x+s.width/2,s.y+s.height/2],u=identity$1(TMP_TRANSFORM),c=a;c&&!c.isGeoSVGGraphicRoot;)mul(u,c.getLocalTransform(),u),c=c.parent;return invert(u,u),applyTransform$1(o,o,u),o},r}(Region);function decode(n){if(!n.UTF8Encoding)return n;var r=n,a=r.UTF8Scale;a==null&&(a=1024);var s=r.features;return each$f(s,function(o){var u=o.geometry,c=u.encodeOffsets,p=u.coordinates;if(c)switch(u.type){case"LineString":u.coordinates=decodeRing(p,c,a);break;case"Polygon":decodeRings(p,c,a);break;case"MultiLineString":decodeRings(p,c,a);break;case"MultiPolygon":each$f(p,function(d,_){return decodeRings(d,c[_],a)})}}),r.UTF8Encoding=!1,r}function decodeRings(n,r,a){for(var s=0;s<n.length;s++)n[s]=decodeRing(n[s],r[s],a)}function decodeRing(n,r,a){for(var s=[],o=r[0],u=r[1],c=0;c<n.length;c+=2){var p=n.charCodeAt(c)-64,d=n.charCodeAt(c+1)-64;p=p>>1^-(p&1),d=d>>1^-(d&1),p+=o,d+=u,o=p,u=d,s.push([p/a,d/a])}return s}function parseGeoJSON(n,r){return n=decode(n),map$1(filter(n.features,function(a){return a.geometry&&a.properties&&a.geometry.coordinates.length>0}),function(a){var s=a.properties,o=a.geometry,u=[];switch(o.type){case"Polygon":var c=o.coordinates;u.push(new GeoJSONPolygonGeometry(c[0],c.slice(1)));break;case"MultiPolygon":each$f(o.coordinates,function(d){d[0]&&u.push(new GeoJSONPolygonGeometry(d[0],d.slice(1)))});break;case"LineString":u.push(new GeoJSONLineStringGeometry([o.coordinates]));break;case"MultiLineString":u.push(new GeoJSONLineStringGeometry(o.coordinates))}var p=new GeoJSONRegion(s[r||"name"],u,s.cp);return p.properties=s,p})}var inner$g=makeInner();function createAxisLabels(n){return n.type==="category"?makeCategoryLabels(n):makeRealNumberLabels(n)}function createAxisTicks(n,r){return n.type==="category"?makeCategoryTicks(n,r):{ticks:map$1(n.scale.getTicks(),function(a){return a.value})}}function makeCategoryLabels(n){var r=n.getLabelModel(),a=makeCategoryLabelsActually(n,r);return!r.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}function makeCategoryLabelsActually(n,r){var a=getListCache(n,"labels"),s=getOptionCategoryInterval(r),o=listCacheGet(a,s);if(o)return o;var u,c;return isFunction(s)?u=makeLabelsByCustomizedCategoryInterval(n,s):(c=s==="auto"?makeAutoCategoryInterval(n):s,u=makeLabelsByNumericCategoryInterval(n,c)),listCacheSet(a,s,{labels:u,labelCategoryInterval:c})}function makeCategoryTicks(n,r){var a=getListCache(n,"ticks"),s=getOptionCategoryInterval(r),o=listCacheGet(a,s);if(o)return o;var u,c;if((!r.get("show")||n.scale.isBlank())&&(u=[]),isFunction(s))u=makeLabelsByCustomizedCategoryInterval(n,s,!0);else if(s==="auto"){var p=makeCategoryLabelsActually(n,n.getLabelModel());c=p.labelCategoryInterval,u=map$1(p.labels,function(d){return d.tickValue})}else c=s,u=makeLabelsByNumericCategoryInterval(n,c,!0);return listCacheSet(a,s,{ticks:u,tickCategoryInterval:c})}function makeRealNumberLabels(n){var r=n.scale.getTicks(),a=makeLabelFormatter(n);return{labels:map$1(r,function(s,o){return{level:s.level,formattedLabel:a(s,o),rawLabel:n.scale.getLabel(s),tickValue:s.value}})}}function getListCache(n,r){return inner$g(n)[r]||(inner$g(n)[r]=[])}function listCacheGet(n,r){for(var a=0;a<n.length;a++)if(n[a].key===r)return n[a].value}function listCacheSet(n,r,a){return n.push({key:r,value:a}),a}function makeAutoCategoryInterval(n){var r=inner$g(n).autoInterval;return r??(inner$g(n).autoInterval=n.calculateCategoryInterval())}function calculateCategoryInterval(n){var r=fetchAutoCategoryIntervalCalculationParams(n),a=makeLabelFormatter(n),s=(r.axisRotate-r.labelRotate)/180*Math.PI,o=n.scale,u=o.getExtent(),c=o.count();if(u[1]-u[0]<1)return 0;var p=1;c>40&&(p=Math.max(1,Math.floor(c/40)));for(var d=u[0],_=n.dataToCoord(d+1)-n.dataToCoord(d),ja=Math.abs(_*Math.cos(s)),Ja=Math.abs(_*Math.sin(s)),ec=0,tc=0;d<=u[1];d+=p){var rc=0,nc=0,ic=getBoundingRect(a({value:d}),r.font,"center","top");rc=ic.width*1.3,nc=ic.height*1.3,ec=Math.max(ec,rc,7),tc=Math.max(tc,nc,7)}var uc=ec/ja,eh=tc/Ja;isNaN(uc)&&(uc=1/0),isNaN(eh)&&(eh=1/0);var rh=Math.max(0,Math.floor(Math.min(uc,eh))),ah=inner$g(n.model),ih=n.getExtent(),oh=ah.lastAutoInterval,uh=ah.lastTickCount;return oh!=null&&uh!=null&&Math.abs(oh-rh)<=1&&Math.abs(uh-c)<=1&&oh>rh&&ah.axisExtent0===ih[0]&&ah.axisExtent1===ih[1]?rh=oh:(ah.lastTickCount=c,ah.lastAutoInterval=rh,ah.axisExtent0=ih[0],ah.axisExtent1=ih[1]),rh}function fetchAutoCategoryIntervalCalculationParams(n){var r=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:r.get("rotate")||0,font:r.getFont()}}function makeLabelsByNumericCategoryInterval(n,r,a){var s=makeLabelFormatter(n),o=n.scale,u=o.getExtent(),c=n.getLabelModel(),p=[],d=Math.max((r||0)+1,1),_=u[0],ja=o.count();_!==0&&d>1&&ja/d>2&&(_=Math.round(Math.ceil(_/d)*d));var Ja=shouldShowAllLabels(n),ec=c.get("showMinLabel")||Ja,tc=c.get("showMaxLabel")||Ja;ec&&_!==u[0]&&nc(u[0]);for(var rc=_;rc<=u[1];rc+=d)nc(rc);tc&&rc-d!==u[1]&&nc(u[1]);function nc(ic){var uc={value:ic};p.push(a?ic:{formattedLabel:s(uc),rawLabel:o.getLabel(uc),tickValue:ic})}return p}function makeLabelsByCustomizedCategoryInterval(n,r,a){var s=n.scale,o=makeLabelFormatter(n),u=[];return each$f(s.getTicks(),function(c){var p=s.getLabel(c),d=c.value;r(c.value,p)&&u.push(a?d:{formattedLabel:o(c),rawLabel:p,tickValue:d})}),u}var NORMALIZED_EXTENT=[0,1],Axis=function(){function n(r,a,s){this.onBand=!1,this.inverse=!1,this.dim=r,this.scale=a,this._extent=s||[0,0]}return n.prototype.contain=function(r){var a=this._extent,s=Math.min(a[0],a[1]),o=Math.max(a[0],a[1]);return r>=s&&r<=o},n.prototype.containData=function(r){return this.scale.contain(r)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(r){return getPixelPrecision(r||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(r,a){var s=this._extent;s[0]=r,s[1]=a},n.prototype.dataToCoord=function(r,a){var s=this._extent,o=this.scale;return r=o.normalize(r),this.onBand&&o.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,o.count())),linearMap$2(r,NORMALIZED_EXTENT,s,a)},n.prototype.coordToData=function(r,a){var s=this._extent,o=this.scale;this.onBand&&o.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,o.count()));var u=linearMap$2(r,s,NORMALIZED_EXTENT,a);return this.scale.scale(u)},n.prototype.pointToData=function(r,a){},n.prototype.getTicksCoords=function(r){r=r||{};var a=r.tickModel||this.getTickModel(),s=createAxisTicks(this,a),o=s.ticks,u=map$1(o,function(p){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(p):p),tickValue:p}},this),c=a.get("alignWithLabel");return fixOnBandTicksCoords(this,u,c,r.clamp),u},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var r=this.model.getModel("minorTick"),a=r.get("splitNumber");a>0&&a<100||(a=5);var s=this.scale.getMinorTicks(a),o=map$1(s,function(u){return map$1(u,function(c){return{coord:this.dataToCoord(c),tickValue:c}},this)},this);return o},n.prototype.getViewLabels=function(){return createAxisLabels(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var r=this._extent,a=this.scale.getExtent(),s=a[1]-a[0]+(this.onBand?1:0);s===0&&(s=1);var o=Math.abs(r[1]-r[0]);return Math.abs(o)/s},n.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},n}();function fixExtentWithBands(n,r){var a=n[1]-n[0],s=r,o=a/s/2;n[0]+=o,n[1]-=o}function fixOnBandTicksCoords(n,r,a,s){var o=r.length;if(!n.onBand||a||!o)return;var u=n.getExtent(),c,p;if(o===1)r[0].coord=u[0],c=r[1]={coord:u[1]};else{var d=r[o-1].tickValue-r[0].tickValue,_=(r[o-1].coord-r[0].coord)/d;each$f(r,function(tc){tc.coord-=_/2});var ja=n.scale.getExtent();p=1+ja[1]-r[o-1].tickValue,c={coord:r[o-1].coord+_*p},r.push(c)}var Ja=u[0]>u[1];ec(r[0].coord,u[0])&&(s?r[0].coord=u[0]:r.shift()),s&&ec(u[0],r[0].coord)&&r.unshift({coord:u[0]}),ec(u[1],c.coord)&&(s?c.coord=u[1]:r.pop()),s&&ec(c.coord,u[1])&&r.push({coord:u[1]});function ec(tc,rc){return tc=round$3(tc),rc=round$3(rc),Ja?tc>rc:tc<rc}}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(n,r,a,s,o){var u=a.width,c=a.height;switch(n){case"top":s.set(a.x+u/2,a.y-r),o.set(0,-1);break;case"bottom":s.set(a.x+u/2,a.y+c+r),o.set(0,1);break;case"left":s.set(a.x-r,a.y+c/2),o.set(-1,0);break;case"right":s.set(a.x+u+r,a.y+c/2),o.set(1,0);break}}function projectPointToArc(n,r,a,s,o,u,c,p,d){c-=n,p-=r;var _=Math.sqrt(c*c+p*p);c/=_,p/=_;var ja=c*a+n,Ja=p*a+r;if(Math.abs(s-o)%PI2$2<1e-4)return d[0]=ja,d[1]=Ja,_-a;if(u){var ec=s;s=normalizeRadian(o),o=normalizeRadian(ec)}else s=normalizeRadian(s),o=normalizeRadian(o);s>o&&(o+=PI2$2);var tc=Math.atan2(p,c);if(tc<0&&(tc+=PI2$2),tc>=s&&tc<=o||tc+PI2$2>=s&&tc+PI2$2<=o)return d[0]=ja,d[1]=Ja,_-a;var rc=a*Math.cos(s)+n,nc=a*Math.sin(s)+r,ic=a*Math.cos(o)+n,uc=a*Math.sin(o)+r,eh=(rc-c)*(rc-c)+(nc-p)*(nc-p),rh=(ic-c)*(ic-c)+(uc-p)*(uc-p);return eh<rh?(d[0]=rc,d[1]=nc,Math.sqrt(eh)):(d[0]=ic,d[1]=uc,Math.sqrt(rh))}function projectPointToLine(n,r,a,s,o,u,c,p){var d=o-n,_=u-r,ja=a-n,Ja=s-r,ec=Math.sqrt(ja*ja+Ja*Ja);ja/=ec,Ja/=ec;var tc=d*ja+_*Ja,rc=tc/ec;p&&(rc=Math.min(Math.max(rc,0),1)),rc*=ec;var nc=c[0]=n+rc*ja,ic=c[1]=r+rc*Ja;return Math.sqrt((nc-o)*(nc-o)+(ic-u)*(ic-u))}function projectPointToRect(n,r,a,s,o,u,c){a<0&&(n=n+a,a=-a),s<0&&(r=r+s,s=-s);var p=n+a,d=r+s,_=c[0]=Math.min(Math.max(o,n),p),ja=c[1]=Math.min(Math.max(u,r),d);return Math.sqrt((_-o)*(_-o)+(ja-u)*(ja-u))}var tmpPt=[];function nearestPointOnRect(n,r,a){var s=projectPointToRect(r.x,r.y,r.width,r.height,n.x,n.y,tmpPt);return a.set(tmpPt[0],tmpPt[1]),s}function nearestPointOnPath(n,r,a){for(var s=0,o=0,u=0,c=0,p,d,_=1/0,ja=r.data,Ja=n.x,ec=n.y,tc=0;tc<ja.length;){var rc=ja[tc++];tc===1&&(s=ja[tc],o=ja[tc+1],u=s,c=o);var nc=_;switch(rc){case CMD$1.M:u=ja[tc++],c=ja[tc++],s=u,o=c;break;case CMD$1.L:nc=projectPointToLine(s,o,ja[tc],ja[tc+1],Ja,ec,tmpPt,!0),s=ja[tc++],o=ja[tc++];break;case CMD$1.C:nc=cubicProjectPoint(s,o,ja[tc++],ja[tc++],ja[tc++],ja[tc++],ja[tc],ja[tc+1],Ja,ec,tmpPt),s=ja[tc++],o=ja[tc++];break;case CMD$1.Q:nc=quadraticProjectPoint(s,o,ja[tc++],ja[tc++],ja[tc],ja[tc+1],Ja,ec,tmpPt),s=ja[tc++],o=ja[tc++];break;case CMD$1.A:var ic=ja[tc++],uc=ja[tc++],eh=ja[tc++],rh=ja[tc++],ah=ja[tc++],ih=ja[tc++];tc+=1;var oh=!!(1-ja[tc++]);p=Math.cos(ah)*eh+ic,d=Math.sin(ah)*rh+uc,tc<=1&&(u=p,c=d);var uh=(Ja-ic)*rh/eh+ic;nc=projectPointToArc(ic,uc,rh,ah,ah+ih,oh,uh,ec,tmpPt),s=Math.cos(ah+ih)*eh+ic,o=Math.sin(ah+ih)*rh+uc;break;case CMD$1.R:u=s=ja[tc++],c=o=ja[tc++];var ch=ja[tc++],hh=ja[tc++];nc=projectPointToRect(u,c,ch,hh,Ja,ec,tmpPt);break;case CMD$1.Z:nc=projectPointToLine(s,o,u,c,Ja,ec,tmpPt,!0),s=u,o=c;break}nc<_&&(_=nc,a.set(tmpPt[0],tmpPt[1]))}return _}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(n,r){if(n){var a=n.getTextGuideLine(),s=n.getTextContent();if(s&&a){var o=n.textGuideLineConfig||{},u=[[0,0],[0,0],[0,0]],c=o.candidates||DEFAULT_SEARCH_SPACE,p=s.getBoundingRect().clone();p.applyTransform(s.getComputedTransform());var d=1/0,_=o.anchor,ja=n.getComputedTransform(),Ja=ja&&invert([],ja),ec=r.get("length2")||0;_&&pt2.copy(_);for(var tc=0;tc<c.length;tc++){var rc=c[tc];getCandidateAnchor(rc,0,p,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,ec),pt1.transform(Ja);var nc=n.getBoundingRect(),ic=_?_.distance(pt1):n instanceof Path?nearestPointOnPath(pt1,n.path,pt2):nearestPointOnRect(pt1,nc,pt2);ic<d&&(d=ic,pt1.transform(ja),pt2.transform(ja),pt2.toArray(u[0]),pt1.toArray(u[1]),pt0.toArray(u[2]))}limitTurnAngle(u,r.get("minTurnAngle")),a.setShape({points:u})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(n,r){if(r<=180&&r>0){r=r/180*Math.PI,pt0.fromArray(n[0]),pt1.fromArray(n[1]),pt2.fromArray(n[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var a=dir.len(),s=dir2.len();if(!(a<.001||s<.001)){dir.scale(1/a),dir2.scale(1/s);var o=dir.dot(dir2),u=Math.cos(r);if(u<o){var c=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,c/Math.tan(Math.PI-r));var p=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(p))return;p<0?Point.copy(tmpProjPoint,pt1):p>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(n[1])}}}}function limitSurfaceAngle(n,r,a){if(a<=180&&a>0){a=a/180*Math.PI,pt0.fromArray(n[0]),pt1.fromArray(n[1]),pt2.fromArray(n[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var s=dir.len(),o=dir2.len();if(!(s<.001||o<.001)){dir.scale(1/s),dir2.scale(1/o);var u=dir.dot(r),c=Math.cos(a);if(u<c){var p=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var d=Math.PI/2,_=Math.acos(dir2.dot(r)),ja=d+_-a;if(ja>=d)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,p/Math.tan(Math.PI/2-ja));var Ja=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(Ja))return;Ja<0?Point.copy(tmpProjPoint,pt1):Ja>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(n[1])}}}}function setLabelLineState(n,r,a,s){var o=a==="normal",u=o?n:n.ensureState(a);u.ignore=r;var c=s.get("smooth");c&&c===!0&&(c=.3),u.shape=u.shape||{},c>0&&(u.shape.smooth=c);var p=s.getModel("lineStyle").getLineStyle();o?n.useStyle(p):u.style=p}function buildLabelLinePath(n,r){var a=r.smooth,s=r.points;if(s)if(n.moveTo(s[0][0],s[0][1]),a>0&&s.length>=3){var o=dist$3(s[0],s[1]),u=dist$3(s[1],s[2]);if(!o||!u){n.lineTo(s[1][0],s[1][1]),n.lineTo(s[2][0],s[2][1]);return}var c=Math.min(o,u)*a,p=lerp$2([],s[1],s[0],c/o),d=lerp$2([],s[1],s[2],c/u),_=lerp$2([],p,d,.5);n.bezierCurveTo(p[0],p[1],p[0],p[1],_[0],_[1]),n.bezierCurveTo(d[0],d[1],d[0],d[1],s[2][0],s[2][1])}else for(var ja=1;ja<s.length;ja++)n.lineTo(s[ja][0],s[ja][1])}function setLabelLineStyle(n,r,a){var s=n.getTextGuideLine(),o=n.getTextContent();if(!o){s&&n.removeTextGuideLine();return}for(var u=r.normal,c=u.get("show"),p=o.ignore,d=0;d<DISPLAY_STATES.length;d++){var _=DISPLAY_STATES[d],ja=r[_],Ja=_==="normal";if(ja){var ec=ja.get("show"),tc=Ja?p:retrieve2(o.states[_]&&o.states[_].ignore,p);if(tc||!retrieve2(ec,c)){var rc=Ja?s:s&&s.states[_];rc&&(rc.ignore=!0),s&&setLabelLineState(s,!0,_,ja);continue}s||(s=new Polyline$1,n.setTextGuideLine(s),!Ja&&(p||!c)&&setLabelLineState(s,!0,"normal",r.normal),n.stateProxy&&(s.stateProxy=n.stateProxy)),setLabelLineState(s,!1,_,ja)}}if(s){defaults(s.style,a),s.style.fill=null;var nc=u.get("showAbove"),ic=n.textGuideLineConfig=n.textGuideLineConfig||{};ic.showAbove=nc||!1,s.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(n,r){r=r||"labelLine";for(var a={normal:n.getModel(r)},s=0;s<SPECIAL_STATES.length;s++){var o=SPECIAL_STATES[s];a[o]=n.getModel([o,r])}return a}function prepareLayoutList(n){for(var r=[],a=0;a<n.length;a++){var s=n[a];if(!s.defaultAttr.ignore){var o=s.label,u=o.getComputedTransform(),c=o.getBoundingRect(),p=!u||u[1]<1e-5&&u[2]<1e-5,d=o.style.margin||0,_=c.clone();_.applyTransform(u),_.x-=d/2,_.y-=d/2,_.width+=d,_.height+=d;var ja=p?new OrientedBoundingRect$1(c,u):null;r.push({label:o,labelLine:s.labelLine,rect:_,localRect:c,obb:ja,priority:s.priority,defaultAttr:s.defaultAttr,layoutOption:s.computedLayoutOption,axisAligned:p,transform:u})}}return r}function shiftLayout(n,r,a,s,o,u){var c=n.length;if(c<2)return;n.sort(function(ch,hh){return ch.rect[r]-hh.rect[r]});for(var p=0,d,_=!1,ja=0,Ja=0;Ja<c;Ja++){var ec=n[Ja],tc=ec.rect;d=tc[r]-p,d<0&&(tc[r]-=d,ec.label[r]-=d,_=!0);var rc=Math.max(-d,0);ja+=rc,p=tc[r]+tc[a]}ja>0&&u&&ih(-ja/c,0,c);var nc=n[0],ic=n[c-1],uc,eh;rh(),uc<0&&oh(-uc,.8),eh<0&&oh(eh,.8),rh(),ah(uc,eh,1),ah(eh,uc,-1),rh(),uc<0&&uh(-uc),eh<0&&uh(eh);function rh(){uc=nc.rect[r]-s,eh=o-ic.rect[r]-ic.rect[a]}function ah(ch,hh,dh){if(ch<0){var gh=Math.min(hh,-ch);if(gh>0){ih(gh*dh,0,c);var fh=gh+ch;fh<0&&oh(-fh*dh,1)}else oh(-ch*dh,1)}}function ih(ch,hh,dh){ch!==0&&(_=!0);for(var gh=hh;gh<dh;gh++){var fh=n[gh],vh=fh.rect;vh[r]+=ch,fh.label[r]+=ch}}function oh(ch,hh){for(var dh=[],gh=0,fh=1;fh<c;fh++){var vh=n[fh-1].rect,ph=Math.max(n[fh].rect[r]-vh[r]-vh[a],0);dh.push(ph),gh+=ph}if(gh){var yh=Math.min(Math.abs(ch)/gh,hh);if(ch>0)for(var fh=0;fh<c-1;fh++){var xh=dh[fh]*yh;ih(xh,0,fh+1)}else for(var fh=c-1;fh>0;fh--){var xh=dh[fh-1]*yh;ih(-xh,fh,c)}}}function uh(ch){var hh=ch<0?-1:1;ch=Math.abs(ch);for(var dh=Math.ceil(ch/(c-1)),gh=0;gh<c-1;gh++)if(hh>0?ih(dh,0,gh+1):ih(-dh,c-gh-1,c),ch-=dh,ch<=0)return}return _}function shiftLayoutOnX(n,r,a,s){return shiftLayout(n,"x","width",r,a,s)}function shiftLayoutOnY(n,r,a,s){return shiftLayout(n,"y","height",r,a,s)}function hideOverlap(n){var r=[];n.sort(function(nc,ic){return ic.priority-nc.priority});var a=new BoundingRect(0,0,0,0);function s(nc){if(!nc.ignore){var ic=nc.ensureState("emphasis");ic.ignore==null&&(ic.ignore=!1)}nc.ignore=!0}for(var o=0;o<n.length;o++){var u=n[o],c=u.axisAligned,p=u.localRect,d=u.transform,_=u.label,ja=u.labelLine;a.copy(u.rect),a.width-=.1,a.height-=.1,a.x+=.05,a.y+=.05;for(var Ja=u.obb,ec=!1,tc=0;tc<r.length;tc++){var rc=r[tc];if(a.intersect(rc.rect)){if(c&&rc.axisAligned){ec=!0;break}if(rc.obb||(rc.obb=new OrientedBoundingRect$1(rc.localRect,rc.transform)),Ja||(Ja=new OrientedBoundingRect$1(p,d)),Ja.intersect(rc.obb)){ec=!0;break}}}ec?(s(_),ja&&s(ja)):(_.attr("ignore",u.defaultAttr.ignore),ja&&ja.attr("ignore",u.defaultAttr.labelGuideIgnore),r.push(u))}}function cloneArr(n){if(n){for(var r=[],a=0;a<n.length;a++)r.push(n[a].slice());return r}}function prepareLayoutCallbackParams(n,r){var a=n.label,s=r&&r.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:cloneArr(s&&s.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(n,r,a){for(var s=0;s<a.length;s++){var o=a[s];r[o]!=null&&(n[o]=r[o])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(r,a,s,o,u){var c=o.style,p=o.__hostTarget,d=p.textConfig||{},_=o.getComputedTransform(),ja=o.getBoundingRect().plain();BoundingRect.applyTransform(ja,ja,_),_?dummyTransformable.setLocalTransform(_):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var Ja=o.__hostTarget,ec;if(Ja){ec=Ja.getBoundingRect().plain();var tc=Ja.getComputedTransform();BoundingRect.applyTransform(ec,ec,tc)}var rc=ec&&Ja.getTextGuideLine();this._labelList.push({label:o,labelLine:rc,seriesModel:s,dataIndex:r,dataType:a,layoutOption:u,computedLayoutOption:null,rect:ja,hostRect:ec,priority:ec?ec.width*ec.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:rc&&rc.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:c.x,y:c.y,align:c.align,verticalAlign:c.verticalAlign,width:c.width,height:c.height,fontSize:c.fontSize},cursor:o.cursor,attachedPos:d.position,attachedRot:d.rotation}})},n.prototype.addLabelsOfSeries=function(r){var a=this;this._chartViewList.push(r);var s=r.__model,o=s.get("labelLayout");(isFunction(o)||keys(o).length)&&r.group.traverse(function(u){if(u.ignore)return!0;var c=u.getTextContent(),p=getECData(u);c&&!c.disableLabelLayout&&a._addLabel(p.dataIndex,p.dataType,s,c,o)})},n.prototype.updateLayoutConfig=function(r){var a=r.getWidth(),s=r.getHeight();function o(rh,ah){return function(){updateLabelLinePoints(rh,ah)}}for(var u=0;u<this._labelList.length;u++){var c=this._labelList[u],p=c.label,d=p.__hostTarget,_=c.defaultAttr,ja=void 0;isFunction(c.layoutOption)?ja=c.layoutOption(prepareLayoutCallbackParams(c,d)):ja=c.layoutOption,ja=ja||{},c.computedLayoutOption=ja;var Ja=Math.PI/180;d&&d.setTextConfig({local:!1,position:ja.x!=null||ja.y!=null?null:_.attachedPos,rotation:ja.rotate!=null?ja.rotate*Ja:_.attachedRot,offset:[ja.dx||0,ja.dy||0]});var ec=!1;if(ja.x!=null?(p.x=parsePercent(ja.x,a),p.setStyle("x",0),ec=!0):(p.x=_.x,p.setStyle("x",_.style.x)),ja.y!=null?(p.y=parsePercent(ja.y,s),p.setStyle("y",0),ec=!0):(p.y=_.y,p.setStyle("y",_.style.y)),ja.labelLinePoints){var tc=d.getTextGuideLine();tc&&(tc.setShape({points:ja.labelLinePoints}),ec=!1)}var rc=labelLayoutInnerStore(p);rc.needsUpdateLabelLine=ec,p.rotation=ja.rotate!=null?ja.rotate*Ja:_.rotation,p.scaleX=_.scaleX,p.scaleY=_.scaleY;for(var nc=0;nc<LABEL_OPTION_TO_STYLE_KEYS.length;nc++){var ic=LABEL_OPTION_TO_STYLE_KEYS[nc];p.setStyle(ic,ja[ic]!=null?ja[ic]:_.style[ic])}if(ja.draggable){if(p.draggable=!0,p.cursor="move",d){var uc=c.seriesModel;if(c.dataIndex!=null){var eh=c.seriesModel.getData(c.dataType);uc=eh.getItemModel(c.dataIndex)}p.on("drag",o(d,uc.getModel("labelLine")))}}else p.off("drag"),p.cursor=_.cursor}},n.prototype.layout=function(r){var a=r.getWidth(),s=r.getHeight(),o=prepareLayoutList(this._labelList),u=filter(o,function(d){return d.layoutOption.moveOverlap==="shiftX"}),c=filter(o,function(d){return d.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(u,0,a),shiftLayoutOnY(c,0,s);var p=filter(o,function(d){return d.layoutOption.hideOverlap});hideOverlap(p)},n.prototype.processLabelsOverall=function(){var r=this;each$f(this._chartViewList,function(a){var s=a.__model,o=a.ignoreLabelLineUpdate,u=s.isAnimationEnabled();a.group.traverse(function(c){if(c.ignore&&!c.forceLabelAnimation)return!0;var p=!o,d=c.getTextContent();!p&&d&&(p=labelLayoutInnerStore(d).needsUpdateLabelLine),p&&r._updateLabelLine(c,s),u&&r._animateLabels(c,s)})})},n.prototype._updateLabelLine=function(r,a){var s=r.getTextContent(),o=getECData(r),u=o.dataIndex;if(s&&u!=null){var c=a.getData(o.dataType),p=c.getItemModel(u),d={},_=c.getItemVisual(u,"style");if(_){var ja=c.getVisual("drawType");d.stroke=_[ja]}var Ja=p.getModel("labelLine");setLabelLineStyle(r,getLabelLineStatesModels(p),d),updateLabelLinePoints(r,Ja)}},n.prototype._animateLabels=function(r,a){var s=r.getTextContent(),o=r.getTextGuideLine();if(s&&(r.forceLabelAnimation||!s.ignore&&!s.invisible&&!r.disableLabelAnimation&&!isElementRemoved(r))){var u=labelLayoutInnerStore(s),c=u.oldLayout,p=getECData(r),d=p.dataIndex,_={x:s.x,y:s.y,rotation:s.rotation},ja=a.getData(p.dataType);if(c){s.attr(c);var ec=r.prevStates;ec&&(indexOf(ec,"select")>=0&&s.attr(u.oldLayoutSelect),indexOf(ec,"emphasis")>=0&&s.attr(u.oldLayoutEmphasis)),updateProps$1(s,_,a,d)}else if(s.attr(_),!labelInner(s).valueAnimation){var Ja=retrieve2(s.style.opacity,1);s.style.opacity=0,initProps(s,{style:{opacity:Ja}},a,d)}if(u.oldLayout=_,s.states.select){var tc=u.oldLayoutSelect={};extendWithKeys(tc,_,LABEL_LAYOUT_PROPS),extendWithKeys(tc,s.states.select,LABEL_LAYOUT_PROPS)}if(s.states.emphasis){var rc=u.oldLayoutEmphasis={};extendWithKeys(rc,_,LABEL_LAYOUT_PROPS),extendWithKeys(rc,s.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(s,d,ja,a,a)}if(o&&!o.ignore&&!o.invisible){var u=labelLineAnimationStore(o),c=u.oldLayout,nc={points:o.shape.points};c?(o.attr({shape:c}),updateProps$1(o,{shape:nc},a)):(o.setShape(nc),o.style.strokePercent=0,initProps(o,{style:{strokePercent:1}},a)),u.oldLayout=nc}},n}(),getLabelManager=makeInner();function installLabelLayout(n){n.registerUpdateLifecycle("series:beforeupdate",function(r,a,s){var o=getLabelManager(a).labelManager;o||(o=getLabelManager(a).labelManager=new LabelManager),o.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(r,a,s){var o=getLabelManager(a).labelManager;s.updatedSeries.forEach(function(u){o.addLabelsOfSeries(a.getViewOfSeriesModel(u))}),o.updateLayoutConfig(a),o.layout(a),o.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$6=Math.PI,PI2$1=Math.PI*2,degree=180/PI$6,SVGPathRebuilder=function(){function n(){}return n.prototype.reset=function(r){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,r||4)},n.prototype.moveTo=function(r,a){this._add("M",r,a)},n.prototype.lineTo=function(r,a){this._add("L",r,a)},n.prototype.bezierCurveTo=function(r,a,s,o,u,c){this._add("C",r,a,s,o,u,c)},n.prototype.quadraticCurveTo=function(r,a,s,o){this._add("Q",r,a,s,o)},n.prototype.arc=function(r,a,s,o,u,c){this.ellipse(r,a,s,s,0,o,u,c)},n.prototype.ellipse=function(r,a,s,o,u,c,p,d){var _=p-c,ja=!d,Ja=Math.abs(_),ec=isAroundZero(Ja-PI2$1)||(ja?_>=PI2$1:-_>=PI2$1),tc=_>0?_%PI2$1:_%PI2$1+PI2$1,rc=!1;ec?rc=!0:isAroundZero(Ja)?rc=!1:rc=tc>=PI$6==!!ja;var nc=r+s*mathCos(c),ic=a+o*mathSin(c);this._start&&this._add("M",nc,ic);var uc=Math.round(u*degree);if(ec){var eh=1/this._p,rh=(ja?1:-1)*(PI2$1-eh);this._add("A",s,o,uc,1,+ja,r+s*mathCos(c+rh),a+o*mathSin(c+rh)),eh>.01&&this._add("A",s,o,uc,0,+ja,nc,ic)}else{var ah=r+s*mathCos(p),ih=a+o*mathSin(p);this._add("A",s,o,uc,+rc,+ja,ah,ih)}},n.prototype.rect=function(r,a,s,o){this._add("M",r,a),this._add("l",s,0),this._add("l",0,o),this._add("l",-s,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(r,a,s,o,u,c,p,d,_){for(var ja=[],Ja=this._p,ec=1;ec<arguments.length;ec++){var tc=arguments[ec];if(isNaN(tc)){this._invalid=!0;return}ja.push(Math.round(tc*Ja)/Ja)}this._d.push(r+ja.join(" ")),this._start=r==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}(),NONE="none",mathRound=Math.round;function pathHasFill(n){var r=n.fill;return r!=null&&r!==NONE}function pathHasStroke(n){var r=n.stroke;return r!=null&&r!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(n){return"stroke-"+n.toLowerCase()});function mapStyleToAttrs(n,r,a,s){var o=r.opacity==null?1:r.opacity;if(a instanceof ZRImage){n("opacity",o);return}if(pathHasFill(r)){var u=normalizeColor(r.fill);n("fill",u.color);var c=r.fillOpacity!=null?r.fillOpacity*u.opacity*o:u.opacity*o;c<1&&n("fill-opacity",c)}else n("fill",NONE);if(pathHasStroke(r)){var p=normalizeColor(r.stroke);n("stroke",p.color);var d=r.strokeNoScale?a.getLineScale():1,_=d?(r.lineWidth||0)/d:0,ja=r.strokeOpacity!=null?r.strokeOpacity*p.opacity*o:p.opacity*o,Ja=r.strokeFirst;if(_!==1&&n("stroke-width",_),Ja&&n("paint-order",Ja?"stroke":"fill"),ja<1&&n("stroke-opacity",ja),r.lineDash){var ec=getLineDash(a),tc=ec[0],rc=ec[1];tc&&(rc=mathRound(rc||0),n("stroke-dasharray",tc.join(",")),(rc||s)&&n("stroke-dashoffset",rc))}for(var nc=0;nc<strokeProps.length;nc++){var ic=strokeProps[nc];if(r[ic]!==DEFAULT_PATH_STYLE[ic]){var uc=r[ic]||DEFAULT_PATH_STYLE[ic];uc&&n(svgStrokeProps[nc],uc)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(n){return document.createElementNS(SVGNS,n)}function createVNode(n,r,a,s,o){return{tag:n,attrs:a||{},children:s,text:o,key:r}}function createElementOpen(n,r){var a=[];if(r)for(var s in r){var o=r[s],u=s;o!==!1&&(o!==!0&&o!=null&&(u+='="'+o+'"'),a.push(u))}return"<"+n+" "+a.join(" ")+">"}function createElementClose(n){return"</"+n+">"}function vNodeToString(n,r){r=r||{};var a=r.newline?`
`:"";function s(o){var u=o.children,c=o.tag,p=o.attrs,d=o.text;return createElementOpen(c,p)+(c!=="style"?encodeHTML(d):d||"")+(u?""+a+map$1(u,function(_){return s(_)}).join(a)+a:"")+createElementClose(c)}return s(n)}function getCssString(n,r,a){a=a||{};var s=a.newline?`
`:"",o=" {"+s,u=s+"}",c=map$1(keys(n),function(d){return d+o+map$1(keys(n[d]),function(_){return _+":"+n[d][_]+";"}).join(s)+u}).join(s),p=map$1(keys(r),function(d){return"@keyframes "+d+o+map$1(keys(r[d]),function(_){return _+o+map$1(keys(r[d][_]),function(ja){var Ja=r[d][_][ja];return ja==="d"&&(Ja='path("'+Ja+'")'),ja+":"+Ja+";"}).join(s)+u}).join(s)+u}).join(s);return!c&&!p?"":["<![CDATA[",c,p,"]]>"].join(s)}function createBrushScope(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(n,r,a,s){return createVNode("svg","root",{width:n,height:r,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:s?"0 0 "+n+" "+r:!1},a)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(n,r,a){var s=extend$2({},n.shape);extend$2(s,r),n.buildPath(a,s);var o=new SVGPathRebuilder;return o.reset(getPathPrecision(n)),a.rebuildPath(o,1),o.generateStr(),o.getStr()}function setTransformOrigin(n,r){var a=r.originX,s=r.originY;(a||s)&&(n[transformOriginKey]=a+"px "+s+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(n,r){var a=r.zrId+"-ani-"+r.cssAnimIdx++;return r.cssAnims[a]=n,a}function createCompoundPathCSSAnimation(n,r,a){var s=n.shape.paths,o={},u,c;if(each$f(s,function(d){var _=createBrushScope(a.zrId);_.animation=!0,createCSSAnimation(d,{},_,!0);var ja=_.cssAnims,Ja=_.cssNodes,ec=keys(ja),tc=ec.length;if(tc){c=ec[tc-1];var rc=ja[c];for(var nc in rc){var ic=rc[nc];o[nc]=o[nc]||{d:""},o[nc].d+=ic.d||""}for(var uc in Ja){var eh=Ja[uc].animation;eh.indexOf(c)>=0&&(u=eh)}}}),!!u){r.d=!1;var p=addAnimation(o,a);return u.replace(c,p)}}function getEasingFunc(n){return isString(n)?EASING_MAP[n]?"cubic-bezier("+EASING_MAP[n]+")":createCubicEasingFunc(n)?n:"":""}function createCSSAnimation(n,r,a,s){var o=n.animators,u=o.length,c=[];if(n instanceof CompoundPath$1){var p=createCompoundPathCSSAnimation(n,r,a);if(p)c.push(p);else if(!u)return}else if(!u)return;for(var d={},_=0;_<u;_++){var ja=o[_],Ja=[ja.getMaxTime()/1e3+"s"],ec=getEasingFunc(ja.getClip().easing),tc=ja.getDelay();ec?Ja.push(ec):Ja.push("linear"),tc&&Ja.push(tc/1e3+"s"),ja.getLoop()&&Ja.push("infinite");var rc=Ja.join(" ");d[rc]=d[rc]||[rc,[]],d[rc][1].push(ja)}function nc(eh){var rh=eh[1],ah=rh.length,ih={},oh={},uh={},ch="animation-timing-function";function hh(Wh,Qh,jh){for(var Hh=Wh.getTracks(),qh=Wh.getMaxTime(),nd=0;nd<Hh.length;nd++){var Sh=Hh[nd];if(Sh.needsAnimate()){var Gh=Sh.keyframes,zh=Sh.propName;if(jh&&(zh=jh(zh)),zh)for(var $h=0;$h<Gh.length;$h++){var Ph=Gh[$h],Vh=Math.round(Ph.time/qh*100)+"%",Xh=getEasingFunc(Ph.easing),Zh=Ph.rawValue;(isString(Zh)||isNumber(Zh))&&(Qh[Vh]=Qh[Vh]||{},Qh[Vh][zh]=Ph.rawValue,Xh&&(Qh[Vh][ch]=Xh))}}}}for(var dh=0;dh<ah;dh++){var gh=rh[dh],fh=gh.targetName;fh?fh==="shape"&&hh(gh,oh):!s&&hh(gh,ih)}for(var vh in ih){var ph={};copyTransform(ph,n),extend$2(ph,ih[vh]);var yh=getSRTTransformString(ph),xh=ih[vh][ch];uh[vh]=yh?{transform:yh}:{},setTransformOrigin(uh[vh],ph),xh&&(uh[vh][ch]=xh)}var _h,bh=!0;for(var vh in oh){uh[vh]=uh[vh]||{};var Dh=!_h,xh=oh[vh][ch];Dh&&(_h=new PathProxy);var Th=_h.len();_h.reset(),uh[vh].d=buildPathString(n,oh[vh],_h);var Ch=_h.len();if(!Dh&&Th!==Ch){bh=!1;break}xh&&(uh[vh][ch]=xh)}if(!bh)for(var vh in uh)delete uh[vh].d;if(!s)for(var dh=0;dh<ah;dh++){var gh=rh[dh],fh=gh.targetName;fh==="style"&&hh(gh,uh,function(Hh){return ANIMATE_STYLE_MAP[Hh]})}for(var wh=keys(uh),Nh=!0,Rh,dh=1;dh<wh.length;dh++){var kh=wh[dh-1],Lh=wh[dh];if(uh[kh][transformOriginKey]!==uh[Lh][transformOriginKey]){Nh=!1;break}Rh=uh[kh][transformOriginKey]}if(Nh&&Rh){for(var vh in uh)uh[vh][transformOriginKey]&&delete uh[vh][transformOriginKey];r[transformOriginKey]=Rh}if(filter(wh,function(Wh){return keys(uh[Wh]).length>0}).length){var Fh=addAnimation(uh,a);return Fh+" "+eh[0]+" both"}}for(var ic in d){var p=nc(d[ic]);p&&c.push(p)}if(c.length){var uc=a.zrId+"-cls-"+getClassId();a.cssNodes["."+uc]={animation:c.join(",")},r.class=uc}}function createCSSEmphasis(n,r,a){if(!n.ignore)if(n.isSilent()){var s={"pointer-events":"none"};setClassAttribute(s,r,a)}else{var o=n.states.emphasis&&n.states.emphasis.style?n.states.emphasis.style:{},u=o.fill;if(!u){var c=n.style&&n.style.fill,p=n.states.select&&n.states.select.style&&n.states.select.style.fill,d=n.currentStates.indexOf("select")>=0&&p||c;d&&(u=liftColor(d))}var _=o.lineWidth;if(_){var ja=!o.strokeNoScale&&n.transform?n.transform[0]:1;_=_/ja}var s={cursor:"pointer"};u&&(s.fill=u),o.stroke&&(s.stroke=o.stroke),_&&(s["stroke-width"]=_),setClassAttribute(s,r,a)}}function setClassAttribute(n,r,a,s){var o=JSON.stringify(n),u=a.cssStyleCache[o];u||(u=a.zrId+"-cls-"+getClassId(),a.cssStyleCache[o]=u,a.cssNodes["."+u+":hover"]=n),r.class=r.class?r.class+" "+u:u}var round$1=Math.round;function isImageLike(n){return n&&isString(n.src)}function isCanvasLike(n){return n&&isFunction(n.toDataURL)}function setStyleAttrs(n,r,a,s){mapStyleToAttrs(function(o,u){var c=o==="fill"||o==="stroke";c&&isGradient(u)?setGradient(r,n,o,s):c&&isPattern(u)?setPattern(a,n,o,s):c&&u==="none"?n[o]="transparent":n[o]=u},r,a,!1),setShadow(a,n,s)}function setMetaData(n,r){var a=getElementSSRData(r);a&&(a.each(function(s,o){s!=null&&(n[(META_DATA_PREFIX+o).toLowerCase()]=s+"")}),r.isSilent()&&(n[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(n){return isAroundZero(n[0]-1)&&isAroundZero(n[1])&&isAroundZero(n[2])&&isAroundZero(n[3]-1)}function noTranslate(n){return isAroundZero(n[4])&&isAroundZero(n[5])}function setTransform(n,r,a){if(r&&!(noTranslate(r)&&noRotateScale(r))){var s=1e4;n.transform=noRotateScale(r)?"translate("+round$1(r[4]*s)/s+" "+round$1(r[5]*s)/s+")":getMatrixStr(r)}}function convertPolyShape(n,r,a){for(var s=n.points,o=[],u=0;u<s.length;u++)o.push(round$1(s[u][0]*a)/a),o.push(round$1(s[u][1]*a)/a);r.points=o.join(" ")}function validatePolyShape(n){return!n.smooth}function createAttrsConvert(n){var r=map$1(n,function(a){return typeof a=="string"?[a,a]:a});return function(a,s,o){for(var u=0;u<r.length;u++){var c=r[u],p=a[c[0]];p!=null&&(s[c[1]]=round$1(p*o)/o)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(n){for(var r=n.animators,a=0;a<r.length;a++)if(r[a].targetName==="shape")return!0;return!1}function brushSVGPath(n,r){var a=n.style,s=n.shape,o=builtinShapesDef[n.type],u={},c=r.animation,p="path",d=n.style.strokePercent,_=r.compress&&getPathPrecision(n)||4;if(o&&!r.willUpdate&&!(o[1]&&!o[1](s))&&!(c&&hasShapeAnimation(n))&&!(d<1)){p=n.type;var ja=Math.pow(10,_);o[0](s,u,ja)}else{var Ja=!n.path||n.shapeChanged();n.path||n.createPathProxy();var ec=n.path;Ja&&(ec.beginPath(),n.buildPath(ec,n.shape),n.pathUpdated());var tc=ec.getVersion(),rc=n,nc=rc.__svgPathBuilder;(rc.__svgPathVersion!==tc||!nc||d!==rc.__svgPathStrokePercent)&&(nc||(nc=rc.__svgPathBuilder=new SVGPathRebuilder),nc.reset(_),ec.rebuildPath(nc,d),nc.generateStr(),rc.__svgPathVersion=tc,rc.__svgPathStrokePercent=d),u.d=nc.getStr()}return setTransform(u,n.transform),setStyleAttrs(u,a,n,r),setMetaData(u,n),r.animation&&createCSSAnimation(n,u,r),r.emphasis&&createCSSEmphasis(n,u,r),createVNode(p,n.id+"",u)}function brushSVGImage(n,r){var a=n.style,s=a.image;if(s&&!isString(s)&&(isImageLike(s)?s=s.src:isCanvasLike(s)&&(s=s.toDataURL())),!!s){var o=a.x||0,u=a.y||0,c=a.width,p=a.height,d={href:s,width:c,height:p};return o&&(d.x=o),u&&(d.y=u),setTransform(d,n.transform),setStyleAttrs(d,a,n,r),setMetaData(d,n),r.animation&&createCSSAnimation(n,d,r),createVNode("image",n.id+"",d)}}function brushSVGTSpan(n,r){var a=n.style,s=a.text;if(s!=null&&(s+=""),!(!s||isNaN(a.x)||isNaN(a.y))){var o=a.font||DEFAULT_FONT,u=a.x||0,c=adjustTextY$1(a.y||0,getLineHeight(o),a.textBaseline),p=TEXT_ALIGN_TO_ANCHOR[a.textAlign]||a.textAlign,d={"dominant-baseline":"central","text-anchor":p};if(hasSeparateFont(a)){var _="",ja=a.fontStyle,Ja=parseFontSize(a.fontSize);if(!parseFloat(Ja))return;var ec=a.fontFamily||DEFAULT_FONT_FAMILY,tc=a.fontWeight;_+="font-size:"+Ja+";font-family:"+ec+";",ja&&ja!=="normal"&&(_+="font-style:"+ja+";"),tc&&tc!=="normal"&&(_+="font-weight:"+tc+";"),d.style=_}else d.style="font: "+o;return s.match(/\s/)&&(d["xml:space"]="preserve"),u&&(d.x=u),c&&(d.y=c),setTransform(d,n.transform),setStyleAttrs(d,a,n,r),setMetaData(d,n),r.animation&&createCSSAnimation(n,d,r),createVNode("text",n.id+"",d,void 0,s)}}function brush(n,r){if(n instanceof Path)return brushSVGPath(n,r);if(n instanceof ZRImage)return brushSVGImage(n,r);if(n instanceof TSpan)return brushSVGTSpan(n,r)}function setShadow(n,r,a){var s=n.style;if(hasShadow(s)){var o=getShadowKey(n),u=a.shadowCache,c=u[o];if(!c){var p=n.getGlobalScale(),d=p[0],_=p[1];if(!d||!_)return;var ja=s.shadowOffsetX||0,Ja=s.shadowOffsetY||0,ec=s.shadowBlur,tc=normalizeColor(s.shadowColor),rc=tc.opacity,nc=tc.color,ic=ec/2/d,uc=ec/2/_,eh=ic+" "+uc;c=a.zrId+"-s"+a.shadowIdx++,a.defs[c]=createVNode("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:ja/d,dy:Ja/_,stdDeviation:eh,"flood-color":nc,"flood-opacity":rc})]),u[o]=c}r.filter=getIdURL(c)}}function setGradient(n,r,a,s){var o=n[a],u,c={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(o))u="linearGradient",c.x1=o.x,c.y1=o.y,c.x2=o.x2,c.y2=o.y2;else if(isRadialGradient(o))u="radialGradient",c.cx=retrieve2(o.x,.5),c.cy=retrieve2(o.y,.5),c.r=retrieve2(o.r,.5);else return;for(var p=o.colorStops,d=[],_=0,ja=p.length;_<ja;++_){var Ja=round4(p[_].offset)*100+"%",ec=p[_].color,tc=normalizeColor(ec),rc=tc.color,nc=tc.opacity,ic={offset:Ja};ic["stop-color"]=rc,nc<1&&(ic["stop-opacity"]=nc),d.push(createVNode("stop",_+"",ic))}var uc=createVNode(u,"",c,d),eh=vNodeToString(uc),rh=s.gradientCache,ah=rh[eh];ah||(ah=s.zrId+"-g"+s.gradientIdx++,rh[eh]=ah,c.id=ah,s.defs[ah]=createVNode(u,ah,c,d)),r[a]=getIdURL(ah)}function setPattern(n,r,a,s){var o=n.style[a],u=n.getBoundingRect(),c={},p=o.repeat,d=p==="no-repeat",_=p==="repeat-x",ja=p==="repeat-y",Ja;if(isImagePattern(o)){var ec=o.imageWidth,tc=o.imageHeight,rc=void 0,nc=o.image;if(isString(nc)?rc=nc:isImageLike(nc)?rc=nc.src:isCanvasLike(nc)&&(rc=nc.toDataURL()),typeof Image>"u"){var ic="Image width/height must been given explictly in svg-ssr renderer.";assert(ec,ic),assert(tc,ic)}else if(ec==null||tc==null){var uc=function(dh,gh){if(dh){var fh=dh.elm,vh=ec||gh.width,ph=tc||gh.height;dh.tag==="pattern"&&(_?(ph=1,vh/=u.width):ja&&(vh=1,ph/=u.height)),dh.attrs.width=vh,dh.attrs.height=ph,fh&&(fh.setAttribute("width",vh),fh.setAttribute("height",ph))}},eh=createOrUpdateImage(rc,null,n,function(dh){d||uc(oh,dh),uc(Ja,dh)});eh&&eh.width&&eh.height&&(ec=ec||eh.width,tc=tc||eh.height)}Ja=createVNode("image","img",{href:rc,width:ec,height:tc}),c.width=ec,c.height=tc}else o.svgElement&&(Ja=clone$4(o.svgElement),c.width=o.svgWidth,c.height=o.svgHeight);if(Ja){var rh,ah;d?rh=ah=1:_?(ah=1,rh=c.width/u.width):ja?(rh=1,ah=c.height/u.height):c.patternUnits="userSpaceOnUse",rh!=null&&!isNaN(rh)&&(c.width=rh),ah!=null&&!isNaN(ah)&&(c.height=ah);var ih=getSRTTransformString(o);ih&&(c.patternTransform=ih);var oh=createVNode("pattern","",c,[Ja]),uh=vNodeToString(oh),ch=s.patternCache,hh=ch[uh];hh||(hh=s.zrId+"-p"+s.patternIdx++,ch[uh]=hh,c.id=hh,oh=s.defs[hh]=createVNode("pattern",hh,c,[Ja])),r[a]=getIdURL(hh)}}function setClipPath(n,r,a){var s=a.clipPathCache,o=a.defs,u=s[n.id];if(!u){u=a.zrId+"-c"+a.clipPathIdx++;var c={id:u};s[n.id]=u,o[u]=createVNode("clipPath",u,c,[brushSVGPath(n,a)])}r["clip-path"]=getIdURL(u)}function createTextNode(n){return document.createTextNode(n)}function insertBefore(n,r,a){n.insertBefore(r,a)}function removeChild(n,r){n.removeChild(r)}function appendChild(n,r){n.appendChild(r)}function parentNode(n){return n.parentNode}function nextSibling(n){return n.nextSibling}function setTextContent(n,r){n.textContent=r}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(n){return n===void 0}function isDef(n){return n!==void 0}function createKeyToOldIdx(n,r,a){for(var s={},o=r;o<=a;++o){var u=n[o].key;u!==void 0&&(s[u]=o)}return s}function sameVnode(n,r){var a=n.key===r.key,s=n.tag===r.tag;return s&&a}function createElm(n){var r,a=n.children,s=n.tag;if(isDef(s)){var o=n.elm=createElement(s);if(updateAttrs$1(emptyNode,n),isArray$1(a))for(r=0;r<a.length;++r){var u=a[r];u!=null&&appendChild(o,createElm(u))}else isDef(n.text)&&!isObject$3(n.text)&&appendChild(o,createTextNode(n.text))}else n.elm=createTextNode(n.text);return n.elm}function addVnodes(n,r,a,s,o){for(;s<=o;++s){var u=a[s];u!=null&&insertBefore(n,createElm(u),r)}}function removeVnodes(n,r,a,s){for(;a<=s;++a){var o=r[a];if(o!=null)if(isDef(o.tag)){var u=parentNode(o.elm);removeChild(u,o.elm)}else removeChild(n,o.elm)}}function updateAttrs$1(n,r){var a,s=r.elm,o=n&&n.attrs||{},u=r.attrs||{};if(o!==u){for(a in u){var c=u[a],p=o[a];p!==c&&(c===!0?s.setAttribute(a,""):c===!1?s.removeAttribute(a):a==="style"?s.style.cssText=c:a.charCodeAt(0)!==xChar?s.setAttribute(a,c):a==="xmlns:xlink"||a==="xmlns"?s.setAttributeNS(XMLNS,a,c):a.charCodeAt(3)===colonChar?s.setAttributeNS(XML_NAMESPACE,a,c):a.charCodeAt(5)===colonChar?s.setAttributeNS(XLINKNS,a,c):s.setAttribute(a,c))}for(a in o)a in u||s.removeAttribute(a)}}function updateChildren(n,r,a){for(var s=0,o=0,u=r.length-1,c=r[0],p=r[u],d=a.length-1,_=a[0],ja=a[d],Ja,ec,tc,rc;s<=u&&o<=d;)c==null?c=r[++s]:p==null?p=r[--u]:_==null?_=a[++o]:ja==null?ja=a[--d]:sameVnode(c,_)?(patchVnode(c,_),c=r[++s],_=a[++o]):sameVnode(p,ja)?(patchVnode(p,ja),p=r[--u],ja=a[--d]):sameVnode(c,ja)?(patchVnode(c,ja),insertBefore(n,c.elm,nextSibling(p.elm)),c=r[++s],ja=a[--d]):sameVnode(p,_)?(patchVnode(p,_),insertBefore(n,p.elm,c.elm),p=r[--u],_=a[++o]):(isUndef(Ja)&&(Ja=createKeyToOldIdx(r,s,u)),ec=Ja[_.key],isUndef(ec)?insertBefore(n,createElm(_),c.elm):(tc=r[ec],tc.tag!==_.tag?insertBefore(n,createElm(_),c.elm):(patchVnode(tc,_),r[ec]=void 0,insertBefore(n,tc.elm,c.elm))),_=a[++o]);(s<=u||o<=d)&&(s>u?(rc=a[d+1]==null?null:a[d+1].elm,addVnodes(n,rc,a,o,d)):removeVnodes(n,r,s,u))}function patchVnode(n,r){var a=r.elm=n.elm,s=n.children,o=r.children;n!==r&&(updateAttrs$1(n,r),isUndef(r.text)?isDef(s)&&isDef(o)?s!==o&&updateChildren(a,s,o):isDef(o)?(isDef(n.text)&&setTextContent(a,""),addVnodes(a,null,o,0,o.length-1)):isDef(s)?removeVnodes(a,s,0,s.length-1):isDef(n.text)&&setTextContent(a,""):n.text!==r.text&&(isDef(s)&&removeVnodes(a,s,0,s.length-1),setTextContent(a,r.text)))}function patch(n,r){if(sameVnode(n,r))patchVnode(n,r);else{var a=n.elm,s=parentNode(a);createElm(r),s!==null&&(insertBefore(s,r.elm,nextSibling(a)),removeVnodes(s,[n],0,0))}return r}var svgId=0,SVGPainter=function(){function n(r,a,s){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=a,this._opts=s=extend$2({},s),this.root=r,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(s.width,s.height),r&&!s.ssr){var o=this._viewport=document.createElement("div");o.style.cssText="position:relative;overflow:hidden";var u=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs$1(null,this._oldVNode),o.appendChild(u),r.appendChild(o)}this.resize(s.width,s.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var r=this.renderToVNode({willUpdate:!0});r.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,r),this._oldVNode=r}},n.prototype.renderOneToVNode=function(r){return brush(r,createBrushScope(this._id))},n.prototype.renderToVNode=function(r){r=r||{};var a=this.storage.getDisplayList(!0),s=this._width,o=this._height,u=createBrushScope(this._id);u.animation=r.animation,u.willUpdate=r.willUpdate,u.compress=r.compress,u.emphasis=r.emphasis;var c=[],p=this._bgVNode=createBackgroundVNode(s,o,this._backgroundColor,u);p&&c.push(p);var d=r.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(a,u,d?d.children:c),d&&c.push(d);var _=map$1(keys(u.defs),function(ec){return u.defs[ec]});if(_.length&&c.push(createVNode("defs","defs",{},_)),r.animation){var ja=getCssString(u.cssNodes,u.cssAnims,{newline:!0});if(ja){var Ja=createVNode("style","stl",{},[],ja);c.push(Ja)}}return createSVGVNode(s,o,c,r.useViewBox)},n.prototype.renderToString=function(r){return r=r||{},vNodeToString(this.renderToVNode({animation:retrieve2(r.cssAnimation,!0),emphasis:retrieve2(r.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(r.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(r){this._backgroundColor=r},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(r,a,s){for(var o=r.length,u=[],c=0,p,d,_=0,ja=0;ja<o;ja++){var Ja=r[ja];if(!Ja.invisible){var ec=Ja.__clipPaths,tc=ec&&ec.length||0,rc=d&&d.length||0,nc=void 0;for(nc=Math.max(tc-1,rc-1);nc>=0&&!(ec&&d&&ec[nc]===d[nc]);nc--);for(var ic=rc-1;ic>nc;ic--)c--,p=u[c-1];for(var uc=nc+1;uc<tc;uc++){var eh={};setClipPath(ec[uc],eh,a);var rh=createVNode("g","clip-g-"+_++,eh,[]);(p?p.children:s).push(rh),u[c++]=rh,p=rh}d=ec;var ah=brush(Ja,a);ah&&(p?p.children:s).push(ah)}}},n.prototype.resize=function(r,a){var s=this._opts,o=this.root,u=this._viewport;if(r!=null&&(s.width=r),a!=null&&(s.height=a),o&&u&&(u.style.display="none",r=getSize$1(o,0,s),a=getSize$1(o,1,s),u.style.display=""),this._width!==r||this._height!==a){if(this._width=r,this._height=a,u){var c=u.style;c.width=r+"px",c.height=a+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var p=this._svgDom;p&&(p.setAttribute("width",r),p.setAttribute("height",a));var d=this._bgVNode&&this._bgVNode.elm;d&&(d.setAttribute("width",r),d.setAttribute("height",a))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(r){var a=this.renderToString(),s="data:image/svg+xml;";return r?(a=encodeBase64(a),a&&s+"base64,"+a):s+"charset=UTF-8,"+encodeURIComponent(a)},n}();function createMethodNotSupport(n){return function(){}}function createBackgroundVNode(n,r,a,s){var o;if(a&&a!=="none")if(o=createVNode("rect","bg",{width:n,height:r,x:"0",y:"0"}),isGradient(a))setGradient({fill:a},o.attrs,"fill",s);else if(isPattern(a))setPattern({style:{fill:a},dirty:noop$1,getBoundingRect:function(){return{width:n,height:r}}},o.attrs,"fill",s);else{var u=normalizeColor(a),c=u.color,p=u.opacity;o.attrs.fill=c,p<1&&(o.attrs["fill-opacity"]=p)}return o}function install$16(n){n.registerPainter("svg",SVGPainter)}function createDom(n,r,a){var s=platformApi.createCanvas(),o=r.getWidth(),u=r.getHeight(),c=s.style;return c&&(c.position="absolute",c.left="0",c.top="0",c.width=o+"px",c.height=u+"px",s.setAttribute("data-zr-dom-id",n)),s.width=o*a,s.height=u*a,s}var Layer=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this)||this;u.motionBlur=!1,u.lastFrameAlpha=.7,u.dpr=1,u.virtual=!1,u.config={},u.incremental=!1,u.zlevel=0,u.maxRepaintRectCount=5,u.__dirty=!0,u.__firstTimePaint=!0,u.__used=!1,u.__drawIndex=0,u.__startIndex=0,u.__endIndex=0,u.__prevStartIndex=null,u.__prevEndIndex=null;var c;o=o||devicePixelRatio,typeof a=="string"?c=createDom(a,s,o):isObject$3(a)&&(c=a,a=c.id),u.id=a,u.dom=c;var p=c.style;return p&&(disableUserSelect(c),c.onselectstart=function(){return!1},p.padding="0",p.margin="0",p.borderWidth="0"),u.painter=s,u.dpr=o,u}return r.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},r.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},r.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},r.prototype.setUnpainted=function(){this.__firstTimePaint=!0},r.prototype.createBackBuffer=function(){var a=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,a),this.ctxBack=this.domBack.getContext("2d"),a!==1&&this.ctxBack.scale(a,a)},r.prototype.createRepaintRects=function(a,s,o,u){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var c=[],p=this.maxRepaintRectCount,d=!1,_=new BoundingRect(0,0,0,0);function ja(eh){if(!(!eh.isFinite()||eh.isZero()))if(c.length===0){var rh=new BoundingRect(0,0,0,0);rh.copy(eh),c.push(rh)}else{for(var ah=!1,ih=1/0,oh=0,uh=0;uh<c.length;++uh){var ch=c[uh];if(ch.intersect(eh)){var hh=new BoundingRect(0,0,0,0);hh.copy(ch),hh.union(eh),c[uh]=hh,ah=!0;break}else if(d){_.copy(eh),_.union(ch);var dh=eh.width*eh.height,gh=ch.width*ch.height,fh=_.width*_.height,vh=fh-dh-gh;vh<ih&&(ih=vh,oh=uh)}}if(d&&(c[oh].union(eh),ah=!0),!ah){var rh=new BoundingRect(0,0,0,0);rh.copy(eh),c.push(rh)}d||(d=c.length>=p)}}for(var Ja=this.__startIndex;Ja<this.__endIndex;++Ja){var ec=a[Ja];if(ec){var tc=ec.shouldBePainted(o,u,!0,!0),rc=ec.__isRendered&&(ec.__dirty&REDRAW_BIT||!tc)?ec.getPrevPaintRect():null;rc&&ja(rc);var nc=tc&&(ec.__dirty&REDRAW_BIT||!ec.__isRendered)?ec.getPaintRect():null;nc&&ja(nc)}}for(var Ja=this.__prevStartIndex;Ja<this.__prevEndIndex;++Ja){var ec=s[Ja],tc=ec&&ec.shouldBePainted(o,u,!0,!0);if(ec&&(!tc||!ec.__zr)&&ec.__isRendered){var rc=ec.getPrevPaintRect();rc&&ja(rc)}}var ic;do{ic=!1;for(var Ja=0;Ja<c.length;){if(c[Ja].isZero()){c.splice(Ja,1);continue}for(var uc=Ja+1;uc<c.length;)c[Ja].intersect(c[uc])?(ic=!0,c[Ja].union(c[uc]),c.splice(uc,1)):uc++;Ja++}}while(ic);return this._paintRects=c,c},r.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},r.prototype.resize=function(a,s){var o=this.dpr,u=this.dom,c=u.style,p=this.domBack;c&&(c.width=a+"px",c.height=s+"px"),u.width=a*o,u.height=s*o,p&&(p.width=a*o,p.height=s*o,o!==1&&this.ctxBack.scale(o,o))},r.prototype.clear=function(a,s,o){var u=this.dom,c=this.ctx,p=u.width,d=u.height;s=s||this.clearColor;var _=this.motionBlur&&!a,ja=this.lastFrameAlpha,Ja=this.dpr,ec=this;_&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(u,0,0,p/Ja,d/Ja));var tc=this.domBack;function rc(nc,ic,uc,eh){if(c.clearRect(nc,ic,uc,eh),s&&s!=="transparent"){var rh=void 0;if(isGradientObject(s)){var ah=s.global||s.__width===uc&&s.__height===eh;rh=ah&&s.__canvasGradient||getCanvasGradient(c,s,{x:0,y:0,width:uc,height:eh}),s.__canvasGradient=rh,s.__width=uc,s.__height=eh}else isImagePatternObject(s)&&(s.scaleX=s.scaleX||Ja,s.scaleY=s.scaleY||Ja,rh=createCanvasPattern(c,s,{dirty:function(){ec.setUnpainted(),ec.painter.refresh()}}));c.save(),c.fillStyle=rh||s,c.fillRect(nc,ic,uc,eh),c.restore()}_&&(c.save(),c.globalAlpha=ja,c.drawImage(tc,nc,ic,uc,eh),c.restore())}!o||_?rc(0,0,p,d):o.length&&each$f(o,function(nc){rc(nc.x*Ja,nc.y*Ja,nc.width*Ja,nc.height*Ja)})},r}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function createRoot(n,r){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+n+"px","height:"+r+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}var CanvasPainter=function(){function n(r,a,s,o){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var u=!r.nodeName||r.nodeName.toUpperCase()==="CANVAS";this._opts=s=extend$2({},s||{}),this.dpr=s.devicePixelRatio||devicePixelRatio,this._singleCanvas=u,this.root=r;var c=r.style;c&&(disableUserSelect(r),r.innerHTML=""),this.storage=a;var p=this._zlevelList;this._prevDisplayList=[];var d=this._layers;if(u){var ja=r,Ja=ja.width,ec=ja.height;s.width!=null&&(Ja=s.width),s.height!=null&&(ec=s.height),this.dpr=s.devicePixelRatio||1,ja.width=Ja*this.dpr,ja.height=ec*this.dpr,this._width=Ja,this._height=ec;var tc=new Layer(ja,this,this.dpr);tc.__builtin__=!0,tc.initContext(),d[CANVAS_ZLEVEL]=tc,tc.zlevel=CANVAS_ZLEVEL,p.push(CANVAS_ZLEVEL),this._domRoot=r}else{this._width=getSize$1(r,0,s),this._height=getSize$1(r,1,s);var _=this._domRoot=createRoot(this._width,this._height);r.appendChild(_)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},n.prototype.refresh=function(r){var a=this.storage.getDisplayList(!0),s=this._prevDisplayList,o=this._zlevelList;this._redrawId=Math.random(),this._paintList(a,s,r,this._redrawId);for(var u=0;u<o.length;u++){var c=o[u],p=this._layers[c];if(!p.__builtin__&&p.refresh){var d=u===0?this._backgroundColor:null;p.refresh(d)}}return this._opts.useDirtyRect&&(this._prevDisplayList=a.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(r){var a=r.length,s=this._hoverlayer;if(s&&s.clear(),!!a){for(var o={inHover:!0,viewWidth:this._width,viewHeight:this._height},u,c=0;c<a;c++){var p=r[c];p.__inHover&&(s||(s=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),u||(u=s.ctx,u.save()),brush$1(u,p,o,c===a-1))}u&&u.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},n.prototype.paintOne=function(r,a){brushSingle(r,a)},n.prototype._paintList=function(r,a,s,o){if(this._redrawId===o){s=s||!1,this._updateLayerStatus(r);var u=this._doPaintList(r,a,s),c=u.finished,p=u.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),p&&this._paintHoverList(r),c)this.eachLayer(function(_){_.afterBrush&&_.afterBrush()});else{var d=this;requestAnimationFrame$1(function(){d._paintList(r,a,s,o)})}}},n.prototype._compositeManually=function(){var r=this.getLayer(CANVAS_ZLEVEL).ctx,a=this._domRoot.width,s=this._domRoot.height;r.clearRect(0,0,a,s),this.eachBuiltinLayer(function(o){o.virtual&&r.drawImage(o.dom,0,0,a,s)})},n.prototype._doPaintList=function(r,a,s){for(var o=this,u=[],c=this._opts.useDirtyRect,p=0;p<this._zlevelList.length;p++){var d=this._zlevelList[p],_=this._layers[d];_.__builtin__&&_!==this._hoverlayer&&(_.__dirty||s)&&u.push(_)}for(var ja=!0,Ja=!1,ec=function(nc){var ic=u[nc],uc=ic.ctx,eh=c&&ic.createRepaintRects(r,a,tc._width,tc._height),rh=s?ic.__startIndex:ic.__drawIndex,ah=!s&&ic.incremental&&Date.now,ih=ah&&Date.now(),oh=ic.zlevel===tc._zlevelList[0]?tc._backgroundColor:null;if(ic.__startIndex===ic.__endIndex)ic.clear(!1,oh,eh);else if(rh===ic.__startIndex){var uh=r[rh];(!uh.incremental||!uh.notClear||s)&&ic.clear(!1,oh,eh)}rh===-1&&(console.error("For some unknown reason. drawIndex is -1"),rh=ic.__startIndex);var ch,hh=function(vh){var ph={inHover:!1,allClipped:!1,prevEl:null,viewWidth:o._width,viewHeight:o._height};for(ch=rh;ch<ic.__endIndex;ch++){var yh=r[ch];if(yh.__inHover&&(Ja=!0),o._doPaintEl(yh,ic,c,vh,ph,ch===ic.__endIndex-1),ah){var xh=Date.now()-ih;if(xh>15)break}}ph.prevElClipPaths&&uc.restore()};if(eh)if(eh.length===0)ch=ic.__endIndex;else for(var dh=tc.dpr,gh=0;gh<eh.length;++gh){var fh=eh[gh];uc.save(),uc.beginPath(),uc.rect(fh.x*dh,fh.y*dh,fh.width*dh,fh.height*dh),uc.clip(),hh(fh),uc.restore()}else uc.save(),hh(),uc.restore();ic.__drawIndex=ch,ic.__drawIndex<ic.__endIndex&&(ja=!1)},tc=this,rc=0;rc<u.length;rc++)ec(rc);return env.wxa&&each$f(this._layers,function(nc){nc&&nc.ctx&&nc.ctx.draw&&nc.ctx.draw()}),{finished:ja,needsRefreshHover:Ja}},n.prototype._doPaintEl=function(r,a,s,o,u,c){var p=a.ctx;if(s){var d=r.getPaintRect();(!o||d&&d.intersect(o))&&(brush$1(p,r,u,c),r.setPrevPaintRect(d))}else brush$1(p,r,u,c)},n.prototype.getLayer=function(r,a){this._singleCanvas&&!this._needsManuallyCompositing&&(r=CANVAS_ZLEVEL);var s=this._layers[r];return s||(s=new Layer("zr_"+r,this,this.dpr),s.zlevel=r,s.__builtin__=!0,this._layerConfig[r]?merge(s,this._layerConfig[r],!0):this._layerConfig[r-EL_AFTER_INCREMENTAL_INC]&&merge(s,this._layerConfig[r-EL_AFTER_INCREMENTAL_INC],!0),a&&(s.virtual=a),this.insertLayer(r,s),s.initContext()),s},n.prototype.insertLayer=function(r,a){var s=this._layers,o=this._zlevelList,u=o.length,c=this._domRoot,p=null,d=-1;if(!s[r]&&isLayerValid(a)){if(u>0&&r>o[0]){for(d=0;d<u-1&&!(o[d]<r&&o[d+1]>r);d++);p=s[o[d]]}if(o.splice(d+1,0,r),s[r]=a,!a.virtual)if(p){var _=p.dom;_.nextSibling?c.insertBefore(a.dom,_.nextSibling):c.appendChild(a.dom)}else c.firstChild?c.insertBefore(a.dom,c.firstChild):c.appendChild(a.dom);a.painter||(a.painter=this)}},n.prototype.eachLayer=function(r,a){for(var s=this._zlevelList,o=0;o<s.length;o++){var u=s[o];r.call(a,this._layers[u],u)}},n.prototype.eachBuiltinLayer=function(r,a){for(var s=this._zlevelList,o=0;o<s.length;o++){var u=s[o],c=this._layers[u];c.__builtin__&&r.call(a,c,u)}},n.prototype.eachOtherLayer=function(r,a){for(var s=this._zlevelList,o=0;o<s.length;o++){var u=s[o],c=this._layers[u];c.__builtin__||r.call(a,c,u)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(r){this.eachBuiltinLayer(function(Ja,ec){Ja.__dirty=Ja.__used=!1});function a(Ja){u&&(u.__endIndex!==Ja&&(u.__dirty=!0),u.__endIndex=Ja)}if(this._singleCanvas)for(var s=1;s<r.length;s++){var o=r[s];if(o.zlevel!==r[s-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var u=null,c=0,p,d;for(d=0;d<r.length;d++){var o=r[d],_=o.zlevel,ja=void 0;p!==_&&(p=_,c=0),o.incremental?(ja=this.getLayer(_+INCREMENTAL_INC,this._needsManuallyCompositing),ja.incremental=!0,c=1):ja=this.getLayer(_+(c>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),ja.__builtin__||logError("ZLevel "+_+" has been used by unkown layer "+ja.id),ja!==u&&(ja.__used=!0,ja.__startIndex!==d&&(ja.__dirty=!0),ja.__startIndex=d,ja.incremental?ja.__drawIndex=-1:ja.__drawIndex=d,a(d),u=ja),o.__dirty&REDRAW_BIT&&!o.__inHover&&(ja.__dirty=!0,ja.incremental&&ja.__drawIndex<0&&(ja.__drawIndex=d))}a(d),this.eachBuiltinLayer(function(Ja,ec){!Ja.__used&&Ja.getElementCount()>0&&(Ja.__dirty=!0,Ja.__startIndex=Ja.__endIndex=Ja.__drawIndex=0),Ja.__dirty&&Ja.__drawIndex<0&&(Ja.__drawIndex=Ja.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(r){r.clear()},n.prototype.setBackgroundColor=function(r){this._backgroundColor=r,each$f(this._layers,function(a){a.setUnpainted()})},n.prototype.configLayer=function(r,a){if(a){var s=this._layerConfig;s[r]?merge(s[r],a,!0):s[r]=a;for(var o=0;o<this._zlevelList.length;o++){var u=this._zlevelList[o];if(u===r||u===r+EL_AFTER_INCREMENTAL_INC){var c=this._layers[u];merge(c,s[r],!0)}}}},n.prototype.delLayer=function(r){var a=this._layers,s=this._zlevelList,o=a[r];o&&(o.dom.parentNode.removeChild(o.dom),delete a[r],s.splice(indexOf(s,r),1))},n.prototype.resize=function(r,a){if(this._domRoot.style){var s=this._domRoot;s.style.display="none";var o=this._opts,u=this.root;if(r!=null&&(o.width=r),a!=null&&(o.height=a),r=getSize$1(u,0,o),a=getSize$1(u,1,o),s.style.display="",this._width!==r||a!==this._height){s.style.width=r+"px",s.style.height=a+"px";for(var c in this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(r,a);this.refresh(!0)}this._width=r,this._height=a}else{if(r==null||a==null)return;this._width=r,this._height=a,this.getLayer(CANVAS_ZLEVEL).resize(r,a)}return this},n.prototype.clearLayer=function(r){var a=this._layers[r];a&&a.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(r){if(r=r||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var a=new Layer("image",this,r.pixelRatio||this.dpr);a.initContext(),a.clear(!1,r.backgroundColor||this._backgroundColor);var s=a.ctx;if(r.pixelRatio<=this.dpr){this.refresh();var o=a.dom.width,u=a.dom.height;this.eachLayer(function(Ja){Ja.__builtin__?s.drawImage(Ja.dom,0,0,o,u):Ja.renderToCanvas&&(s.save(),Ja.renderToCanvas(s),s.restore())})}else for(var c={inHover:!1,viewWidth:this._width,viewHeight:this._height},p=this.storage.getDisplayList(!0),d=0,_=p.length;d<_;d++){var ja=p[d];brush$1(s,ja,c,d===_-1)}return a.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();function install$15(n){n.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.hasSymbolVisual=!0,a}return r.prototype.getInitialData=function(a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},r.prototype.getLegendIcon=function(a){var s=new Group$3,o=createSymbol$1("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);s.add(o),o.setStyle(a.lineStyle);var u=this.getData().getVisual("symbol"),c=this.getData().getVisual("symbolRotate"),p=u==="none"?"circle":u,d=a.itemHeight*.8,_=createSymbol$1(p,(a.itemWidth-d)/2,(a.itemHeight-d)/2,d,d,a.itemStyle.fill);s.add(_),_.setStyle(a.itemStyle);var ja=a.iconRotate==="inherit"?c:a.iconRotate||0;return _.rotation=ja*Math.PI/180,_.setOrigin([a.itemWidth/2,a.itemHeight/2]),p.indexOf("empty")>-1&&(_.style.stroke=_.style.fill,_.style.fill="#fff",_.style.lineWidth=2),s},r.type="series.line",r.dependencies=["grid","polar"],r.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},r}(SeriesModel);function getDefaultLabel(n,r){var a=n.mapDimensionsAll("defaultedLabel"),s=a.length;if(s===1){var o=retrieveRawValue(n,r,a[0]);return o!=null?o+"":null}else if(s){for(var u=[],c=0;c<a.length;c++)u.push(retrieveRawValue(n,r,a[c]));return u.join(" ")}}function getDefaultInterpolatedLabel(n,r){var a=n.mapDimensionsAll("defaultedLabel");if(!isArray$1(r))return r+"";for(var s=[],o=0;o<a.length;o++){var u=n.getDimensionIndex(a[o]);u>=0&&s.push(r[u])}return s.join(" ")}var Symbol$1=function(n){__extends(r,n);function r(a,s,o,u){var c=n.call(this)||this;return c.updateData(a,s,o,u),c}return r.prototype._createSymbol=function(a,s,o,u,c){this.removeAll();var p=createSymbol$1(a,-1,-1,2,2,null,c);p.attr({z2:100,culling:!0,scaleX:u[0]/2,scaleY:u[1]/2}),p.drift=driftSymbol,this._symbolType=a,this.add(p)},r.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},r.prototype.getSymbolType=function(){return this._symbolType},r.prototype.getSymbolPath=function(){return this.childAt(0)},r.prototype.highlight=function(){enterEmphasis(this.childAt(0))},r.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},r.prototype.setZ=function(a,s){var o=this.childAt(0);o.zlevel=a,o.z=s},r.prototype.setDraggable=function(a,s){var o=this.childAt(0);o.draggable=a,o.cursor=!s&&a?"move":o.cursor},r.prototype.updateData=function(a,s,o,u){this.silent=!1;var c=a.getItemVisual(s,"symbol")||"circle",p=a.hostModel,d=r.getSymbolSize(a,s),_=c!==this._symbolType,ja=u&&u.disableAnimation;if(_){var Ja=a.getItemVisual(s,"symbolKeepAspect");this._createSymbol(c,a,s,d,Ja)}else{var ec=this.childAt(0);ec.silent=!1;var tc={scaleX:d[0]/2,scaleY:d[1]/2};ja?ec.attr(tc):updateProps$1(ec,tc,p,s),saveOldStyle(ec)}if(this._updateCommon(a,s,d,o,u),_){var ec=this.childAt(0);if(!ja){var tc={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:ec.style.opacity}};ec.scaleX=ec.scaleY=0,ec.style.opacity=0,initProps(ec,tc,p,s)}}ja&&this.childAt(0).stopAnimation("leave")},r.prototype._updateCommon=function(a,s,o,u,c){var p=this.childAt(0),d=a.hostModel,_,ja,Ja,ec,tc,rc,nc,ic,uc;if(u&&(_=u.emphasisItemStyle,ja=u.blurItemStyle,Ja=u.selectItemStyle,ec=u.focus,tc=u.blurScope,nc=u.labelStatesModels,ic=u.hoverScale,uc=u.cursorStyle,rc=u.emphasisDisabled),!u||a.hasItemOption){var eh=u&&u.itemModel?u.itemModel:a.getItemModel(s),rh=eh.getModel("emphasis");_=rh.getModel("itemStyle").getItemStyle(),Ja=eh.getModel(["select","itemStyle"]).getItemStyle(),ja=eh.getModel(["blur","itemStyle"]).getItemStyle(),ec=rh.get("focus"),tc=rh.get("blurScope"),rc=rh.get("disabled"),nc=getLabelStatesModels(eh),ic=rh.getShallow("scale"),uc=eh.getShallow("cursor")}var ah=a.getItemVisual(s,"symbolRotate");p.attr("rotation",(ah||0)*Math.PI/180||0);var ih=normalizeSymbolOffset(a.getItemVisual(s,"symbolOffset"),o);ih&&(p.x=ih[0],p.y=ih[1]),uc&&p.attr("cursor",uc);var oh=a.getItemVisual(s,"style"),uh=oh.fill;if(p instanceof ZRImage){var ch=p.style;p.useStyle(extend$2({image:ch.image,x:ch.x,y:ch.y,width:ch.width,height:ch.height},oh))}else p.__isEmptyBrush?p.useStyle(extend$2({},oh)):p.useStyle(oh),p.style.decal=null,p.setColor(uh,c&&c.symbolInnerColor),p.style.strokeNoScale=!0;var hh=a.getItemVisual(s,"liftZ"),dh=this._z2;hh!=null?dh==null&&(this._z2=p.z2,p.z2+=hh):dh!=null&&(p.z2=dh,this._z2=null);var gh=c&&c.useNameLabel;setLabelStyle(p,nc,{labelFetcher:d,labelDataIndex:s,defaultText:fh,inheritColor:uh,defaultOpacity:oh.opacity});function fh(yh){return gh?a.getName(yh):getDefaultLabel(a,yh)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var vh=p.ensureState("emphasis");vh.style=_,p.ensureState("select").style=Ja,p.ensureState("blur").style=ja;var ph=ic==null||ic===!0?Math.max(1.1,3/this._sizeY):isFinite(ic)&&ic>0?+ic:1;vh.scaleX=this._sizeX*ph,vh.scaleY=this._sizeY*ph,this.setSymbolScale(1),toggleHoverEmphasis(this,ec,tc,rc)},r.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},r.prototype.fadeOut=function(a,s,o){var u=this.childAt(0),c=getECData(this).dataIndex,p=o&&o.animation;if(this.silent=u.silent=!0,o&&o.fadeLabel){var d=u.getTextContent();d&&removeElement(d,{style:{opacity:0}},s,{dataIndex:c,removeOpt:p,cb:function(){u.removeTextContent()}})}else u.removeTextContent();removeElement(u,{style:{opacity:0},scaleX:0,scaleY:0},s,{dataIndex:c,cb:a,removeOpt:p})},r.getSymbolSize=function(a,s){return normalizeSymbolSize(a.getItemVisual(s,"symbolSize"))},r}(Group$3);function driftSymbol(n,r){this.parent.drift(n,r)}function symbolNeedsDraw$1(n,r,a,s){return r&&!isNaN(r[0])&&!isNaN(r[1])&&!(s.isIgnore&&s.isIgnore(a))&&!(s.clipShape&&!s.clipShape.contain(r[0],r[1]))&&n.getItemVisual(a,"symbol")!=="none"}function normalizeUpdateOpt(n){return n!=null&&!isObject$3(n)&&(n={isIgnore:n}),n||{}}function makeSeriesScope$2(n){var r=n.hostModel,a=r.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:r.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:r.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:getLabelStatesModels(r),cursorStyle:r.get("cursor")}}var SymbolDraw=function(){function n(r){this.group=new Group$3,this._SymbolCtor=r||Symbol$1}return n.prototype.updateData=function(r,a){this._progressiveEls=null,a=normalizeUpdateOpt(a);var s=this.group,o=r.hostModel,u=this._data,c=this._SymbolCtor,p=a.disableAnimation,d=makeSeriesScope$2(r),_={disableAnimation:p},ja=a.getSymbolPoint||function(Ja){return r.getItemLayout(Ja)};u||s.removeAll(),r.diff(u).add(function(Ja){var ec=ja(Ja);if(symbolNeedsDraw$1(r,ec,Ja,a)){var tc=new c(r,Ja,d,_);tc.setPosition(ec),r.setItemGraphicEl(Ja,tc),s.add(tc)}}).update(function(Ja,ec){var tc=u.getItemGraphicEl(ec),rc=ja(Ja);if(!symbolNeedsDraw$1(r,rc,Ja,a)){s.remove(tc);return}var nc=r.getItemVisual(Ja,"symbol")||"circle",ic=tc&&tc.getSymbolType&&tc.getSymbolType();if(!tc||ic&&ic!==nc)s.remove(tc),tc=new c(r,Ja,d,_),tc.setPosition(rc);else{tc.updateData(r,Ja,d,_);var uc={x:rc[0],y:rc[1]};p?tc.attr(uc):updateProps$1(tc,uc,o)}s.add(tc),r.setItemGraphicEl(Ja,tc)}).remove(function(Ja){var ec=u.getItemGraphicEl(Ja);ec&&ec.fadeOut(function(){s.remove(ec)},o)}).execute(),this._getSymbolPoint=ja,this._data=r},n.prototype.updateLayout=function(){var r=this,a=this._data;a&&a.eachItemGraphicEl(function(s,o){var u=r._getSymbolPoint(o);s.setPosition(u),s.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=makeSeriesScope$2(r),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(r,a,s){this._progressiveEls=[],s=normalizeUpdateOpt(s);function o(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var u=r.start;u<r.end;u++){var c=a.getItemLayout(u);if(symbolNeedsDraw$1(a,c,u,s)){var p=new this._SymbolCtor(a,u,this._seriesScope);p.traverse(o),p.setPosition(c),this.group.add(p),a.setItemGraphicEl(u,p),this._progressiveEls.push(p)}}},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype.remove=function(r){var a=this.group,s=this._data;s&&r?s.eachItemGraphicEl(function(o){o.fadeOut(function(){a.remove(o)},s.hostModel)}):a.removeAll()},n}();function prepareDataCoordInfo(n,r,a){var s=n.getBaseAxis(),o=n.getOtherAxis(s),u=getValueStart(o,a),c=s.dim,p=o.dim,d=r.mapDimension(p),_=r.mapDimension(c),ja=p==="x"||p==="radius"?1:0,Ja=map$1(n.dimensions,function(rc){return r.mapDimension(rc)}),ec=!1,tc=r.getCalculationInfo("stackResultDimension");return isDimensionStacked$2(r,Ja[0])&&(ec=!0,Ja[0]=tc),isDimensionStacked$2(r,Ja[1])&&(ec=!0,Ja[1]=tc),{dataDimsForPoint:Ja,valueStart:u,valueAxisDim:p,baseAxisDim:c,stacked:!!ec,valueDim:d,baseDim:_,baseDataOffset:ja,stackedOverDimension:r.getCalculationInfo("stackedOverDimension")}}function getValueStart(n,r){var a=0,s=n.scale.getExtent();return r==="start"?a=s[0]:r==="end"?a=s[1]:isNumber(r)&&!isNaN(r)?a=r:s[0]>0?a=s[0]:s[1]<0&&(a=s[1]),a}function getStackedOnPoint(n,r,a,s){var o=NaN;n.stacked&&(o=a.get(a.getCalculationInfo("stackedOverDimension"),s)),isNaN(o)&&(o=n.valueStart);var u=n.baseDataOffset,c=[];return c[u]=a.get(n.baseDim,s),c[1-u]=o,r.dataToPoint(c)}function diffData(n,r){var a=[];return r.diff(n).add(function(s){a.push({cmd:"+",idx:s})}).update(function(s,o){a.push({cmd:"=",idx:o,idx1:s})}).remove(function(s){a.push({cmd:"-",idx:s})}).execute(),a}function lineAnimationDiff(n,r,a,s,o,u,c,p){for(var d=diffData(n,r),_=[],ja=[],Ja=[],ec=[],tc=[],rc=[],nc=[],ic=prepareDataCoordInfo(o,r,c),uc=n.getLayout("points")||[],eh=r.getLayout("points")||[],rh=0;rh<d.length;rh++){var ah=d[rh],ih=!0,oh=void 0,uh=void 0;switch(ah.cmd){case"=":oh=ah.idx*2,uh=ah.idx1*2;var ch=uc[oh],hh=uc[oh+1],dh=eh[uh],gh=eh[uh+1];(isNaN(ch)||isNaN(hh))&&(ch=dh,hh=gh),_.push(ch,hh),ja.push(dh,gh),Ja.push(a[oh],a[oh+1]),ec.push(s[uh],s[uh+1]),nc.push(r.getRawIndex(ah.idx1));break;case"+":var fh=ah.idx,vh=ic.dataDimsForPoint,ph=o.dataToPoint([r.get(vh[0],fh),r.get(vh[1],fh)]);uh=fh*2,_.push(ph[0],ph[1]),ja.push(eh[uh],eh[uh+1]);var yh=getStackedOnPoint(ic,o,r,fh);Ja.push(yh[0],yh[1]),ec.push(s[uh],s[uh+1]),nc.push(r.getRawIndex(fh));break;case"-":ih=!1}ih&&(tc.push(ah),rc.push(rc.length))}rc.sort(function(kh,Lh){return nc[kh]-nc[Lh]});for(var xh=_.length,_h=createFloat32Array(xh),bh=createFloat32Array(xh),Dh=createFloat32Array(xh),Th=createFloat32Array(xh),Ch=[],rh=0;rh<rc.length;rh++){var wh=rc[rh],Nh=rh*2,Rh=wh*2;_h[Nh]=_[Rh],_h[Nh+1]=_[Rh+1],bh[Nh]=ja[Rh],bh[Nh+1]=ja[Rh+1],Dh[Nh]=Ja[Rh],Dh[Nh+1]=Ja[Rh+1],Th[Nh]=ec[Rh],Th[Nh+1]=ec[Rh+1],Ch[rh]=tc[wh]}return{current:_h,next:bh,stackedOnCurrent:Dh,stackedOnNext:Th,status:Ch}}var mathMin$6=Math.min,mathMax$6=Math.max;function isPointNull$1(n,r){return isNaN(n)||isNaN(r)}function drawSegment(n,r,a,s,o,u,c,p,d){for(var _,ja,Ja,ec,tc,rc,nc=a,ic=0;ic<s;ic++){var uc=r[nc*2],eh=r[nc*2+1];if(nc>=o||nc<0)break;if(isPointNull$1(uc,eh)){if(d){nc+=u;continue}break}if(nc===a)n[u>0?"moveTo":"lineTo"](uc,eh),Ja=uc,ec=eh;else{var rh=uc-_,ah=eh-ja;if(rh*rh+ah*ah<.5){nc+=u;continue}if(c>0){for(var ih=nc+u,oh=r[ih*2],uh=r[ih*2+1];oh===uc&&uh===eh&&ic<s;)ic++,ih+=u,nc+=u,oh=r[ih*2],uh=r[ih*2+1],uc=r[nc*2],eh=r[nc*2+1],rh=uc-_,ah=eh-ja;var ch=ic+1;if(d)for(;isPointNull$1(oh,uh)&&ch<s;)ch++,ih+=u,oh=r[ih*2],uh=r[ih*2+1];var hh=.5,dh=0,gh=0,fh=void 0,vh=void 0;if(ch>=s||isPointNull$1(oh,uh))tc=uc,rc=eh;else{dh=oh-_,gh=uh-ja;var ph=uc-_,yh=oh-uc,xh=eh-ja,_h=uh-eh,bh=void 0,Dh=void 0;if(p==="x"){bh=Math.abs(ph),Dh=Math.abs(yh);var Th=dh>0?1:-1;tc=uc-Th*bh*c,rc=eh,fh=uc+Th*Dh*c,vh=eh}else if(p==="y"){bh=Math.abs(xh),Dh=Math.abs(_h);var Ch=gh>0?1:-1;tc=uc,rc=eh-Ch*bh*c,fh=uc,vh=eh+Ch*Dh*c}else bh=Math.sqrt(ph*ph+xh*xh),Dh=Math.sqrt(yh*yh+_h*_h),hh=Dh/(Dh+bh),tc=uc-dh*c*(1-hh),rc=eh-gh*c*(1-hh),fh=uc+dh*c*hh,vh=eh+gh*c*hh,fh=mathMin$6(fh,mathMax$6(oh,uc)),vh=mathMin$6(vh,mathMax$6(uh,eh)),fh=mathMax$6(fh,mathMin$6(oh,uc)),vh=mathMax$6(vh,mathMin$6(uh,eh)),dh=fh-uc,gh=vh-eh,tc=uc-dh*bh/Dh,rc=eh-gh*bh/Dh,tc=mathMin$6(tc,mathMax$6(_,uc)),rc=mathMin$6(rc,mathMax$6(ja,eh)),tc=mathMax$6(tc,mathMin$6(_,uc)),rc=mathMax$6(rc,mathMin$6(ja,eh)),dh=uc-tc,gh=eh-rc,fh=uc+dh*Dh/bh,vh=eh+gh*Dh/bh}n.bezierCurveTo(Ja,ec,tc,rc,uc,eh),Ja=fh,ec=vh}else n.lineTo(uc,eh)}_=uc,ja=eh,nc+=u}return ic}var ECPolylineShape=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),ECPolyline=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="ec-polyline",s}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new ECPolylineShape},r.prototype.buildPath=function(a,s){var o=s.points,u=0,c=o.length/2;if(s.connectNulls){for(;c>0&&isPointNull$1(o[c*2-2],o[c*2-1]);c--);for(;u<c&&isPointNull$1(o[u*2],o[u*2+1]);u++);}for(;u<c;)u+=drawSegment(a,o,u,c,c,1,s.smooth,s.smoothMonotone,s.connectNulls)+1},r.prototype.getPointOn=function(a,s){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,u=o.data,c=PathProxy.CMD,p,d,_=s==="x",ja=[],Ja=0;Ja<u.length;){var ec=u[Ja++],tc=void 0,rc=void 0,nc=void 0,ic=void 0,uc=void 0,eh=void 0,rh=void 0;switch(ec){case c.M:p=u[Ja++],d=u[Ja++];break;case c.L:if(tc=u[Ja++],rc=u[Ja++],rh=_?(a-p)/(tc-p):(a-d)/(rc-d),rh<=1&&rh>=0){var ah=_?(rc-d)*rh+d:(tc-p)*rh+p;return _?[a,ah]:[ah,a]}p=tc,d=rc;break;case c.C:tc=u[Ja++],rc=u[Ja++],nc=u[Ja++],ic=u[Ja++],uc=u[Ja++],eh=u[Ja++];var ih=_?cubicRootAt(p,tc,nc,uc,a,ja):cubicRootAt(d,rc,ic,eh,a,ja);if(ih>0)for(var oh=0;oh<ih;oh++){var uh=ja[oh];if(uh<=1&&uh>=0){var ah=_?cubicAt(d,rc,ic,eh,uh):cubicAt(p,tc,nc,uc,uh);return _?[a,ah]:[ah,a]}}p=uc,d=eh;break}}},r}(Path),ECPolygonShape=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(ECPolylineShape),ECPolygon=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="ec-polygon",s}return r.prototype.getDefaultShape=function(){return new ECPolygonShape},r.prototype.buildPath=function(a,s){var o=s.points,u=s.stackedOnPoints,c=0,p=o.length/2,d=s.smoothMonotone;if(s.connectNulls){for(;p>0&&isPointNull$1(o[p*2-2],o[p*2-1]);p--);for(;c<p&&isPointNull$1(o[c*2],o[c*2+1]);c++);}for(;c<p;){var _=drawSegment(a,o,c,p,p,1,s.smooth,d,s.connectNulls);drawSegment(a,u,c+_-1,_,p,-1,s.stackedOnSmooth,d,s.connectNulls),c+=_+1,a.closePath()}},r}(Path);function createGridClipPath(n,r,a,s,o){var u=n.getArea(),c=u.x,p=u.y,d=u.width,_=u.height,ja=a.get(["lineStyle","width"])||2;c-=ja/2,p-=ja/2,d+=ja,_+=ja,d=Math.ceil(d),c!==Math.floor(c)&&(c=Math.floor(c),d++);var Ja=new Rect$2({shape:{x:c,y:p,width:d,height:_}});if(r){var ec=n.getBaseAxis(),tc=ec.isHorizontal(),rc=ec.inverse;tc?(rc&&(Ja.shape.x+=d),Ja.shape.width=0):(rc||(Ja.shape.y+=_),Ja.shape.height=0);var nc=isFunction(o)?function(ic){o(ic,Ja)}:null;initProps(Ja,{shape:{width:d,height:_,x:c,y:p}},a,null,s,nc)}return Ja}function createPolarClipPath(n,r,a){var s=n.getArea(),o=round$3(s.r0,1),u=round$3(s.r,1),c=new Sector({shape:{cx:round$3(n.cx,1),cy:round$3(n.cy,1),r0:o,r:u,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}});if(r){var p=n.getBaseAxis().dim==="angle";p?c.shape.endAngle=s.startAngle:c.shape.r=o,initProps(c,{shape:{endAngle:s.endAngle,r:u}},a)}return c}function createClipPath(n,r,a,s,o){if(n){if(n.type==="polar")return createPolarClipPath(n,r,a);if(n.type==="cartesian2d")return createGridClipPath(n,r,a,s,o)}else return null;return null}function isCoordinateSystemType(n,r){return n.type===r}function isPointsSame(n,r){if(n.length===r.length){for(var a=0;a<n.length;a++)if(n[a]!==r[a])return;return!0}}function bboxFromPoints(n){for(var r=1/0,a=1/0,s=-1/0,o=-1/0,u=0;u<n.length;){var c=n[u++],p=n[u++];isNaN(c)||(r=Math.min(c,r),s=Math.max(c,s)),isNaN(p)||(a=Math.min(p,a),o=Math.max(p,o))}return[[r,a],[s,o]]}function getBoundingDiff(n,r){var a=bboxFromPoints(n),s=a[0],o=a[1],u=bboxFromPoints(r),c=u[0],p=u[1];return Math.max(Math.abs(s[0]-c[0]),Math.abs(s[1]-c[1]),Math.abs(o[0]-p[0]),Math.abs(o[1]-p[1]))}function getSmooth(n){return isNumber(n)?n:n?.5:0}function getStackedOnPoints(n,r,a){if(!a.valueDim)return[];for(var s=r.count(),o=createFloat32Array(s*2),u=0;u<s;u++){var c=getStackedOnPoint(a,n,r,u);o[u*2]=c[0],o[u*2+1]=c[1]}return o}function turnPointsIntoStep(n,r,a,s){var o=r.getBaseAxis(),u=o.dim==="x"||o.dim==="radius"?0:1,c=[],p=0,d=[],_=[],ja=[],Ja=[];if(s){for(p=0;p<n.length;p+=2)!isNaN(n[p])&&!isNaN(n[p+1])&&Ja.push(n[p],n[p+1]);n=Ja}for(p=0;p<n.length-2;p+=2)switch(ja[0]=n[p+2],ja[1]=n[p+3],_[0]=n[p],_[1]=n[p+1],c.push(_[0],_[1]),a){case"end":d[u]=ja[u],d[1-u]=_[1-u],c.push(d[0],d[1]);break;case"middle":var ec=(_[u]+ja[u])/2,tc=[];d[u]=tc[u]=ec,d[1-u]=_[1-u],tc[1-u]=ja[1-u],c.push(d[0],d[1]),c.push(tc[0],tc[1]);break;default:d[u]=_[u],d[1-u]=ja[1-u],c.push(d[0],d[1])}return c.push(n[p++],n[p++]),c}function clipColorStops(n,r){var a=[],s=n.length,o,u;function c(ja,Ja,ec){var tc=ja.coord,rc=(ec-tc)/(Ja.coord-tc),nc=lerp$1(rc,[ja.color,Ja.color]);return{coord:ec,color:nc}}for(var p=0;p<s;p++){var d=n[p],_=d.coord;if(_<0)o=d;else if(_>r){u?a.push(c(u,d,r)):o&&a.push(c(o,d,0),c(o,d,r));break}else o&&(a.push(c(o,d,0)),o=null),a.push(d),u=d}return a}function getVisualGradient(n,r,a){var s=n.getVisual("visualMeta");if(!(!s||!s.length||!n.count())&&r.type==="cartesian2d"){for(var o,u,c=s.length-1;c>=0;c--){var p=n.getDimensionInfo(s[c].dimension);if(o=p&&p.coordDim,o==="x"||o==="y"){u=s[c];break}}if(u){var d=r.getAxis(o),_=map$1(u.stops,function(rh){return{coord:d.toGlobalCoord(d.dataToCoord(rh.value)),color:rh.color}}),ja=_.length,Ja=u.outerColors.slice();ja&&_[0].coord>_[ja-1].coord&&(_.reverse(),Ja.reverse());var ec=clipColorStops(_,o==="x"?a.getWidth():a.getHeight()),tc=ec.length;if(!tc&&ja)return _[0].coord<0?Ja[1]?Ja[1]:_[ja-1].color:Ja[0]?Ja[0]:_[0].color;var rc=10,nc=ec[0].coord-rc,ic=ec[tc-1].coord+rc,uc=ic-nc;if(uc<.001)return"transparent";each$f(ec,function(rh){rh.offset=(rh.coord-nc)/uc}),ec.push({offset:tc?ec[tc-1].offset:.5,color:Ja[1]||"transparent"}),ec.unshift({offset:tc?ec[0].offset:.5,color:Ja[0]||"transparent"});var eh=new LinearGradient(0,0,0,0,ec,!0);return eh[o]=nc,eh[o+"2"]=ic,eh}}}function getIsIgnoreFunc(n,r,a){var s=n.get("showAllSymbol"),o=s==="auto";if(!(s&&!o)){var u=a.getAxesByScale("ordinal")[0];if(u&&!(o&&canShowAllSymbolForCategory(u,r))){var c=r.mapDimension(u.dim),p={};return each$f(u.getViewLabels(),function(d){var _=u.scale.getRawOrdinalNumber(d.tickValue);p[_]=1}),function(d){return!p.hasOwnProperty(r.get(c,d))}}}}function canShowAllSymbolForCategory(n,r){var a=n.getExtent(),s=Math.abs(a[1]-a[0])/n.scale.count();isNaN(s)&&(s=0);for(var o=r.count(),u=Math.max(1,Math.round(o/5)),c=0;c<o;c+=u)if(Symbol$1.getSymbolSize(r,c)[n.isHorizontal()?1:0]*1.5>s)return!1;return!0}function isPointNull(n,r){return isNaN(n)||isNaN(r)}function getLastIndexNotNull(n){for(var r=n.length/2;r>0&&isPointNull(n[r*2-2],n[r*2-1]);r--);return r-1}function getPointAtIndex(n,r){return[n[r*2],n[r*2+1]]}function getIndexRange(n,r,a){for(var s=n.length/2,o=a==="x"?0:1,u,c,p=0,d=-1,_=0;_<s;_++)if(c=n[_*2+o],!(isNaN(c)||isNaN(n[_*2+1-o]))){if(_===0){u=c;continue}if(u<=r&&c>=r||u>=r&&c<=r){d=_;break}p=_,u=c}return{range:[p,d],t:(r-u)/(c-u)}}function anyStateShowEndLabel(n){if(n.get(["endLabel","show"]))return!0;for(var r=0;r<SPECIAL_STATES.length;r++)if(n.get([SPECIAL_STATES[r],"endLabel","show"]))return!0;return!1}function createLineClipPath(n,r,a,s){if(isCoordinateSystemType(r,"cartesian2d")){var o=s.getModel("endLabel"),u=o.get("valueAnimation"),c=s.getData(),p={lastFrameIndex:0},d=anyStateShowEndLabel(s)?function(tc,rc){n._endLabelOnDuring(tc,rc,c,p,u,o,r)}:null,_=r.getBaseAxis().isHorizontal(),ja=createGridClipPath(r,a,s,function(){var tc=n._endLabel;tc&&a&&p.originalX!=null&&tc.attr({x:p.originalX,y:p.originalY})},d);if(!s.get("clip",!0)){var Ja=ja.shape,ec=Math.max(Ja.width,Ja.height);_?(Ja.y-=ec,Ja.height+=ec*2):(Ja.x-=ec,Ja.width+=ec*2)}return d&&d(1,ja),ja}else return createPolarClipPath(r,a,s)}function getEndLabelStateSpecified(n,r){var a=r.getBaseAxis(),s=a.isHorizontal(),o=a.inverse,u=s?o?"right":"left":"center",c=s?"middle":o?"top":"bottom";return{normal:{align:n.get("align")||u,verticalAlign:n.get("verticalAlign")||c}}}var LineView$1=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(){var a=new Group$3,s=new SymbolDraw;this.group.add(s.group),this._symbolDraw=s,this._lineGroup=a},r.prototype.render=function(a,s,o){var u=this,c=a.coordinateSystem,p=this.group,d=a.getData(),_=a.getModel("lineStyle"),ja=a.getModel("areaStyle"),Ja=d.getLayout("points")||[],ec=c.type==="polar",tc=this._coordSys,rc=this._symbolDraw,nc=this._polyline,ic=this._polygon,uc=this._lineGroup,eh=!s.ssr&&a.get("animation"),rh=!ja.isEmpty(),ah=ja.get("origin"),ih=prepareDataCoordInfo(c,d,ah),oh=rh&&getStackedOnPoints(c,d,ih),uh=a.get("showSymbol"),ch=a.get("connectNulls"),hh=uh&&!ec&&getIsIgnoreFunc(a,d,c),dh=this._data;dh&&dh.eachItemGraphicEl(function(Lh,Fh){Lh.__temp&&(p.remove(Lh),dh.setItemGraphicEl(Fh,null))}),uh||rc.remove(),p.add(uc);var gh=ec?!1:a.get("step"),fh;c&&c.getArea&&a.get("clip",!0)&&(fh=c.getArea(),fh.width!=null?(fh.x-=.1,fh.y-=.1,fh.width+=.2,fh.height+=.2):fh.r0&&(fh.r0-=.5,fh.r+=.5)),this._clipShapeForSymbol=fh;var vh=getVisualGradient(d,c,o)||d.getVisual("style")[d.getVisual("drawType")];if(!(nc&&tc.type===c.type&&gh===this._step))uh&&rc.updateData(d,{isIgnore:hh,clipShape:fh,disableAnimation:!0,getSymbolPoint:function(Lh){return[Ja[Lh*2],Ja[Lh*2+1]]}}),eh&&this._initSymbolLabelAnimation(d,c,fh),gh&&(Ja=turnPointsIntoStep(Ja,c,gh,ch),oh&&(oh=turnPointsIntoStep(oh,c,gh,ch))),nc=this._newPolyline(Ja),rh?ic=this._newPolygon(Ja,oh):ic&&(uc.remove(ic),ic=this._polygon=null),ec||this._initOrUpdateEndLabel(a,c,convertToColorString(vh)),uc.setClipPath(createLineClipPath(this,c,!0,a));else{rh&&!ic?ic=this._newPolygon(Ja,oh):ic&&!rh&&(uc.remove(ic),ic=this._polygon=null),ec||this._initOrUpdateEndLabel(a,c,convertToColorString(vh));var ph=uc.getClipPath();if(ph){var yh=createLineClipPath(this,c,!1,a);initProps(ph,{shape:yh.shape},a)}else uc.setClipPath(createLineClipPath(this,c,!0,a));uh&&rc.updateData(d,{isIgnore:hh,clipShape:fh,disableAnimation:!0,getSymbolPoint:function(Lh){return[Ja[Lh*2],Ja[Lh*2+1]]}}),(!isPointsSame(this._stackedOnPoints,oh)||!isPointsSame(this._points,Ja))&&(eh?this._doUpdateAnimation(d,oh,c,o,gh,ah,ch):(gh&&(Ja=turnPointsIntoStep(Ja,c,gh,ch),oh&&(oh=turnPointsIntoStep(oh,c,gh,ch))),nc.setShape({points:Ja}),ic&&ic.setShape({points:Ja,stackedOnPoints:oh})))}var xh=a.getModel("emphasis"),_h=xh.get("focus"),bh=xh.get("blurScope"),Dh=xh.get("disabled");if(nc.useStyle(defaults(_.getLineStyle(),{fill:"none",stroke:vh,lineJoin:"bevel"})),setStatesStylesFromModel(nc,a,"lineStyle"),nc.style.lineWidth>0&&a.get(["emphasis","lineStyle","width"])==="bolder"){var Th=nc.getState("emphasis").style;Th.lineWidth=+nc.style.lineWidth+1}getECData(nc).seriesIndex=a.seriesIndex,toggleHoverEmphasis(nc,_h,bh,Dh);var Ch=getSmooth(a.get("smooth")),wh=a.get("smoothMonotone");if(nc.setShape({smooth:Ch,smoothMonotone:wh,connectNulls:ch}),ic){var Nh=d.getCalculationInfo("stackedOnSeries"),Rh=0;ic.useStyle(defaults(ja.getAreaStyle(),{fill:vh,opacity:.7,lineJoin:"bevel",decal:d.getVisual("style").decal})),Nh&&(Rh=getSmooth(Nh.get("smooth"))),ic.setShape({smooth:Ch,stackedOnSmooth:Rh,smoothMonotone:wh,connectNulls:ch}),setStatesStylesFromModel(ic,a,"areaStyle"),getECData(ic).seriesIndex=a.seriesIndex,toggleHoverEmphasis(ic,_h,bh,Dh)}var kh=function(Lh){u._changePolyState(Lh)};d.eachItemGraphicEl(function(Lh){Lh&&(Lh.onHoverStateChange=kh)}),this._polyline.onHoverStateChange=kh,this._data=d,this._coordSys=c,this._stackedOnPoints=oh,this._points=Ja,this._step=gh,this._valueOrigin=ah,a.get("triggerLineEvent")&&(this.packEventData(a,nc),ic&&this.packEventData(a,ic))},r.prototype.packEventData=function(a,s){getECData(s).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},r.prototype.highlight=function(a,s,o,u){var c=a.getData(),p=queryDataIndex(c,u);if(this._changePolyState("emphasis"),!(p instanceof Array)&&p!=null&&p>=0){var d=c.getLayout("points"),_=c.getItemGraphicEl(p);if(!_){var ja=d[p*2],Ja=d[p*2+1];if(isNaN(ja)||isNaN(Ja)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(ja,Ja))return;var ec=a.get("zlevel")||0,tc=a.get("z")||0;_=new Symbol$1(c,p),_.x=ja,_.y=Ja,_.setZ(ec,tc);var rc=_.getSymbolPath().getTextContent();rc&&(rc.zlevel=ec,rc.z=tc,rc.z2=this._polyline.z2+1),_.__temp=!0,c.setItemGraphicEl(p,_),_.stopSymbolAnimation(!0),this.group.add(_)}_.highlight()}else ChartView.prototype.highlight.call(this,a,s,o,u)},r.prototype.downplay=function(a,s,o,u){var c=a.getData(),p=queryDataIndex(c,u);if(this._changePolyState("normal"),p!=null&&p>=0){var d=c.getItemGraphicEl(p);d&&(d.__temp?(c.setItemGraphicEl(p,null),this.group.remove(d)):d.downplay())}else ChartView.prototype.downplay.call(this,a,s,o,u)},r.prototype._changePolyState=function(a){var s=this._polygon;setStatesFlag(this._polyline,a),s&&setStatesFlag(s,a)},r.prototype._newPolyline=function(a){var s=this._polyline;return s&&this._lineGroup.remove(s),s=new ECPolyline({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(s),this._polyline=s,s},r.prototype._newPolygon=function(a,s){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new ECPolygon({shape:{points:a,stackedOnPoints:s},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},r.prototype._initSymbolLabelAnimation=function(a,s,o){var u,c,p=s.getBaseAxis(),d=p.inverse;s.type==="cartesian2d"?(u=p.isHorizontal(),c=!1):s.type==="polar"&&(u=p.dim==="angle",c=!0);var _=a.hostModel,ja=_.get("animationDuration");isFunction(ja)&&(ja=ja(null));var Ja=_.get("animationDelay")||0,ec=isFunction(Ja)?Ja(null):Ja;a.eachItemGraphicEl(function(tc,rc){var nc=tc;if(nc){var ic=[tc.x,tc.y],uc=void 0,eh=void 0,rh=void 0;if(o)if(c){var ah=o,ih=s.pointToCoord(ic);u?(uc=ah.startAngle,eh=ah.endAngle,rh=-ih[1]/180*Math.PI):(uc=ah.r0,eh=ah.r,rh=ih[0])}else{var oh=o;u?(uc=oh.x,eh=oh.x+oh.width,rh=tc.x):(uc=oh.y+oh.height,eh=oh.y,rh=tc.y)}var uh=eh===uc?0:(rh-uc)/(eh-uc);d&&(uh=1-uh);var ch=isFunction(Ja)?Ja(rc):ja*uh+ec,hh=nc.getSymbolPath(),dh=hh.getTextContent();nc.attr({scaleX:0,scaleY:0}),nc.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:ch}),dh&&dh.animateFrom({style:{opacity:0}},{duration:300,delay:ch}),hh.disableLabelAnimation=!0}})},r.prototype._initOrUpdateEndLabel=function(a,s,o){var u=a.getModel("endLabel");if(anyStateShowEndLabel(a)){var c=a.getData(),p=this._polyline,d=c.getLayout("points");if(!d){p.removeTextContent(),this._endLabel=null;return}var _=this._endLabel;_||(_=this._endLabel=new ZRText({z2:200}),_.ignoreClip=!0,p.setTextContent(this._endLabel),p.disableLabelAnimation=!0);var ja=getLastIndexNotNull(d);ja>=0&&(setLabelStyle(p,getLabelStatesModels(a,"endLabel"),{inheritColor:o,labelFetcher:a,labelDataIndex:ja,defaultText:function(Ja,ec,tc){return tc!=null?getDefaultInterpolatedLabel(c,tc):getDefaultLabel(c,Ja)},enableTextSetter:!0},getEndLabelStateSpecified(u,s)),p.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},r.prototype._endLabelOnDuring=function(a,s,o,u,c,p,d){var _=this._endLabel,ja=this._polyline;if(_){a<1&&u.originalX==null&&(u.originalX=_.x,u.originalY=_.y);var Ja=o.getLayout("points"),ec=o.hostModel,tc=ec.get("connectNulls"),rc=p.get("precision"),nc=p.get("distance")||0,ic=d.getBaseAxis(),uc=ic.isHorizontal(),eh=ic.inverse,rh=s.shape,ah=eh?uc?rh.x:rh.y+rh.height:uc?rh.x+rh.width:rh.y,ih=(uc?nc:0)*(eh?-1:1),oh=(uc?0:-nc)*(eh?-1:1),uh=uc?"x":"y",ch=getIndexRange(Ja,ah,uh),hh=ch.range,dh=hh[1]-hh[0],gh=void 0;if(dh>=1){if(dh>1&&!tc){var fh=getPointAtIndex(Ja,hh[0]);_.attr({x:fh[0]+ih,y:fh[1]+oh}),c&&(gh=ec.getRawValue(hh[0]))}else{var fh=ja.getPointOn(ah,uh);fh&&_.attr({x:fh[0]+ih,y:fh[1]+oh});var vh=ec.getRawValue(hh[0]),ph=ec.getRawValue(hh[1]);c&&(gh=interpolateRawValues(o,rc,vh,ph,ch.t))}u.lastFrameIndex=hh[0]}else{var yh=a===1||u.lastFrameIndex>0?hh[0]:0,fh=getPointAtIndex(Ja,yh);c&&(gh=ec.getRawValue(yh)),_.attr({x:fh[0]+ih,y:fh[1]+oh})}if(c){var xh=labelInner(_);typeof xh.setLabelText=="function"&&xh.setLabelText(gh)}}},r.prototype._doUpdateAnimation=function(a,s,o,u,c,p,d){var _=this._polyline,ja=this._polygon,Ja=a.hostModel,ec=lineAnimationDiff(this._data,a,this._stackedOnPoints,s,this._coordSys,o,this._valueOrigin),tc=ec.current,rc=ec.stackedOnCurrent,nc=ec.next,ic=ec.stackedOnNext;if(c&&(tc=turnPointsIntoStep(ec.current,o,c,d),rc=turnPointsIntoStep(ec.stackedOnCurrent,o,c,d),nc=turnPointsIntoStep(ec.next,o,c,d),ic=turnPointsIntoStep(ec.stackedOnNext,o,c,d)),getBoundingDiff(tc,nc)>3e3||ja&&getBoundingDiff(rc,ic)>3e3){_.stopAnimation(),_.setShape({points:nc}),ja&&(ja.stopAnimation(),ja.setShape({points:nc,stackedOnPoints:ic}));return}_.shape.__points=ec.current,_.shape.points=tc;var uc={shape:{points:nc}};ec.current!==tc&&(uc.shape.__points=ec.next),_.stopAnimation(),updateProps$1(_,uc,Ja),ja&&(ja.setShape({points:tc,stackedOnPoints:rc}),ja.stopAnimation(),updateProps$1(ja,{shape:{stackedOnPoints:ic}},Ja),_.shape.points!==ja.shape.points&&(ja.shape.points=_.shape.points));for(var eh=[],rh=ec.status,ah=0;ah<rh.length;ah++){var ih=rh[ah].cmd;if(ih==="="){var oh=a.getItemGraphicEl(rh[ah].idx1);oh&&eh.push({el:oh,ptIdx:ah})}}_.animators&&_.animators.length&&_.animators[0].during(function(){ja&&ja.dirtyShape();for(var uh=_.shape.__points,ch=0;ch<eh.length;ch++){var hh=eh[ch].el,dh=eh[ch].ptIdx*2;hh.x=uh[dh],hh.y=uh[dh+1],hh.markRedraw()}})},r.prototype.remove=function(a){var s=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(u,c){u.__temp&&(s.remove(u),o.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},r.type="line",r}(ChartView);function pointsLayout(n,r){return{seriesType:n,plan:createRenderPlanner(),reset:function(a){var s=a.getData(),o=a.coordinateSystem,u=a.pipelineContext,c=r||u.large;if(o){var p=map$1(o.dimensions,function(tc){return s.mapDimension(tc)}).slice(0,2),d=p.length,_=s.getCalculationInfo("stackResultDimension");isDimensionStacked$2(s,p[0])&&(p[0]=_),isDimensionStacked$2(s,p[1])&&(p[1]=_);var ja=s.getStore(),Ja=s.getDimensionIndex(p[0]),ec=s.getDimensionIndex(p[1]);return d&&{progress:function(tc,rc){for(var nc=tc.end-tc.start,ic=c&&createFloat32Array(nc*d),uc=[],eh=[],rh=tc.start,ah=0;rh<tc.end;rh++){var ih=void 0;if(d===1){var oh=ja.get(Ja,rh);ih=o.dataToPoint(oh,null,eh)}else uc[0]=ja.get(Ja,rh),uc[1]=ja.get(ec,rh),ih=o.dataToPoint(uc,null,eh);c?(ic[ah++]=ih[0],ic[ah++]=ih[1]):rc.setItemLayout(rh,ih.slice())}c&&rc.setLayout("points",ic)}}}}}}var samplers={average:function(n){for(var r=0,a=0,s=0;s<n.length;s++)isNaN(n[s])||(r+=n[s],a++);return a===0?NaN:r/a},sum:function(n){for(var r=0,a=0;a<n.length;a++)r+=n[a]||0;return r},max:function(n){for(var r=-1/0,a=0;a<n.length;a++)n[a]>r&&(r=n[a]);return isFinite(r)?r:NaN},min:function(n){for(var r=1/0,a=0;a<n.length;a++)n[a]<r&&(r=n[a]);return isFinite(r)?r:NaN},minmax:function(n){for(var r=-1/0,a=-1/0,s=0;s<n.length;s++){var o=n[s],u=Math.abs(o);u>r&&(r=u,a=o)}return isFinite(a)?a:NaN},nearest:function(n){return n[0]}},indexSampler=function(n){return Math.round(n.length/2)};function dataSample(n){return{seriesType:n,reset:function(r,a,s){var o=r.getData(),u=r.get("sampling"),c=r.coordinateSystem,p=o.count();if(p>10&&c.type==="cartesian2d"&&u){var d=c.getBaseAxis(),_=c.getOtherAxis(d),ja=d.getExtent(),Ja=s.getDevicePixelRatio(),ec=Math.abs(ja[1]-ja[0])*(Ja||1),tc=Math.round(p/ec);if(isFinite(tc)&&tc>1){u==="lttb"&&r.setData(o.lttbDownSample(o.mapDimension(_.dim),1/tc));var rc=void 0;isString(u)?rc=samplers[u]:isFunction(u)&&(rc=u),rc&&r.setData(o.downSample(o.mapDimension(_.dim),1/tc,rc,indexSampler))}}}}}function install$14(n){n.registerChartView(LineView$1),n.registerSeriesModel(LineSeriesModel),n.registerLayout(pointsLayout("line",!0)),n.registerVisual({seriesType:"line",reset:function(r){var a=r.getData(),s=r.getModel("lineStyle").getLineStyle();s&&!s.stroke&&(s.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",s)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(a,s,o){var u=this.coordinateSystem;if(u&&u.clampData){var c=u.clampData(a),p=u.dataToPoint(c);if(o)each$f(u.getAxes(),function(ec,tc){if(ec.type==="category"&&s!=null){var rc=ec.getTicksCoords(),nc=ec.getTickModel().get("alignWithLabel"),ic=c[tc],uc=s[tc]==="x1"||s[tc]==="y1";if(uc&&!nc&&(ic+=1),rc.length<2)return;if(rc.length===2){p[tc]=ec.toGlobalCoord(ec.getExtent()[uc?1:0]);return}for(var eh=void 0,rh=void 0,ah=1,ih=0;ih<rc.length;ih++){var oh=rc[ih].coord,uh=ih===rc.length-1?rc[ih-1].tickValue+ah:rc[ih].tickValue;if(uh===ic){rh=oh;break}else if(uh<ic)eh=oh;else if(eh!=null&&uh>ic){rh=(oh+eh)/2;break}ih===1&&(ah=uh-rc[0].tickValue)}rh==null&&(eh?eh&&(rh=rc[rc.length-1].coord):rh=rc[0].coord),p[tc]=ec.toGlobalCoord(rh)}});else{var d=this.getData(),_=d.getLayout("offset"),ja=d.getLayout("size"),Ja=u.getBaseAxis().isHorizontal()?0:1;p[Ja]+=_+ja/2}return p}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),s=this.get("largeThreshold");return s>a&&(a=s),a},r.prototype.brushSelector=function(a,s,o){return o.rect(s.getItemLayout(a))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(BaseBarSeriesModel),SausageShape=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),SausagePath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="sausage",s}return r.prototype.getDefaultShape=function(){return new SausageShape},r.prototype.buildPath=function(a,s){var o=s.cx,u=s.cy,c=Math.max(s.r0||0,0),p=Math.max(s.r,0),d=(p-c)*.5,_=c+d,ja=s.startAngle,Ja=s.endAngle,ec=s.clockwise,tc=Math.PI*2,rc=ec?Ja-ja<tc:ja-Ja<tc;rc||(ja=Ja-(ec?tc:-tc));var nc=Math.cos(ja),ic=Math.sin(ja),uc=Math.cos(Ja),eh=Math.sin(Ja);rc?(a.moveTo(nc*c+o,ic*c+u),a.arc(nc*_+o,ic*_+u,d,-Math.PI+ja,ja,!ec)):a.moveTo(nc*p+o,ic*p+u),a.arc(o,u,p,ja,Ja,!ec),a.arc(uc*_+o,eh*_+u,d,Ja-Math.PI*2,Ja-Math.PI,!ec),c!==0&&a.arc(o,u,c,Ja,ja,ec)},r}(Path);function createSectorCalculateTextPosition(n,r){r=r||{};var a=r.isRoundCap;return function(s,o,u){var c=o.position;if(!c||c instanceof Array)return calculateTextPosition(s,o,u);var p=n(c),d=o.distance!=null?o.distance:5,_=this.shape,ja=_.cx,Ja=_.cy,ec=_.r,tc=_.r0,rc=(ec+tc)/2,nc=_.startAngle,ic=_.endAngle,uc=(nc+ic)/2,eh=a?Math.abs(ec-tc)/2:0,rh=Math.cos,ah=Math.sin,ih=ja+ec*rh(nc),oh=Ja+ec*ah(nc),uh="left",ch="top";switch(p){case"startArc":ih=ja+(tc-d)*rh(uc),oh=Ja+(tc-d)*ah(uc),uh="center",ch="top";break;case"insideStartArc":ih=ja+(tc+d)*rh(uc),oh=Ja+(tc+d)*ah(uc),uh="center",ch="bottom";break;case"startAngle":ih=ja+rc*rh(nc)+adjustAngleDistanceX(nc,d+eh,!1),oh=Ja+rc*ah(nc)+adjustAngleDistanceY(nc,d+eh,!1),uh="right",ch="middle";break;case"insideStartAngle":ih=ja+rc*rh(nc)+adjustAngleDistanceX(nc,-d+eh,!1),oh=Ja+rc*ah(nc)+adjustAngleDistanceY(nc,-d+eh,!1),uh="left",ch="middle";break;case"middle":ih=ja+rc*rh(uc),oh=Ja+rc*ah(uc),uh="center",ch="middle";break;case"endArc":ih=ja+(ec+d)*rh(uc),oh=Ja+(ec+d)*ah(uc),uh="center",ch="bottom";break;case"insideEndArc":ih=ja+(ec-d)*rh(uc),oh=Ja+(ec-d)*ah(uc),uh="center",ch="top";break;case"endAngle":ih=ja+rc*rh(ic)+adjustAngleDistanceX(ic,d+eh,!0),oh=Ja+rc*ah(ic)+adjustAngleDistanceY(ic,d+eh,!0),uh="left",ch="middle";break;case"insideEndAngle":ih=ja+rc*rh(ic)+adjustAngleDistanceX(ic,-d+eh,!0),oh=Ja+rc*ah(ic)+adjustAngleDistanceY(ic,-d+eh,!0),uh="right",ch="middle";break;default:return calculateTextPosition(s,o,u)}return s=s||{},s.x=ih,s.y=oh,s.align=uh,s.verticalAlign=ch,s}}function setSectorTextRotation(n,r,a,s){if(isNumber(s)){n.setTextConfig({rotation:s});return}else if(isArray$1(r)){n.setTextConfig({rotation:0});return}var o=n.shape,u=o.clockwise?o.startAngle:o.endAngle,c=o.clockwise?o.endAngle:o.startAngle,p=(u+c)/2,d,_=a(r);switch(_){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":d=p;break;case"startAngle":case"insideStartAngle":d=u;break;case"endAngle":case"insideEndAngle":d=c;break;default:n.setTextConfig({rotation:0});return}var ja=Math.PI*1.5-d;_==="middle"&&ja>Math.PI/2&&ja<Math.PI*1.5&&(ja-=Math.PI),n.setTextConfig({rotation:ja})}function adjustAngleDistanceX(n,r,a){return r*Math.sin(n)*(a?-1:1)}function adjustAngleDistanceY(n,r,a){return r*Math.cos(n)*(a?1:-1)}function getSectorCornerRadius(n,r,a){var s=n.get("borderRadius");if(s==null)return a?{cornerRadius:0}:null;isArray$1(s)||(s=[s,s,s,s]);var o=Math.abs(r.r||0-r.r0||0);return{cornerRadius:map$1(s,function(u){return parsePercent$1(u,o)})}}var mathMax$5=Math.max,mathMin$5=Math.min;function getClipArea(n,r){var a=n.getArea&&n.getArea();if(isCoordinateSystemType(n,"cartesian2d")){var s=n.getBaseAxis();if(s.type!=="category"||!s.onBand){var o=r.getLayout("bandWidth");s.isHorizontal()?(a.x-=o,a.width+=o*2):(a.y-=o,a.height+=o*2)}}return a}var BarView=function(n){__extends(r,n);function r(){var a=n.call(this)||this;return a.type=r.type,a._isFirstFrame=!0,a}return r.prototype.render=function(a,s,o,u){this._model=a,this._removeOnRenderedListener(o),this._updateDrawMode(a);var c=a.get("coordinateSystem");(c==="cartesian2d"||c==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,s,o):this._renderNormal(a,s,o,u))},r.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},r.prototype.incrementalRender=function(a,s){this._progressiveEls=[],this._incrementalRenderLarge(a,s)},r.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},r.prototype._updateDrawMode=function(a){var s=a.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},r.prototype._renderNormal=function(a,s,o,u){var c=this.group,p=a.getData(),d=this._data,_=a.coordinateSystem,ja=_.getBaseAxis(),Ja;_.type==="cartesian2d"?Ja=ja.isHorizontal():_.type==="polar"&&(Ja=ja.dim==="angle");var ec=a.isAnimationEnabled()?a:null,tc=shouldRealtimeSort(a,_);tc&&this._enableRealtimeSort(tc,p,o);var rc=a.get("clip",!0)||tc,nc=getClipArea(_,p);c.removeClipPath();var ic=a.get("roundCap",!0),uc=a.get("showBackground",!0),eh=a.getModel("backgroundStyle"),rh=eh.get("borderRadius")||0,ah=[],ih=this._backgroundEls,oh=u&&u.isInitSort,uh=u&&u.type==="changeAxisOrder";function ch(gh){var fh=getLayout[_.type](p,gh),vh=createBackgroundEl(_,Ja,fh);return vh.useStyle(eh.getItemStyle()),_.type==="cartesian2d"?vh.setShape("r",rh):vh.setShape("cornerRadius",rh),ah[gh]=vh,vh}p.diff(d).add(function(gh){var fh=p.getItemModel(gh),vh=getLayout[_.type](p,gh,fh);if(uc&&ch(gh),!(!p.hasValue(gh)||!isValidLayout[_.type](vh))){var ph=!1;rc&&(ph=clip$1[_.type](nc,vh));var yh=elementCreator[_.type](a,p,gh,vh,Ja,ec,ja.model,!1,ic);tc&&(yh.forceLabelAnimation=!0),updateStyle(yh,p,gh,fh,vh,a,Ja,_.type==="polar"),oh?yh.attr({shape:vh}):tc?updateRealtimeAnimation(tc,ec,yh,vh,gh,Ja,!1,!1):initProps(yh,{shape:vh},a,gh),p.setItemGraphicEl(gh,yh),c.add(yh),yh.ignore=ph}}).update(function(gh,fh){var vh=p.getItemModel(gh),ph=getLayout[_.type](p,gh,vh);if(uc){var yh=void 0;ih.length===0?yh=ch(fh):(yh=ih[fh],yh.useStyle(eh.getItemStyle()),_.type==="cartesian2d"?yh.setShape("r",rh):yh.setShape("cornerRadius",rh),ah[gh]=yh);var xh=getLayout[_.type](p,gh),_h=createBackgroundShape(Ja,xh,_);updateProps$1(yh,{shape:_h},ec,gh)}var bh=d.getItemGraphicEl(fh);if(!p.hasValue(gh)||!isValidLayout[_.type](ph)){c.remove(bh);return}var Dh=!1;if(rc&&(Dh=clip$1[_.type](nc,ph),Dh&&c.remove(bh)),bh?saveOldStyle(bh):bh=elementCreator[_.type](a,p,gh,ph,Ja,ec,ja.model,!!bh,ic),tc&&(bh.forceLabelAnimation=!0),uh){var Th=bh.getTextContent();if(Th){var Ch=labelInner(Th);Ch.prevValue!=null&&(Ch.prevValue=Ch.value)}}else updateStyle(bh,p,gh,vh,ph,a,Ja,_.type==="polar");oh?bh.attr({shape:ph}):tc?updateRealtimeAnimation(tc,ec,bh,ph,gh,Ja,!0,uh):updateProps$1(bh,{shape:ph},a,gh,null),p.setItemGraphicEl(gh,bh),bh.ignore=Dh,c.add(bh)}).remove(function(gh){var fh=d.getItemGraphicEl(gh);fh&&removeElementWithFadeOut(fh,a,gh)}).execute();var hh=this._backgroundGroup||(this._backgroundGroup=new Group$3);hh.removeAll();for(var dh=0;dh<ah.length;++dh)hh.add(ah[dh]);c.add(hh),this._backgroundEls=ah,this._data=p},r.prototype._renderLarge=function(a,s,o){this._clear(),createLarge$1(a,this.group),this._updateLargeClip(a)},r.prototype._incrementalRenderLarge=function(a,s){this._removeBackground(),createLarge$1(s,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(a){var s=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a),o=this.group;s?o.setClipPath(s):o.removeClipPath()},r.prototype._enableRealtimeSort=function(a,s,o){var u=this;if(s.count()){var c=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(s,a,o),this._isFirstFrame=!1;else{var p=function(d){var _=s.getItemGraphicEl(d),ja=_&&_.shape;return ja&&Math.abs(c.isHorizontal()?ja.height:ja.width)||0};this._onRendered=function(){u._updateSortWithinSameData(s,p,c,o)},o.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(a,s,o){var u=[];return a.each(a.mapDimension(s.dim),function(c,p){var d=o(p);d=d??NaN,u.push({dataIndex:p,mappedValue:d,ordinalNumber:c})}),u.sort(function(c,p){return p.mappedValue-c.mappedValue}),{ordinalNumbers:map$1(u,function(c){return c.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(a,s,o){for(var u=o.scale,c=a.mapDimension(o.dim),p=Number.MAX_VALUE,d=0,_=u.getOrdinalMeta().categories.length;d<_;++d){var ja=a.rawIndexOf(c,u.getRawOrdinalNumber(d)),Ja=ja<0?Number.MIN_VALUE:s(a.indexOfRawIndex(ja));if(Ja>p)return!0;p=Ja}return!1},r.prototype._isOrderDifferentInView=function(a,s){for(var o=s.scale,u=o.getExtent(),c=Math.max(0,u[0]),p=Math.min(u[1],o.getOrdinalMeta().categories.length-1);c<=p;++c)if(a.ordinalNumbers[c]!==o.getRawOrdinalNumber(c))return!0},r.prototype._updateSortWithinSameData=function(a,s,o,u){if(this._isOrderChangedWithinSameData(a,s,o)){var c=this._dataSort(a,o,s);this._isOrderDifferentInView(c,o)&&(this._removeOnRenderedListener(u),u.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",axisId:o.index,sortInfo:c}))}},r.prototype._dispatchInitSort=function(a,s,o){var u=s.baseAxis,c=this._dataSort(a,u,function(p){return a.get(a.mapDimension(s.otherAxis.dim),p)});o.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",isInitSort:!0,axisId:u.index,sortInfo:c})},r.prototype.remove=function(a,s){this._clear(this._model),this._removeOnRenderedListener(s)},r.prototype.dispose=function(a,s){this._removeOnRenderedListener(s)},r.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(a){var s=this.group,o=this._data;a&&a.isAnimationEnabled()&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(u){removeElementWithFadeOut(u,a,getECData(u).dataIndex)})):s.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(ChartView),clip$1={cartesian2d:function(n,r){var a=r.width<0?-1:1,s=r.height<0?-1:1;a<0&&(r.x+=r.width,r.width=-r.width),s<0&&(r.y+=r.height,r.height=-r.height);var o=n.x+n.width,u=n.y+n.height,c=mathMax$5(r.x,n.x),p=mathMin$5(r.x+r.width,o),d=mathMax$5(r.y,n.y),_=mathMin$5(r.y+r.height,u),ja=p<c,Ja=_<d;return r.x=ja&&c>o?p:c,r.y=Ja&&d>u?_:d,r.width=ja?0:p-c,r.height=Ja?0:_-d,a<0&&(r.x+=r.width,r.width=-r.width),s<0&&(r.y+=r.height,r.height=-r.height),ja||Ja},polar:function(n,r){var a=r.r0<=r.r?1:-1;if(a<0){var s=r.r;r.r=r.r0,r.r0=s}var o=mathMin$5(r.r,n.r),u=mathMax$5(r.r0,n.r0);r.r=o,r.r0=u;var c=o-u<0;if(a<0){var s=r.r;r.r=r.r0,r.r0=s}return c}},elementCreator={cartesian2d:function(n,r,a,s,o,u,c,p,d){var _=new Rect$2({shape:extend$2({},s),z2:1});if(_.__dataIndex=a,_.name="item",u){var ja=_.shape,Ja=o?"height":"width";ja[Ja]=0}return _},polar:function(n,r,a,s,o,u,c,p,d){var _=!o&&d?SausagePath:Sector,ja=new _({shape:s,z2:1});ja.name="item";var Ja=createPolarPositionMapping(o);if(ja.calculateTextPosition=createSectorCalculateTextPosition(Ja,{isRoundCap:_===SausagePath}),u){var ec=ja.shape,tc=o?"r":"endAngle",rc={};ec[tc]=o?s.r0:s.startAngle,rc[tc]=s[tc],(p?updateProps$1:initProps)(ja,{shape:rc},u)}return ja}};function shouldRealtimeSort(n,r){var a=n.get("realtimeSort",!0),s=r.getBaseAxis();if(a&&s.type==="category"&&r.type==="cartesian2d")return{baseAxis:s,otherAxis:r.getOtherAxis(s)}}function updateRealtimeAnimation(n,r,a,s,o,u,c,p){var d,_;u?(_={x:s.x,width:s.width},d={y:s.y,height:s.height}):(_={y:s.y,height:s.height},d={x:s.x,width:s.width}),p||(c?updateProps$1:initProps)(a,{shape:d},r,o,null);var ja=r?n.baseAxis.model:null;(c?updateProps$1:initProps)(a,{shape:_},ja,o)}function checkPropertiesNotValid(n,r){for(var a=0;a<r.length;a++)if(!isFinite(n[r[a]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(n){return!checkPropertiesNotValid(n,rectPropties)},polar:function(n){return!checkPropertiesNotValid(n,polarPropties)}},getLayout={cartesian2d:function(n,r,a){var s=n.getItemLayout(r),o=a?getLineWidth(a,s):0,u=s.width>0?1:-1,c=s.height>0?1:-1;return{x:s.x+u*o/2,y:s.y+c*o/2,width:s.width-u*o,height:s.height-c*o}},polar:function(n,r,a){var s=n.getItemLayout(r);return{cx:s.cx,cy:s.cy,r0:s.r0,r:s.r,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}}};function isZeroOnPolar(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function createPolarPositionMapping(n){return function(r){var a=r?"Arc":"Angle";return function(s){switch(s){case"start":case"insideStart":case"end":case"insideEnd":return s+a;default:return s}}}(n)}function updateStyle(n,r,a,s,o,u,c,p){var d=r.getItemVisual(a,"style");if(p){if(!u.get("roundCap")){var ja=n.shape,Ja=getSectorCornerRadius(s.getModel("itemStyle"),ja,!0);extend$2(ja,Ja),n.setShape(ja)}}else{var _=s.get(["itemStyle","borderRadius"])||0;n.setShape("r",_)}n.useStyle(d);var ec=s.getShallow("cursor");ec&&n.attr("cursor",ec);var tc=p?c?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":c?o.height>=0?"bottom":"top":o.width>=0?"right":"left",rc=getLabelStatesModels(s);setLabelStyle(n,rc,{labelFetcher:u,labelDataIndex:a,defaultText:getDefaultLabel(u.getData(),a),inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:tc});var nc=n.getTextContent();if(p&&nc){var ic=s.get(["label","position"]);n.textConfig.inside=ic==="middle"?!0:null,setSectorTextRotation(n,ic==="outside"?tc:ic,createPolarPositionMapping(c),s.get(["label","rotate"]))}setLabelValueAnimation(nc,rc,u.getRawValue(a),function(eh){return getDefaultInterpolatedLabel(r,eh)});var uc=s.getModel(["emphasis"]);toggleHoverEmphasis(n,uc.get("focus"),uc.get("blurScope"),uc.get("disabled")),setStatesStylesFromModel(n,s),isZeroOnPolar(o)&&(n.style.fill="none",n.style.stroke="none",each$f(n.states,function(eh){eh.style&&(eh.style.fill=eh.style.stroke="none")}))}function getLineWidth(n,r){var a=n.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var s=n.get(["itemStyle","borderWidth"])||0,o=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),u=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(s,o,u)}var LagePathShape=function(){function n(){}return n}(),LargePath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="largeBar",s}return r.prototype.getDefaultShape=function(){return new LagePathShape},r.prototype.buildPath=function(a,s){for(var o=s.points,u=this.baseDimIdx,c=1-this.baseDimIdx,p=[],d=[],_=this.barWidth,ja=0;ja<o.length;ja+=3)d[u]=_,d[c]=o[ja+2],p[u]=o[ja+u],p[c]=o[ja+c],a.rect(p[0],p[1],d[0],d[1])},r}(Path);function createLarge$1(n,r,a,s){var o=n.getData(),u=o.getLayout("valueAxisHorizontal")?1:0,c=o.getLayout("largeDataIndices"),p=o.getLayout("size"),d=n.getModel("backgroundStyle"),_=o.getLayout("largeBackgroundPoints");if(_){var ja=new LargePath({shape:{points:_},incremental:!!s,silent:!0,z2:0});ja.baseDimIdx=u,ja.largeDataIndices=c,ja.barWidth=p,ja.useStyle(d.getItemStyle()),r.add(ja),a&&a.push(ja)}var Ja=new LargePath({shape:{points:o.getLayout("largePoints")},incremental:!!s,ignoreCoarsePointer:!0,z2:1});Ja.baseDimIdx=u,Ja.largeDataIndices=c,Ja.barWidth=p,r.add(Ja),Ja.useStyle(o.getVisual("style")),getECData(Ja).seriesIndex=n.seriesIndex,n.get("silent")||(Ja.on("mousedown",largePathUpdateDataIndex),Ja.on("mousemove",largePathUpdateDataIndex)),a&&a.push(Ja)}var largePathUpdateDataIndex=throttle(function(n){var r=this,a=largePathFindDataIndex(r,n.offsetX,n.offsetY);getECData(r).dataIndex=a>=0?a:null},30,!1);function largePathFindDataIndex(n,r,a){for(var s=n.baseDimIdx,o=1-s,u=n.shape.points,c=n.largeDataIndices,p=[],d=[],_=n.barWidth,ja=0,Ja=u.length/3;ja<Ja;ja++){var ec=ja*3;if(d[s]=_,d[o]=u[ec+2],p[s]=u[ec+s],p[o]=u[ec+o],d[o]<0&&(p[o]+=d[o],d[o]=-d[o]),r>=p[0]&&r<=p[0]+d[0]&&a>=p[1]&&a<=p[1]+d[1])return c[ja]}return-1}function createBackgroundShape(n,r,a){if(isCoordinateSystemType(a,"cartesian2d")){var s=r,o=a.getArea();return{x:n?s.x:o.x,y:n?o.y:s.y,width:n?s.width:o.width,height:n?o.height:s.height}}else{var o=a.getArea(),u=r;return{cx:o.cx,cy:o.cy,r0:n?o.r0:u.r0,r:n?o.r:u.r,startAngle:n?u.startAngle:0,endAngle:n?u.endAngle:Math.PI*2}}}function createBackgroundEl(n,r,a){var s=n.type==="polar"?Sector:Rect$2;return new s({shape:createBackgroundShape(r,a,n),silent:!0,z2:0})}function install$13(n){n.registerChartView(BarView),n.registerSeriesModel(BarSeriesModel),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,a){var s=r.componentType||"series";a.eachComponent({mainType:s,query:r},function(o){r.sortInfo&&o.axis.setCategorySortInfo(r.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(n,r){return getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function getBasicPieLayout(n,r){var a=getViewRect$5(n,r),s=n.get("center"),o=n.get("radius");isArray$1(o)||(o=[0,o]);var u=parsePercent(a.width,r.getWidth()),c=parsePercent(a.height,r.getHeight()),p=Math.min(u,c),d=parsePercent(o[0],p/2),_=parsePercent(o[1],p/2),ja,Ja,ec=n.coordinateSystem;if(ec){var tc=ec.dataToPoint(s);ja=tc[0]||0,Ja=tc[1]||0}else isArray$1(s)||(s=[s,s]),ja=parsePercent(s[0],u)+a.x,Ja=parsePercent(s[1],c)+a.y;return{cx:ja,cy:Ja,r0:d,r:_}}function pieLayout(n,r,a){r.eachSeriesByType(n,function(s){var o=s.getData(),u=o.mapDimension("value"),c=getViewRect$5(s,a),p=getBasicPieLayout(s,a),d=p.cx,_=p.cy,ja=p.r,Ja=p.r0,ec=-s.get("startAngle")*RADIAN$2,tc=s.get("endAngle"),rc=s.get("padAngle")*RADIAN$2;tc=tc==="auto"?ec-PI2:-tc*RADIAN$2;var nc=s.get("minAngle")*RADIAN$2,ic=nc+rc,uc=0;o.each(u,function(xh){!isNaN(xh)&&uc++});var eh=o.getSum(u),rh=Math.PI/(eh||uc)*2,ah=s.get("clockwise"),ih=s.get("roseType"),oh=s.get("stillShowZeroSum"),uh=o.getDataExtent(u);uh[0]=0;var ch=ah?1:-1,hh=[ec,tc],dh=ch*rc/2;normalizeArcAngles(hh,!ah),ec=hh[0],tc=hh[1];var gh=Math.abs(tc-ec),fh=gh,vh=0,ph=ec;if(o.setLayout({viewRect:c,r:ja}),o.each(u,function(xh,_h){var bh;if(isNaN(xh)){o.setItemLayout(_h,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:ah,cx:d,cy:_,r0:Ja,r:ih?NaN:ja});return}ih!=="area"?bh=eh===0&&oh?rh:xh*rh:bh=gh/uc,bh<ic?(bh=ic,fh-=ic):vh+=xh;var Dh=ph+ch*bh,Th=0,Ch=0;rc>bh?(Th=ph+ch*bh/2,Ch=Th):(Th=ph+dh,Ch=Dh-dh),o.setItemLayout(_h,{angle:bh,startAngle:Th,endAngle:Ch,clockwise:ah,cx:d,cy:_,r0:Ja,r:ih?linearMap$2(xh,uh,[Ja,ja]):ja}),ph=Dh}),fh<PI2&&uc)if(fh<=.001){var yh=gh/uc;o.each(u,function(xh,_h){if(!isNaN(xh)){var bh=o.getItemLayout(_h);bh.angle=yh;var Dh=0,Th=0;yh<rc?(Dh=ec+ch*(_h+1/2)*yh,Th=Dh):(Dh=ec+ch*_h*yh+dh,Th=ec+ch*(_h+1)*yh-dh),bh.startAngle=Dh,bh.endAngle=Th}})}else rh=fh/vh,ph=ec,o.each(u,function(xh,_h){if(!isNaN(xh)){var bh=o.getItemLayout(_h),Dh=bh.angle===ic?ic:xh*rh,Th=0,Ch=0;Dh<rc?(Th=ph+ch*Dh/2,Ch=Th):(Th=ph+dh,Ch=ph+ch*Dh-dh),bh.startAngle=Th,bh.endAngle=Ch,ph+=ch*Dh}})})}function dataFilter$1(n){return{seriesType:n,reset:function(r,a){var s=a.findComponents({mainType:"legend"});if(!(!s||!s.length)){var o=r.getData();o.filterSelf(function(u){for(var c=o.getName(u),p=0;p<s.length;p++)if(!s[p].isSelected(c))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(n,r,a,s,o,u,c,p,d,_){if(n.length<2)return;function ja(nc){for(var ic=nc.rB,uc=ic*ic,eh=0;eh<nc.list.length;eh++){var rh=nc.list[eh],ah=Math.abs(rh.label.y-a),ih=s+rh.len,oh=ih*ih,uh=Math.sqrt((1-Math.abs(ah*ah/uc))*oh),ch=r+(uh+rh.len2)*o,hh=ch-rh.label.x,dh=rh.targetTextWidth-hh*o;constrainTextWidth(rh,dh,!0),rh.label.x=ch}}function Ja(nc){for(var ic={list:[],maxY:0},uc={list:[],maxY:0},eh=0;eh<nc.length;eh++)if(nc[eh].labelAlignTo==="none"){var rh=nc[eh],ah=rh.label.y>a?uc:ic,ih=Math.abs(rh.label.y-a);if(ih>=ah.maxY){var oh=rh.label.x-r-rh.len2*o,uh=s+rh.len,ch=Math.abs(oh)<uh?Math.sqrt(ih*ih/(1-oh*oh/uh/uh)):uh;ah.rB=ch,ah.maxY=ih}ah.list.push(rh)}ja(ic),ja(uc)}for(var ec=n.length,tc=0;tc<ec;tc++)if(n[tc].position==="outer"&&n[tc].labelAlignTo==="labelLine"){var rc=n[tc].label.x-_;n[tc].linePoints[1][0]+=rc,n[tc].label.x=_}shiftLayoutOnY(n,d,d+c)&&Ja(n)}function avoidOverlap(n,r,a,s,o,u,c,p){for(var d=[],_=[],ja=Number.MAX_VALUE,Ja=-Number.MAX_VALUE,ec=0;ec<n.length;ec++){var tc=n[ec].label;isPositionCenter(n[ec])||(tc.x<r?(ja=Math.min(ja,tc.x),d.push(n[ec])):(Ja=Math.max(Ja,tc.x),_.push(n[ec])))}for(var ec=0;ec<n.length;ec++){var rc=n[ec];if(!isPositionCenter(rc)&&rc.linePoints){if(rc.labelStyleWidth!=null)continue;var tc=rc.label,nc=rc.linePoints,ic=void 0;rc.labelAlignTo==="edge"?tc.x<r?ic=nc[2][0]-rc.labelDistance-c-rc.edgeDistance:ic=c+o-rc.edgeDistance-nc[2][0]-rc.labelDistance:rc.labelAlignTo==="labelLine"?tc.x<r?ic=ja-c-rc.bleedMargin:ic=c+o-Ja-rc.bleedMargin:tc.x<r?ic=tc.x-c-rc.bleedMargin:ic=c+o-tc.x-rc.bleedMargin,rc.targetTextWidth=ic,constrainTextWidth(rc,ic)}}adjustSingleSide(_,r,a,s,1,o,u,c,p,Ja),adjustSingleSide(d,r,a,s,-1,o,u,c,p,ja);for(var ec=0;ec<n.length;ec++){var rc=n[ec];if(!isPositionCenter(rc)&&rc.linePoints){var tc=rc.label,nc=rc.linePoints,uc=rc.labelAlignTo==="edge",eh=tc.style.padding,rh=eh?eh[1]+eh[3]:0,ah=tc.style.backgroundColor?0:rh,ih=rc.rect.width+ah,oh=nc[1][0]-nc[2][0];uc?tc.x<r?nc[2][0]=c+rc.edgeDistance+ih+rc.labelDistance:nc[2][0]=c+o-rc.edgeDistance-ih-rc.labelDistance:(tc.x<r?nc[2][0]=tc.x+rc.labelDistance:nc[2][0]=tc.x-rc.labelDistance,nc[1][0]=nc[2][0]+oh),nc[1][1]=nc[2][1]=tc.y}}}function constrainTextWidth(n,r,a){if(a===void 0&&(a=!1),n.labelStyleWidth==null){var s=n.label,o=s.style,u=n.rect,c=o.backgroundColor,p=o.padding,d=p?p[1]+p[3]:0,_=o.overflow,ja=u.width+(c?0:d);if(r<ja||a){var Ja=u.height;if(_&&_.match("break")){s.setStyle("backgroundColor",null),s.setStyle("width",r-d);var ec=s.getBoundingRect();s.setStyle("width",Math.ceil(ec.width)),s.setStyle("backgroundColor",c)}else{var tc=r-d,rc=r<ja?tc:a?tc>n.unconstrainedWidth?null:tc:null;s.setStyle("width",rc)}var nc=s.getBoundingRect();u.width=nc.width;var ic=(s.style.margin||0)+2.1;u.height=nc.height+ic,u.y-=(u.height-Ja)/2}}}function isPositionCenter(n){return n.position==="center"}function pieLabelLayout(n){var r=n.getData(),a=[],s,o,u=!1,c=(n.get("minShowLabelAngle")||0)*RADIAN$1,p=r.getLayout("viewRect"),d=r.getLayout("r"),_=p.width,ja=p.x,Ja=p.y,ec=p.height;function tc(oh){oh.ignore=!0}function rc(oh){if(!oh.ignore)return!0;for(var uh in oh.states)if(oh.states[uh].ignore===!1)return!0;return!1}r.each(function(oh){var uh=r.getItemGraphicEl(oh),ch=uh.shape,hh=uh.getTextContent(),dh=uh.getTextGuideLine(),gh=r.getItemModel(oh),fh=gh.getModel("label"),vh=fh.get("position")||gh.get(["emphasis","label","position"]),ph=fh.get("distanceToLabelLine"),yh=fh.get("alignTo"),xh=parsePercent(fh.get("edgeDistance"),_),_h=fh.get("bleedMargin"),bh=gh.getModel("labelLine"),Dh=bh.get("length");Dh=parsePercent(Dh,_);var Th=bh.get("length2");if(Th=parsePercent(Th,_),Math.abs(ch.endAngle-ch.startAngle)<c){each$f(hh.states,tc),hh.ignore=!0,dh&&(each$f(dh.states,tc),dh.ignore=!0);return}if(rc(hh)){var Ch=(ch.startAngle+ch.endAngle)/2,wh=Math.cos(Ch),Nh=Math.sin(Ch),Rh,kh,Lh,Fh;s=ch.cx,o=ch.cy;var Wh=vh==="inside"||vh==="inner";if(vh==="center")Rh=ch.cx,kh=ch.cy,Fh="center";else{var Qh=(Wh?(ch.r+ch.r0)/2*wh:ch.r*wh)+s,jh=(Wh?(ch.r+ch.r0)/2*Nh:ch.r*Nh)+o;if(Rh=Qh+wh*3,kh=jh+Nh*3,!Wh){var Hh=Qh+wh*(Dh+d-ch.r),qh=jh+Nh*(Dh+d-ch.r),nd=Hh+(wh<0?-1:1)*Th,Sh=qh;yh==="edge"?Rh=wh<0?ja+xh:ja+_-xh:Rh=nd+(wh<0?-ph:ph),kh=Sh,Lh=[[Qh,jh],[Hh,qh],[nd,Sh]]}Fh=Wh?"center":yh==="edge"?wh>0?"right":"left":wh>0?"left":"right"}var Gh=Math.PI,zh=0,$h=fh.get("rotate");if(isNumber($h))zh=$h*(Gh/180);else if(vh==="center")zh=0;else if($h==="radial"||$h===!0){var Ph=wh<0?-Ch+Gh:-Ch;zh=Ph}else if($h==="tangential"&&vh!=="outside"&&vh!=="outer"){var Vh=Math.atan2(wh,Nh);Vh<0&&(Vh=Gh*2+Vh);var Xh=Nh>0;Xh&&(Vh=Gh+Vh),zh=Vh-Gh}if(u=!!zh,hh.x=Rh,hh.y=kh,hh.rotation=zh,hh.setStyle({verticalAlign:"middle"}),Wh){hh.setStyle({align:Fh});var Kh=hh.states.select;Kh&&(Kh.x+=hh.x,Kh.y+=hh.y)}else{var Zh=hh.getBoundingRect().clone();Zh.applyTransform(hh.getComputedTransform());var Uh=(hh.style.margin||0)+2.1;Zh.y-=Uh/2,Zh.height+=Uh,a.push({label:hh,labelLine:dh,position:vh,len:Dh,len2:Th,minTurnAngle:bh.get("minTurnAngle"),maxSurfaceAngle:bh.get("maxSurfaceAngle"),surfaceNormal:new Point(wh,Nh),linePoints:Lh,textAlign:Fh,labelDistance:ph,labelAlignTo:yh,edgeDistance:xh,bleedMargin:_h,rect:Zh,unconstrainedWidth:Zh.width,labelStyleWidth:hh.style.width})}uh.setTextConfig({inside:Wh})}}),!u&&n.get("avoidLabelOverlap")&&avoidOverlap(a,s,o,d,_,ec,ja,Ja);for(var nc=0;nc<a.length;nc++){var ic=a[nc],uc=ic.label,eh=ic.labelLine,rh=isNaN(uc.x)||isNaN(uc.y);if(uc){uc.setStyle({align:ic.textAlign}),rh&&(each$f(uc.states,tc),uc.ignore=!0);var ah=uc.states.select;ah&&(ah.x+=uc.x,ah.y+=uc.y)}if(eh){var ih=ic.linePoints;rh||!ih?(each$f(eh.states,tc),eh.ignore=!0):(limitTurnAngle(ih,ic.minTurnAngle),limitSurfaceAngle(ih,ic.surfaceNormal,ic.maxSurfaceAngle),eh.setShape({points:ih}),uc.__hostTarget.textGuideLineConfig={anchor:new Point(ih[0][0],ih[0][1])})}}}var PiePiece=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this)||this;u.z2=2;var c=new ZRText;return u.setTextContent(c),u.updateData(a,s,o,!0),u}return r.prototype.updateData=function(a,s,o,u){var c=this,p=a.hostModel,d=a.getItemModel(s),_=d.getModel("emphasis"),ja=a.getItemLayout(s),Ja=extend$2(getSectorCornerRadius(d.getModel("itemStyle"),ja,!0),ja);if(isNaN(Ja.startAngle)){c.setShape(Ja);return}if(u){c.setShape(Ja);var ec=p.getShallow("animationType");p.ecModel.ssr?(initProps(c,{scaleX:0,scaleY:0},p,{dataIndex:s,isFrom:!0}),c.originX=Ja.cx,c.originY=Ja.cy):ec==="scale"?(c.shape.r=ja.r0,initProps(c,{shape:{r:ja.r}},p,s)):o!=null?(c.setShape({startAngle:o,endAngle:o}),initProps(c,{shape:{startAngle:ja.startAngle,endAngle:ja.endAngle}},p,s)):(c.shape.endAngle=ja.startAngle,updateProps$1(c,{shape:{endAngle:ja.endAngle}},p,s))}else saveOldStyle(c),updateProps$1(c,{shape:Ja},p,s);c.useStyle(a.getItemVisual(s,"style")),setStatesStylesFromModel(c,d);var tc=(ja.startAngle+ja.endAngle)/2,rc=p.get("selectedOffset"),nc=Math.cos(tc)*rc,ic=Math.sin(tc)*rc,uc=d.getShallow("cursor");uc&&c.attr("cursor",uc),this._updateLabel(p,a,s),c.ensureState("emphasis").shape=extend$2({r:ja.r+(_.get("scale")&&_.get("scaleSize")||0)},getSectorCornerRadius(_.getModel("itemStyle"),ja)),extend$2(c.ensureState("select"),{x:nc,y:ic,shape:getSectorCornerRadius(d.getModel(["select","itemStyle"]),ja)}),extend$2(c.ensureState("blur"),{shape:getSectorCornerRadius(d.getModel(["blur","itemStyle"]),ja)});var eh=c.getTextGuideLine(),rh=c.getTextContent();eh&&extend$2(eh.ensureState("select"),{x:nc,y:ic}),extend$2(rh.ensureState("select"),{x:nc,y:ic}),toggleHoverEmphasis(this,_.get("focus"),_.get("blurScope"),_.get("disabled"))},r.prototype._updateLabel=function(a,s,o){var u=this,c=s.getItemModel(o),p=c.getModel("labelLine"),d=s.getItemVisual(o,"style"),_=d&&d.fill,ja=d&&d.opacity;setLabelStyle(u,getLabelStatesModels(c),{labelFetcher:s.hostModel,labelDataIndex:o,inheritColor:_,defaultOpacity:ja,defaultText:a.getFormattedLabel(o,"normal")||s.getName(o)});var Ja=u.getTextContent();u.setTextConfig({position:null,rotation:null}),Ja.attr({z2:10});var ec=a.get(["label","position"]);if(ec!=="outside"&&ec!=="outer")u.removeTextGuideLine();else{var tc=this.getTextGuideLine();tc||(tc=new Polyline$1,this.setTextGuideLine(tc)),setLabelLineStyle(this,getLabelLineStatesModels(c),{stroke:_,opacity:retrieve3(p.get(["lineStyle","opacity"]),ja,1)})}},r}(Sector),PieView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return r.prototype.render=function(a,s,o,u){var c=a.getData(),p=this._data,d=this.group,_;if(!p&&c.count()>0){for(var ja=c.getItemLayout(0),Ja=1;isNaN(ja&&ja.startAngle)&&Ja<c.count();++Ja)ja=c.getItemLayout(Ja);ja&&(_=ja.startAngle)}if(this._emptyCircleSector&&d.remove(this._emptyCircleSector),c.count()===0&&a.get("showEmptyCircle")){var ec=new Sector({shape:getBasicPieLayout(a,o)});ec.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=ec,d.add(ec)}c.diff(p).add(function(tc){var rc=new PiePiece(c,tc,_);c.setItemGraphicEl(tc,rc),d.add(rc)}).update(function(tc,rc){var nc=p.getItemGraphicEl(rc);nc.updateData(c,tc,_),nc.off("click"),d.add(nc),c.setItemGraphicEl(tc,nc)}).remove(function(tc){var rc=p.getItemGraphicEl(tc);removeElementWithFadeOut(rc,a,tc)}).execute(),pieLabelLayout(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=c)},r.prototype.dispose=function(){},r.prototype.containPoint=function(a,s){var o=s.getData(),u=o.getItemLayout(0);if(u){var c=a[0]-u.cx,p=a[1]-u.cy,d=Math.sqrt(c*c+p*p);return d<=u.r&&d>=u.r0}},r.type="pie",r}(ChartView);function createSeriesDataSimply(n,r,a){r=isArray$1(r)&&{coordDimensions:r}||extend$2({encodeDefine:n.getEncode()},r);var s=n.getSource(),o=prepareSeriesDataSchema(s,r).dimensions,u=new SeriesData(o,n);return u.initData(s,a),u}var LegendVisualProvider=function(){function n(r,a){this._getDataWithEncodedVisual=r,this._getRawData=a}return n.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},n.prototype.containName=function(r){var a=this._getRawData();return a.indexOfName(r)>=0},n.prototype.indexOfName=function(r){var a=this._getDataWithEncodedVisual();return a.indexOfName(r)},n.prototype.getItemVisual=function(r,a){var s=this._getDataWithEncodedVisual();return s.getItemVisual(r,a)},n}(),innerData=makeInner(),PieSeriesModel=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(a){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},r.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},r.prototype.getDataParams=function(a){var s=this.getData(),o=innerData(s),u=o.seats;if(!u){var c=[];s.each(s.mapDimension("value"),function(d){c.push(d)}),u=o.seats=getPercentSeats(c,s.hostModel.get("percentPrecision"))}var p=n.prototype.getDataParams.call(this,a);return p.percent=u[a]||0,p.$vars.push("percent"),p},r.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var s=a.labelLine,o=a.emphasis.labelLine;s.show=s.show&&a.label.show,o.show=o.show&&a.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(SeriesModel);function negativeDataFilter(n){return{seriesType:n,reset:function(r,a){var s=r.getData();s.filterSelf(function(o){var u=s.mapDimension("value"),c=s.get(u,o);return!(isNumber(c)&&!isNaN(c)&&c<0)})}}}function install$12(n){n.registerChartView(PieView),n.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",n.registerAction),n.registerLayout(curry$1(pieLayout,"pie")),n.registerProcessor(dataFilter$1("pie")),n.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.hasSymbolVisual=!0,a}return r.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},r.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},r.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},r.prototype.brushSelector=function(a,s,o){return o.point(s.getItemLayout(a))},r.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},r.type="series.scatter",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},r}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function n(){}return n}(),LargeSymbolPath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s._off=0,s.hoverDataIdx=-1,s}return r.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.buildPath=function(a,s){var o=s.points,u=s.size,c=this.symbolProxy,p=c.shape,d=a.getContext?a.getContext():a,_=d&&u[0]<BOOST_SIZE_THRESHOLD,ja=this.softClipShape,Ja;if(_){this._ctx=d;return}for(this._ctx=null,Ja=this._off;Ja<o.length;){var ec=o[Ja++],tc=o[Ja++];isNaN(ec)||isNaN(tc)||ja&&!ja.contain(ec,tc)||(p.x=ec-u[0]/2,p.y=tc-u[1]/2,p.width=u[0],p.height=u[1],c.buildPath(a,p,!0))}this.incremental&&(this._off=Ja,this.notClear=!0)},r.prototype.afterBrush=function(){var a=this.shape,s=a.points,o=a.size,u=this._ctx,c=this.softClipShape,p;if(u){for(p=this._off;p<s.length;){var d=s[p++],_=s[p++];isNaN(d)||isNaN(_)||c&&!c.contain(d,_)||u.fillRect(d-o[0]/2,_-o[1]/2,o[0],o[1])}this.incremental&&(this._off=p,this.notClear=!0)}},r.prototype.findDataIndex=function(a,s){for(var o=this.shape,u=o.points,c=o.size,p=Math.max(c[0],4),d=Math.max(c[1],4),_=u.length/2-1;_>=0;_--){var ja=_*2,Ja=u[ja]-p/2,ec=u[ja+1]-d/2;if(a>=Ja&&s>=ec&&a<=Ja+p&&s<=ec+d)return _}return-1},r.prototype.contain=function(a,s){var o=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(a=o[0],s=o[1],u.contain(a,s)){var c=this.hoverDataIdx=this.findDataIndex(a,s);return c>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var s=this.shape,o=s.points,u=s.size,c=u[0],p=u[1],d=1/0,_=1/0,ja=-1/0,Ja=-1/0,ec=0;ec<o.length;){var tc=o[ec++],rc=o[ec++];d=Math.min(tc,d),ja=Math.max(tc,ja),_=Math.min(rc,_),Ja=Math.max(rc,Ja)}a=this._rect=new BoundingRect(d-c/2,_-p/2,ja-d+c,Ja-_+p)}return a},r}(Path),LargeSymbolDraw=function(){function n(){this.group=new Group$3}return n.prototype.updateData=function(r,a){this._clear();var s=this._create();s.setShape({points:r.getLayout("points")}),this._setCommon(s,r,a)},n.prototype.updateLayout=function(r){var a=r.getLayout("points");this.group.eachChild(function(s){if(s.startIndex!=null){var o=(s.endIndex-s.startIndex)*2,u=s.startIndex*4*2;a=new Float32Array(a.buffer,u,o)}s.setShape("points",a),s.reset()})},n.prototype.incrementalPrepareUpdate=function(r){this._clear()},n.prototype.incrementalUpdate=function(r,a,s){var o=this._newAdded[0],u=a.getLayout("points"),c=o&&o.shape.points;if(c&&c.length<2e4){var p=c.length,d=new Float32Array(p+u.length);d.set(c),d.set(u,p),o.endIndex=r.end,o.setShape({points:d})}else{this._newAdded=[];var _=this._create();_.startIndex=r.start,_.endIndex=r.end,_.incremental=!0,_.setShape({points:u}),this._setCommon(_,a,s)}},n.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},n.prototype._create=function(){var r=new LargeSymbolPath({cursor:"default"});return r.ignoreCoarsePointer=!0,this.group.add(r),this._newAdded.push(r),r},n.prototype._setCommon=function(r,a,s){var o=a.hostModel;s=s||{};var u=a.getVisual("symbolSize");r.setShape("size",u instanceof Array?u:[u,u]),r.softClipShape=s.clipShape||null,r.symbolProxy=createSymbol$1(a.getVisual("symbol"),0,0,0,0),r.setColor=r.symbolProxy.setColor;var c=r.shape.size[0]<BOOST_SIZE_THRESHOLD;r.useStyle(o.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var p=a.getVisual("style"),d=p&&p.fill;d&&r.setColor(d);var _=getECData(r);_.seriesIndex=o.seriesIndex,r.on("mousemove",function(ja){_.dataIndex=null;var Ja=r.hoverDataIdx;Ja>=0&&(_.dataIndex=Ja+(r.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),ScatterView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u=a.getData(),c=this._updateSymbolDraw(u,a);c.updateData(u,{clipShape:this._getClipShape(a)}),this._finished=!0},r.prototype.incrementalPrepareRender=function(a,s,o){var u=a.getData(),c=this._updateSymbolDraw(u,a);c.incrementalPrepareUpdate(u),this._finished=!1},r.prototype.incrementalRender=function(a,s,o){this._symbolDraw.incrementalUpdate(a,s.getData(),{clipShape:this._getClipShape(s)}),this._finished=a.end===s.getData().count()},r.prototype.updateTransform=function(a,s,o){var u=a.getData();if(this.group.dirty(),!this._finished||u.count()>1e4)return{update:!0};var c=pointsLayout("").reset(a,s,o);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout(u)},r.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},r.prototype._getClipShape=function(a){if(a.get("clip",!0)){var s=a.coordinateSystem;return s&&s.getArea&&s.getArea(.1)}},r.prototype._updateSymbolDraw=function(a,s){var o=this._symbolDraw,u=s.pipelineContext,c=u.large;return(!o||c!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=c?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=c,this.group.removeAll()),this.group.add(o.group),o},r.prototype.remove=function(a,s){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},r.prototype.dispose=function(){},r.type="scatter",r}(ChartView),GridModel=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.type="grid",r.dependencies=["xAxis","yAxis"],r.layoutMode="box",r.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},r}(ComponentModel),CartesianAxisModel=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},r.type="cartesian2dAxis",r}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$2={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis$1=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$2),valueAxis$1=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$2),timeAxis$1=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis$1),logAxis$1=defaults({logBase:10},valueAxis$1);const axisDefault$1={category:categoryAxis$1,value:valueAxis$1,time:timeAxis$1,log:logAxis$1};var AXIS_TYPES$1={value:1,category:1,time:1,log:1};function axisModelCreator(n,r,a,s){each$f(AXIS_TYPES$1,function(o,u){var c=merge(merge({},axisDefault$1[u],!0),s,!0),p=function(d){__extends(_,d);function _(){var ja=d!==null&&d.apply(this,arguments)||this;return ja.type=r+"Axis."+u,ja}return _.prototype.mergeDefaultAndTheme=function(ja,Ja){var ec=fetchLayoutMode(this),tc=ec?getLayoutParams(ja):{},rc=Ja.getTheme();merge(ja,rc.get(u+"Axis")),merge(ja,this.getDefaultOption()),ja.type=getAxisType$1(ja),ec&&mergeLayoutParam(ja,tc,ec)},_.prototype.optionUpdated=function(){var ja=this.option;ja.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},_.prototype.getCategories=function(ja){var Ja=this.option;if(Ja.type==="category")return ja?Ja.data:this.__ordinalMeta.categories},_.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},_.type=r+"Axis."+u,_.defaultOption=c,_}(a);n.registerComponentModel(p)}),n.registerSubTypeDefaulter(r+"Axis",getAxisType$1)}function getAxisType$1(n){return n.type||(n.data?"category":"value")}var Cartesian=function(){function n(r){this.type="cartesian",this._dimList=[],this._axes={},this.name=r||""}return n.prototype.getAxis=function(r){return this._axes[r]},n.prototype.getAxes=function(){return map$1(this._dimList,function(r){return this._axes[r]},this)},n.prototype.getAxesByScale=function(r){return r=r.toLowerCase(),filter(this.getAxes(),function(a){return a.scale.type===r})},n.prototype.addAxis=function(r){var a=r.dim;this._axes[a]=r,this._dimList.push(a)},n}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(n){return n.type==="interval"||n.type==="time"}var Cartesian2D=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=cartesian2DDimensions,a}return r.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,s=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(a)||!canCalculateAffineTransform(s))){var o=a.getExtent(),u=s.getExtent(),c=this.dataToPoint([o[0],u[0]]),p=this.dataToPoint([o[1],u[1]]),d=o[1]-o[0],_=u[1]-u[0];if(!(!d||!_)){var ja=(p[0]-c[0])/d,Ja=(p[1]-c[1])/_,ec=c[0]-o[0]*ja,tc=c[1]-u[0]*Ja,rc=this._transform=[ja,0,0,Ja,ec,tc];this._invTransform=invert([],rc)}}},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},r.prototype.containPoint=function(a){var s=this.getAxis("x"),o=this.getAxis("y");return s.contain(s.toLocalCoord(a[0]))&&o.contain(o.toLocalCoord(a[1]))},r.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},r.prototype.containZone=function(a,s){var o=this.dataToPoint(a),u=this.dataToPoint(s),c=this.getArea(),p=new BoundingRect(o[0],o[1],u[0]-o[0],u[1]-o[1]);return c.intersect(p)},r.prototype.dataToPoint=function(a,s,o){o=o||[];var u=a[0],c=a[1];if(this._transform&&u!=null&&isFinite(u)&&c!=null&&isFinite(c))return applyTransform$1(o,a,this._transform);var p=this.getAxis("x"),d=this.getAxis("y");return o[0]=p.toGlobalCoord(p.dataToCoord(u,s)),o[1]=d.toGlobalCoord(d.dataToCoord(c,s)),o},r.prototype.clampData=function(a,s){var o=this.getAxis("x").scale,u=this.getAxis("y").scale,c=o.getExtent(),p=u.getExtent(),d=o.parse(a[0]),_=u.parse(a[1]);return s=s||[],s[0]=Math.min(Math.max(Math.min(c[0],c[1]),d),Math.max(c[0],c[1])),s[1]=Math.min(Math.max(Math.min(p[0],p[1]),_),Math.max(p[0],p[1])),s},r.prototype.pointToData=function(a,s){var o=[];if(this._invTransform)return applyTransform$1(o,a,this._invTransform);var u=this.getAxis("x"),c=this.getAxis("y");return o[0]=u.coordToData(u.toLocalCoord(a[0]),s),o[1]=c.coordToData(c.toLocalCoord(a[1]),s),o},r.prototype.getOtherAxis=function(a){return this.getAxis(a.dim==="x"?"y":"x")},r.prototype.getArea=function(a){a=a||0;var s=this.getAxis("x").getGlobalExtent(),o=this.getAxis("y").getGlobalExtent(),u=Math.min(s[0],s[1])-a,c=Math.min(o[0],o[1])-a,p=Math.max(s[0],s[1])-u+a,d=Math.max(o[0],o[1])-c+a;return new BoundingRect(u,c,p,d)},r}(Cartesian),Axis2D=function(n){__extends(r,n);function r(a,s,o,u,c){var p=n.call(this,a,s,o)||this;return p.index=0,p.type=u||"value",p.position=c||"bottom",p}return r.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},r.prototype.getGlobalExtent=function(a){var s=this.getExtent();return s[0]=this.toGlobalCoord(s[0]),s[1]=this.toGlobalCoord(s[1]),a&&s[0]>s[1]&&s.reverse(),s},r.prototype.pointToData=function(a,s){return this.coordToData(this.toLocalCoord(a[this.dim==="x"?0:1]),s)},r.prototype.setCategorySortInfo=function(a){if(this.type!=="category")return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},r}(Axis);function layout$2(n,r,a){a=a||{};var s=n.coordinateSystem,o=r.axis,u={},c=o.getAxesOnZeroOf()[0],p=o.position,d=c?"onZero":p,_=o.dim,ja=s.getRect(),Ja=[ja.x,ja.x+ja.width,ja.y,ja.y+ja.height],ec={left:0,right:1,top:0,bottom:1,onZero:2},tc=r.get("offset")||0,rc=_==="x"?[Ja[2]-tc,Ja[3]+tc]:[Ja[0]-tc,Ja[1]+tc];if(c){var nc=c.toGlobalCoord(c.dataToCoord(0));rc[ec.onZero]=Math.max(Math.min(nc,rc[1]),rc[0])}u.position=[_==="y"?rc[ec[d]]:Ja[0],_==="x"?rc[ec[d]]:Ja[3]],u.rotation=Math.PI/2*(_==="x"?0:1);var ic={top:-1,bottom:1,left:-1,right:1};u.labelDirection=u.tickDirection=u.nameDirection=ic[p],u.labelOffset=c?rc[ec[p]]-rc[ec.onZero]:0,r.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),retrieve$1(a.labelInside,r.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var uc=r.get(["axisLabel","rotate"]);return u.labelRotate=d==="top"?-uc:uc,u.z2=1,u}function isCartesian2DSeries(n){return n.get("coordinateSystem")==="cartesian2d"}function findAxisModels(n){var r={xAxisModel:null,yAxisModel:null};return each$f(r,function(a,s){var o=s.replace(/Model$/,""),u=n.getReferringComponents(o,SINGLE_REFERRING).models[0];r[s]=u}),r}var mathLog=Math.log;function alignScaleTicks(n,r,a){var s=IntervalScale.prototype,o=s.getTicks.call(a),u=s.getTicks.call(a,!0),c=o.length-1,p=s.getInterval.call(a),d=getScaleExtent(n,r),_=d.extent,ja=d.fixMin,Ja=d.fixMax;if(n.type==="log"){var ec=mathLog(n.base);_=[mathLog(_[0])/ec,mathLog(_[1])/ec]}n.setExtent(_[0],_[1]),n.calcNiceExtent({splitNumber:c,fixMin:ja,fixMax:Ja});var tc=s.getExtent.call(n);ja&&(_[0]=tc[0]),Ja&&(_[1]=tc[1]);var rc=s.getInterval.call(n),nc=_[0],ic=_[1];if(ja&&Ja)rc=(ic-nc)/c;else if(ja)for(ic=_[0]+rc*c;ic<_[1]&&isFinite(ic)&&isFinite(_[1]);)rc=increaseInterval(rc),ic=_[0]+rc*c;else if(Ja)for(nc=_[1]-rc*c;nc>_[0]&&isFinite(nc)&&isFinite(_[0]);)rc=increaseInterval(rc),nc=_[1]-rc*c;else{var uc=n.getTicks().length-1;uc>c&&(rc=increaseInterval(rc));var eh=rc*c;ic=Math.ceil(_[1]/rc)*rc,nc=round$3(ic-eh),nc<0&&_[0]>=0?(nc=0,ic=round$3(eh)):ic>0&&_[1]<=0&&(ic=0,nc=-round$3(eh))}var rh=(o[0].value-u[0].value)/p,ah=(o[c].value-u[c].value)/p;s.setExtent.call(n,nc+rc*rh,ic+rc*ah),s.setInterval.call(n,rc),(rh||ah)&&s.setNiceExtent.call(n,nc+rc,ic-rc)}var Grid=function(){function n(r,a,s){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(r,a,s),this.model=r}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(r,a){var s=this._axesMap;this._updateScale(r,this.model);function o(c){var p,d=keys(c),_=d.length;if(_){for(var ja=[],Ja=_-1;Ja>=0;Ja--){var ec=+d[Ja],tc=c[ec],rc=tc.model,nc=tc.scale;isIntervalOrLogScale(nc)&&rc.get("alignTicks")&&rc.get("interval")==null?ja.push(tc):(niceScaleExtent(nc,rc),isIntervalOrLogScale(nc)&&(p=tc))}ja.length&&(p||(p=ja.pop(),niceScaleExtent(p.scale,p.model)),each$f(ja,function(ic){alignScaleTicks(ic.scale,ic.model,p.scale)}))}}o(s.x),o(s.y);var u={};each$f(s.x,function(c){fixAxisOnZero(s,"y",c,u)}),each$f(s.y,function(c){fixAxisOnZero(s,"x",c,u)}),this.resize(this.model,a)},n.prototype.resize=function(r,a,s){var o=r.getBoxLayoutParams(),u=!s&&r.get("containLabel"),c=getLayoutRect(o,{width:a.getWidth(),height:a.getHeight()});this._rect=c;var p=this._axesList;d(),u&&(each$f(p,function(_){if(!_.model.get(["axisLabel","inside"])){var ja=estimateLabelUnionRect(_);if(ja){var Ja=_.isHorizontal()?"height":"width",ec=_.model.get(["axisLabel","margin"]);c[Ja]-=ja[Ja]+ec,_.position==="top"?c.y+=ja.height+ec:_.position==="left"&&(c.x+=ja.width+ec)}}}),d()),each$f(this._coordsList,function(_){_.calcAffineTransform()});function d(){each$f(p,function(_){var ja=_.isHorizontal(),Ja=ja?[0,c.width]:[0,c.height],ec=_.inverse?1:0;_.setExtent(Ja[ec],Ja[1-ec]),updateAxisTransform(_,ja?c.x:c.y)})}},n.prototype.getAxis=function(r,a){var s=this._axesMap[r];if(s!=null)return s[a||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(r,a){if(r!=null&&a!=null){var s="x"+r+"y"+a;return this._coordsMap[s]}isObject$3(r)&&(a=r.yAxisIndex,r=r.xAxisIndex);for(var o=0,u=this._coordsList;o<u.length;o++)if(u[o].getAxis("x").index===r||u[o].getAxis("y").index===a)return u[o]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(r,a,s){var o=this._findConvertTarget(a);return o.cartesian?o.cartesian.dataToPoint(s):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(s)):null},n.prototype.convertFromPixel=function(r,a,s){var o=this._findConvertTarget(a);return o.cartesian?o.cartesian.pointToData(s):o.axis?o.axis.coordToData(o.axis.toLocalCoord(s)):null},n.prototype._findConvertTarget=function(r){var a=r.seriesModel,s=r.xAxisModel||a&&a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],o=r.yAxisModel||a&&a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],u=r.gridModel,c=this._coordsList,p,d;if(a)p=a.coordinateSystem,indexOf(c,p)<0&&(p=null);else if(s&&o)p=this.getCartesian(s.componentIndex,o.componentIndex);else if(s)d=this.getAxis("x",s.componentIndex);else if(o)d=this.getAxis("y",o.componentIndex);else if(u){var _=u.coordinateSystem;_===this&&(p=this._coordsList[0])}return{cartesian:p,axis:d}},n.prototype.containPoint=function(r){var a=this._coordsList[0];if(a)return a.containPoint(r)},n.prototype._initCartesian=function(r,a,s){var o=this,u=this,c={left:!1,right:!1,top:!1,bottom:!1},p={x:{},y:{}},d={x:0,y:0};if(a.eachComponent("xAxis",_("x"),this),a.eachComponent("yAxis",_("y"),this),!d.x||!d.y){this._axesMap={},this._axesList=[];return}this._axesMap=p,each$f(p.x,function(ja,Ja){each$f(p.y,function(ec,tc){var rc="x"+Ja+"y"+tc,nc=new Cartesian2D(rc);nc.master=o,nc.model=r,o._coordsMap[rc]=nc,o._coordsList.push(nc),nc.addAxis(ja),nc.addAxis(ec)})});function _(ja){return function(Ja,ec){if(isAxisUsedInTheGrid(Ja,r)){var tc=Ja.get("position");ja==="x"?tc!=="top"&&tc!=="bottom"&&(tc=c.bottom?"top":"bottom"):tc!=="left"&&tc!=="right"&&(tc=c.left?"right":"left"),c[tc]=!0;var rc=new Axis2D(ja,createScaleByModel$1(Ja),[0,0],Ja.get("type"),tc),nc=rc.type==="category";rc.onBand=nc&&Ja.get("boundaryGap"),rc.inverse=Ja.get("inverse"),Ja.axis=rc,rc.model=Ja,rc.grid=u,rc.index=ec,u._axesList.push(rc),p[ja][ec]=rc,d[ja]++}}}},n.prototype._updateScale=function(r,a){each$f(this._axesList,function(o){if(o.scale.setExtent(1/0,-1/0),o.type==="category"){var u=o.model.get("categorySortInfo");o.scale.setSortInfo(u)}}),r.eachSeries(function(o){if(isCartesian2DSeries(o)){var u=findAxisModels(o),c=u.xAxisModel,p=u.yAxisModel;if(!isAxisUsedInTheGrid(c,a)||!isAxisUsedInTheGrid(p,a))return;var d=this.getCartesian(c.componentIndex,p.componentIndex),_=o.getData(),ja=d.getAxis("x"),Ja=d.getAxis("y");s(_,ja),s(_,Ja)}},this);function s(o,u){each$f(getDataDimensionsOnAxis(o,u.dim),function(c){u.scale.unionExtentFromData(o,c)})}},n.prototype.getTooltipAxes=function(r){var a=[],s=[];return each$f(this.getCartesians(),function(o){var u=r!=null&&r!=="auto"?o.getAxis(r):o.getBaseAxis(),c=o.getOtherAxis(u);indexOf(a,u)<0&&a.push(u),indexOf(s,c)<0&&s.push(c)}),{baseAxes:a,otherAxes:s}},n.create=function(r,a){var s=[];return r.eachComponent("grid",function(o,u){var c=new n(o,r,a);c.name="grid_"+u,c.resize(o,a,!0),o.coordinateSystem=c,s.push(c)}),r.eachSeries(function(o){if(isCartesian2DSeries(o)){var u=findAxisModels(o),c=u.xAxisModel,p=u.yAxisModel,d=c.getCoordSysModel(),_=d.coordinateSystem;o.coordinateSystem=_.getCartesian(c.componentIndex,p.componentIndex)}}),s},n.dimensions=cartesian2DDimensions,n}();function isAxisUsedInTheGrid(n,r){return n.getCoordSysModel()===r}function fixAxisOnZero(n,r,a,s){a.getAxesOnZeroOf=function(){return u?[u]:[]};var o=n[r],u,c=a.model,p=c.get(["axisLine","onZero"]),d=c.get(["axisLine","onZeroAxisIndex"]);if(!p)return;if(d!=null)canOnZeroToAxis(o[d])&&(u=o[d]);else for(var _ in o)if(o.hasOwnProperty(_)&&canOnZeroToAxis(o[_])&&!s[ja(o[_])]){u=o[_];break}u&&(s[ja(u)]=!0);function ja(Ja){return Ja.dim+"_"+Ja.index}}function canOnZeroToAxis(n){return n&&n.type!=="category"&&n.type!=="time"&&ifAxisCrossZero(n)}function updateAxisTransform(n,r){var a=n.getExtent(),s=a[0]+a[1];n.toGlobalCoord=n.dim==="x"?function(o){return o+r}:function(o){return s-o+r},n.toLocalCoord=n.dim==="x"?function(o){return o-r}:function(o){return s-o+r}}var PI$5=Math.PI,AxisBuilder=function(){function n(r,a){this.group=new Group$3,this.opt=a,this.axisModel=r,defaults(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var s=new Group$3({x:a.position[0],y:a.position[1],rotation:a.rotation});s.updateTransform(),this._transformGroup=s}return n.prototype.hasBuilder=function(r){return!!builders[r]},n.prototype.add=function(r){builders[r](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(r,a,s){var o=remRadian(a-r),u,c;return isRadianAroundZero(o)?(c=s>0?"top":"bottom",u="center"):isRadianAroundZero(o-PI$5)?(c=s>0?"bottom":"top",u="center"):(c="middle",o>0&&o<PI$5?u=s>0?"right":"left":u=s>0?"left":"right"),{rotation:o,textAlign:u,textVerticalAlign:c}},n.makeAxisEventDataBase=function(r){var a={componentType:r.mainType,componentIndex:r.componentIndex};return a[r.mainType+"Index"]=r.componentIndex,a},n.isLabelSilent=function(r){var a=r.get("tooltip");return r.get("silent")||!(r.get("triggerEvent")||a&&a.show)},n}(),builders={axisLine:function(n,r,a,s){var o=r.get(["axisLine","show"]);if(o==="auto"&&n.handleAutoShown&&(o=n.handleAutoShown("axisLine")),!!o){var u=r.axis.getExtent(),c=s.transform,p=[u[0],0],d=[u[1],0],_=p[0]>d[0];c&&(applyTransform$1(p,p,c),applyTransform$1(d,d,c));var ja=extend$2({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),Ja=new Line$2({shape:{x1:p[0],y1:p[1],x2:d[0],y2:d[1]},style:ja,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(Ja.shape,Ja.style.lineWidth),Ja.anid="line",a.add(Ja);var ec=r.get(["axisLine","symbol"]);if(ec!=null){var tc=r.get(["axisLine","symbolSize"]);isString(ec)&&(ec=[ec,ec]),(isString(tc)||isNumber(tc))&&(tc=[tc,tc]);var rc=normalizeSymbolOffset(r.get(["axisLine","symbolOffset"])||0,tc),nc=tc[0],ic=tc[1];each$f([{rotate:n.rotation+Math.PI/2,offset:rc[0],r:0},{rotate:n.rotation-Math.PI/2,offset:rc[1],r:Math.sqrt((p[0]-d[0])*(p[0]-d[0])+(p[1]-d[1])*(p[1]-d[1]))}],function(uc,eh){if(ec[eh]!=="none"&&ec[eh]!=null){var rh=createSymbol$1(ec[eh],-nc/2,-ic/2,nc,ic,ja.stroke,!0),ah=uc.r+uc.offset,ih=_?d:p;rh.attr({rotation:uc.rotate,x:ih[0]+ah*Math.cos(n.rotation),y:ih[1]-ah*Math.sin(n.rotation),silent:!0,z2:11}),a.add(rh)}})}}},axisTickLabel:function(n,r,a,s){var o=buildAxisMajorTicks(a,s,r,n),u=buildAxisLabel(a,s,r,n);if(fixMinMaxLabelShow(r,u,o),buildAxisMinorTicks(a,s,r,n.tickDirection),r.get(["axisLabel","hideOverlap"])){var c=prepareLayoutList(map$1(u,function(p){return{label:p,priority:p.z2,defaultAttr:{ignore:p.ignore}}}));hideOverlap(c)}},axisName:function(n,r,a,s){var o=retrieve$1(n.axisName,r.get("name"));if(o){var u=r.get("nameLocation"),c=n.nameDirection,p=r.getModel("nameTextStyle"),d=r.get("nameGap")||0,_=r.axis.getExtent(),ja=_[0]>_[1]?-1:1,Ja=[u==="start"?_[0]-ja*d:u==="end"?_[1]+ja*d:(_[0]+_[1])/2,isNameLocationCenter(u)?n.labelOffset+c*d:0],ec,tc=r.get("nameRotate");tc!=null&&(tc=tc*PI$5/180);var rc;isNameLocationCenter(u)?ec=AxisBuilder.innerTextLayout(n.rotation,tc??n.rotation,c):(ec=endTextLayout(n.rotation,u,tc||0,_),rc=n.axisNameAvailableWidth,rc!=null&&(rc=Math.abs(rc/Math.sin(ec.rotation)),!isFinite(rc)&&(rc=null)));var nc=p.getFont(),ic=r.get("nameTruncate",!0)||{},uc=ic.ellipsis,eh=retrieve$1(n.nameTruncateMaxWidth,ic.maxWidth,rc),rh=new ZRText({x:Ja[0],y:Ja[1],rotation:ec.rotation,silent:AxisBuilder.isLabelSilent(r),style:createTextStyle(p,{text:o,font:nc,overflow:"truncate",width:eh,ellipsis:uc,fill:p.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:p.get("align")||ec.textAlign,verticalAlign:p.get("verticalAlign")||ec.textVerticalAlign}),z2:1});if(setTooltipConfig({el:rh,componentModel:r,itemName:o}),rh.__fullText=o,rh.anid="name",r.get("triggerEvent")){var ah=AxisBuilder.makeAxisEventDataBase(r);ah.targetType="axisName",ah.name=o,getECData(rh).eventData=ah}s.add(rh),rh.updateTransform(),a.add(rh),rh.decomposeTransform()}}};function endTextLayout(n,r,a,s){var o=remRadian(a-n),u,c,p=s[0]>s[1],d=r==="start"&&!p||r!=="start"&&p;return isRadianAroundZero(o-PI$5/2)?(c=d?"bottom":"top",u="center"):isRadianAroundZero(o-PI$5*1.5)?(c=d?"top":"bottom",u="center"):(c="middle",o<PI$5*1.5&&o>PI$5/2?u=d?"left":"right":u=d?"right":"left"),{rotation:o,textAlign:u,textVerticalAlign:c}}function fixMinMaxLabelShow(n,r,a){if(!shouldShowAllLabels(n.axis)){var s=n.get(["axisLabel","showMinLabel"]),o=n.get(["axisLabel","showMaxLabel"]);r=r||[],a=a||[];var u=r[0],c=r[1],p=r[r.length-1],d=r[r.length-2],_=a[0],ja=a[1],Ja=a[a.length-1],ec=a[a.length-2];s===!1?(ignoreEl(u),ignoreEl(_)):isTwoLabelOverlapped(u,c)&&(s?(ignoreEl(c),ignoreEl(ja)):(ignoreEl(u),ignoreEl(_))),o===!1?(ignoreEl(p),ignoreEl(Ja)):isTwoLabelOverlapped(d,p)&&(o?(ignoreEl(d),ignoreEl(ec)):(ignoreEl(p),ignoreEl(Ja)))}}function ignoreEl(n){n&&(n.ignore=!0)}function isTwoLabelOverlapped(n,r){var a=n&&n.getBoundingRect().clone(),s=r&&r.getBoundingRect().clone();if(!(!a||!s)){var o=identity$1([]);return rotate(o,o,-n.rotation),a.applyTransform(mul([],o,n.getLocalTransform())),s.applyTransform(mul([],o,r.getLocalTransform())),a.intersect(s)}}function isNameLocationCenter(n){return n==="middle"||n==="center"}function createTicks(n,r,a,s,o){for(var u=[],c=[],p=[],d=0;d<n.length;d++){var _=n[d].coord;c[0]=_,c[1]=0,p[0]=_,p[1]=a,r&&(applyTransform$1(c,c,r),applyTransform$1(p,p,r));var ja=new Line$2({shape:{x1:c[0],y1:c[1],x2:p[0],y2:p[1]},style:s,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(ja.shape,ja.style.lineWidth),ja.anid=o+"_"+n[d].tickValue,u.push(ja)}return u}function buildAxisMajorTicks(n,r,a,s){var o=a.axis,u=a.getModel("axisTick"),c=u.get("show");if(c==="auto"&&s.handleAutoShown&&(c=s.handleAutoShown("axisTick")),!(!c||o.scale.isBlank())){for(var p=u.getModel("lineStyle"),d=s.tickDirection*u.get("length"),_=o.getTicksCoords(),ja=createTicks(_,r.transform,d,defaults(p.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),Ja=0;Ja<ja.length;Ja++)n.add(ja[Ja]);return ja}}function buildAxisMinorTicks(n,r,a,s){var o=a.axis,u=a.getModel("minorTick");if(!(!u.get("show")||o.scale.isBlank())){var c=o.getMinorTicksCoords();if(c.length)for(var p=u.getModel("lineStyle"),d=s*u.get("length"),_=defaults(p.getLineStyle(),defaults(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),ja=0;ja<c.length;ja++)for(var Ja=createTicks(c[ja],r.transform,d,_,"minorticks_"+ja),ec=0;ec<Ja.length;ec++)n.add(Ja[ec])}}function buildAxisLabel(n,r,a,s){var o=a.axis,u=retrieve$1(s.axisLabelShow,a.get(["axisLabel","show"]));if(!(!u||o.scale.isBlank())){var c=a.getModel("axisLabel"),p=c.get("margin"),d=o.getViewLabels(),_=(retrieve$1(s.labelRotate,c.get("rotate"))||0)*PI$5/180,ja=AxisBuilder.innerTextLayout(s.rotation,_,s.labelDirection),Ja=a.getCategories&&a.getCategories(!0),ec=[],tc=AxisBuilder.isLabelSilent(a),rc=a.get("triggerEvent");return each$f(d,function(nc,ic){var uc=o.scale.type==="ordinal"?o.scale.getRawOrdinalNumber(nc.tickValue):nc.tickValue,eh=nc.formattedLabel,rh=nc.rawLabel,ah=c;if(Ja&&Ja[uc]){var ih=Ja[uc];isObject$3(ih)&&ih.textStyle&&(ah=new Model(ih.textStyle,c,a.ecModel))}var oh=ah.getTextColor()||a.get(["axisLine","lineStyle","color"]),uh=o.dataToCoord(uc),ch=ah.getShallow("align",!0)||ja.textAlign,hh=retrieve2(ah.getShallow("alignMinLabel",!0),ch),dh=retrieve2(ah.getShallow("alignMaxLabel",!0),ch),gh=ah.getShallow("verticalAlign",!0)||ah.getShallow("baseline",!0)||ja.textVerticalAlign,fh=retrieve2(ah.getShallow("verticalAlignMinLabel",!0),gh),vh=retrieve2(ah.getShallow("verticalAlignMaxLabel",!0),gh),ph=new ZRText({x:uh,y:s.labelOffset+s.labelDirection*p,rotation:ja.rotation,silent:tc,z2:10+(nc.level||0),style:createTextStyle(ah,{text:eh,align:ic===0?hh:ic===d.length-1?dh:ch,verticalAlign:ic===0?fh:ic===d.length-1?vh:gh,fill:isFunction(oh)?oh(o.type==="category"?rh:o.type==="value"?uc+"":uc,ic):oh})});if(ph.anid="label_"+uc,rc){var yh=AxisBuilder.makeAxisEventDataBase(a);yh.targetType="axisLabel",yh.value=rh,yh.tickIndex=ic,o.type==="category"&&(yh.dataIndex=uc),getECData(ph).eventData=yh}r.add(ph),ph.updateTransform(),ec.push(ph),n.add(ph),ph.decomposeTransform()}),ec}}function collect(n,r){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(a,n,r),a.seriesInvolved&&collectSeriesInfo(a,n),a}function collectAxesInfo(n,r,a){var s=r.getComponent("tooltip"),o=r.getComponent("axisPointer"),u=o.get("link",!0)||[],c=[];each$f(a.getCoordinateSystems(),function(p){if(!p.axisPointerEnabled)return;var d=makeKey(p.model),_=n.coordSysAxesInfo[d]={};n.coordSysMap[d]=p;var ja=p.model,Ja=ja.getModel("tooltip",s);if(each$f(p.getAxes(),curry$1(nc,!1,null)),p.getTooltipAxes&&s&&Ja.get("show")){var ec=Ja.get("trigger")==="axis",tc=Ja.get(["axisPointer","type"])==="cross",rc=p.getTooltipAxes(Ja.get(["axisPointer","axis"]));(ec||tc)&&each$f(rc.baseAxes,curry$1(nc,tc?"cross":!0,ec)),tc&&each$f(rc.otherAxes,curry$1(nc,"cross",!1))}function nc(ic,uc,eh){var rh=eh.model.getModel("axisPointer",o),ah=rh.get("show");if(!(!ah||ah==="auto"&&!ic&&!isHandleTrigger(rh))){uc==null&&(uc=rh.get("triggerTooltip")),rh=ic?makeAxisPointerModel(eh,Ja,o,r,ic,uc):rh;var ih=rh.get("snap"),oh=rh.get("triggerEmphasis"),uh=makeKey(eh.model),ch=uc||ih||eh.type==="category",hh=n.axesInfo[uh]={key:uh,axis:eh,coordSys:p,axisPointerModel:rh,triggerTooltip:uc,triggerEmphasis:oh,involveSeries:ch,snap:ih,useHandle:isHandleTrigger(rh),seriesModels:[],linkGroup:null};_[uh]=hh,n.seriesInvolved=n.seriesInvolved||ch;var dh=getLinkGroupIndex(u,eh);if(dh!=null){var gh=c[dh]||(c[dh]={axesInfo:{}});gh.axesInfo[uh]=hh,gh.mapper=u[dh].mapper,hh.linkGroup=gh}}}})}function makeAxisPointerModel(n,r,a,s,o,u){var c=r.getModel("axisPointer"),p=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],d={};each$f(p,function(ec){d[ec]=clone$4(c.get(ec))}),d.snap=n.type!=="category"&&!!u,c.get("type")==="cross"&&(d.type="line");var _=d.label||(d.label={});if(_.show==null&&(_.show=!1),o==="cross"){var ja=c.get(["label","show"]);if(_.show=ja??!0,!u){var Ja=d.lineStyle=c.get("crossStyle");Ja&&defaults(_,Ja.textStyle)}}return n.model.getModel("axisPointer",new Model(d,a,s))}function collectSeriesInfo(n,r){r.eachSeries(function(a){var s=a.coordinateSystem,o=a.get(["tooltip","trigger"],!0),u=a.get(["tooltip","show"],!0);!s||o==="none"||o===!1||o==="item"||u===!1||a.get(["axisPointer","show"],!0)===!1||each$f(n.coordSysAxesInfo[makeKey(s.model)],function(c){var p=c.axis;s.getAxis(p.dim)===p&&(c.seriesModels.push(a),c.seriesDataCount==null&&(c.seriesDataCount=0),c.seriesDataCount+=a.getData().count())})})}function getLinkGroupIndex(n,r){for(var a=r.model,s=r.dim,o=0;o<n.length;o++){var u=n[o]||{};if(checkPropInLink(u[s+"AxisId"],a.id)||checkPropInLink(u[s+"AxisIndex"],a.componentIndex)||checkPropInLink(u[s+"AxisName"],a.name))return o}}function checkPropInLink(n,r){return n==="all"||isArray$1(n)&&indexOf(n,r)>=0||n===r}function fixValue(n){var r=getAxisInfo$1(n);if(r){var a=r.axisPointerModel,s=r.axis.scale,o=a.option,u=a.get("status"),c=a.get("value");c!=null&&(c=s.parse(c));var p=isHandleTrigger(a);u==null&&(o.status=p?"show":"hide");var d=s.getExtent().slice();d[0]>d[1]&&d.reverse(),(c==null||c>d[1])&&(c=d[1]),c<d[0]&&(c=d[0]),o.value=c,p&&(o.status=r.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(n){var r=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return r&&r.axesInfo[makeKey(n)]}function getAxisPointerModel(n){var r=getAxisInfo$1(n);return r&&r.axisPointerModel}function isHandleTrigger(n){return!!n.get(["handle","show"])}function makeKey(n){return n.type+"||"+n.id}var axisPointerClazz={},AxisView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o,u){this.axisPointerClass&&fixValue(a),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,o,!0)},r.prototype.updateAxisPointer=function(a,s,o,u){this._doUpdateAxisPointerClass(a,o,!1)},r.prototype.remove=function(a,s){var o=this._axisPointer;o&&o.remove(s)},r.prototype.dispose=function(a,s){this._disposeAxisPointer(s),n.prototype.dispose.apply(this,arguments)},r.prototype._doUpdateAxisPointerClass=function(a,s,o){var u=r.getAxisPointerClass(this.axisPointerClass);if(u){var c=getAxisPointerModel(a);c?(this._axisPointer||(this._axisPointer=new u)).render(a,c,s,o):this._disposeAxisPointer(s)}},r.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},r.registerAxisPointerClass=function(a,s){axisPointerClazz[a]=s},r.getAxisPointerClass=function(a){return a&&axisPointerClazz[a]},r.type="axis",r}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(n,r,a,s){var o=a.axis;if(!o.scale.isBlank()){var u=a.getModel("splitArea"),c=u.getModel("areaStyle"),p=c.get("color"),d=s.coordinateSystem.getRect(),_=o.getTicksCoords({tickModel:u,clamp:!0});if(_.length){var ja=p.length,Ja=inner$f(n).splitAreaColors,ec=createHashMap(),tc=0;if(Ja)for(var rc=0;rc<_.length;rc++){var nc=Ja.get(_[rc].tickValue);if(nc!=null){tc=(nc+(ja-1)*rc)%ja;break}}var ic=o.toGlobalCoord(_[0].coord),uc=c.getAreaStyle();p=isArray$1(p)?p:[p];for(var rc=1;rc<_.length;rc++){var eh=o.toGlobalCoord(_[rc].coord),rh=void 0,ah=void 0,ih=void 0,oh=void 0;o.isHorizontal()?(rh=ic,ah=d.y,ih=eh-rh,oh=d.height,ic=rh+ih):(rh=d.x,ah=ic,ih=d.width,oh=eh-ah,ic=ah+oh);var uh=_[rc-1].tickValue;uh!=null&&ec.set(uh,tc),r.add(new Rect$2({anid:uh!=null?"area_"+uh:null,shape:{x:rh,y:ah,width:ih,height:oh},style:defaults({fill:p[tc]},uc),autoBatch:!0,silent:!0})),tc=(tc+1)%ja}inner$f(n).splitAreaColors=ec}}}function rectCoordAxisHandleRemove(n){inner$f(n).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.axisPointerClass="CartesianAxisPointer",a}return r.prototype.render=function(a,s,o,u){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var p=a.getCoordSysModel(),d=layout$2(p,a),_=new AxisBuilder(a,extend$2({handleAutoShown:function(Ja){for(var ec=p.coordinateSystem.getCartesians(),tc=0;tc<ec.length;tc++)if(isIntervalOrLogScale(ec[tc].getOtherAxis(a.axis).scale))return!0;return!1}},d));each$f(axisBuilderAttrs$3,_.add,_),this._axisGroup.add(_.getGroup()),each$f(selfBuilderAttrs$2,function(Ja){a.get([Ja,"show"])&&axisElementBuilders$2[Ja](this,this._axisGroup,a,p)},this);var ja=u&&u.type==="changeAxisOrder"&&u.isInitSort;ja||groupTransition(c,this._axisGroup,a),n.prototype.render.call(this,a,s,o,u)}},r.prototype.remove=function(){rectCoordAxisHandleRemove(this)},r.type="cartesianAxis",r}(AxisView),axisElementBuilders$2={splitLine:function(n,r,a,s){var o=a.axis;if(!o.scale.isBlank()){var u=a.getModel("splitLine"),c=u.getModel("lineStyle"),p=c.get("color");p=isArray$1(p)?p:[p];for(var d=s.coordinateSystem.getRect(),_=o.isHorizontal(),ja=0,Ja=o.getTicksCoords({tickModel:u}),ec=[],tc=[],rc=c.getLineStyle(),nc=0;nc<Ja.length;nc++){var ic=o.toGlobalCoord(Ja[nc].coord);_?(ec[0]=ic,ec[1]=d.y,tc[0]=ic,tc[1]=d.y+d.height):(ec[0]=d.x,ec[1]=ic,tc[0]=d.x+d.width,tc[1]=ic);var uc=ja++%p.length,eh=Ja[nc].tickValue,rh=new Line$2({anid:eh!=null?"line_"+Ja[nc].tickValue:null,autoBatch:!0,shape:{x1:ec[0],y1:ec[1],x2:tc[0],y2:tc[1]},style:defaults({stroke:p[uc]},rc),silent:!0});subPixelOptimizeLine(rh.shape,rc.lineWidth),r.add(rh)}}},minorSplitLine:function(n,r,a,s){var o=a.axis,u=a.getModel("minorSplitLine"),c=u.getModel("lineStyle"),p=s.coordinateSystem.getRect(),d=o.isHorizontal(),_=o.getMinorTicksCoords();if(_.length)for(var ja=[],Ja=[],ec=c.getLineStyle(),tc=0;tc<_.length;tc++)for(var rc=0;rc<_[tc].length;rc++){var nc=o.toGlobalCoord(_[tc][rc].coord);d?(ja[0]=nc,ja[1]=p.y,Ja[0]=nc,Ja[1]=p.y+p.height):(ja[0]=p.x,ja[1]=nc,Ja[0]=p.x+p.width,Ja[1]=nc);var ic=new Line$2({anid:"minor_line_"+_[tc][rc].tickValue,autoBatch:!0,shape:{x1:ja[0],y1:ja[1],x2:Ja[0],y2:Ja[1]},style:ec,silent:!0});subPixelOptimizeLine(ic.shape,ec.lineWidth),r.add(ic)}},splitArea:function(n,r,a,s){rectCoordAxisBuildSplitArea(n,r,a,s)}},CartesianXAxisView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="xAxis",r}(CartesianAxisView),CartesianYAxisView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=CartesianXAxisView.type,a}return r.type="yAxis",r}(CartesianAxisView),GridView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type="grid",a}return r.prototype.render=function(a,s){this.group.removeAll(),a.get("show")&&this.group.add(new Rect$2({shape:a.coordinateSystem.getRect(),style:defaults({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},r.type="grid",r}(ComponentView),extraOption={offset:0};function install$11(n){n.registerComponentView(GridView),n.registerComponentModel(GridModel),n.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(n,"x",CartesianAxisModel,extraOption),axisModelCreator(n,"y",CartesianAxisModel,extraOption),n.registerComponentView(CartesianXAxisView),n.registerComponentView(CartesianYAxisView),n.registerPreprocessor(function(r){r.xAxis&&r.yAxis&&!r.grid&&(r.grid={})})}function install$10(n){use(install$11),n.registerSeriesModel(ScatterSeriesModel),n.registerChartView(ScatterView),n.registerLayout(pointsLayout("scatter"))}function radarLayout(n){n.eachSeriesByType("radar",function(r){var a=r.getData(),s=[],o=r.coordinateSystem;if(o){var u=o.getIndicatorAxes();each$f(u,function(c,p){a.each(a.mapDimension(u[p].dim),function(d,_){s[_]=s[_]||[];var ja=o.dataToPoint(d,p);s[_][p]=isValidPoint(ja)?ja:getValueMissingPoint(o)})}),a.each(function(c){var p=find$1(s[c],function(d){return isValidPoint(d)})||getValueMissingPoint(o);s[c].push(p.slice()),a.setItemLayout(c,s[c])})}})}function isValidPoint(n){return!isNaN(n[0])&&!isNaN(n[1])}function getValueMissingPoint(n){return[n.cx,n.cy]}function radarBackwardCompat(n){var r=n.polar;if(r){isArray$1(r)||(r=[r]);var a=[];each$f(r,function(s,o){s.indicator?(s.type&&!s.shape&&(s.shape=s.type),n.radar=n.radar||[],isArray$1(n.radar)||(n.radar=[n.radar]),n.radar.push(s)):a.push(s)}),n.polar=a}each$f(n.series,function(s){s&&s.type==="radar"&&s.polarIndex&&(s.radarIndex=s.polarIndex)})}var RadarView$1=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u=a.coordinateSystem,c=this.group,p=a.getData(),d=this._data;function _(ec,tc){var rc=ec.getItemVisual(tc,"symbol")||"circle";if(rc!=="none"){var nc=normalizeSymbolSize(ec.getItemVisual(tc,"symbolSize")),ic=createSymbol$1(rc,-1,-1,2,2),uc=ec.getItemVisual(tc,"symbolRotate")||0;return ic.attr({style:{strokeNoScale:!0},z2:100,scaleX:nc[0]/2,scaleY:nc[1]/2,rotation:uc*Math.PI/180||0}),ic}}function ja(ec,tc,rc,nc,ic,uc){rc.removeAll();for(var eh=0;eh<tc.length-1;eh++){var rh=_(nc,ic);rh&&(rh.__dimIdx=eh,ec[eh]?(rh.setPosition(ec[eh]),graphic[uc?"initProps":"updateProps"](rh,{x:tc[eh][0],y:tc[eh][1]},a,ic)):rh.setPosition(tc[eh]),rc.add(rh))}}function Ja(ec){return map$1(ec,function(tc){return[u.cx,u.cy]})}p.diff(d).add(function(ec){var tc=p.getItemLayout(ec);if(tc){var rc=new Polygon,nc=new Polyline$1,ic={shape:{points:tc}};rc.shape.points=Ja(tc),nc.shape.points=Ja(tc),initProps(rc,ic,a,ec),initProps(nc,ic,a,ec);var uc=new Group$3,eh=new Group$3;uc.add(nc),uc.add(rc),uc.add(eh),ja(nc.shape.points,tc,eh,p,ec,!0),p.setItemGraphicEl(ec,uc)}}).update(function(ec,tc){var rc=d.getItemGraphicEl(tc),nc=rc.childAt(0),ic=rc.childAt(1),uc=rc.childAt(2),eh={shape:{points:p.getItemLayout(ec)}};eh.shape.points&&(ja(nc.shape.points,eh.shape.points,uc,p,ec,!1),saveOldStyle(ic),saveOldStyle(nc),updateProps$1(nc,eh,a),updateProps$1(ic,eh,a),p.setItemGraphicEl(ec,rc))}).remove(function(ec){c.remove(d.getItemGraphicEl(ec))}).execute(),p.eachItemGraphicEl(function(ec,tc){var rc=p.getItemModel(tc),nc=ec.childAt(0),ic=ec.childAt(1),uc=ec.childAt(2),eh=p.getItemVisual(tc,"style"),rh=eh.fill;c.add(ec),nc.useStyle(defaults(rc.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:rh})),setStatesStylesFromModel(nc,rc,"lineStyle"),setStatesStylesFromModel(ic,rc,"areaStyle");var ah=rc.getModel("areaStyle"),ih=ah.isEmpty()&&ah.parentModel.isEmpty();ic.ignore=ih,each$f(["emphasis","select","blur"],function(ch){var hh=rc.getModel([ch,"areaStyle"]),dh=hh.isEmpty()&&hh.parentModel.isEmpty();ic.ensureState(ch).ignore=dh&&ih}),ic.useStyle(defaults(ah.getAreaStyle(),{fill:rh,opacity:.7,decal:eh.decal}));var oh=rc.getModel("emphasis"),uh=oh.getModel("itemStyle").getItemStyle();uc.eachChild(function(ch){if(ch instanceof ZRImage){var hh=ch.style;ch.useStyle(extend$2({image:hh.image,x:hh.x,y:hh.y,width:hh.width,height:hh.height},eh))}else ch.useStyle(eh),ch.setColor(rh),ch.style.strokeNoScale=!0;var dh=ch.ensureState("emphasis");dh.style=clone$4(uh);var gh=p.getStore().get(p.getDimensionIndex(ch.__dimIdx),tc);(gh==null||isNaN(gh))&&(gh=""),setLabelStyle(ch,getLabelStatesModels(rc),{labelFetcher:p.hostModel,labelDataIndex:tc,labelDimIndex:ch.__dimIdx,defaultText:gh,inheritColor:rh,defaultOpacity:eh.opacity})}),toggleHoverEmphasis(ec,oh.get("focus"),oh.get("blurScope"),oh.get("disabled"))}),this._data=p},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(ChartView),RadarSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.hasSymbolVisual=!0,a}return r.prototype.init=function(a){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},r.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},r.prototype.formatTooltip=function(a,s,o){var u=this.getData(),c=this.coordinateSystem,p=c.getIndicatorAxes(),d=this.getData().getName(a),_=d===""?this.name:d,ja=retrieveVisualColorForTooltipMarker(this,a);return createTooltipMarkup("section",{header:_,sortBlocks:!0,blocks:map$1(p,function(Ja){var ec=u.get(u.mapDimension(Ja.dim),a);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:ja,name:Ja.name,value:ec,sortParam:ec})})})},r.prototype.getTooltipPosition=function(a){if(a!=null){for(var s=this.getData(),o=this.coordinateSystem,u=s.getValues(map$1(o.dimensions,function(_){return s.mapDimension(_)}),a),c=0,p=u.length;c<p;c++)if(!isNaN(u[c])){var d=o.getIndicatorAxes();return o.coordToPoint(d[c].dataToCoord(u[c]),c)}}},r.type="series.radar",r.dependencies=["radar"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},r}(SeriesModel),valueAxisDefault=axisDefault$1.value;function defaultsShow(n,r){return defaults({show:r},n)}var RadarModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),s=this.get("splitNumber"),o=this.get("scale"),u=this.get("axisLine"),c=this.get("axisTick"),p=this.get("axisLabel"),d=this.get("axisName"),_=this.get(["axisName","show"]),ja=this.get(["axisName","formatter"]),Ja=this.get("axisNameGap"),ec=this.get("triggerEvent"),tc=map$1(this.get("indicator")||[],function(rc){rc.max!=null&&rc.max>0&&!rc.min?rc.min=0:rc.min!=null&&rc.min<0&&!rc.max&&(rc.max=0);var nc=d;rc.color!=null&&(nc=defaults({color:rc.color},d));var ic=merge(clone$4(rc),{boundaryGap:a,splitNumber:s,scale:o,axisLine:u,axisTick:c,axisLabel:p,name:rc.text,showName:_,nameLocation:"end",nameGap:Ja,nameTextStyle:nc,triggerEvent:ec},!1);if(isString(ja)){var uc=ic.name;ic.name=ja.replace("{value}",uc??"")}else isFunction(ja)&&(ic.name=ja(ic.name,ic));var eh=new Model(ic,null,this.ecModel);return mixin(eh,AxisModelCommonMixin.prototype),eh.mainType="radar",eh.componentIndex=this.componentIndex,eh},this);this._indicatorModels=tc},r.prototype.getIndicatorModels=function(){return this._indicatorModels},r.type="radar",r.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},r}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u=this.group;u.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},r.prototype._buildAxes=function(a){var s=a.coordinateSystem,o=s.getIndicatorAxes(),u=map$1(o,function(c){var p=c.model.get("showName")?c.name:"",d=new AxisBuilder(c.model,{axisName:p,position:[s.cx,s.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});each$f(u,function(c){each$f(axisBuilderAttrs$2,c.add,c),this.group.add(c.getGroup())},this)},r.prototype._buildSplitLineAndArea=function(a){var s=a.coordinateSystem,o=s.getIndicatorAxes();if(!o.length)return;var u=a.get("shape"),c=a.getModel("splitLine"),p=a.getModel("splitArea"),d=c.getModel("lineStyle"),_=p.getModel("areaStyle"),ja=c.get("show"),Ja=p.get("show"),ec=d.get("color"),tc=_.get("color"),rc=isArray$1(ec)?ec:[ec],nc=isArray$1(tc)?tc:[tc],ic=[],uc=[];function eh(yh,xh,_h){var bh=_h%xh.length;return yh[bh]=yh[bh]||[],bh}if(u==="circle")for(var rh=o[0].getTicksCoords(),ah=s.cx,ih=s.cy,oh=0;oh<rh.length;oh++){if(ja){var uh=eh(ic,rc,oh);ic[uh].push(new Circle({shape:{cx:ah,cy:ih,r:rh[oh].coord}}))}if(Ja&&oh<rh.length-1){var uh=eh(uc,nc,oh);uc[uh].push(new Ring$1({shape:{cx:ah,cy:ih,r0:rh[oh].coord,r:rh[oh+1].coord}}))}}else for(var ch,hh=map$1(o,function(yh,xh){var _h=yh.getTicksCoords();return ch=ch==null?_h.length-1:Math.min(_h.length-1,ch),map$1(_h,function(bh){return s.coordToPoint(bh.coord,xh)})}),dh=[],oh=0;oh<=ch;oh++){for(var gh=[],fh=0;fh<o.length;fh++)gh.push(hh[fh][oh]);if(gh[0]&&gh.push(gh[0].slice()),ja){var uh=eh(ic,rc,oh);ic[uh].push(new Polyline$1({shape:{points:gh}}))}if(Ja&&dh){var uh=eh(uc,nc,oh-1);uc[uh].push(new Polygon({shape:{points:gh.concat(dh)}}))}dh=gh.slice().reverse()}var vh=d.getLineStyle(),ph=_.getAreaStyle();each$f(uc,function(yh,xh){this.group.add(mergePath(yh,{style:defaults({stroke:"none",fill:nc[xh%nc.length]},ph),silent:!0}))},this),each$f(ic,function(yh,xh){this.group.add(mergePath(yh,{style:defaults({fill:"none",stroke:rc[xh%rc.length]},vh),silent:!0}))},this)},r.type="radar",r}(ComponentView),IndicatorAxis=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this,a,s,o)||this;return u.type="value",u.angle=0,u.name="",u}return r}(Axis),Radar=function(){function n(r,a,s){this.dimensions=[],this._model=r,this._indicatorAxes=map$1(r.getIndicatorModels(),function(o,u){var c="indicator_"+u,p=new IndicatorAxis(c,new IntervalScale);return p.name=o.get("name"),p.model=o,o.axis=p,this.dimensions.push(c),p},this),this.resize(r,s)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(r,a){var s=this._indicatorAxes[a];return this.coordToPoint(s.dataToCoord(r),a)},n.prototype.coordToPoint=function(r,a){var s=this._indicatorAxes[a],o=s.angle,u=this.cx+r*Math.cos(o),c=this.cy-r*Math.sin(o);return[u,c]},n.prototype.pointToData=function(r){var a=r[0]-this.cx,s=r[1]-this.cy,o=Math.sqrt(a*a+s*s);a/=o,s/=o;for(var u=Math.atan2(-s,a),c=1/0,p,d=-1,_=0;_<this._indicatorAxes.length;_++){var ja=this._indicatorAxes[_],Ja=Math.abs(u-ja.angle);Ja<c&&(p=ja,d=_,c=Ja)}return[d,+(p&&p.coordToData(o))]},n.prototype.resize=function(r,a){var s=r.get("center"),o=a.getWidth(),u=a.getHeight(),c=Math.min(o,u)/2;this.cx=parsePercent(s[0],o),this.cy=parsePercent(s[1],u),this.startAngle=r.get("startAngle")*Math.PI/180;var p=r.get("radius");(isString(p)||isNumber(p))&&(p=[0,p]),this.r0=parsePercent(p[0],c),this.r=parsePercent(p[1],c),each$f(this._indicatorAxes,function(d,_){d.setExtent(this.r0,this.r);var ja=this.startAngle+_*Math.PI*2/this._indicatorAxes.length;ja=Math.atan2(Math.sin(ja),Math.cos(ja)),d.angle=ja},this)},n.prototype.update=function(r,a){var s=this._indicatorAxes,o=this._model;each$f(s,function(p){p.scale.setExtent(1/0,-1/0)}),r.eachSeriesByType("radar",function(p,d){if(!(p.get("coordinateSystem")!=="radar"||r.getComponent("radar",p.get("radarIndex"))!==o)){var _=p.getData();each$f(s,function(ja){ja.scale.unionExtentFromData(_,_.mapDimension(ja.dim))})}},this);var u=o.get("splitNumber"),c=new IntervalScale;c.setExtent(0,u),c.setInterval(1),each$f(s,function(p,d){alignScaleTicks(p.scale,p.model,c)})},n.prototype.convertToPixel=function(r,a,s){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(r,a,s){return console.warn("Not implemented."),null},n.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},n.create=function(r,a){var s=[];return r.eachComponent("radar",function(o){var u=new n(o,r,a);s.push(u),o.coordinateSystem=u}),r.eachSeriesByType("radar",function(o){o.get("coordinateSystem")==="radar"&&(o.coordinateSystem=s[o.get("radarIndex")||0])}),s},n.dimensions=[],n}();function install$$(n){n.registerCoordinateSystem("radar",Radar),n.registerComponentModel(RadarModel),n.registerComponentView(RadarView),n.registerVisual({seriesType:"radar",reset:function(r){var a=r.getData();a.each(function(s){a.setItemVisual(s,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}function install$_(n){use(install$$),n.registerChartView(RadarView$1),n.registerSeriesModel(RadarSeriesModel),n.registerLayout(radarLayout),n.registerProcessor(dataFilter$1("radar")),n.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(n,r,a){var s=getStore(n);s[r]=a}function release(n,r,a){var s=getStore(n),o=s[r];o===a&&(s[r]=null)}function isTaken(n,r){return!!getStore(n)[r]}function getStore(n){return n[ATTR]||(n[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop$1);var RoamController=function(n){__extends(r,n);function r(a){var s=n.call(this)||this;s._zr=a;var o=bind$1(s._mousedownHandler,s),u=bind$1(s._mousemoveHandler,s),c=bind$1(s._mouseupHandler,s),p=bind$1(s._mousewheelHandler,s),d=bind$1(s._pinchHandler,s);return s.enable=function(_,ja){this.disable(),this._opt=defaults(clone$4(ja)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),_==null&&(_=!0),(_===!0||_==="move"||_==="pan")&&(a.on("mousedown",o),a.on("mousemove",u),a.on("mouseup",c)),(_===!0||_==="scale"||_==="zoom")&&(a.on("mousewheel",p),a.on("pinch",d))},s.disable=function(){a.off("mousedown",o),a.off("mousemove",u),a.off("mouseup",c),a.off("mousewheel",p),a.off("pinch",d)},s}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(a){this.pointerChecker=a},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(a){if(!isMiddleOrRightButtonOnMouseUpDown(a)){for(var s=a.target;s;){if(s.draggable)return;s=s.__hostTarget||s.parent}var o=a.offsetX,u=a.offsetY;this.pointerChecker&&this.pointerChecker(a,o,u)&&(this._x=o,this._y=u,this._dragging=!0)}},r.prototype._mousemoveHandler=function(a){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",a,this._opt)||a.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var s=a.offsetX,o=a.offsetY,u=this._x,c=this._y,p=s-u,d=o-c;this._x=s,this._y=o,this._opt.preventDefaultMouseMove&&stop(a.event),trigger$1(this,"pan","moveOnMouseMove",a,{dx:p,dy:d,oldX:u,oldY:c,newX:s,newY:o,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(a){isMiddleOrRightButtonOnMouseUpDown(a)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(a){var s=isAvailableBehavior("zoomOnMouseWheel",a,this._opt),o=isAvailableBehavior("moveOnMouseWheel",a,this._opt),u=a.wheelDelta,c=Math.abs(u),p=a.offsetX,d=a.offsetY;if(!(u===0||!s&&!o)){if(s){var _=c>3?1.4:c>1?1.2:1.1,ja=u>0?_:1/_;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",a,{scale:ja,originX:p,originY:d,isAvailableBehavior:null})}if(o){var Ja=Math.abs(u),ec=(u>0?1:-1)*(Ja>3?.4:Ja>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:ec,originX:p,originY:d,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(a){if(!isTaken(this._zr,"globalPan")){var s=a.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,a,{scale:s,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})}},r}(Eventful);function checkPointerAndTrigger(n,r,a,s,o){n.pointerChecker&&n.pointerChecker(s,o.originX,o.originY)&&(stop(s.event),trigger$1(n,r,a,s,o))}function trigger$1(n,r,a,s,o){o.isAvailableBehavior=bind$1(isAvailableBehavior,null,a,s),n.trigger(r,o)}function isAvailableBehavior(n,r,a){var s=a[n];return!n||s&&(!isString(s)||r.event[s+"Key"])}function updateViewOnPan(n,r,a){var s=n.target;s.x+=r,s.y+=a,s.dirty()}function updateViewOnZoom(n,r,a,s){var o=n.target,u=n.zoomLimit,c=n.zoom=n.zoom||1;if(c*=r,u){var p=u.min||0,d=u.max||1/0;c=Math.max(Math.min(d,c),p)}var _=c/n.zoom;n.zoom=c,o.x-=(a-o.x)*(_-1),o.y-=(s-o.y)*(_-1),o.scaleX*=_,o.scaleY*=_,o.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(n,r,a){var s=r.getComponentByElement(n.topTarget),o=s&&s.coordinateSystem;return s&&s!==a&&!IRRELEVANT_EXCLUDES.hasOwnProperty(s.mainType)&&o&&o.model!==a}function parseXML(n){if(isString(n)){var r=new DOMParser;n=r.parseFromString(n,"text/xml")}var a=n;for(a.nodeType===9&&(a=a.firstChild);a.nodeName.toLowerCase()!=="svg"||a.nodeType!==1;)a=a.nextSibling;return a}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(r,a){a=a||{};var s=parseXML(r);this._defsUsePending=[];var o=new Group$3;this._root=o;var u=[],c=s.getAttribute("viewBox")||"",p=parseFloat(s.getAttribute("width")||a.width),d=parseFloat(s.getAttribute("height")||a.height);isNaN(p)&&(p=null),isNaN(d)&&(d=null),parseAttributes(s,o,null,!0,!1);for(var _=s.firstChild;_;)this._parseNode(_,o,u,null,!1,!1),_=_.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var ja,Ja;if(c){var ec=splitNumberSequence(c);ec.length>=4&&(ja={x:parseFloat(ec[0]||0),y:parseFloat(ec[1]||0),width:parseFloat(ec[2]),height:parseFloat(ec[3])})}if(ja&&p!=null&&d!=null&&(Ja=makeViewBoxTransform(ja,{x:0,y:0,width:p,height:d}),!a.ignoreViewBox)){var tc=o;o=new Group$3,o.add(tc),tc.scaleX=tc.scaleY=Ja.scale,tc.x=Ja.x,tc.y=Ja.y}return!a.ignoreRootClip&&p!=null&&d!=null&&o.setClipPath(new Rect$2({shape:{x:0,y:0,width:p,height:d}})),{root:o,width:p,height:d,viewBoxRect:ja,viewBoxTransform:Ja,named:u}},n.prototype._parseNode=function(r,a,s,o,u,c){var p=r.nodeName.toLowerCase(),d,_=o;if(p==="defs"&&(u=!0),p==="text"&&(c=!0),p==="defs"||p==="switch")d=a;else{if(!u){var ja=nodeParsers[p];if(ja&&hasOwn(nodeParsers,p)){d=ja.call(this,r,a);var Ja=r.getAttribute("name");if(Ja){var ec={name:Ja,namedFrom:null,svgNodeTagLower:p,el:d};s.push(ec),p==="g"&&(_=ec)}else o&&s.push({name:o.name,namedFrom:o,svgNodeTagLower:p,el:d});a.add(d)}}var tc=paintServerParsers[p];if(tc&&hasOwn(paintServerParsers,p)){var rc=tc.call(this,r),nc=r.getAttribute("id");nc&&(this._defs[nc]=rc)}}if(d&&d.isGroup)for(var ic=r.firstChild;ic;)ic.nodeType===1?this._parseNode(ic,d,s,_,u,c):ic.nodeType===3&&c&&this._parseText(ic,d),ic=ic.nextSibling},n.prototype._parseText=function(r,a){var s=new TSpan({style:{text:r.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(a,s),parseAttributes(r,s,this._defsUsePending,!1,!1),applyTextAlignment(s,a);var o=s.style,u=o.fontSize;u&&u<9&&(o.fontSize=9,s.scaleX*=u/9,s.scaleY*=u/9);var c=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=c;var p=s.getBoundingRect();return this._textX+=p.width,a.add(s),s},n.internalField=function(){nodeParsers={g:function(r,a){var s=new Group$3;return inheritStyle(a,s),parseAttributes(r,s,this._defsUsePending,!1,!1),s},rect:function(r,a){var s=new Rect$2;return inheritStyle(a,s),parseAttributes(r,s,this._defsUsePending,!1,!1),s.setShape({x:parseFloat(r.getAttribute("x")||"0"),y:parseFloat(r.getAttribute("y")||"0"),width:parseFloat(r.getAttribute("width")||"0"),height:parseFloat(r.getAttribute("height")||"0")}),s.silent=!0,s},circle:function(r,a){var s=new Circle;return inheritStyle(a,s),parseAttributes(r,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),r:parseFloat(r.getAttribute("r")||"0")}),s.silent=!0,s},line:function(r,a){var s=new Line$2;return inheritStyle(a,s),parseAttributes(r,s,this._defsUsePending,!1,!1),s.setShape({x1:parseFloat(r.getAttribute("x1")||"0"),y1:parseFloat(r.getAttribute("y1")||"0"),x2:parseFloat(r.getAttribute("x2")||"0"),y2:parseFloat(r.getAttribute("y2")||"0")}),s.silent=!0,s},ellipse:function(r,a){var s=new Ellipse$1;return inheritStyle(a,s),parseAttributes(r,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),rx:parseFloat(r.getAttribute("rx")||"0"),ry:parseFloat(r.getAttribute("ry")||"0")}),s.silent=!0,s},polygon:function(r,a){var s=r.getAttribute("points"),o;s&&(o=parsePoints(s));var u=new Polygon({shape:{points:o||[]},silent:!0});return inheritStyle(a,u),parseAttributes(r,u,this._defsUsePending,!1,!1),u},polyline:function(r,a){var s=r.getAttribute("points"),o;s&&(o=parsePoints(s));var u=new Polyline$1({shape:{points:o||[]},silent:!0});return inheritStyle(a,u),parseAttributes(r,u,this._defsUsePending,!1,!1),u},image:function(r,a){var s=new ZRImage;return inheritStyle(a,s),parseAttributes(r,s,this._defsUsePending,!1,!1),s.setStyle({image:r.getAttribute("xlink:href")||r.getAttribute("href"),x:+r.getAttribute("x"),y:+r.getAttribute("y"),width:+r.getAttribute("width"),height:+r.getAttribute("height")}),s.silent=!0,s},text:function(r,a){var s=r.getAttribute("x")||"0",o=r.getAttribute("y")||"0",u=r.getAttribute("dx")||"0",c=r.getAttribute("dy")||"0";this._textX=parseFloat(s)+parseFloat(u),this._textY=parseFloat(o)+parseFloat(c);var p=new Group$3;return inheritStyle(a,p),parseAttributes(r,p,this._defsUsePending,!1,!0),p},tspan:function(r,a){var s=r.getAttribute("x"),o=r.getAttribute("y");s!=null&&(this._textX=parseFloat(s)),o!=null&&(this._textY=parseFloat(o));var u=r.getAttribute("dx")||"0",c=r.getAttribute("dy")||"0",p=new Group$3;return inheritStyle(a,p),parseAttributes(r,p,this._defsUsePending,!1,!0),this._textX+=parseFloat(u),this._textY+=parseFloat(c),p},path:function(r,a){var s=r.getAttribute("d")||"",o=createFromString(s);return inheritStyle(a,o),parseAttributes(r,o,this._defsUsePending,!1,!1),o.silent=!0,o}}}(),n}(),paintServerParsers={lineargradient:function(n){var r=parseInt(n.getAttribute("x1")||"0",10),a=parseInt(n.getAttribute("y1")||"0",10),s=parseInt(n.getAttribute("x2")||"10",10),o=parseInt(n.getAttribute("y2")||"0",10),u=new LinearGradient(r,a,s,o);return parsePaintServerUnit(n,u),parseGradientColorStops(n,u),u},radialgradient:function(n){var r=parseInt(n.getAttribute("cx")||"0",10),a=parseInt(n.getAttribute("cy")||"0",10),s=parseInt(n.getAttribute("r")||"0",10),o=new RadialGradient$1(r,a,s);return parsePaintServerUnit(n,o),parseGradientColorStops(n,o),o}};function parsePaintServerUnit(n,r){var a=n.getAttribute("gradientUnits");a==="userSpaceOnUse"&&(r.global=!0)}function parseGradientColorStops(n,r){for(var a=n.firstChild;a;){if(a.nodeType===1&&a.nodeName.toLocaleLowerCase()==="stop"){var s=a.getAttribute("offset"),o=void 0;s&&s.indexOf("%")>0?o=parseInt(s,10)/100:s?o=parseFloat(s):o=0;var u={};parseInlineStyle(a,u,u);var c=u.stopColor||a.getAttribute("stop-color")||"#000000";r.colorStops.push({offset:o,color:c})}a=a.nextSibling}}function inheritStyle(n,r){n&&n.__inheritedStyle&&(r.__inheritedStyle||(r.__inheritedStyle={}),defaults(r.__inheritedStyle,n.__inheritedStyle))}function parsePoints(n){for(var r=splitNumberSequence(n),a=[],s=0;s<r.length;s+=2){var o=parseFloat(r[s]),u=parseFloat(r[s+1]);a.push([o,u])}return a}function parseAttributes(n,r,a,s,o){var u=r,c=u.__inheritedStyle=u.__inheritedStyle||{},p={};n.nodeType===1&&(parseTransformAttribute(n,r),parseInlineStyle(n,c,p),s||parseAttributeStyle(n,c,p)),u.style=u.style||{},c.fill!=null&&(u.style.fill=getFillStrokeStyle(u,"fill",c.fill,a)),c.stroke!=null&&(u.style.stroke=getFillStrokeStyle(u,"stroke",c.stroke,a)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(d){c[d]!=null&&(u.style[d]=parseFloat(c[d]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(d){c[d]!=null&&(u.style[d]=c[d])}),o&&(u.__selfStyle=p),c.lineDash&&(u.style.lineDash=map$1(splitNumberSequence(c.lineDash),function(d){return parseFloat(d)})),(c.visibility==="hidden"||c.visibility==="collapse")&&(u.invisible=!0),c.display==="none"&&(u.ignore=!0)}function applyTextAlignment(n,r){var a=r.__selfStyle;if(a){var s=a.textBaseline,o=s;!s||s==="auto"||s==="baseline"?o="alphabetic":s==="before-edge"||s==="text-before-edge"?o="top":s==="after-edge"||s==="text-after-edge"?o="bottom":(s==="central"||s==="mathematical")&&(o="middle"),n.style.textBaseline=o}var u=r.__inheritedStyle;if(u){var c=u.textAlign,p=c;c&&(c==="middle"&&(p="center"),n.style.textAlign=p)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(n,r,a,s){var o=a&&a.match(urlRegex);if(o){var u=trim$1(o[1]);s.push([n,r,u]);return}return a==="none"&&(a=null),a}function applyDefs(n,r){for(var a=0;a<r.length;a++){var s=r[a];s[0].style[s[1]]=n[s[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(n){return n.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(n,r){var a=n.getAttribute("transform");if(a){a=a.replace(/,/g," ");var s=[],o=null;a.replace(transformRegex,function(Ja,ec,tc){return s.push(ec,tc),""});for(var u=s.length-1;u>0;u-=2){var c=s[u],p=s[u-1],d=splitNumberSequence(c);switch(o=o||create$2(),p){case"translate":translate(o,o,[parseFloat(d[0]),parseFloat(d[1]||"0")]);break;case"scale":scale$1(o,o,[parseFloat(d[0]),parseFloat(d[1]||d[0])]);break;case"rotate":rotate(o,o,-parseFloat(d[0])*DEGREE_TO_ANGLE,[parseFloat(d[1]||"0"),parseFloat(d[2]||"0")]);break;case"skewX":var _=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(o,[1,0,_,1,0,0],o);break;case"skewY":var ja=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(o,[1,ja,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(d[0]),o[1]=parseFloat(d[1]),o[2]=parseFloat(d[2]),o[3]=parseFloat(d[3]),o[4]=parseFloat(d[4]),o[5]=parseFloat(d[5]);break}}r.setLocalTransform(o)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(n,r,a){var s=n.getAttribute("style");if(s){styleRegex.lastIndex=0;for(var o;(o=styleRegex.exec(s))!=null;){var u=o[1],c=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,u)?INHERITABLE_STYLE_ATTRIBUTES_MAP[u]:null;c&&(r[c]=o[2]);var p=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,u)?SELF_STYLE_ATTRIBUTES_MAP[u]:null;p&&(a[p]=o[2])}}}function parseAttributeStyle(n,r,a){for(var s=0;s<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var o=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[s],u=n.getAttribute(o);u!=null&&(r[INHERITABLE_STYLE_ATTRIBUTES_MAP[o]]=u)}for(var s=0;s<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var o=SELF_STYLE_ATTRIBUTES_MAP_KEYS[s],u=n.getAttribute(o);u!=null&&(a[SELF_STYLE_ATTRIBUTES_MAP[o]]=u)}}function makeViewBoxTransform(n,r){var a=r.width/n.width,s=r.height/n.height,o=Math.min(a,s);return{scale:o,x:-(n.x+n.width/2)*o+(r.x+r.width/2),y:-(n.y+n.height/2)*o+(r.y+r.height/2)}}function parseSVG(n,r){var a=new SVGParser;return a.parse(n,r)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function n(r,a){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=r,this._parsedXML=parseXML(a)}return n.prototype.load=function(){var r=this._firstGraphic;if(!r){r=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(r),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=createRegions(r.named),s=a.regions,o=a.regionsMap;this._regions=s,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(r){var a,s;try{a=r&&parseSVG(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},s=a.root,assert(s!=null)}catch(ic){throw new Error(`Invalid svg format
`+ic.message)}var o=new Group$3;o.add(s),o.isGeoSVGGraphicRoot=!0;var u=a.width,c=a.height,p=a.viewBoxRect,d=this._boundingRect;if(!d){var _=void 0,ja=void 0,Ja=void 0,ec=void 0;if(u!=null?(_=0,Ja=u):p&&(_=p.x,Ja=p.width),c!=null?(ja=0,ec=c):p&&(ja=p.y,ec=p.height),_==null||ja==null){var tc=s.getBoundingRect();_==null&&(_=tc.x,Ja=tc.width),ja==null&&(ja=tc.y,ec=tc.height)}d=this._boundingRect=new BoundingRect(_,ja,Ja,ec)}if(p){var rc=makeViewBoxTransform(p,d);s.scaleX=s.scaleY=rc.scale,s.x=rc.x,s.y=rc.y}o.setClipPath(new Rect$2({shape:d.plain()}));var nc=[];return each$f(a.named,function(ic){REGION_AVAILABLE_SVG_TAG_MAP.get(ic.svgNodeTagLower)!=null&&(nc.push(ic),setSilent(ic.el))}),{root:o,boundingRect:d,named:nc}},n.prototype.useGraphic=function(r){var a=this._usedGraphicMap,s=a.get(r);return s||(s=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(r,s),s)},n.prototype.freeGraphic=function(r){var a=this._usedGraphicMap,s=a.get(r);s&&(a.removeKey(r),this._freedGraphics.push(s))},n}();function setSilent(n){n.silent=!1,n.isGroup&&n.traverse(function(r){r.silent=!1})}function createRegions(n){var r=[],a=createHashMap();return each$f(n,function(s){if(s.namedFrom==null){var o=new GeoSVGRegion(s.name,s.el);r.push(o),a.set(s.name,o)}}),{regions:r,regionsMap:a}}var geoCoord=[126,25],nanhaiName="南海诸岛",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i$1=0;i$1<points$1.length;i$1++)for(var k$2=0;k$2<points$1[i$1].length;k$2++)points$1[i$1][k$2][0]/=10.5,points$1[i$1][k$2][1]/=-10.5/.75,points$1[i$1][k$2][0]+=geoCoord[0],points$1[i$1][k$2][1]+=geoCoord[1];function fixNanhai(n,r){if(n==="china"){for(var a=0;a<r.length;a++)if(r[a].name===nanhaiName)return;r.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(s){return{type:"polygon",exterior:s}}),geoCoord))}}var coordsOffsetMap={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function fixTextCoords(n,r){if(n==="china"){var a=coordsOffsetMap[r.name];if(a){var s=r.getCenter();s[0]+=a[0]/10.5,s[1]+=-a[1]/(10.5/.75),r.setCenter(s)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(n,r){n==="china"&&r.name==="台湾"&&r.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function n(r,a,s){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=r,this._specialAreas=s,this._geoJSON=parseInput(a)}return n.prototype.load=function(r,a){a=a||DEFAULT_NAME_PROPERTY;var s=this._parsedMap.get(a);if(!s){var o=this._parseToRegions(a);s=this._parsedMap.set(a,{regions:o,boundingRect:calculateBoundingRect(o)})}var u=createHashMap(),c=[];return each$f(s.regions,function(p){var d=p.name;r&&hasOwn(r,d)&&(p=p.cloneShallow(d=r[d])),c.push(p),u.set(d,p)}),{regions:c,boundingRect:s.boundingRect||new BoundingRect(0,0,0,0),regionsMap:u}},n.prototype._parseToRegions=function(r){var a=this._mapName,s=this._geoJSON,o;try{o=s?parseGeoJSON(s,r):[]}catch(u){throw new Error(`Invalid geoJson format
`+u.message)}return fixNanhai(a,o),each$f(o,function(u){var c=u.name;fixTextCoords(a,u),fixDiaoyuIsland(a,u);var p=this._specialAreas&&this._specialAreas[c];p&&u.transformTo(p.left,p.top,p.width,p.height)},this),o},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function calculateBoundingRect(n){for(var r,a=0;a<n.length;a++){var s=n[a].getBoundingRect();r=r||s.clone(),r.union(s)}return r}function parseInput(n){return isString(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var storage=createHashMap();const geoSourceManager={registerMap:function(n,r,a){if(r.svg){var s=new GeoSVGResource(n,r.svg);storage.set(n,s)}else{var o=r.geoJson||r.geoJSON;o&&!r.features?a=r.specialAreas:o=r;var s=new GeoJSONResource(n,o,a);storage.set(n,s)}},getGeoResource:function(n){return storage.get(n)},getMapForUser:function(n){var r=storage.get(n);return r&&r.type==="geoJSON"&&r.getMapForUser()},load:function(n,r,a){var s=storage.get(n);if(s)return s.load(r,a)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(n){var r=n.getItemStyle(),a=n.get("areaColor");return a!=null&&(r.fill=a),r}function fixLineStyle(n){var r=n.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}var MapDraw=function(){function n(r){var a=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(r.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new Group$3),a.add(this._svgGroup=new Group$3)}return n.prototype.draw=function(r,a,s,o,u){var c=r.mainType==="geo",p=r.getData&&r.getData();c&&a.eachComponent({mainType:"series",subType:"map"},function(uc){!p&&uc.getHostGeoModel()===r&&(p=uc.getData())});var d=r.coordinateSystem,_=this._regionsGroup,ja=this.group,Ja=d.getTransformInfo(),ec=Ja.raw,tc=Ja.roam,rc=!_.childAt(0)||u;rc?(ja.x=tc.x,ja.y=tc.y,ja.scaleX=tc.scaleX,ja.scaleY=tc.scaleY,ja.dirty()):updateProps$1(ja,tc,r);var nc=p&&p.getVisual("visualMeta")&&p.getVisual("visualMeta").length>0,ic={api:s,geo:d,mapOrGeoModel:r,data:p,isVisualEncodedByVisualMap:nc,isGeo:c,transformInfoRaw:ec};d.resourceType==="geoJSON"?this._buildGeoJSON(ic):d.resourceType==="geoSVG"&&this._buildSVG(ic),this._updateController(r,a,s),this._updateMapSelectHandler(r,_,s,o)},n.prototype._buildGeoJSON=function(r){var a=this._regionsGroupByName=createHashMap(),s=createHashMap(),o=this._regionsGroup,u=r.transformInfoRaw,c=r.mapOrGeoModel,p=r.data,d=r.geo.projection,_=d&&d.stream;function ja(tc,rc){return rc&&(tc=rc(tc)),tc&&[tc[0]*u.scaleX+u.x,tc[1]*u.scaleY+u.y]}function Ja(tc){for(var rc=[],nc=!_&&d&&d.project,ic=0;ic<tc.length;++ic){var uc=ja(tc[ic],nc);uc&&rc.push(uc)}return rc}function ec(tc){return{shape:{points:Ja(tc)}}}o.removeAll(),each$f(r.geo.regions,function(tc){var rc=tc.name,nc=a.get(rc),ic=s.get(rc)||{},uc=ic.dataIdx,eh=ic.regionModel;nc||(nc=a.set(rc,new Group$3),o.add(nc),uc=p?p.indexOfName(rc):null,eh=r.isGeo?c.getRegionModel(rc):p?p.getItemModel(uc):null,s.set(rc,{dataIdx:uc,regionModel:eh}));var rh=[],ah=[];each$f(tc.geometries,function(uh){if(uh.type==="polygon"){var ch=[uh.exterior].concat(uh.interiors||[]);_&&(ch=projectPolys(ch,_)),each$f(ch,function(dh){rh.push(new Polygon(ec(dh)))})}else{var hh=uh.points;_&&(hh=projectPolys(hh,_,!0)),each$f(hh,function(dh){ah.push(new Polyline$1(ec(dh)))})}});var ih=ja(tc.getCenter(),d&&d.project);function oh(uh,ch){if(uh.length){var hh=new CompoundPath$1({culling:!0,segmentIgnoreThreshold:1,shape:{paths:uh}});nc.add(hh),applyOptionStyleForRegion(r,hh,uc,eh),resetLabelForRegion(r,hh,rc,eh,c,uc,ih),ch&&(fixLineStyle(hh),each$f(hh.states,fixLineStyle))}}oh(rh),oh(ah,!0)}),a.each(function(tc,rc){var nc=s.get(rc),ic=nc.dataIdx,uc=nc.regionModel;resetEventTriggerForRegion(r,tc,rc,uc,c,ic),resetTooltipForRegion(r,tc,rc,uc,c),resetStateTriggerForRegion(r,tc,rc,uc,c)},this)},n.prototype._buildSVG=function(r){var a=r.geo.map,s=r.transformInfoRaw;this._svgGroup.x=s.x,this._svgGroup.y=s.y,this._svgGroup.scaleX=s.scaleX,this._svgGroup.scaleY=s.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var o=this._svgDispatcherMap=createHashMap(),u=!1;each$f(this._svgGraphicRecord.named,function(c){var p=c.name,d=r.mapOrGeoModel,_=r.data,ja=c.svgNodeTagLower,Ja=c.el,ec=_?_.indexOfName(p):null,tc=d.getRegionModel(p);if(OPTION_STYLE_ENABLED_TAG_MAP.get(ja)!=null&&Ja instanceof Displayable$1&&applyOptionStyleForRegion(r,Ja,ec,tc),Ja instanceof Displayable$1&&(Ja.culling=!0),Ja.z2EmphasisLift=0,!c.namedFrom&&(LABEL_HOST_MAP.get(ja)!=null&&resetLabelForRegion(r,Ja,p,tc,d,ec,null),resetEventTriggerForRegion(r,Ja,p,tc,d,ec),resetTooltipForRegion(r,Ja,p,tc,d),STATE_TRIGGER_TAG_MAP.get(ja)!=null)){var rc=resetStateTriggerForRegion(r,Ja,p,tc,d);rc==="self"&&(u=!0);var nc=o.get(p)||o.set(p,[]);nc.push(Ja)}},this),this._enableBlurEntireSVG(u,r)},n.prototype._enableBlurEntireSVG=function(r,a){if(r&&a.isGeo){var s=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),o=s.opacity;this._svgGraphicRecord.root.traverse(function(u){if(!u.isGroup){setDefaultStateProxy(u);var c=u.ensureState("blur").style||{};c.opacity==null&&o!=null&&(c.opacity=o),u.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(r,a){if(r==null)return[];var s=a.coordinateSystem;if(s.resourceType==="geoJSON"){var o=this._regionsGroupByName;if(o){var u=o.get(r);return u?[u]:[]}}else if(s.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},n.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},n.prototype._useSVG=function(r){var a=geoSourceManager.getGeoResource(r);if(a&&a.type==="geoSVG"){var s=a.useGraphic(this.uid);this._svgGroup.add(s.root),this._svgGraphicRecord=s,this._svgMapName=r}},n.prototype._freeSVG=function(){var r=this._svgMapName;if(r!=null){var a=geoSourceManager.getGeoResource(r);a&&a.type==="geoSVG"&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(r,a,s){var o=r.coordinateSystem,u=this._controller,c=this._controllerHost;c.zoomLimit=r.get("scaleLimit"),c.zoom=o.getZoom(),u.enable(r.get("roam")||!1);var p=r.mainType;function d(){var _={type:"geoRoam",componentType:p};return _[p+"Id"]=r.id,_}u.off("pan").on("pan",function(_){this._mouseDownFlag=!1,updateViewOnPan(c,_.dx,_.dy),s.dispatchAction(extend$2(d(),{dx:_.dx,dy:_.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(_){this._mouseDownFlag=!1,updateViewOnZoom(c,_.scale,_.originX,_.originY),s.dispatchAction(extend$2(d(),{zoom:_.scale,originX:_.originX,originY:_.originY,animation:{duration:0}}))},this),u.setPointerChecker(function(_,ja,Ja){return o.containPoint([ja,Ja])&&!onIrrelevantElement(_,s,r)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var a=r.getTextContent();a&&(a.ignore=mapLabelRaw(a).ignore)})},n.prototype._updateMapSelectHandler=function(r,a,s,o){var u=this;a.off("mousedown"),a.off("click"),r.get("selectedMode")&&(a.on("mousedown",function(){u._mouseDownFlag=!0}),a.on("click",function(c){u._mouseDownFlag&&(u._mouseDownFlag=!1)}))},n}();function applyOptionStyleForRegion(n,r,a,s){var o=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),c=s.getModel(["blur","itemStyle"]),p=s.getModel(["select","itemStyle"]),d=getFixedItemStyle(o),_=getFixedItemStyle(u),ja=getFixedItemStyle(p),Ja=getFixedItemStyle(c),ec=n.data;if(ec){var tc=ec.getItemVisual(a,"style"),rc=ec.getItemVisual(a,"decal");n.isVisualEncodedByVisualMap&&tc.fill&&(d.fill=tc.fill),rc&&(d.decal=createOrUpdatePatternFromDecal(rc,n.api))}r.setStyle(d),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=_,r.ensureState("select").style=ja,r.ensureState("blur").style=Ja,setDefaultStateProxy(r)}function resetLabelForRegion(n,r,a,s,o,u,c){var p=n.data,d=n.isGeo,_=p&&isNaN(p.get(p.mapDimension("value"),u)),ja=p&&p.getItemLayout(u);if(d||_||ja&&ja.showLabel){var Ja=d?a:u,ec=void 0;(!p||u>=0)&&(ec=o);var tc=c?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(r,getLabelStatesModels(s),{labelFetcher:ec,labelDataIndex:Ja,defaultText:a},tc);var rc=r.getTextContent();if(rc&&(mapLabelRaw(rc).ignore=rc.ignore,r.textConfig&&c)){var nc=r.getBoundingRect().clone();r.textConfig.layoutRect=nc,r.textConfig.position=[(c[0]-nc.x)/nc.width*100+"%",(c[1]-nc.y)/nc.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function resetEventTriggerForRegion(n,r,a,s,o,u){n.data?n.data.setItemGraphicEl(u,r):getECData(r).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:a,region:s&&s.option||{}}}function resetTooltipForRegion(n,r,a,s,o){n.data||setTooltipConfig({el:r,componentModel:o,itemName:a,itemTooltipOption:s.get("tooltip")})}function resetStateTriggerForRegion(n,r,a,s,o){r.highDownSilentOnTouch=!!o.get("selectedMode");var u=s.getModel("emphasis"),c=u.get("focus");return toggleHoverEmphasis(r,c,u.get("blurScope"),u.get("disabled")),n.isGeo&&enableComponentHighDownFeatures(r,o,a),c}function projectPolys(n,r,a){var s=[],o;function u(){o=[]}function c(){o.length&&(s.push(o),o=[])}var p=r({polygonStart:u,polygonEnd:c,lineStart:u,lineEnd:c,point:function(d,_){isFinite(d)&&isFinite(_)&&o.push([d,_])},sphere:function(){}});return!a&&p.polygonStart(),each$f(n,function(d){p.lineStart();for(var _=0;_<d.length;_++)p.point(d[_][0],d[_][1]);p.lineEnd()}),!a&&p.polygonEnd(),s}var MapView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o,u){if(!(u&&u.type==="mapToggleSelect"&&u.from===this.uid)){var c=this.group;if(c.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&u&&u.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),u&&u.type==="geoRoam"&&u.componentType==="series"&&u.seriesId===a.id){var p=this._mapDraw;p&&c.add(p.group)}else if(a.needsDrawMap){var p=this._mapDraw||new MapDraw(o);c.add(p.group),p.draw(a,s,o,this,u),this._mapDraw=p}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&s.getComponent("legend")&&this._renderSymbols(a,s,o)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(a,s,o){var u=a.originalData,c=this.group;u.each(u.mapDimension("value"),function(p,d){if(!isNaN(p)){var _=u.getItemLayout(d);if(!(!_||!_.point)){var ja=_.point,Ja=_.offset,ec=new Circle({style:{fill:a.getData().getVisual("style").fill},shape:{cx:ja[0]+Ja*9,cy:ja[1],r:3},silent:!0,z2:8+(Ja?0:Z2_EMPHASIS_LIFT+1)});if(!Ja){var tc=a.mainSeries.getData(),rc=u.getName(d),nc=tc.indexOfName(rc),ic=u.getItemModel(d),uc=ic.getModel("label"),eh=tc.getItemGraphicEl(nc);setLabelStyle(ec,getLabelStatesModels(ic),{labelFetcher:{getFormattedLabel:function(rh,ah){return a.getFormattedLabel(nc,ah)}},defaultText:rc}),ec.disableLabelAnimation=!0,uc.get("position")||ec.setTextConfig({position:"bottom"}),eh.onHoverStateChange=function(rh){setStatesFlag(ec,rh)}}c.add(ec)}}})},r.type="map",r}(ChartView),MapSeries=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(s){if(s!=null){var o=this.getData().getName(s),u=this.coordinateSystem,c=u.getRegion(o);return c&&u.dataToPoint(c.getCenter())}},a}return r.prototype.getInitialData=function(a){for(var s=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),o=createHashMap(),u=[],c=0,p=s.count();c<p;c++){var d=s.getName(c);o.set(d,!0)}var _=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(_.regions,function(ja){var Ja=ja.name;o.get(Ja)||u.push(Ja)}),s.appendValues([],u),s},r.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return a!=null?this.ecModel.getComponent("geo",a):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(a){var s=this.getData();return s.get(s.mapDimension("value"),a)},r.prototype.getRegionModel=function(a){var s=this.getData();return s.getItemModel(s.indexOfName(a))},r.prototype.formatTooltip=function(a,s,o){for(var u=this.getData(),c=this.getRawValue(a),p=u.getName(a),d=this.seriesGroup,_=[],ja=0;ja<d.length;ja++){var Ja=d[ja].originalData.indexOfName(p),ec=u.mapDimension("value");isNaN(d[ja].originalData.get(ec,Ja))||_.push(d[ja].name)}return createTooltipMarkup("section",{header:_.join(", "),noHeader:!_.length,blocks:[createTooltipMarkup("nameValue",{name:p,value:c})]})},r.prototype.setZoom=function(a){this.option.zoom=a},r.prototype.setCenter=function(a){this.option.center=a},r.prototype.getLegendIcon=function(a){var s=a.icon||"roundRect",o=createSymbol$1(s,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return o.setStyle(a.itemStyle),o.style.stroke="none",s.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill="#fff",o.style.lineWidth=2),o},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(SeriesModel);function dataStatistics(n,r){var a={};return each$f(n,function(s){s.each(s.mapDimension("value"),function(o,u){var c="ec-"+s.getName(u);a[c]=a[c]||[],isNaN(o)||a[c].push(o)})}),n[0].map(n[0].mapDimension("value"),function(s,o){for(var u="ec-"+n[0].getName(o),c=0,p=1/0,d=-1/0,_=a[u].length,ja=0;ja<_;ja++)p=Math.min(p,a[u][ja]),d=Math.max(d,a[u][ja]),c+=a[u][ja];var Ja;return r==="min"?Ja=p:r==="max"?Ja=d:r==="average"?Ja=c/_:Ja=c,_===0?NaN:Ja})}function mapDataStatistic(n){var r={};n.eachSeriesByType("map",function(a){var s=a.getHostGeoModel(),o=s?"o"+s.id:"i"+a.getMapType();(r[o]=r[o]||[]).push(a)}),each$f(r,function(a,s){for(var o=dataStatistics(map$1(a,function(c){return c.getData()}),a[0].get("mapValueCalculation")),u=0;u<a.length;u++)a[u].originalData=a[u].getData();for(var u=0;u<a.length;u++)a[u].seriesGroup=a,a[u].needsDrawMap=u===0&&!a[u].getHostGeoModel(),a[u].setData(o.cloneShallow()),a[u].mainSeries=a[0]})}function mapSymbolLayout(n){var r={};n.eachSeriesByType("map",function(a){var s=a.getMapType();if(!(a.getHostGeoModel()||r[s])){var o={};each$f(a.seriesGroup,function(c){var p=c.coordinateSystem,d=c.originalData;c.get("showLegendSymbol")&&n.getComponent("legend")&&d.each(d.mapDimension("value"),function(_,ja){var Ja=d.getName(ja),ec=p.getRegion(Ja);if(!(!ec||isNaN(_))){var tc=o[Ja]||0,rc=p.dataToPoint(ec.getCenter());o[Ja]=tc+1,d.setItemLayout(ja,{point:rc,offset:tc})}})});var u=a.getData();u.each(function(c){var p=u.getName(c),d=u.getItemLayout(c)||{};d.showLabel=!o[p],u.setItemLayout(c,d)}),r[s]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(n){__extends(r,n);function r(a){var s=n.call(this)||this;return s.type="view",s.dimensions=["x","y"],s._roamTransformable=new Transformable,s._rawTransformable=new Transformable,s.name=a,s}return r.prototype.setBoundingRect=function(a,s,o,u){return this._rect=new BoundingRect(a,s,o,u),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(a,s,o,u){this._transformTo(a,s,o,u),this._viewRect=new BoundingRect(a,s,o,u)},r.prototype._transformTo=function(a,s,o,u){var c=this.getBoundingRect(),p=this._rawTransformable;p.transform=c.calculateTransform(new BoundingRect(a,s,o,u));var d=p.parent;p.parent=null,p.decomposeTransform(),p.parent=d,this._updateTransform()},r.prototype.setCenter=function(a,s){a&&(this._center=[parsePercent(a[0],s.getWidth()),parsePercent(a[1],s.getHeight())],this._updateCenterAndZoom())},r.prototype.setZoom=function(a){a=a||1;var s=this.zoomLimit;s&&(s.max!=null&&(a=Math.min(s.max,a)),s.min!=null&&(a=Math.max(s.min,a))),this._zoom=a,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var a=this.getBoundingRect(),s=a.x+a.width/2,o=a.y+a.height/2;return[s,o]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),s=this._roamTransformable,o=this.getDefaultCenter(),u=this.getCenter(),c=this.getZoom();u=applyTransform$1([],u,a),o=applyTransform$1([],o,a),s.originX=u[0],s.originY=u[1],s.x=o[0]-u[0],s.y=o[1]-u[1],s.scaleX=s.scaleY=c,this._updateTransform()},r.prototype._updateTransform=function(){var a=this._roamTransformable,s=this._rawTransformable;s.parent=a,a.updateTransform(),s.updateTransform(),copy(this.transform||(this.transform=[]),s.transform||create$2()),this._rawTransform=s.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var a=this._rawTransformable,s=this._roamTransformable,o=new Transformable;return o.transform=s.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},r.prototype.dataToPoint=function(a,s,o){var u=s?this._rawTransform:this.transform;return o=o||[],u?v2ApplyTransform(o,a,u):copy$1(o,a)},r.prototype.pointToData=function(a){var s=this.invTransform;return s?v2ApplyTransform([],a,s):[a[0],a[1]]},r.prototype.convertToPixel=function(a,s,o){var u=getCoordSys$4(s);return u===this?u.dataToPoint(o):null},r.prototype.convertFromPixel=function(a,s,o){var u=getCoordSys$4(s);return u===this?u.pointToData(o):null},r.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},r.dimensions=["x","y"],r}(Transformable);function getCoordSys$4(n){var r=n.seriesModel;return r?r.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this,a)||this;u.dimensions=geo2DDimensions,u.type="geo",u._nameCoordMap=createHashMap(),u.map=s;var c=o.projection,p=geoSourceManager.load(s,o.nameMap,o.nameProperty),d=geoSourceManager.getGeoResource(s);u.resourceType=d?d.type:null;var _=u.regions=p.regions,ja=GEO_DEFAULT_PARAMS[d.type];u._regionsMap=p.regionsMap,u.regions=p.regions,u.projection=c;var Ja;if(c)for(var ec=0;ec<_.length;ec++){var tc=_[ec].getBoundingRect(c);Ja=Ja||tc.clone(),Ja.union(tc)}else Ja=p.boundingRect;return u.setBoundingRect(Ja.x,Ja.y,Ja.width,Ja.height),u.aspectScale=c?1:retrieve2(o.aspectScale,ja.aspectScale),u._invertLongitute=c?!1:ja.invertLongitute,u}return r.prototype._transformTo=function(a,s,o,u){var c=this.getBoundingRect(),p=this._invertLongitute;c=c.clone(),p&&(c.y=-c.y-c.height);var d=this._rawTransformable;d.transform=c.calculateTransform(new BoundingRect(a,s,o,u));var _=d.parent;d.parent=null,d.decomposeTransform(),d.parent=_,p&&(d.scaleY=-d.scaleY),this._updateTransform()},r.prototype.getRegion=function(a){return this._regionsMap.get(a)},r.prototype.getRegionByCoord=function(a){for(var s=this.regions,o=0;o<s.length;o++){var u=s[o];if(u.type==="geoJSON"&&u.contain(a))return s[o]}},r.prototype.addGeoCoord=function(a,s){this._nameCoordMap.set(a,s)},r.prototype.getGeoCoord=function(a){var s=this._regionsMap.get(a);return this._nameCoordMap.get(a)||s&&s.getCenter()},r.prototype.dataToPoint=function(a,s,o){if(isString(a)&&(a=this.getGeoCoord(a)),a){var u=this.projection;return u&&(a=u.project(a)),a&&this.projectedToPoint(a,s,o)}},r.prototype.pointToData=function(a){var s=this.projection;return s&&(a=s.unproject(a)),a&&this.pointToProjected(a)},r.prototype.pointToProjected=function(a){return n.prototype.pointToData.call(this,a)},r.prototype.projectedToPoint=function(a,s,o){return n.prototype.dataToPoint.call(this,a,s,o)},r.prototype.convertToPixel=function(a,s,o){var u=getCoordSys$3(s);return u===this?u.dataToPoint(o):null},r.prototype.convertFromPixel=function(a,s,o){var u=getCoordSys$3(s);return u===this?u.pointToData(o):null},r}(View);mixin(Geo,View);function getCoordSys$3(n){var r=n.geoModel,a=n.seriesModel;return r?r.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}const Geo$1=Geo;function resizeGeo(n,r){var a=n.get("boundingCoords");if(a!=null){var s=a[0],o=a[1];if(isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])){var u=this.projection;if(u){var c=s[0],p=s[1],d=o[0],_=o[1];s=[1/0,1/0],o=[-1/0,-1/0];var ja=function(oh,uh,ch,hh){for(var dh=ch-oh,gh=hh-uh,fh=0;fh<=100;fh++){var vh=fh/100,ph=u.project([oh+dh*vh,uh+gh*vh]);min$1(s,s,ph),max$1(o,o,ph)}};ja(c,p,d,p),ja(d,p,d,_),ja(d,_,c,_),ja(c,_,d,p)}this.setBoundingRect(s[0],s[1],o[0]-s[0],o[1]-s[1])}}var Ja=this.getBoundingRect(),ec=n.get("layoutCenter"),tc=n.get("layoutSize"),rc=r.getWidth(),nc=r.getHeight(),ic=Ja.width/Ja.height*this.aspectScale,uc=!1,eh,rh;ec&&tc&&(eh=[parsePercent(ec[0],rc),parsePercent(ec[1],nc)],rh=parsePercent(tc,Math.min(rc,nc)),!isNaN(eh[0])&&!isNaN(eh[1])&&!isNaN(rh)&&(uc=!0));var ah;if(uc)ah={},ic>1?(ah.width=rh,ah.height=rh/ic):(ah.height=rh,ah.width=rh*ic),ah.y=eh[1]-ah.height/2,ah.x=eh[0]-ah.width/2;else{var ih=n.getBoxLayoutParams();ih.aspect=ic,ah=getLayoutRect(ih,{width:rc,height:nc})}this.setViewRect(ah.x,ah.y,ah.width,ah.height),this.setCenter(n.get("center"),r),this.setZoom(n.get("zoom"))}function setGeoCoords(n,r){each$f(r.get("geoCoord"),function(a,s){n.addGeoCoord(s,a)})}var GeoCreator=function(){function n(){this.dimensions=geo2DDimensions}return n.prototype.create=function(r,a){var s=[];function o(c){return{nameProperty:c.get("nameProperty"),aspectScale:c.get("aspectScale"),projection:c.get("projection")}}r.eachComponent("geo",function(c,p){var d=c.get("map"),_=new Geo$1(d+p,d,extend$2({nameMap:c.get("nameMap")},o(c)));_.zoomLimit=c.get("scaleLimit"),s.push(_),c.coordinateSystem=_,_.model=c,_.resize=resizeGeo,_.resize(c,a)}),r.eachSeries(function(c){var p=c.get("coordinateSystem");if(p==="geo"){var d=c.get("geoIndex")||0;c.coordinateSystem=s[d]}});var u={};return r.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var p=c.getMapType();u[p]=u[p]||[],u[p].push(c)}}),each$f(u,function(c,p){var d=map$1(c,function(ja){return ja.get("nameMap")}),_=new Geo$1(p,p,extend$2({nameMap:mergeAll(d)},o(c[0])));_.zoomLimit=retrieve$1.apply(null,map$1(c,function(ja){return ja.get("scaleLimit")})),s.push(_),_.resize=resizeGeo,_.resize(c[0],a),each$f(c,function(ja){ja.coordinateSystem=_,setGeoCoords(_,ja)})}),s},n.prototype.getFilledRegions=function(r,a,s,o){for(var u=(r||[]).slice(),c=createHashMap(),p=0;p<u.length;p++)c.set(u[p].name,u[p]);var d=geoSourceManager.load(a,s,o);return each$f(d.regions,function(_){var ja=_.name;!c.get(ja)&&u.push({name:ja})}),u},n}(),geoCreator=new GeoCreator,GeoModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a,s,o){var u=geoSourceManager.getGeoResource(a.map);if(u&&u.type==="geoJSON"){var c=a.itemStyle=a.itemStyle||{};"color"in c||(c.color="#eee")}this.mergeDefaultAndTheme(a,o),defaultEmphasis(a,"label",["show"])},r.prototype.optionUpdated=function(){var a=this,s=this.option;s.regions=geoCreator.getFilledRegions(s.regions,s.map,s.nameMap,s.nameProperty);var o={};this._optionModelMap=reduce(s.regions||[],function(u,c){var p=c.name;return p&&(u.set(p,new Model(c,a,a.ecModel)),c.selected&&(o[p]=!0)),u},createHashMap()),s.selectedMap||(s.selectedMap=o)},r.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new Model(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(a,s){var o=this.getRegionModel(a),u=s==="normal"?o.get(["label","formatter"]):o.get(["emphasis","label","formatter"]),c={name:a};if(isFunction(u))return c.status=s,u(c);if(isString(u))return u.replace("{a}",a??"")},r.prototype.setZoom=function(a){this.option.zoom=a},r.prototype.setCenter=function(a){this.option.center=a},r.prototype.select=function(a){var s=this.option,o=s.selectedMode;if(o){o!=="multiple"&&(s.selectedMap=null);var u=s.selectedMap||(s.selectedMap={});u[a]=!0}},r.prototype.unSelect=function(a){var s=this.option.selectedMap;s&&(s[a]=!1)},r.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},r.prototype.isSelected=function(a){var s=this.option.selectedMap;return!!(s&&s[a])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}(ComponentModel);function getCenterCoord(n,r){return n.pointToProjected?n.pointToProjected(r):n.pointToData(r)}function updateCenterAndZoom(n,r,a,s){var o=n.getZoom(),u=n.getCenter(),c=r.zoom,p=n.projectedToPoint?n.projectedToPoint(u):n.dataToPoint(u);if(r.dx!=null&&r.dy!=null&&(p[0]-=r.dx,p[1]-=r.dy,n.setCenter(getCenterCoord(n,p),s)),c!=null){if(a){var d=a.min||0,_=a.max||1/0;c=Math.max(Math.min(o*c,_),d)/o}n.scaleX*=c,n.scaleY*=c;var ja=(r.originX-n.x)*(c-1),Ja=(r.originY-n.y)*(c-1);n.x-=ja,n.y-=Ja,n.updateTransform(),n.setCenter(getCenterCoord(n,p),s),n.setZoom(c*o)}return{center:n.getCenter(),zoom:n.getZoom()}}var GeoView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.focusBlurEnabled=!0,a}return r.prototype.init=function(a,s){this._api=s},r.prototype.render=function(a,s,o,u){if(this._model=a,!a.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(o));var c=this._mapDraw;c.draw(a,s,o,this,u),c.group.on("click",this._handleRegionClick,this),c.group.silent=a.get("silent"),this.group.add(c.group),this.updateSelectStatus(a,s,o)},r.prototype._handleRegionClick=function(a){var s;findEventDispatcher(a.target,function(o){return(s=getECData(o).eventData)!=null},!0),s&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:s.name})},r.prototype.updateSelectStatus=function(a,s,o){var u=this;this._mapDraw.group.traverse(function(c){var p=getECData(c).eventData;if(p)return u._model.isSelected(p.name)?o.enterSelect(c):o.leaveSelect(c),!0})},r.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(ComponentView);function registerMap(n,r,a){geoSourceManager.registerMap(n,r,a)}function install$Z(n){n.registerCoordinateSystem("geo",geoCreator),n.registerComponentModel(GeoModel),n.registerComponentView(GeoView),n.registerImpl("registerMap",registerMap),n.registerImpl("getMap",function(a){return geoSourceManager.getMapForUser(a)});function r(a,s){s.update="geo:updateSelectStatus",n.registerAction(s,function(o,u){var c={},p=[];return u.eachComponent({mainType:"geo",query:o},function(d){d[a](o.name);var _=d.coordinateSystem;each$f(_.regions,function(Ja){c[Ja.name]=d.isSelected(Ja.name)||!1});var ja=[];each$f(c,function(Ja,ec){c[ec]&&ja.push(ec)}),p.push({geoIndex:d.componentIndex,name:ja})}),{selected:c,allSelected:p,name:o.name}})}r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,s,o){var u=a.componentType||"series";s.eachComponent({mainType:u,query:a},function(c){var p=c.coordinateSystem;if(p.type==="geo"){var d=updateCenterAndZoom(p,a,c.get("scaleLimit"),o);c.setCenter&&c.setCenter(d.center),c.setZoom&&c.setZoom(d.zoom),u==="series"&&each$f(c.seriesGroup,function(_){_.setCenter(d.center),_.setZoom(d.zoom)})}})})}function install$Y(n){use(install$Z),n.registerChartView(MapView),n.registerSeriesModel(MapSeries),n.registerLayout(mapSymbolLayout),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",n.registerAction)}function init(n){var r=n;r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var a=[r],s,o;s=a.pop();)if(o=s.children,s.isExpand&&o.length)for(var u=o.length,c=u-1;c>=0;c--){var p=o[c];p.hierNode={defaultAncestor:null,ancestor:p,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},a.push(p)}}function firstWalk(n,r){var a=n.isExpand?n.children:[],s=n.parentNode.children,o=n.hierNode.i?s[n.hierNode.i-1]:null;if(a.length){executeShifts(n);var u=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;o?(n.hierNode.prelim=o.hierNode.prelim+r(n,o),n.hierNode.modifier=n.hierNode.prelim-u):n.hierNode.prelim=u}else o&&(n.hierNode.prelim=o.hierNode.prelim+r(n,o));n.parentNode.hierNode.defaultAncestor=apportion(n,o,n.parentNode.hierNode.defaultAncestor||s[0],r)}function secondWalk(n){var r=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:r},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function separation(n){return arguments.length?n:defaultSeparation}function radialCoordinate(n,r){return n-=Math.PI/2,{x:r*Math.cos(n),y:r*Math.sin(n)}}function getViewRect$4(n,r){return getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function executeShifts(n){for(var r=n.children,a=r.length,s=0,o=0;--a>=0;){var u=r[a];u.hierNode.prelim+=s,u.hierNode.modifier+=s,o+=u.hierNode.change,s+=u.hierNode.shift+o}}function apportion(n,r,a,s){if(r){for(var o=n,u=n,c=u.parentNode.children[0],p=r,d=o.hierNode.modifier,_=u.hierNode.modifier,ja=c.hierNode.modifier,Ja=p.hierNode.modifier;p=nextRight(p),u=nextLeft(u),p&&u;){o=nextRight(o),c=nextLeft(c),o.hierNode.ancestor=n;var ec=p.hierNode.prelim+Ja-u.hierNode.prelim-_+s(p,u);ec>0&&(moveSubtree(nextAncestor(p,n,a),n,ec),_+=ec,d+=ec),Ja+=p.hierNode.modifier,_+=u.hierNode.modifier,d+=o.hierNode.modifier,ja+=c.hierNode.modifier}p&&!nextRight(o)&&(o.hierNode.thread=p,o.hierNode.modifier+=Ja-d),u&&!nextLeft(c)&&(c.hierNode.thread=u,c.hierNode.modifier+=_-ja,a=n)}return a}function nextRight(n){var r=n.children;return r.length&&n.isExpand?r[r.length-1]:n.hierNode.thread}function nextLeft(n){var r=n.children;return r.length&&n.isExpand?r[0]:n.hierNode.thread}function nextAncestor(n,r,a){return n.hierNode.ancestor.parentNode===r.parentNode?n.hierNode.ancestor:a}function moveSubtree(n,r,a){var s=a/(r.hierNode.i-n.hierNode.i);r.hierNode.change-=s,r.hierNode.shift+=a,r.hierNode.modifier+=a,r.hierNode.prelim+=a,n.hierNode.change+=s}function defaultSeparation(n,r){return n.parentNode===r.parentNode?1:2}var TreeEdgeShape=function(){function n(){this.parentPoint=[],this.childPoints=[]}return n}(),TreePath=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new TreeEdgeShape},r.prototype.buildPath=function(a,s){var o=s.childPoints,u=o.length,c=s.parentPoint,p=o[0],d=o[u-1];if(u===1){a.moveTo(c[0],c[1]),a.lineTo(p[0],p[1]);return}var _=s.orient,ja=_==="TB"||_==="BT"?0:1,Ja=1-ja,ec=parsePercent(s.forkPosition,1),tc=[];tc[ja]=c[ja],tc[Ja]=c[Ja]+(d[Ja]-c[Ja])*ec,a.moveTo(c[0],c[1]),a.lineTo(tc[0],tc[1]),a.moveTo(p[0],p[1]),tc[ja]=p[ja],a.lineTo(tc[0],tc[1]),tc[ja]=d[ja],a.lineTo(tc[0],tc[1]),a.lineTo(d[0],d[1]);for(var rc=1;rc<u-1;rc++){var nc=o[rc];a.moveTo(nc[0],nc[1]),tc[ja]=nc[ja],a.lineTo(tc[0],tc[1])}},r}(Path),TreeView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._mainGroup=new Group$3,a}return r.prototype.init=function(a,s){this._controller=new RoamController(s.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(a,s,o){var u=a.getData(),c=a.layoutInfo,p=this._mainGroup,d=a.get("layout");d==="radial"?(p.x=c.x+c.width/2,p.y=c.y+c.height/2):(p.x=c.x,p.y=c.y),this._updateViewCoordSys(a,o),this._updateController(a,s,o);var _=this._data;u.diff(_).add(function(ja){symbolNeedsDraw(u,ja)&&updateNode(u,ja,null,p,a)}).update(function(ja,Ja){var ec=_.getItemGraphicEl(Ja);if(!symbolNeedsDraw(u,ja)){ec&&removeNode$1(_,Ja,ec,p,a);return}updateNode(u,ja,ec,p,a)}).remove(function(ja){var Ja=_.getItemGraphicEl(ja);Ja&&removeNode$1(_,ja,Ja,p,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),a.get("expandAndCollapse")===!0&&u.eachItemGraphicEl(function(ja,Ja){ja.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:Ja})})}),this._data=u},r.prototype._updateViewCoordSys=function(a,s){var o=a.getData(),u=[];o.each(function(Ja){var ec=o.getItemLayout(Ja);ec&&!isNaN(ec.x)&&!isNaN(ec.y)&&u.push([+ec.x,+ec.y])});var c=[],p=[];fromPoints(u,c,p);var d=this._min,_=this._max;p[0]-c[0]===0&&(c[0]=d?d[0]:c[0]-1,p[0]=_?_[0]:p[0]+1),p[1]-c[1]===0&&(c[1]=d?d[1]:c[1]-1,p[1]=_?_[1]:p[1]+1);var ja=a.coordinateSystem=new View;ja.zoomLimit=a.get("scaleLimit"),ja.setBoundingRect(c[0],c[1],p[0]-c[0],p[1]-c[1]),ja.setCenter(a.get("center"),s),ja.setZoom(a.get("zoom")),this.group.attr({x:ja.x,y:ja.y,scaleX:ja.scaleX,scaleY:ja.scaleY}),this._min=c,this._max=p},r.prototype._updateController=function(a,s,o){var u=this,c=this._controller,p=this._controllerHost,d=this.group;c.setPointerChecker(function(_,ja,Ja){var ec=d.getBoundingRect();return ec.applyTransform(d.transform),ec.contain(ja,Ja)&&!onIrrelevantElement(_,o,a)}),c.enable(a.get("roam")),p.zoomLimit=a.get("scaleLimit"),p.zoom=a.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(_){updateViewOnPan(p,_.dx,_.dy),o.dispatchAction({seriesId:a.id,type:"treeRoam",dx:_.dx,dy:_.dy})}).on("zoom",function(_){updateViewOnZoom(p,_.scale,_.originX,_.originY),o.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:_.scale,originX:_.originX,originY:_.originY}),u._updateNodeAndLinkScale(a),o.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(a){var s=a.getData(),o=this._getNodeGlobalScale(a);s.eachItemGraphicEl(function(u,c){u.setSymbolScale(o)})},r.prototype._getNodeGlobalScale=function(a){var s=a.coordinateSystem;if(s.type!=="view")return 1;var o=this._nodeScaleRatio,u=s.scaleX||1,c=s.getZoom(),p=(c-1)*o+1;return p/u},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},r.type="tree",r}(ChartView);function symbolNeedsDraw(n,r){var a=n.getItemLayout(r);return a&&!isNaN(a.x)&&!isNaN(a.y)}function updateNode(n,r,a,s,o){var u=!a,c=n.tree.getNodeByDataIndex(r),p=c.getModel(),d=c.getVisual("style").fill,_=c.isExpand===!1&&c.children.length!==0?d:"#fff",ja=n.tree.root,Ja=c.parentNode===ja?c:c.parentNode||c,ec=n.getItemGraphicEl(Ja.dataIndex),tc=Ja.getLayout(),rc=ec?{x:ec.__oldX,y:ec.__oldY,rawX:ec.__radialOldRawX,rawY:ec.__radialOldRawY}:tc,nc=c.getLayout();u?(a=new Symbol$1(n,r,null,{symbolInnerColor:_,useNameLabel:!0}),a.x=rc.x,a.y=rc.y):a.updateData(n,r,null,{symbolInnerColor:_,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=nc.rawX,a.__radialRawY=nc.rawY,s.add(a),n.setItemGraphicEl(r,a),a.__oldX=a.x,a.__oldY=a.y,updateProps$1(a,{x:nc.x,y:nc.y},o);var ic=a.getSymbolPath();if(o.get("layout")==="radial"){var uc=ja.children[0],eh=uc.getLayout(),rh=uc.children.length,ah=void 0,ih=void 0;if(nc.x===eh.x&&c.isExpand===!0&&uc.children.length){var oh={x:(uc.children[0].getLayout().x+uc.children[rh-1].getLayout().x)/2,y:(uc.children[0].getLayout().y+uc.children[rh-1].getLayout().y)/2};ah=Math.atan2(oh.y-eh.y,oh.x-eh.x),ah<0&&(ah=Math.PI*2+ah),ih=oh.x<eh.x,ih&&(ah=ah-Math.PI)}else ah=Math.atan2(nc.y-eh.y,nc.x-eh.x),ah<0&&(ah=Math.PI*2+ah),c.children.length===0||c.children.length!==0&&c.isExpand===!1?(ih=nc.x<eh.x,ih&&(ah=ah-Math.PI)):(ih=nc.x>eh.x,ih||(ah=ah-Math.PI));var uh=ih?"left":"right",ch=p.getModel("label"),hh=ch.get("rotate"),dh=hh*(Math.PI/180),gh=ic.getTextContent();gh&&(ic.setTextConfig({position:ch.get("position")||uh,rotation:hh==null?-ah:dh,origin:"center"}),gh.setStyle("verticalAlign","middle"))}var fh=p.get(["emphasis","focus"]),vh=fh==="relative"?concatArray(c.getAncestorsIndices(),c.getDescendantIndices()):fh==="ancestor"?c.getAncestorsIndices():fh==="descendant"?c.getDescendantIndices():null;vh&&(getECData(a).focus=vh),drawEdge(o,c,ja,a,rc,tc,nc,s),a.__edge&&(a.onHoverStateChange=function(ph){if(ph!=="blur"){var yh=c.parentNode&&n.getItemGraphicEl(c.parentNode.dataIndex);yh&&yh.hoverState===HOVER_STATE_BLUR||setStatesFlag(a.__edge,ph)}})}function drawEdge(n,r,a,s,o,u,c,p){var d=r.getModel(),_=n.get("edgeShape"),ja=n.get("layout"),Ja=n.getOrient(),ec=n.get(["lineStyle","curveness"]),tc=n.get("edgeForkPosition"),rc=d.getModel("lineStyle").getLineStyle(),nc=s.__edge;if(_==="curve")r.parentNode&&r.parentNode!==a&&(nc||(nc=s.__edge=new BezierCurve({shape:getEdgeShape(ja,Ja,ec,o,o)})),updateProps$1(nc,{shape:getEdgeShape(ja,Ja,ec,u,c)},n));else if(_==="polyline"&&ja==="orthogonal"&&r!==a&&r.children&&r.children.length!==0&&r.isExpand===!0){for(var ic=r.children,uc=[],eh=0;eh<ic.length;eh++){var rh=ic[eh].getLayout();uc.push([rh.x,rh.y])}nc||(nc=s.__edge=new TreePath({shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]],orient:Ja,forkPosition:tc}})),updateProps$1(nc,{shape:{parentPoint:[c.x,c.y],childPoints:uc}},n)}nc&&!(_==="polyline"&&!r.isExpand)&&(nc.useStyle(defaults({strokeNoScale:!0,fill:null},rc)),setStatesStylesFromModel(nc,d,"lineStyle"),setDefaultStateProxy(nc),p.add(nc))}function removeNodeEdge(n,r,a,s,o){var u=r.tree.root,c=getSourceNode(u,n),p=c.source,d=c.sourceLayout,_=r.getItemGraphicEl(n.dataIndex);if(_){var ja=r.getItemGraphicEl(p.dataIndex),Ja=ja.__edge,ec=_.__edge||(p.isExpand===!1||p.children.length===1?Ja:void 0),tc=s.get("edgeShape"),rc=s.get("layout"),nc=s.get("orient"),ic=s.get(["lineStyle","curveness"]);ec&&(tc==="curve"?removeElement(ec,{shape:getEdgeShape(rc,nc,ic,d,d),style:{opacity:0}},s,{cb:function(){a.remove(ec)},removeOpt:o}):tc==="polyline"&&s.get("layout")==="orthogonal"&&removeElement(ec,{shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]]},style:{opacity:0}},s,{cb:function(){a.remove(ec)},removeOpt:o}))}}function getSourceNode(n,r){for(var a=r.parentNode===n?r:r.parentNode||r,s;s=a.getLayout(),s==null;)a=a.parentNode===n?a:a.parentNode||a;return{source:a,sourceLayout:s}}function removeNode$1(n,r,a,s,o){var u=n.tree.getNodeByDataIndex(r),c=n.tree.root,p=getSourceNode(c,u).sourceLayout,d={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};removeElement(a,{x:p.x+1,y:p.y+1},o,{cb:function(){s.remove(a),n.setItemGraphicEl(r,null)},removeOpt:d}),a.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:d}),u.children.forEach(function(_){removeNodeEdge(_,n,s,o,d)}),removeNodeEdge(u,n,s,o,d)}function getEdgeShape(n,r,a,s,o){var u,c,p,d,_,ja,Ja,ec;if(n==="radial"){_=s.rawX,Ja=s.rawY,ja=o.rawX,ec=o.rawY;var tc=radialCoordinate(_,Ja),rc=radialCoordinate(_,Ja+(ec-Ja)*a),nc=radialCoordinate(ja,ec+(Ja-ec)*a),ic=radialCoordinate(ja,ec);return{x1:tc.x||0,y1:tc.y||0,x2:ic.x||0,y2:ic.y||0,cpx1:rc.x||0,cpy1:rc.y||0,cpx2:nc.x||0,cpy2:nc.y||0}}else _=s.x,Ja=s.y,ja=o.x,ec=o.y,(r==="LR"||r==="RL")&&(u=_+(ja-_)*a,c=Ja,p=ja+(_-ja)*a,d=ec),(r==="TB"||r==="BT")&&(u=_,c=Ja+(ec-Ja)*a,p=ja,d=ec+(Ja-ec)*a);return{x1:_,y1:Ja,x2:ja,y2:ec,cpx1:u,cpy1:c,cpx2:p,cpy2:d}}var inner$e=makeInner();function linkSeriesData(n){var r=n.mainData,a=n.datas;a||(a={main:r},n.datasAttr={main:"data"}),n.datas=n.mainData=null,linkAll(r,a,n),each$f(a,function(s){each$f(r.TRANSFERABLE_METHODS,function(o){s.wrapMethod(o,curry$1(transferInjection,n))})}),r.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,n)),each$f(r.CHANGABLE_METHODS,function(s){r.wrapMethod(s,curry$1(changeInjection,n))}),assert(a[r.dataType]===r)}function transferInjection(n,r){if(isMainData(this)){var a=extend$2({},inner$e(this).datas);a[this.dataType]=r,linkAll(r,a,n)}else linkSingle(r,this.dataType,inner$e(this).mainData,n);return r}function changeInjection(n,r){return n.struct&&n.struct.update(),r}function cloneShallowInjection(n,r){return each$f(inner$e(r).datas,function(a,s){a!==r&&linkSingle(a.cloneShallow(),s,r,n)}),r}function getLinkedData(n){var r=inner$e(this).mainData;return n==null||r==null?r:inner$e(r).datas[n]}function getLinkedDataAll(){var n=inner$e(this).mainData;return n==null?[{data:n}]:map$1(keys(inner$e(n).datas),function(r){return{type:r,data:inner$e(n).datas[r]}})}function isMainData(n){return inner$e(n).mainData===n}function linkAll(n,r,a){inner$e(n).datas={},each$f(r,function(s,o){linkSingle(s,o,n,a)})}function linkSingle(n,r,a,s){inner$e(a).datas[r]=n,inner$e(n).mainData=a,n.dataType=r,s.struct&&(n[s.structAttr]=s.struct,s.struct[s.datasAttr[r]]=n),n.getLinkedData=getLinkedData,n.getLinkedDataAll=getLinkedDataAll}var TreeNode$1=function(){function n(r,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=r||"",this.hostTree=a}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(r,a,s){isFunction(r)&&(s=a,a=r,r=null),r=r||{},isString(r)&&(r={order:r});var o=r.order||"preorder",u=this[r.attr||"children"],c;o==="preorder"&&(c=a.call(s,this));for(var p=0;!c&&p<u.length;p++)u[p].eachNode(r,a,s);o==="postorder"&&a.call(s,this)},n.prototype.updateDepthAndHeight=function(r){var a=0;this.depth=r;for(var s=0;s<this.children.length;s++){var o=this.children[s];o.updateDepthAndHeight(r+1),o.height>a&&(a=o.height)}this.height=a+1},n.prototype.getNodeById=function(r){if(this.getId()===r)return this;for(var a=0,s=this.children,o=s.length;a<o;a++){var u=s[a].getNodeById(r);if(u)return u}},n.prototype.contains=function(r){if(r===this)return!0;for(var a=0,s=this.children,o=s.length;a<o;a++){var u=s[a].contains(r);if(u)return u}},n.prototype.getAncestors=function(r){for(var a=[],s=r?this:this.parentNode;s;)a.push(s),s=s.parentNode;return a.reverse(),a},n.prototype.getAncestorsIndices=function(){for(var r=[],a=this;a;)r.push(a.dataIndex),a=a.parentNode;return r.reverse(),r},n.prototype.getDescendantIndices=function(){var r=[];return this.eachNode(function(a){r.push(a.dataIndex)}),r},n.prototype.getValue=function(r){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(r||"value"),this.dataIndex)},n.prototype.setLayout=function(r,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,r,a)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(r){if(!(this.dataIndex<0)){var a=this.hostTree,s=a.data.getItemModel(this.dataIndex);return s.getModel(r)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(r,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,r,a)},n.prototype.getVisual=function(r){return this.hostTree.data.getItemVisual(this.dataIndex,r)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var r=this.parentNode.children,a=0;a<r.length;++a)if(r[a]===this)return a;return-1}return-1},n.prototype.isAncestorOf=function(r){for(var a=r.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},n.prototype.isDescendantOf=function(r){return r!==this&&r.isAncestorOf(this)},n}(),Tree$1=function(){function n(r){this.type="tree",this._nodes=[],this.hostModel=r}return n.prototype.eachNode=function(r,a,s){this.root.eachNode(r,a,s)},n.prototype.getNodeByDataIndex=function(r){var a=this.data.getRawIndex(r);return this._nodes[a]},n.prototype.getNodeById=function(r){return this.root.getNodeById(r)},n.prototype.update=function(){for(var r=this.data,a=this._nodes,s=0,o=a.length;s<o;s++)a[s].dataIndex=-1;for(var s=0,o=r.count();s<o;s++)a[r.getRawIndex(s)].dataIndex=s},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(r,a,s){var o=new n(a),u=[],c=1;p(r);function p(ja,Ja){var ec=ja.value;c=Math.max(c,isArray$1(ec)?ec.length:1),u.push(ja);var tc=new TreeNode$1(convertOptionIdName(ja.name,""),o);Ja?addChild(tc,Ja):o.root=tc,o._nodes.push(tc);var rc=ja.children;if(rc)for(var nc=0;nc<rc.length;nc++)p(rc[nc],tc)}o.root.updateDepthAndHeight(0);var d=prepareSeriesDataSchema(u,{coordDimensions:["value"],dimensionsCount:c}).dimensions,_=new SeriesData(d,a);return _.initData(u),s&&s(_),linkSeriesData({mainData:_,struct:o,structAttr:"tree"}),o.update(),o},n}();function addChild(n,r){var a=r.children;n.parentNode!==r&&(a.push(n),n.parentNode=r)}function retrieveTargetInfo(n,r,a){if(n&&indexOf(r,n.type)>=0){var s=a.getData().tree.root,o=n.targetNode;if(isString(o)&&(o=s.getNodeById(o)),o&&s.contains(o))return{node:o};var u=n.targetNodeId;if(u!=null&&(o=s.getNodeById(u)))return{node:o}}}function getPathToRoot(n){for(var r=[];n;)n=n.parentNode,n&&r.push(n);return r.reverse()}function aboveViewRoot(n,r){var a=getPathToRoot(n);return indexOf(a,r)>=0}function wrapTreePathInfo(n,r){for(var a=[];n;){var s=n.dataIndex;a.push({name:n.name,dataIndex:s,value:r.getRawValue(s)}),n=n.parentNode}return a.reverse(),a}var TreeSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return r.prototype.getInitialData=function(a){var s={name:a.name,children:a.data},o=a.leaves||{},u=new Model(o,this,this.ecModel),c=Tree$1.createTree(s,this,p);function p(Ja){Ja.wrapMethod("getItemModel",function(ec,tc){var rc=c.getNodeByDataIndex(tc);return rc&&rc.children.length&&rc.isExpand||(ec.parentModel=u),ec})}var d=0;c.eachNode("preorder",function(Ja){Ja.depth>d&&(d=Ja.depth)});var _=a.expandAndCollapse,ja=_&&a.initialTreeDepth>=0?a.initialTreeDepth:d;return c.root.eachNode("preorder",function(Ja){var ec=Ja.hostTree.data.getRawDataItem(Ja.dataIndex);Ja.isExpand=ec&&ec.collapsed!=null?!ec.collapsed:Ja.depth<=ja}),c.data},r.prototype.getOrient=function(){var a=this.get("orient");return a==="horizontal"?a="LR":a==="vertical"&&(a="TB"),a},r.prototype.setZoom=function(a){this.option.zoom=a},r.prototype.setCenter=function(a){this.option.center=a},r.prototype.formatTooltip=function(a,s,o){for(var u=this.getData().tree,c=u.root.children[0],p=u.getNodeByDataIndex(a),d=p.getValue(),_=p.name;p&&p!==c;)_=p.parentNode.name+"."+_,p=p.parentNode;return createTooltipMarkup("nameValue",{name:_,value:d,noValue:isNaN(d)||d==null})},r.prototype.getDataParams=function(a){var s=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(a);return s.treeAncestors=wrapTreePathInfo(o,this),s.collapsed=!o.isExpand,s},r.type="series.tree",r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},r}(SeriesModel);function eachAfter(n,r,a){for(var s=[n],o=[],u;u=s.pop();)if(o.push(u),u.isExpand){var c=u.children;if(c.length)for(var p=0;p<c.length;p++)s.push(c[p])}for(;u=o.pop();)r(u,a)}function eachBefore(n,r){for(var a=[n],s;s=a.pop();)if(r(s),s.isExpand){var o=s.children;if(o.length)for(var u=o.length-1;u>=0;u--)a.push(o[u])}}function treeLayout(n,r){n.eachSeriesByType("tree",function(a){commonLayout(a,r)})}function commonLayout(n,r){var a=getViewRect$4(n,r);n.layoutInfo=a;var s=n.get("layout"),o=0,u=0,c=null;s==="radial"?(o=2*Math.PI,u=Math.min(a.height,a.width)/2,c=separation(function(rh,ah){return(rh.parentNode===ah.parentNode?1:2)/rh.depth})):(o=a.width,u=a.height,c=separation());var p=n.getData().tree.root,d=p.children[0];if(d){init(p),eachAfter(d,firstWalk,c),p.hierNode.modifier=-d.hierNode.prelim,eachBefore(d,secondWalk);var _=d,ja=d,Ja=d;eachBefore(d,function(rh){var ah=rh.getLayout().x;ah<_.getLayout().x&&(_=rh),ah>ja.getLayout().x&&(ja=rh),rh.depth>Ja.depth&&(Ja=rh)});var ec=_===ja?1:c(_,ja)/2,tc=ec-_.getLayout().x,rc=0,nc=0,ic=0,uc=0;if(s==="radial")rc=o/(ja.getLayout().x+ec+tc),nc=u/(Ja.depth-1||1),eachBefore(d,function(rh){ic=(rh.getLayout().x+tc)*rc,uc=(rh.depth-1)*nc;var ah=radialCoordinate(ic,uc);rh.setLayout({x:ah.x,y:ah.y,rawX:ic,rawY:uc},!0)});else{var eh=n.getOrient();eh==="RL"||eh==="LR"?(nc=u/(ja.getLayout().x+ec+tc),rc=o/(Ja.depth-1||1),eachBefore(d,function(rh){uc=(rh.getLayout().x+tc)*nc,ic=eh==="LR"?(rh.depth-1)*rc:o-(rh.depth-1)*rc,rh.setLayout({x:ic,y:uc},!0)})):(eh==="TB"||eh==="BT")&&(rc=o/(ja.getLayout().x+ec+tc),nc=u/(Ja.depth-1||1),eachBefore(d,function(rh){ic=(rh.getLayout().x+tc)*rc,uc=eh==="TB"?(rh.depth-1)*nc:u-(rh.depth-1)*nc,rh.setLayout({x:ic,y:uc},!0)}))}}}function treeVisual(n){n.eachSeriesByType("tree",function(r){var a=r.getData(),s=a.tree;s.eachNode(function(o){var u=o.getModel(),c=u.getModel("itemStyle").getItemStyle(),p=a.ensureUniqueItemVisual(o.dataIndex,"style");extend$2(p,c)})})}function installTreeAction(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(r,a){a.eachComponent({mainType:"series",subType:"tree",query:r},function(s){var o=r.dataIndex,u=s.getData().tree,c=u.getNodeByDataIndex(o);c.isExpand=!c.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(r,a,s){a.eachComponent({mainType:"series",subType:"tree",query:r},function(o){var u=o.coordinateSystem,c=updateCenterAndZoom(u,r,void 0,s);o.setCenter&&o.setCenter(c.center),o.setZoom&&o.setZoom(c.zoom)})})}function install$X(n){n.registerChartView(TreeView),n.registerSeriesModel(TreeSeriesModel),n.registerLayout(treeLayout),n.registerVisual(treeVisual),installTreeAction(n)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(n){for(var r=0;r<actionTypes.length;r++)n.registerAction({type:actionTypes[r],update:"updateView"},noop$1);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,s){s.eachComponent({mainType:"series",subType:"treemap",query:a},o);function o(u,c){var p=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(a,p,u);if(d){var _=u.getViewRoot();_&&(a.direction=aboveViewRoot(_,d.node)?"rollUp":"drillDown"),u.resetViewRoot(d.node)}}})}function enableAriaDecalForTree(n){var r=n.getData(),a=r.tree,s={};a.eachNode(function(o){for(var u=o;u&&u.depth>1;)u=u.parentNode;var c=getDecalFromPalette(n.ecModel,u.name||u.dataIndex+"",s);o.setVisual("decal",c)})}var TreemapSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.preventUsingHoverLayer=!0,a}return r.prototype.getInitialData=function(a,s){var o={name:a.name,children:a.data};completeTreeValue$1(o);var u=a.levels||[],c=this.designatedVisualItemStyle={},p=new Model({itemStyle:c},this,s);u=a.levels=setDefault(u,s);var d=map$1(u||[],function(Ja){return new Model(Ja,p,s)},this),_=Tree$1.createTree(o,this,ja);function ja(Ja){Ja.wrapMethod("getItemModel",function(ec,tc){var rc=_.getNodeByDataIndex(tc),nc=rc?d[rc.depth]:null;return ec.parentModel=nc||p,ec})}return _.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.formatTooltip=function(a,s,o){var u=this.getData(),c=this.getRawValue(a),p=u.getName(a);return createTooltipMarkup("nameValue",{name:p,value:c})},r.prototype.getDataParams=function(a){var s=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(a);return s.treeAncestors=wrapTreePathInfo(o,this),s.treePathInfo=s.treeAncestors,s},r.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},extend$2(this.layoutInfo,a)},r.prototype.mapIdToIndex=function(a){var s=this._idIndexMap;s||(s=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var o=s.get(a);return o==null&&s.set(a,o=this._idIndexMapCount++),o},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var s=this.getRawData().tree.root;(!a||a!==s&&!s.contains(a))&&(this._viewRoot=s)},r.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},r.type="series.treemap",r.layoutMode="box",r.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},r}(SeriesModel);function completeTreeValue$1(n){var r=0;each$f(n.children,function(s){completeTreeValue$1(s);var o=s.value;isArray$1(o)&&(o=o[0]),r+=o});var a=n.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=r),a<0&&(a=0),isArray$1(n.value)?n.value[0]=a:n.value=a}function setDefault(n,r){var a=normalizeToArray(r.get("color")),s=normalizeToArray(r.get(["aria","decal","decals"]));if(a){n=n||[];var o,u;each$f(n,function(p){var d=new Model(p),_=d.get("color"),ja=d.get("decal");(d.get(["itemStyle","color"])||_&&_!=="none")&&(o=!0),(d.get(["itemStyle","decal"])||ja&&ja!=="none")&&(u=!0)});var c=n[0]||(n[0]={});return o||(c.color=a.slice()),!u&&s&&(c.decal=s.slice()),n}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function n(r){this.group=new Group$3,r.add(this.group)}return n.prototype.render=function(r,a,s,o){var u=r.getModel("breadcrumb"),c=this.group;if(c.removeAll(),!(!u.get("show")||!s)){var p=u.getModel("itemStyle"),d=u.getModel("emphasis"),_=p.getModel("textStyle"),ja=d.getModel(["itemStyle","textStyle"]),Ja={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(s,Ja,_),this._renderContent(r,Ja,p,d,_,ja,o),positionElement(c,Ja.pos,Ja.box)}},n.prototype._prepare=function(r,a,s){for(var o=r;o;o=o.parentNode){var u=convertOptionIdName(o.getModel().get("name"),""),c=s.getTextRect(u),p=Math.max(c.width+TEXT_PADDING*2,a.emptyItemWidth);a.totalWidth+=p+ITEM_GAP,a.renderList.push({node:o,text:u,width:p})}},n.prototype._renderContent=function(r,a,s,o,u,c,p){for(var d=0,_=a.emptyItemWidth,ja=r.get(["breadcrumb","height"]),Ja=getAvailableSize(a.pos,a.box),ec=a.totalWidth,tc=a.renderList,rc=o.getModel("itemStyle").getItemStyle(),nc=tc.length-1;nc>=0;nc--){var ic=tc[nc],uc=ic.node,eh=ic.width,rh=ic.text;ec>Ja.width&&(ec-=eh-_,eh=_,rh=null);var ah=new Polygon({shape:{points:makeItemPoints(d,0,eh,ja,nc===tc.length-1,nc===0)},style:defaults(s.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle(u,{text:rh})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(p,uc)});ah.disableLabelAnimation=!0,ah.getTextContent().ensureState("emphasis").style=createTextStyle(c,{text:rh}),ah.ensureState("emphasis").style=rc,toggleHoverEmphasis(ah,o.get("focus"),o.get("blurScope"),o.get("disabled")),this.group.add(ah),packEventData(ah,r,uc),d+=eh+ITEM_GAP}},n.prototype.remove=function(){this.group.removeAll()},n}();function makeItemPoints(n,r,a,s,o,u){var c=[[o?n:n-ARRAY_LENGTH,r],[n+a,r],[n+a,r+s],[o?n:n-ARRAY_LENGTH,r+s]];return!u&&c.splice(2,0,[n+a+ARRAY_LENGTH,r+s/2]),!o&&c.push([n,r+s/2]),c}function packEventData(n,r,a){getECData(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&wrapTreePathInfo(a,r)}}var AnimationWrap=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(r,a,s,o,u){return this._elExistsMap[r.id]?!1:(this._elExistsMap[r.id]=!0,this._storage.push({el:r,target:a,duration:s,delay:o,easing:u}),!0)},n.prototype.finished=function(r){return this._finishedCallback=r,this},n.prototype.start=function(){for(var r=this,a=this._storage.length,s=function(){a--,a<=0&&(r._storage.length=0,r._elExistsMap={},r._finishedCallback&&r._finishedCallback())},o=0,u=this._storage.length;o<u;o++){var c=this._storage[o];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:s,aborted:s})}return this},n}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(n){var r=getStateItemStyle(n);return r.stroke=r.fill=r.lineWidth=null,r},inner$d=makeInner(),TreemapView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._state="ready",a._storage=createStorage(),a}return r.prototype.render=function(a,s,o,u){var c=s.findComponents({mainType:"series",subType:"treemap",query:u});if(!(indexOf(c,a)<0)){this.seriesModel=a,this.api=o,this.ecModel=s;var p=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(u,p,a),_=u&&u.type,ja=a.layoutInfo,Ja=!this._oldTree,ec=this._storage,tc=_==="treemapRootToNode"&&d&&ec?{rootNodeGroup:ec.nodeGroup[d.node.getRawIndex()],direction:u.direction}:null,rc=this._giveContainerGroup(ja),nc=a.get("animation"),ic=this._doRender(rc,a,tc);nc&&!Ja&&(!_||_==="treemapZoomToNode"||_==="treemapRootToNode")?this._doAnimation(rc,ic,a,tc):ic.renderFinally(),this._resetController(o),this._renderBreadcrumb(a,o,d)}},r.prototype._giveContainerGroup=function(a){var s=this._containerGroup;return s||(s=this._containerGroup=new Group$2,this._initEvents(s),this.group.add(s)),s.x=a.x,s.y=a.y,s},r.prototype._doRender=function(a,s,o){var u=s.getData().tree,c=this._oldTree,p=createStorage(),d=createStorage(),_=this._storage,ja=[];function Ja(ic,uc,eh,rh){return renderNode(s,d,_,o,p,ja,ic,uc,eh,rh)}tc(u.root?[u.root]:[],c&&c.root?[c.root]:[],a,u===c||!c,0);var ec=rc(_);return this._oldTree=u,this._storage=d,{lastsForAnimation:p,willDeleteEls:ec,renderFinally:nc};function tc(ic,uc,eh,rh,ah){rh?(uc=ic,each$f(ic,function(uh,ch){!uh.isRemoved()&&oh(ch,ch)})):new DataDiffer(uc,ic,ih,ih).add(oh).update(oh).remove(curry$1(oh,null)).execute();function ih(uh){return uh.getId()}function oh(uh,ch){var hh=uh!=null?ic[uh]:null,dh=ch!=null?uc[ch]:null,gh=Ja(hh,dh,eh,ah);gh&&tc(hh&&hh.viewChildren||[],dh&&dh.viewChildren||[],gh,rh,ah+1)}}function rc(ic){var uc=createStorage();return ic&&each$f(ic,function(eh,rh){var ah=uc[rh];each$f(eh,function(ih){ih&&(ah.push(ih),inner$d(ih).willDelete=!0)})}),uc}function nc(){each$f(ec,function(ic){each$f(ic,function(uc){uc.parent&&uc.parent.remove(uc)})}),each$f(ja,function(ic){ic.invisible=!0,ic.dirty()})}},r.prototype._doAnimation=function(a,s,o,u){var c=o.get("animationDurationUpdate"),p=o.get("animationEasing"),d=(isFunction(c)?0:c)||0,_=(isFunction(p)?null:p)||"cubicOut",ja=createWrap();each$f(s.willDeleteEls,function(Ja,ec){each$f(Ja,function(tc,rc){if(!tc.invisible){var nc=tc.parent,ic,uc=inner$d(nc);if(u&&u.direction==="drillDown")ic=nc===u.rootNodeGroup?{shape:{x:0,y:0,width:uc.nodeWidth,height:uc.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var eh=0,rh=0;uc.willDelete||(eh=uc.nodeWidth/2,rh=uc.nodeHeight/2),ic=ec==="nodeGroup"?{x:eh,y:rh,style:{opacity:0}}:{shape:{x:eh,y:rh,width:0,height:0},style:{opacity:0}}}ic&&ja.add(tc,ic,d,0,_)}})}),each$f(this._storage,function(Ja,ec){each$f(Ja,function(tc,rc){var nc=s.lastsForAnimation[ec][rc],ic={};nc&&(tc instanceof Group$3?nc.oldX!=null&&(ic.x=tc.x,ic.y=tc.y,tc.x=nc.oldX,tc.y=nc.oldY):(nc.oldShape&&(ic.shape=extend$2({},tc.shape),tc.setShape(nc.oldShape)),nc.fadein?(tc.setStyle("opacity",0),ic.style={opacity:1}):tc.style.opacity!==1&&(ic.style={opacity:1})),ja.add(tc,ic,d,0,_))})},this),this._state="animating",ja.finished(bind$1(function(){this._state="ready",s.renderFinally()},this)).start()},r.prototype._resetController=function(a){var s=this._controller;s||(s=this._controller=new RoamController(a.getZr()),s.enable(this.seriesModel.get("roam")),s.on("pan",bind$1(this._onPan,this)),s.on("zoom",bind$1(this._onZoom,this)));var o=new BoundingRect(0,0,a.getWidth(),a.getHeight());s.setPointerChecker(function(u,c,p){return o.contain(c,p)})},r.prototype._clearController=function(){var a=this._controller;a&&(a.dispose(),a=null)},r.prototype._onPan=function(a){if(this._state!=="animating"&&(Math.abs(a.dx)>DRAG_THRESHOLD||Math.abs(a.dy)>DRAG_THRESHOLD)){var s=this.seriesModel.getData().tree.root;if(!s)return;var o=s.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+a.dx,y:o.y+a.dy,width:o.width,height:o.height}})}},r.prototype._onZoom=function(a){var s=a.originX,o=a.originY;if(this._state!=="animating"){var u=this.seriesModel.getData().tree.root;if(!u)return;var c=u.getLayout();if(!c)return;var p=new BoundingRect(c.x,c.y,c.width,c.height),d=this.seriesModel.layoutInfo;s-=d.x,o-=d.y;var _=create$2();translate(_,_,[-s,-o]),scale$1(_,_,[a.scale,a.scale]),translate(_,_,[s,o]),p.applyTransform(_),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:p.x,y:p.y,width:p.width,height:p.height}})}},r.prototype._initEvents=function(a){var s=this;a.on("click",function(o){if(s._state==="ready"){var u=s.seriesModel.get("nodeClick",!0);if(u){var c=s.findTarget(o.offsetX,o.offsetY);if(c){var p=c.node;if(p.getLayout().isLeafRoot)s._rootToNode(c);else if(u==="zoomToNode")s._zoomToNode(c);else if(u==="link"){var d=p.hostTree.data.getItemModel(p.dataIndex),_=d.get("link",!0),ja=d.get("target",!0)||"blank";_&&windowOpen(_,ja)}}}}},this)},r.prototype._renderBreadcrumb=function(a,s,o){var u=this;o||(o=a.get("leafDepth",!0)!=null?{node:a.getViewRoot()}:this.findTarget(s.getWidth()/2,s.getHeight()/2),o||(o={node:a.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(a,s,o.node,function(c){u._state!=="animating"&&(aboveViewRoot(a.getViewRoot(),c)?u._rootToNode({node:c}):u._zoomToNode({node:c}))})},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},r.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},r.prototype.findTarget=function(a,s){var o,u=this.seriesModel.getViewRoot();return u.eachNode({attr:"viewChildren",order:"preorder"},function(c){var p=this._storage.background[c.getRawIndex()];if(p){var d=p.transformCoordToLocal(a,s),_=p.shape;if(_.x<=d[0]&&d[0]<=_.x+_.width&&_.y<=d[1]&&d[1]<=_.y+_.height)o={node:c,offsetX:d[0],offsetY:d[1]};else return!1}},this),o},r.type="treemap",r}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(n,r,a,s,o,u,c,p,d,_){if(!c)return;var ja=c.getLayout(),Ja=n.getData(),ec=c.getModel();if(Ja.setItemGraphicEl(c.dataIndex,null),!ja||!ja.isInView)return;var tc=ja.width,rc=ja.height,nc=ja.borderWidth,ic=ja.invisible,uc=c.getRawIndex(),eh=p&&p.getRawIndex(),rh=c.viewChildren,ah=ja.upperHeight,ih=rh&&rh.length,oh=ec.getModel("itemStyle"),uh=ec.getModel(["emphasis","itemStyle"]),ch=ec.getModel(["blur","itemStyle"]),hh=ec.getModel(["select","itemStyle"]),dh=oh.get("borderRadius")||0,gh=Rh("nodeGroup",Group$2);if(!gh)return;if(d.add(gh),gh.x=ja.x||0,gh.y=ja.y||0,gh.markRedraw(),inner$d(gh).nodeWidth=tc,inner$d(gh).nodeHeight=rc,ja.isAboveViewRoot)return gh;var fh=Rh("background",Rect$1,_,Z2_BG);fh&&Dh(gh,fh,ih&&ja.upperLabelHeight);var vh=ec.getModel("emphasis"),ph=vh.get("focus"),yh=vh.get("blurScope"),xh=vh.get("disabled"),_h=ph==="ancestor"?c.getAncestorsIndices():ph==="descendant"?c.getDescendantIndices():ph;if(ih)isHighDownDispatcher(gh)&&setAsHighDownDispatcher(gh,!1),fh&&(setAsHighDownDispatcher(fh,!xh),Ja.setItemGraphicEl(c.dataIndex,fh),enableHoverFocus(fh,_h,yh));else{var bh=Rh("content",Rect$1,_,Z2_CONTENT);bh&&Th(gh,bh),fh.disableMorphing=!0,fh&&isHighDownDispatcher(fh)&&setAsHighDownDispatcher(fh,!1),setAsHighDownDispatcher(gh,!xh),Ja.setItemGraphicEl(c.dataIndex,gh),enableHoverFocus(gh,_h,yh)}return gh;function Dh(Fh,Wh,Qh){var jh=getECData(Wh);if(jh.dataIndex=c.dataIndex,jh.seriesIndex=n.seriesIndex,Wh.setShape({x:0,y:0,width:tc,height:rc,r:dh}),ic)Ch(Wh);else{Wh.invisible=!1;var Hh=c.getVisual("style"),qh=Hh.stroke,nd=getItemStyleNormal(oh);nd.fill=qh;var Sh=getStateItemStyle(uh);Sh.fill=uh.get("borderColor");var Gh=getStateItemStyle(ch);Gh.fill=ch.get("borderColor");var zh=getStateItemStyle(hh);if(zh.fill=hh.get("borderColor"),Qh){var $h=tc-2*nc;wh(Wh,qh,Hh.opacity,{x:nc,y:0,width:$h,height:ah})}else Wh.removeTextContent();Wh.setStyle(nd),Wh.ensureState("emphasis").style=Sh,Wh.ensureState("blur").style=Gh,Wh.ensureState("select").style=zh,setDefaultStateProxy(Wh)}Fh.add(Wh)}function Th(Fh,Wh){var Qh=getECData(Wh);Qh.dataIndex=c.dataIndex,Qh.seriesIndex=n.seriesIndex;var jh=Math.max(tc-2*nc,0),Hh=Math.max(rc-2*nc,0);if(Wh.culling=!0,Wh.setShape({x:nc,y:nc,width:jh,height:Hh,r:dh}),ic)Ch(Wh);else{Wh.invisible=!1;var qh=c.getVisual("style"),nd=qh.fill,Sh=getItemStyleNormal(oh);Sh.fill=nd,Sh.decal=qh.decal;var Gh=getStateItemStyle(uh),zh=getStateItemStyle(ch),$h=getStateItemStyle(hh);wh(Wh,nd,qh.opacity,null),Wh.setStyle(Sh),Wh.ensureState("emphasis").style=Gh,Wh.ensureState("blur").style=zh,Wh.ensureState("select").style=$h,setDefaultStateProxy(Wh)}Fh.add(Wh)}function Ch(Fh){!Fh.invisible&&u.push(Fh)}function wh(Fh,Wh,Qh,jh){var Hh=ec.getModel(jh?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),qh=convertOptionIdName(ec.get("name"),null),nd=Hh.getShallow("show");setLabelStyle(Fh,getLabelStatesModels(ec,jh?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:nd?qh:null,inheritColor:Wh,defaultOpacity:Qh,labelFetcher:n,labelDataIndex:c.dataIndex});var Sh=Fh.getTextContent();if(Sh){var Gh=Sh.style,zh=normalizeCssArray$1(Gh.padding||0);jh&&(Fh.setTextConfig({layoutRect:jh}),Sh.disableLabelLayout=!0),Sh.beforeUpdate=function(){var Ph=Math.max((jh?jh.width:Fh.shape.width)-zh[1]-zh[3],0),Vh=Math.max((jh?jh.height:Fh.shape.height)-zh[0]-zh[2],0);(Gh.width!==Ph||Gh.height!==Vh)&&Sh.setStyle({width:Ph,height:Vh})},Gh.truncateMinChar=2,Gh.lineOverflow="truncate",Nh(Gh,jh,ja);var $h=Sh.getState("emphasis");Nh($h?$h.style:null,jh,ja)}}function Nh(Fh,Wh,Qh){var jh=Fh?Fh.text:null;if(!Wh&&Qh.isLeafRoot&&jh!=null){var Hh=n.get("drillDownIcon",!0);Fh.text=Hh?Hh+" "+jh:jh}}function Rh(Fh,Wh,Qh,jh){var Hh=eh!=null&&a[Fh][eh],qh=o[Fh];return Hh?(a[Fh][eh]=null,kh(qh,Hh)):ic||(Hh=new Wh,Hh instanceof Displayable$1&&(Hh.z2=calculateZ2(Qh,jh)),Lh(qh,Hh)),r[Fh][uc]=Hh}function kh(Fh,Wh){var Qh=Fh[uc]={};Wh instanceof Group$2?(Qh.oldX=Wh.x,Qh.oldY=Wh.y):Qh.oldShape=extend$2({},Wh.shape)}function Lh(Fh,Wh){var Qh=Fh[uc]={},jh=c.parentNode,Hh=Wh instanceof Group$3;if(jh&&(!s||s.direction==="drillDown")){var qh=0,nd=0,Sh=o.background[jh.getRawIndex()];!s&&Sh&&Sh.oldShape&&(qh=Sh.oldShape.width,nd=Sh.oldShape.height),Hh?(Qh.oldX=0,Qh.oldY=nd):Qh.oldShape={x:qh,y:nd,width:0,height:0}}Qh.fadein=!Hh}}function calculateZ2(n,r){return n*Z2_BASE+r}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function n(r){var a=r.mappingMethod,s=r.type,o=this.option=clone$4(r);this.type=s,this.mappingMethod=a,this._normalizeData=normalizers[a];var u=n.visualHandlers[s];this.applyVisual=u.applyVisual,this.getColorMapper=u.getColorMapper,this._normalizedToVisual=u._normalizedToVisual[a],a==="piecewise"?(normalizeVisualRange(o),preprocessForPiecewise(o)):a==="category"?o.categories?preprocessForSpecifiedCategory(o):normalizeVisualRange(o,!0):(assert(a!=="linear"||o.dataExtent),normalizeVisualRange(o))}return n.prototype.mapValueToVisual=function(r){var a=this._normalizeData(r);return this._normalizedToVisual(a,r)},n.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},n.listVisualTypes=function(){return keys(n.visualHandlers)},n.isValidType=function(r){return n.visualHandlers.hasOwnProperty(r)},n.eachVisual=function(r,a,s){isObject$3(r)?each$f(r,a,s):a.call(s,r)},n.mapVisual=function(r,a,s){var o,u=isArray$1(r)?[]:isObject$3(r)?{}:(o=!0,null);return n.eachVisual(r,function(c,p){var d=a.call(s,c,p);o?u=d:u[p]=d}),u},n.retrieveVisuals=function(r){var a={},s;return r&&each$c(n.visualHandlers,function(o,u){r.hasOwnProperty(u)&&(a[u]=r[u],s=!0)}),s?a:null},n.prepareVisualTypes=function(r){if(isArray$1(r))r=r.slice();else if(isObject(r)){var a=[];each$c(r,function(s,o){a.push(o)}),r=a}else return[];return r.sort(function(s,o){return o==="color"&&s!=="color"&&s.indexOf("color")===0?1:-1}),r},n.dependsOn=function(r,a){return a==="color"?!!(r&&r.indexOf(a)===0):r===a},n.findPieceIndex=function(r,a,s){for(var o,u=1/0,c=0,p=a.length;c<p;c++){var d=a[c].value;if(d!=null){if(d===r||isString(d)&&d===r+"")return c;s&&ec(d,c)}}for(var c=0,p=a.length;c<p;c++){var _=a[c],ja=_.interval,Ja=_.close;if(ja){if(ja[0]===-1/0){if(littleThan(Ja[1],r,ja[1]))return c}else if(ja[1]===1/0){if(littleThan(Ja[0],ja[0],r))return c}else if(littleThan(Ja[0],ja[0],r)&&littleThan(Ja[1],r,ja[1]))return c;s&&ec(ja[0],c),s&&ec(ja[1],c)}}if(s)return r===1/0?a.length-1:r===-1/0?0:o;function ec(tc,rc){var nc=Math.abs(tc-r);nc<u&&(u=nc,o=rc)}},n.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var r=this.option;return bind$1(r.mappingMethod==="category"?function(a,s){return!s&&(a=this._normalizeData(a)),doMapCategory.call(this,a)}:function(a,s,o){var u=!!o;return!s&&(a=this._normalizeData(a)),o=fastLerp(a,r.parsedVisual,o),u?o:stringify(o,"rgba")},this)},_normalizedToVisual:{linear:function(r){return stringify(fastLerp(r,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(r,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=stringify(fastLerp(r,this.option.parsedVisual),"rgba")),s},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(r,a){return modifyHSL(r,a)}),colorSaturation:makePartialColorVisualHandler(function(r,a){return modifyHSL(r,null,a)}),colorLightness:makePartialColorVisualHandler(function(r,a){return modifyHSL(r,null,null,a)}),colorAlpha:makePartialColorVisualHandler(function(r,a){return modifyAlpha(r,a)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(r,a,s){var o=this.mapValueToVisual(r);s("symbol",o)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(r,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=doMapToArray.call(this,r)),s},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},n}();function preprocessForPiecewise(n){var r=n.pieceList;n.hasSpecialVisual=!1,each$f(r,function(a,s){a.originIndex=s,a.visual!=null&&(n.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(n){var r=n.categories,a=n.categoryMap={},s=n.visual;if(each$c(r,function(c,p){a[c]=p}),!isArray$1(s)){var o=[];isObject$3(s)?each$c(s,function(c,p){var d=a[p];o[d??CATEGORY_DEFAULT_VISUAL_INDEX]=c}):o[CATEGORY_DEFAULT_VISUAL_INDEX]=s,s=setVisualToOption(n,o)}for(var u=r.length-1;u>=0;u--)s[u]==null&&(delete a[r[u]],r.pop())}function normalizeVisualRange(n,r){var a=n.visual,s=[];isObject$3(a)?each$c(a,function(u){s.push(u)}):a!=null&&s.push(a);var o={color:1,symbol:1};!r&&s.length===1&&!o.hasOwnProperty(n.type)&&(s[1]=s[0]),setVisualToOption(n,s)}function makePartialColorVisualHandler(n){return{applyVisual:function(r,a,s){var o=this.mapValueToVisual(r);s("color",n(a("color"),o))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(n){var r=this.option.visual;return r[Math.round(linearMap$2(n,[0,1],[0,r.length-1],!0))]||{}}function makeApplyVisual(n){return function(r,a,s){s(n,this.mapValueToVisual(r))}}function doMapCategory(n){var r=this.option.visual;return r[this.option.loop&&n!==CATEGORY_DEFAULT_VISUAL_INDEX?n%r.length:n]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(n){return{linear:function(r){return linearMap$2(r,n,this.option.visual,!0)},category:doMapCategory,piecewise:function(r,a){var s=getSpecifiedVisual.call(this,a);return s==null&&(s=linearMap$2(r,n,this.option.visual,!0)),s},fixed:doMapFixed}}function getSpecifiedVisual(n){var r=this.option,a=r.pieceList;if(r.hasSpecialVisual){var s=VisualMapping.findPieceIndex(n,a),o=a[s];if(o&&o.visual)return o.visual[this.type]}}function setVisualToOption(n,r){return n.visual=r,n.type==="color"&&(n.parsedVisual=map$1(r,function(a){var s=parse(a);return s||[0,0,0,1]})),r}var normalizers={linear:function(n){return linearMap$2(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var r=this.option.pieceList,a=VisualMapping.findPieceIndex(n,r,!0);if(a!=null)return linearMap$2(a,[0,r.length-1],[0,1],!0)},category:function(n){var r=this.option.categories?this.option.categoryMap[n]:n;return r??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop$1};function littleThan(n,r,a){return n?r<=a:r<a}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(n){var r=n.getData().tree,a=r.root;a.isRemoved()||travelTree(a,{},n.getViewRoot().getAncestors(),n)}};function travelTree(n,r,a,s){var o=n.getModel(),u=n.getLayout(),c=n.hostTree.data;if(!(!u||u.invisible||!u.isInView)){var p=o.getModel(ITEM_STYLE_NORMAL),d=buildVisuals(p,r,s),_=c.ensureUniqueItemVisual(n.dataIndex,"style"),ja=p.get("borderColor"),Ja=p.get("borderColorSaturation"),ec;Ja!=null&&(ec=calculateColor(d),ja=calculateBorderColor(Ja,ec)),_.stroke=ja;var tc=n.viewChildren;if(!tc||!tc.length)ec=calculateColor(d),_.fill=ec;else{var rc=buildVisualMapping(n,o,u,p,d,tc);each$f(tc,function(nc,ic){if(nc.depth>=a.length||nc===a[nc.depth]){var uc=mapVisual$1(o,d,nc,ic,rc,s);travelTree(nc,uc,a,s)}})}}}function buildVisuals(n,r,a){var s=extend$2({},r),o=a.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(u){o[u]=r[u];var c=n.get(u);o[u]=null,c!=null&&(s[u]=c)}),s}function calculateColor(n){var r=getValueVisualDefine(n,"color");if(r){var a=getValueVisualDefine(n,"colorAlpha"),s=getValueVisualDefine(n,"colorSaturation");return s&&(r=modifyHSL(r,null,null,s)),a&&(r=modifyAlpha(r,a)),r}}function calculateBorderColor(n,r){return r!=null?modifyHSL(r,null,null,n):null}function getValueVisualDefine(n,r){var a=n[r];if(a!=null&&a!=="none")return a}function buildVisualMapping(n,r,a,s,o,u){if(!(!u||!u.length)){var c=getRangeVisual(r,"color")||o.color!=null&&o.color!=="none"&&(getRangeVisual(r,"colorAlpha")||getRangeVisual(r,"colorSaturation"));if(c){var p=r.get("visualMin"),d=r.get("visualMax"),_=a.dataExtent.slice();p!=null&&p<_[0]&&(_[0]=p),d!=null&&d>_[1]&&(_[1]=d);var ja=r.get("colorMappingBy"),Ja={type:c.name,dataExtent:_,visual:c.range};Ja.type==="color"&&(ja==="index"||ja==="id")?(Ja.mappingMethod="category",Ja.loop=!0):Ja.mappingMethod="linear";var ec=new VisualMapping(Ja);return inner$c(ec).drColorMappingBy=ja,ec}}}function getRangeVisual(n,r){var a=n.get(r);return isArray$1(a)&&a.length?{name:r,range:a}:null}function mapVisual$1(n,r,a,s,o,u){var c=extend$2({},r);if(o){var p=o.type,d=p==="color"&&inner$c(o).drColorMappingBy,_=d==="index"?s:d==="id"?u.mapIdToIndex(a.getId()):a.getValue(n.get("visualDimension"));c[p]=o.mapValueToVisual(_)}return c}var mathMax$4=Math.max,mathMin$4=Math.min,retrieveValue=retrieve$1,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(n,r,a,s){var o=a.getWidth(),u=a.getHeight(),c=n.option,p=getLayoutRect(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),d=c.size||[],_=parsePercent(retrieveValue(p.width,d[0]),o),ja=parsePercent(retrieveValue(p.height,d[1]),u),Ja=s&&s.type,ec=["treemapZoomToNode","treemapRootToNode"],tc=retrieveTargetInfo(s,ec,n),rc=Ja==="treemapRender"||Ja==="treemapMove"?s.rootRect:null,nc=n.getViewRoot(),ic=getPathToRoot(nc);if(Ja!=="treemapMove"){var uc=Ja==="treemapZoomToNode"?estimateRootSize(n,tc,nc,_,ja):rc?[rc.width,rc.height]:[_,ja],eh=c.sort;eh&&eh!=="asc"&&eh!=="desc"&&(eh="desc");var rh={squareRatio:c.squareRatio,sort:eh,leafDepth:c.leafDepth};nc.hostTree.clearLayouts();var ah={x:0,y:0,width:uc[0],height:uc[1],area:uc[0]*uc[1]};nc.setLayout(ah),squarify(nc,rh,!1,0),ah=nc.getLayout(),each$b(ic,function(oh,uh){var ch=(ic[uh+1]||nc).getValue();oh.setLayout(extend$2({dataExtent:[ch,ch],borderWidth:0,upperHeight:0},ah))})}var ih=n.getData().tree.root;ih.setLayout(calculateRootPosition(p,rc,tc),!0),n.setLayoutInfo(p),prunning(ih,new BoundingRect(-p.x,-p.y,o,u),ic,nc,0)}};function squarify(n,r,a,s){var o,u;if(!n.isRemoved()){var c=n.getLayout();o=c.width,u=c.height;var p=n.getModel(),d=p.get(PATH_BORDER_WIDTH),_=p.get(PATH_GAP_WIDTH)/2,ja=getUpperLabelHeight(p),Ja=Math.max(d,ja),ec=d-_,tc=Ja-_;n.setLayout({borderWidth:d,upperHeight:Ja,upperLabelHeight:ja},!0),o=mathMax$4(o-2*ec,0),u=mathMax$4(u-ec-tc,0);var rc=o*u,nc=initChildren$1(n,p,rc,r,a,s);if(nc.length){var ic={x:ec,y:tc,width:o,height:u},uc=mathMin$4(o,u),eh=1/0,rh=[];rh.area=0;for(var ah=0,ih=nc.length;ah<ih;){var oh=nc[ah];rh.push(oh),rh.area+=oh.getLayout().area;var uh=worst(rh,uc,r.squareRatio);uh<=eh?(ah++,eh=uh):(rh.area-=rh.pop().getLayout().area,position(rh,uc,ic,_,!1),uc=mathMin$4(ic.width,ic.height),rh.length=rh.area=0,eh=1/0)}if(rh.length&&position(rh,uc,ic,_,!0),!a){var ch=p.get("childrenVisibleMin");ch!=null&&rc<ch&&(a=!0)}for(var ah=0,ih=nc.length;ah<ih;ah++)squarify(nc[ah],r,a,s+1)}}}function initChildren$1(n,r,a,s,o,u){var c=n.children||[],p=s.sort;p!=="asc"&&p!=="desc"&&(p=null);var d=s.leafDepth!=null&&s.leafDepth<=u;if(o&&!d)return n.viewChildren=[];c=filter(c,function(tc){return!tc.isRemoved()}),sort$1(c,p);var _=statistic(r,c,p);if(_.sum===0)return n.viewChildren=[];if(_.sum=filterByThreshold(r,a,_.sum,p,c),_.sum===0)return n.viewChildren=[];for(var ja=0,Ja=c.length;ja<Ja;ja++){var ec=c[ja].getValue()/_.sum*a;c[ja].setLayout({area:ec})}return d&&(c.length&&n.setLayout({isLeafRoot:!0},!0),c.length=0),n.viewChildren=c,n.setLayout({dataExtent:_.dataExtent},!0),c}function filterByThreshold(n,r,a,s,o){if(!s)return a;for(var u=n.get("visibleMin"),c=o.length,p=c,d=c-1;d>=0;d--){var _=o[s==="asc"?c-d-1:d].getValue();_/a*r<u&&(p=d,a-=_)}return s==="asc"?o.splice(0,c-p):o.splice(p,c-p),a}function sort$1(n,r){return r&&n.sort(function(a,s){var o=r==="asc"?a.getValue()-s.getValue():s.getValue()-a.getValue();return o===0?r==="asc"?a.dataIndex-s.dataIndex:s.dataIndex-a.dataIndex:o}),n}function statistic(n,r,a){for(var s=0,o=0,u=r.length;o<u;o++)s+=r[o].getValue();var c=n.get("visualDimension"),p;return!r||!r.length?p=[NaN,NaN]:c==="value"&&a?(p=[r[r.length-1].getValue(),r[0].getValue()],a==="asc"&&p.reverse()):(p=[1/0,-1/0],each$b(r,function(d){var _=d.getValue(c);_<p[0]&&(p[0]=_),_>p[1]&&(p[1]=_)})),{sum:s,dataExtent:p}}function worst(n,r,a){for(var s=0,o=1/0,u=0,c=void 0,p=n.length;u<p;u++)c=n[u].getLayout().area,c&&(c<o&&(o=c),c>s&&(s=c));var d=n.area*n.area,_=r*r*a;return d?mathMax$4(_*s/d,d/(_*o)):1/0}function position(n,r,a,s,o){var u=r===a.width?0:1,c=1-u,p=["x","y"],d=["width","height"],_=a[p[u]],ja=r?n.area/r:0;(o||ja>a[d[c]])&&(ja=a[d[c]]);for(var Ja=0,ec=n.length;Ja<ec;Ja++){var tc=n[Ja],rc={},nc=ja?tc.getLayout().area/ja:0,ic=rc[d[c]]=mathMax$4(ja-2*s,0),uc=a[p[u]]+a[d[u]]-_,eh=Ja===ec-1||uc<nc?uc:nc,rh=rc[d[u]]=mathMax$4(eh-2*s,0);rc[p[c]]=a[p[c]]+mathMin$4(s,ic/2),rc[p[u]]=_+mathMin$4(s,rh/2),_+=eh,tc.setLayout(rc,!0)}a[p[c]]+=ja,a[d[c]]-=ja}function estimateRootSize(n,r,a,s,o){var u=(r||{}).node,c=[s,o];if(!u||u===a)return c;for(var p,d=s*o,_=d*n.option.zoomToNodeRatio;p=u.parentNode;){for(var ja=0,Ja=p.children,ec=0,tc=Ja.length;ec<tc;ec++)ja+=Ja[ec].getValue();var rc=u.getValue();if(rc===0)return c;_*=ja/rc;var nc=p.getModel(),ic=nc.get(PATH_BORDER_WIDTH),uc=Math.max(ic,getUpperLabelHeight(nc));_+=4*ic*ic+(3*ic+uc)*Math.pow(_,.5),_>MAX_SAFE_INTEGER&&(_=MAX_SAFE_INTEGER),u=p}_<d&&(_=d);var eh=Math.pow(_/d,.5);return[s*eh,o*eh]}function calculateRootPosition(n,r,a){if(r)return{x:r.x,y:r.y};var s={x:0,y:0};if(!a)return s;var o=a.node,u=o.getLayout();if(!u)return s;for(var c=[u.width/2,u.height/2],p=o;p;){var d=p.getLayout();c[0]+=d.x,c[1]+=d.y,p=p.parentNode}return{x:n.width/2-c[0],y:n.height/2-c[1]}}function prunning(n,r,a,s,o){var u=n.getLayout(),c=a[o],p=c&&c===n;if(!(c&&!p||o===a.length&&n!==s)){n.setLayout({isInView:!0,invisible:!p&&!r.intersect(u),isAboveViewRoot:p},!0);var d=new BoundingRect(r.x-u.x,r.y-u.y,r.width,r.height);each$b(n.viewChildren||[],function(_){prunning(_,d,a,s,o+1)})}}function getUpperLabelHeight(n){return n.get(PATH_UPPER_LABEL_SHOW)?n.get(PATH_UPPER_LABEL_HEIGHT):0}function install$W(n){n.registerSeriesModel(TreemapSeriesModel),n.registerChartView(TreemapView),n.registerVisual(treemapVisual),n.registerLayout(treemapLayout),installTreemapAction(n)}function categoryFilter(n){var r=n.findComponents({mainType:"legend"});!r||!r.length||n.eachSeriesByType("graph",function(a){var s=a.getCategoriesData(),o=a.getGraph(),u=o.data,c=s.mapArray(s.getName);u.filterSelf(function(p){var d=u.getItemModel(p),_=d.getShallow("category");if(_!=null){isNumber(_)&&(_=c[_]);for(var ja=0;ja<r.length;ja++)if(!r[ja].isSelected(_))return!1}return!0})})}function categoryVisual(n){var r={};n.eachSeriesByType("graph",function(a){var s=a.getCategoriesData(),o=a.getData(),u={};s.each(function(c){var p=s.getName(c);u["ec-"+p]=c;var d=s.getItemModel(c),_=d.getModel("itemStyle").getItemStyle();_.fill||(_.fill=a.getColorFromPalette(p,r)),s.setItemVisual(c,"style",_);for(var ja=["symbol","symbolSize","symbolKeepAspect"],Ja=0;Ja<ja.length;Ja++){var ec=d.getShallow(ja[Ja],!0);ec!=null&&s.setItemVisual(c,ja[Ja],ec)}}),s.count()&&o.each(function(c){var p=o.getItemModel(c),d=p.getShallow("category");if(d!=null){isString(d)&&(d=u["ec-"+d]);var _=s.getItemVisual(d,"style"),ja=o.ensureUniqueItemVisual(c,"style");extend$2(ja,_);for(var Ja=["symbol","symbolSize","symbolKeepAspect"],ec=0;ec<Ja.length;ec++)o.setItemVisual(c,Ja[ec],s.getItemVisual(d,Ja[ec]))}})})}function normalize$3(n){return n instanceof Array||(n=[n,n]),n}function graphEdgeVisual(n){n.eachSeriesByType("graph",function(r){var a=r.getGraph(),s=r.getEdgeData(),o=normalize$3(r.get("edgeSymbol")),u=normalize$3(r.get("edgeSymbolSize"));s.setVisual("fromSymbol",o&&o[0]),s.setVisual("toSymbol",o&&o[1]),s.setVisual("fromSymbolSize",u&&u[0]),s.setVisual("toSymbolSize",u&&u[1]),s.setVisual("style",r.getModel("lineStyle").getLineStyle()),s.each(function(c){var p=s.getItemModel(c),d=a.getEdgeByIndex(c),_=normalize$3(p.getShallow("symbol",!0)),ja=normalize$3(p.getShallow("symbolSize",!0)),Ja=p.getModel("lineStyle").getLineStyle(),ec=s.ensureUniqueItemVisual(c,"style");switch(extend$2(ec,Ja),ec.stroke){case"source":{var tc=d.node1.getVisual("style");ec.stroke=tc&&tc.fill;break}case"target":{var tc=d.node2.getVisual("style");ec.stroke=tc&&tc.fill;break}}_[0]&&d.setVisual("fromSymbol",_[0]),_[1]&&d.setVisual("toSymbol",_[1]),ja[0]&&d.setVisual("fromSymbolSize",ja[0]),ja[1]&&d.setVisual("toSymbolSize",ja[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(n){return n.get("autoCurveness")||null},createCurveness=function(n,r){var a=getAutoCurvenessParams(n),s=20,o=[];if(isNumber(a))s=a;else if(isArray$1(a)){n.__curvenessList=a;return}r>s&&(s=r);var u=s%2?s+2:s+3;o=[];for(var c=0;c<u;c++)o.push((c%2?c+1:c)/10*(c%2?-1:1));n.__curvenessList=o},getKeyOfEdges=function(n,r,a){var s=[n.id,n.dataIndex].join("."),o=[r.id,r.dataIndex].join(".");return[a.uid,s,o].join(KEY_DELIMITER)},getOppositeKey=function(n){var r=n.split(KEY_DELIMITER);return[r[0],r[2],r[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(n,r){var a=getKeyOfEdges(n.node1,n.node2,r);return r.__edgeMap[a]},getTotalLengthBetweenNodes=function(n,r){var a=getEdgeMapLengthWithKey(getKeyOfEdges(n.node1,n.node2,r),r),s=getEdgeMapLengthWithKey(getKeyOfEdges(n.node2,n.node1,r),r);return a+s},getEdgeMapLengthWithKey=function(n,r){var a=r.__edgeMap;return a[n]?a[n].length:0};function initCurvenessList(n){getAutoCurvenessParams(n)&&(n.__curvenessList=[],n.__edgeMap={},createCurveness(n))}function createEdgeMapForCurveness(n,r,a,s){if(getAutoCurvenessParams(a)){var o=getKeyOfEdges(n,r,a),u=a.__edgeMap,c=u[getOppositeKey(o)];u[o]&&!c?u[o].isForward=!0:c&&u[o]&&(c.isForward=!0,u[o].isForward=!1),u[o]=u[o]||[],u[o].push(s)}}function getCurvenessForEdge(n,r,a,s){var o=getAutoCurvenessParams(r),u=isArray$1(o);if(!o)return null;var c=getEdgeFromMap(n,r);if(!c)return null;for(var p=-1,d=0;d<c.length;d++)if(c[d]===a){p=d;break}var _=getTotalLengthBetweenNodes(n,r);createCurveness(r,_),n.lineStyle=n.lineStyle||{};var ja=getKeyOfEdges(n.node1,n.node2,r),Ja=r.__curvenessList,ec=u||_%2?0:1;if(c.isForward)return Ja[ec+p];var tc=getOppositeKey(ja),rc=getEdgeMapLengthWithKey(tc,r),nc=Ja[p+rc+ec];return s?u?o&&o[0]===0?(rc+ec)%2?nc:-nc:((rc%2?0:1)+ec)%2?nc:-nc:(rc+ec)%2?nc:-nc:Ja[p+rc+ec]}function simpleLayout(n){var r=n.coordinateSystem;if(!(r&&r.type!=="view")){var a=n.getGraph();a.eachNode(function(s){var o=s.getModel();s.setLayout([+o.get("x"),+o.get("y")])}),simpleLayoutEdge(a,n)}}function simpleLayoutEdge(n,r){n.eachEdge(function(a,s){var o=retrieve3(a.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(a,r,s,!0),0),u=clone$3(a.node1.getLayout()),c=clone$3(a.node2.getLayout()),p=[u,c];+o&&p.push([(u[0]+c[0])/2-(u[1]-c[1])*o,(u[1]+c[1])/2-(c[0]-u[0])*o]),a.setLayout(p)})}function graphSimpleLayout(n,r){n.eachSeriesByType("graph",function(a){var s=a.get("layout"),o=a.coordinateSystem;if(o&&o.type!=="view"){var u=a.getData(),c=[];each$f(o.dimensions,function(ec){c=c.concat(u.mapDimensionsAll(ec))});for(var p=0;p<u.count();p++){for(var d=[],_=!1,ja=0;ja<c.length;ja++){var Ja=u.get(c[ja],p);isNaN(Ja)||(_=!0),d.push(Ja)}_?u.setItemLayout(p,o.dataToPoint(d)):u.setItemLayout(p,[NaN,NaN])}simpleLayoutEdge(u.graph,a)}else(!s||s==="none")&&simpleLayout(a)})}function getNodeGlobalScale(n){var r=n.coordinateSystem;if(r.type!=="view")return 1;var a=n.option.nodeScaleRatio,s=r.scaleX,o=r.getZoom(),u=(o-1)*a+1;return u/s}function getSymbolSize(n){var r=n.getVisual("symbolSize");return r instanceof Array&&(r=(r[0]+r[1])/2),+r}var PI$4=Math.PI,_symbolRadiansHalf=[];function circularLayout(n,r,a,s){var o=n.coordinateSystem;if(!(o&&o.type!=="view")){var u=o.getBoundingRect(),c=n.getData(),p=c.graph,d=u.width/2+u.x,_=u.height/2+u.y,ja=Math.min(u.width,u.height)/2,Ja=c.count();if(c.setLayout({cx:d,cy:_}),!!Ja){if(a){var ec=o.pointToData(s),tc=ec[0],rc=ec[1],nc=[tc-d,rc-_];normalize$5(nc,nc),scale$2(nc,nc,ja),a.setLayout([d+nc[0],_+nc[1]],!0);var ic=n.get(["circular","rotateLabel"]);rotateNodeLabel(a,ic,d,_)}_layoutNodesBasedOn[r](n,p,c,ja,d,_,Ja),p.eachEdge(function(uc,eh){var rh=retrieve3(uc.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(uc,n,eh),0),ah=clone$3(uc.node1.getLayout()),ih=clone$3(uc.node2.getLayout()),oh,uh=(ah[0]+ih[0])/2,ch=(ah[1]+ih[1])/2;+rh&&(rh*=3,oh=[d*rh+uh*(1-rh),_*rh+ch*(1-rh)]),uc.setLayout([ah,ih,oh])})}}}var _layoutNodesBasedOn={value:function(n,r,a,s,o,u,c){var p=0,d=a.getSum("value"),_=Math.PI*2/(d||c);r.eachNode(function(ja){var Ja=ja.getValue("value"),ec=_*(d?Ja:1)/2;p+=ec,ja.setLayout([s*Math.cos(p)+o,s*Math.sin(p)+u]),p+=ec})},symbolSize:function(n,r,a,s,o,u,c){var p=0;_symbolRadiansHalf.length=c;var d=getNodeGlobalScale(n);r.eachNode(function(Ja){var ec=getSymbolSize(Ja);isNaN(ec)&&(ec=2),ec<0&&(ec=0),ec*=d;var tc=Math.asin(ec/2/s);isNaN(tc)&&(tc=PI$4/2),_symbolRadiansHalf[Ja.dataIndex]=tc,p+=tc*2});var _=(2*PI$4-p)/c/2,ja=0;r.eachNode(function(Ja){var ec=_+_symbolRadiansHalf[Ja.dataIndex];ja+=ec,(!Ja.getLayout()||!Ja.getLayout().fixed)&&Ja.setLayout([s*Math.cos(ja)+o,s*Math.sin(ja)+u]),ja+=ec})}};function rotateNodeLabel(n,r,a,s){var o=n.getGraphicEl();if(o){var u=n.getModel(),c=u.get(["label","rotate"])||0,p=o.getSymbolPath();if(r){var d=n.getLayout(),_=Math.atan2(d[1]-s,d[0]-a);_<0&&(_=Math.PI*2+_);var ja=d[0]<a;ja&&(_=_-Math.PI);var Ja=ja?"left":"right";p.setTextConfig({rotation:-_,position:Ja,origin:"center"});var ec=p.ensureState("emphasis");extend$2(ec.textConfig||(ec.textConfig={}),{position:Ja})}else p.setTextConfig({rotation:c*=Math.PI/180})}}function graphCircularLayout(n){n.eachSeriesByType("graph",function(r){r.get("layout")==="circular"&&circularLayout(r,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(n,r,a){for(var s=n,o=r,u=a.rect,c=u.width,p=u.height,d=[u.x+c/2,u.y+p/2],_=a.gravity==null?.1:a.gravity,ja=0;ja<s.length;ja++){var Ja=s[ja];Ja.p||(Ja.p=create$3(c*(Math.random()-.5)+d[0],p*(Math.random()-.5)+d[1])),Ja.pp=clone$3(Ja.p),Ja.edges=null}var ec=a.friction==null?.6:a.friction,tc=ec,rc,nc;return{warmUp:function(){tc=ec*.8},setFixed:function(ic){s[ic].fixed=!0},setUnfixed:function(ic){s[ic].fixed=!1},beforeStep:function(ic){rc=ic},afterStep:function(ic){nc=ic},step:function(ic){rc&&rc(s,o);for(var uc=[],eh=s.length,rh=0;rh<o.length;rh++){var ah=o[rh];if(!ah.ignoreForceLayout){var ih=ah.n1,oh=ah.n2;sub$1(uc,oh.p,ih.p);var uh=len(uc)-ah.d,ch=oh.w/(ih.w+oh.w);isNaN(ch)&&(ch=0),normalize$5(uc,uc),!ih.fixed&&scaleAndAdd(ih.p,ih.p,uc,ch*uh*tc),!oh.fixed&&scaleAndAdd(oh.p,oh.p,uc,-(1-ch)*uh*tc)}}for(var rh=0;rh<eh;rh++){var hh=s[rh];hh.fixed||(sub$1(uc,d,hh.p),scaleAndAdd(hh.p,hh.p,uc,_*tc))}for(var rh=0;rh<eh;rh++)for(var ih=s[rh],dh=rh+1;dh<eh;dh++){var oh=s[dh];sub$1(uc,oh.p,ih.p);var uh=len(uc);uh===0&&(set$1(uc,Math.random()-.5,Math.random()-.5),uh=1);var gh=(ih.rep+oh.rep)/uh/uh;!ih.fixed&&scaleAndAdd(ih.pp,ih.pp,uc,gh),!oh.fixed&&scaleAndAdd(oh.pp,oh.pp,uc,-gh)}for(var fh=[],rh=0;rh<eh;rh++){var hh=s[rh];hh.fixed||(sub$1(fh,hh.p,hh.pp),scaleAndAdd(hh.p,hh.p,fh,tc),copy$1(hh.pp,hh.p))}tc=tc*.992;var vh=tc<.01;nc&&nc(s,o,vh),ic&&ic(vh)}}}function graphForceLayout(n){n.eachSeriesByType("graph",function(r){var a=r.coordinateSystem;if(!(a&&a.type!=="view"))if(r.get("layout")==="force"){var s=r.preservedPoints||{},o=r.getGraph(),u=o.data,c=o.edgeData,p=r.getModel("force"),d=p.get("initLayout");r.preservedPoints?u.each(function(rh){var ah=u.getId(rh);u.setItemLayout(rh,s[ah]||[NaN,NaN])}):!d||d==="none"?simpleLayout(r):d==="circular"&&circularLayout(r,"value");var _=u.getDataExtent("value"),ja=c.getDataExtent("value"),Ja=p.get("repulsion"),ec=p.get("edgeLength"),tc=isArray$1(Ja)?Ja:[Ja,Ja],rc=isArray$1(ec)?ec:[ec,ec];rc=[rc[1],rc[0]];var nc=u.mapArray("value",function(rh,ah){var ih=u.getItemLayout(ah),oh=linearMap$2(rh,_,tc);return isNaN(oh)&&(oh=(tc[0]+tc[1])/2),{w:oh,rep:oh,fixed:u.getItemModel(ah).get("fixed"),p:!ih||isNaN(ih[0])||isNaN(ih[1])?null:ih}}),ic=c.mapArray("value",function(rh,ah){var ih=o.getEdgeByIndex(ah),oh=linearMap$2(rh,ja,rc);isNaN(oh)&&(oh=(rc[0]+rc[1])/2);var uh=ih.getModel(),ch=retrieve3(ih.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(ih,r,ah,!0),0);return{n1:nc[ih.node1.dataIndex],n2:nc[ih.node2.dataIndex],d:oh,curveness:ch,ignoreForceLayout:uh.get("ignoreForceLayout")}}),uc=a.getBoundingRect(),eh=forceLayout(nc,ic,{rect:uc,gravity:p.get("gravity"),friction:p.get("friction")});eh.beforeStep(function(rh,ah){for(var ih=0,oh=rh.length;ih<oh;ih++)rh[ih].fixed&&copy$1(rh[ih].p,o.getNodeByIndex(ih).getLayout())}),eh.afterStep(function(rh,ah,ih){for(var oh=0,uh=rh.length;oh<uh;oh++)rh[oh].fixed||o.getNodeByIndex(oh).setLayout(rh[oh].p),s[u.getId(oh)]=rh[oh].p;for(var oh=0,uh=ah.length;oh<uh;oh++){var ch=ah[oh],hh=o.getEdgeByIndex(oh),dh=ch.n1.p,gh=ch.n2.p,fh=hh.getLayout();fh=fh?fh.slice():[],fh[0]=fh[0]||[],fh[1]=fh[1]||[],copy$1(fh[0],dh),copy$1(fh[1],gh),+ch.curveness&&(fh[2]=[(dh[0]+gh[0])/2-(dh[1]-gh[1])*ch.curveness,(dh[1]+gh[1])/2-(gh[0]-dh[0])*ch.curveness]),hh.setLayout(fh)}}),r.forceLayout=eh,r.preservedPoints=s,eh.step()}else r.forceLayout=null})}function getViewRect$3(n,r,a){var s=extend$2(n.getBoxLayoutParams(),{aspect:a});return getLayoutRect(s,{width:r.getWidth(),height:r.getHeight()})}function createViewCoordSys(n,r){var a=[];return n.eachSeriesByType("graph",function(s){var o=s.get("coordinateSystem");if(!o||o==="view"){var u=s.getData(),c=u.mapArray(function(ic){var uc=u.getItemModel(ic);return[+uc.get("x"),+uc.get("y")]}),p=[],d=[];fromPoints(c,p,d),d[0]-p[0]===0&&(d[0]+=1,p[0]-=1),d[1]-p[1]===0&&(d[1]+=1,p[1]-=1);var _=(d[0]-p[0])/(d[1]-p[1]),ja=getViewRect$3(s,r,_);isNaN(_)&&(p=[ja.x,ja.y],d=[ja.x+ja.width,ja.y+ja.height]);var Ja=d[0]-p[0],ec=d[1]-p[1],tc=ja.width,rc=ja.height,nc=s.coordinateSystem=new View;nc.zoomLimit=s.get("scaleLimit"),nc.setBoundingRect(p[0],p[1],Ja,ec),nc.setViewRect(ja.x,ja.y,tc,rc),nc.setCenter(s.get("center"),r),nc.setZoom(s.get("zoom")),a.push(nc)}}),a}var straightLineProto=Line$2.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}();(function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r})(StraightLineShape);function isStraightLine(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var ECLinePath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="ec-line",s}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new StraightLineShape},r.prototype.buildPath=function(a,s){isStraightLine(s)?straightLineProto.buildPath.call(this,a,s):bezierCurveProto.buildPath.call(this,a,s)},r.prototype.pointAt=function(a){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,a):bezierCurveProto.pointAt.call(this,a)},r.prototype.tangentAt=function(a){var s=this.shape,o=isStraightLine(s)?[s.x2-s.x1,s.y2-s.y1]:bezierCurveProto.tangentAt.call(this,a);return normalize$5(o,o)},r}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(n){return"_"+n+"Type"}function makeSymbolTypeValue(n,r,a){var s=r.getItemVisual(a,n);if(!s||s==="none")return s;var o=r.getItemVisual(a,n+"Size"),u=r.getItemVisual(a,n+"Rotate"),c=r.getItemVisual(a,n+"Offset"),p=r.getItemVisual(a,n+"KeepAspect"),d=normalizeSymbolSize(o),_=normalizeSymbolOffset(c||0,d);return s+d+_+(u||"")+(p||"")}function createSymbol(n,r,a){var s=r.getItemVisual(a,n);if(!(!s||s==="none")){var o=r.getItemVisual(a,n+"Size"),u=r.getItemVisual(a,n+"Rotate"),c=r.getItemVisual(a,n+"Offset"),p=r.getItemVisual(a,n+"KeepAspect"),d=normalizeSymbolSize(o),_=normalizeSymbolOffset(c||0,d),ja=createSymbol$1(s,-d[0]/2+_[0],-d[1]/2+_[1],d[0],d[1],null,p);return ja.__specifiedRotation=u==null||isNaN(u)?void 0:+u*Math.PI/180||0,ja.name=n,ja}}function createLine(n){var r=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(r.shape,n),r}function setLinePoints(n,r){n.x1=r[0][0],n.y1=r[0][1],n.x2=r[1][0],n.y2=r[1][1],n.percent=1;var a=r[2];a?(n.cpx1=a[0],n.cpy1=a[1]):(n.cpx1=NaN,n.cpy1=NaN)}var Line$1=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this)||this;return u._createLine(a,s,o),u}return r.prototype._createLine=function(a,s,o){var u=a.hostModel,c=a.getItemLayout(s),p=createLine(c);p.shape.percent=0,initProps(p,{shape:{percent:1}},u,s),this.add(p),each$f(SYMBOL_CATEGORIES,function(d){var _=createSymbol(d,a,s);this.add(_),this[makeSymbolTypeKey(d)]=makeSymbolTypeValue(d,a,s)},this),this._updateCommonStl(a,s,o)},r.prototype.updateData=function(a,s,o){var u=a.hostModel,c=this.childOfName("line"),p=a.getItemLayout(s),d={shape:{}};setLinePoints(d.shape,p),updateProps$1(c,d,u,s),each$f(SYMBOL_CATEGORIES,function(_){var ja=makeSymbolTypeValue(_,a,s),Ja=makeSymbolTypeKey(_);if(this[Ja]!==ja){this.remove(this.childOfName(_));var ec=createSymbol(_,a,s);this.add(ec)}this[Ja]=ja},this),this._updateCommonStl(a,s,o)},r.prototype.getLinePath=function(){return this.childAt(0)},r.prototype._updateCommonStl=function(a,s,o){var u=a.hostModel,c=this.childOfName("line"),p=o&&o.emphasisLineStyle,d=o&&o.blurLineStyle,_=o&&o.selectLineStyle,ja=o&&o.labelStatesModels,Ja=o&&o.emphasisDisabled,ec=o&&o.focus,tc=o&&o.blurScope;if(!o||a.hasItemOption){var rc=a.getItemModel(s),nc=rc.getModel("emphasis");p=nc.getModel("lineStyle").getLineStyle(),d=rc.getModel(["blur","lineStyle"]).getLineStyle(),_=rc.getModel(["select","lineStyle"]).getLineStyle(),Ja=nc.get("disabled"),ec=nc.get("focus"),tc=nc.get("blurScope"),ja=getLabelStatesModels(rc)}var ic=a.getItemVisual(s,"style"),uc=ic.stroke;c.useStyle(ic),c.style.fill=null,c.style.strokeNoScale=!0,c.ensureState("emphasis").style=p,c.ensureState("blur").style=d,c.ensureState("select").style=_,each$f(SYMBOL_CATEGORIES,function(oh){var uh=this.childOfName(oh);if(uh){uh.setColor(uc),uh.style.opacity=ic.opacity;for(var ch=0;ch<SPECIAL_STATES.length;ch++){var hh=SPECIAL_STATES[ch],dh=c.getState(hh);if(dh){var gh=dh.style||{},fh=uh.ensureState(hh),vh=fh.style||(fh.style={});gh.stroke!=null&&(vh[uh.__isEmptyBrush?"stroke":"fill"]=gh.stroke),gh.opacity!=null&&(vh.opacity=gh.opacity)}}uh.markRedraw()}},this);var eh=u.getRawValue(s);setLabelStyle(this,ja,{labelDataIndex:s,labelFetcher:{getFormattedLabel:function(oh,uh){return u.getFormattedLabel(oh,uh,a.dataType)}},inheritColor:uc||"#000",defaultOpacity:ic.opacity,defaultText:(eh==null?a.getName(s):isFinite(eh)?round$3(eh):eh)+""});var rh=this.getTextContent();if(rh){var ah=ja.normal;rh.__align=rh.style.align,rh.__verticalAlign=rh.style.verticalAlign,rh.__position=ah.get("position")||"middle";var ih=ah.get("distance");isArray$1(ih)||(ih=[ih,ih]),rh.__labelDistance=ih}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,ec,tc,Ja)},r.prototype.highlight=function(){enterEmphasis(this)},r.prototype.downplay=function(){leaveEmphasis(this)},r.prototype.updateLayout=function(a,s){this.setLinePoints(a.getItemLayout(s))},r.prototype.setLinePoints=function(a){var s=this.childOfName("line");setLinePoints(s.shape,a),s.dirty()},r.prototype.beforeUpdate=function(){var a=this,s=a.childOfName("fromSymbol"),o=a.childOfName("toSymbol"),u=a.getTextContent();if(!s&&!o&&(!u||u.ignore))return;for(var c=1,p=this.parent;p;)p.scaleX&&(c/=p.scaleX),p=p.parent;var d=a.childOfName("line");if(!this.__dirty&&!d.__dirty)return;var _=d.shape.percent,ja=d.pointAt(0),Ja=d.pointAt(_),ec=sub$1([],Ja,ja);normalize$5(ec,ec);function tc(dh,gh){var fh=dh.__specifiedRotation;if(fh==null){var vh=d.tangentAt(gh);dh.attr("rotation",(gh===1?-1:1)*Math.PI/2-Math.atan2(vh[1],vh[0]))}else dh.attr("rotation",fh)}if(s&&(s.setPosition(ja),tc(s,0),s.scaleX=s.scaleY=c*_,s.markRedraw()),o&&(o.setPosition(Ja),tc(o,1),o.scaleX=o.scaleY=c*_,o.markRedraw()),u&&!u.ignore){u.x=u.y=0,u.originX=u.originY=0;var rc=void 0,nc=void 0,ic=u.__labelDistance,uc=ic[0]*c,eh=ic[1]*c,rh=_/2,ah=d.tangentAt(rh),ih=[ah[1],-ah[0]],oh=d.pointAt(rh);ih[1]>0&&(ih[0]=-ih[0],ih[1]=-ih[1]);var uh=ah[0]<0?-1:1;if(u.__position!=="start"&&u.__position!=="end"){var ch=-Math.atan2(ah[1],ah[0]);Ja[0]<ja[0]&&(ch=Math.PI+ch),u.rotation=ch}var hh=void 0;switch(u.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":hh=-eh,nc="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":hh=eh,nc="top";break;default:hh=0,nc="middle"}switch(u.__position){case"end":u.x=ec[0]*uc+Ja[0],u.y=ec[1]*eh+Ja[1],rc=ec[0]>.8?"left":ec[0]<-.8?"right":"center",nc=ec[1]>.8?"top":ec[1]<-.8?"bottom":"middle";break;case"start":u.x=-ec[0]*uc+ja[0],u.y=-ec[1]*eh+ja[1],rc=ec[0]>.8?"right":ec[0]<-.8?"left":"center",nc=ec[1]>.8?"bottom":ec[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":u.x=uc*uh+ja[0],u.y=ja[1]+hh,rc=ah[0]<0?"right":"left",u.originX=-uc*uh,u.originY=-hh;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":u.x=oh[0],u.y=oh[1]+hh,rc="center",u.originY=-hh;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":u.x=-uc*uh+Ja[0],u.y=Ja[1]+hh,rc=ah[0]>=0?"right":"left",u.originX=uc*uh,u.originY=-hh;break}u.scaleX=u.scaleY=c,u.setStyle({verticalAlign:u.__verticalAlign||nc,align:u.__align||rc})}},r}(Group$3),LineDraw=function(){function n(r){this.group=new Group$3,this._LineCtor=r||Line$1}return n.prototype.updateData=function(r){var a=this;this._progressiveEls=null;var s=this,o=s.group,u=s._lineData;s._lineData=r,u||o.removeAll();var c=makeSeriesScope$1(r);r.diff(u).add(function(p){a._doAdd(r,p,c)}).update(function(p,d){a._doUpdate(u,r,d,p,c)}).remove(function(p){o.remove(u.getItemGraphicEl(p))}).execute()},n.prototype.updateLayout=function(){var r=this._lineData;r&&r.eachItemGraphicEl(function(a,s){a.updateLayout(r,s)},this)},n.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=makeSeriesScope$1(r),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(r,a){this._progressiveEls=[];function s(p){!p.isGroup&&!isEffectObject(p)&&(p.incremental=!0,p.ensureState("emphasis").hoverLayer=!0)}for(var o=r.start;o<r.end;o++){var u=a.getItemLayout(o);if(lineNeedsDraw(u)){var c=new this._LineCtor(a,o,this._seriesScope);c.traverse(s),this.group.add(c),a.setItemGraphicEl(o,c),this._progressiveEls.push(c)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype._doAdd=function(r,a,s){var o=r.getItemLayout(a);if(lineNeedsDraw(o)){var u=new this._LineCtor(r,a,s);r.setItemGraphicEl(a,u),this.group.add(u)}},n.prototype._doUpdate=function(r,a,s,o,u){var c=r.getItemGraphicEl(s);if(!lineNeedsDraw(a.getItemLayout(o))){this.group.remove(c);return}c?c.updateData(a,o,u):c=new this._LineCtor(a,o,u),a.setItemGraphicEl(o,c),this.group.add(c)},n}();function isEffectObject(n){return n.animators&&n.animators.length>0}function makeSeriesScope$1(n){var r=n.hostModel,a=r.getModel("emphasis");return{lineStyle:r.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:r.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:r.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:getLabelStatesModels(r)}}function isPointNaN(n){return isNaN(n[0])||isNaN(n[1])}function lineNeedsDraw(n){return n&&!isPointNaN(n[0])&&!isPointNaN(n[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(n,r,a){for(var s=n[0],o=n[1],u=n[2],c=1/0,p,d=a*a,_=.1,ja=.1;ja<=.9;ja+=.1){v1[0]=quadraticAt(s[0],o[0],u[0],ja),v1[1]=quadraticAt(s[1],o[1],u[1],ja);var Ja=mathAbs(v2DistSquare(v1,r)-d);Ja<c&&(c=Ja,p=ja)}for(var ec=0;ec<32;ec++){var tc=p+_;v2[0]=quadraticAt(s[0],o[0],u[0],p),v2[1]=quadraticAt(s[1],o[1],u[1],p),v3[0]=quadraticAt(s[0],o[0],u[0],tc),v3[1]=quadraticAt(s[1],o[1],u[1],tc);var Ja=v2DistSquare(v2,r)-d;if(mathAbs(Ja)<.01)break;var rc=v2DistSquare(v3,r)-d;_/=2,Ja<0?rc>=0?p=p+_:p=p-_:rc>=0?p=p-_:p=p+_}return p}function adjustEdge(n,r){var a=[],s=quadraticSubdivide,o=[[],[],[]],u=[[],[]],c=[];r/=2,n.eachEdge(function(p,d){var _=p.getLayout(),ja=p.getVisual("fromSymbol"),Ja=p.getVisual("toSymbol");_.__original||(_.__original=[clone$3(_[0]),clone$3(_[1])],_[2]&&_.__original.push(clone$3(_[2])));var ec=_.__original;if(_[2]!=null){if(copy$1(o[0],ec[0]),copy$1(o[1],ec[2]),copy$1(o[2],ec[1]),ja&&ja!=="none"){var tc=getSymbolSize(p.node1),rc=intersectCurveCircle(o,ec[0],tc*r);s(o[0][0],o[1][0],o[2][0],rc,a),o[0][0]=a[3],o[1][0]=a[4],s(o[0][1],o[1][1],o[2][1],rc,a),o[0][1]=a[3],o[1][1]=a[4]}if(Ja&&Ja!=="none"){var tc=getSymbolSize(p.node2),rc=intersectCurveCircle(o,ec[1],tc*r);s(o[0][0],o[1][0],o[2][0],rc,a),o[1][0]=a[1],o[2][0]=a[2],s(o[0][1],o[1][1],o[2][1],rc,a),o[1][1]=a[1],o[2][1]=a[2]}copy$1(_[0],o[0]),copy$1(_[1],o[2]),copy$1(_[2],o[1])}else{if(copy$1(u[0],ec[0]),copy$1(u[1],ec[1]),sub$1(c,u[1],u[0]),normalize$5(c,c),ja&&ja!=="none"){var tc=getSymbolSize(p.node1);scaleAndAdd$1(u[0],u[0],c,tc*r)}if(Ja&&Ja!=="none"){var tc=getSymbolSize(p.node2);scaleAndAdd$1(u[1],u[1],c,-tc*r)}copy$1(_[0],u[0]),copy$1(_[1],u[1])}})}function isViewCoordSys(n){return n.type==="view"}var GraphView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a,s){var o=new SymbolDraw,u=new LineDraw,c=this.group;this._controller=new RoamController(s.getZr()),this._controllerHost={target:c},c.add(o.group),c.add(u.group),this._symbolDraw=o,this._lineDraw=u,this._firstRender=!0},r.prototype.render=function(a,s,o){var u=this,c=a.coordinateSystem;this._model=a;var p=this._symbolDraw,d=this._lineDraw,_=this.group;if(isViewCoordSys(c)){var ja={x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY};this._firstRender?_.attr(ja):updateProps$1(_,ja,a)}adjustEdge(a.getGraph(),getNodeGlobalScale(a));var Ja=a.getData();p.updateData(Ja);var ec=a.getEdgeData();d.updateData(ec),this._updateNodeAndLinkScale(),this._updateController(a,s,o),clearTimeout(this._layoutTimeout);var tc=a.forceLayout,rc=a.get(["force","layoutAnimation"]);tc&&this._startForceLayoutIteration(tc,rc);var nc=a.get("layout");Ja.graph.eachNode(function(rh){var ah=rh.dataIndex,ih=rh.getGraphicEl(),oh=rh.getModel();if(ih){ih.off("drag").off("dragend");var uh=oh.get("draggable");uh&&ih.on("drag",function(hh){switch(nc){case"force":tc.warmUp(),!u._layouting&&u._startForceLayoutIteration(tc,rc),tc.setFixed(ah),Ja.setItemLayout(ah,[ih.x,ih.y]);break;case"circular":Ja.setItemLayout(ah,[ih.x,ih.y]),rh.setLayout({fixed:!0},!0),circularLayout(a,"symbolSize",rh,[hh.offsetX,hh.offsetY]),u.updateLayout(a);break;case"none":default:Ja.setItemLayout(ah,[ih.x,ih.y]),simpleLayoutEdge(a.getGraph(),a),u.updateLayout(a);break}}).on("dragend",function(){tc&&tc.setUnfixed(ah)}),ih.setDraggable(uh,!!oh.get("cursor"));var ch=oh.get(["emphasis","focus"]);ch==="adjacency"&&(getECData(ih).focus=rh.getAdjacentDataIndices())}}),Ja.graph.eachEdge(function(rh){var ah=rh.getGraphicEl(),ih=rh.getModel().get(["emphasis","focus"]);ah&&ih==="adjacency"&&(getECData(ah).focus={edge:[rh.dataIndex],node:[rh.node1.dataIndex,rh.node2.dataIndex]})});var ic=a.get("layout")==="circular"&&a.get(["circular","rotateLabel"]),uc=Ja.getLayout("cx"),eh=Ja.getLayout("cy");Ja.graph.eachNode(function(rh){rotateNodeLabel(rh,ic,uc,eh)}),this._firstRender=!1},r.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._startForceLayoutIteration=function(a,s){var o=this;(function u(){a.step(function(c){o.updateLayout(o._model),(o._layouting=!c)&&(s?o._layoutTimeout=setTimeout(u,16):u())})})()},r.prototype._updateController=function(a,s,o){var u=this,c=this._controller,p=this._controllerHost,d=this.group;if(c.setPointerChecker(function(_,ja,Ja){var ec=d.getBoundingRect();return ec.applyTransform(d.transform),ec.contain(ja,Ja)&&!onIrrelevantElement(_,o,a)}),!isViewCoordSys(a.coordinateSystem)){c.disable();return}c.enable(a.get("roam")),p.zoomLimit=a.get("scaleLimit"),p.zoom=a.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(_){updateViewOnPan(p,_.dx,_.dy),o.dispatchAction({seriesId:a.id,type:"graphRoam",dx:_.dx,dy:_.dy})}).on("zoom",function(_){updateViewOnZoom(p,_.scale,_.originX,_.originY),o.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:_.scale,originX:_.originX,originY:_.originY}),u._updateNodeAndLinkScale(),adjustEdge(a.getGraph(),getNodeGlobalScale(a)),u._lineDraw.updateLayout(),o.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(){var a=this._model,s=a.getData(),o=getNodeGlobalScale(a);s.eachItemGraphicEl(function(u,c){u&&u.setSymbolScale(o)})},r.prototype.updateLayout=function(a){adjustEdge(a.getGraph(),getNodeGlobalScale(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},r.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},r.type="graph",r}(ChartView);function generateNodeKey(n){return"_EC_"+n}var Graph$1=function(){function n(r){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=r||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(r,a){r=r==null?""+a:""+r;var s=this._nodesMap;if(!s[generateNodeKey(r)]){var o=new GraphNode(r,a);return o.hostGraph=this,this.nodes.push(o),s[generateNodeKey(r)]=o,o}},n.prototype.getNodeByIndex=function(r){var a=this.data.getRawIndex(r);return this.nodes[a]},n.prototype.getNodeById=function(r){return this._nodesMap[generateNodeKey(r)]},n.prototype.addEdge=function(r,a,s){var o=this._nodesMap,u=this._edgesMap;if(isNumber(r)&&(r=this.nodes[r]),isNumber(a)&&(a=this.nodes[a]),r instanceof GraphNode||(r=o[generateNodeKey(r)]),a instanceof GraphNode||(a=o[generateNodeKey(a)]),!(!r||!a)){var c=r.id+"-"+a.id,p=new GraphEdge(r,a,s);return p.hostGraph=this,this._directed&&(r.outEdges.push(p),a.inEdges.push(p)),r.edges.push(p),r!==a&&a.edges.push(p),this.edges.push(p),u[c]=p,p}},n.prototype.getEdgeByIndex=function(r){var a=this.edgeData.getRawIndex(r);return this.edges[a]},n.prototype.getEdge=function(r,a){r instanceof GraphNode&&(r=r.id),a instanceof GraphNode&&(a=a.id);var s=this._edgesMap;return this._directed?s[r+"-"+a]:s[r+"-"+a]||s[a+"-"+r]},n.prototype.eachNode=function(r,a){for(var s=this.nodes,o=s.length,u=0;u<o;u++)s[u].dataIndex>=0&&r.call(a,s[u],u)},n.prototype.eachEdge=function(r,a){for(var s=this.edges,o=s.length,u=0;u<o;u++)s[u].dataIndex>=0&&s[u].node1.dataIndex>=0&&s[u].node2.dataIndex>=0&&r.call(a,s[u],u)},n.prototype.breadthFirstTraverse=function(r,a,s,o){if(a instanceof GraphNode||(a=this._nodesMap[generateNodeKey(a)]),!!a){for(var u=s==="out"?"outEdges":s==="in"?"inEdges":"edges",c=0;c<this.nodes.length;c++)this.nodes[c].__visited=!1;if(!r.call(o,a,null))for(var p=[a];p.length;)for(var d=p.shift(),_=d[u],c=0;c<_.length;c++){var ja=_[c],Ja=ja.node1===d?ja.node2:ja.node1;if(!Ja.__visited){if(r.call(o,Ja,d))return;p.push(Ja),Ja.__visited=!0}}}},n.prototype.update=function(){for(var r=this.data,a=this.edgeData,s=this.nodes,o=this.edges,u=0,c=s.length;u<c;u++)s[u].dataIndex=-1;for(var u=0,c=r.count();u<c;u++)s[r.getRawIndex(u)].dataIndex=u;a.filterSelf(function(p){var d=o[a.getRawIndex(p)];return d.node1.dataIndex>=0&&d.node2.dataIndex>=0});for(var u=0,c=o.length;u<c;u++)o[u].dataIndex=-1;for(var u=0,c=a.count();u<c;u++)o[a.getRawIndex(u)].dataIndex=u},n.prototype.clone=function(){for(var r=new n(this._directed),a=this.nodes,s=this.edges,o=0;o<a.length;o++)r.addNode(a[o].id,a[o].dataIndex);for(var o=0;o<s.length;o++){var u=s[o];r.addEdge(u.node1.id,u.node2.id,u.dataIndex)}return r},n}(),GraphNode=function(){function n(r,a){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=r??"",this.dataIndex=a??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(r){if(!(this.dataIndex<0)){var a=this.hostGraph,s=a.data.getItemModel(this.dataIndex);return s.getModel(r)}},n.prototype.getAdjacentDataIndices=function(){for(var r={edge:[],node:[]},a=0;a<this.edges.length;a++){var s=this.edges[a];s.dataIndex<0||(r.edge.push(s.dataIndex),r.node.push(s.node1.dataIndex,s.node2.dataIndex))}return r},n.prototype.getTrajectoryDataIndices=function(){for(var r=createHashMap(),a=createHashMap(),s=0;s<this.edges.length;s++){var o=this.edges[s];if(!(o.dataIndex<0)){r.set(o.dataIndex,!0);for(var u=[o.node1],c=[o.node2],p=0;p<u.length;){var d=u[p];p++,a.set(d.dataIndex,!0);for(var _=0;_<d.inEdges.length;_++)r.set(d.inEdges[_].dataIndex,!0),u.push(d.inEdges[_].node1)}for(p=0;p<c.length;){var ja=c[p];p++,a.set(ja.dataIndex,!0);for(var _=0;_<ja.outEdges.length;_++)r.set(ja.outEdges[_].dataIndex,!0),c.push(ja.outEdges[_].node2)}}}return{edge:r.keys(),node:a.keys()}},n}(),GraphEdge=function(){function n(r,a,s){this.dataIndex=-1,this.node1=r,this.node2=a,this.dataIndex=s??-1}return n.prototype.getModel=function(r){if(!(this.dataIndex<0)){var a=this.hostGraph,s=a.edgeData.getItemModel(this.dataIndex);return s.getModel(r)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var r=createHashMap(),a=createHashMap();r.set(this.dataIndex,!0);for(var s=[this.node1],o=[this.node2],u=0;u<s.length;){var c=s[u];u++,a.set(c.dataIndex,!0);for(var p=0;p<c.inEdges.length;p++)r.set(c.inEdges[p].dataIndex,!0),s.push(c.inEdges[p].node1)}for(u=0;u<o.length;){var d=o[u];u++,a.set(d.dataIndex,!0);for(var p=0;p<d.outEdges.length;p++)r.set(d.outEdges[p].dataIndex,!0),o.push(d.outEdges[p].node2)}return{edge:r.keys(),node:a.keys()}},n}();function createGraphDataProxyMixin(n,r){return{getValue:function(a){var s=this[n][r];return s.getStore().get(s.getDimensionIndex(a||"value"),this.dataIndex)},setVisual:function(a,s){this.dataIndex>=0&&this[n][r].setItemVisual(this.dataIndex,a,s)},getVisual:function(a){return this[n][r].getItemVisual(this.dataIndex,a)},setLayout:function(a,s){this.dataIndex>=0&&this[n][r].setItemLayout(this.dataIndex,a,s)},getLayout:function(){return this[n][r].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][r].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][r].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge$1(n,r,a,s,o){for(var u=new Graph$1(s),c=0;c<n.length;c++)u.addNode(retrieve$1(n[c].id,n[c].name,c),c);for(var p=[],d=[],_=0,c=0;c<r.length;c++){var ja=r[c],Ja=ja.source,ec=ja.target;u.addEdge(Ja,ec,_)&&(d.push(ja),p.push(retrieve$1(convertOptionIdName(ja.id,null),Ja+" > "+ec)),_++)}var tc=a.get("coordinateSystem"),rc;if(tc==="cartesian2d"||tc==="polar")rc=createSeriesData(n,a);else{var nc=CoordinateSystemManager.get(tc),ic=nc?nc.dimensions||[]:[];indexOf(ic,"value")<0&&ic.concat(["value"]);var uc=prepareSeriesDataSchema(n,{coordDimensions:ic,encodeDefine:a.getEncode()}).dimensions;rc=new SeriesData(uc,a),rc.initData(n)}var eh=new SeriesData(["value"],a);return eh.initData(d,p),o&&o(rc,eh),linkSeriesData({mainData:rc,struct:u,structAttr:"graph",datas:{node:rc,edge:eh},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}var GraphSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.hasSymbolVisual=!0,a}return r.prototype.init=function(a){n.prototype.init.apply(this,arguments);var s=this;function o(){return s._categoriesData}this.legendVisualProvider=new LegendVisualProvider(o,o),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},r.prototype.mergeOption=function(a){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},r.prototype.mergeDefaultAndTheme=function(a){n.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(a,"edgeLabel",["show"])},r.prototype.getInitialData=function(a,s){var o=a.edges||a.links||[],u=a.data||a.nodes||[],c=this;if(u&&o){initCurvenessList(this);var p=createGraphFromNodeEdge$1(u,o,this,!0,d);return each$f(p.edges,function(_){createEdgeMapForCurveness(_.node1,_.node2,this,_.dataIndex)},this),p.data}function d(_,ja){_.wrapMethod("getItemModel",function(rc){var nc=c._categoriesModels,ic=rc.getShallow("category"),uc=nc[ic];return uc&&(uc.parentModel=rc.parentModel,rc.parentModel=uc),rc});var Ja=Model.prototype.getModel;function ec(rc,nc){var ic=Ja.call(this,rc,nc);return ic.resolveParentPath=tc,ic}ja.wrapMethod("getItemModel",function(rc){return rc.resolveParentPath=tc,rc.getModel=ec,rc});function tc(rc){if(rc&&(rc[0]==="label"||rc[1]==="label")){var nc=rc.slice();return rc[0]==="label"?nc[0]="edgeLabel":rc[1]==="label"&&(nc[1]="edgeLabel"),nc}return rc}}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.getCategoriesData=function(){return this._categoriesData},r.prototype.formatTooltip=function(a,s,o){if(o==="edge"){var u=this.getData(),c=this.getDataParams(a,o),p=u.graph.getEdgeByIndex(a),d=u.getName(p.node1.dataIndex),_=u.getName(p.node2.dataIndex),ja=[];return d!=null&&ja.push(d),_!=null&&ja.push(_),createTooltipMarkup("nameValue",{name:ja.join(" > "),value:c.value,noValue:c.value==null})}var Ja=defaultSeriesFormatTooltip({series:this,dataIndex:a,multipleSeries:s});return Ja},r.prototype._updateCategoriesData=function(){var a=map$1(this.option.categories||[],function(o){return o.value!=null?o:extend$2({value:0},o)}),s=new SeriesData(["value"],this);s.initData(a),this._categoriesData=s,this._categoriesModels=s.mapArray(function(o){return s.getItemModel(o)})},r.prototype.setZoom=function(a){this.option.zoom=a},r.prototype.setCenter=function(a){this.option.center=a},r.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},r.type="series.graph",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$V(n){n.registerChartView(GraphView),n.registerSeriesModel(GraphSeriesModel),n.registerProcessor(categoryFilter),n.registerVisual(categoryVisual),n.registerVisual(graphEdgeVisual),n.registerLayout(graphSimpleLayout),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),n.registerLayout(graphForceLayout),n.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop$1),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop$1),n.registerAction(actionInfo$1,function(r,a,s){a.eachComponent({mainType:"series",query:r},function(o){var u=o.coordinateSystem,c=updateCenterAndZoom(u,r,void 0,s);o.setCenter&&o.setCenter(c.center),o.setZoom&&o.setZoom(c.zoom)})})}var PointerShape=function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n}(),PointerPath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="pointer",s}return r.prototype.getDefaultShape=function(){return new PointerShape},r.prototype.buildPath=function(a,s){var o=Math.cos,u=Math.sin,c=s.r,p=s.width,d=s.angle,_=s.x-o(d)*p*(p>=c/3?1:2),ja=s.y-u(d)*p*(p>=c/3?1:2);d=s.angle-Math.PI/2,a.moveTo(_,ja),a.lineTo(s.x+o(d)*p,s.y+u(d)*p),a.lineTo(s.x+o(s.angle)*c,s.y+u(s.angle)*c),a.lineTo(s.x-o(d)*p,s.y-u(d)*p),a.lineTo(_,ja)},r}(Path);function parsePosition(n,r){var a=n.get("center"),s=r.getWidth(),o=r.getHeight(),u=Math.min(s,o),c=parsePercent(a[0],r.getWidth()),p=parsePercent(a[1],r.getHeight()),d=parsePercent(n.get("radius"),u/2);return{cx:c,cy:p,r:d}}function formatLabel(n,r){var a=n==null?"":n+"";return r&&(isString(r)?a=r.replace("{value}",a):isFunction(r)&&(a=r(n))),a}var GaugeView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){this.group.removeAll();var u=a.get(["axisLine","lineStyle","color"]),c=parsePosition(a,o);this._renderMain(a,s,o,u,c),this._data=a.getData()},r.prototype.dispose=function(){},r.prototype._renderMain=function(a,s,o,u,c){var p=this.group,d=a.get("clockwise"),_=-a.get("startAngle")/180*Math.PI,ja=-a.get("endAngle")/180*Math.PI,Ja=a.getModel("axisLine"),ec=Ja.get("roundCap"),tc=ec?SausagePath:Sector,rc=Ja.get("show"),nc=Ja.getModel("lineStyle"),ic=nc.get("width"),uc=[_,ja];normalizeArcAngles(uc,!d),_=uc[0],ja=uc[1];for(var eh=ja-_,rh=_,ah=[],ih=0;rc&&ih<u.length;ih++){var oh=Math.min(Math.max(u[ih][0],0),1);ja=_+eh*oh;var uh=new tc({shape:{startAngle:rh,endAngle:ja,cx:c.cx,cy:c.cy,clockwise:d,r0:c.r-ic,r:c.r},silent:!0});uh.setStyle({fill:u[ih][1]}),uh.setStyle(nc.getLineStyle(["color","width"])),ah.push(uh),rh=ja}ah.reverse(),each$f(ah,function(hh){return p.add(hh)});var ch=function(hh){if(hh<=0)return u[0][1];var dh;for(dh=0;dh<u.length;dh++)if(u[dh][0]>=hh&&(dh===0?0:u[dh-1][0])<hh)return u[dh][1];return u[dh-1][1]};this._renderTicks(a,s,o,ch,c,_,ja,d,ic),this._renderTitleAndDetail(a,s,o,ch,c),this._renderAnchor(a,c),this._renderPointer(a,s,o,ch,c,_,ja,d,ic)},r.prototype._renderTicks=function(a,s,o,u,c,p,d,_,ja){for(var Ja=this.group,ec=c.cx,tc=c.cy,rc=c.r,nc=+a.get("min"),ic=+a.get("max"),uc=a.getModel("splitLine"),eh=a.getModel("axisTick"),rh=a.getModel("axisLabel"),ah=a.get("splitNumber"),ih=eh.get("splitNumber"),oh=parsePercent(uc.get("length"),rc),uh=parsePercent(eh.get("length"),rc),ch=p,hh=(d-p)/ah,dh=hh/ih,gh=uc.getModel("lineStyle").getLineStyle(),fh=eh.getModel("lineStyle").getLineStyle(),vh=uc.get("distance"),ph,yh,xh=0;xh<=ah;xh++){if(ph=Math.cos(ch),yh=Math.sin(ch),uc.get("show")){var _h=vh?vh+ja:ja,bh=new Line$2({shape:{x1:ph*(rc-_h)+ec,y1:yh*(rc-_h)+tc,x2:ph*(rc-oh-_h)+ec,y2:yh*(rc-oh-_h)+tc},style:gh,silent:!0});gh.stroke==="auto"&&bh.setStyle({stroke:u(xh/ah)}),Ja.add(bh)}if(rh.get("show")){var _h=rh.get("distance")+vh,Dh=formatLabel(round$3(xh/ah*(ic-nc)+nc),rh.get("formatter")),Th=u(xh/ah),Ch=ph*(rc-oh-_h)+ec,wh=yh*(rc-oh-_h)+tc,Nh=rh.get("rotate"),Rh=0;Nh==="radial"?(Rh=-ch+2*Math.PI,Rh>Math.PI/2&&(Rh+=Math.PI)):Nh==="tangential"?Rh=-ch-Math.PI/2:isNumber(Nh)&&(Rh=Nh*Math.PI/180),Rh===0?Ja.add(new ZRText({style:createTextStyle(rh,{text:Dh,x:Ch,y:wh,verticalAlign:yh<-.8?"top":yh>.8?"bottom":"middle",align:ph<-.4?"left":ph>.4?"right":"center"},{inheritColor:Th}),silent:!0})):Ja.add(new ZRText({style:createTextStyle(rh,{text:Dh,x:Ch,y:wh,verticalAlign:"middle",align:"center"},{inheritColor:Th}),silent:!0,originX:Ch,originY:wh,rotation:Rh}))}if(eh.get("show")&&xh!==ah){var _h=eh.get("distance");_h=_h?_h+ja:ja;for(var kh=0;kh<=ih;kh++){ph=Math.cos(ch),yh=Math.sin(ch);var Lh=new Line$2({shape:{x1:ph*(rc-_h)+ec,y1:yh*(rc-_h)+tc,x2:ph*(rc-uh-_h)+ec,y2:yh*(rc-uh-_h)+tc},silent:!0,style:fh});fh.stroke==="auto"&&Lh.setStyle({stroke:u((xh+kh/ih)/ah)}),Ja.add(Lh),ch+=dh}ch-=dh}else ch+=hh}},r.prototype._renderPointer=function(a,s,o,u,c,p,d,_,ja){var Ja=this.group,ec=this._data,tc=this._progressEls,rc=[],nc=a.get(["pointer","show"]),ic=a.getModel("progress"),uc=ic.get("show"),eh=a.getData(),rh=eh.mapDimension("value"),ah=+a.get("min"),ih=+a.get("max"),oh=[ah,ih],uh=[p,d];function ch(dh,gh){var fh=eh.getItemModel(dh),vh=fh.getModel("pointer"),ph=parsePercent(vh.get("width"),c.r),yh=parsePercent(vh.get("length"),c.r),xh=a.get(["pointer","icon"]),_h=vh.get("offsetCenter"),bh=parsePercent(_h[0],c.r),Dh=parsePercent(_h[1],c.r),Th=vh.get("keepAspect"),Ch;return xh?Ch=createSymbol$1(xh,bh-ph/2,Dh-yh,ph,yh,null,Th):Ch=new PointerPath({shape:{angle:-Math.PI/2,width:ph,r:yh,x:bh,y:Dh}}),Ch.rotation=-(gh+Math.PI/2),Ch.x=c.cx,Ch.y=c.cy,Ch}function hh(dh,gh){var fh=ic.get("roundCap"),vh=fh?SausagePath:Sector,ph=ic.get("overlap"),yh=ph?ic.get("width"):ja/eh.count(),xh=ph?c.r-yh:c.r-(dh+1)*yh,_h=ph?c.r:c.r-dh*yh,bh=new vh({shape:{startAngle:p,endAngle:gh,cx:c.cx,cy:c.cy,clockwise:_,r0:xh,r:_h}});return ph&&(bh.z2=ih-eh.get(rh,dh)%ih),bh}(uc||nc)&&(eh.diff(ec).add(function(dh){var gh=eh.get(rh,dh);if(nc){var fh=ch(dh,p);initProps(fh,{rotation:-((isNaN(+gh)?uh[0]:linearMap$2(gh,oh,uh,!0))+Math.PI/2)},a),Ja.add(fh),eh.setItemGraphicEl(dh,fh)}if(uc){var vh=hh(dh,p),ph=ic.get("clip");initProps(vh,{shape:{endAngle:linearMap$2(gh,oh,uh,ph)}},a),Ja.add(vh),setCommonECData(a.seriesIndex,eh.dataType,dh,vh),rc[dh]=vh}}).update(function(dh,gh){var fh=eh.get(rh,dh);if(nc){var vh=ec.getItemGraphicEl(gh),ph=vh?vh.rotation:p,yh=ch(dh,ph);yh.rotation=ph,updateProps$1(yh,{rotation:-((isNaN(+fh)?uh[0]:linearMap$2(fh,oh,uh,!0))+Math.PI/2)},a),Ja.add(yh),eh.setItemGraphicEl(dh,yh)}if(uc){var xh=tc[gh],_h=xh?xh.shape.endAngle:p,bh=hh(dh,_h),Dh=ic.get("clip");updateProps$1(bh,{shape:{endAngle:linearMap$2(fh,oh,uh,Dh)}},a),Ja.add(bh),setCommonECData(a.seriesIndex,eh.dataType,dh,bh),rc[dh]=bh}}).execute(),eh.each(function(dh){var gh=eh.getItemModel(dh),fh=gh.getModel("emphasis"),vh=fh.get("focus"),ph=fh.get("blurScope"),yh=fh.get("disabled");if(nc){var xh=eh.getItemGraphicEl(dh),_h=eh.getItemVisual(dh,"style"),bh=_h.fill;if(xh instanceof ZRImage){var Dh=xh.style;xh.useStyle(extend$2({image:Dh.image,x:Dh.x,y:Dh.y,width:Dh.width,height:Dh.height},_h))}else xh.useStyle(_h),xh.type!=="pointer"&&xh.setColor(bh);xh.setStyle(gh.getModel(["pointer","itemStyle"]).getItemStyle()),xh.style.fill==="auto"&&xh.setStyle("fill",u(linearMap$2(eh.get(rh,dh),oh,[0,1],!0))),xh.z2EmphasisLift=0,setStatesStylesFromModel(xh,gh),toggleHoverEmphasis(xh,vh,ph,yh)}if(uc){var Th=rc[dh];Th.useStyle(eh.getItemVisual(dh,"style")),Th.setStyle(gh.getModel(["progress","itemStyle"]).getItemStyle()),Th.z2EmphasisLift=0,setStatesStylesFromModel(Th,gh),toggleHoverEmphasis(Th,vh,ph,yh)}}),this._progressEls=rc)},r.prototype._renderAnchor=function(a,s){var o=a.getModel("anchor"),u=o.get("show");if(u){var c=o.get("size"),p=o.get("icon"),d=o.get("offsetCenter"),_=o.get("keepAspect"),ja=createSymbol$1(p,s.cx-c/2+parsePercent(d[0],s.r),s.cy-c/2+parsePercent(d[1],s.r),c,c,null,_);ja.z2=o.get("showAbove")?1:0,ja.setStyle(o.getModel("itemStyle").getItemStyle()),this.group.add(ja)}},r.prototype._renderTitleAndDetail=function(a,s,o,u,c){var p=this,d=a.getData(),_=d.mapDimension("value"),ja=+a.get("min"),Ja=+a.get("max"),ec=new Group$3,tc=[],rc=[],nc=a.isAnimationEnabled(),ic=a.get(["pointer","showAbove"]);d.diff(this._data).add(function(uc){tc[uc]=new ZRText({silent:!0}),rc[uc]=new ZRText({silent:!0})}).update(function(uc,eh){tc[uc]=p._titleEls[eh],rc[uc]=p._detailEls[eh]}).execute(),d.each(function(uc){var eh=d.getItemModel(uc),rh=d.get(_,uc),ah=new Group$3,ih=u(linearMap$2(rh,[ja,Ja],[0,1],!0)),oh=eh.getModel("title");if(oh.get("show")){var uh=oh.get("offsetCenter"),ch=c.cx+parsePercent(uh[0],c.r),hh=c.cy+parsePercent(uh[1],c.r),dh=tc[uc];dh.attr({z2:ic?0:2,style:createTextStyle(oh,{x:ch,y:hh,text:d.getName(uc),align:"center",verticalAlign:"middle"},{inheritColor:ih})}),ah.add(dh)}var gh=eh.getModel("detail");if(gh.get("show")){var fh=gh.get("offsetCenter"),vh=c.cx+parsePercent(fh[0],c.r),ph=c.cy+parsePercent(fh[1],c.r),yh=parsePercent(gh.get("width"),c.r),xh=parsePercent(gh.get("height"),c.r),_h=a.get(["progress","show"])?d.getItemVisual(uc,"style").fill:ih,dh=rc[uc],bh=gh.get("formatter");dh.attr({z2:ic?0:2,style:createTextStyle(gh,{x:vh,y:ph,text:formatLabel(rh,bh),width:isNaN(yh)?null:yh,height:isNaN(xh)?null:xh,align:"center",verticalAlign:"middle"},{inheritColor:_h})}),setLabelValueAnimation(dh,{normal:gh},rh,function(Th){return formatLabel(Th,bh)}),nc&&animateLabelValue(dh,uc,d,a,{getFormattedLabel:function(Th,Ch,wh,Nh,Rh,kh){return formatLabel(kh?kh.interpolatedValue:rh,bh)}}),ah.add(dh)}ec.add(ah)}),this.group.add(ec),this._titleEls=tc,this._detailEls=rc},r.type="gauge",r}(ChartView),GaugeSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.visualStyleAccessPath="itemStyle",a}return r.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,["value"])},r.type="series.gauge",r.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},r}(SeriesModel);function install$U(n){n.registerChartView(GaugeView),n.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(n){__extends(r,n);function r(a,s){var o=n.call(this)||this,u=o,c=new Polyline$1,p=new ZRText;return u.setTextContent(p),o.setTextGuideLine(c),o.updateData(a,s,!0),o}return r.prototype.updateData=function(a,s,o){var u=this,c=a.hostModel,p=a.getItemModel(s),d=a.getItemLayout(s),_=p.getModel("emphasis"),ja=p.get(opacityAccessPath$1);ja=ja??1,o||saveOldStyle(u),u.useStyle(a.getItemVisual(s,"style")),u.style.lineJoin="round",o?(u.setShape({points:d.points}),u.style.opacity=0,initProps(u,{style:{opacity:ja}},c,s)):updateProps$1(u,{style:{opacity:ja},shape:{points:d.points}},c,s),setStatesStylesFromModel(u,p),this._updateLabel(a,s),toggleHoverEmphasis(this,_.get("focus"),_.get("blurScope"),_.get("disabled"))},r.prototype._updateLabel=function(a,s){var o=this,u=this.getTextGuideLine(),c=o.getTextContent(),p=a.hostModel,d=a.getItemModel(s),_=a.getItemLayout(s),ja=_.label,Ja=a.getItemVisual(s,"style"),ec=Ja.fill;setLabelStyle(c,getLabelStatesModels(d),{labelFetcher:a.hostModel,labelDataIndex:s,defaultOpacity:Ja.opacity,defaultText:a.getName(s)},{normal:{align:ja.textAlign,verticalAlign:ja.verticalAlign}}),o.setTextConfig({local:!0,inside:!!ja.inside,insideStroke:ec,outsideFill:ec});var tc=ja.linePoints;u.setShape({points:tc}),o.textGuideLineConfig={anchor:tc?new Point(tc[0][0],tc[0][1]):null},updateProps$1(c,{style:{x:ja.x,y:ja.y}},p,s),c.attr({rotation:ja.rotation,originX:ja.x,originY:ja.y,z2:10}),setLabelLineStyle(o,getLabelLineStatesModels(d),{stroke:ec})},r}(Polygon),FunnelView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.ignoreLabelLineUpdate=!0,a}return r.prototype.render=function(a,s,o){var u=a.getData(),c=this._data,p=this.group;u.diff(c).add(function(d){var _=new FunnelPiece(u,d);u.setItemGraphicEl(d,_),p.add(_)}).update(function(d,_){var ja=c.getItemGraphicEl(_);ja.updateData(u,d),p.add(ja),u.setItemGraphicEl(d,ja)}).remove(function(d){var _=c.getItemGraphicEl(d);removeElementWithFadeOut(_,a,d)}).execute(),this._data=u},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.prototype.dispose=function(){},r.type="funnel",r}(ChartView),FunnelSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(a)},r.prototype.getInitialData=function(a,s){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},r.prototype._defaultLabelLine=function(a){defaultEmphasis(a,"labelLine",["show"]);var s=a.labelLine,o=a.emphasis.labelLine;s.show=s.show&&a.label.show,o.show=o.show&&a.emphasis.label.show},r.prototype.getDataParams=function(a){var s=this.getData(),o=n.prototype.getDataParams.call(this,a),u=s.mapDimension("value"),c=s.getSum(u);return o.percent=c?+(s.get(u,a)/c*100).toFixed(2):0,o.$vars.push("percent"),o},r.type="series.funnel",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(SeriesModel);function getViewRect$2(n,r){return getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function getSortedIndices(n,r){for(var a=n.mapDimension("value"),s=n.mapArray(a,function(d){return d}),o=[],u=r==="ascending",c=0,p=n.count();c<p;c++)o[c]=c;return isFunction(r)?o.sort(r):r!=="none"&&o.sort(function(d,_){return u?s[d]-s[_]:s[_]-s[d]}),o}function labelLayout(n){var r=n.hostModel,a=r.get("orient");n.each(function(s){var o=n.getItemModel(s),u=o.getModel("label"),c=u.get("position"),p=o.getModel("labelLine"),d=n.getItemLayout(s),_=d.points,ja=c==="inner"||c==="inside"||c==="center"||c==="insideLeft"||c==="insideRight",Ja,ec,tc,rc;if(ja)c==="insideLeft"?(ec=(_[0][0]+_[3][0])/2+5,tc=(_[0][1]+_[3][1])/2,Ja="left"):c==="insideRight"?(ec=(_[1][0]+_[2][0])/2-5,tc=(_[1][1]+_[2][1])/2,Ja="right"):(ec=(_[0][0]+_[1][0]+_[2][0]+_[3][0])/4,tc=(_[0][1]+_[1][1]+_[2][1]+_[3][1])/4,Ja="center"),rc=[[ec,tc],[ec,tc]];else{var nc=void 0,ic=void 0,uc=void 0,eh=void 0,rh=p.get("length");c==="left"?(nc=(_[3][0]+_[0][0])/2,ic=(_[3][1]+_[0][1])/2,uc=nc-rh,ec=uc-5,Ja="right"):c==="right"?(nc=(_[1][0]+_[2][0])/2,ic=(_[1][1]+_[2][1])/2,uc=nc+rh,ec=uc+5,Ja="left"):c==="top"?(nc=(_[3][0]+_[0][0])/2,ic=(_[3][1]+_[0][1])/2,eh=ic-rh,tc=eh-5,Ja="center"):c==="bottom"?(nc=(_[1][0]+_[2][0])/2,ic=(_[1][1]+_[2][1])/2,eh=ic+rh,tc=eh+5,Ja="center"):c==="rightTop"?(nc=a==="horizontal"?_[3][0]:_[1][0],ic=a==="horizontal"?_[3][1]:_[1][1],a==="horizontal"?(eh=ic-rh,tc=eh-5,Ja="center"):(uc=nc+rh,ec=uc+5,Ja="top")):c==="rightBottom"?(nc=_[2][0],ic=_[2][1],a==="horizontal"?(eh=ic+rh,tc=eh+5,Ja="center"):(uc=nc+rh,ec=uc+5,Ja="bottom")):c==="leftTop"?(nc=_[0][0],ic=a==="horizontal"?_[0][1]:_[1][1],a==="horizontal"?(eh=ic-rh,tc=eh-5,Ja="center"):(uc=nc-rh,ec=uc-5,Ja="right")):c==="leftBottom"?(nc=a==="horizontal"?_[1][0]:_[3][0],ic=a==="horizontal"?_[1][1]:_[2][1],a==="horizontal"?(eh=ic+rh,tc=eh+5,Ja="center"):(uc=nc-rh,ec=uc-5,Ja="right")):(nc=(_[1][0]+_[2][0])/2,ic=(_[1][1]+_[2][1])/2,a==="horizontal"?(eh=ic+rh,tc=eh+5,Ja="center"):(uc=nc+rh,ec=uc+5,Ja="left")),a==="horizontal"?(uc=nc,ec=uc):(eh=ic,tc=eh),rc=[[nc,ic],[uc,eh]]}d.label={linePoints:rc,x:ec,y:tc,verticalAlign:"middle",textAlign:Ja,inside:ja}})}function funnelLayout(n,r){n.eachSeriesByType("funnel",function(a){var s=a.getData(),o=s.mapDimension("value"),u=a.get("sort"),c=getViewRect$2(a,r),p=a.get("orient"),d=c.width,_=c.height,ja=getSortedIndices(s,u),Ja=c.x,ec=c.y,tc=p==="horizontal"?[parsePercent(a.get("minSize"),_),parsePercent(a.get("maxSize"),_)]:[parsePercent(a.get("minSize"),d),parsePercent(a.get("maxSize"),d)],rc=s.getDataExtent(o),nc=a.get("min"),ic=a.get("max");nc==null&&(nc=Math.min(rc[0],0)),ic==null&&(ic=rc[1]);var uc=a.get("funnelAlign"),eh=a.get("gap"),rh=p==="horizontal"?d:_,ah=(rh-eh*(s.count()-1))/s.count(),ih=function(ph,yh){if(p==="horizontal"){var xh=s.get(o,ph)||0,_h=linearMap$2(xh,[nc,ic],tc,!0),bh=void 0;switch(uc){case"top":bh=ec;break;case"center":bh=ec+(_-_h)/2;break;case"bottom":bh=ec+(_-_h);break}return[[yh,bh],[yh,bh+_h]]}var Dh=s.get(o,ph)||0,Th=linearMap$2(Dh,[nc,ic],tc,!0),Ch;switch(uc){case"left":Ch=Ja;break;case"center":Ch=Ja+(d-Th)/2;break;case"right":Ch=Ja+d-Th;break}return[[Ch,yh],[Ch+Th,yh]]};u==="ascending"&&(ah=-ah,eh=-eh,p==="horizontal"?Ja+=d:ec+=_,ja=ja.reverse());for(var oh=0;oh<ja.length;oh++){var uh=ja[oh],ch=ja[oh+1],hh=s.getItemModel(uh);if(p==="horizontal"){var dh=hh.get(["itemStyle","width"]);dh==null?dh=ah:(dh=parsePercent(dh,d),u==="ascending"&&(dh=-dh));var gh=ih(uh,Ja),fh=ih(ch,Ja+dh);Ja+=dh+eh,s.setItemLayout(uh,{points:gh.concat(fh.slice().reverse())})}else{var vh=hh.get(["itemStyle","height"]);vh==null?vh=ah:(vh=parsePercent(vh,_),u==="ascending"&&(vh=-vh));var gh=ih(uh,ec),fh=ih(ch,ec+vh);ec+=vh+eh,s.setItemLayout(uh,{points:gh.concat(fh.slice().reverse())})}}labelLayout(s)})}function install$T(n){n.registerChartView(FunnelView),n.registerSeriesModel(FunnelSeriesModel),n.registerLayout(funnelLayout),n.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._dataGroup=new Group$3,a._initialized=!1,a}return r.prototype.init=function(){this.group.add(this._dataGroup)},r.prototype.render=function(a,s,o,u){this._progressiveEls=null;var c=this._dataGroup,p=a.getData(),d=this._data,_=a.coordinateSystem,ja=_.dimensions,Ja=makeSeriesScope(a);p.diff(d).add(ec).update(tc).remove(rc).execute();function ec(ic){var uc=addEl(p,c,ic,ja,_);updateElCommon(uc,p,ic,Ja)}function tc(ic,uc){var eh=d.getItemGraphicEl(uc),rh=createLinePoints(p,ic,ja,_);p.setItemGraphicEl(ic,eh),updateProps$1(eh,{shape:{points:rh}},a,ic),saveOldStyle(eh),updateElCommon(eh,p,ic,Ja)}function rc(ic){var uc=d.getItemGraphicEl(ic);c.remove(uc)}if(!this._initialized){this._initialized=!0;var nc=createGridClipShape$2(_,a,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(nc)}this._data=p},r.prototype.incrementalPrepareRender=function(a,s,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},r.prototype.incrementalRender=function(a,s,o){for(var u=s.getData(),c=s.coordinateSystem,p=c.dimensions,d=makeSeriesScope(s),_=this._progressiveEls=[],ja=a.start;ja<a.end;ja++){var Ja=addEl(u,this._dataGroup,ja,p,c);Ja.incremental=!0,updateElCommon(Ja,u,ja,d),_.push(Ja)}},r.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},r.type="parallel",r}(ChartView);function createGridClipShape$2(n,r,a){var s=n.model,o=n.getRect(),u=new Rect$2({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),c=s.get("layout")==="horizontal"?"width":"height";return u.setShape(c,0),initProps(u,{shape:{width:o.width,height:o.height}},r,a),u}function createLinePoints(n,r,a,s){for(var o=[],u=0;u<a.length;u++){var c=a[u],p=n.get(n.mapDimension(c),r);isEmptyValue(p,s.getAxis(c).type)||o.push(s.dataToPoint(p,c))}return o}function addEl(n,r,a,s,o){var u=createLinePoints(n,a,s,o),c=new Polyline$1({shape:{points:u},z2:10});return r.add(c),n.setItemGraphicEl(a,c),c}function makeSeriesScope(n){var r=n.get("smooth",!0);return r===!0&&(r=DEFAULT_SMOOTH),r=numericToNumber(r),eqNaN(r)&&(r=0),{smooth:r}}function updateElCommon(n,r,a,s){n.useStyle(r.getItemVisual(a,"style")),n.style.fill=null,n.setShape("smooth",s.smooth);var o=r.getItemModel(a),u=o.getModel("emphasis");setStatesStylesFromModel(n,o,"lineStyle"),toggleHoverEmphasis(n,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function isEmptyValue(n,r){return r==="category"?n==null:n==null||isNaN(n)}var ParallelSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return r.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},r.prototype.getRawIndicesByActiveState=function(a){var s=this.coordinateSystem,o=this.getData(),u=[];return s.eachActiveState(o,function(c,p){a===c&&u.push(o.getRawIndex(p))}),u},r.type="series.parallel",r.dependencies=["parallel"],r.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},r}(SeriesModel);function makeDefaultEncode(n){var r=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(r){var a={};return each$f(r.dimensions,function(s){var o=convertDimNameToNumber(s);a[s]=o}),a}}function convertDimNameToNumber(n){return+n.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(n,r){var a=n.coordinateSystem,s={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(o,u){a.eachActiveState(u,function(c,p){var d=s[c];if(c==="normal"&&u.hasItemOption){var _=u.getItemModel(p).get(opacityAccessPath,!0);_!=null&&(d=_)}var ja=u.ensureUniqueItemVisual(p,"style");ja.opacity=d},o.start,o.end)}}}};function parallelPreprocessor(n){createParallelIfNeeded(n),mergeAxisOptionFromParallel(n)}function createParallelIfNeeded(n){if(!n.parallel){var r=!1;each$f(n.series,function(a){a&&a.type==="parallel"&&(r=!0)}),r&&(n.parallel=[{}])}}function mergeAxisOptionFromParallel(n){var r=normalizeToArray(n.parallelAxis);each$f(r,function(a){if(isObject$3(a)){var s=a.parallelIndex||0,o=normalizeToArray(n.parallel)[s];o&&o.parallelAxisDefault&&merge(a,o.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){this._model=a,this._api=o,this._handlers||(this._handlers={},each$f(handlers$2,function(u,c){o.getZr().on(c,this._handlers[c]=bind$1(u,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},r.prototype.dispose=function(a,s){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(o,u){s.getZr().off(u,o)}),this._handlers=null},r.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},r.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction(extend$2({type:"parallelAxisExpand"},a))},r.type="parallel",r}(ComponentView),handlers$2={mousedown:function(n){checkTrigger(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var r=this._mouseDownPoint;if(checkTrigger(this,"click")&&r){var a=[n.offsetX,n.offsetY],s=Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2);if(s>CLICK_THRESHOLD)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);o.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var r=this._model,a=r.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),s=a.behavior;s==="jump"&&this._throttledDispatchExpand.debounceNextCall(r.get("axisExpandDebounce")),this._throttledDispatchExpand(s==="none"?null:{axisExpandWindow:a.axisExpandWindow,animation:s==="jump"?null:{duration:0}})}}};function checkTrigger(n,r){var a=n._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===r}var ParallelModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},r.prototype.mergeOption=function(a){var s=this.option;a&&merge(s,a,!0),this._initDimensions()},r.prototype.contains=function(a,s){var o=a.get("parallelIndex");return o!=null&&s.getComponent("parallel",o)===this},r.prototype.setAxisExpand=function(a){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(s){a.hasOwnProperty(s)&&(this.option[s]=a[s])},this)},r.prototype._initDimensions=function(){var a=this.dimensions=[],s=this.parallelAxisIndex=[],o=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(u){return(u.get("parallelIndex")||0)===this.componentIndex},this);each$f(o,function(u){a.push("dim"+u.get("dim")),s.push(u.componentIndex)})},r.type="parallel",r.dependencies=["parallelAxis"],r.layoutMode="box",r.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},r}(ComponentModel),ParallelAxis=function(n){__extends(r,n);function r(a,s,o,u,c){var p=n.call(this,a,s,o)||this;return p.type=u||"value",p.axisIndex=c,p}return r.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},r}(Axis);function sliderMove(n,r,a,s,o,u){n=n||0;var c=a[1]-a[0];if(o!=null&&(o=restrict$1(o,[0,c])),u!=null&&(u=Math.max(u,o??0)),s==="all"){var p=Math.abs(r[1]-r[0]);p=restrict$1(p,[0,c]),o=u=restrict$1(p,[o,u]),s=0}r[0]=restrict$1(r[0],a),r[1]=restrict$1(r[1],a);var d=getSpanSign(r,s);r[s]+=n;var _=o||0,ja=a.slice();d.sign<0?ja[0]+=_:ja[1]-=_,r[s]=restrict$1(r[s],ja);var Ja;return Ja=getSpanSign(r,s),o!=null&&(Ja.sign!==d.sign||Ja.span<o)&&(r[1-s]=r[s]+d.sign*o),Ja=getSpanSign(r,s),u!=null&&Ja.span>u&&(r[1-s]=r[s]+Ja.sign*u),r}function getSpanSign(n,r){var a=n[r]-n[1-r];return{span:Math.abs(a),sign:a>0?-1:a<0?1:r?-1:1}}function restrict$1(n,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,n))}var each$a=each$f,mathMin$3=Math.min,mathMax$3=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$3=Math.PI,Parallel=function(){function n(r,a,s){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=r.dimensions,this._model=r,this._init(r,a,s)}return n.prototype._init=function(r,a,s){var o=r.dimensions,u=r.parallelAxisIndex;each$a(o,function(c,p){var d=u[p],_=a.getComponent("parallelAxis",d),ja=this._axesMap.set(c,new ParallelAxis(c,createScaleByModel$1(_),[0,0],_.get("type"),d)),Ja=ja.type==="category";ja.onBand=Ja&&_.get("boundaryGap"),ja.inverse=_.get("inverse"),_.axis=ja,ja.model=_,ja.coordinateSystem=_.coordinateSystem=this},this)},n.prototype.update=function(r,a){this._updateAxesFromSeries(this._model,r)},n.prototype.containPoint=function(r){var a=this._makeLayoutInfo(),s=a.axisBase,o=a.layoutBase,u=a.pixelDimIndex,c=r[1-u],p=r[u];return c>=s&&c<=s+a.axisLength&&p>=o&&p<=o+a.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(r,a){a.eachSeries(function(s){if(r.contains(s,a)){var o=s.getData();each$a(this.dimensions,function(u){var c=this._axesMap.get(u);c.scale.unionExtentFromData(o,o.mapDimension(u)),niceScaleExtent(c.scale,c.model)},this)}},this)},n.prototype.resize=function(r,a){this._rect=getLayoutRect(r.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var r=this._model,a=this._rect,s=["x","y"],o=["width","height"],u=r.get("layout"),c=u==="horizontal"?0:1,p=a[o[c]],d=[0,p],_=this.dimensions.length,ja=restrict(r.get("axisExpandWidth"),d),Ja=restrict(r.get("axisExpandCount")||0,[0,_]),ec=r.get("axisExpandable")&&_>3&&_>Ja&&Ja>1&&ja>0&&p>0,tc=r.get("axisExpandWindow"),rc;if(tc)rc=restrict(tc[1]-tc[0],d),tc[1]=tc[0]+rc;else{rc=restrict(ja*(Ja-1),d);var nc=r.get("axisExpandCenter")||mathFloor(_/2);tc=[ja*nc-rc/2],tc[1]=tc[0]+rc}var ic=(p-rc)/(_-Ja);ic<3&&(ic=0);var uc=[mathFloor(round(tc[0]/ja,1))+1,mathCeil(round(tc[1]/ja,1))-1],eh=ic/ja*tc[0];return{layout:u,pixelDimIndex:c,layoutBase:a[s[c]],layoutLength:p,axisBase:a[s[1-c]],axisLength:a[o[1-c]],axisExpandable:ec,axisExpandWidth:ja,axisCollapseWidth:ic,axisExpandWindow:tc,axisCount:_,winInnerIndices:uc,axisExpandWindow0Pos:eh}},n.prototype._layoutAxes=function(){var r=this._rect,a=this._axesMap,s=this.dimensions,o=this._makeLayoutInfo(),u=o.layout;a.each(function(c){var p=[0,o.axisLength],d=c.inverse?1:0;c.setExtent(p[d],p[1-d])}),each$a(s,function(c,p){var d=(o.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(p,o),_={horizontal:{x:d.position,y:o.axisLength},vertical:{x:0,y:d.position}},ja={horizontal:PI$3/2,vertical:0},Ja=[_[u].x+r.x,_[u].y+r.y],ec=ja[u],tc=create$2();rotate(tc,tc,ec),translate(tc,tc,Ja),this._axesLayout[c]={position:Ja,rotation:ec,transform:tc,axisNameAvailableWidth:d.axisNameAvailableWidth,axisLabelShow:d.axisLabelShow,nameTruncateMaxWidth:d.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(r){return this._axesMap.get(r)},n.prototype.dataToPoint=function(r,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(r),a)},n.prototype.eachActiveState=function(r,a,s,o){s==null&&(s=0),o==null&&(o=r.count());var u=this._axesMap,c=this.dimensions,p=[],d=[];each$f(c,function(ic){p.push(r.mapDimension(ic)),d.push(u.get(ic).model)});for(var _=this.hasAxisBrushed(),ja=s;ja<o;ja++){var Ja=void 0;if(!_)Ja="normal";else{Ja="active";for(var ec=r.getValues(p,ja),tc=0,rc=c.length;tc<rc;tc++){var nc=d[tc].getActiveState(ec[tc]);if(nc==="inactive"){Ja="inactive";break}}}a(Ja,ja)}},n.prototype.hasAxisBrushed=function(){for(var r=this.dimensions,a=this._axesMap,s=!1,o=0,u=r.length;o<u;o++)a.get(r[o]).model.getActiveState()!=="normal"&&(s=!0);return s},n.prototype.axisCoordToPoint=function(r,a){var s=this._axesLayout[a];return applyTransform([r,0],s.transform)},n.prototype.getAxisLayout=function(r){return clone$4(this._axesLayout[r])},n.prototype.getSlidedAxisExpandWindow=function(r){var a=this._makeLayoutInfo(),s=a.pixelDimIndex,o=a.axisExpandWindow.slice(),u=o[1]-o[0],c=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(r))return{behavior:"none",axisExpandWindow:o};var p=r[s]-a.layoutBase-a.axisExpandWindow0Pos,d,_="slide",ja=a.axisCollapseWidth,Ja=this._model.get("axisExpandSlideTriggerArea"),ec=Ja[0]!=null;if(ja)ec&&ja&&p<u*Ja[0]?(_="jump",d=p-u*Ja[2]):ec&&ja&&p>u*(1-Ja[0])?(_="jump",d=p-u*(1-Ja[2])):(d=p-u*Ja[1])>=0&&(d=p-u*(1-Ja[1]))<=0&&(d=0),d*=a.axisExpandWidth/ja,d?sliderMove(d,o,c,"all"):_="none";else{var tc=o[1]-o[0],rc=c[1]*p/tc;o=[mathMax$3(0,rc-tc/2)],o[1]=mathMin$3(c[1],o[0]+tc),o[0]=o[1]-tc}return{axisExpandWindow:o,behavior:_}},n}();function restrict(n,r){return mathMin$3(mathMax$3(n,r[0]),r[1])}function layoutAxisWithoutExpand(n,r){var a=r.layoutLength/(r.axisCount-1);return{position:a*n,axisNameAvailableWidth:a,axisLabelShow:!0}}function layoutAxisWithExpand(n,r){var a=r.layoutLength,s=r.axisExpandWidth,o=r.axisCount,u=r.axisCollapseWidth,c=r.winInnerIndices,p,d=u,_=!1,ja;return n<c[0]?(p=n*u,ja=u):n<=c[1]?(p=r.axisExpandWindow0Pos+n*s-r.axisExpandWindow[0],d=s,_=!0):(p=a-(o-1-n)*u,ja=u),{position:p,axisNameAvailableWidth:d,axisLabelShow:_,nameTruncateMaxWidth:ja}}function createParallelCoordSys(n,r){var a=[];return n.eachComponent("parallel",function(s,o){var u=new Parallel(s,n,r);u.name="parallel_"+o,u.resize(s,r),s.coordinateSystem=u,u.model=s,a.push(u)}),n.eachSeries(function(s){if(s.get("coordinateSystem")==="parallel"){var o=s.getReferringComponents("parallel",SINGLE_REFERRING).models[0];s.coordinateSystem=o.coordinateSystem}}),a}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.activeIntervals=[],a}return r.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},r.prototype.setActiveIntervals=function(a){var s=this.activeIntervals=clone$4(a);if(s)for(var o=s.length-1;o>=0;o--)asc$2(s[o])},r.prototype.getActiveState=function(a){var s=this.activeIntervals;if(!s.length)return"normal";if(a==null||isNaN(+a))return"inactive";if(s.length===1){var o=s[0];if(o[0]<=a&&a<=o[1])return"active"}else for(var u=0,c=s.length;u<c;u++)if(s[u][0]<=a&&a<=s[u][1])return"active";return"inactive"},r}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$2=Math.min,mathMax$2=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(n){__extends(r,n);function r(a){var s=n.call(this)||this;return s._track=[],s._covers=[],s._handlers={},s._zr=a,s.group=new Group$3,s._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(o,u){this._handlers[u]=bind$1(o,this)},s),s}return r.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},r.prototype._doEnableBrush=function(a){var s=this._zr;this._enableGlobalPan||take(s,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,u){s.on(u,o)}),this._brushType=a.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),a,!0)},r.prototype._doDisableBrush=function(){var a=this._zr;release(a,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(s,o){a.off(o,s)}),this._brushType=this._brushOption=null},r.prototype.setPanels=function(a){if(a&&a.length){var s=this._panels={};each$f(a,function(o){s[o.panelId]=clone$4(o)})}else this._panels=null;return this},r.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var s=this.group;return this._zr.add(s),s.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=s.getLocalTransform(),this},r.prototype.updateCovers=function(a){a=map$1(a,function(ec){return merge(clone$4(DEFAULT_BRUSH_OPT),ec,!0)});var s="\0-brush-index-",o=this._covers,u=this._covers=[],c=this,p=this._creatingCover;return new DataDiffer(o,a,_,d).add(ja).update(ja).remove(Ja).execute(),this;function d(ec,tc){return(ec.id!=null?ec.id:s+tc)+"-"+ec.brushType}function _(ec,tc){return d(ec.__brushOption,tc)}function ja(ec,tc){var rc=a[ec];if(tc!=null&&o[tc]===p)u[ec]=o[tc];else{var nc=u[ec]=tc!=null?(o[tc].__brushOption=rc,o[tc]):endCreating(c,createCover(c,rc));updateCoverAfterCreation(c,nc)}}function Ja(ec){o[ec]!==p&&c.group.remove(o[ec])}},r.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},r.prototype.dispose=function(){this.unmount(),this.off()},r}(Eventful);function createCover(n,r){var a=coverRenderers[r.brushType].createCover(n,r);return a.__brushOption=r,updateZ$1(a,r),n.group.add(a),a}function endCreating(n,r){var a=getCoverRenderer(r);return a.endCreating&&(a.endCreating(n,r),updateZ$1(r,r.__brushOption)),r}function updateCoverShape(n,r){var a=r.__brushOption;getCoverRenderer(r).updateCoverShape(n,r,a.range,a)}function updateZ$1(n,r){var a=r.z;a==null&&(a=COVER_Z),n.traverse(function(s){s.z=a,s.z2=a})}function updateCoverAfterCreation(n,r){getCoverRenderer(r).updateCommon(n,r),updateCoverShape(n,r)}function getCoverRenderer(n){return coverRenderers[n.__brushOption.brushType]}function getPanelByPoint(n,r,a){var s=n._panels;if(!s)return BRUSH_PANEL_GLOBAL;var o,u=n._transform;return each$f(s,function(c){c.isTargetByCursor(r,a,u)&&(o=c)}),o}function getPanelByCover(n,r){var a=n._panels;if(!a)return BRUSH_PANEL_GLOBAL;var s=r.__brushOption.panelId;return s!=null?a[s]:BRUSH_PANEL_GLOBAL}function clearCovers(n){var r=n._covers,a=r.length;return each$f(r,function(s){n.group.remove(s)},n),r.length=0,!!a}function trigger(n,r){var a=map$1(n._covers,function(s){var o=s.__brushOption,u=clone$4(o.range);return{brushType:o.brushType,panelId:o.panelId,range:u}});n.trigger("brush",{areas:a,isEnd:!!r.isEnd,removeOnClick:!!r.removeOnClick})}function shouldShowCover(n){var r=n._track;if(!r.length)return!1;var a=r[r.length-1],s=r[0],o=a[0]-s[0],u=a[1]-s[1],c=mathPow(o*o+u*u,.5);return c>UNSELECT_THRESHOLD}function getTrackEnds(n){var r=n.length-1;return r<0&&(r=0),[n[0],n[r]]}function createBaseRectCover(n,r,a,s){var o=new Group$3;return o.add(new Rect$2({name:"main",style:makeStyle(a),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,n,r,o,["n","s","w","e"]),ondragend:curry$1(trigger,r,{isEnd:!0})})),each$f(s,function(u){o.add(new Rect$2({name:u.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,n,r,o,u),ondragend:curry$1(trigger,r,{isEnd:!0})}))}),o}function updateBaseRect(n,r,a,s){var o=s.brushStyle.lineWidth||0,u=mathMax$2(o,MIN_RESIZE_LINE_WIDTH),c=a[0][0],p=a[1][0],d=c-o/2,_=p-o/2,ja=a[0][1],Ja=a[1][1],ec=ja-u+o/2,tc=Ja-u+o/2,rc=ja-c,nc=Ja-p,ic=rc+o,uc=nc+o;updateRectShape(n,r,"main",c,p,rc,nc),s.transformable&&(updateRectShape(n,r,"w",d,_,u,uc),updateRectShape(n,r,"e",ec,_,u,uc),updateRectShape(n,r,"n",d,_,ic,u),updateRectShape(n,r,"s",d,tc,ic,u),updateRectShape(n,r,"nw",d,_,u,u),updateRectShape(n,r,"ne",ec,_,u,u),updateRectShape(n,r,"sw",d,tc,u,u),updateRectShape(n,r,"se",ec,tc,u,u))}function updateCommon$1(n,r){var a=r.__brushOption,s=a.transformable,o=r.childAt(0);o.useStyle(makeStyle(a)),o.attr({silent:!s,cursor:s?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(u){var c=r.childOfName(u.join("")),p=u.length===1?getGlobalDirection1(n,u[0]):getGlobalDirection2(n,u);c&&c.attr({silent:!s,invisible:!s,cursor:s?CURSOR_MAP[p]+"-resize":null})})}function updateRectShape(n,r,a,s,o,u,c){var p=r.childOfName(a);p&&p.setShape(pointsToRect(clipByPanel(n,r,[[s,o],[s+u,o+c]])))}function makeStyle(n){return defaults({strokeNoScale:!0},n.brushStyle)}function formatRectRange(n,r,a,s){var o=[mathMin$2(n,a),mathMin$2(r,s)],u=[mathMax$2(n,a),mathMax$2(r,s)];return[[o[0],u[0]],[o[1],u[1]]]}function getTransform(n){return getTransform$1(n.group)}function getGlobalDirection1(n,r){var a={w:"left",e:"right",n:"top",s:"bottom"},s={left:"w",right:"e",top:"n",bottom:"s"},o=transformDirection(a[r],getTransform(n));return s[o]}function getGlobalDirection2(n,r){var a=[getGlobalDirection1(n,r[0]),getGlobalDirection1(n,r[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function driftRect(n,r,a,s,o,u){var c=a.__brushOption,p=n.toRectRange(c.range),d=toLocalDelta(r,o,u);each$f(s,function(_){var ja=DIRECTION_MAP[_];p[ja[0]][ja[1]]+=d[ja[0]]}),c.range=n.fromRectRange(formatRectRange(p[0][0],p[1][0],p[0][1],p[1][1])),updateCoverAfterCreation(r,a),trigger(r,{isEnd:!1})}function driftPolygon(n,r,a,s){var o=r.__brushOption.range,u=toLocalDelta(n,a,s);each$f(o,function(c){c[0]+=u[0],c[1]+=u[1]}),updateCoverAfterCreation(n,r),trigger(n,{isEnd:!1})}function toLocalDelta(n,r,a){var s=n.group,o=s.transformCoordToLocal(r,a),u=s.transformCoordToLocal(0,0);return[o[0]-u[0],o[1]-u[1]]}function clipByPanel(n,r,a){var s=getPanelByCover(n,r);return s&&s!==BRUSH_PANEL_GLOBAL?s.clipPath(a,n._transform):clone$4(a)}function pointsToRect(n){var r=mathMin$2(n[0][0],n[1][0]),a=mathMin$2(n[0][1],n[1][1]),s=mathMax$2(n[0][0],n[1][0]),o=mathMax$2(n[0][1],n[1][1]);return{x:r,y:a,width:s-r,height:o-a}}function resetCursor(n,r,a){if(!(!n._brushType||isOutsideZrArea(n,r.offsetX,r.offsetY))){var s=n._zr,o=n._covers,u=getPanelByPoint(n,r,a);if(!n._dragging)for(var c=0;c<o.length;c++){var p=o[c].__brushOption;if(u&&(u===BRUSH_PANEL_GLOBAL||p.panelId===u.panelId)&&coverRenderers[p.brushType].contain(o[c],a[0],a[1]))return}u&&s.setCursorStyle("crosshair")}}function preventDefault(n){var r=n.event;r.preventDefault&&r.preventDefault()}function mainShapeContain(n,r,a){return n.childOfName("main").contain(r,a)}function updateCoverByMouse(n,r,a,s){var o=n._creatingCover,u=n._creatingPanel,c=n._brushOption,p;if(n._track.push(a.slice()),shouldShowCover(n)||o){if(u&&!o){c.brushMode==="single"&&clearCovers(n);var d=clone$4(c);d.brushType=determineBrushType(d.brushType,u),d.panelId=u===BRUSH_PANEL_GLOBAL?null:u.panelId,o=n._creatingCover=createCover(n,d),n._covers.push(o)}if(o){var _=coverRenderers[determineBrushType(n._brushType,u)],ja=o.__brushOption;ja.range=_.getCreatingRange(clipByPanel(n,o,n._track)),s&&(endCreating(n,o),_.updateCommon(n,o)),updateCoverShape(n,o),p={isEnd:s}}}else s&&c.brushMode==="single"&&c.removeOnClick&&getPanelByPoint(n,r,a)&&clearCovers(n)&&(p={isEnd:s,removeOnClick:!0});return p}function determineBrushType(n,r){return n==="auto"?r.defaultBrushType:n}var pointerHandlers={mousedown:function(n){if(this._dragging)handleDragEnd(this,n);else if(!n.target||!n.target.draggable){preventDefault(n);var r=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var a=this._creatingPanel=getPanelByPoint(this,n,r);a&&(this._dragging=!0,this._track=[r.slice()])}},mousemove:function(n){var r=n.offsetX,a=n.offsetY,s=this.group.transformCoordToLocal(r,a);if(resetCursor(this,n,s),this._dragging){preventDefault(n);var o=updateCoverByMouse(this,n,s,!1);o&&trigger(this,o)}},mouseup:function(n){handleDragEnd(this,n)}};function handleDragEnd(n,r){if(n._dragging){preventDefault(r);var a=r.offsetX,s=r.offsetY,o=n.group.transformCoordToLocal(a,s),u=updateCoverByMouse(n,r,o,!0);n._dragging=!1,n._track=[],n._creatingCover=null,u&&trigger(n,u)}}function isOutsideZrArea(n,r,a){var s=n._zr;return r<0||r>s.getWidth()||a<0||a>s.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(n,r){function a(s){return s}return createBaseRectCover({toRectRange:a,fromRectRange:a},n,r,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var r=getTrackEnds(n);return formatRectRange(r[1][0],r[1][1],r[0][0],r[0][1])},updateCoverShape:function(n,r,a,s){updateBaseRect(n,r,a,s)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(n,r){var a=new Group$3;return a.add(new Polyline$1({name:"main",style:makeStyle(r),silent:!0})),a},getCreatingRange:function(n){return n},endCreating:function(n,r){r.remove(r.childAt(0)),r.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,n,r),ondragend:curry$1(trigger,n,{isEnd:!0})}))},updateCoverShape:function(n,r,a,s){r.childAt(0).setShape({points:clipByPanel(n,r,a)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(n){return{createCover:function(r,a){return createBaseRectCover({toRectRange:function(s){var o=[s,[0,100]];return n&&o.reverse(),o},fromRectRange:function(s){return s[n]}},r,a,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(r){var a=getTrackEnds(r),s=mathMin$2(a[0][n],a[1][n]),o=mathMax$2(a[0][n],a[1][n]);return[s,o]},updateCoverShape:function(r,a,s,o){var u,c=getPanelByCover(r,a);if(c!==BRUSH_PANEL_GLOBAL&&c.getLinearBrushOtherExtent)u=c.getLinearBrushOtherExtent(n);else{var p=r._zr;u=[0,[p.getWidth(),p.getHeight()][1-n]]}var d=[s,u];n&&d.reverse(),updateBaseRect(r,a,d,o)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(n){return n=normalizeRect(n),function(r){return clipPointsByRect(r,n)}}function makeLinearBrushOtherExtent(n,r){return n=normalizeRect(n),function(a){var s=r??a,o=s?n.width:n.height,u=s?n.x:n.y;return[u,u+(o||0)]}}function makeRectIsTargetByCursor(n,r,a){var s=normalizeRect(n);return function(o,u){return s.contain(u[0],u[1])&&!onIrrelevantElement(o,r,a)}}function normalizeRect(n){return BoundingRect.create(n)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a,s){n.prototype.init.apply(this,arguments),(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this))},r.prototype.render=function(a,s,o,u){if(!fromAxisAreaSelect(a,s,u)){this.axisModel=a,this.api=o,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!a.get("show")){var p=getCoordSysModel(a,s),d=p.coordinateSystem,_=a.getAreaSelectStyle(),ja=_.width,Ja=a.axis.dim,ec=d.getAxisLayout(Ja),tc=extend$2({strokeContainThreshold:ja},ec),rc=new AxisBuilder(a,tc);each$f(elementList$1,rc.add,rc),this._axisGroup.add(rc.getGroup()),this._refreshBrushController(tc,_,a,p,ja,o),groupTransition(c,this._axisGroup,a)}}},r.prototype._refreshBrushController=function(a,s,o,u,c,p){var d=o.axis.getExtent(),_=d[1]-d[0],ja=Math.min(30,Math.abs(_)*.1),Ja=BoundingRect.create({x:d[0],y:-c/2,width:_,height:c});Ja.x-=ja,Ja.width+=2*ja,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(Ja),isTargetByCursor:makeRectIsTargetByCursor(Ja,p,u),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(Ja,0)}]).enableBrush({brushType:"lineX",brushStyle:s,removeOnClick:!0}).updateCovers(getCoverInfoList(o))},r.prototype._onBrush=function(a){var s=a.areas,o=this.axisModel,u=o.axis,c=map$1(s,function(p){return[u.coordToData(p.range[0],!0),u.coordToData(p.range[1],!0)]});(!o.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:c})},r.prototype.dispose=function(){this._brushController.dispose()},r.type="parallelAxis",r}(ComponentView);function fromAxisAreaSelect(n,r,a){return a&&a.type==="axisAreaSelect"&&r.findComponents({mainType:"parallelAxis",query:a})[0]===n}function getCoverInfoList(n){var r=n.axis;return map$1(n.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[r.dataToCoord(a[0],!0),r.dataToCoord(a[1],!0)]}})}function getCoordSysModel(n,r){return r.getComponent("parallel",n.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(n){n.registerAction(actionInfo,function(r,a){a.eachComponent({mainType:"parallelAxis",query:r},function(s){s.axis.model.setActiveIntervals(r.intervals)})}),n.registerAction("parallelAxisExpand",function(r,a){a.eachComponent({mainType:"parallel",query:r},function(s){s.setAxisExpand(r)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$S(n){n.registerComponentView(ParallelView),n.registerComponentModel(ParallelModel),n.registerCoordinateSystem("parallel",parallelCoordSysCreator),n.registerPreprocessor(parallelPreprocessor),n.registerComponentModel(ParallelAxisModel),n.registerComponentView(ParallelAxisView),axisModelCreator(n,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(n)}function install$R(n){use(install$S),n.registerChartView(ParallelView$1),n.registerSeriesModel(ParallelSeriesModel),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n}(),SankeyPath=function(n){__extends(r,n);function r(a){return n.call(this,a)||this}return r.prototype.getDefaultShape=function(){return new SankeyPathShape},r.prototype.buildPath=function(a,s){var o=s.extent;a.moveTo(s.x1,s.y1),a.bezierCurveTo(s.cpx1,s.cpy1,s.cpx2,s.cpy2,s.x2,s.y2),s.orient==="vertical"?(a.lineTo(s.x2+o,s.y2),a.bezierCurveTo(s.cpx2+o,s.cpy2,s.cpx1+o,s.cpy1,s.x1+o,s.y1)):(a.lineTo(s.x2,s.y2+o),a.bezierCurveTo(s.cpx2,s.cpy2+o,s.cpx1,s.cpy1+o,s.x1,s.y1+o)),a.closePath()},r.prototype.highlight=function(){enterEmphasis(this)},r.prototype.downplay=function(){leaveEmphasis(this)},r}(Path),SankeyView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._focusAdjacencyDisabled=!1,a}return r.prototype.render=function(a,s,o){var u=this,c=a.getGraph(),p=this.group,d=a.layoutInfo,_=d.width,ja=d.height,Ja=a.getData(),ec=a.getData("edge"),tc=a.get("orient");this._model=a,p.removeAll(),p.x=d.x,p.y=d.y,c.eachEdge(function(rc){var nc=new SankeyPath,ic=getECData(nc);ic.dataIndex=rc.dataIndex,ic.seriesIndex=a.seriesIndex,ic.dataType="edge";var uc=rc.getModel(),eh=uc.getModel("lineStyle"),rh=eh.get("curveness"),ah=rc.node1.getLayout(),ih=rc.node1.getModel(),oh=ih.get("localX"),uh=ih.get("localY"),ch=rc.node2.getLayout(),hh=rc.node2.getModel(),dh=hh.get("localX"),gh=hh.get("localY"),fh=rc.getLayout(),vh,ph,yh,xh,_h,bh,Dh,Th;nc.shape.extent=Math.max(1,fh.dy),nc.shape.orient=tc,tc==="vertical"?(vh=(oh!=null?oh*_:ah.x)+fh.sy,ph=(uh!=null?uh*ja:ah.y)+ah.dy,yh=(dh!=null?dh*_:ch.x)+fh.ty,xh=gh!=null?gh*ja:ch.y,_h=vh,bh=ph*(1-rh)+xh*rh,Dh=yh,Th=ph*rh+xh*(1-rh)):(vh=(oh!=null?oh*_:ah.x)+ah.dx,ph=(uh!=null?uh*ja:ah.y)+fh.sy,yh=dh!=null?dh*_:ch.x,xh=(gh!=null?gh*ja:ch.y)+fh.ty,_h=vh*(1-rh)+yh*rh,bh=ph,Dh=vh*rh+yh*(1-rh),Th=xh),nc.setShape({x1:vh,y1:ph,x2:yh,y2:xh,cpx1:_h,cpy1:bh,cpx2:Dh,cpy2:Th}),nc.useStyle(eh.getItemStyle()),applyCurveStyle(nc.style,tc,rc);var Ch=""+uc.get("value"),wh=getLabelStatesModels(uc,"edgeLabel");setLabelStyle(nc,wh,{labelFetcher:{getFormattedLabel:function(kh,Lh,Fh,Wh,Qh,jh){return a.getFormattedLabel(kh,Lh,"edge",Wh,retrieve3(Qh,wh.normal&&wh.normal.get("formatter"),Ch),jh)}},labelDataIndex:rc.dataIndex,defaultText:Ch}),nc.setTextConfig({position:"inside"});var Nh=uc.getModel("emphasis");setStatesStylesFromModel(nc,uc,"lineStyle",function(kh){var Lh=kh.getItemStyle();return applyCurveStyle(Lh,tc,rc),Lh}),p.add(nc),ec.setItemGraphicEl(rc.dataIndex,nc);var Rh=Nh.get("focus");toggleHoverEmphasis(nc,Rh==="adjacency"?rc.getAdjacentDataIndices():Rh==="trajectory"?rc.getTrajectoryDataIndices():Rh,Nh.get("blurScope"),Nh.get("disabled"))}),c.eachNode(function(rc){var nc=rc.getLayout(),ic=rc.getModel(),uc=ic.get("localX"),eh=ic.get("localY"),rh=ic.getModel("emphasis"),ah=new Rect$2({shape:{x:uc!=null?uc*_:nc.x,y:eh!=null?eh*ja:nc.y,width:nc.dx,height:nc.dy},style:ic.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(ah,getLabelStatesModels(ic),{labelFetcher:{getFormattedLabel:function(oh,uh){return a.getFormattedLabel(oh,uh,"node")}},labelDataIndex:rc.dataIndex,defaultText:rc.id}),ah.disableLabelAnimation=!0,ah.setStyle("fill",rc.getVisual("color")),ah.setStyle("decal",rc.getVisual("style").decal),setStatesStylesFromModel(ah,ic),p.add(ah),Ja.setItemGraphicEl(rc.dataIndex,ah),getECData(ah).dataType="node";var ih=rh.get("focus");toggleHoverEmphasis(ah,ih==="adjacency"?rc.getAdjacentDataIndices():ih==="trajectory"?rc.getTrajectoryDataIndices():ih,rh.get("blurScope"),rh.get("disabled"))}),Ja.eachItemGraphicEl(function(rc,nc){var ic=Ja.getItemModel(nc);ic.get("draggable")&&(rc.drift=function(uc,eh){u._focusAdjacencyDisabled=!0,this.shape.x+=uc,this.shape.y+=eh,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:Ja.getRawIndex(nc),localX:this.shape.x/_,localY:this.shape.y/ja})},rc.ondragend=function(){u._focusAdjacencyDisabled=!1},rc.draggable=!0,rc.cursor="move")}),!this._data&&a.isAnimationEnabled()&&p.setClipPath(createGridClipShape$1(p.getBoundingRect(),a,function(){p.removeClipPath()})),this._data=a.getData()},r.prototype.dispose=function(){},r.type="sankey",r}(ChartView);function applyCurveStyle(n,r,a){switch(n.fill){case"source":n.fill=a.node1.getVisual("color"),n.decal=a.node1.getVisual("style").decal;break;case"target":n.fill=a.node2.getVisual("color"),n.decal=a.node2.getVisual("style").decal;break;case"gradient":var s=a.node1.getVisual("color"),o=a.node2.getVisual("color");isString(s)&&isString(o)&&(n.fill=new LinearGradient(0,0,+(r==="horizontal"),+(r==="vertical"),[{color:s,offset:0},{color:o,offset:1}]))}}function createGridClipShape$1(n,r,a){var s=new Rect$2({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return initProps(s,{shape:{width:n.width+20}},r,a),s}var SankeySeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.getInitialData=function(a,s){var o=a.edges||a.links,u=a.data||a.nodes,c=a.levels;this.levelModels=[];for(var p=this.levelModels,d=0;d<c.length;d++)c[d].depth!=null&&c[d].depth>=0&&(p[c[d].depth]=new Model(c[d],this,s));if(u&&o){var _=createGraphFromNodeEdge$1(u,o,this,!0,ja);return _.data}function ja(Ja,ec){Ja.wrapMethod("getItemModel",function(tc,rc){var nc=tc.parentModel,ic=nc.getData().getItemLayout(rc);if(ic){var uc=ic.depth,eh=nc.levelModels[uc];eh&&(tc.parentModel=eh)}return tc}),ec.wrapMethod("getItemModel",function(tc,rc){var nc=tc.parentModel,ic=nc.getGraph().getEdgeByIndex(rc),uc=ic.node1.getLayout();if(uc){var eh=uc.depth,rh=nc.levelModels[eh];rh&&(tc.parentModel=rh)}return tc})}},r.prototype.setNodePosition=function(a,s){var o=this.option.data||this.option.nodes,u=o[a];u.localX=s[0],u.localY=s[1]},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(a,s,o){function u(tc){return isNaN(tc)||tc==null}if(o==="edge"){var c=this.getDataParams(a,o),p=c.data,d=c.value,_=p.source+" -- "+p.target;return createTooltipMarkup("nameValue",{name:_,value:d,noValue:u(d)})}else{var ja=this.getGraph().getNodeByIndex(a),Ja=ja.getLayout().value,ec=this.getDataParams(a,o).data.name;return createTooltipMarkup("nameValue",{name:ec!=null?ec+"":null,value:Ja,noValue:u(Ja)})}},r.prototype.optionUpdated=function(){},r.prototype.getDataParams=function(a,s){var o=n.prototype.getDataParams.call(this,a,s);if(o.value==null&&s==="node"){var u=this.getGraph().getNodeByIndex(a),c=u.getLayout().value;o.value=c}return o},r.type="series.sankey",r.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},r}(SeriesModel);function sankeyLayout(n,r){n.eachSeriesByType("sankey",function(a){var s=a.get("nodeWidth"),o=a.get("nodeGap"),u=getViewRect$1(a,r);a.layoutInfo=u;var c=u.width,p=u.height,d=a.getGraph(),_=d.nodes,ja=d.edges;computeNodeValues(_);var Ja=filter(_,function(nc){return nc.getLayout().value===0}),ec=Ja.length!==0?0:a.get("layoutIterations"),tc=a.get("orient"),rc=a.get("nodeAlign");layoutSankey(_,ja,s,o,c,p,ec,tc,rc)})}function getViewRect$1(n,r){return getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function layoutSankey(n,r,a,s,o,u,c,p,d){computeNodeBreadths(n,r,a,o,u,p,d),computeNodeDepths(n,r,u,o,s,c,p),computeEdgeDepths(n,p)}function computeNodeValues(n){each$f(n,function(r){var a=sum(r.outEdges,getEdgeValue),s=sum(r.inEdges,getEdgeValue),o=r.getValue()||0,u=Math.max(a,s,o);r.setLayout({value:u},!0)})}function computeNodeBreadths(n,r,a,s,o,u,c){for(var p=[],d=[],_=[],ja=[],Ja=0,ec=0;ec<r.length;ec++)p[ec]=1;for(var ec=0;ec<n.length;ec++)d[ec]=n[ec].inEdges.length,d[ec]===0&&_.push(n[ec]);for(var tc=-1;_.length;){for(var rc=0;rc<_.length;rc++){var nc=_[rc],ic=nc.hostGraph.data.getRawDataItem(nc.dataIndex),uc=ic.depth!=null&&ic.depth>=0;uc&&ic.depth>tc&&(tc=ic.depth),nc.setLayout({depth:uc?ic.depth:Ja},!0),u==="vertical"?nc.setLayout({dy:a},!0):nc.setLayout({dx:a},!0);for(var eh=0;eh<nc.outEdges.length;eh++){var rh=nc.outEdges[eh],ah=r.indexOf(rh);p[ah]=0;var ih=rh.node2,oh=n.indexOf(ih);--d[oh]===0&&ja.indexOf(ih)<0&&ja.push(ih)}}++Ja,_=ja,ja=[]}for(var ec=0;ec<p.length;ec++)if(p[ec]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var uh=tc>Ja-1?tc:Ja-1;c&&c!=="left"&&adjustNodeWithNodeAlign(n,c,u,uh);var ch=u==="vertical"?(o-a)/uh:(s-a)/uh;scaleNodeBreadths(n,ch,u)}function isNodeDepth(n){var r=n.hostGraph.data.getRawDataItem(n.dataIndex);return r.depth!=null&&r.depth>=0}function adjustNodeWithNodeAlign(n,r,a,s){if(r==="right"){for(var o=[],u=n,c=0;u.length;){for(var p=0;p<u.length;p++){var d=u[p];d.setLayout({skNodeHeight:c},!0);for(var _=0;_<d.inEdges.length;_++){var ja=d.inEdges[_];o.indexOf(ja.node1)<0&&o.push(ja.node1)}}u=o,o=[],++c}each$f(n,function(Ja){isNodeDepth(Ja)||Ja.setLayout({depth:Math.max(0,s-Ja.getLayout().skNodeHeight)},!0)})}else r==="justify"&&moveSinksRight(n,s)}function moveSinksRight(n,r){each$f(n,function(a){!isNodeDepth(a)&&!a.outEdges.length&&a.setLayout({depth:r},!0)})}function scaleNodeBreadths(n,r,a){each$f(n,function(s){var o=s.getLayout().depth*r;a==="vertical"?s.setLayout({y:o},!0):s.setLayout({x:o},!0)})}function computeNodeDepths(n,r,a,s,o,u,c){var p=prepareNodesByBreadth(n,c);initializeNodeDepth(p,r,a,s,o,c),resolveCollisions(p,o,a,s,c);for(var d=1;u>0;u--)d*=.99,relaxRightToLeft(p,d,c),resolveCollisions(p,o,a,s,c),relaxLeftToRight(p,d,c),resolveCollisions(p,o,a,s,c)}function prepareNodesByBreadth(n,r){var a=[],s=r==="vertical"?"y":"x",o=groupData(n,function(u){return u.getLayout()[s]});return o.keys.sort(function(u,c){return u-c}),each$f(o.keys,function(u){a.push(o.buckets.get(u))}),a}function initializeNodeDepth(n,r,a,s,o,u){var c=1/0;each$f(n,function(p){var d=p.length,_=0;each$f(p,function(Ja){_+=Ja.getLayout().value});var ja=u==="vertical"?(s-(d-1)*o)/_:(a-(d-1)*o)/_;ja<c&&(c=ja)}),each$f(n,function(p){each$f(p,function(d,_){var ja=d.getLayout().value*c;u==="vertical"?(d.setLayout({x:_},!0),d.setLayout({dx:ja},!0)):(d.setLayout({y:_},!0),d.setLayout({dy:ja},!0))})}),each$f(r,function(p){var d=+p.getValue()*c;p.setLayout({dy:d},!0)})}function resolveCollisions(n,r,a,s,o){var u=o==="vertical"?"x":"y";each$f(n,function(c){c.sort(function(nc,ic){return nc.getLayout()[u]-ic.getLayout()[u]});for(var p,d,_,ja=0,Ja=c.length,ec=o==="vertical"?"dx":"dy",tc=0;tc<Ja;tc++)d=c[tc],_=ja-d.getLayout()[u],_>0&&(p=d.getLayout()[u]+_,o==="vertical"?d.setLayout({x:p},!0):d.setLayout({y:p},!0)),ja=d.getLayout()[u]+d.getLayout()[ec]+r;var rc=o==="vertical"?s:a;if(_=ja-r-rc,_>0){p=d.getLayout()[u]-_,o==="vertical"?d.setLayout({x:p},!0):d.setLayout({y:p},!0),ja=p;for(var tc=Ja-2;tc>=0;--tc)d=c[tc],_=d.getLayout()[u]+d.getLayout()[ec]+r-ja,_>0&&(p=d.getLayout()[u]-_,o==="vertical"?d.setLayout({x:p},!0):d.setLayout({y:p},!0)),ja=d.getLayout()[u]}})}function relaxRightToLeft(n,r,a){each$f(n.slice().reverse(),function(s){each$f(s,function(o){if(o.outEdges.length){var u=sum(o.outEdges,weightedTarget,a)/sum(o.outEdges,getEdgeValue);if(isNaN(u)){var c=o.outEdges.length;u=c?sum(o.outEdges,centerTarget,a)/c:0}if(a==="vertical"){var p=o.getLayout().x+(u-center(o,a))*r;o.setLayout({x:p},!0)}else{var d=o.getLayout().y+(u-center(o,a))*r;o.setLayout({y:d},!0)}}})})}function weightedTarget(n,r){return center(n.node2,r)*n.getValue()}function centerTarget(n,r){return center(n.node2,r)}function weightedSource(n,r){return center(n.node1,r)*n.getValue()}function centerSource(n,r){return center(n.node1,r)}function center(n,r){return r==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function getEdgeValue(n){return n.getValue()}function sum(n,r,a){for(var s=0,o=n.length,u=-1;++u<o;){var c=+r(n[u],a);isNaN(c)||(s+=c)}return s}function relaxLeftToRight(n,r,a){each$f(n,function(s){each$f(s,function(o){if(o.inEdges.length){var u=sum(o.inEdges,weightedSource,a)/sum(o.inEdges,getEdgeValue);if(isNaN(u)){var c=o.inEdges.length;u=c?sum(o.inEdges,centerSource,a)/c:0}if(a==="vertical"){var p=o.getLayout().x+(u-center(o,a))*r;o.setLayout({x:p},!0)}else{var d=o.getLayout().y+(u-center(o,a))*r;o.setLayout({y:d},!0)}}})})}function computeEdgeDepths(n,r){var a=r==="vertical"?"x":"y";each$f(n,function(s){s.outEdges.sort(function(o,u){return o.node2.getLayout()[a]-u.node2.getLayout()[a]}),s.inEdges.sort(function(o,u){return o.node1.getLayout()[a]-u.node1.getLayout()[a]})}),each$f(n,function(s){var o=0,u=0;each$f(s.outEdges,function(c){c.setLayout({sy:o},!0),o+=c.getLayout().dy}),each$f(s.inEdges,function(c){c.setLayout({ty:u},!0),u+=c.getLayout().dy})})}function sankeyVisual(n){n.eachSeriesByType("sankey",function(r){var a=r.getGraph(),s=a.nodes,o=a.edges;if(s.length){var u=1/0,c=-1/0;each$f(s,function(p){var d=p.getLayout().value;d<u&&(u=d),d>c&&(c=d)}),each$f(s,function(p){var d=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[u,c],visual:r.get("color")}),_=d.mapValueToVisual(p.getLayout().value),ja=p.getModel().get(["itemStyle","color"]);ja!=null?(p.setVisual("color",ja),p.setVisual("style",{fill:ja})):(p.setVisual("color",_),p.setVisual("style",{fill:_}))})}o.length&&each$f(o,function(p){var d=p.getModel().get("lineStyle");p.setVisual("style",d)})})}function install$Q(n){n.registerChartView(SankeyView),n.registerSeriesModel(SankeySeriesModel),n.registerLayout(sankeyLayout),n.registerVisual(sankeyVisual),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(r,a){a.eachComponent({mainType:"series",subType:"sankey",query:r},function(s){s.setNodePosition(r.dataIndex,[r.localX,r.localY])})})}var WhiskerBoxCommonMixin=function(){function n(){}return n.prototype.getInitialData=function(r,a){var s,o=a.getComponent("xAxis",this.get("xAxisIndex")),u=a.getComponent("yAxis",this.get("yAxisIndex")),c=o.get("type"),p=u.get("type"),d;c==="category"?(r.layout="horizontal",s=o.getOrdinalMeta(),d=!0):p==="category"?(r.layout="vertical",s=u.getOrdinalMeta(),d=!0):r.layout=r.layout||"horizontal";var _=["x","y"],ja=r.layout==="horizontal"?0:1,Ja=this._baseAxisDim=_[ja],ec=_[1-ja],tc=[o,u],rc=tc[ja].get("type"),nc=tc[1-ja].get("type"),ic=r.data;if(ic&&d){var uc=[];each$f(ic,function(ah,ih){var oh;isArray$1(ah)?(oh=ah.slice(),ah.unshift(ih)):isArray$1(ah.value)?(oh=extend$2({},ah),oh.value=oh.value.slice(),ah.value.unshift(ih)):oh=ah,uc.push(oh)}),r.data=uc}var eh=this.defaultValueDimensions,rh=[{name:Ja,type:getDimensionTypeByAxis(rc),ordinalMeta:s,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:ec,type:getDimensionTypeByAxis(nc),dimsDef:eh.slice()}];return createSeriesDataSimply(this,{coordDimensions:rh,dimensionsCount:eh.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,rh,this)})},n.prototype.getBaseAxis=function(){var r=this._baseAxisDim;return this.ecModel.getComponent(r+"Axis",this.get(r+"AxisIndex")).axis},n}(),BoxplotSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return r.type="series.boxplot",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},r}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u=a.getData(),c=this.group,p=this._data;this._data||c.removeAll();var d=a.get("layout")==="horizontal"?1:0;u.diff(p).add(function(_){if(u.hasValue(_)){var ja=u.getItemLayout(_),Ja=createNormalBox$1(ja,u,_,d,!0);u.setItemGraphicEl(_,Ja),c.add(Ja)}}).update(function(_,ja){var Ja=p.getItemGraphicEl(ja);if(!u.hasValue(_)){c.remove(Ja);return}var ec=u.getItemLayout(_);Ja?(saveOldStyle(Ja),updateNormalBoxData(ec,Ja,u,_)):Ja=createNormalBox$1(ec,u,_,d),c.add(Ja),u.setItemGraphicEl(_,Ja)}).remove(function(_){var ja=p.getItemGraphicEl(_);ja&&c.remove(ja)}).execute(),this._data=u},r.prototype.remove=function(a){var s=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(u){u&&s.remove(u)})},r.type="boxplot",r}(ChartView),BoxPathShape=function(){function n(){}return n}(),BoxPath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="boxplotBoxPath",s}return r.prototype.getDefaultShape=function(){return new BoxPathShape},r.prototype.buildPath=function(a,s){var o=s.points,u=0;for(a.moveTo(o[u][0],o[u][1]),u++;u<4;u++)a.lineTo(o[u][0],o[u][1]);for(a.closePath();u<o.length;u++)a.moveTo(o[u][0],o[u][1]),u++,a.lineTo(o[u][0],o[u][1])},r}(Path);function createNormalBox$1(n,r,a,s,o){var u=n.ends,c=new BoxPath({shape:{points:o?transInit$1(u,s,n):u}});return updateNormalBoxData(n,c,r,a,o),c}function updateNormalBoxData(n,r,a,s,o){var u=a.hostModel,c=graphic[o?"initProps":"updateProps"];c(r,{shape:{points:n.ends}},u,s),r.useStyle(a.getItemVisual(s,"style")),r.style.strokeNoScale=!0,r.z2=100;var p=a.getItemModel(s),d=p.getModel("emphasis");setStatesStylesFromModel(r,p),toggleHoverEmphasis(r,d.get("focus"),d.get("blurScope"),d.get("disabled"))}function transInit$1(n,r,a){return map$1(n,function(s){return s=s.slice(),s[r]=a.initBaseline,s})}var each$9=each$f;function boxplotLayout(n){var r=groupSeriesByAxis(n);each$9(r,function(a){var s=a.seriesModels;s.length&&(calculateBase(a),each$9(s,function(o,u){layoutSingleSeries(o,a.boxOffsetList[u],a.boxWidthList[u])}))})}function groupSeriesByAxis(n){var r=[],a=[];return n.eachSeriesByType("boxplot",function(s){var o=s.getBaseAxis(),u=indexOf(a,o);u<0&&(u=a.length,a[u]=o,r[u]={axis:o,seriesModels:[]}),r[u].seriesModels.push(s)}),r}function calculateBase(n){var r=n.axis,a=n.seriesModels,s=a.length,o=n.boxWidthList=[],u=n.boxOffsetList=[],c=[],p;if(r.type==="category")p=r.getBandWidth();else{var d=0;each$9(a,function(rc){d=Math.max(d,rc.getData().count())});var _=r.getExtent();p=Math.abs(_[1]-_[0])/d}each$9(a,function(rc){var nc=rc.get("boxWidth");isArray$1(nc)||(nc=[nc,nc]),c.push([parsePercent(nc[0],p)||0,parsePercent(nc[1],p)||0])});var ja=p*.8-2,Ja=ja/s*.3,ec=(ja-Ja*(s-1))/s,tc=ec/2-ja/2;each$9(a,function(rc,nc){u.push(tc),tc+=Ja+ec,o.push(Math.min(Math.max(ec,c[nc][0]),c[nc][1]))})}function layoutSingleSeries(n,r,a){var s=n.coordinateSystem,o=n.getData(),u=a/2,c=n.get("layout")==="horizontal"?0:1,p=1-c,d=["x","y"],_=o.mapDimension(d[c]),ja=o.mapDimensionsAll(d[p]);if(_==null||ja.length<5)return;for(var Ja=0;Ja<o.count();Ja++){var ec=o.get(_,Ja),tc=rh(ec,ja[2],Ja),rc=rh(ec,ja[0],Ja),nc=rh(ec,ja[1],Ja),ic=rh(ec,ja[3],Ja),uc=rh(ec,ja[4],Ja),eh=[];ah(eh,nc,!1),ah(eh,ic,!0),eh.push(rc,nc,uc,ic),ih(eh,rc),ih(eh,uc),ih(eh,tc),o.setItemLayout(Ja,{initBaseline:tc[p],ends:eh})}function rh(oh,uh,ch){var hh=o.get(uh,ch),dh=[];dh[c]=oh,dh[p]=hh;var gh;return isNaN(oh)||isNaN(hh)?gh=[NaN,NaN]:(gh=s.dataToPoint(dh),gh[c]+=r),gh}function ah(oh,uh,ch){var hh=uh.slice(),dh=uh.slice();hh[c]+=u,dh[c]-=u,ch?oh.push(hh,dh):oh.push(dh,hh)}function ih(oh,uh){var ch=uh.slice(),hh=uh.slice();ch[c]-=u,hh[c]+=u,oh.push(ch,hh)}}function prepareBoxplotData(n,r){r=r||{};for(var a=[],s=[],o=r.boundIQR,u=o==="none"||o===0,c=0;c<n.length;c++){var p=asc$2(n[c].slice()),d=quantile(p,.25),_=quantile(p,.5),ja=quantile(p,.75),Ja=p[0],ec=p[p.length-1],tc=(o??1.5)*(ja-d),rc=u?Ja:Math.max(Ja,d-tc),nc=u?ec:Math.min(ec,ja+tc),ic=r.itemNameFormatter,uc=isFunction(ic)?ic({value:c}):isString(ic)?ic.replace("{value}",c+""):c+"";a.push([uc,rc,d,_,ja,nc]);for(var eh=0;eh<p.length;eh++){var rh=p[eh];if(rh<rc||rh>nc){var ah=[uc,rh];s.push(ah)}}}return{boxData:a,outliers:s}}var boxplotTransform={type:"echarts:boxplot",transform:function(r){var a=r.upstream;if(a.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var s="";throwError(s)}var o=prepareBoxplotData(a.getRawData(),r.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:o.boxData},{data:o.outliers}]}};function install$P(n){n.registerSeriesModel(BoxplotSeriesModel),n.registerChartView(BoxplotView),n.registerLayout(boxplotLayout),n.registerTransform(boxplotTransform)}var SKIP_PROPS=["color","borderColor"],CandlestickView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},r.prototype.incrementalPrepareRender=function(a,s,o){this._clear(),this._updateDrawMode(a)},r.prototype.incrementalRender=function(a,s,o,u){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,s):this._incrementalRenderNormal(a,s)},r.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},r.prototype._updateDrawMode=function(a){var s=a.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},r.prototype._renderNormal=function(a){var s=a.getData(),o=this._data,u=this.group,c=s.getLayout("isSimpleBox"),p=a.get("clip",!0),d=a.coordinateSystem,_=d.getArea&&d.getArea();this._data||u.removeAll(),s.diff(o).add(function(ja){if(s.hasValue(ja)){var Ja=s.getItemLayout(ja);if(p&&isNormalBoxClipped(_,Ja))return;var ec=createNormalBox(Ja,ja,!0);initProps(ec,{shape:{points:Ja.ends}},a,ja),setBoxCommon(ec,s,ja,c),u.add(ec),s.setItemGraphicEl(ja,ec)}}).update(function(ja,Ja){var ec=o.getItemGraphicEl(Ja);if(!s.hasValue(ja)){u.remove(ec);return}var tc=s.getItemLayout(ja);if(p&&isNormalBoxClipped(_,tc)){u.remove(ec);return}ec?(updateProps$1(ec,{shape:{points:tc.ends}},a,ja),saveOldStyle(ec)):ec=createNormalBox(tc),setBoxCommon(ec,s,ja,c),u.add(ec),s.setItemGraphicEl(ja,ec)}).remove(function(ja){var Ja=o.getItemGraphicEl(ja);Ja&&u.remove(Ja)}).execute(),this._data=s},r.prototype._renderLarge=function(a){this._clear(),createLarge(a,this.group);var s=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;s?this.group.setClipPath(s):this.group.removeClipPath()},r.prototype._incrementalRenderNormal=function(a,s){for(var o=s.getData(),u=o.getLayout("isSimpleBox"),c;(c=a.next())!=null;){var p=o.getItemLayout(c),d=createNormalBox(p);setBoxCommon(d,o,c,u),d.incremental=!0,this.group.add(d),this._progressiveEls.push(d)}},r.prototype._incrementalRenderLarge=function(a,s){createLarge(s,this.group,this._progressiveEls,!0)},r.prototype.remove=function(a){this._clear()},r.prototype._clear=function(){this.group.removeAll(),this._data=null},r.type="candlestick",r}(ChartView),NormalBoxPathShape=function(){function n(){}return n}(),NormalBoxPath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="normalCandlestickBox",s}return r.prototype.getDefaultShape=function(){return new NormalBoxPathShape},r.prototype.buildPath=function(a,s){var o=s.points;this.__simpleBox?(a.moveTo(o[4][0],o[4][1]),a.lineTo(o[6][0],o[6][1])):(a.moveTo(o[0][0],o[0][1]),a.lineTo(o[1][0],o[1][1]),a.lineTo(o[2][0],o[2][1]),a.lineTo(o[3][0],o[3][1]),a.closePath(),a.moveTo(o[4][0],o[4][1]),a.lineTo(o[5][0],o[5][1]),a.moveTo(o[6][0],o[6][1]),a.lineTo(o[7][0],o[7][1]))},r}(Path);function createNormalBox(n,r,a){var s=n.ends;return new NormalBoxPath({shape:{points:a?transInit(s,n):s},z2:100})}function isNormalBoxClipped(n,r){for(var a=!0,s=0;s<r.ends.length;s++)if(n.contain(r.ends[s][0],r.ends[s][1])){a=!1;break}return a}function setBoxCommon(n,r,a,s){var o=r.getItemModel(a);n.useStyle(r.getItemVisual(a,"style")),n.style.strokeNoScale=!0,n.__simpleBox=s,setStatesStylesFromModel(n,o)}function transInit(n,r){return map$1(n,function(a){return a=a.slice(),a[1]=r.initBaseline,a})}var LargeBoxPathShape=function(){function n(){}return n}(),LargeBoxPath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s.type="largeCandlestickBox",s}return r.prototype.getDefaultShape=function(){return new LargeBoxPathShape},r.prototype.buildPath=function(a,s){for(var o=s.points,u=0;u<o.length;)if(this.__sign===o[u++]){var c=o[u++];a.moveTo(c,o[u++]),a.lineTo(c,o[u++])}else u+=3},r}(Path);function createLarge(n,r,a,s){var o=n.getData(),u=o.getLayout("largePoints"),c=new LargeBoxPath({shape:{points:u},__sign:1,ignoreCoarsePointer:!0});r.add(c);var p=new LargeBoxPath({shape:{points:u},__sign:-1,ignoreCoarsePointer:!0});r.add(p);var d=new LargeBoxPath({shape:{points:u},__sign:0,ignoreCoarsePointer:!0});r.add(d),setLargeStyle(1,c,n),setLargeStyle(-1,p,n),setLargeStyle(0,d,n),s&&(c.incremental=!0,p.incremental=!0),a&&a.push(c,p)}function setLargeStyle(n,r,a,s){var o=a.get(["itemStyle",n>0?"borderColor":"borderColor0"])||a.get(["itemStyle",n>0?"color":"color0"]);n===0&&(o=a.get(["itemStyle","borderColorDoji"]));var u=a.getModel("itemStyle").getItemStyle(SKIP_PROPS);r.useStyle(u),r.style.fill=null,r.style.stroke=o}var CandlestickSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return r.prototype.getShadowDim=function(){return"open"},r.prototype.brushSelector=function(a,s,o){var u=s.getItemLayout(a);return u&&o.rect(u.brushRect)},r.type="series.candlestick",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},r}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(n){!n||!isArray$1(n.series)||each$f(n.series,function(r){isObject$3(r)&&r.type==="k"&&(r.type="candlestick")})}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"],candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(n,r){function a(u,c){return c.get(u>0?positiveColorQuery:negativeColorQuery)}function s(u,c){return c.get(u===0?dojiBorderColorQuery:u>0?positiveBorderColorQuery:negativeBorderColorQuery)}if(!r.isSeriesFiltered(n)){var o=n.pipelineContext.large;return!o&&{progress:function(u,c){for(var p;(p=u.next())!=null;){var d=c.getItemModel(p),_=c.getItemLayout(p).sign,ja=d.getItemStyle();ja.fill=a(_,d),ja.stroke=s(_,d)||ja.fill;var Ja=c.ensureUniqueItemVisual(p,"style");extend$2(Ja,ja)}}}}}},candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(n){var r=n.coordinateSystem,a=n.getData(),s=calculateCandleWidth(n,a),o=0,u=1,c=["x","y"],p=a.getDimensionIndex(a.mapDimension(c[o])),d=map$1(a.mapDimensionsAll(c[u]),a.getDimensionIndex,a),_=d[0],ja=d[1],Ja=d[2],ec=d[3];if(a.setLayout({candleWidth:s,isSimpleBox:s<=1.3}),p<0||d.length<4)return;return{progress:n.pipelineContext.large?rc:tc};function tc(nc,ic){for(var uc,eh=ic.getStore();(uc=nc.next())!=null;){var rh=eh.get(p,uc),ah=eh.get(_,uc),ih=eh.get(ja,uc),oh=eh.get(Ja,uc),uh=eh.get(ec,uc),ch=Math.min(ah,ih),hh=Math.max(ah,ih),dh=_h(ch,rh),gh=_h(hh,rh),fh=_h(oh,rh),vh=_h(uh,rh),ph=[];bh(ph,gh,0),bh(ph,dh,1),ph.push(Th(vh),Th(gh),Th(fh),Th(dh));var yh=ic.getItemModel(uc),xh=!!yh.get(["itemStyle","borderColorDoji"]);ic.setItemLayout(uc,{sign:getSign(eh,uc,ah,ih,ja,xh),initBaseline:ah>ih?gh[u]:dh[u],ends:ph,brushRect:Dh(oh,uh,rh)})}function _h(Ch,wh){var Nh=[];return Nh[o]=wh,Nh[u]=Ch,isNaN(wh)||isNaN(Ch)?[NaN,NaN]:r.dataToPoint(Nh)}function bh(Ch,wh,Nh){var Rh=wh.slice(),kh=wh.slice();Rh[o]=subPixelOptimize(Rh[o]+s/2,1,!1),kh[o]=subPixelOptimize(kh[o]-s/2,1,!0),Nh?Ch.push(Rh,kh):Ch.push(kh,Rh)}function Dh(Ch,wh,Nh){var Rh=_h(Ch,Nh),kh=_h(wh,Nh);return Rh[o]-=s/2,kh[o]-=s/2,{x:Rh[0],y:Rh[1],width:s,height:kh[1]-Rh[1]}}function Th(Ch){return Ch[o]=subPixelOptimize(Ch[o],1),Ch}}function rc(nc,ic){for(var uc=createFloat32Array(nc.count*4),eh=0,rh,ah=[],ih=[],oh,uh=ic.getStore(),ch=!!n.get(["itemStyle","borderColorDoji"]);(oh=nc.next())!=null;){var hh=uh.get(p,oh),dh=uh.get(_,oh),gh=uh.get(ja,oh),fh=uh.get(Ja,oh),vh=uh.get(ec,oh);if(isNaN(hh)||isNaN(fh)||isNaN(vh)){uc[eh++]=NaN,eh+=3;continue}uc[eh++]=getSign(uh,oh,dh,gh,ja,ch),ah[o]=hh,ah[u]=fh,rh=r.dataToPoint(ah,null,ih),uc[eh++]=rh?rh[0]:NaN,uc[eh++]=rh?rh[1]:NaN,ah[u]=vh,rh=r.dataToPoint(ah,null,ih),uc[eh++]=rh?rh[1]:NaN}ic.setLayout("largePoints",uc)}}};function getSign(n,r,a,s,o,u){var c;return a>s?c=-1:a<s?c=1:c=u?0:r>0?n.get(o,r-1)<=s?1:-1:1,c}function calculateCandleWidth(n,r){var a=n.getBaseAxis(),s,o=a.type==="category"?a.getBandWidth():(s=a.getExtent(),Math.abs(s[1]-s[0])/r.count()),u=parsePercent(retrieve2(n.get("barMaxWidth"),o),o),c=parsePercent(retrieve2(n.get("barMinWidth"),1),o),p=n.get("barWidth");return p!=null?parsePercent(p,o):Math.max(Math.min(o/2,u),c)}function install$O(n){n.registerChartView(CandlestickView),n.registerSeriesModel(CandlestickSeriesModel),n.registerPreprocessor(candlestickPreprocessor),n.registerVisual(candlestickVisual),n.registerLayout(candlestickLayout)}function updateRipplePath(n,r){var a=r.rippleEffectColor||r.color;n.eachChild(function(s){s.attr({z:r.z,zlevel:r.zlevel,style:{stroke:r.brushType==="stroke"?a:null,fill:r.brushType==="fill"?a:null}})})}var EffectSymbol=function(n){__extends(r,n);function r(a,s){var o=n.call(this)||this,u=new Symbol$1(a,s),c=new Group$3;return o.add(u),o.add(c),o.updateData(a,s),o}return r.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},r.prototype.startEffectAnimation=function(a){for(var s=a.symbolType,o=a.color,u=a.rippleNumber,c=this.childAt(1),p=0;p<u;p++){var d=createSymbol$1(s,-1,-1,2,2,o);d.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var _=-p/u*a.period+a.effectOffset;d.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(_).start(),d.animateStyle(!0).when(a.period,{opacity:0}).delay(_).start(),c.add(d)}updateRipplePath(c,a)},r.prototype.updateEffectAnimation=function(a){for(var s=this._effectCfg,o=this.childAt(1),u=["symbolType","period","rippleScale","rippleNumber"],c=0;c<u.length;c++){var p=u[c];if(s[p]!==a[p]){this.stopEffectAnimation(),this.startEffectAnimation(a);return}}updateRipplePath(o,a)},r.prototype.highlight=function(){enterEmphasis(this)},r.prototype.downplay=function(){leaveEmphasis(this)},r.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},r.prototype.updateData=function(a,s){var o=this,u=a.hostModel;this.childAt(0).updateData(a,s);var c=this.childAt(1),p=a.getItemModel(s),d=a.getItemVisual(s,"symbol"),_=normalizeSymbolSize(a.getItemVisual(s,"symbolSize")),ja=a.getItemVisual(s,"style"),Ja=ja&&ja.fill,ec=p.getModel("emphasis");c.setScale(_),c.traverse(function(ic){ic.setStyle("fill",Ja)});var tc=normalizeSymbolOffset(a.getItemVisual(s,"symbolOffset"),_);tc&&(c.x=tc[0],c.y=tc[1]);var rc=a.getItemVisual(s,"symbolRotate");c.rotation=(rc||0)*Math.PI/180||0;var nc={};nc.showEffectOn=u.get("showEffectOn"),nc.rippleScale=p.get(["rippleEffect","scale"]),nc.brushType=p.get(["rippleEffect","brushType"]),nc.period=p.get(["rippleEffect","period"])*1e3,nc.effectOffset=s/a.count(),nc.z=u.getShallow("z")||0,nc.zlevel=u.getShallow("zlevel")||0,nc.symbolType=d,nc.color=Ja,nc.rippleEffectColor=p.get(["rippleEffect","color"]),nc.rippleNumber=p.get(["rippleEffect","number"]),nc.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(nc):this.startEffectAnimation(nc),this._effectCfg=nc):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(ic){ic==="emphasis"?nc.showEffectOn!=="render"&&o.startEffectAnimation(nc):ic==="normal"&&nc.showEffectOn!=="render"&&o.stopEffectAnimation()}),this._effectCfg=nc,toggleHoverEmphasis(this,ec.get("focus"),ec.get("blurScope"),ec.get("disabled"))},r.prototype.fadeOut=function(a){a&&a()},r}(Group$3),EffectScatterView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},r.prototype.render=function(a,s,o){var u=a.getData(),c=this._symbolDraw;c.updateData(u,{clipShape:this._getClipShape(a)}),this.group.add(c.group)},r.prototype._getClipShape=function(a){var s=a.coordinateSystem,o=s&&s.getArea&&s.getArea();return a.get("clip",!0)?o:null},r.prototype.updateTransform=function(a,s,o){var u=a.getData();this.group.dirty();var c=pointsLayout("").reset(a,s,o);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout()},r.prototype._updateGroupTransform=function(a){var s=a.coordinateSystem;s&&s.getRoamTransform&&(this.group.transform=clone$2(s.getRoamTransform()),this.group.decomposeTransform())},r.prototype.remove=function(a,s){this._symbolDraw&&this._symbolDraw.remove(!0)},r.type="effectScatter",r}(ChartView),EffectScatterSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.hasSymbolVisual=!0,a}return r.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},r.prototype.brushSelector=function(a,s,o){return o.point(s.getItemLayout(a))},r.type="series.effectScatter",r.dependencies=["grid","polar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},r}(SeriesModel);function install$N(n){n.registerChartView(EffectScatterView),n.registerSeriesModel(EffectScatterSeriesModel),n.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this)||this;return u.add(u.createLine(a,s,o)),u._updateEffectSymbol(a,s),u}return r.prototype.createLine=function(a,s,o){return new Line$1(a,s,o)},r.prototype._updateEffectSymbol=function(a,s){var o=a.getItemModel(s),u=o.getModel("effect"),c=u.get("symbolSize"),p=u.get("symbol");isArray$1(c)||(c=[c,c]);var d=a.getItemVisual(s,"style"),_=u.get("color")||d&&d.stroke,ja=this.childAt(1);this._symbolType!==p&&(this.remove(ja),ja=createSymbol$1(p,-.5,-.5,1,1,_),ja.z2=100,ja.culling=!0,this.add(ja)),ja&&(ja.setStyle("shadowColor",_),ja.setStyle(u.getItemStyle(["color"])),ja.scaleX=c[0],ja.scaleY=c[1],ja.setColor(_),this._symbolType=p,this._symbolScale=c,this._updateEffectAnimation(a,u,s))},r.prototype._updateEffectAnimation=function(a,s,o){var u=this.childAt(1);if(u){var c=a.getItemLayout(o),p=s.get("period")*1e3,d=s.get("loop"),_=s.get("roundTrip"),ja=s.get("constantSpeed"),Ja=retrieve$1(s.get("delay"),function(tc){return tc/a.count()*p/3});if(u.ignore=!0,this._updateAnimationPoints(u,c),ja>0&&(p=this._getLineLength(u)/ja*1e3),p!==this._period||d!==this._loop||_!==this._roundTrip){u.stopAnimation();var ec=void 0;isFunction(Ja)?ec=Ja(o):ec=Ja,u.__t>0&&(ec=-p*u.__t),this._animateSymbol(u,p,ec,d,_)}this._period=p,this._loop=d,this._roundTrip=_}},r.prototype._animateSymbol=function(a,s,o,u,c){if(s>0){a.__t=0;var p=this,d=a.animate("",u).when(c?s*2:s,{__t:c?2:1}).delay(o).during(function(){p._updateSymbolPosition(a)});u||d.done(function(){p.remove(a)}),d.start()}},r.prototype._getLineLength=function(a){return dist$3(a.__p1,a.__cp1)+dist$3(a.__cp1,a.__p2)},r.prototype._updateAnimationPoints=function(a,s){a.__p1=s[0],a.__p2=s[1],a.__cp1=s[2]||[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]},r.prototype.updateData=function(a,s,o){this.childAt(0).updateData(a,s,o),this._updateEffectSymbol(a,s)},r.prototype._updateSymbolPosition=function(a){var s=a.__p1,o=a.__p2,u=a.__cp1,c=a.__t<1?a.__t:2-a.__t,p=[a.x,a.y],d=p.slice(),_=quadraticAt$1,ja=quadraticDerivativeAt;p[0]=_(s[0],u[0],o[0],c),p[1]=_(s[1],u[1],o[1],c);var Ja=a.__t<1?ja(s[0],u[0],o[0],c):ja(o[0],u[0],s[0],1-c),ec=a.__t<1?ja(s[1],u[1],o[1],c):ja(o[1],u[1],s[1],1-c);a.rotation=-Math.atan2(ec,Ja)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(a.__lastT!==void 0&&a.__lastT<a.__t?(a.scaleY=dist$3(d,p)*1.05,c===1&&(p[0]=d[0]+(p[0]-d[0])/2,p[1]=d[1]+(p[1]-d[1])/2)):a.__lastT===1?a.scaleY=2*dist$3(s,p):a.scaleY=this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=p[0],a.y=p[1]},r.prototype.updateLayout=function(a,s){this.childAt(0).updateLayout(a,s);var o=a.getItemModel(s).getModel("effect");this._updateEffectAnimation(a,o,s)},r}(Group$3),Polyline=function(n){__extends(r,n);function r(a,s,o){var u=n.call(this)||this;return u._createPolyline(a,s,o),u}return r.prototype._createPolyline=function(a,s,o){var u=a.getItemLayout(s),c=new Polyline$1({shape:{points:u}});this.add(c),this._updateCommonStl(a,s,o)},r.prototype.updateData=function(a,s,o){var u=a.hostModel,c=this.childAt(0),p={shape:{points:a.getItemLayout(s)}};updateProps$1(c,p,u,s),this._updateCommonStl(a,s,o)},r.prototype._updateCommonStl=function(a,s,o){var u=this.childAt(0),c=a.getItemModel(s),p=o&&o.emphasisLineStyle,d=o&&o.focus,_=o&&o.blurScope,ja=o&&o.emphasisDisabled;if(!o||a.hasItemOption){var Ja=c.getModel("emphasis");p=Ja.getModel("lineStyle").getLineStyle(),ja=Ja.get("disabled"),d=Ja.get("focus"),_=Ja.get("blurScope")}u.useStyle(a.getItemVisual(s,"style")),u.style.fill=null,u.style.strokeNoScale=!0;var ec=u.ensureState("emphasis");ec.style=p,toggleHoverEmphasis(this,d,_,ja)},r.prototype.updateLayout=function(a,s){var o=this.childAt(0);o.setShape("points",a.getItemLayout(s))},r}(Group$3),EffectPolyline=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return r.prototype.createLine=function(a,s,o){return new Polyline(a,s,o)},r.prototype._updateAnimationPoints=function(a,s){this._points=s;for(var o=[0],u=0,c=1;c<s.length;c++){var p=s[c-1],d=s[c];u+=dist$3(p,d),o.push(u)}if(u===0){this._length=0;return}for(var c=0;c<o.length;c++)o[c]/=u;this._offsets=o,this._length=u},r.prototype._getLineLength=function(){return this._length},r.prototype._updateSymbolPosition=function(a){var s=a.__t<1?a.__t:2-a.__t,o=this._points,u=this._offsets,c=o.length;if(u){var p=this._lastFrame,d;if(s<this._lastFramePercent){var _=Math.min(p+1,c-1);for(d=_;d>=0&&!(u[d]<=s);d--);d=Math.min(d,c-2)}else{for(d=p;d<c&&!(u[d]>s);d++);d=Math.min(d-1,c-2)}var ja=(s-u[d])/(u[d+1]-u[d]),Ja=o[d],ec=o[d+1];a.x=Ja[0]*(1-ja)+ja*ec[0],a.y=Ja[1]*(1-ja)+ja*ec[1];var tc=a.__t<1?ec[0]-Ja[0]:Ja[0]-ec[0],rc=a.__t<1?ec[1]-Ja[1]:Ja[1]-ec[1];a.rotation=-Math.atan2(rc,tc)-Math.PI/2,this._lastFrame=d,this._lastFramePercent=s,a.ignore=!1}},r}(EffectLine),LargeLinesPathShape=function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n}(),LargeLinesPath=function(n){__extends(r,n);function r(a){var s=n.call(this,a)||this;return s._off=0,s.hoverDataIdx=-1,s}return r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new LargeLinesPathShape},r.prototype.buildPath=function(a,s){var o=s.segs,u=s.curveness,c;if(s.polyline)for(c=this._off;c<o.length;){var p=o[c++];if(p>0){a.moveTo(o[c++],o[c++]);for(var d=1;d<p;d++)a.lineTo(o[c++],o[c++])}}else for(c=this._off;c<o.length;){var _=o[c++],ja=o[c++],Ja=o[c++],ec=o[c++];if(a.moveTo(_,ja),u>0){var tc=(_+Ja)/2-(ja-ec)*u,rc=(ja+ec)/2-(Ja-_)*u;a.quadraticCurveTo(tc,rc,Ja,ec)}else a.lineTo(Ja,ec)}this.incremental&&(this._off=c,this.notClear=!0)},r.prototype.findDataIndex=function(a,s){var o=this.shape,u=o.segs,c=o.curveness,p=this.style.lineWidth;if(o.polyline)for(var d=0,_=0;_<u.length;){var ja=u[_++];if(ja>0)for(var Ja=u[_++],ec=u[_++],tc=1;tc<ja;tc++){var rc=u[_++],nc=u[_++];if(containStroke$4(Ja,ec,rc,nc,p,a,s))return d}d++}else for(var d=0,_=0;_<u.length;){var Ja=u[_++],ec=u[_++],rc=u[_++],nc=u[_++];if(c>0){var ic=(Ja+rc)/2-(ec-nc)*c,uc=(ec+nc)/2-(rc-Ja)*c;if(containStroke$2(Ja,ec,ic,uc,rc,nc,p,a,s))return d}else if(containStroke$4(Ja,ec,rc,nc,p,a,s))return d;d++}return-1},r.prototype.contain=function(a,s){var o=this.transformCoordToLocal(a,s),u=this.getBoundingRect();if(a=o[0],s=o[1],u.contain(a,s)){var c=this.hoverDataIdx=this.findDataIndex(a,s);return c>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var s=this.shape,o=s.segs,u=1/0,c=1/0,p=-1/0,d=-1/0,_=0;_<o.length;){var ja=o[_++],Ja=o[_++];u=Math.min(ja,u),p=Math.max(ja,p),c=Math.min(Ja,c),d=Math.max(Ja,d)}a=this._rect=new BoundingRect(u,c,p,d)}return a},r}(Path),LargeLineDraw=function(){function n(){this.group=new Group$3}return n.prototype.updateData=function(r){this._clear();var a=this._create();a.setShape({segs:r.getLayout("linesPoints")}),this._setCommon(a,r)},n.prototype.incrementalPrepareUpdate=function(r){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(r,a){var s=this._newAdded[0],o=a.getLayout("linesPoints"),u=s&&s.shape.segs;if(u&&u.length<2e4){var c=u.length,p=new Float32Array(c+o.length);p.set(u),p.set(o,c),s.setShape({segs:p})}else{this._newAdded=[];var d=this._create();d.incremental=!0,d.setShape({segs:o}),this._setCommon(d,a),d.__startIndex=r.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},n.prototype._create=function(){var r=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(r),this.group.add(r),r},n.prototype._setCommon=function(r,a,s){var o=a.hostModel;r.setShape({polyline:o.get("polyline"),curveness:o.get(["lineStyle","curveness"])}),r.useStyle(o.getModel("lineStyle").getLineStyle()),r.style.strokeNoScale=!0;var u=a.getVisual("style");u&&u.stroke&&r.setStyle("stroke",u.stroke),r.setStyle("fill",null);var c=getECData(r);c.seriesIndex=o.seriesIndex,r.on("mousemove",function(p){c.dataIndex=null;var d=r.hoverDataIdx;d>0&&(c.dataIndex=d+r.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(n){var r=n.coordinateSystem;if(r){var a=n.get("polyline"),s=n.pipelineContext.large;return{progress:function(o,u){var c=[];if(s){var p=void 0,d=o.end-o.start;if(a){for(var _=0,ja=o.start;ja<o.end;ja++)_+=n.getLineCoordsCount(ja);p=new Float32Array(d+_*2)}else p=new Float32Array(d*4);for(var Ja=0,ec=[],ja=o.start;ja<o.end;ja++){var tc=n.getLineCoords(ja,c);a&&(p[Ja++]=tc);for(var rc=0;rc<tc;rc++)ec=r.dataToPoint(c[rc],!1,ec),p[Ja++]=ec[0],p[Ja++]=ec[1]}u.setLayout("linesPoints",p)}else for(var ja=o.start;ja<o.end;ja++){var nc=u.getItemModel(ja),tc=n.getLineCoords(ja,c),ic=[];if(a)for(var uc=0;uc<tc;uc++)ic.push(r.dataToPoint(c[uc]));else{ic[0]=r.dataToPoint(c[0]),ic[1]=r.dataToPoint(c[1]);var eh=nc.get(["lineStyle","curveness"]);+eh&&(ic[2]=[(ic[0][0]+ic[1][0])/2-(ic[0][1]-ic[1][1])*eh,(ic[0][1]+ic[1][1])/2-(ic[1][0]-ic[0][0])*eh])}u.setItemLayout(ja,ic)}}}}}},LinesView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u=a.getData(),c=this._updateLineDraw(u,a),p=a.get("zlevel"),d=a.get(["effect","trailLength"]),_=o.getZr(),ja=_.painter.getType()==="svg";ja||_.painter.getLayer(p).clear(!0),this._lastZlevel!=null&&!ja&&_.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&d>0&&(ja||_.configLayer(p,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(d/10+.9,1),0)})),c.updateData(u);var Ja=a.get("clip",!0)&&createClipPath(a.coordinateSystem,!1,a);Ja?this.group.setClipPath(Ja):this.group.removeClipPath(),this._lastZlevel=p,this._finished=!0},r.prototype.incrementalPrepareRender=function(a,s,o){var u=a.getData(),c=this._updateLineDraw(u,a);c.incrementalPrepareUpdate(u),this._clearLayer(o),this._finished=!1},r.prototype.incrementalRender=function(a,s,o){this._lineDraw.incrementalUpdate(a,s.getData()),this._finished=a.end===s.getData().count()},r.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},r.prototype.updateTransform=function(a,s,o){var u=a.getData(),c=a.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var p=linesLayout.reset(a,s,o);p.progress&&p.progress({start:0,end:u.count(),count:u.count()},u),this._lineDraw.updateLayout(),this._clearLayer(o)},r.prototype._updateLineDraw=function(a,s){var o=this._lineDraw,u=this._showEffect(s),c=!!s.get("polyline"),p=s.pipelineContext,d=p.large;return(!o||u!==this._hasEffet||c!==this._isPolyline||d!==this._isLargeDraw)&&(o&&o.remove(),o=this._lineDraw=d?new LargeLineDraw:new LineDraw(c?u?EffectPolyline:Polyline:u?EffectLine:Line$1),this._hasEffet=u,this._isPolyline=c,this._isLargeDraw=d),this.group.add(o.group),o},r.prototype._showEffect=function(a){return!!a.get(["effect","show"])},r.prototype._clearLayer=function(a){var s=a.getZr(),o=s.painter.getType()==="svg";!o&&this._lastZlevel!=null&&s.painter.getLayer(this._lastZlevel).clear(!0)},r.prototype.remove=function(a,s){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(s)},r.prototype.dispose=function(a,s){this.remove(a,s)},r.type="lines",r}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(n){var r=n.data;r&&r[0]&&r[0][0]&&r[0][0].coord&&(n.data=map$1(r,function(a){var s=[a[0].coord,a[1].coord],o={coords:s};return a[0].name&&(o.fromName=a[0].name),a[1].name&&(o.toName=a[1].name),mergeAll([o,a[0],a[1]])}))}var LinesSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return r.prototype.init=function(a){a.data=a.data||[],compatEc2(a);var s=this._processFlatCoordsArray(a.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(a.data=new Float32Array(s.count)),n.prototype.init.apply(this,arguments)},r.prototype.mergeOption=function(a){if(compatEc2(a),a.data){var s=this._processFlatCoordsArray(a.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(a.data=new Float32Array(s.count))}n.prototype.mergeOption.apply(this,arguments)},r.prototype.appendData=function(a){var s=this._processFlatCoordsArray(a.data);s.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,s.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,s.flatCoordsOffset)):(this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset),a.data=new Float32Array(s.count)),this.getRawData().appendData(a.data)},r.prototype._getCoordsFromItemModel=function(a){var s=this.getData().getItemModel(a),o=s.option instanceof Array?s.option:s.getShallow("coords");return o},r.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[a*2+1]:this._getCoordsFromItemModel(a).length},r.prototype.getLineCoords=function(a,s){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[a*2],u=this._flatCoordsOffset[a*2+1],c=0;c<u;c++)s[c]=s[c]||[],s[c][0]=this._flatCoords[o+c*2],s[c][1]=this._flatCoords[o+c*2+1];return u}else{for(var p=this._getCoordsFromItemModel(a),c=0;c<p.length;c++)s[c]=s[c]||[],s[c][0]=p[c][0],s[c][1]=p[c][1];return p.length}},r.prototype._processFlatCoordsArray=function(a){var s=0;if(this._flatCoords&&(s=this._flatCoords.length),isNumber(a[0])){for(var o=a.length,u=new Uint32Arr(o),c=new Float64Arr(o),p=0,d=0,_=0,ja=0;ja<o;){_++;var Ja=a[ja++];u[d++]=p+s,u[d++]=Ja;for(var ec=0;ec<Ja;ec++){var tc=a[ja++],rc=a[ja++];c[p++]=tc,c[p++]=rc}}return{flatCoordsOffset:new Uint32Array(u.buffer,0,d),flatCoords:c,count:_}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},r.prototype.getInitialData=function(a,s){var o=new SeriesData(["value"],this);return o.hasItemOption=!1,o.initData(a.data,[],function(u,c,p,d){if(u instanceof Array)return NaN;o.hasItemOption=!0;var _=u.value;if(_!=null)return _ instanceof Array?_[d]:_}),o},r.prototype.formatTooltip=function(a,s,o){var u=this.getData(),c=u.getItemModel(a),p=c.get("name");if(p)return p;var d=c.get("fromName"),_=c.get("toName"),ja=[];return d!=null&&ja.push(d),_!=null&&ja.push(_),createTooltipMarkup("nameValue",{name:ja.join(" > ")})},r.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},r.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?1e4:this.get("progressive"))},r.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?2e4:this.get("progressiveThreshold"))},r.prototype.getZLevelKey=function(){var a=this.getModel("effect"),s=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&s>0?s+"":""},r.type="series.lines",r.dependencies=["grid","polar","geo","calendar"],r.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},r}(SeriesModel);function normalize$2(n){return n instanceof Array||(n=[n,n]),n}var linesVisual={seriesType:"lines",reset:function(n){var r=normalize$2(n.get("symbol")),a=normalize$2(n.get("symbolSize")),s=n.getData();s.setVisual("fromSymbol",r&&r[0]),s.setVisual("toSymbol",r&&r[1]),s.setVisual("fromSymbolSize",a&&a[0]),s.setVisual("toSymbolSize",a&&a[1]);function o(u,c){var p=u.getItemModel(c),d=normalize$2(p.getShallow("symbol",!0)),_=normalize$2(p.getShallow("symbolSize",!0));d[0]&&u.setItemVisual(c,"fromSymbol",d[0]),d[1]&&u.setItemVisual(c,"toSymbol",d[1]),_[0]&&u.setItemVisual(c,"fromSymbolSize",_[0]),_[1]&&u.setItemVisual(c,"toSymbolSize",_[1])}return{dataEach:s.hasItemOption?o:null}}};function install$M(n){n.registerChartView(LinesView),n.registerSeriesModel(LinesSeriesModel),n.registerLayout(linesLayout),n.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var r=platformApi.createCanvas();this.canvas=r}return n.prototype.update=function(r,a,s,o,u,c){var p=this._getBrush(),d=this._getGradient(u,"inRange"),_=this._getGradient(u,"outOfRange"),ja=this.pointSize+this.blurSize,Ja=this.canvas,ec=Ja.getContext("2d"),tc=r.length;Ja.width=a,Ja.height=s;for(var rc=0;rc<tc;++rc){var nc=r[rc],ic=nc[0],uc=nc[1],eh=nc[2],rh=o(eh);ec.globalAlpha=rh,ec.drawImage(p,ic-ja,uc-ja)}if(!Ja.width||!Ja.height)return Ja;for(var ah=ec.getImageData(0,0,Ja.width,Ja.height),ih=ah.data,oh=0,uh=ih.length,ch=this.minOpacity,hh=this.maxOpacity,dh=hh-ch;oh<uh;){var rh=ih[oh+3]/256,gh=Math.floor(rh*(GRADIENT_LEVELS-1))*4;if(rh>0){var fh=c(rh)?d:_;rh>0&&(rh=rh*dh+ch),ih[oh++]=fh[gh],ih[oh++]=fh[gh+1],ih[oh++]=fh[gh+2],ih[oh++]=fh[gh+3]*rh*256}else oh+=4}return ec.putImageData(ah,0,0),Ja},n.prototype._getBrush=function(){var r=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),a=this.pointSize+this.blurSize,s=a*2;r.width=s,r.height=s;var o=r.getContext("2d");return o.clearRect(0,0,s,s),o.shadowOffsetX=s,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-a,a,this.pointSize,0,Math.PI*2,!0),o.closePath(),o.fill(),r},n.prototype._getGradient=function(r,a){for(var s=this._gradientPixels,o=s[a]||(s[a]=new Uint8ClampedArray(256*4)),u=[0,0,0,0],c=0,p=0;p<256;p++)r[a](p/255,!0,u),o[c++]=u[0],o[c++]=u[1],o[c++]=u[2],o[c++]=u[3];return o},n}();function getIsInPiecewiseRange(n,r,a){var s=n[1]-n[0];r=map$1(r,function(c){return{interval:[(c.interval[0]-n[0])/s,(c.interval[1]-n[0])/s]}});var o=r.length,u=0;return function(c){var p;for(p=u;p<o;p++){var d=r[p].interval;if(d[0]<=c&&c<=d[1]){u=p;break}}if(p===o)for(p=u-1;p>=0;p--){var d=r[p].interval;if(d[0]<=c&&c<=d[1]){u=p;break}}return p>=0&&p<o&&a[p]}}function getIsInContinuousRange(n,r){var a=n[1]-n[0];return r=[(r[0]-n[0])/a,(r[1]-n[0])/a],function(s){return s>=r[0]&&s<=r[1]}}function isGeoCoordSys(n){var r=n.dimensions;return r[0]==="lng"&&r[1]==="lat"}var HeatmapView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u;s.eachComponent("visualMap",function(p){p.eachTargetSeries(function(d){d===a&&(u=p)})}),this._progressiveEls=null,this.group.removeAll();var c=a.coordinateSystem;c.type==="cartesian2d"||c.type==="calendar"?this._renderOnCartesianAndCalendar(a,o,0,a.getData().count()):isGeoCoordSys(c)&&this._renderOnGeo(c,a,u,o)},r.prototype.incrementalPrepareRender=function(a,s,o){this.group.removeAll()},r.prototype.incrementalRender=function(a,s,o,u){var c=s.coordinateSystem;c&&(isGeoCoordSys(c)?this.render(s,o,u):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(s,u,a.start,a.end,!0)))},r.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},r.prototype._renderOnCartesianAndCalendar=function(a,s,o,u,c){var p=a.coordinateSystem,d=isCoordinateSystemType(p,"cartesian2d"),_,ja,Ja,ec;if(d){var tc=p.getAxis("x"),rc=p.getAxis("y");_=tc.getBandWidth()+.5,ja=rc.getBandWidth()+.5,Ja=tc.scale.getExtent(),ec=rc.scale.getExtent()}for(var nc=this.group,ic=a.getData(),uc=a.getModel(["emphasis","itemStyle"]).getItemStyle(),eh=a.getModel(["blur","itemStyle"]).getItemStyle(),rh=a.getModel(["select","itemStyle"]).getItemStyle(),ah=a.get(["itemStyle","borderRadius"]),ih=getLabelStatesModels(a),oh=a.getModel("emphasis"),uh=oh.get("focus"),ch=oh.get("blurScope"),hh=oh.get("disabled"),dh=d?[ic.mapDimension("x"),ic.mapDimension("y"),ic.mapDimension("value")]:[ic.mapDimension("time"),ic.mapDimension("value")],gh=o;gh<u;gh++){var fh=void 0,vh=ic.getItemVisual(gh,"style");if(d){var ph=ic.get(dh[0],gh),yh=ic.get(dh[1],gh);if(isNaN(ic.get(dh[2],gh))||isNaN(ph)||isNaN(yh)||ph<Ja[0]||ph>Ja[1]||yh<ec[0]||yh>ec[1])continue;var xh=p.dataToPoint([ph,yh]);fh=new Rect$2({shape:{x:xh[0]-_/2,y:xh[1]-ja/2,width:_,height:ja},style:vh})}else{if(isNaN(ic.get(dh[1],gh)))continue;fh=new Rect$2({z2:1,shape:p.dataToRect([ic.get(dh[0],gh)]).contentShape,style:vh})}if(ic.hasItemOption){var _h=ic.getItemModel(gh),bh=_h.getModel("emphasis");uc=bh.getModel("itemStyle").getItemStyle(),eh=_h.getModel(["blur","itemStyle"]).getItemStyle(),rh=_h.getModel(["select","itemStyle"]).getItemStyle(),ah=_h.get(["itemStyle","borderRadius"]),uh=bh.get("focus"),ch=bh.get("blurScope"),hh=bh.get("disabled"),ih=getLabelStatesModels(_h)}fh.shape.r=ah;var Dh=a.getRawValue(gh),Th="-";Dh&&Dh[2]!=null&&(Th=Dh[2]+""),setLabelStyle(fh,ih,{labelFetcher:a,labelDataIndex:gh,defaultOpacity:vh.opacity,defaultText:Th}),fh.ensureState("emphasis").style=uc,fh.ensureState("blur").style=eh,fh.ensureState("select").style=rh,toggleHoverEmphasis(fh,uh,ch,hh),fh.incremental=c,c&&(fh.states.emphasis.hoverLayer=!0),nc.add(fh),ic.setItemGraphicEl(gh,fh),this._progressiveEls&&this._progressiveEls.push(fh)}},r.prototype._renderOnGeo=function(a,s,o,u){var c=o.targetVisuals.inRange,p=o.targetVisuals.outOfRange,d=s.getData(),_=this._hmLayer||this._hmLayer||new HeatmapLayer;_.blurSize=s.get("blurSize"),_.pointSize=s.get("pointSize"),_.minOpacity=s.get("minOpacity"),_.maxOpacity=s.get("maxOpacity");var ja=a.getViewRect().clone(),Ja=a.getRoamTransform();ja.applyTransform(Ja);var ec=Math.max(ja.x,0),tc=Math.max(ja.y,0),rc=Math.min(ja.width+ja.x,u.getWidth()),nc=Math.min(ja.height+ja.y,u.getHeight()),ic=rc-ec,uc=nc-tc,eh=[d.mapDimension("lng"),d.mapDimension("lat"),d.mapDimension("value")],rh=d.mapArray(eh,function(uh,ch,hh){var dh=a.dataToPoint([uh,ch]);return dh[0]-=ec,dh[1]-=tc,dh.push(hh),dh}),ah=o.getExtent(),ih=o.type==="visualMap.continuous"?getIsInContinuousRange(ah,o.option.range):getIsInPiecewiseRange(ah,o.getPieceList(),o.option.selected);_.update(rh,ic,uc,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:p.color.getColorMapper()},ih);var oh=new ZRImage({style:{width:ic,height:uc,x:ec,y:tc,image:_.canvas},silent:!0});this.group.add(oh)},r.type="heatmap",r}(ChartView),HeatmapSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.getInitialData=function(a,s){return createSeriesData(null,this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var a=CoordinateSystemManager.get(this.get("coordinateSystem"));if(a&&a.dimensions)return a.dimensions[0]==="lng"&&a.dimensions[1]==="lat"},r.type="series.heatmap",r.dependencies=["grid","geo","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},r}(SeriesModel);function install$L(n){n.registerChartView(HeatmapView),n.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u=this.group,c=a.getData(),p=this._data,d=a.coordinateSystem,_=d.getBaseAxis(),ja=_.isHorizontal(),Ja=d.master.getRect(),ec={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:a,coordSys:d,coordSysExtent:[[Ja.x,Ja.x+Ja.width],[Ja.y,Ja.y+Ja.height]],isHorizontal:ja,valueDim:LAYOUT_ATTRS[+ja],categoryDim:LAYOUT_ATTRS[1-+ja]};c.diff(p).add(function(rc){if(c.hasValue(rc)){var nc=getItemModel(c,rc),ic=getSymbolMeta(c,rc,nc,ec),uc=createBar(c,ec,ic);c.setItemGraphicEl(rc,uc),u.add(uc),updateCommon(uc,ec,ic)}}).update(function(rc,nc){var ic=p.getItemGraphicEl(nc);if(!c.hasValue(rc)){u.remove(ic);return}var uc=getItemModel(c,rc),eh=getSymbolMeta(c,rc,uc,ec),rh=getShapeStr(c,eh);ic&&rh!==ic.__pictorialShapeStr&&(u.remove(ic),c.setItemGraphicEl(rc,null),ic=null),ic?updateBar(ic,ec,eh):ic=createBar(c,ec,eh,!0),c.setItemGraphicEl(rc,ic),ic.__pictorialSymbolMeta=eh,u.add(ic),updateCommon(ic,ec,eh)}).remove(function(rc){var nc=p.getItemGraphicEl(rc);nc&&removeBar(p,rc,nc.__pictorialSymbolMeta.animationModel,nc)}).execute();var tc=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;return tc?u.setClipPath(tc):u.removeClipPath(),this._data=c,this.group},r.prototype.remove=function(a,s){var o=this.group,u=this._data;a.get("animation")?u&&u.eachItemGraphicEl(function(c){removeBar(u,getECData(c).dataIndex,a,c)}):o.removeAll()},r.type="pictorialBar",r}(ChartView);function getSymbolMeta(n,r,a,s){var o=n.getItemLayout(r),u=a.get("symbolRepeat"),c=a.get("symbolClip"),p=a.get("symbolPosition")||"start",d=a.get("symbolRotate"),_=(d||0)*Math.PI/180||0,ja=a.get("symbolPatternSize")||2,Ja=a.isAnimationEnabled(),ec={dataIndex:r,layout:o,itemModel:a,symbolType:n.getItemVisual(r,"symbol")||"circle",style:n.getItemVisual(r,"style"),symbolClip:c,symbolRepeat:u,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:ja,rotation:_,animationModel:Ja?a:null,hoverScale:Ja&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};prepareBarLength(a,u,o,s,ec),prepareSymbolSize(n,r,o,u,c,ec.boundingLength,ec.pxSign,ja,s,ec),prepareLineWidth(a,ec.symbolScale,_,s,ec);var tc=ec.symbolSize,rc=normalizeSymbolOffset(a.get("symbolOffset"),tc);return prepareLayoutInfo(a,tc,o,u,c,rc,p,ec.valueLineWidth,ec.boundingLength,ec.repeatCutLength,s,ec),ec}function prepareBarLength(n,r,a,s,o){var u=s.valueDim,c=n.get("symbolBoundingData"),p=s.coordSys.getOtherAxis(s.coordSys.getBaseAxis()),d=p.toGlobalCoord(p.dataToCoord(0)),_=1-+(a[u.wh]<=0),ja;if(isArray$1(c)){var Ja=[convertToCoordOnAxis(p,c[0])-d,convertToCoordOnAxis(p,c[1])-d];Ja[1]<Ja[0]&&Ja.reverse(),ja=Ja[_]}else c!=null?ja=convertToCoordOnAxis(p,c)-d:r?ja=s.coordSysExtent[u.index][_]-d:ja=a[u.wh];o.boundingLength=ja,r&&(o.repeatCutLength=a[u.wh]),o.pxSign=ja>0?1:-1}function convertToCoordOnAxis(n,r){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(r)))}function prepareSymbolSize(n,r,a,s,o,u,c,p,d,_){var ja=d.valueDim,Ja=d.categoryDim,ec=Math.abs(a[Ja.wh]),tc=n.getItemVisual(r,"symbolSize"),rc;isArray$1(tc)?rc=tc.slice():tc==null?rc=["100%","100%"]:rc=[tc,tc],rc[Ja.index]=parsePercent(rc[Ja.index],ec),rc[ja.index]=parsePercent(rc[ja.index],s?ec:Math.abs(u)),_.symbolSize=rc;var nc=_.symbolScale=[rc[0]/p,rc[1]/p];nc[ja.index]*=(d.isHorizontal?-1:1)*c}function prepareLineWidth(n,r,a,s,o){var u=n.get(BAR_BORDER_WIDTH_QUERY)||0;u&&(pathForLineWidth.attr({scaleX:r[0],scaleY:r[1],rotation:a}),pathForLineWidth.updateTransform(),u/=pathForLineWidth.getLineScale(),u*=r[s.valueDim.index]),o.valueLineWidth=u||0}function prepareLayoutInfo(n,r,a,s,o,u,c,p,d,_,ja,Ja){var ec=ja.categoryDim,tc=ja.valueDim,rc=Ja.pxSign,nc=Math.max(r[tc.index]+p,0),ic=nc;if(s){var uc=Math.abs(d),eh=retrieve$1(n.get("symbolMargin"),"15%")+"",rh=!1;eh.lastIndexOf("!")===eh.length-1&&(rh=!0,eh=eh.slice(0,eh.length-1));var ah=parsePercent(eh,r[tc.index]),ih=Math.max(nc+ah*2,0),oh=rh?0:ah*2,uh=isNumeric(s),ch=uh?s:toIntTimes((uc+oh)/ih),hh=uc-ch*nc;ah=hh/2/(rh?ch:Math.max(ch-1,1)),ih=nc+ah*2,oh=rh?0:ah*2,!uh&&s!=="fixed"&&(ch=_?toIntTimes((Math.abs(_)+oh)/ih):0),ic=ch*ih-oh,Ja.repeatTimes=ch,Ja.symbolMargin=ah}var dh=rc*(ic/2),gh=Ja.pathPosition=[];gh[ec.index]=a[ec.wh]/2,gh[tc.index]=c==="start"?dh:c==="end"?d-dh:d/2,u&&(gh[0]+=u[0],gh[1]+=u[1]);var fh=Ja.bundlePosition=[];fh[ec.index]=a[ec.xy],fh[tc.index]=a[tc.xy];var vh=Ja.barRectShape=extend$2({},a);vh[tc.wh]=rc*Math.max(Math.abs(a[tc.wh]),Math.abs(gh[tc.index]+dh)),vh[ec.wh]=a[ec.wh];var ph=Ja.clipShape={};ph[ec.xy]=-a[ec.xy],ph[ec.wh]=ja.ecSize[ec.wh],ph[tc.xy]=0,ph[tc.wh]=a[tc.wh]}function createPath(n){var r=n.symbolPatternSize,a=createSymbol$1(n.symbolType,-r/2,-r/2,r,r);return a.attr({culling:!0}),a.type!=="image"&&a.setStyle({strokeNoScale:!0}),a}function createOrUpdateRepeatSymbols(n,r,a,s){var o=n.__pictorialBundle,u=a.symbolSize,c=a.valueLineWidth,p=a.pathPosition,d=r.valueDim,_=a.repeatTimes||0,ja=0,Ja=u[r.valueDim.index]+c+a.symbolMargin*2;for(eachPath(n,function(nc){nc.__pictorialAnimationIndex=ja,nc.__pictorialRepeatTimes=_,ja<_?updateAttr(nc,null,rc(ja),a,s):updateAttr(nc,null,{scaleX:0,scaleY:0},a,s,function(){o.remove(nc)}),ja++});ja<_;ja++){var ec=createPath(a);ec.__pictorialAnimationIndex=ja,ec.__pictorialRepeatTimes=_,o.add(ec);var tc=rc(ja);updateAttr(ec,{x:tc.x,y:tc.y,scaleX:0,scaleY:0},{scaleX:tc.scaleX,scaleY:tc.scaleY,rotation:tc.rotation},a,s)}function rc(nc){var ic=p.slice(),uc=a.pxSign,eh=nc;return(a.symbolRepeatDirection==="start"?uc>0:uc<0)&&(eh=_-1-nc),ic[d.index]=Ja*(eh-_/2+.5)+p[d.index],{x:ic[0],y:ic[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function createOrUpdateSingleSymbol(n,r,a,s){var o=n.__pictorialBundle,u=n.__pictorialMainPath;u?updateAttr(u,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,s):(u=n.__pictorialMainPath=createPath(a),o.add(u),updateAttr(u,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,s))}function createOrUpdateBarRect(n,r,a){var s=extend$2({},r.barRectShape),o=n.__pictorialBarRect;o?updateAttr(o,null,{shape:s},r,a):(o=n.__pictorialBarRect=new Rect$2({z2:2,shape:s,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),o.disableMorphing=!0,n.add(o))}function createOrUpdateClip(n,r,a,s){if(a.symbolClip){var o=n.__pictorialClipPath,u=extend$2({},a.clipShape),c=r.valueDim,p=a.animationModel,d=a.dataIndex;if(o)updateProps$1(o,{shape:u},p,d);else{u[c.wh]=0,o=new Rect$2({shape:u}),n.__pictorialBundle.setClipPath(o),n.__pictorialClipPath=o;var _={};_[c.wh]=a.clipShape[c.wh],graphic[s?"updateProps":"initProps"](o,{shape:_},p,d)}}}function getItemModel(n,r){var a=n.getItemModel(r);return a.getAnimationDelayParams=getAnimationDelayParams,a.isAnimationEnabled=isAnimationEnabled,a}function getAnimationDelayParams(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(n,r,a,s){var o=new Group$3,u=new Group$3;return o.add(u),o.__pictorialBundle=u,u.x=a.bundlePosition[0],u.y=a.bundlePosition[1],a.symbolRepeat?createOrUpdateRepeatSymbols(o,r,a):createOrUpdateSingleSymbol(o,r,a),createOrUpdateBarRect(o,a,s),createOrUpdateClip(o,r,a,s),o.__pictorialShapeStr=getShapeStr(n,a),o.__pictorialSymbolMeta=a,o}function updateBar(n,r,a){var s=a.animationModel,o=a.dataIndex,u=n.__pictorialBundle;updateProps$1(u,{x:a.bundlePosition[0],y:a.bundlePosition[1]},s,o),a.symbolRepeat?createOrUpdateRepeatSymbols(n,r,a,!0):createOrUpdateSingleSymbol(n,r,a,!0),createOrUpdateBarRect(n,a,!0),createOrUpdateClip(n,r,a,!0)}function removeBar(n,r,a,s){var o=s.__pictorialBarRect;o&&o.removeTextContent();var u=[];eachPath(s,function(c){u.push(c)}),s.__pictorialMainPath&&u.push(s.__pictorialMainPath),s.__pictorialClipPath&&(a=null),each$f(u,function(c){removeElement(c,{scaleX:0,scaleY:0},a,r,function(){s.parent&&s.parent.remove(s)})}),n.setItemGraphicEl(r,null)}function getShapeStr(n,r){return[n.getItemVisual(r.dataIndex,"symbol")||"none",!!r.symbolRepeat,!!r.symbolClip].join(":")}function eachPath(n,r,a){each$f(n.__pictorialBundle.children(),function(s){s!==n.__pictorialBarRect&&r.call(a,s)})}function updateAttr(n,r,a,s,o,u){r&&n.attr(r),s.symbolClip&&!o?a&&n.attr(a):a&&graphic[o?"updateProps":"initProps"](n,a,s.animationModel,s.dataIndex,u)}function updateCommon(n,r,a){var s=a.dataIndex,o=a.itemModel,u=o.getModel("emphasis"),c=u.getModel("itemStyle").getItemStyle(),p=o.getModel(["blur","itemStyle"]).getItemStyle(),d=o.getModel(["select","itemStyle"]).getItemStyle(),_=o.getShallow("cursor"),ja=u.get("focus"),Ja=u.get("blurScope"),ec=u.get("scale");eachPath(n,function(nc){if(nc instanceof ZRImage){var ic=nc.style;nc.useStyle(extend$2({image:ic.image,x:ic.x,y:ic.y,width:ic.width,height:ic.height},a.style))}else nc.useStyle(a.style);var uc=nc.ensureState("emphasis");uc.style=c,ec&&(uc.scaleX=nc.scaleX*1.1,uc.scaleY=nc.scaleY*1.1),nc.ensureState("blur").style=p,nc.ensureState("select").style=d,_&&(nc.cursor=_),nc.z2=a.z2});var tc=r.valueDim.posDesc[+(a.boundingLength>0)],rc=n.__pictorialBarRect;rc.ignoreClip=!0,setLabelStyle(rc,getLabelStatesModels(o),{labelFetcher:r.seriesModel,labelDataIndex:s,defaultText:getDefaultLabel(r.seriesModel.getData(),s),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:tc}),toggleHoverEmphasis(n,ja,Ja,u.get("disabled"))}function toIntTimes(n){var r=Math.round(n);return Math.abs(n-r)<1e-4?r:Math.ceil(n)}var PictorialBarSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return r.prototype.getInitialData=function(a){return a.stack=null,n.prototype.getInitialData.apply(this,arguments)},r.type="series.pictorialBar",r.dependencies=["grid"],r.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),r}(BaseBarSeriesModel);function install$K(n){n.registerChartView(PictorialBarView),n.registerSeriesModel(PictorialBarSeriesModel),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._layers=[],a}return r.prototype.render=function(a,s,o){var u=a.getData(),c=this,p=this.group,d=a.getLayerSeries(),_=u.getLayout("layoutInfo"),ja=_.rect,Ja=_.boundaryGap;p.x=0,p.y=ja.y+Ja[0];function ec(ic){return ic.name}var tc=new DataDiffer(this._layersSeries||[],d,ec,ec),rc=[];tc.add(bind$1(nc,this,"add")).update(bind$1(nc,this,"update")).remove(bind$1(nc,this,"remove")).execute();function nc(ic,uc,eh){var rh=c._layers;if(ic==="remove"){p.remove(rh[uc]);return}for(var ah=[],ih=[],oh,uh=d[uc].indices,ch=0;ch<uh.length;ch++){var hh=u.getItemLayout(uh[ch]),dh=hh.x,gh=hh.y0,fh=hh.y;ah.push(dh,gh),ih.push(dh,gh+fh),oh=u.getItemVisual(uh[ch],"style")}var vh,ph=u.getItemLayout(uh[0]),yh=a.getModel("label"),xh=yh.get("margin"),_h=a.getModel("emphasis");if(ic==="add"){var bh=rc[uc]=new Group$3;vh=new ECPolygon({shape:{points:ah,stackedOnPoints:ih,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),bh.add(vh),p.add(bh),a.isAnimationEnabled()&&vh.setClipPath(createGridClipShape(vh.getBoundingRect(),a,function(){vh.removeClipPath()}))}else{var bh=rh[eh];vh=bh.childAt(0),p.add(bh),rc[uc]=bh,updateProps$1(vh,{shape:{points:ah,stackedOnPoints:ih}},a),saveOldStyle(vh)}setLabelStyle(vh,getLabelStatesModels(a),{labelDataIndex:uh[ch-1],defaultText:u.getName(uh[ch-1]),inheritColor:oh.fill},{normal:{verticalAlign:"middle"}}),vh.setTextConfig({position:null,local:!0});var Dh=vh.getTextContent();Dh&&(Dh.x=ph.x-xh,Dh.y=ph.y0+ph.y/2),vh.useStyle(oh),u.setItemGraphicEl(uc,vh),setStatesStylesFromModel(vh,a),toggleHoverEmphasis(vh,_h.get("focus"),_h.get("blurScope"),_h.get("disabled"))}this._layersSeries=d,this._layers=rc},r.type="themeRiver",r}(ChartView);function createGridClipShape(n,r,a){var s=new Rect$2({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return initProps(s,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},r,a),s}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},r.prototype.fixData=function(a){var s=a.length,o={},u=groupData(a,function(ec){return o.hasOwnProperty(ec[0]+"")||(o[ec[0]+""]=-1),ec[2]}),c=[];u.buckets.each(function(ec,tc){c.push({name:tc,dataList:ec})});for(var p=c.length,d=0;d<p;++d){for(var _=c[d].name,ja=0;ja<c[d].dataList.length;++ja){var Ja=c[d].dataList[ja][0]+"";o[Ja]=d}for(var Ja in o)o.hasOwnProperty(Ja)&&o[Ja]!==d&&(o[Ja]=d,a[s]=[Ja,0,_],s++)}return a},r.prototype.getInitialData=function(a,s){for(var o=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],u=o.get("type"),c=filter(a.data,function(rc){return rc[2]!==void 0}),p=this.fixData(c||[]),d=[],_=this.nameMap=createHashMap(),ja=0,Ja=0;Ja<p.length;++Ja)d.push(p[Ja][DATA_NAME_INDEX]),_.get(p[Ja][DATA_NAME_INDEX])||(_.set(p[Ja][DATA_NAME_INDEX],ja),ja++);var ec=prepareSeriesDataSchema(p,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(u)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,tc=new SeriesData(ec,this);return tc.initData(p),tc},r.prototype.getLayerSeries=function(){for(var a=this.getData(),s=a.count(),o=[],u=0;u<s;++u)o[u]=u;var c=a.mapDimension("single"),p=groupData(o,function(_){return a.get("name",_)}),d=[];return p.buckets.each(function(_,ja){_.sort(function(Ja,ec){return a.get(c,Ja)-a.get(c,ec)}),d.push({name:ja,indices:_})}),d},r.prototype.getAxisTooltipData=function(a,s,o){isArray$1(a)||(a=a?[a]:[]);for(var u=this.getData(),c=this.getLayerSeries(),p=[],d=c.length,_,ja=0;ja<d;++ja){for(var Ja=Number.MAX_VALUE,ec=-1,tc=c[ja].indices.length,rc=0;rc<tc;++rc){var nc=u.get(a[0],c[ja].indices[rc]),ic=Math.abs(nc-s);ic<=Ja&&(_=nc,Ja=ic,ec=c[ja].indices[rc])}p.push(ec)}return{dataIndices:p,nestestValue:_}},r.prototype.formatTooltip=function(a,s,o){var u=this.getData(),c=u.getName(a),p=u.get(u.mapDimension("value"),a);return createTooltipMarkup("nameValue",{name:c,value:p})},r.type="series.themeRiver",r.dependencies=["singleAxis"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},r}(SeriesModel);function themeRiverLayout(n,r){n.eachSeriesByType("themeRiver",function(a){var s=a.getData(),o=a.coordinateSystem,u={},c=o.getRect();u.rect=c;var p=a.get("boundaryGap"),d=o.getAxis();if(u.boundaryGap=p,d.orient==="horizontal"){p[0]=parsePercent(p[0],c.height),p[1]=parsePercent(p[1],c.height);var _=c.height-p[0]-p[1];doThemeRiverLayout(s,a,_)}else{p[0]=parsePercent(p[0],c.width),p[1]=parsePercent(p[1],c.width);var ja=c.width-p[0]-p[1];doThemeRiverLayout(s,a,ja)}s.setLayout("layoutInfo",u)})}function doThemeRiverLayout(n,r,a){if(n.count())for(var s=r.coordinateSystem,o=r.getLayerSeries(),u=n.mapDimension("single"),c=n.mapDimension("value"),p=map$1(o,function(ic){return map$1(ic.indices,function(uc){var eh=s.dataToPoint(n.get(u,uc));return eh[1]=n.get(c,uc),eh})}),d=computeBaseline(p),_=d.y0,ja=a/d.max,Ja=o.length,ec=o[0].indices.length,tc,rc=0;rc<ec;++rc){tc=_[rc]*ja,n.setItemLayout(o[0].indices[rc],{layerIndex:0,x:p[0][rc][0],y0:tc,y:p[0][rc][1]*ja});for(var nc=1;nc<Ja;++nc)tc+=p[nc-1][rc][1]*ja,n.setItemLayout(o[nc].indices[rc],{layerIndex:nc,x:p[nc][rc][0],y0:tc,y:p[nc][rc][1]*ja})}}function computeBaseline(n){for(var r=n.length,a=n[0].length,s=[],o=[],u=0,c=0;c<a;++c){for(var p=0,d=0;d<r;++d)p+=n[d][c][1];p>u&&(u=p),s.push(p)}for(var _=0;_<a;++_)o[_]=(u-s[_])/2;u=0;for(var ja=0;ja<a;++ja){var Ja=s[ja]+o[ja];Ja>u&&(u=Ja)}return{y0:o,max:u}}function install$J(n){n.registerChartView(ThemeRiverView),n.registerSeriesModel(ThemeRiverSeriesModel),n.registerLayout(themeRiverLayout),n.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(n){__extends(r,n);function r(a,s,o,u){var c=n.call(this)||this;c.z2=DEFAULT_SECTOR_Z,c.textConfig={inside:!0},getECData(c).seriesIndex=s.seriesIndex;var p=new ZRText({z2:DEFAULT_TEXT_Z,silent:a.getModel().get(["label","silent"])});return c.setTextContent(p),c.updateData(!0,a,s,o,u),c}return r.prototype.updateData=function(a,s,o,u,c){this.node=s,s.piece=this,o=o||this._seriesModel,u=u||this._ecModel;var p=this;getECData(p).dataIndex=s.dataIndex;var d=s.getModel(),_=d.getModel("emphasis"),ja=s.getLayout(),Ja=extend$2({},ja);Ja.label=null;var ec=s.getVisual("style");ec.lineJoin="bevel";var tc=s.getVisual("decal");tc&&(ec.decal=createOrUpdatePatternFromDecal(tc,c));var rc=getSectorCornerRadius(d.getModel("itemStyle"),Ja,!0);extend$2(Ja,rc),each$f(SPECIAL_STATES,function(eh){var rh=p.ensureState(eh),ah=d.getModel([eh,"itemStyle"]);rh.style=ah.getItemStyle();var ih=getSectorCornerRadius(ah,Ja);ih&&(rh.shape=ih)}),a?(p.setShape(Ja),p.shape.r=ja.r0,initProps(p,{shape:{r:ja.r}},o,s.dataIndex)):(updateProps$1(p,{shape:Ja},o),saveOldStyle(p)),p.useStyle(ec),this._updateLabel(o);var nc=d.getShallow("cursor");nc&&p.attr("cursor",nc),this._seriesModel=o||this._seriesModel,this._ecModel=u||this._ecModel;var ic=_.get("focus"),uc=ic==="ancestor"?s.getAncestorsIndices():ic==="descendant"?s.getDescendantIndices():ic;toggleHoverEmphasis(this,uc,_.get("blurScope"),_.get("disabled"))},r.prototype._updateLabel=function(a){var s=this,o=this.node.getModel(),u=o.getModel("label"),c=this.node.getLayout(),p=c.endAngle-c.startAngle,d=(c.startAngle+c.endAngle)/2,_=Math.cos(d),ja=Math.sin(d),Ja=this,ec=Ja.getTextContent(),tc=this.node.dataIndex,rc=u.get("minAngle")/180*Math.PI,nc=u.get("show")&&!(rc!=null&&Math.abs(p)<rc);ec.ignore=!nc,each$f(DISPLAY_STATES,function(uc){var eh=uc==="normal"?o.getModel("label"):o.getModel([uc,"label"]),rh=uc==="normal",ah=rh?ec:ec.ensureState(uc),ih=a.getFormattedLabel(tc,uc);rh&&(ih=ih||s.node.name),ah.style=createTextStyle(eh,{},null,uc!=="normal",!0),ih&&(ah.style.text=ih);var oh=eh.get("show");oh!=null&&!rh&&(ah.ignore=!oh);var uh=ic(eh,"position"),ch=rh?Ja:Ja.states[uc],hh=ch.style.fill;ch.textConfig={outsideFill:eh.get("color")==="inherit"?hh:null,inside:uh!=="outside"};var dh,gh=ic(eh,"distance")||0,fh=ic(eh,"align"),vh=ic(eh,"rotate"),ph=Math.PI*.5,yh=Math.PI*1.5,xh=normalizeRadian(vh==="tangential"?Math.PI/2-d:d),_h=xh>ph&&!isRadianAroundZero(xh-ph)&&xh<yh;uh==="outside"?(dh=c.r+gh,fh=_h?"right":"left"):!fh||fh==="center"?(p===2*Math.PI&&c.r0===0?dh=0:dh=(c.r+c.r0)/2,fh="center"):fh==="left"?(dh=c.r0+gh,fh=_h?"right":"left"):fh==="right"&&(dh=c.r-gh,fh=_h?"left":"right"),ah.style.align=fh,ah.style.verticalAlign=ic(eh,"verticalAlign")||"middle",ah.x=dh*_+c.cx,ah.y=dh*ja+c.cy;var bh=0;vh==="radial"?bh=normalizeRadian(-d)+(_h?Math.PI:0):vh==="tangential"?bh=normalizeRadian(Math.PI/2-d)+(_h?Math.PI:0):isNumber(vh)&&(bh=vh*Math.PI/180),ah.rotation=normalizeRadian(bh)});function ic(uc,eh){var rh=uc.get(eh);return rh??u.get(eh)}ec.dirtyStyle()},r}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(n){n.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(r,a){a.eachComponent({mainType:"series",subType:"sunburst",query:r},s);function s(o,u){var c=retrieveTargetInfo(r,[ROOT_TO_NODE_ACTION],o);if(c){var p=o.getViewRoot();p&&(r.direction=aboveViewRoot(p,c.node)?"rollUp":"drillDown"),o.resetViewRoot(c.node)}}}),n.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(r,a,s){r=extend$2({},r),a.eachComponent({mainType:"series",subType:"sunburst",query:r},o);function o(u){var c=retrieveTargetInfo(r,[HIGHLIGHT_ACTION],u);c&&(r.dataIndex=c.node.dataIndex)}s.dispatchAction(extend$2(r,{type:"highlight"}))}),n.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(r,a,s){r=extend$2({},r),s.dispatchAction(extend$2(r,{type:"downplay"}))})}var SunburstView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o,u){var c=this;this.seriesModel=a,this.api=o,this.ecModel=s;var p=a.getData(),d=p.tree.root,_=a.getViewRoot(),ja=this.group,Ja=a.get("renderLabelForZeroData"),ec=[];_.eachNode(function(eh){ec.push(eh)});var tc=this._oldChildren||[];rc(ec,tc),uc(d,_),this._initEvents(),this._oldChildren=ec;function rc(eh,rh){if(eh.length===0&&rh.length===0)return;new DataDiffer(rh,eh,ah,ah).add(ih).update(ih).remove(curry$1(ih,null)).execute();function ah(oh){return oh.getId()}function ih(oh,uh){var ch=oh==null?null:eh[oh],hh=uh==null?null:rh[uh];nc(ch,hh)}}function nc(eh,rh){if(!Ja&&eh&&!eh.getValue()&&(eh=null),eh!==d&&rh!==d){if(rh&&rh.piece)eh?(rh.piece.updateData(!1,eh,a,s,o),p.setItemGraphicEl(eh.dataIndex,rh.piece)):ic(rh);else if(eh){var ah=new SunburstPiece(eh,a,s,o);ja.add(ah),p.setItemGraphicEl(eh.dataIndex,ah)}}}function ic(eh){eh&&eh.piece&&(ja.remove(eh.piece),eh.piece=null)}function uc(eh,rh){rh.depth>0?(c.virtualPiece?c.virtualPiece.updateData(!1,eh,a,s,o):(c.virtualPiece=new SunburstPiece(eh,a,s,o),ja.add(c.virtualPiece)),rh.piece.off("click"),c.virtualPiece.on("click",function(ah){c._rootToNode(rh.parentNode)})):c.virtualPiece&&(ja.remove(c.virtualPiece),c.virtualPiece=null)}},r.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(s){var o=!1,u=a.seriesModel.getViewRoot();u.eachNode(function(c){if(!o&&c.piece&&c.piece===s.target){var p=c.getModel().get("nodeClick");if(p==="rootToNode")a._rootToNode(c);else if(p==="link"){var d=c.getModel(),_=d.get("link");if(_){var ja=d.get("target",!0)||"_blank";windowOpen(_,ja)}}o=!0}})})},r.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},r.prototype.containPoint=function(a,s){var o=s.getData(),u=o.getItemLayout(0);if(u){var c=a[0]-u.cx,p=a[1]-u.cy,d=Math.sqrt(c*c+p*p);return d<=u.r&&d>=u.r0}},r.type="sunburst",r}(ChartView),SunburstSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.ignoreStyleOnData=!0,a}return r.prototype.getInitialData=function(a,s){var o={name:a.name,children:a.data};completeTreeValue(o);var u=this._levelModels=map$1(a.levels||[],function(d){return new Model(d,this,s)},this),c=Tree$1.createTree(o,this,p);function p(d){d.wrapMethod("getItemModel",function(_,ja){var Ja=c.getNodeByDataIndex(ja),ec=u[Ja.depth];return ec&&(_.parentModel=ec),_})}return c.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.getDataParams=function(a){var s=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(a);return s.treePathInfo=wrapTreePathInfo(o,this),s},r.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var s=this.getRawData().tree.root;(!a||a!==s&&!s.contains(a))&&(this._viewRoot=s)},r.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},r.type="series.sunburst",r.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},r}(SeriesModel);function completeTreeValue(n){var r=0;each$f(n.children,function(s){completeTreeValue(s);var o=s.value;isArray$1(o)&&(o=o[0]),r+=o});var a=n.value;isArray$1(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=r),a<0&&(a=0),isArray$1(n.value)?n.value[0]=a:n.value=a}var RADIAN=Math.PI/180;function sunburstLayout(n,r,a){r.eachSeriesByType(n,function(s){var o=s.get("center"),u=s.get("radius");isArray$1(u)||(u=[0,u]),isArray$1(o)||(o=[o,o]);var c=a.getWidth(),p=a.getHeight(),d=Math.min(c,p),_=parsePercent(o[0],c),ja=parsePercent(o[1],p),Ja=parsePercent(u[0],d/2),ec=parsePercent(u[1],d/2),tc=-s.get("startAngle")*RADIAN,rc=s.get("minAngle")*RADIAN,nc=s.getData().tree.root,ic=s.getViewRoot(),uc=ic.depth,eh=s.get("sort");eh!=null&&initChildren(ic,eh);var rh=0;each$f(ic.children,function(xh){!isNaN(xh.getValue())&&rh++});var ah=ic.getValue(),ih=Math.PI/(ah||rh)*2,oh=ic.depth>0,uh=ic.height-(oh?-1:1),ch=(ec-Ja)/(uh||1),hh=s.get("clockwise"),dh=s.get("stillShowZeroSum"),gh=hh?1:-1,fh=function(xh,_h){if(xh){var bh=_h;if(xh!==nc){var Dh=xh.getValue(),Th=ah===0&&dh?ih:Dh*ih;Th<rc&&(Th=rc),bh=_h+gh*Th;var Ch=xh.depth-uc-(oh?-1:1),wh=Ja+ch*Ch,Nh=Ja+ch*(Ch+1),Rh=s.getLevelModel(xh);if(Rh){var kh=Rh.get("r0",!0),Lh=Rh.get("r",!0),Fh=Rh.get("radius",!0);Fh!=null&&(kh=Fh[0],Lh=Fh[1]),kh!=null&&(wh=parsePercent(kh,d/2)),Lh!=null&&(Nh=parsePercent(Lh,d/2))}xh.setLayout({angle:Th,startAngle:_h,endAngle:bh,clockwise:hh,cx:_,cy:ja,r0:wh,r:Nh})}if(xh.children&&xh.children.length){var Wh=0;each$f(xh.children,function(Qh){Wh+=fh(Qh,_h+Wh)})}return bh-_h}};if(oh){var vh=Ja,ph=Ja+ch,yh=Math.PI*2;nc.setLayout({angle:yh,startAngle:tc,endAngle:tc+yh,clockwise:hh,cx:_,cy:ja,r0:vh,r:ph})}fh(ic,tc)})}function initChildren(n,r){var a=n.children||[];n.children=sort(a,r),a.length&&each$f(n.children,function(s){initChildren(s,r)})}function sort(n,r){if(isFunction(r)){var a=map$1(n,function(o,u){var c=o.getValue();return{params:{depth:o.depth,height:o.height,dataIndex:o.dataIndex,getValue:function(){return c}},index:u}});return a.sort(function(o,u){return r(o.params,u.params)}),map$1(a,function(o){return n[o.index]})}else{var s=r==="asc";return n.sort(function(o,u){var c=(o.getValue()-u.getValue())*(s?1:-1);return c===0?(o.dataIndex-u.dataIndex)*(s?-1:1):c})}}function sunburstVisual(n){var r={};function a(s,o,u){for(var c=s;c&&c.depth>1;)c=c.parentNode;var p=o.getColorFromPalette(c.name||c.dataIndex+"",r);return s.depth>1&&isString(p)&&(p=lift(p,(s.depth-1)/(u-1)*.5)),p}n.eachSeriesByType("sunburst",function(s){var o=s.getData(),u=o.tree;u.eachNode(function(c){var p=c.getModel(),d=p.getModel("itemStyle").getItemStyle();d.fill||(d.fill=a(c,s,u.root.height));var _=o.ensureUniqueItemVisual(c.dataIndex,"style");extend$2(_,d)})})}function install$I(n){n.registerChartView(SunburstView),n.registerSeriesModel(SunburstSeriesModel),n.registerLayout(curry$1(sunburstLayout,"sunburst")),n.registerProcessor(curry$1(dataFilter$1,"sunburst")),n.registerVisual(sunburstVisual),installSunburstAction(n)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},r.prototype.getInitialData=function(a,s){return createSeriesData(null,this)},r.prototype.getDataParams=function(a,s,o){var u=n.prototype.getDataParams.call(this,a,s);return o&&(u.info=customInnerStore(o).info),u},r.type="series.custom",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},r}(SeriesModel);function dataToCoordSize$3(n,r){return r=r||[0,0],map$1(["x","y"],function(a,s){var o=this.getAxis(a),u=r[s],c=n[s]/2;return o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(u-c)-o.dataToCoord(u+c))},this)}function cartesianPrepareCustom(n){var r=n.master.getRect();return{coordSys:{type:"cartesian2d",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(a){return n.dataToPoint(a)},size:bind$1(dataToCoordSize$3,n)}}}function dataToCoordSize$2(n,r){return r=r||[0,0],map$1([0,1],function(a){var s=r[a],o=n[a]/2,u=[],c=[];return u[a]=s-o,c[a]=s+o,u[1-a]=c[1-a]=r[1-a],Math.abs(this.dataToPoint(u)[a]-this.dataToPoint(c)[a])},this)}function geoPrepareCustom(n){var r=n.getBoundingRect();return{coordSys:{type:"geo",x:r.x,y:r.y,width:r.width,height:r.height,zoom:n.getZoom()},api:{coord:function(a){return n.dataToPoint(a)},size:bind$1(dataToCoordSize$2,n)}}}function dataToCoordSize$1(n,r){var a=this.getAxis(),s=r instanceof Array?r[0]:r,o=(n instanceof Array?n[0]:n)/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(s-o)-a.dataToCoord(s+o))}function singlePrepareCustom(n){var r=n.getRect();return{coordSys:{type:"singleAxis",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(a){return n.dataToPoint(a)},size:bind$1(dataToCoordSize$1,n)}}}function dataToCoordSize(n,r){return r=r||[0,0],map$1(["Radius","Angle"],function(a,s){var o="get"+a+"Axis",u=this[o](),c=r[s],p=n[s]/2,d=u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(c-p)-u.dataToCoord(c+p));return a==="Angle"&&(d=d*Math.PI/180),d},this)}function polarPrepareCustom(n){var r=n.getRadiusAxis(),a=n.getAngleAxis(),s=r.getExtent();return s[0]>s[1]&&s.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:s[1],r0:s[0]},api:{coord:function(o){var u=r.dataToRadius(o[0]),c=a.dataToAngle(o[1]),p=n.coordToPoint([u,c]);return p.push(u,c*Math.PI/180),p},size:bind$1(dataToCoordSize,n)}}}function calendarPrepareCustom(n){var r=n.getRect(),a=n.getRangeInfo();return{coordSys:{type:"calendar",x:r.x,y:r.y,width:r.width,height:r.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(s,o){return n.dataToPoint(s,o)}}}}function isEC4CompatibleStyle(n,r,a,s){return n&&(n.legacy||n.legacy!==!1&&!a&&!s&&r!=="tspan"&&(r==="text"||hasOwn(n,"text")))}function convertFromEC4CompatibleStyle(n,r,a){var s=n,o,u,c;if(r==="text")c=s;else{c={},hasOwn(s,"text")&&(c.text=s.text),hasOwn(s,"rich")&&(c.rich=s.rich),hasOwn(s,"textFill")&&(c.fill=s.textFill),hasOwn(s,"textStroke")&&(c.stroke=s.textStroke),hasOwn(s,"fontFamily")&&(c.fontFamily=s.fontFamily),hasOwn(s,"fontSize")&&(c.fontSize=s.fontSize),hasOwn(s,"fontStyle")&&(c.fontStyle=s.fontStyle),hasOwn(s,"fontWeight")&&(c.fontWeight=s.fontWeight),u={type:"text",style:c,silent:!0},o={};var p=hasOwn(s,"textPosition");a?o.position=p?s.textPosition:"inside":p&&(o.position=s.textPosition),hasOwn(s,"textPosition")&&(o.position=s.textPosition),hasOwn(s,"textOffset")&&(o.offset=s.textOffset),hasOwn(s,"textRotation")&&(o.rotation=s.textRotation),hasOwn(s,"textDistance")&&(o.distance=s.textDistance)}return convertEC4CompatibleRichItem(c,n),each$f(c.rich,function(d){convertEC4CompatibleRichItem(d,d)}),{textConfig:o,textContent:u}}function convertEC4CompatibleRichItem(n,r){r&&(r.font=r.textFont||r.font,hasOwn(r,"textStrokeWidth")&&(n.lineWidth=r.textStrokeWidth),hasOwn(r,"textAlign")&&(n.align=r.textAlign),hasOwn(r,"textVerticalAlign")&&(n.verticalAlign=r.textVerticalAlign),hasOwn(r,"textLineHeight")&&(n.lineHeight=r.textLineHeight),hasOwn(r,"textWidth")&&(n.width=r.textWidth),hasOwn(r,"textHeight")&&(n.height=r.textHeight),hasOwn(r,"textBackgroundColor")&&(n.backgroundColor=r.textBackgroundColor),hasOwn(r,"textPadding")&&(n.padding=r.textPadding),hasOwn(r,"textBorderColor")&&(n.borderColor=r.textBorderColor),hasOwn(r,"textBorderWidth")&&(n.borderWidth=r.textBorderWidth),hasOwn(r,"textBorderRadius")&&(n.borderRadius=r.textBorderRadius),hasOwn(r,"textBoxShadowColor")&&(n.shadowColor=r.textBoxShadowColor),hasOwn(r,"textBoxShadowBlur")&&(n.shadowBlur=r.textBoxShadowBlur),hasOwn(r,"textBoxShadowOffsetX")&&(n.shadowOffsetX=r.textBoxShadowOffsetX),hasOwn(r,"textBoxShadowOffsetY")&&(n.shadowOffsetY=r.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(n,r,a){var s=n;s.textPosition=s.textPosition||a.position||"inside",a.offset!=null&&(s.textOffset=a.offset),a.rotation!=null&&(s.textRotation=a.rotation),a.distance!=null&&(s.textDistance=a.distance);var o=s.textPosition.indexOf("inside")>=0,u=n.fill||"#000";convertToEC4RichItem(s,r);var c=s.textFill==null;return o?c&&(s.textFill=a.insideFill||"#fff",!s.textStroke&&a.insideStroke&&(s.textStroke=a.insideStroke),!s.textStroke&&(s.textStroke=u),s.textStrokeWidth==null&&(s.textStrokeWidth=2)):(c&&(s.textFill=n.fill||a.outsideFill||"#000"),!s.textStroke&&a.outsideStroke&&(s.textStroke=a.outsideStroke)),s.text=r.text,s.rich=r.rich,each$f(r.rich,function(p){convertToEC4RichItem(p,p)}),s}function convertToEC4RichItem(n,r){r&&(hasOwn(r,"fill")&&(n.textFill=r.fill),hasOwn(r,"stroke")&&(n.textStroke=r.fill),hasOwn(r,"lineWidth")&&(n.textStrokeWidth=r.lineWidth),hasOwn(r,"font")&&(n.font=r.font),hasOwn(r,"fontStyle")&&(n.fontStyle=r.fontStyle),hasOwn(r,"fontWeight")&&(n.fontWeight=r.fontWeight),hasOwn(r,"fontSize")&&(n.fontSize=r.fontSize),hasOwn(r,"fontFamily")&&(n.fontFamily=r.fontFamily),hasOwn(r,"align")&&(n.textAlign=r.align),hasOwn(r,"verticalAlign")&&(n.textVerticalAlign=r.verticalAlign),hasOwn(r,"lineHeight")&&(n.textLineHeight=r.lineHeight),hasOwn(r,"width")&&(n.textWidth=r.width),hasOwn(r,"height")&&(n.textHeight=r.height),hasOwn(r,"backgroundColor")&&(n.textBackgroundColor=r.backgroundColor),hasOwn(r,"padding")&&(n.textPadding=r.padding),hasOwn(r,"borderColor")&&(n.textBorderColor=r.borderColor),hasOwn(r,"borderWidth")&&(n.textBorderWidth=r.borderWidth),hasOwn(r,"borderRadius")&&(n.textBorderRadius=r.borderRadius),hasOwn(r,"shadowColor")&&(n.textBoxShadowColor=r.shadowColor),hasOwn(r,"shadowBlur")&&(n.textBoxShadowBlur=r.shadowBlur),hasOwn(r,"shadowOffsetX")&&(n.textBoxShadowOffsetX=r.shadowOffsetX),hasOwn(r,"shadowOffsetY")&&(n.textBoxShadowOffsetY=r.shadowOffsetY),hasOwn(r,"textShadowColor")&&(n.textShadowColor=r.textShadowColor),hasOwn(r,"textShadowBlur")&&(n.textShadowBlur=r.textShadowBlur),hasOwn(r,"textShadowOffsetX")&&(n.textShadowOffsetX=r.textShadowOffsetX),hasOwn(r,"textShadowOffsetY")&&(n.textShadowOffsetY=r.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(n,r){return n[r]=1,n},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(n,r,a,s,o){var u=n+"Animation",c=getAnimationConfig(n,s,o)||{},p=transitionInnerStore(r).userDuring;return c.duration>0&&(c.during=p?bind$1(duringCall,{el:r,userDuring:p}):null,c.setToFinal=!0,c.scope=n),extend$2(c,a[u]),c}function applyUpdateTransition(n,r,a,s){s=s||{};var o=s.dataIndex,u=s.isInit,c=s.clearStyle,p=a.isAnimationEnabled(),d=transitionInnerStore(n),_=r.style;d.userDuring=r.during;var ja={},Ja={};if(prepareTransformAllPropsFinal(n,r,Ja),prepareShapeOrExtraAllPropsFinal("shape",r,Ja),prepareShapeOrExtraAllPropsFinal("extra",r,Ja),!u&&p&&(prepareTransformTransitionFrom(n,r,ja),prepareShapeOrExtraTransitionFrom("shape",n,r,ja),prepareShapeOrExtraTransitionFrom("extra",n,r,ja),prepareStyleTransitionFrom(n,r,_,ja)),Ja.style=_,applyPropsDirectly(n,Ja,c),applyMiscProps(n,r),p)if(u){var ec={};each$f(ELEMENT_ANIMATABLE_PROPS,function(rc){var nc=rc?r[rc]:r;nc&&nc.enterFrom&&(rc&&(ec[rc]=ec[rc]||{}),extend$2(rc?ec[rc]:ec,nc.enterFrom))});var tc=getElementAnimationConfig("enter",n,r,a,o);tc.duration>0&&n.animateFrom(ec,tc)}else applyPropsTransition(n,r,o||0,a,ja);updateLeaveTo(n,r),_?n.dirty():n.markRedraw()}function updateLeaveTo(n,r){for(var a=transitionInnerStore(n).leaveToProps,s=0;s<ELEMENT_ANIMATABLE_PROPS.length;s++){var o=ELEMENT_ANIMATABLE_PROPS[s],u=o?r[o]:r;u&&u.leaveTo&&(a||(a=transitionInnerStore(n).leaveToProps={}),o&&(a[o]=a[o]||{}),extend$2(o?a[o]:a,u.leaveTo))}}function applyLeaveTransition(n,r,a,s){if(n){var o=n.parent,u=transitionInnerStore(n).leaveToProps;if(u){var c=getElementAnimationConfig("update",n,r,a,0);c.done=function(){o.remove(n)},n.animateTo(u,c)}else o.remove(n)}}function isTransitionAll(n){return n==="all"}function applyPropsDirectly(n,r,a){var s=r.style;if(!n.isGroup&&s){if(a){n.useStyle({});for(var o=n.animators,u=0;u<o.length;u++){var c=o[u];c.targetName==="style"&&c.changeTarget(n.style)}}n.setStyle(s)}r&&(r.style=null,r&&n.attr(r),r.style=s)}function applyPropsTransition(n,r,a,s,o){if(o){var u=getElementAnimationConfig("update",n,r,s,a);u.duration>0&&n.animateFrom(o,u)}}function applyMiscProps(n,r){hasOwn(r,"silent")&&(n.silent=r.silent),hasOwn(r,"ignore")&&(n.ignore=r.ignore),n instanceof Displayable$1&&hasOwn(r,"invisible")&&(n.invisible=r.invisible),n instanceof Path&&hasOwn(r,"autoBatch")&&(n.autoBatch=r.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(n,r){return tmpDuringScope.el[n]=r,this},getTransform:function(n){return tmpDuringScope.el[n]},setShape:function(n,r){var a=tmpDuringScope.el,s=a.shape||(a.shape={});return s[n]=r,a.dirtyShape&&a.dirtyShape(),this},getShape:function(n){var r=tmpDuringScope.el.shape;if(r)return r[n]},setStyle:function(n,r){var a=tmpDuringScope.el,s=a.style;return s&&(s[n]=r,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(n){var r=tmpDuringScope.el.style;if(r)return r[n]},setExtra:function(n,r){var a=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return a[n]=r,this},getExtra:function(n){var r=tmpDuringScope.el.extra;if(r)return r[n]}};function duringCall(){var n=this,r=n.el;if(r){var a=transitionInnerStore(r).userDuring,s=n.userDuring;if(a!==s){n.el=n.userDuring=null;return}tmpDuringScope.el=r,s(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(n,r,a,s){var o=a[n];if(o){var u=r[n],c;if(u){var p=a.transition,d=o.transition;if(d)if(!c&&(c=s[n]={}),isTransitionAll(d))extend$2(c,u);else for(var _=normalizeToArray(d),ja=0;ja<_.length;ja++){var Ja=_[ja],ec=u[Ja];c[Ja]=ec}else if(isTransitionAll(p)||indexOf(p,n)>=0){!c&&(c=s[n]={});for(var tc=keys(u),ja=0;ja<tc.length;ja++){var Ja=tc[ja],ec=u[Ja];isNonStyleTransitionEnabled(o[Ja],ec)&&(c[Ja]=ec)}}}}}function prepareShapeOrExtraAllPropsFinal(n,r,a){var s=r[n];if(s)for(var o=a[n]={},u=keys(s),c=0;c<u.length;c++){var p=u[c];o[p]=cloneValue(s[p])}}function prepareTransformTransitionFrom(n,r,a){for(var s=r.transition,o=isTransitionAll(s)?TRANSFORMABLE_PROPS:normalizeToArray(s||[]),u=0;u<o.length;u++){var c=o[u];if(!(c==="style"||c==="shape"||c==="extra")){var p=n[c];a[c]=p}}}function prepareTransformAllPropsFinal(n,r,a){for(var s=0;s<LEGACY_TRANSFORM_PROPS.length;s++){var o=LEGACY_TRANSFORM_PROPS[s],u=LEGACY_TRANSFORM_PROPS_MAP[o],c=r[o];c&&(a[u[0]]=c[0],a[u[1]]=c[1])}for(var s=0;s<TRANSFORMABLE_PROPS.length;s++){var p=TRANSFORMABLE_PROPS[s];r[p]!=null&&(a[p]=r[p])}}function prepareStyleTransitionFrom(n,r,a,s){if(a){var o=n.style,u;if(o){var c=a.transition,p=r.transition;if(c&&!isTransitionAll(c)){var d=normalizeToArray(c);!u&&(u=s.style={});for(var _=0;_<d.length;_++){var ja=d[_],Ja=o[ja];u[ja]=Ja}}else if(n.getAnimationStyleProps&&(isTransitionAll(p)||isTransitionAll(c)||indexOf(p,"style")>=0)){var ec=n.getAnimationStyleProps(),tc=ec?ec.style:null;if(tc){!u&&(u=s.style={});for(var rc=keys(a),_=0;_<rc.length;_++){var ja=rc[_];if(tc[ja]){var Ja=o[ja];u[ja]=Ja}}}}}}}function isNonStyleTransitionEnabled(n,r){return isArrayLike(n)?n!==r:n!=null&&isFinite(n)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(n){n.stopAnimation("keyframe"),n.attr(getStateToRestore(n))}function applyKeyframeAnimation(n,r,a){if(!(!a.isAnimationEnabled()||!r)){if(isArray$1(r)){each$f(r,function(p){applyKeyframeAnimation(n,p,a)});return}var s=r.keyframes,o=r.duration;if(a&&o==null){var u=getAnimationConfig("enter",a,0);o=u&&u.duration}if(!(!s||!o)){var c=getStateToRestore(n);each$f(ELEMENT_ANIMATABLE_PROPS,function(p){if(!(p&&!n[p])){var d;s.sort(function(_,ja){return _.percent-ja.percent}),each$f(s,function(_){var ja=n.animators,Ja=p?_[p]:_;if(Ja){var ec=keys(Ja);if(p||(ec=filter(ec,function(nc){return indexOf(KEYFRAME_EXCLUDE_KEYS,nc)<0})),!!ec.length){d||(d=n.animate(p,r.loop,!0),d.scope="keyframe");for(var tc=0;tc<ja.length;tc++)ja[tc]!==d&&ja[tc].targetName===d.targetName&&ja[tc].stopTracks(ec);p&&(c[p]=c[p]||{});var rc=p?c[p]:c;each$f(ec,function(nc){rc[nc]=((p?n[p]:n)||{})[nc]}),d.whenWithKeys(o*_.percent,Ja,ec,_.easing)}}}),d&&d.delay(r.delay||0).duration(o).start(r.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(n){return n instanceof Path}function isDisplayable(n){return n instanceof Displayable$1}function copyElement(n,r){r.copyTransform(n),isDisplayable(r)&&isDisplayable(n)&&(r.setStyle(n.style),r.z=n.z,r.z2=n.z2,r.zlevel=n.zlevel,r.invisible=n.invisible,r.ignore=n.ignore,isPath(r)&&isPath(n)&&r.setShape(n.shape))}var CustomChartView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o,u){this._progressiveEls=null;var c=this._data,p=a.getData(),d=this.group,_=makeRenderItem(a,p,s,o);c||d.removeAll(),p.diff(c).add(function(Ja){createOrUpdateItem(o,null,Ja,_(Ja,u),a,d,p)}).remove(function(Ja){var ec=c.getItemGraphicEl(Ja);ec&&applyLeaveTransition(ec,customInnerStore(ec).option,a)}).update(function(Ja,ec){var tc=c.getItemGraphicEl(ec);createOrUpdateItem(o,tc,Ja,_(Ja,u),a,d,p)}).execute();var ja=a.get("clip",!0)?createClipPath(a.coordinateSystem,!1,a):null;ja?d.setClipPath(ja):d.removeClipPath(),this._data=p},r.prototype.incrementalPrepareRender=function(a,s,o){this.group.removeAll(),this._data=null},r.prototype.incrementalRender=function(a,s,o,u,c){var p=s.getData(),d=makeRenderItem(s,p,o,u),_=this._progressiveEls=[];function ja(tc){tc.isGroup||(tc.incremental=!0,tc.ensureState("emphasis").hoverLayer=!0)}for(var Ja=a.start;Ja<a.end;Ja++){var ec=createOrUpdateItem(null,null,Ja,d(Ja,c),s,this.group,p);ec&&(ec.traverse(ja),_.push(ec))}},r.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},r.prototype.filterForExposedEvent=function(a,s,o,u){var c=s.element;if(c==null||o.name===c)return!0;for(;(o=o.__hostTarget||o.parent)&&o!==this.group;)if(o.name===c)return!0;return!1},r.type="custom",r}(ChartView);function createEl$1(n){var r=n.type,a;if(r==="path"){var s=n.shape,o=s.width!=null&&s.height!=null?{x:s.x||0,y:s.y||0,width:s.width,height:s.height}:null,u=getPathData(s);a=makePath$1(u,null,o,s.layout||"center"),customInnerStore(a).customPathData=u}else if(r==="image")a=new ZRImage({}),customInnerStore(a).customImagePath=n.style.image;else if(r==="text")a=new ZRText({});else if(r==="group")a=new Group$3;else{if(r==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var c=getShapeClass(r);if(!c){var p="";throwError(p)}a=new c}return customInnerStore(a).customGraphicType=r,a.name=n.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function updateElNormal(n,r,a,s,o,u,c){stopPreviousKeyframeAnimationAndRestore(r);var p=o&&o.normal.cfg;p&&r.setTextConfig(p),s&&s.transition==null&&(s.transition=DEFAULT_TRANSITION);var d=s&&s.style;if(d){if(r.type==="text"){var _=d;hasOwn(_,"textFill")&&(_.fill=_.textFill),hasOwn(_,"textStroke")&&(_.stroke=_.textStroke)}var ja=void 0,Ja=isPath(r)?d.decal:null;n&&Ja&&(Ja.dirty=!0,ja=createOrUpdatePatternFromDecal(Ja,n)),d.__decalPattern=ja}if(isDisplayable(r)&&d){var ja=d.__decalPattern;ja&&(d.decal=ja)}applyUpdateTransition(r,s,u,{dataIndex:a,isInit:c,clearStyle:!0}),applyKeyframeAnimation(r,s.keyframeAnimation,u)}function updateElOnState(n,r,a,s,o){var u=r.isGroup?null:r,c=o&&o[n].cfg;if(u){var p=u.ensureState(n);if(s===!1){var d=u.getState(n);d&&(d.style=null)}else p.style=s||null;c&&(p.textConfig=c),setDefaultStateProxy(u)}}function updateZ(n,r,a){if(!n.isGroup){var s=n,o=a.currentZ,u=a.currentZLevel;s.z=o,s.zlevel=u;var c=r.z2;c!=null&&(s.z2=c||0);for(var p=0;p<STATES.length;p++)updateZForEachState(s,r,STATES[p])}}function updateZForEachState(n,r,a){var s=a===NORMAL,o=s?r:retrieveStateOption(r,a),u=o?o.z2:null,c;u!=null&&(c=s?n:n.ensureState(a),c.z2=u||0)}function makeRenderItem(n,r,a,s){var o=n.get("renderItem"),u=n.coordinateSystem,c={};u&&(c=u.prepareCustoms?u.prepareCustoms(u):prepareCustoms[u.type](u));for(var p=defaults({getWidth:s.getWidth,getHeight:s.getHeight,getZr:s.getZr,getDevicePixelRatio:s.getDevicePixelRatio,value:ah,style:oh,ordinalRawValue:ih,styleEmphasis:uh,visual:dh,barLayout:gh,currentSeriesIndices:fh,font:vh},c.api||{}),d={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:c.coordSys,dataInsideLength:r.count(),encode:wrapEncodeDef(n.getData())},_,ja,Ja={},ec={},tc={},rc={},nc=0;nc<STATES.length;nc++){var ic=STATES[nc];tc[ic]=n.getModel(PATH_ITEM_STYLE[ic]),rc[ic]=n.getModel(PATH_LABEL[ic])}function uc(ph){return ph===_?ja||(ja=r.getItemModel(ph)):r.getItemModel(ph)}function eh(ph,yh){return r.hasItemOption?ph===_?Ja[yh]||(Ja[yh]=uc(ph).getModel(PATH_ITEM_STYLE[yh])):uc(ph).getModel(PATH_ITEM_STYLE[yh]):tc[yh]}function rh(ph,yh){return r.hasItemOption?ph===_?ec[yh]||(ec[yh]=uc(ph).getModel(PATH_LABEL[yh])):uc(ph).getModel(PATH_LABEL[yh]):rc[yh]}return function(ph,yh){return _=ph,ja=null,Ja={},ec={},o&&o(defaults({dataIndexInside:ph,dataIndex:r.getRawIndex(ph),actionType:yh?yh.type:null},d),p)};function ah(ph,yh){return yh==null&&(yh=_),r.getStore().get(r.getDimensionIndex(ph||0),yh)}function ih(ph,yh){yh==null&&(yh=_),ph=ph||0;var xh=r.getDimensionInfo(ph);if(!xh){var _h=r.getDimensionIndex(ph);return _h>=0?r.getStore().get(_h,yh):void 0}var bh=r.get(xh.name,yh),Dh=xh&&xh.ordinalMeta;return Dh?Dh.categories[bh]:bh}function oh(ph,yh){yh==null&&(yh=_);var xh=r.getItemVisual(yh,"style"),_h=xh&&xh.fill,bh=xh&&xh.opacity,Dh=eh(yh,NORMAL).getItemStyle();_h!=null&&(Dh.fill=_h),bh!=null&&(Dh.opacity=bh);var Th={inheritColor:isString(_h)?_h:"#000"},Ch=rh(yh,NORMAL),wh=createTextStyle(Ch,null,Th,!1,!0);wh.text=Ch.getShallow("show")?retrieve2(n.getFormattedLabel(yh,NORMAL),getDefaultLabel(r,yh)):null;var Nh=createTextConfig(Ch,Th,!1);return hh(ph,Dh),Dh=convertToEC4StyleForCustomSerise(Dh,wh,Nh),ph&&ch(Dh,ph),Dh.legacy=!0,Dh}function uh(ph,yh){yh==null&&(yh=_);var xh=eh(yh,EMPHASIS).getItemStyle(),_h=rh(yh,EMPHASIS),bh=createTextStyle(_h,null,null,!0,!0);bh.text=_h.getShallow("show")?retrieve3(n.getFormattedLabel(yh,EMPHASIS),n.getFormattedLabel(yh,NORMAL),getDefaultLabel(r,yh)):null;var Dh=createTextConfig(_h,null,!0);return hh(ph,xh),xh=convertToEC4StyleForCustomSerise(xh,bh,Dh),ph&&ch(xh,ph),xh.legacy=!0,xh}function ch(ph,yh){for(var xh in yh)hasOwn(yh,xh)&&(ph[xh]=yh[xh])}function hh(ph,yh){ph&&(ph.textFill&&(yh.textFill=ph.textFill),ph.textPosition&&(yh.textPosition=ph.textPosition))}function dh(ph,yh){if(yh==null&&(yh=_),hasOwn(STYLE_VISUAL_TYPE,ph)){var xh=r.getItemVisual(yh,"style");return xh?xh[STYLE_VISUAL_TYPE[ph]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,ph))return r.getItemVisual(yh,ph)}function gh(ph){if(u.type==="cartesian2d"){var yh=u.getBaseAxis();return getLayoutOnAxis(defaults({axis:yh},ph))}}function fh(){return a.getCurrentSeriesIndices()}function vh(ph){return getFont(ph,a)}}function wrapEncodeDef(n){var r={};return each$f(n.dimensions,function(a){var s=n.getDimensionInfo(a);if(!s.isExtraCoord){var o=s.coordDim,u=r[o]=r[o]||[];u[s.coordDimIndex]=n.getDimensionIndex(a)}}),r}function createOrUpdateItem(n,r,a,s,o,u,c){if(!s){u.remove(r);return}var p=doCreateOrUpdateEl(n,r,a,s,o,u);return p&&c.setItemGraphicEl(a,p),p&&toggleHoverEmphasis(p,s.focus,s.blurScope,s.emphasisDisabled),p}function doCreateOrUpdateEl(n,r,a,s,o,u){var c=-1,p=r;r&&doesElNeedRecreate(r,s,o)&&(c=indexOf(u.childrenRef(),r),r=null);var d=!r,_=r;_?_.clearStates():(_=createEl$1(s),p&&copyElement(p,_)),s.morph===!1?_.disableMorphing=!0:_.disableMorphing&&(_.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(_,a,s,o,d,attachedTxInfoTmp),doCreateOrUpdateClipPath(_,a,s,o,d),updateElNormal(n,_,a,s,attachedTxInfoTmp,o,d),hasOwn(s,"info")&&(customInnerStore(_).info=s.info);for(var ja=0;ja<STATES.length;ja++){var Ja=STATES[ja];if(Ja!==NORMAL){var ec=retrieveStateOption(s,Ja),tc=retrieveStyleOptionOnState(s,ec,Ja);updateElOnState(Ja,_,ec,tc,attachedTxInfoTmp)}}return updateZ(_,s,o),s.type==="group"&&mergeChildren(n,_,a,s,o),c>=0?u.replaceAt(_,c):u.add(_),_}function doesElNeedRecreate(n,r,a){var s=customInnerStore(n),o=r.type,u=r.shape,c=r.style;return a.isUniversalTransitionEnabled()||o!=null&&o!==s.customGraphicType||o==="path"&&hasOwnPathData(u)&&getPathData(u)!==s.customPathData||o==="image"&&hasOwn(c,"image")&&c.image!==s.customImagePath}function doCreateOrUpdateClipPath(n,r,a,s,o){var u=a.clipPath;if(u===!1)n&&n.getClipPath()&&n.removeClipPath();else if(u){var c=n.getClipPath();c&&doesElNeedRecreate(c,u,s)&&(c=null),c||(c=createEl$1(u),n.setClipPath(c)),updateElNormal(null,c,r,u,null,s,o)}}function doCreateOrUpdateAttachedTx(n,r,a,s,o,u){if(!n.isGroup){processTxInfo(a,null,u),processTxInfo(a,EMPHASIS,u);var c=u.normal.conOpt,p=u.emphasis.conOpt,d=u.blur.conOpt,_=u.select.conOpt;if(c!=null||p!=null||_!=null||d!=null){var ja=n.getTextContent();if(c===!1)ja&&n.removeTextContent();else{c=u.normal.conOpt=c||{type:"text"},ja?ja.clearStates():(ja=createEl$1(c),n.setTextContent(ja)),updateElNormal(null,ja,r,c,null,s,o);for(var Ja=c&&c.style,ec=0;ec<STATES.length;ec++){var tc=STATES[ec];if(tc!==NORMAL){var rc=u[tc].conOpt;updateElOnState(tc,ja,rc,retrieveStyleOptionOnState(c,rc,tc),null)}}Ja?ja.dirty():ja.markRedraw()}}}}function processTxInfo(n,r,a){var s=r?retrieveStateOption(n,r):n,o=r?retrieveStyleOptionOnState(n,s,EMPHASIS):n.style,u=n.type,c=s?s.textConfig:null,p=n.textContent,d=p?r?retrieveStateOption(p,r):p:null;if(o&&(a.isLegacy||isEC4CompatibleStyle(o,u,!!c,!!d))){a.isLegacy=!0;var _=convertFromEC4CompatibleStyle(o,u,!r);!c&&_.textConfig&&(c=_.textConfig),!d&&_.textContent&&(d=_.textContent)}if(!r&&d){var ja=d;!ja.type&&(ja.type="text")}var Ja=r?a[r]:a.normal;Ja.cfg=c,Ja.conOpt=d}function retrieveStateOption(n,r){return r?n?n[r]:null:n}function retrieveStyleOptionOnState(n,r,a){var s=r&&r.style;return s==null&&a===EMPHASIS&&n&&(s=n.styleEmphasis),s}function mergeChildren(n,r,a,s,o){var u=s.children,c=u?u.length:0,p=s.$mergeChildren,d=p==="byName"||s.diffChildrenByName,_=p===!1;if(!(!c&&!d&&!_)){if(d){diffGroupChildren({api:n,oldChildren:r.children()||[],newChildren:u||[],dataIndex:a,seriesModel:o,group:r});return}_&&r.removeAll();for(var ja=0;ja<c;ja++){var Ja=u[ja],ec=r.childAt(ja);Ja?(Ja.ignore==null&&(Ja.ignore=!1),doCreateOrUpdateEl(n,ec,a,Ja,o,r)):ec.ignore=!0}for(var tc=r.childCount()-1;tc>=ja;tc--){var rc=r.childAt(tc);removeChildFromGroup(r,rc,o)}}}function removeChildFromGroup(n,r,a){r&&applyLeaveTransition(r,customInnerStore(n).option,a)}function diffGroupChildren(n){new DataDiffer(n.oldChildren,n.newChildren,getKey,getKey,n).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(n,r){var a=n&&n.name;return a??GROUP_DIFF_PREFIX+r}function processAddUpdate(n,r){var a=this.context,s=n!=null?a.newChildren[n]:null,o=r!=null?a.oldChildren[r]:null;doCreateOrUpdateEl(a.api,o,a.dataIndex,s,a.seriesModel,a.group)}function processRemove(n){var r=this.context,a=r.oldChildren[n];a&&applyLeaveTransition(a,customInnerStore(a).option,r.seriesModel)}function getPathData(n){return n&&(n.pathData||n.d)}function hasOwnPathData(n){return n&&(hasOwn(n,"pathData")||hasOwn(n,"d"))}function install$H(n){n.registerChartView(CustomChartView),n.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(r,a,s,o){var u=a.get("value"),c=a.get("status");if(this._axisModel=r,this._axisPointerModel=a,this._api=s,!(!o&&this._lastValue===u&&this._lastStatus===c)){this._lastValue=u,this._lastStatus=c;var p=this._group,d=this._handle;if(!c||c==="hide"){p&&p.hide(),d&&d.hide();return}p&&p.show(),d&&d.show();var _={};this.makeElOption(_,u,r,a,s);var ja=_.graphicKey;ja!==this._lastGraphicKey&&this.clear(s),this._lastGraphicKey=ja;var Ja=this._moveAnimation=this.determineAnimation(r,a);if(!p)p=this._group=new Group$3,this.createPointerEl(p,_,r,a),this.createLabelEl(p,_,r,a),s.getZr().add(p);else{var ec=curry$1(updateProps,a,Ja);this.updatePointerEl(p,_,ec),this.updateLabelEl(p,_,ec,a)}updateMandatoryProps(p,a,!0),this._renderHandle(u)}},n.prototype.remove=function(r){this.clear(r)},n.prototype.dispose=function(r){this.clear(r)},n.prototype.determineAnimation=function(r,a){var s=a.get("animation"),o=r.axis,u=o.type==="category",c=a.get("snap");if(!c&&!u)return!1;if(s==="auto"||s==null){var p=this.animationThreshold;if(u&&o.getBandWidth()>p)return!0;if(c){var d=getAxisInfo$1(r).seriesDataCount,_=o.getExtent();return Math.abs(_[0]-_[1])/d>p}return!1}return s===!0},n.prototype.makeElOption=function(r,a,s,o,u){},n.prototype.createPointerEl=function(r,a,s,o){var u=a.pointer;if(u){var c=inner$b(r).pointerEl=new graphic[u.type](clone$1(a.pointer));r.add(c)}},n.prototype.createLabelEl=function(r,a,s,o){if(a.label){var u=inner$b(r).labelEl=new ZRText(clone$1(a.label));r.add(u),updateLabelShowHide(u,o)}},n.prototype.updatePointerEl=function(r,a,s){var o=inner$b(r).pointerEl;o&&a.pointer&&(o.setStyle(a.pointer.style),s(o,{shape:a.pointer.shape}))},n.prototype.updateLabelEl=function(r,a,s,o){var u=inner$b(r).labelEl;u&&(u.setStyle(a.label.style),s(u,{x:a.label.x,y:a.label.y}),updateLabelShowHide(u,o))},n.prototype._renderHandle=function(r){if(!(this._dragging||!this.updateHandleTransform)){var a=this._axisPointerModel,s=this._api.getZr(),o=this._handle,u=a.getModel("handle"),c=a.get("status");if(!u.get("show")||!c||c==="hide"){o&&s.remove(o),this._handle=null;return}var p;this._handle||(p=!0,o=this._handle=createIcon(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(_){stop(_.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),s.add(o)),updateMandatoryProps(o,a,!1),o.setStyle(u.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var d=u.get("size");isArray$1(d)||(d=[d,d]),o.scaleX=d[0]/2,o.scaleY=d[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate"),this._moveHandleToValue(r,p)}},n.prototype._moveHandleToValue=function(r,a){updateProps(this._axisPointerModel,!a&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(r,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(r,a){var s=this._handle;if(s){this._dragging=!0;var o=this.updateHandleTransform(getHandleTransProps(s),[r,a],this._axisModel,this._axisPointerModel);this._payloadInfo=o,s.stopAnimation(),s.attr(getHandleTransProps(o)),inner$b(s).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var r=this._handle;if(r){var a=this._payloadInfo,s=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:s.axis.dim,axisIndex:s.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var r=this._handle;if(r){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(r){this._lastValue=null,this._lastStatus=null;var a=r.getZr(),s=this._group,o=this._handle;a&&s&&(this._lastGraphicKey=null,s&&a.remove(s),o&&a.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(r,a,s){return s=s||0,{x:r[s],y:r[1-s],width:a[s],height:a[1-s]}},n}();function updateProps(n,r,a,s){propsEqual(inner$b(a).lastProp,s)||(inner$b(a).lastProp=s,r?updateProps$1(a,s,n):(a.stopAnimation(),a.attr(s)))}function propsEqual(n,r){if(isObject$3(n)&&isObject$3(r)){var a=!0;return each$f(r,function(s,o){a=a&&propsEqual(n[o],s)}),!!a}else return n===r}function updateLabelShowHide(n,r){n[r.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function updateMandatoryProps(n,r,a){var s=r.get("z"),o=r.get("zlevel");n&&n.traverse(function(u){u.type!=="group"&&(s!=null&&(u.z=s),o!=null&&(u.zlevel=o),u.silent=a)})}function buildElStyle(n){var r=n.get("type"),a=n.getModel(r+"Style"),s;return r==="line"?(s=a.getLineStyle(),s.fill=null):r==="shadow"&&(s=a.getAreaStyle(),s.stroke=null),s}function buildLabelElOption(n,r,a,s,o){var u=a.get("value"),c=getValueLabel(u,r.axis,r.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),p=a.getModel("label"),d=normalizeCssArray(p.get("padding")||0),_=p.getFont(),ja=getBoundingRect(c,_),Ja=o.position,ec=ja.width+d[1]+d[3],tc=ja.height+d[0]+d[2],rc=o.align;rc==="right"&&(Ja[0]-=ec),rc==="center"&&(Ja[0]-=ec/2);var nc=o.verticalAlign;nc==="bottom"&&(Ja[1]-=tc),nc==="middle"&&(Ja[1]-=tc/2),confineInContainer(Ja,ec,tc,s);var ic=p.get("backgroundColor");(!ic||ic==="auto")&&(ic=r.get(["axisLine","lineStyle","color"])),n.label={x:Ja[0],y:Ja[1],style:createTextStyle(p,{text:c,font:_,fill:p.getTextColor(),padding:d,backgroundColor:ic}),z2:10}}function confineInContainer(n,r,a,s){var o=s.getWidth(),u=s.getHeight();n[0]=Math.min(n[0]+r,o)-r,n[1]=Math.min(n[1]+a,u)-a,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function getValueLabel(n,r,a,s,o){n=r.scale.parse(n);var u=r.scale.getLabel({value:n},{precision:o.precision}),c=o.formatter;if(c){var p={value:getAxisRawValue(r,{value:n}),axisDimension:r.dim,axisIndex:r.index,seriesData:[]};each$f(s,function(d){var _=a.getSeriesByIndex(d.seriesIndex),ja=d.dataIndexInside,Ja=_&&_.getDataParams(ja);Ja&&p.seriesData.push(Ja)}),isString(c)?u=c.replace("{value}",u):isFunction(c)&&(u=c(p))}return u}function getTransformedPosition(n,r,a){var s=create$2();return rotate(s,s,a.rotation),translate(s,s,a.position),applyTransform([n.dataToCoord(r),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],s)}function buildCartesianSingleLabelElOption(n,r,a,s,o,u){var c=AxisBuilder.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=o.get(["label","margin"]),buildLabelElOption(r,s,o,u,{position:getTransformedPosition(s.axis,n,a),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(n,r,a){return a=a||0,{x1:n[a],y1:n[1-a],x2:r[a],y2:r[1-a]}}function makeRectShape(n,r,a){return a=a||0,{x:n[a],y:n[1-a],width:r[a],height:r[1-a]}}function makeSectorShape(n,r,a,s,o,u){return{cx:n,cy:r,r0:a,r:s,startAngle:o,endAngle:u,clockwise:!0}}var CartesianAxisPointer=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.makeElOption=function(a,s,o,u,c){var p=o.axis,d=p.grid,_=u.get("type"),ja=getCartesian(d,p).getOtherAxis(p).getGlobalExtent(),Ja=p.toGlobalCoord(p.dataToCoord(s,!0));if(_&&_!=="none"){var ec=buildElStyle(u),tc=pointerShapeBuilder$2[_](p,Ja,ja);tc.style=ec,a.graphicKey=tc.type,a.pointer=tc}var rc=layout$2(d.model,o);buildCartesianSingleLabelElOption(s,a,rc,o,u,c)},r.prototype.getHandleTransform=function(a,s,o){var u=layout$2(s.axis.grid.model,s,{labelInside:!1});u.labelMargin=o.get(["handle","margin"]);var c=getTransformedPosition(s.axis,a,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(a,s,o,u){var c=o.axis,p=c.grid,d=c.getGlobalExtent(!0),_=getCartesian(p,c).getOtherAxis(c).getGlobalExtent(),ja=c.dim==="x"?0:1,Ja=[a.x,a.y];Ja[ja]+=s[ja],Ja[ja]=Math.min(d[1],Ja[ja]),Ja[ja]=Math.max(d[0],Ja[ja]);var ec=(_[1]+_[0])/2,tc=[ec,ec];tc[ja]=Ja[ja];var rc=[{verticalAlign:"middle"},{align:"center"}];return{x:Ja[0],y:Ja[1],rotation:a.rotation,cursorPoint:tc,tooltipOption:rc[ja]}},r}(BaseAxisPointer);function getCartesian(n,r){var a={};return a[r.dim+"AxisIndex"]=r.index,n.getCartesian(a)}var pointerShapeBuilder$2={line:function(n,r,a){var s=makeLineShape([r,a[0]],[r,a[1]],getAxisDimIndex(n));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(n,r,a){var s=Math.max(1,n.getBandWidth()),o=a[1]-a[0];return{type:"Rect",shape:makeRectShape([r-s/2,a[0]],[s,o],getAxisDimIndex(n))}}};function getAxisDimIndex(n){return n.dim==="x"?0:1}var AxisPointerModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="axisPointer",r.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},r}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register$1(n,r,a){if(!env.node){var s=r.getZr();inner$a(s).records||(inner$a(s).records={}),initGlobalListeners(s,r);var o=inner$a(s).records[n]||(inner$a(s).records[n]={});o.handler=a}}function initGlobalListeners(n,r){if(inner$a(n).initialized)return;inner$a(n).initialized=!0,a("click",curry$1(doEnter,"click")),a("mousemove",curry$1(doEnter,"mousemove")),a("globalout",onLeave);function a(s,o){n.on(s,function(u){var c=makeDispatchAction$1(r);each$8(inner$a(n).records,function(p){p&&o(p,u,c.dispatchAction)}),dispatchTooltipFinally(c.pendings,r)})}}function dispatchTooltipFinally(n,r){var a=n.showTip.length,s=n.hideTip.length,o;a?o=n.showTip[a-1]:s&&(o=n.hideTip[s-1]),o&&(o.dispatchAction=null,r.dispatchAction(o))}function onLeave(n,r,a){n.handler("leave",null,a)}function doEnter(n,r,a,s){r.handler(n,a,s)}function makeDispatchAction$1(n){var r={showTip:[],hideTip:[]},a=function(s){var o=r[s.type];o?o.push(s):(s.dispatchAction=a,n.dispatchAction(s))};return{dispatchAction:a,pendings:r}}function unregister(n,r){if(!env.node){var a=r.getZr(),s=(inner$a(a).records||{})[n];s&&(inner$a(a).records[n]=null)}}var AxisPointerView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u=s.getComponent("tooltip"),c=a.get("triggerOn")||u&&u.get("triggerOn")||"mousemove|click";register$1("axisPointer",o,function(p,d,_){c!=="none"&&(p==="leave"||c.indexOf(p)>=0)&&_({type:"updateAxisPointer",currTrigger:p,x:d&&d.offsetX,y:d&&d.offsetY})})},r.prototype.remove=function(a,s){unregister("axisPointer",s)},r.prototype.dispose=function(a,s){unregister("axisPointer",s)},r.type="axisPointer",r}(ComponentView);function findPointFromSeries(n,r){var a=[],s=n.seriesIndex,o;if(s==null||!(o=r.getSeriesByIndex(s)))return{point:[]};var u=o.getData(),c=queryDataIndex(u,n);if(c==null||c<0||isArray$1(c))return{point:[]};var p=u.getItemGraphicEl(c),d=o.coordinateSystem;if(o.getTooltipPosition)a=o.getTooltipPosition(c)||[];else if(d&&d.dataToPoint)if(n.isStacked){var _=d.getBaseAxis(),ja=d.getOtherAxis(_),Ja=ja.dim,ec=_.dim,tc=Ja==="x"||Ja==="radius"?1:0,rc=u.mapDimension(ec),nc=[];nc[tc]=u.get(rc,c),nc[1-tc]=u.get(u.getCalculationInfo("stackResultDimension"),c),a=d.dataToPoint(nc)||[]}else a=d.dataToPoint(u.getValues(map$1(d.dimensions,function(uc){return u.mapDimension(uc)}),c))||[];else if(p){var ic=p.getBoundingRect().clone();ic.applyTransform(p.transform),a=[ic.x+ic.width/2,ic.y+ic.height/2]}return{point:a,el:p}}var inner$9=makeInner();function axisTrigger(n,r,a){var s=n.currTrigger,o=[n.x,n.y],u=n,c=n.dispatchAction||bind$1(a.dispatchAction,a),p=r.getComponent("axisPointer").coordSysAxesInfo;if(p){illegalPoint(o)&&(o=findPointFromSeries({seriesIndex:u.seriesIndex,dataIndex:u.dataIndex},r).point);var d=illegalPoint(o),_=u.axesInfo,ja=p.axesInfo,Ja=s==="leave"||illegalPoint(o),ec={},tc={},rc={list:[],map:{}},nc={showPointer:curry$1(showPointer,tc),showTooltip:curry$1(showTooltip,rc)};each$f(p.coordSysMap,function(uc,eh){var rh=d||uc.containPoint(o);each$f(p.coordSysAxesInfo[eh],function(ah,ih){var oh=ah.axis,uh=findInputAxisInfo(_,ah);if(!Ja&&rh&&(!_||uh)){var ch=uh&&uh.value;ch==null&&!d&&(ch=oh.pointToData(o)),ch!=null&&processOnAxis(ah,ch,nc,!1,ec)}})});var ic={};return each$f(ja,function(uc,eh){var rh=uc.linkGroup;rh&&!tc[eh]&&each$f(rh.axesInfo,function(ah,ih){var oh=tc[ih];if(ah!==uc&&oh){var uh=oh.value;rh.mapper&&(uh=uc.axis.scale.parse(rh.mapper(uh,makeMapperParam(ah),makeMapperParam(uc)))),ic[uc.key]=uh}})}),each$f(ic,function(uc,eh){processOnAxis(ja[eh],uc,nc,!0,ec)}),updateModelActually(tc,ja,ec),dispatchTooltipActually(rc,o,n,c),dispatchHighDownActually(ja,c,a),ec}}function processOnAxis(n,r,a,s,o){var u=n.axis;if(!(u.scale.isBlank()||!u.containData(r))){if(!n.involveSeries){a.showPointer(n,r);return}var c=buildPayloadsBySeries(r,n),p=c.payloadBatch,d=c.snapToValue;p[0]&&o.seriesIndex==null&&extend$2(o,p[0]),!s&&n.snap&&u.containData(d)&&d!=null&&(r=d),a.showPointer(n,r,p),a.showTooltip(n,c,d)}}function buildPayloadsBySeries(n,r){var a=r.axis,s=a.dim,o=n,u=[],c=Number.MAX_VALUE,p=-1;return each$f(r.seriesModels,function(d,_){var ja=d.getData().mapDimensionsAll(s),Ja,ec;if(d.getAxisTooltipData){var tc=d.getAxisTooltipData(ja,n,a);ec=tc.dataIndices,Ja=tc.nestestValue}else{if(ec=d.getData().indicesOfNearest(ja[0],n,a.type==="category"?.5:null),!ec.length)return;Ja=d.getData().get(ja[0],ec[0])}if(!(Ja==null||!isFinite(Ja))){var rc=n-Ja,nc=Math.abs(rc);nc<=c&&((nc<c||rc>=0&&p<0)&&(c=nc,p=rc,o=Ja,u.length=0),each$f(ec,function(ic){u.push({seriesIndex:d.seriesIndex,dataIndexInside:ic,dataIndex:d.getData().getRawIndex(ic)})}))}}),{payloadBatch:u,snapToValue:o}}function showPointer(n,r,a,s){n[r.key]={value:a,payloadBatch:s}}function showTooltip(n,r,a,s){var o=a.payloadBatch,u=r.axis,c=u.model,p=r.axisPointerModel;if(!(!r.triggerTooltip||!o.length)){var d=r.coordSys.model,_=makeKey(d),ja=n.map[_];ja||(ja=n.map[_]={coordSysId:d.id,coordSysIndex:d.componentIndex,coordSysType:d.type,coordSysMainType:d.mainType,dataByAxis:[]},n.list.push(ja)),ja.dataByAxis.push({axisDim:u.dim,axisIndex:c.componentIndex,axisType:c.type,axisId:c.id,value:s,valueLabelOpt:{precision:p.get(["label","precision"]),formatter:p.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function updateModelActually(n,r,a){var s=a.axesInfo=[];each$f(r,function(o,u){var c=o.axisPointerModel.option,p=n[u];p?(!o.useHandle&&(c.status="show"),c.value=p.value,c.seriesDataIndices=(p.payloadBatch||[]).slice()):!o.useHandle&&(c.status="hide"),c.status==="show"&&s.push({axisDim:o.axis.dim,axisIndex:o.axis.model.componentIndex,value:c.value})})}function dispatchTooltipActually(n,r,a,s){if(illegalPoint(r)||!n.list.length){s({type:"hideTip"});return}var o=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};s({type:"showTip",escapeConnect:!0,x:r[0],y:r[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:n.list})}function dispatchHighDownActually(n,r,a){var s=a.getZr(),o="axisPointerLastHighlights",u=inner$9(s)[o]||{},c=inner$9(s)[o]={};each$f(n,function(_,ja){var Ja=_.axisPointerModel.option;Ja.status==="show"&&_.triggerEmphasis&&each$f(Ja.seriesDataIndices,function(ec){var tc=ec.seriesIndex+" | "+ec.dataIndex;c[tc]=ec})});var p=[],d=[];each$f(u,function(_,ja){!c[ja]&&d.push(_)}),each$f(c,function(_,ja){!u[ja]&&p.push(_)}),d.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:d}),p.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:p})}function findInputAxisInfo(n,r){for(var a=0;a<(n||[]).length;a++){var s=n[a];if(r.axis.dim===s.axisDim&&r.axis.model.componentIndex===s.axisIndex)return s}}function makeMapperParam(n){var r=n.axis.model,a={},s=a.axisDim=n.axis.dim;return a.axisIndex=a[s+"AxisIndex"]=r.componentIndex,a.axisName=a[s+"AxisName"]=r.name,a.axisId=a[s+"AxisId"]=r.id,a}function illegalPoint(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function install$G(n){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),n.registerComponentModel(AxisPointerModel),n.registerComponentView(AxisPointerView),n.registerPreprocessor(function(r){if(r){(!r.axisPointer||r.axisPointer.length===0)&&(r.axisPointer={});var a=r.axisPointer.link;a&&!isArray$1(a)&&(r.axisPointer.link=[a])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(r,a){r.getComponent("axisPointer").coordSysAxesInfo=collect(r,a)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$F(n){use(install$11),use(install$G)}var PolarAxisPointer=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.makeElOption=function(a,s,o,u,c){var p=o.axis;p.dim==="angle"&&(this.animationThreshold=Math.PI/18);var d=p.polar,_=d.getOtherAxis(p),ja=_.getExtent(),Ja=p.dataToCoord(s),ec=u.get("type");if(ec&&ec!=="none"){var tc=buildElStyle(u),rc=pointerShapeBuilder$1[ec](p,d,Ja,ja);rc.style=tc,a.graphicKey=rc.type,a.pointer=rc}var nc=u.get(["label","margin"]),ic=getLabelPosition(s,o,u,d,nc);buildLabelElOption(a,o,u,c,ic)},r}(BaseAxisPointer);function getLabelPosition(n,r,a,s,o){var u=r.axis,c=u.dataToCoord(n),p=s.getAngleAxis().getExtent()[0];p=p/180*Math.PI;var d=s.getRadiusAxis().getExtent(),_,ja,Ja;if(u.dim==="radius"){var ec=create$2();rotate(ec,ec,p),translate(ec,ec,[s.cx,s.cy]),_=applyTransform([c,-o],ec);var tc=r.getModel("axisLabel").get("rotate")||0,rc=AxisBuilder.innerTextLayout(p,tc*Math.PI/180,-1);ja=rc.textAlign,Ja=rc.textVerticalAlign}else{var nc=d[1];_=s.coordToPoint([nc+o,c]);var ic=s.cx,uc=s.cy;ja=Math.abs(_[0]-ic)/nc<.3?"center":_[0]>ic?"left":"right",Ja=Math.abs(_[1]-uc)/nc<.3?"middle":_[1]>uc?"top":"bottom"}return{position:_,align:ja,verticalAlign:Ja}}var pointerShapeBuilder$1={line:function(n,r,a,s){return n.dim==="angle"?{type:"Line",shape:makeLineShape(r.coordToPoint([s[0],a]),r.coordToPoint([s[1],a]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:a}}},shadow:function(n,r,a,s){var o=Math.max(1,n.getBandWidth()),u=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:makeSectorShape(r.cx,r.cy,s[0],s[1],(-a-o/2)*u,(-a+o/2)*u)}:{type:"Sector",shape:makeSectorShape(r.cx,r.cy,a-o/2,a+o/2,0,Math.PI*2)}}},PolarModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.findAxisModel=function(a){var s,o=this.ecModel;return o.eachComponent(a,function(u){u.getCoordSysModel()===this&&(s=u)},this),s},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={z:0,center:["50%","50%"],radius:"80%"},r}(ComponentModel),PolarAxisModel=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},r.type="polarAxis",r}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="angleAxis",r}(PolarAxisModel),RadiusAxisModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="radiusAxis",r}(PolarAxisModel),RadiusAxis=function(n){__extends(r,n);function r(a,s){return n.call(this,"radius",a,s)||this}return r.prototype.pointToData=function(a,s){return this.polar.pointToData(a,s)[this.dim==="radius"?0:1]},r}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(n){__extends(r,n);function r(a,s){return n.call(this,"angle",a,s||[0,360])||this}return r.prototype.pointToData=function(a,s){return this.polar.pointToData(a,s)[this.dim==="radius"?0:1]},r.prototype.calculateCategoryInterval=function(){var a=this,s=a.getLabelModel(),o=a.scale,u=o.getExtent(),c=o.count();if(u[1]-u[0]<1)return 0;var p=u[0],d=a.dataToCoord(p+1)-a.dataToCoord(p),_=Math.abs(d),ja=getBoundingRect(p==null?"":p+"",s.getFont(),"center","top"),Ja=Math.max(ja.height,7),ec=Ja/_;isNaN(ec)&&(ec=1/0);var tc=Math.max(0,Math.floor(ec)),rc=inner$8(a.model),nc=rc.lastAutoInterval,ic=rc.lastTickCount;return nc!=null&&ic!=null&&Math.abs(nc-tc)<=1&&Math.abs(ic-c)<=1&&nc>tc?tc=nc:(rc.lastTickCount=c,rc.lastAutoInterval=tc),tc},r}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function n(r){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=r||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(r){var a=this.pointToCoord(r);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},n.prototype.containData=function(r){return this._radiusAxis.containData(r[0])&&this._angleAxis.containData(r[1])},n.prototype.getAxis=function(r){var a="_"+r+"Axis";return this[a]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(r){var a=[],s=this._angleAxis,o=this._radiusAxis;return s.scale.type===r&&a.push(s),o.scale.type===r&&a.push(o),a},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(r){var a=this._angleAxis;return r===a?this._radiusAxis:a},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(r){var a=r!=null&&r!=="auto"?this.getAxis(r):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},n.prototype.dataToPoint=function(r,a){return this.coordToPoint([this._radiusAxis.dataToRadius(r[0],a),this._angleAxis.dataToAngle(r[1],a)])},n.prototype.pointToData=function(r,a){var s=this.pointToCoord(r);return[this._radiusAxis.radiusToData(s[0],a),this._angleAxis.angleToData(s[1],a)]},n.prototype.pointToCoord=function(r){var a=r[0]-this.cx,s=r[1]-this.cy,o=this.getAngleAxis(),u=o.getExtent(),c=Math.min(u[0],u[1]),p=Math.max(u[0],u[1]);o.inverse?c=p-360:p=c+360;var d=Math.sqrt(a*a+s*s);a/=d,s/=d;for(var _=Math.atan2(-s,a)/Math.PI*180,ja=_<c?1:-1;_<c||_>p;)_+=ja*360;return[d,_]},n.prototype.coordToPoint=function(r){var a=r[0],s=r[1]/180*Math.PI,o=Math.cos(s)*a+this.cx,u=-Math.sin(s)*a+this.cy;return[o,u]},n.prototype.getArea=function(){var r=this.getAngleAxis(),a=this.getRadiusAxis(),s=a.getExtent().slice();s[0]>s[1]&&s.reverse();var o=r.getExtent(),u=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:s[0],r:s[1],startAngle:-o[0]*u,endAngle:-o[1]*u,clockwise:r.inverse,contain:function(c,p){var d=c-this.cx,_=p-this.cy,ja=d*d+_*_-1e-4,Ja=this.r,ec=this.r0;return ja<=Ja*Ja&&ja>=ec*ec}}},n.prototype.convertToPixel=function(r,a,s){var o=getCoordSys$2(a);return o===this?this.dataToPoint(s):null},n.prototype.convertFromPixel=function(r,a,s){var o=getCoordSys$2(a);return o===this?this.pointToData(s):null},n}();function getCoordSys$2(n){var r=n.seriesModel,a=n.polarModel;return a&&a.coordinateSystem||r&&r.coordinateSystem}const Polar$1=Polar;function resizePolar(n,r,a){var s=r.get("center"),o=a.getWidth(),u=a.getHeight();n.cx=parsePercent(s[0],o),n.cy=parsePercent(s[1],u);var c=n.getRadiusAxis(),p=Math.min(o,u)/2,d=r.get("radius");d==null?d=[0,"100%"]:isArray$1(d)||(d=[0,d]);var _=[parsePercent(d[0],p),parsePercent(d[1],p)];c.inverse?c.setExtent(_[1],_[0]):c.setExtent(_[0],_[1])}function updatePolarScale(n,r){var a=this,s=a.getAngleAxis(),o=a.getRadiusAxis();if(s.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),n.eachSeries(function(p){if(p.coordinateSystem===a){var d=p.getData();each$f(getDataDimensionsOnAxis(d,"radius"),function(_){o.scale.unionExtentFromData(d,_)}),each$f(getDataDimensionsOnAxis(d,"angle"),function(_){s.scale.unionExtentFromData(d,_)})}}),niceScaleExtent(s.scale,s.model),niceScaleExtent(o.scale,o.model),s.type==="category"&&!s.onBand){var u=s.getExtent(),c=360/s.scale.count();s.inverse?u[1]+=c:u[1]-=c,s.setExtent(u[0],u[1])}}function isAngleAxisModel(n){return n.mainType==="angleAxis"}function setAxis(n,r){var a;if(n.type=r.get("type"),n.scale=createScaleByModel$1(r),n.onBand=r.get("boundaryGap")&&n.type==="category",n.inverse=r.get("inverse"),isAngleAxisModel(r)){n.inverse=n.inverse!==r.get("clockwise");var s=r.get("startAngle"),o=(a=r.get("endAngle"))!==null&&a!==void 0?a:s+(n.inverse?-360:360);n.setExtent(s,o)}r.axis=n,n.model=r}var polarCreator={dimensions:polarDimensions,create:function(n,r){var a=[];return n.eachComponent("polar",function(s,o){var u=new Polar$1(o+"");u.update=updatePolarScale;var c=u.getRadiusAxis(),p=u.getAngleAxis(),d=s.findAxisModel("radiusAxis"),_=s.findAxisModel("angleAxis");setAxis(c,d),setAxis(p,_),resizePolar(u,s,r),a.push(u),s.coordinateSystem=u,u.model=s}),n.eachSeries(function(s){if(s.get("coordinateSystem")==="polar"){var o=s.getReferringComponents("polar",SINGLE_REFERRING).models[0];s.coordinateSystem=o.coordinateSystem}}),a}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(n,r,a){r[1]>r[0]&&(r=r.slice().reverse());var s=n.coordToPoint([r[0],a]),o=n.coordToPoint([r[1],a]);return{x1:s[0],y1:s[1],x2:o[0],y2:o[1]}}function getRadiusIdx(n){var r=n.getRadiusAxis();return r.inverse?0:1}function fixAngleOverlap(n){var r=n[0],a=n[n.length-1];r&&a&&Math.abs(Math.abs(r.coord-a.coord)-360)<1e-4&&n.pop()}var AngleAxisView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.axisPointerClass="PolarAxisPointer",a}return r.prototype.render=function(a,s){if(this.group.removeAll(),!!a.get("show")){var o=a.axis,u=o.polar,c=u.getRadiusAxis().getExtent(),p=o.getTicksCoords(),d=o.getMinorTicksCoords(),_=map$1(o.getViewLabels(),function(ja){ja=clone$4(ja);var Ja=o.scale,ec=Ja.type==="ordinal"?Ja.getRawOrdinalNumber(ja.tickValue):ja.tickValue;return ja.coord=o.dataToCoord(ec),ja});fixAngleOverlap(_),fixAngleOverlap(p),each$f(elementList,function(ja){a.get([ja,"show"])&&(!o.scale.isBlank()||ja==="axisLine")&&angelAxisElementsBuilders[ja](this.group,a,u,p,d,c,_)},this)}},r.type="angleAxis",r}(AxisView),angelAxisElementsBuilders={axisLine:function(n,r,a,s,o,u){var c=r.getModel(["axisLine","lineStyle"]),p=a.getAngleAxis(),d=Math.PI/180,_=p.getExtent(),ja=getRadiusIdx(a),Ja=ja?0:1,ec,tc=Math.abs(_[1]-_[0])===360?"Circle":"Arc";u[Ja]===0?ec=new graphic[tc]({shape:{cx:a.cx,cy:a.cy,r:u[ja],startAngle:-_[0]*d,endAngle:-_[1]*d,clockwise:p.inverse},style:c.getLineStyle(),z2:1,silent:!0}):ec=new Ring$1({shape:{cx:a.cx,cy:a.cy,r:u[ja],r0:u[Ja]},style:c.getLineStyle(),z2:1,silent:!0}),ec.style.fill=null,n.add(ec)},axisTick:function(n,r,a,s,o,u){var c=r.getModel("axisTick"),p=(c.get("inside")?-1:1)*c.get("length"),d=u[getRadiusIdx(a)],_=map$1(s,function(ja){return new Line$2({shape:getAxisLineShape(a,[d,d+p],ja.coord)})});n.add(mergePath(_,{style:defaults(c.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,r,a,s,o,u){if(o.length){for(var c=r.getModel("axisTick"),p=r.getModel("minorTick"),d=(c.get("inside")?-1:1)*p.get("length"),_=u[getRadiusIdx(a)],ja=[],Ja=0;Ja<o.length;Ja++)for(var ec=0;ec<o[Ja].length;ec++)ja.push(new Line$2({shape:getAxisLineShape(a,[_,_+d],o[Ja][ec].coord)}));n.add(mergePath(ja,{style:defaults(p.getModel("lineStyle").getLineStyle(),defaults(c.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,r,a,s,o,u,c){var p=r.getCategories(!0),d=r.getModel("axisLabel"),_=d.get("margin"),ja=r.get("triggerEvent");each$f(c,function(Ja,ec){var tc=d,rc=Ja.tickValue,nc=u[getRadiusIdx(a)],ic=a.coordToPoint([nc+_,Ja.coord]),uc=a.cx,eh=a.cy,rh=Math.abs(ic[0]-uc)/nc<.3?"center":ic[0]>uc?"left":"right",ah=Math.abs(ic[1]-eh)/nc<.3?"middle":ic[1]>eh?"top":"bottom";if(p&&p[rc]){var ih=p[rc];isObject$3(ih)&&ih.textStyle&&(tc=new Model(ih.textStyle,d,d.ecModel))}var oh=new ZRText({silent:AxisBuilder.isLabelSilent(r),style:createTextStyle(tc,{x:ic[0],y:ic[1],fill:tc.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:Ja.formattedLabel,align:rh,verticalAlign:ah})});if(n.add(oh),ja){var uh=AxisBuilder.makeAxisEventDataBase(r);uh.targetType="axisLabel",uh.value=Ja.rawLabel,getECData(oh).eventData=uh}},this)},splitLine:function(n,r,a,s,o,u){var c=r.getModel("splitLine"),p=c.getModel("lineStyle"),d=p.get("color"),_=0;d=d instanceof Array?d:[d];for(var ja=[],Ja=0;Ja<s.length;Ja++){var ec=_++%d.length;ja[ec]=ja[ec]||[],ja[ec].push(new Line$2({shape:getAxisLineShape(a,u,s[Ja].coord)}))}for(var Ja=0;Ja<ja.length;Ja++)n.add(mergePath(ja[Ja],{style:defaults({stroke:d[Ja%d.length]},p.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(n,r,a,s,o,u){if(o.length){for(var c=r.getModel("minorSplitLine"),p=c.getModel("lineStyle"),d=[],_=0;_<o.length;_++)for(var ja=0;ja<o[_].length;ja++)d.push(new Line$2({shape:getAxisLineShape(a,u,o[_][ja].coord)}));n.add(mergePath(d,{style:p.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(n,r,a,s,o,u){if(s.length){var c=r.getModel("splitArea"),p=c.getModel("areaStyle"),d=p.get("color"),_=0;d=d instanceof Array?d:[d];for(var ja=[],Ja=Math.PI/180,ec=-s[0].coord*Ja,tc=Math.min(u[0],u[1]),rc=Math.max(u[0],u[1]),nc=r.get("clockwise"),ic=1,uc=s.length;ic<=uc;ic++){var eh=ic===uc?s[0].coord:s[ic].coord,rh=_++%d.length;ja[rh]=ja[rh]||[],ja[rh].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:tc,r:rc,startAngle:ec,endAngle:-eh*Ja,clockwise:nc},silent:!0})),ec=-eh*Ja}for(var ic=0;ic<ja.length;ic++)n.add(mergePath(ja[ic],{style:defaults({fill:d[ic%d.length]},p.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.axisPointerClass="PolarAxisPointer",a}return r.prototype.render=function(a,s){if(this.group.removeAll(),!!a.get("show")){var o=this._axisGroup,u=this._axisGroup=new Group$3;this.group.add(u);var c=a.axis,p=c.polar,d=p.getAngleAxis(),_=c.getTicksCoords(),ja=c.getMinorTicksCoords(),Ja=d.getExtent()[0],ec=c.getExtent(),tc=layoutAxis(p,a,Ja),rc=new AxisBuilder(a,tc);each$f(axisBuilderAttrs$1,rc.add,rc),u.add(rc.getGroup()),groupTransition(o,u,a),each$f(selfBuilderAttrs$1,function(nc){a.get([nc,"show"])&&!c.scale.isBlank()&&axisElementBuilders$1[nc](this.group,a,p,Ja,ec,_,ja)},this)}},r.type="radiusAxis",r}(AxisView),axisElementBuilders$1={splitLine:function(n,r,a,s,o,u){var c=r.getModel("splitLine"),p=c.getModel("lineStyle"),d=p.get("color"),_=0,ja=a.getAngleAxis(),Ja=Math.PI/180,ec=ja.getExtent(),tc=Math.abs(ec[1]-ec[0])===360?"Circle":"Arc";d=d instanceof Array?d:[d];for(var rc=[],nc=0;nc<u.length;nc++){var ic=_++%d.length;rc[ic]=rc[ic]||[],rc[ic].push(new graphic[tc]({shape:{cx:a.cx,cy:a.cy,r:Math.max(u[nc].coord,0),startAngle:-ec[0]*Ja,endAngle:-ec[1]*Ja,clockwise:ja.inverse}}))}for(var nc=0;nc<rc.length;nc++)n.add(mergePath(rc[nc],{style:defaults({stroke:d[nc%d.length],fill:null},p.getLineStyle()),silent:!0}))},minorSplitLine:function(n,r,a,s,o,u,c){if(c.length){for(var p=r.getModel("minorSplitLine"),d=p.getModel("lineStyle"),_=[],ja=0;ja<c.length;ja++)for(var Ja=0;Ja<c[ja].length;Ja++)_.push(new Circle({shape:{cx:a.cx,cy:a.cy,r:c[ja][Ja].coord}}));n.add(mergePath(_,{style:defaults({fill:null},d.getLineStyle()),silent:!0}))}},splitArea:function(n,r,a,s,o,u){if(u.length){var c=r.getModel("splitArea"),p=c.getModel("areaStyle"),d=p.get("color"),_=0;d=d instanceof Array?d:[d];for(var ja=[],Ja=u[0].coord,ec=1;ec<u.length;ec++){var tc=_++%d.length;ja[tc]=ja[tc]||[],ja[tc].push(new Sector({shape:{cx:a.cx,cy:a.cy,r0:Ja,r:u[ec].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),Ja=u[ec].coord}for(var ec=0;ec<ja.length;ec++)n.add(mergePath(ja[ec],{style:defaults({fill:d[ec%d.length]},p.getAreaStyle()),silent:!0}))}}};function layoutAxis(n,r,a){return{position:[n.cx,n.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function getAxisKey(n,r){return r.dim+n.model.componentIndex}function barLayoutPolar(n,r,a){var s={},o=calRadialBar(filter(r.getSeriesByType(n),function(u){return!r.isSeriesFiltered(u)&&u.coordinateSystem&&u.coordinateSystem.type==="polar"}));r.eachSeriesByType(n,function(u){if(u.coordinateSystem.type==="polar"){var c=u.getData(),p=u.coordinateSystem,d=p.getBaseAxis(),_=getAxisKey(p,d),ja=getSeriesStackId(u),Ja=o[_][ja],ec=Ja.offset,tc=Ja.width,rc=p.getOtherAxis(d),nc=u.coordinateSystem.cx,ic=u.coordinateSystem.cy,uc=u.get("barMinHeight")||0,eh=u.get("barMinAngle")||0;s[ja]=s[ja]||[];for(var rh=c.mapDimension(rc.dim),ah=c.mapDimension(d.dim),ih=isDimensionStacked$2(c,rh),oh=d.dim!=="radius"||!u.get("roundCap",!0),uh=rc.dataToCoord(0),ch=0,hh=c.count();ch<hh;ch++){var dh=c.get(rh,ch),gh=c.get(ah,ch),fh=dh>=0?"p":"n",vh=uh;ih&&(s[ja][gh]||(s[ja][gh]={p:uh,n:uh}),vh=s[ja][gh][fh]);var ph=void 0,yh=void 0,xh=void 0,_h=void 0;if(rc.dim==="radius"){var bh=rc.dataToCoord(dh)-uh,Dh=d.dataToCoord(gh);Math.abs(bh)<uc&&(bh=(bh<0?-1:1)*uc),ph=vh,yh=vh+bh,xh=Dh-ec,_h=xh-tc,ih&&(s[ja][gh][fh]=yh)}else{var Th=rc.dataToCoord(dh,oh)-uh,Ch=d.dataToCoord(gh);Math.abs(Th)<eh&&(Th=(Th<0?-1:1)*eh),ph=Ch+ec,yh=ph+tc,xh=vh,_h=vh+Th,ih&&(s[ja][gh][fh]=_h)}c.setItemLayout(ch,{cx:nc,cy:ic,r0:ph,r:yh,startAngle:-xh*Math.PI/180,endAngle:-_h*Math.PI/180,clockwise:xh>=_h})}}})}function calRadialBar(n){var r={};each$f(n,function(s,o){var u=s.getData(),c=s.coordinateSystem,p=c.getBaseAxis(),d=getAxisKey(c,p),_=p.getExtent(),ja=p.type==="category"?p.getBandWidth():Math.abs(_[1]-_[0])/u.count(),Ja=r[d]||{bandWidth:ja,remainedWidth:ja,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},ec=Ja.stacks;r[d]=Ja;var tc=getSeriesStackId(s);ec[tc]||Ja.autoWidthCount++,ec[tc]=ec[tc]||{width:0,maxWidth:0};var rc=parsePercent(s.get("barWidth"),ja),nc=parsePercent(s.get("barMaxWidth"),ja),ic=s.get("barGap"),uc=s.get("barCategoryGap");rc&&!ec[tc].width&&(rc=Math.min(Ja.remainedWidth,rc),ec[tc].width=rc,Ja.remainedWidth-=rc),nc&&(ec[tc].maxWidth=nc),ic!=null&&(Ja.gap=ic),uc!=null&&(Ja.categoryGap=uc)});var a={};return each$f(r,function(s,o){a[o]={};var u=s.stacks,c=s.bandWidth,p=parsePercent(s.categoryGap,c),d=parsePercent(s.gap,1),_=s.remainedWidth,ja=s.autoWidthCount,Ja=(_-p)/(ja+(ja-1)*d);Ja=Math.max(Ja,0),each$f(u,function(nc,ic){var uc=nc.maxWidth;uc&&uc<Ja&&(uc=Math.min(uc,_),nc.width&&(uc=Math.min(uc,nc.width)),_-=uc,nc.width=uc,ja--)}),Ja=(_-p)/(ja+(ja-1)*d),Ja=Math.max(Ja,0);var ec=0,tc;each$f(u,function(nc,ic){nc.width||(nc.width=Ja),tc=nc,ec+=nc.width*(1+d)}),tc&&(ec-=tc.width*d);var rc=-ec/2;each$f(u,function(nc,ic){a[o][ic]=a[o][ic]||{offset:rc,width:nc.width},rc+=nc.width*(1+d)})}),a}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="polar",r}(ComponentView);function install$E(n){use(install$G),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),n.registerCoordinateSystem("polar",polarCreator),n.registerComponentModel(PolarModel),n.registerComponentView(PolarView),axisModelCreator(n,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(n,"radius",RadiusAxisModel,radiusAxisExtraOption),n.registerComponentView(AngleAxisView),n.registerComponentView(RadiusAxisView),n.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(n,r){r=r||{};var a=n.coordinateSystem,s=n.axis,o={},u=s.position,c=s.orient,p=a.getRect(),d=[p.x,p.x+p.width,p.y,p.y+p.height],_={horizontal:{top:d[2],bottom:d[3]},vertical:{left:d[0],right:d[1]}};o.position=[c==="vertical"?_.vertical[u]:d[0],c==="horizontal"?_.horizontal[u]:d[3]];var ja={horizontal:0,vertical:1};o.rotation=Math.PI/2*ja[c];var Ja={top:-1,bottom:1,right:1,left:-1};o.labelDirection=o.tickDirection=o.nameDirection=Ja[u],n.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),retrieve$1(r.labelInside,n.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var ec=r.rotate;return ec==null&&(ec=n.get(["axisLabel","rotate"])),o.labelRotation=u==="top"?-ec:ec,o.z2=1,o}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.axisPointerClass="SingleAxisPointer",a}return r.prototype.render=function(a,s,o,u){var c=this.group;c.removeAll();var p=this._axisGroup;this._axisGroup=new Group$3;var d=layout$1(a),_=new AxisBuilder(a,d);each$f(axisBuilderAttrs,_.add,_),c.add(this._axisGroup),c.add(_.getGroup()),each$f(selfBuilderAttrs,function(ja){a.get([ja,"show"])&&axisElementBuilders[ja](this,this.group,this._axisGroup,a)},this),groupTransition(p,this._axisGroup,a),n.prototype.render.call(this,a,s,o,u)},r.prototype.remove=function(){rectCoordAxisHandleRemove(this)},r.type="singleAxis",r}(AxisView),axisElementBuilders={splitLine:function(n,r,a,s){var o=s.axis;if(!o.scale.isBlank()){var u=s.getModel("splitLine"),c=u.getModel("lineStyle"),p=c.get("color");p=p instanceof Array?p:[p];for(var d=c.get("width"),_=s.coordinateSystem.getRect(),ja=o.isHorizontal(),Ja=[],ec=0,tc=o.getTicksCoords({tickModel:u}),rc=[],nc=[],ic=0;ic<tc.length;++ic){var uc=o.toGlobalCoord(tc[ic].coord);ja?(rc[0]=uc,rc[1]=_.y,nc[0]=uc,nc[1]=_.y+_.height):(rc[0]=_.x,rc[1]=uc,nc[0]=_.x+_.width,nc[1]=uc);var eh=new Line$2({shape:{x1:rc[0],y1:rc[1],x2:nc[0],y2:nc[1]},silent:!0});subPixelOptimizeLine(eh.shape,d);var rh=ec++%p.length;Ja[rh]=Ja[rh]||[],Ja[rh].push(eh)}for(var ah=c.getLineStyle(["color"]),ic=0;ic<Ja.length;++ic)r.add(mergePath(Ja[ic],{style:defaults({stroke:p[ic%p.length]},ah),silent:!0}))}},splitArea:function(n,r,a,s){rectCoordAxisBuildSplitArea(n,a,s,s)}},SingleAxisModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.getCoordSysModel=function(){return this},r.type="singleAxis",r.layoutMode="box",r.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},r}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(n){__extends(r,n);function r(a,s,o,u,c){var p=n.call(this,a,s,o)||this;return p.type=u||"value",p.position=c||"bottom",p}return r.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},r.prototype.pointToData=function(a,s){return this.coordinateSystem.pointToData(a)[0]},r}(Axis),singleDimensions=["single"],Single=function(){function n(r,a,s){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=r,this._init(r,a,s)}return n.prototype._init=function(r,a,s){var o=this.dimension,u=new SingleAxis(o,createScaleByModel$1(r),[0,0],r.get("type"),r.get("position")),c=u.type==="category";u.onBand=c&&r.get("boundaryGap"),u.inverse=r.get("inverse"),u.orient=r.get("orient"),r.axis=u,u.model=r,u.coordinateSystem=this,this._axis=u},n.prototype.update=function(r,a){r.eachSeries(function(s){if(s.coordinateSystem===this){var o=s.getData();each$f(o.mapDimensionsAll(this.dimension),function(u){this._axis.scale.unionExtentFromData(o,u)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(r,a){this._rect=getLayoutRect({left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var r=this._rect,a=this._axis,s=a.isHorizontal(),o=s?[0,r.width]:[0,r.height],u=a.inverse?1:0;a.setExtent(o[u],o[1-u]),this._updateAxisTransform(a,s?r.x:r.y)},n.prototype._updateAxisTransform=function(r,a){var s=r.getExtent(),o=s[0]+s[1],u=r.isHorizontal();r.toGlobalCoord=u?function(c){return c+a}:function(c){return o-c+a},r.toLocalCoord=u?function(c){return c-a}:function(c){return o-c+a}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(r){var a=this.getRect(),s=this.getAxis(),o=s.orient;return o==="horizontal"?s.contain(s.toLocalCoord(r[0]))&&r[1]>=a.y&&r[1]<=a.y+a.height:s.contain(s.toLocalCoord(r[1]))&&r[0]>=a.y&&r[0]<=a.y+a.height},n.prototype.pointToData=function(r){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(r[a.orient==="horizontal"?0:1]))]},n.prototype.dataToPoint=function(r){var a=this.getAxis(),s=this.getRect(),o=[],u=a.orient==="horizontal"?0:1;return r instanceof Array&&(r=r[0]),o[u]=a.toGlobalCoord(a.dataToCoord(+r)),o[1-u]=u===0?s.y+s.height/2:s.x+s.width/2,o},n.prototype.convertToPixel=function(r,a,s){var o=getCoordSys$1(a);return o===this?this.dataToPoint(s):null},n.prototype.convertFromPixel=function(r,a,s){var o=getCoordSys$1(a);return o===this?this.pointToData(s):null},n}();function getCoordSys$1(n){var r=n.seriesModel,a=n.singleAxisModel;return a&&a.coordinateSystem||r&&r.coordinateSystem}function create$1(n,r){var a=[];return n.eachComponent("singleAxis",function(s,o){var u=new Single(s,n,r);u.name="single_"+o,u.resize(s,r),s.coordinateSystem=u,a.push(u)}),n.eachSeries(function(s){if(s.get("coordinateSystem")==="singleAxis"){var o=s.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];s.coordinateSystem=o&&o.coordinateSystem}}),a}var singleCreator={create:create$1,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.makeElOption=function(a,s,o,u,c){var p=o.axis,d=p.coordinateSystem,_=getGlobalExtent(d,1-getPointDimIndex(p)),ja=d.dataToPoint(s)[0],Ja=u.get("type");if(Ja&&Ja!=="none"){var ec=buildElStyle(u),tc=pointerShapeBuilder[Ja](p,ja,_);tc.style=ec,a.graphicKey=tc.type,a.pointer=tc}var rc=layout$1(o);buildCartesianSingleLabelElOption(s,a,rc,o,u,c)},r.prototype.getHandleTransform=function(a,s,o){var u=layout$1(s,{labelInside:!1});u.labelMargin=o.get(["handle","margin"]);var c=getTransformedPosition(s.axis,a,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(a,s,o,u){var c=o.axis,p=c.coordinateSystem,d=getPointDimIndex(c),_=getGlobalExtent(p,d),ja=[a.x,a.y];ja[d]+=s[d],ja[d]=Math.min(_[1],ja[d]),ja[d]=Math.max(_[0],ja[d]);var Ja=getGlobalExtent(p,1-d),ec=(Ja[1]+Ja[0])/2,tc=[ec,ec];return tc[d]=ja[d],{x:ja[0],y:ja[1],rotation:a.rotation,cursorPoint:tc,tooltipOption:{verticalAlign:"middle"}}},r}(BaseAxisPointer),pointerShapeBuilder={line:function(n,r,a){var s=makeLineShape([r,a[0]],[r,a[1]],getPointDimIndex(n));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(n,r,a){var s=n.getBandWidth(),o=a[1]-a[0];return{type:"Rect",shape:makeRectShape([r-s/2,a[0]],[s,o],getPointDimIndex(n))}}};function getPointDimIndex(n){return n.isHorizontal()?0:1}function getGlobalExtent(n,r){var a=n.getRect();return[a[XY$1[r]],a[XY$1[r]]+a[WH$1[r]]]}var SingleView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="single",r}(ComponentView);function install$D(n){use(install$G),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),n.registerComponentView(SingleView),n.registerComponentView(SingleAxisView),n.registerComponentModel(SingleAxisModel),axisModelCreator(n,"single",SingleAxisModel,SingleAxisModel.defaultOption),n.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a,s,o){var u=getLayoutParams(a);n.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(a,u)},r.prototype.mergeOption=function(a){n.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,a)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}(ComponentModel);function mergeAndNormalizeLayoutParams$1(n,r){var a=n.cellSize,s;isArray$1(a)?s=a:s=n.cellSize=[a,a],s.length===1&&(s[1]=s[0]);var o=map$1([0,1],function(u){return sizeCalculable(r,u)&&(s[u]="auto"),s[u]!=null&&s[u]!=="auto"});mergeLayoutParam(n,r,{type:"box",ignoreSize:o})}var CalendarView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){var u=this.group;u.removeAll();var c=a.coordinateSystem,p=c.getRangeInfo(),d=c.getOrient(),_=s.getLocaleModel();this._renderDayRect(a,p,u),this._renderLines(a,p,d,u),this._renderYearText(a,p,d,u),this._renderMonthText(a,_,d,u),this._renderWeekText(a,_,p,d,u)},r.prototype._renderDayRect=function(a,s,o){for(var u=a.coordinateSystem,c=a.getModel("itemStyle").getItemStyle(),p=u.getCellWidth(),d=u.getCellHeight(),_=s.start.time;_<=s.end.time;_=u.getNextNDay(_,1).time){var ja=u.dataToRect([_],!1).tl,Ja=new Rect$2({shape:{x:ja[0],y:ja[1],width:p,height:d},cursor:"default",style:c});o.add(Ja)}},r.prototype._renderLines=function(a,s,o,u){var c=this,p=a.coordinateSystem,d=a.getModel(["splitLine","lineStyle"]).getLineStyle(),_=a.get(["splitLine","show"]),ja=d.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var Ja=s.start,ec=0;Ja.time<=s.end.time;ec++){rc(Ja.formatedDate),ec===0&&(Ja=p.getDateInfo(s.start.y+"-"+s.start.m));var tc=Ja.date;tc.setMonth(tc.getMonth()+1),Ja=p.getDateInfo(tc)}rc(p.getNextNDay(s.end.time,1).formatedDate);function rc(nc){c._firstDayOfMonth.push(p.getDateInfo(nc)),c._firstDayPoints.push(p.dataToRect([nc],!1).tl);var ic=c._getLinePointsOfOneWeek(a,nc,o);c._tlpoints.push(ic[0]),c._blpoints.push(ic[ic.length-1]),_&&c._drawSplitline(ic,d,u)}_&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,ja,o),d,u),_&&this._drawSplitline(c._getEdgesPoints(c._blpoints,ja,o),d,u)},r.prototype._getEdgesPoints=function(a,s,o){var u=[a[0].slice(),a[a.length-1].slice()],c=o==="horizontal"?0:1;return u[0][c]=u[0][c]-s/2,u[1][c]=u[1][c]+s/2,u},r.prototype._drawSplitline=function(a,s,o){var u=new Polyline$1({z2:20,shape:{points:a},style:s});o.add(u)},r.prototype._getLinePointsOfOneWeek=function(a,s,o){for(var u=a.coordinateSystem,c=u.getDateInfo(s),p=[],d=0;d<7;d++){var _=u.getNextNDay(c.time,d),ja=u.dataToRect([_.time],!1);p[2*_.day]=ja.tl,p[2*_.day+1]=ja[o==="horizontal"?"bl":"tr"]}return p},r.prototype._formatterLabel=function(a,s){return isString(a)&&a?formatTplSimple(a,s):isFunction(a)?a(s):s.nameMap},r.prototype._yearTextPositionControl=function(a,s,o,u,c){var p=s[0],d=s[1],_=["center","bottom"];u==="bottom"?(d+=c,_=["center","top"]):u==="left"?p-=c:u==="right"?(p+=c,_=["center","top"]):d-=c;var ja=0;return(u==="left"||u==="right")&&(ja=Math.PI/2),{rotation:ja,x:p,y:d,style:{align:_[0],verticalAlign:_[1]}}},r.prototype._renderYearText=function(a,s,o,u){var c=a.getModel("yearLabel");if(c.get("show")){var p=c.get("margin"),d=c.get("position");d||(d=o!=="horizontal"?"top":"left");var _=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],ja=(_[0][0]+_[1][0])/2,Ja=(_[0][1]+_[1][1])/2,ec=o==="horizontal"?0:1,tc={top:[ja,_[ec][1]],bottom:[ja,_[1-ec][1]],left:[_[1-ec][0],Ja],right:[_[ec][0],Ja]},rc=s.start.y;+s.end.y>+s.start.y&&(rc=rc+"-"+s.end.y);var nc=c.get("formatter"),ic={start:s.start.y,end:s.end.y,nameMap:rc},uc=this._formatterLabel(nc,ic),eh=new ZRText({z2:30,style:createTextStyle(c,{text:uc})});eh.attr(this._yearTextPositionControl(eh,tc[d],o,d,p)),u.add(eh)}},r.prototype._monthTextPositionControl=function(a,s,o,u,c){var p="left",d="top",_=a[0],ja=a[1];return o==="horizontal"?(ja=ja+c,s&&(p="center"),u==="start"&&(d="bottom")):(_=_+c,s&&(d="middle"),u==="start"&&(p="right")),{x:_,y:ja,align:p,verticalAlign:d}},r.prototype._renderMonthText=function(a,s,o,u){var c=a.getModel("monthLabel");if(c.get("show")){var p=c.get("nameMap"),d=c.get("margin"),_=c.get("position"),ja=c.get("align"),Ja=[this._tlpoints,this._blpoints];(!p||isString(p))&&(p&&(s=getLocaleModel(p)||s),p=s.get(["time","monthAbbr"])||[]);var ec=_==="start"?0:1,tc=o==="horizontal"?0:1;d=_==="start"?-d:d;for(var rc=ja==="center",nc=0;nc<Ja[ec].length-1;nc++){var ic=Ja[ec][nc].slice(),uc=this._firstDayOfMonth[nc];if(rc){var eh=this._firstDayPoints[nc];ic[tc]=(eh[tc]+Ja[0][nc+1][tc])/2}var rh=c.get("formatter"),ah=p[+uc.m-1],ih={yyyy:uc.y,yy:(uc.y+"").slice(2),MM:uc.m,M:+uc.m,nameMap:ah},oh=this._formatterLabel(rh,ih),uh=new ZRText({z2:30,style:extend$2(createTextStyle(c,{text:oh}),this._monthTextPositionControl(ic,rc,o,_,d))});u.add(uh)}}},r.prototype._weekTextPositionControl=function(a,s,o,u,c){var p="center",d="middle",_=a[0],ja=a[1],Ja=o==="start";return s==="horizontal"?(_=_+u+(Ja?1:-1)*c[0]/2,p=Ja?"right":"left"):(ja=ja+u+(Ja?1:-1)*c[1]/2,d=Ja?"bottom":"top"),{x:_,y:ja,align:p,verticalAlign:d}},r.prototype._renderWeekText=function(a,s,o,u,c){var p=a.getModel("dayLabel");if(p.get("show")){var d=a.coordinateSystem,_=p.get("position"),ja=p.get("nameMap"),Ja=p.get("margin"),ec=d.getFirstDayOfWeek();if(!ja||isString(ja)){ja&&(s=getLocaleModel(ja)||s);var tc=s.get(["time","dayOfWeekShort"]);ja=tc||map$1(s.get(["time","dayOfWeekAbbr"]),function(ih){return ih[0]})}var rc=d.getNextNDay(o.end.time,7-o.lweek).time,nc=[d.getCellWidth(),d.getCellHeight()];Ja=parsePercent(Ja,Math.min(nc[1],nc[0])),_==="start"&&(rc=d.getNextNDay(o.start.time,-(7+o.fweek)).time,Ja=-Ja);for(var ic=0;ic<7;ic++){var uc=d.getNextNDay(rc,ic),eh=d.dataToRect([uc.time],!1).center,rh=ic;rh=Math.abs((ic+ec)%7);var ah=new ZRText({z2:30,style:extend$2(createTextStyle(p,{text:ja[rh]}),this._weekTextPositionControl(eh,u,_,Ja,nc))});c.add(ah)}}},r.type="calendar",r}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function n(r,a,s){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=r}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(r){r=parseDate(r);var a=r.getFullYear(),s=r.getMonth()+1,o=s<10?"0"+s:""+s,u=r.getDate(),c=u<10?"0"+u:""+u,p=r.getDay();return p=Math.abs((p+7-this.getFirstDayOfWeek())%7),{y:a+"",m:o,d:c,day:p,time:r.getTime(),formatedDate:a+"-"+o+"-"+c,date:r}},n.prototype.getNextNDay=function(r,a){return a=a||0,a===0?this.getDateInfo(r):(r=new Date(this.getDateInfo(r).time),r.setDate(r.getDate()+a),this.getDateInfo(r))},n.prototype.update=function(r,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var s=this._rangeInfo.weeks||1,o=["width","height"],u=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),p=this._orient==="horizontal"?[s,7]:[7,s];each$f([0,1],function(Ja){ja(u,Ja)&&(c[o[Ja]]=u[Ja]*p[Ja])});var d={width:a.getWidth(),height:a.getHeight()},_=this._rect=getLayoutRect(c,d);each$f([0,1],function(Ja){ja(u,Ja)||(u[Ja]=_[o[Ja]]/p[Ja])});function ja(Ja,ec){return Ja[ec]!=null&&Ja[ec]!=="auto"}this._sw=u[0],this._sh=u[1]},n.prototype.dataToPoint=function(r,a){isArray$1(r)&&(r=r[0]),a==null&&(a=!0);var s=this.getDateInfo(r),o=this._rangeInfo,u=s.formatedDate;if(a&&!(s.time>=o.start.time&&s.time<o.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var c=s.day,p=this._getRangeInfo([o.start.time,u]).nthWeek;return this._orient==="vertical"?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+p*this._sh+this._sh/2]:[this._rect.x+p*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},n.prototype.pointToData=function(r){var a=this.pointToDate(r);return a&&a.time},n.prototype.dataToRect=function(r,a){var s=this.dataToPoint(r,a);return{contentShape:{x:s[0]-(this._sw-this._lineWidth)/2,y:s[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:s,tl:[s[0]-this._sw/2,s[1]-this._sh/2],tr:[s[0]+this._sw/2,s[1]-this._sh/2],br:[s[0]+this._sw/2,s[1]+this._sh/2],bl:[s[0]-this._sw/2,s[1]+this._sh/2]}},n.prototype.pointToDate=function(r){var a=Math.floor((r[0]-this._rect.x)/this._sw)+1,s=Math.floor((r[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(s,a-1,o):this._getDateByWeeksAndDay(a,s-1,o)},n.prototype.convertToPixel=function(r,a,s){var o=getCoordSys(a);return o===this?o.dataToPoint(s):null},n.prototype.convertFromPixel=function(r,a,s){var o=getCoordSys(a);return o===this?o.pointToData(s):null},n.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var r=this._model.get("range"),a;if(isArray$1(r)&&r.length===1&&(r=r[0]),isArray$1(r))a=r;else{var s=r.toString();if(/^\d{4}$/.test(s)&&(a=[s+"-01-01",s+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(s)){var o=this.getDateInfo(s),u=o.date;u.setMonth(u.getMonth()+1);var c=this.getNextNDay(u,-1);a=[o.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(s)&&(a=[s,s])}if(!a)return r;var p=this._getRangeInfo(a);return p.start.time>p.end.time&&a.reverse(),a},n.prototype._getRangeInfo=function(r){var a=[this.getDateInfo(r[0]),this.getDateInfo(r[1])],s;a[0].time>a[1].time&&(s=!0,a.reverse());var o=Math.floor(a[1].time/PROXIMATE_ONE_DAY)-Math.floor(a[0].time/PROXIMATE_ONE_DAY)+1,u=new Date(a[0].time),c=u.getDate(),p=a[1].date.getDate();u.setDate(c+o-1);var d=u.getDate();if(d!==p)for(var _=u.getTime()-a[1].time>0?1:-1;(d=u.getDate())!==p&&(u.getTime()-a[1].time)*_>0;)o-=_,u.setDate(d-_);var ja=Math.floor((o+a[0].day+6)/7),Ja=s?-ja+1:ja-1;return s&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:o,weeks:ja,nthWeek:Ja,fweek:a[0].day,lweek:a[1].day}},n.prototype._getDateByWeeksAndDay=function(r,a,s){var o=this._getRangeInfo(s);if(r>o.weeks||r===0&&a<o.fweek||r===o.weeks&&a>o.lweek)return null;var u=(r-1)*7-o.fweek+a,c=new Date(o.start.time);return c.setDate(+o.start.d+u),this.getDateInfo(c)},n.create=function(r,a){var s=[];return r.eachComponent("calendar",function(o){var u=new n(o);s.push(u),o.coordinateSystem=u}),r.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=s[o.get("calendarIndex")||0])}),s},n.dimensions=["time","value"],n}();function getCoordSys(n){var r=n.calendarModel,a=n.seriesModel,s=r?r.coordinateSystem:a?a.coordinateSystem:null;return s}function install$C(n){n.registerComponentModel(CalendarModel),n.registerComponentView(CalendarView),n.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(n,r){var a=n.existing;if(r.id=n.keyInfo.id,!r.type&&a&&(r.type=a.type),r.parentId==null){var s=r.parentOption;s?r.parentId=s.id:a&&(r.parentId=a.parentId)}r.parentOption=null}function isSetLoc(n,r){var a;return each$f(r,function(s){n[s]!=null&&n[s]!=="auto"&&(a=!0)}),a}function mergeNewElOptionToExist(n,r,a){var s=extend$2({},a),o=n[r],u=a.$action||"merge";u==="merge"?o?(merge(o,s,!0),mergeLayoutParam(o,s,{ignoreSize:!0}),copyLayoutParams(a,o),copyTransitionInfo(a,o),copyTransitionInfo(a,o,"shape"),copyTransitionInfo(a,o,"style"),copyTransitionInfo(a,o,"extra"),a.clipPath=o.clipPath):n[r]=s:u==="replace"?n[r]=s:u==="remove"&&o&&(n[r]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(n,r,a){if(a&&(!n[a]&&r[a]&&(n[a]={}),n=n[a],r=r[a]),!(!n||!r))for(var s=a?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,o=0;o<s.length;o++){var u=s[o];n[u]==null&&r[u]!=null&&(n[u]=r[u])}}function setLayoutInfoToExist(n,r){if(n&&(n.hv=r.hv=[isSetLoc(r,["left","right"]),isSetLoc(r,["top","bottom"])],n.type==="group")){var a=n,s=r;a.width==null&&(a.width=s.width=0),a.height==null&&(a.height=s.height=0)}}var GraphicComponentModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.preventAutoZ=!0,a}return r.prototype.mergeOption=function(a,s){var o=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,a,s),this.option.elements=o},r.prototype.optionUpdated=function(a,s){var o=this.option,u=(s?o:a).elements,c=o.elements=s?[]:o.elements,p=[];this._flatten(u,p,null);var d=mappingToExists(c,p,"normalMerge"),_=this._elOptionsToUpdate=[];each$f(d,function(ja,Ja){var ec=ja.newOption;ec&&(_.push(ec),setKeyInfoToNewElOption(ja,ec),mergeNewElOptionToExist(c,Ja,ec),setLayoutInfoToExist(c[Ja],ec))},this),o.elements=filter(c,function(ja){return ja&&delete ja.$action,ja!=null})},r.prototype._flatten=function(a,s,o){each$f(a,function(u){if(u){o&&(u.parentOption=o),s.push(u);var c=u.children;c&&c.length&&this._flatten(c,s,u),delete u.children}},this)},r.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},r.type="graphic",r.defaultOption={elements:[]},r}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(){this._elMap=createHashMap()},r.prototype.render=function(a,s,o){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,o)},r.prototype._updateElements=function(a){var s=a.useElOptionsToUpdate();if(s){var o=this._elMap,u=this.group,c=a.get("z"),p=a.get("zlevel");each$f(s,function(d){var _=convertOptionIdName(d.id,null),ja=_!=null?o.get(_):null,Ja=convertOptionIdName(d.parentId,null),ec=Ja!=null?o.get(Ja):u,tc=d.type,rc=d.style;tc==="text"&&rc&&d.hv&&d.hv[1]&&(rc.textVerticalAlign=rc.textBaseline=rc.verticalAlign=rc.align=null);var nc=d.textContent,ic=d.textConfig;if(rc&&isEC4CompatibleStyle(rc,tc,!!ic,!!nc)){var uc=convertFromEC4CompatibleStyle(rc,tc,!0);!ic&&uc.textConfig&&(ic=d.textConfig=uc.textConfig),!nc&&uc.textContent&&(nc=uc.textContent)}var eh=getCleanedElOption(d),rh=d.$action||"merge",ah=rh==="merge",ih=rh==="replace";if(ah){var oh=!ja,uh=ja;oh?uh=createEl(_,ec,d.type,o):(uh&&(inner$7(uh).isNew=!1),stopPreviousKeyframeAnimationAndRestore(uh)),uh&&(applyUpdateTransition(uh,eh,a,{isInit:oh}),updateCommonAttrs(uh,d,c,p))}else if(ih){removeEl$1(ja,d,o,a);var ch=createEl(_,ec,d.type,o);ch&&(applyUpdateTransition(ch,eh,a,{isInit:!0}),updateCommonAttrs(ch,d,c,p))}else rh==="remove"&&(updateLeaveTo(ja,d),removeEl$1(ja,d,o,a));var hh=o.get(_);if(hh&&nc)if(ah){var dh=hh.getTextContent();dh?dh.attr(nc):hh.setTextContent(new ZRText(nc))}else ih&&hh.setTextContent(new ZRText(nc));if(hh){var gh=d.clipPath;if(gh){var fh=gh.type,vh=void 0,oh=!1;if(ah){var ph=hh.getClipPath();oh=!ph||inner$7(ph).type!==fh,vh=oh?newEl(fh):ph}else ih&&(oh=!0,vh=newEl(fh));hh.setClipPath(vh),applyUpdateTransition(vh,gh,a,{isInit:oh}),applyKeyframeAnimation(vh,gh.keyframeAnimation,a)}var yh=inner$7(hh);hh.setTextConfig(ic),yh.option=d,setEventData(hh,a,d),setTooltipConfig({el:hh,componentModel:a,itemName:hh.name,itemTooltipOption:d.tooltip}),applyKeyframeAnimation(hh,d.keyframeAnimation,a)}})}},r.prototype._relocate=function(a,s){for(var o=a.option.elements,u=this.group,c=this._elMap,p=s.getWidth(),d=s.getHeight(),_=["x","y"],ja=0;ja<o.length;ja++){var Ja=o[ja],ec=convertOptionIdName(Ja.id,null),tc=ec!=null?c.get(ec):null;if(!(!tc||!tc.isGroup)){var rc=tc.parent,nc=rc===u,ic=inner$7(tc),uc=inner$7(rc);ic.width=parsePercent(ic.option.width,nc?p:uc.width)||0,ic.height=parsePercent(ic.option.height,nc?d:uc.height)||0}}for(var ja=o.length-1;ja>=0;ja--){var Ja=o[ja],ec=convertOptionIdName(Ja.id,null),tc=ec!=null?c.get(ec):null;if(tc){var rc=tc.parent,uc=inner$7(rc),eh=rc===u?{width:p,height:d}:{width:uc.width,height:uc.height},rh={},ah=positionElement(tc,Ja,eh,null,{hv:Ja.hv,boundingMode:Ja.bounding},rh);if(!inner$7(tc).isNew&&ah){for(var ih=Ja.transition,oh={},uh=0;uh<_.length;uh++){var ch=_[uh],hh=rh[ch];ih&&(isTransitionAll(ih)||indexOf(ih,ch)>=0)?oh[ch]=hh:tc[ch]=hh}updateProps$1(tc,oh,a,0)}else tc.attr(rh)}}},r.prototype._clear=function(){var a=this,s=this._elMap;s.each(function(o){removeEl$1(o,inner$7(o).option,s,a._lastGraphicModel)}),this._elMap=createHashMap()},r.prototype.dispose=function(){this._clear()},r.type="graphic",r}(ComponentView);function newEl(n){var r=hasOwn(nonShapeGraphicElements,n)?nonShapeGraphicElements[n]:getShapeClass(n),a=new r({});return inner$7(a).type=n,a}function createEl(n,r,a,s){var o=newEl(a);return r.add(o),s.set(n,o),inner$7(o).id=n,inner$7(o).isNew=!0,o}function removeEl$1(n,r,a,s){var o=n&&n.parent;o&&(n.type==="group"&&n.traverse(function(u){removeEl$1(u,r,a,s)}),applyLeaveTransition(n,r,s),a.removeKey(inner$7(n).id))}function updateCommonAttrs(n,r,a,s){n.isGroup||each$f([["cursor",Displayable$1.prototype.cursor],["zlevel",s||0],["z",a||0],["z2",0]],function(o){var u=o[0];hasOwn(r,u)?n[u]=retrieve2(r[u],o[1]):n[u]==null&&(n[u]=o[1])}),each$f(keys(r),function(o){if(o.indexOf("on")===0){var u=r[o];n[o]=isFunction(u)?u:null}}),hasOwn(r,"draggable")&&(n.draggable=r.draggable),r.name!=null&&(n.name=r.name),r.id!=null&&(n.id=r.id)}function getCleanedElOption(n){return n=extend$2({},n),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(r){delete n[r]}),n}function setEventData(n,r,a){var s=getECData(n).eventData;!n.silent&&!n.ignore&&!s&&(s=getECData(n).eventData={componentType:"graphic",componentIndex:r.componentIndex,name:n.name}),s&&(s.info=a.info)}function install$B(n){n.registerComponentModel(GraphicComponentModel),n.registerComponentView(GraphicComponentView),n.registerPreprocessor(function(r){var a=r.graphic;isArray$1(a)?!a[0]||!a[0].elements?r.graphic=[{elements:a}]:r.graphic=[r.graphic[0]]:a&&!a.elements&&(r.graphic=[{elements:[a]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(n){var r=n.get("coordinateSystem");return indexOf(SERIES_COORDS,r)>=0}function getAxisMainType(n){return n+"Axis"}function findEffectedDataZooms(n,r){var a=createHashMap(),s=[],o=createHashMap();n.eachComponent({mainType:"dataZoom",query:r},function(ja){o.get(ja.uid)||p(ja)});var u;do u=!1,n.eachComponent("dataZoom",c);while(u);function c(ja){!o.get(ja.uid)&&d(ja)&&(p(ja),u=!0)}function p(ja){o.set(ja.uid,!0),s.push(ja),_(ja)}function d(ja){var Ja=!1;return ja.eachTargetAxis(function(ec,tc){var rc=a.get(ec);rc&&rc[tc]&&(Ja=!0)}),Ja}function _(ja){ja.eachTargetAxis(function(Ja,ec){(a.get(Ja)||a.set(Ja,[]))[ec]=!0})}return s}function collectReferCoordSysModelInfo(n){var r=n.ecModel,a={infoList:[],infoMap:createHashMap()};return n.eachTargetAxis(function(s,o){var u=r.getComponent(getAxisMainType(s),o);if(u){var c=u.getCoordSysModel();if(c){var p=c.uid,d=a.infoMap.get(p);d||(d={model:c,axisModels:[]},a.infoList.push(d),a.infoMap.set(p,d)),d.axisModels.push(u)}}}),a}var DataZoomAxisInfo=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},n}(),DataZoomModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return r.prototype.init=function(a,s,o){var u=retrieveRawOption(a);this.settledOption=u,this.mergeDefaultAndTheme(a,o),this._doInit(u)},r.prototype.mergeOption=function(a){var s=retrieveRawOption(a);merge(this.option,a,!0),merge(this.settledOption,s,!0),this._doInit(s)},r.prototype._doInit=function(a){var s=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var o=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u,c){this._rangePropMode[c]==="value"&&(s[u[0]]=o[u[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var a=this.get("orient",!0),s=this._targetAxisInfoMap=createHashMap(),o=this._fillSpecifiedTargetAxis(s);o?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(s,this._orient)),this._noTarget=!0,s.each(function(u){u.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(a){var s=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(o){var u=this.getReferringComponents(getAxisMainType(o),MULTIPLE_REFERRING);if(u.specified){s=!0;var c=new DataZoomAxisInfo;each$f(u.models,function(p){c.add(p.componentIndex)}),a.set(o,c)}},this),s},r.prototype._fillAutoTargetAxisByOrient=function(a,s){var o=this.ecModel,u=!0;if(u){var c=s==="vertical"?"y":"x",p=o.findComponents({mainType:c+"Axis"});d(p,c)}if(u){var p=o.findComponents({mainType:"singleAxis",filter:function(ja){return ja.get("orient",!0)===s}});d(p,"single")}function d(_,ja){var Ja=_[0];if(Ja){var ec=new DataZoomAxisInfo;if(ec.add(Ja.componentIndex),a.set(ja,ec),u=!1,ja==="x"||ja==="y"){var tc=Ja.getReferringComponents("grid",SINGLE_REFERRING).models[0];tc&&each$f(_,function(rc){Ja.componentIndex!==rc.componentIndex&&tc===rc.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&ec.add(rc.componentIndex)})}}}u&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(_){if(u){var ja=o.findComponents({mainType:getAxisMainType(_),filter:function(ec){return ec.get("type",!0)==="category"}});if(ja[0]){var Ja=new DataZoomAxisInfo;Ja.add(ja[0].componentIndex),a.set(_,Ja),u=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(s){!a&&(a=s)},this),a==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var s=this.ecModel.option;this.option.throttle=s.animation&&s.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(a){var s=this._rangePropMode,o=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(u,c){var p=a[u[0]]!=null,d=a[u[1]]!=null;p&&!d?s[c]="percent":!p&&d?s[c]="value":o?s[c]=o[c]:p&&(s[c]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(s,o){a==null&&(a=this.ecModel.getComponent(getAxisMainType(s),o))},this),a},r.prototype.eachTargetAxis=function(a,s){this._targetAxisInfoMap.each(function(o,u){each$f(o.indexList,function(c){a.call(s,u,c)})})},r.prototype.getAxisProxy=function(a,s){var o=this.getAxisModel(a,s);if(o)return o.__dzAxisProxy},r.prototype.getAxisModel=function(a,s){var o=this._targetAxisInfoMap.get(a);if(o&&o.indexMap[s])return this.ecModel.getComponent(getAxisMainType(a),s)},r.prototype.setRawRange=function(a){var s=this.option,o=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u){(a[u[0]]!=null||a[u[1]]!=null)&&(s[u[0]]=o[u[0]]=a[u[0]],s[u[1]]=o[u[1]]=a[u[1]])},this),this._updateRangeUse(a)},r.prototype.setCalculatedRange=function(a){var s=this.option;each$f(["start","startValue","end","endValue"],function(o){s[o]=a[o]})},r.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},r.prototype.getValueRange=function(a,s){if(a==null&&s==null){var o=this.findRepresentativeAxisProxy();if(o)return o.getDataValueWindow()}else return this.getAxisProxy(a,s).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var s,o=this._targetAxisInfoMap.keys(),u=0;u<o.length;u++)for(var c=o[u],p=this._targetAxisInfoMap.get(c),d=0;d<p.indexList.length;d++){var _=this.getAxisProxy(c,p.indexList[d]);if(_.hostedBy(this))return _;s||(s=_)}return s},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(ComponentModel);function retrieveRawOption(n){var r={};return each$f(["start","end","startValue","endValue","throttle"],function(a){n.hasOwnProperty(a)&&(r[a]=n[a])}),r}var SelectDataZoomModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="dataZoom.select",r}(DataZoomModel),DataZoomView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o,u){this.dataZoomModel=a,this.ecModel=s,this.api=o},r.type="dataZoom",r}(ComponentView),SelectDataZoomView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="dataZoom.select",r}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function n(r,a,s,o){this._dimName=r,this._axisIndex=a,this.ecModel=o,this._dataZoomModel=s}return n.prototype.hostedBy=function(r){return this._dataZoomModel===r},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(a){if(isCoordSupported(a)){var s=getAxisMainType(this._dimName),o=a.getReferringComponents(s,SINGLE_REFERRING).models[0];o&&this._axisIndex===o.componentIndex&&r.push(a)}},this),r},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},n.prototype.calculateDataWindow=function(r){var a=this._dataExtent,s=this.getAxisModel(),o=s.axis.scale,u=this._dataZoomModel.getRangePropMode(),c=[0,100],p=[],d=[],_;each$7(["start","end"],function(ec,tc){var rc=r[ec],nc=r[ec+"Value"];u[tc]==="percent"?(rc==null&&(rc=c[tc]),nc=o.parse(linearMap$2(rc,c,a))):(_=!0,nc=nc==null?a[tc]:o.parse(nc),rc=linearMap$2(nc,a,c)),d[tc]=nc==null||isNaN(nc)?a[tc]:nc,p[tc]=rc==null||isNaN(rc)?c[tc]:rc}),asc$1(d),asc$1(p);var ja=this._minMaxSpan;_?Ja(d,p,a,c,!1):Ja(p,d,c,a,!0);function Ja(ec,tc,rc,nc,ic){var uc=ic?"Span":"ValueSpan";sliderMove(0,ec,rc,"all",ja["min"+uc],ja["max"+uc]);for(var eh=0;eh<2;eh++)tc[eh]=linearMap$2(ec[eh],rc,nc,!0),ic&&(tc[eh]=o.parse(tc[eh]))}return{valueWindow:d,percentWindow:p}},n.prototype.reset=function(r){if(r===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,a),this._updateMinMaxSpan();var s=this.calculateDataWindow(r.settledOption);this._valueWindow=s.valueWindow,this._percentWindow=s.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(r,a){if(r!==this._dataZoomModel)return;var s=this._dimName,o=this.getTargetSeriesModels(),u=r.get("filterMode"),c=this._valueWindow;if(u==="none")return;each$7(o,function(d){var _=d.getData(),ja=_.mapDimensionsAll(s);if(ja.length){if(u==="weakFilter"){var Ja=_.getStore(),ec=map$1(ja,function(tc){return _.getDimensionIndex(tc)},_);_.filterSelf(function(tc){for(var rc,nc,ic,uc=0;uc<ja.length;uc++){var eh=Ja.get(ec[uc],tc),rh=!isNaN(eh),ah=eh<c[0],ih=eh>c[1];if(rh&&!ah&&!ih)return!0;rh&&(ic=!0),ah&&(rc=!0),ih&&(nc=!0)}return ic&&rc&&nc})}else each$7(ja,function(tc){if(u==="empty")d.setData(_=_.map(tc,function(nc){return p(nc)?nc:NaN}));else{var rc={};rc[tc]=c,_.selectRange(rc)}});each$7(ja,function(tc){_.setApproximateExtent(c,tc)})}});function p(d){return d>=c[0]&&d<=c[1]}},n.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},a=this._dataZoomModel,s=this._dataExtent;each$7(["min","max"],function(o){var u=a.get(o+"Span"),c=a.get(o+"ValueSpan");c!=null&&(c=this.getAxisModel().axis.scale.parse(c)),c!=null?u=linearMap$2(s[0]+c,s,[0,100],!0):u!=null&&(c=linearMap$2(u,[0,100],s,!0)-s[0]),r[o+"Span"]=u,r[o+"ValueSpan"]=c},this)},n.prototype._setAxisModel=function(){var r=this.getAxisModel(),a=this._percentWindow,s=this._valueWindow;if(a){var o=getPixelPrecision(s,[0,500]);o=Math.min(o,20);var u=r.axis.scale.rawExtentInfo;a[0]!==0&&u.setDeterminedMinMax("min",+s[0].toFixed(o)),a[1]!==100&&u.setDeterminedMinMax("max",+s[1].toFixed(o)),u.freeze()}},n}();function calculateDataExtent(n,r,a){var s=[1/0,-1/0];each$7(a,function(c){unionAxisExtentFromData(s,c.getData(),r)});var o=n.getAxisModel(),u=ensureScaleRawExtentInfo(o.axis.scale,o,s).calculate();return[u.min,u.max]}var dataZoomProcessor={getTargetSeries:function(n){function r(o){n.eachComponent("dataZoom",function(u){u.eachTargetAxis(function(c,p){var d=n.getComponent(getAxisMainType(c),p);o(c,p,d,u)})})}r(function(o,u,c,p){c.__dzAxisProxy=null});var a=[];r(function(o,u,c,p){c.__dzAxisProxy||(c.__dzAxisProxy=new AxisProxy(o,u,p,n),a.push(c.__dzAxisProxy))});var s=createHashMap();return each$f(a,function(o){each$f(o.getTargetSeriesModels(),function(u){s.set(u.uid,u)})}),s},overallReset:function(n,r){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(s,o){a.getAxisProxy(s,o).reset(a)}),a.eachTargetAxis(function(s,o){a.getAxisProxy(s,o).filterData(a,r)})}),n.eachComponent("dataZoom",function(a){var s=a.findRepresentativeAxisProxy();if(s){var o=s.getDataPercentWindow(),u=s.getDataValueWindow();a.setCalculatedRange({start:o[0],end:o[1],startValue:u[0],endValue:u[1]})}})}};function installDataZoomAction(n){n.registerAction("dataZoom",function(r,a){var s=findEffectedDataZooms(a,r);each$f(s,function(o){o.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var installed$1=!1;function installCommon$1(n){installed$1||(installed$1=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$A(n){n.registerComponentModel(SelectDataZoomModel),n.registerComponentView(SelectDataZoomView),installCommon$1(n)}var ToolboxFeature=function(){function n(){}return n}(),features={};function registerFeature(n,r){features[n]=r}function getFeature(n){return features[n]}var ToolboxModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;each$f(this.option.feature,function(s,o){var u=getFeature(o);u&&(u.getDefaultOption&&(u.defaultOption=u.getDefaultOption(a)),merge(s,u.defaultOption))})},r.type="toolbox",r.layoutMode={type:"box",ignoreSize:!0},r.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},r}(ComponentModel);function layout(n,r,a){var s=r.getBoxLayoutParams(),o=r.get("padding"),u={width:a.getWidth(),height:a.getHeight()},c=getLayoutRect(s,u,o);box(r.get("orient"),n,r.get("itemGap"),c.width,c.height),positionElement(n,s,u,o)}function makeBackground(n,r){var a=normalizeCssArray(r.get("padding")),s=r.getItemStyle(["color","opacity"]);return s.fill=r.get("backgroundColor"),n=new Rect$2({shape:{x:n.x-a[3],y:n.y-a[0],width:n.width+a[1]+a[3],height:n.height+a[0]+a[2],r:r.get("borderRadius")},style:s,silent:!0,z2:-1}),n}var ToolboxView=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.render=function(a,s,o,u){var c=this.group;if(c.removeAll(),!a.get("show"))return;var p=+a.get("itemSize"),d=a.get("orient")==="vertical",_=a.get("feature")||{},ja=this._features||(this._features={}),Ja=[];each$f(_,function(rc,nc){Ja.push(nc)}),new DataDiffer(this._featureNames||[],Ja).add(ec).update(ec).remove(curry$1(ec,null)).execute(),this._featureNames=Ja;function ec(rc,nc){var ic=Ja[rc],uc=Ja[nc],eh=_[ic],rh=new Model(eh,a,a.ecModel),ah;if(u&&u.newTitle!=null&&u.featureName===ic&&(eh.title=u.newTitle),ic&&!uc){if(isUserFeatureName(ic))ah={onclick:rh.option.onclick,featureName:ic};else{var ih=getFeature(ic);if(!ih)return;ah=new ih}ja[ic]=ah}else if(ah=ja[uc],!ah)return;ah.uid=getUID("toolbox-feature"),ah.model=rh,ah.ecModel=s,ah.api=o;var oh=ah instanceof ToolboxFeature;if(!ic&&uc){oh&&ah.dispose&&ah.dispose(s,o);return}if(!rh.get("show")||oh&&ah.unusable){oh&&ah.remove&&ah.remove(s,o);return}tc(rh,ah,ic),rh.setIconStatus=function(uh,ch){var hh=this.option,dh=this.iconPaths;hh.iconStatus=hh.iconStatus||{},hh.iconStatus[uh]=ch,dh[uh]&&(ch==="emphasis"?enterEmphasis:leaveEmphasis)(dh[uh])},ah instanceof ToolboxFeature&&ah.render&&ah.render(rh,s,o,u)}function tc(rc,nc,ic){var uc=rc.getModel("iconStyle"),eh=rc.getModel(["emphasis","iconStyle"]),rh=nc instanceof ToolboxFeature&&nc.getIcons?nc.getIcons():rc.get("icon"),ah=rc.get("title")||{},ih,oh;isString(rh)?(ih={},ih[ic]=rh):ih=rh,isString(ah)?(oh={},oh[ic]=ah):oh=ah;var uh=rc.iconPaths={};each$f(ih,function(ch,hh){var dh=createIcon(ch,{},{x:-p/2,y:-p/2,width:p,height:p});dh.setStyle(uc.getItemStyle());var gh=dh.ensureState("emphasis");gh.style=eh.getItemStyle();var fh=new ZRText({style:{text:oh[hh],align:eh.get("textAlign"),borderRadius:eh.get("textBorderRadius"),padding:eh.get("textPadding"),fill:null,font:getFont({fontStyle:eh.get("textFontStyle"),fontFamily:eh.get("textFontFamily"),fontSize:eh.get("textFontSize"),fontWeight:eh.get("textFontWeight")},s)},ignore:!0});dh.setTextContent(fh),setTooltipConfig({el:dh,componentModel:a,itemName:hh,formatterParamsExtra:{title:oh[hh]}}),dh.__title=oh[hh],dh.on("mouseover",function(){var vh=eh.getItemStyle(),ph=d?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";fh.setStyle({fill:eh.get("textFill")||vh.fill||vh.stroke||"#000",backgroundColor:eh.get("textBackgroundColor")}),dh.setTextConfig({position:eh.get("textPosition")||ph}),fh.ignore=!a.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){rc.get(["iconStatus",hh])!=="emphasis"&&o.leaveEmphasis(this),fh.hide()}),(rc.get(["iconStatus",hh])==="emphasis"?enterEmphasis:leaveEmphasis)(dh),c.add(dh),dh.on("click",bind$1(nc.onclick,nc,s,o,hh)),uh[hh]=dh})}layout(c,a,o),c.add(makeBackground(c.getBoundingRect(),a)),d||c.eachChild(function(rc){var nc=rc.__title,ic=rc.ensureState("emphasis"),uc=ic.textConfig||(ic.textConfig={}),eh=rc.getTextContent(),rh=eh&&eh.ensureState("emphasis");if(rh&&!isFunction(rh)&&nc){var ah=rh.style||(rh.style={}),ih=getBoundingRect(nc,ZRText.makeFont(ah)),oh=rc.x+c.x,uh=rc.y+c.y+p,ch=!1;uh+ih.height>o.getHeight()&&(uc.position="top",ch=!0);var hh=ch?-5-ih.height:p+10;oh+ih.width/2>o.getWidth()?(uc.position=["100%",hh],ah.align="right"):oh-ih.width/2<0&&(uc.position=[0,hh],ah.align="left")}})},r.prototype.updateView=function(a,s,o,u){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.updateView&&c.updateView(c.model,s,o,u)})},r.prototype.remove=function(a,s){each$f(this._features,function(o){o instanceof ToolboxFeature&&o.remove&&o.remove(a,s)}),this.group.removeAll()},r.prototype.dispose=function(a,s){each$f(this._features,function(o){o instanceof ToolboxFeature&&o.dispose&&o.dispose(a,s)})},r.type="toolbox",r}(ComponentView);function isUserFeatureName(n){return n.indexOf("my")===0}var SaveAsImage=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.onclick=function(a,s){var o=this.model,u=o.get("name")||a.get("title.0.text")||"echarts",c=s.getZr().painter.getType()==="svg",p=c?"svg":o.get("type",!0)||"png",d=s.getConnectedDataURL({type:p,backgroundColor:o.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),_=env.browser;if(isFunction(MouseEvent)&&(_.newEdge||!_.ie&&!_.edge)){var ja=document.createElement("a");ja.download=u+"."+p,ja.target="_blank",ja.href=d;var Ja=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});ja.dispatchEvent(Ja)}else if(window.navigator.msSaveOrOpenBlob||c){var ec=d.split(","),tc=ec[0].indexOf("base64")>-1,rc=c?decodeURIComponent(ec[1]):ec[1];tc&&(rc=window.atob(rc));var nc=u+"."+p;if(window.navigator.msSaveOrOpenBlob){for(var ic=rc.length,uc=new Uint8Array(ic);ic--;)uc[ic]=rc.charCodeAt(ic);var eh=new Blob([uc]);window.navigator.msSaveOrOpenBlob(eh,nc)}else{var rh=document.createElement("iframe");document.body.appendChild(rh);var ah=rh.contentWindow,ih=ah.document;ih.open("image/svg+xml","replace"),ih.write(rc),ih.close(),ah.focus(),ih.execCommand("SaveAs",!0,nc),document.body.removeChild(rh)}}else{var oh=o.get("lang"),uh='<body style="margin:0;"><img src="'+d+'" style="max-width:100%;" title="'+(oh&&oh[0]||"")+'" /></body>',ch=window.open();ch.document.write(uh),ch.document.title=u}},r.getDefaultOption=function(a){var s={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return s},r}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.getIcons=function(){var a=this.model,s=a.get("icon"),o={};return each$f(a.get("type"),function(u){s[u]&&(o[u]=s[u])}),o},r.getDefaultOption=function(a){var s={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return s},r.prototype.onclick=function(a,s,o){var u=this.model,c=u.get(["seriesIndex",o]);if(seriesOptGenreator[o]){var p={series:[]},d=function(Ja){var ec=Ja.subType,tc=Ja.id,rc=seriesOptGenreator[o](ec,tc,Ja,u);rc&&(defaults(rc,Ja.option),p.series.push(rc));var nc=Ja.coordinateSystem;if(nc&&nc.type==="cartesian2d"&&(o==="line"||o==="bar")){var ic=nc.getAxesByScale("ordinal")[0];if(ic){var uc=ic.dim,eh=uc+"Axis",rh=Ja.getReferringComponents(eh,SINGLE_REFERRING).models[0],ah=rh.componentIndex;p[eh]=p[eh]||[];for(var ih=0;ih<=ah;ih++)p[eh][ah]=p[eh][ah]||{};p[eh][ah].boundaryGap=o==="bar"}}};each$f(radioTypes,function(Ja){indexOf(Ja,o)>=0&&each$f(Ja,function(ec){u.setIconStatus(ec,"normal")})}),u.setIconStatus(o,"emphasis"),a.eachComponent({mainType:"series",query:c==null?null:{seriesIndex:c}},d);var _,ja=o;o==="stack"&&(_=merge({stack:u.option.title.tiled,tiled:u.option.title.stack},u.option.title),u.get(["iconStatus",o])!=="emphasis"&&(ja="tiled")),s.dispatchAction({type:"changeMagicType",currentType:ja,newOption:p,newTitle:_,featureName:"magicType"})}},r}(ToolboxFeature),seriesOptGenreator={line:function(n,r,a,s){if(n==="bar")return merge({id:r,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},s.get(["option","line"])||{},!0)},bar:function(n,r,a,s){if(n==="line")return merge({id:r,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},s.get(["option","bar"])||{},!0)},stack:function(n,r,a,s){var o=a.get("stack")===INNER_STACK_KEYWORD;if(n==="line"||n==="bar")return s.setIconStatus("stack",o?"normal":"emphasis"),merge({id:r,stack:o?"":INNER_STACK_KEYWORD},s.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,r){r.mergeOption(n.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(n){var r={},a=[],s=[];return n.eachRawSeries(function(o){var u=o.coordinateSystem;if(u&&(u.type==="cartesian2d"||u.type==="polar")){var c=u.getBaseAxis();if(c.type==="category"){var p=c.dim+"_"+c.index;r[p]||(r[p]={categoryAxis:c,valueAxis:u.getOtherAxis(c),series:[]},s.push({axisDim:c.dim,axisIndex:c.index})),r[p].series.push(o)}else a.push(o)}else a.push(o)}),{seriesGroupByCategoryAxis:r,other:a,meta:s}}function assembleSeriesWithCategoryAxis(n){var r=[];return each$f(n,function(a,s){var o=a.categoryAxis,u=a.valueAxis,c=u.dim,p=[" "].concat(map$1(a.series,function(tc){return tc.name})),d=[o.model.getCategories()];each$f(a.series,function(tc){var rc=tc.getRawData();d.push(tc.getRawData().mapArray(rc.mapDimension(c),function(nc){return nc}))});for(var _=[p.join(ITEM_SPLITER)],ja=0;ja<d[0].length;ja++){for(var Ja=[],ec=0;ec<d.length;ec++)Ja.push(d[ec][ja]);_.push(Ja.join(ITEM_SPLITER))}r.push(_.join(`
`))}),r.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(n){return map$1(n,function(r){var a=r.getRawData(),s=[r.name],o=[];return a.each(a.dimensions,function(){for(var u=arguments.length,c=arguments[u-1],p=a.getName(c),d=0;d<u-1;d++)o[d]=arguments[d];s.push((p?p+ITEM_SPLITER:"")+o.join(ITEM_SPLITER))}),s.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(n){var r=groupSeries(n);return{value:filter([assembleSeriesWithCategoryAxis(r.seriesGroupByCategoryAxis),assembleOtherSeries(r.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:r.meta}}function trim(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(n){var r=n.slice(0,n.indexOf(`
`));if(r.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(n){for(var r=n.split(/\n+/g),a=trim(r.shift()).split(itemSplitRegex),s=[],o=map$1(a,function(d){return{name:d,data:[]}}),u=0;u<r.length;u++){var c=trim(r[u]).split(itemSplitRegex);s.push(c.shift());for(var p=0;p<c.length;p++)o[p]&&(o[p].data[u]=c[p])}return{series:o,categories:s}}function parseListContents(n){for(var r=n.split(/\n+/g),a=trim(r.shift()),s=[],o=0;o<r.length;o++){var u=trim(r[o]);if(u){var c=u.split(itemSplitRegex),p="",d=void 0,_=!1;isNaN(c[0])?(_=!0,p=c[0],c=c.slice(1),s[o]={name:p,value:[]},d=s[o].value):d=s[o]=[];for(var ja=0;ja<c.length;ja++)d.push(+c[ja]);d.length===1&&(_?s[o].value=d[0]:s[o]=d[0])}}return{name:a,data:s}}function parseContents(n,r){var a=n.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),s={series:[]};return each$f(a,function(o,u){if(isTSVFormat(o)){var c=parseTSVContents(o),p=r[u],d=p.axisDim+"Axis";p&&(s[d]=s[d]||[],s[d][p.axisIndex]={data:c.categories},s.series=s.series.concat(c.series))}else{var c=parseListContents(o);s.series.push(c)}}),s}var DataView=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.onclick=function(a,s){setTimeout(function(){s.dispatchAction({type:"hideTip"})});var o=s.getDom(),u=this.model;this._dom&&o.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",c.style.backgroundColor=u.get("backgroundColor")||"#fff";var p=document.createElement("h4"),d=u.get("lang")||[];p.innerHTML=d[0]||u.get("title"),p.style.cssText="margin:10px 20px",p.style.color=u.get("textColor");var _=document.createElement("div"),ja=document.createElement("textarea");_.style.cssText="overflow:auto";var Ja=u.get("optionToContent"),ec=u.get("contentToOption"),tc=getContentFromModel(a);if(isFunction(Ja)){var rc=Ja(s.getOption());isString(rc)?_.innerHTML=rc:isDom(rc)&&_.appendChild(rc)}else{ja.readOnly=u.get("readOnly");var nc=ja.style;nc.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",nc.color=u.get("textColor"),nc.borderColor=u.get("textareaBorderColor"),nc.backgroundColor=u.get("textareaColor"),ja.value=tc.value,_.appendChild(ja)}var ic=tc.meta,uc=document.createElement("div");uc.style.cssText="position:absolute;bottom:5px;left:0;right:0";var eh="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",rh=document.createElement("div"),ah=document.createElement("div");eh+=";background-color:"+u.get("buttonColor"),eh+=";color:"+u.get("buttonTextColor");var ih=this;function oh(){o.removeChild(c),ih._dom=null}addEventListener(rh,"click",oh),addEventListener(ah,"click",function(){if(ec==null&&Ja!=null||ec!=null&&Ja==null){oh();return}var uh;try{isFunction(ec)?uh=ec(_,s.getOption()):uh=parseContents(ja.value,ic)}catch(ch){throw oh(),new Error("Data view format error "+ch)}uh&&s.dispatchAction({type:"changeDataView",newOption:uh}),oh()}),rh.innerHTML=d[1],ah.innerHTML=d[2],ah.style.cssText=rh.style.cssText=eh,!u.get("readOnly")&&uc.appendChild(ah),uc.appendChild(rh),c.appendChild(p),c.appendChild(_),c.appendChild(uc),_.style.height=o.clientHeight-80+"px",o.appendChild(c),this._dom=c},r.prototype.remove=function(a,s){this._dom&&s.getDom().removeChild(this._dom)},r.prototype.dispose=function(a,s){this.remove(a,s)},r.getDefaultOption=function(a){var s={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return s},r}(ToolboxFeature);function tryMergeDataOption(n,r){return map$1(n,function(a,s){var o=r&&r[s];if(isObject$3(o)&&!isArray$1(o)){var u=isObject$3(a)&&!isArray$1(a);u||(a={value:a});var c=o.name!=null&&a.name==null;return a=defaults(a,o),c&&delete a.name,a}else return a})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,r){var a=[];each$f(n.newOption.series,function(s){var o=r.getSeriesByName(s.name)[0];if(!o)a.push(extend$2({type:"scatter"},s));else{var u=o.get("data");a.push({name:s.name,data:tryMergeDataOption(s.data,u)})}}),r.mergeOption(defaults({series:a},n.newOption))});var each$6=each$f,inner$6=makeInner();function push(n,r){var a=getStoreSnapshots(n);each$6(r,function(s,o){for(var u=a.length-1;u>=0;u--){var c=a[u];if(c[o])break}if(u<0){var p=n.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(p){var d=p.getPercentRange();a[0][o]={dataZoomId:o,start:d[0],end:d[1]}}}}),a.push(r)}function pop(n){var r=getStoreSnapshots(n),a=r[r.length-1];r.length>1&&r.pop();var s={};return each$6(a,function(o,u){for(var c=r.length-1;c>=0;c--)if(o=r[c][u],o){s[u]=o;break}}),s}function clear(n){inner$6(n).snapshots=null}function count(n){return getStoreSnapshots(n).length}function getStoreSnapshots(n){var r=inner$6(n);return r.snapshots||(r.snapshots=[{}]),r.snapshots}var RestoreOption=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.onclick=function(a,s){clear(a),s.dispatchAction({type:"restore",from:this.uid})},r.getDefaultOption=function(a){var s={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return s},r}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,r){r.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function n(r,a,s){var o=this;this._targetInfoList=[];var u=parseFinder(a,r);each$f(targetInfoBuilders,function(c,p){(!s||!s.include||indexOf(s.include,p)>=0)&&c(u,o._targetInfoList)})}return n.prototype.setOutputRanges=function(r,a){return this.matchOutputRanges(r,a,function(s,o,u){if((s.coordRanges||(s.coordRanges=[])).push(o),!s.coordRange){s.coordRange=o;var c=coordConvert[s.brushType](0,u,o);s.__rangeOffset={offset:diffProcessor[s.brushType](c.values,s.range,[1,1]),xyMinMax:c.xyMinMax}}}),r},n.prototype.matchOutputRanges=function(r,a,s){each$f(r,function(o){var u=this.findTargetInfo(o,a);u&&u!==!0&&each$f(u.coordSyses,function(c){var p=coordConvert[o.brushType](1,c,o.range,!0);s(o,p.values,c,a)})},this)},n.prototype.setInputRanges=function(r,a){each$f(r,function(s){var o=this.findTargetInfo(s,a);if(s.range=s.range||[],o&&o!==!0){s.panelId=o.panelId;var u=coordConvert[s.brushType](0,o.coordSys,s.coordRange),c=s.__rangeOffset;s.range=c?diffProcessor[s.brushType](u.values,c.offset,getScales(u.xyMinMax,c.xyMinMax)):u.values}},this)},n.prototype.makePanelOpts=function(r,a){return map$1(this._targetInfoList,function(s){var o=s.getPanelRect();return{panelId:s.panelId,defaultBrushType:a?a(s):null,clipPath:makeRectPanelClipPath(o),isTargetByCursor:makeRectIsTargetByCursor(o,r,s.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(o)}})},n.prototype.controlSeries=function(r,a,s){var o=this.findTargetInfo(r,s);return o===!0||o&&indexOf(o.coordSyses,a.coordinateSystem)>=0},n.prototype.findTargetInfo=function(r,a){for(var s=this._targetInfoList,o=parseFinder(a,r),u=0;u<s.length;u++){var c=s[u],p=r.panelId;if(p){if(c.panelId===p)return c}else for(var d=0;d<targetInfoMatchers.length;d++)if(targetInfoMatchers[d](o,c))return c}return!0},n}();function formatMinMax(n){return n[0]>n[1]&&n.reverse(),n}function parseFinder(n,r){return parseFinder$1(n,r,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(n,r){var a=n.xAxisModels,s=n.yAxisModels,o=n.gridModels,u=createHashMap(),c={},p={};!a&&!s&&!o||(each$f(a,function(d){var _=d.axis.grid.model;u.set(_.id,_),c[_.id]=!0}),each$f(s,function(d){var _=d.axis.grid.model;u.set(_.id,_),p[_.id]=!0}),each$f(o,function(d){u.set(d.id,d),c[d.id]=!0,p[d.id]=!0}),u.each(function(d){var _=d.coordinateSystem,ja=[];each$f(_.getCartesians(),function(Ja,ec){(indexOf(a,Ja.getAxis("x").model)>=0||indexOf(s,Ja.getAxis("y").model)>=0)&&ja.push(Ja)}),r.push({panelId:"grid--"+d.id,gridModel:d,coordSysModel:d,coordSys:ja[0],coordSyses:ja,getPanelRect:panelRectBuilders.grid,xAxisDeclared:c[d.id],yAxisDeclared:p[d.id]})}))},geo:function(n,r){each$f(n.geoModels,function(a){var s=a.coordinateSystem;r.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:s,coordSyses:[s],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(n,r){var a=n.xAxisModel,s=n.yAxisModel,o=n.gridModel;return!o&&a&&(o=a.axis.grid.model),!o&&s&&(o=s.axis.grid.model),o&&o===r.gridModel},function(n,r){var a=n.geoModel;return a&&a===r.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,r=n.getBoundingRect().clone();return r.applyTransform(getTransform$1(n)),r}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(n,r,a,s){var o=n?r.pointToData([a[0][0],a[1][0]],s):r.dataToPoint([a[0][0],a[1][0]],s),u=n?r.pointToData([a[0][1],a[1][1]],s):r.dataToPoint([a[0][1],a[1][1]],s),c=[formatMinMax([o[0],u[0]]),formatMinMax([o[1],u[1]])];return{values:c,xyMinMax:c}},polygon:function(n,r,a,s){var o=[[1/0,-1/0],[1/0,-1/0]],u=map$1(a,function(c){var p=n?r.pointToData(c,s):r.dataToPoint(c,s);return o[0][0]=Math.min(o[0][0],p[0]),o[1][0]=Math.min(o[1][0],p[1]),o[0][1]=Math.max(o[0][1],p[0]),o[1][1]=Math.max(o[1][1],p[1]),p});return{values:u,xyMinMax:o}}};function axisConvert(n,r,a,s){var o=a.getAxis(["x","y"][n]),u=formatMinMax(map$1([0,1],function(p){return r?o.coordToData(o.toLocalCoord(s[p]),!0):o.toGlobalCoord(o.dataToCoord(s[p]))})),c=[];return c[n]=u,c[1-n]=[NaN,NaN],{values:u,xyMinMax:c}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(n,r,a){return[[n[0][0]-a[0]*r[0][0],n[0][1]-a[0]*r[0][1]],[n[1][0]-a[1]*r[1][0],n[1][1]-a[1]*r[1][1]]]},polygon:function(n,r,a){return map$1(n,function(s,o){return[s[0]-a[0]*r[o][0],s[1]-a[1]*r[o][1]]})}};function axisDiffProcessor(n,r,a,s){return[r[0]-s[n]*a[0],r[1]-s[n]*a[1]]}function getScales(n,r){var a=getSize(n),s=getSize(r),o=[a[0]/s[0],a[1]/s[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function getSize(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.render=function(a,s,o,u){this._brushController||(this._brushController=new BrushController(o.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(a,s,this,u,o),updateBackBtnStatus(a,s)},r.prototype.onclick=function(a,s,o){handlers$1[o].call(this)},r.prototype.remove=function(a,s){this._brushController&&this._brushController.unmount()},r.prototype.dispose=function(a,s){this._brushController&&this._brushController.dispose()},r.prototype._onBrush=function(a){var s=a.areas;if(!a.isEnd||!s.length)return;var o={},u=this.ecModel;this._brushController.updateCovers([]);var c=new BrushTargetManager(makeAxisFinder(this.model),u,{include:["grid"]});c.matchOutputRanges(s,u,function(_,ja,Ja){if(Ja.type==="cartesian2d"){var ec=_.brushType;ec==="rect"?(p("x",Ja,ja[0]),p("y",Ja,ja[1])):p({lineX:"x",lineY:"y"}[ec],Ja,ja)}}),push(u,o),this._dispatchZoomAction(o);function p(_,ja,Ja){var ec=ja.getAxis(_),tc=ec.model,rc=d(_,tc,u),nc=rc.findRepresentativeAxisProxy(tc).getMinMaxSpan();(nc.minValueSpan!=null||nc.maxValueSpan!=null)&&(Ja=sliderMove(0,Ja.slice(),ec.scale.getExtent(),0,nc.minValueSpan,nc.maxValueSpan)),rc&&(o[rc.id]={dataZoomId:rc.id,startValue:Ja[0],endValue:Ja[1]})}function d(_,ja,Ja){var ec;return Ja.eachComponent({mainType:"dataZoom",subType:"select"},function(tc){var rc=tc.getAxisModel(_,ja.componentIndex);rc&&(ec=tc)}),ec}},r.prototype._dispatchZoomAction=function(a){var s=[];each$5(a,function(o,u){s.push(clone$4(o))}),s.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:s})},r.getDefaultOption=function(a){var s={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return s},r}(ToolboxFeature),handlers$1={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(n){var r={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return r.xAxisIndex==null&&r.xAxisId==null&&(r.xAxisIndex="all"),r.yAxisIndex==null&&r.yAxisId==null&&(r.yAxisIndex="all"),r}function updateBackBtnStatus(n,r){n.setIconStatus("back",count(r)>1?"emphasis":"normal")}function updateZoomBtnStatus(n,r,a,s,o){var u=a._isZoomActive;s&&s.type==="takeGlobalCursor"&&(u=s.key==="dataZoomSelect"?s.dataZoomSelectActive:!1),a._isZoomActive=u,n.setIconStatus("zoom",u?"emphasis":"normal");var c=new BrushTargetManager(makeAxisFinder(n),r,{include:["grid"]}),p=c.makePanelOpts(o,function(d){return d.xAxisDeclared&&!d.yAxisDeclared?"lineX":!d.xAxisDeclared&&d.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(p).enableBrush(u&&p.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(n){var r=n.getComponent("toolbox",0),a=["feature","dataZoom"];if(!r||r.get(a)==null)return;var s=r.getModel(a),o=[],u=makeAxisFinder(s),c=parseFinder$1(n,u);each$5(c.xAxisModels,function(d){return p(d,"xAxis","xAxisIndex")}),each$5(c.yAxisModels,function(d){return p(d,"yAxis","yAxisIndex")});function p(d,_,ja){var Ja=d.componentIndex,ec={type:"select",$fromToolbox:!0,filterMode:s.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+_+Ja};ec[ja]=Ja,o.push(ec)}return o});function install$z(n){n.registerComponentModel(ToolboxModel),n.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$A)}var TooltipModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},r}(ComponentModel);function shouldTooltipConfine(n){var r=n.get("confine");return r!=null?!!r:n.get("renderMode")==="richText"}function testStyle(n){if(env.domSupported){for(var r=document.documentElement.style,a=0,s=n.length;a<s;a++)if(n[a]in r)return n[a]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(n,r){if(!n)return r;r=toCamelCase(r,!0);var a=n.indexOf(r);return n=a===-1?r:"-"+n.slice(0,a)+"-"+r,n.toLowerCase()}function getComputedStyle$1(n,r){var a=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return a?a[r]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function assembleArrow(n,r,a){if(!isString(a)||a==="inside")return"";var s=n.get("backgroundColor"),o=n.get("borderWidth");r=convertToColorString(r);var u=mirrorPos(a),c=Math.max(Math.round(o)*1.5,6),p="",d=CSS_TRANSFORM_VENDOR+":",_;indexOf(["left","right"],u)>-1?(p+="top:50%",d+="translateY(-50%) rotate("+(_=u==="left"?-225:-45)+"deg)"):(p+="left:50%",d+="translateX(-50%) rotate("+(_=u==="top"?225:45)+"deg)");var ja=_*Math.PI/180,Ja=c+o,ec=Ja*Math.abs(Math.cos(ja))+Ja*Math.abs(Math.sin(ja)),tc=Math.round(((ec-Math.SQRT2*o)/2+Math.SQRT2*o-(ec-Ja)/2)*100)/100;p+=";"+u+":-"+tc+"px";var rc=r+" solid "+o+"px;",nc=["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",p+";"+d+";","border-bottom:"+rc,"border-right:"+rc,"background-color:"+s+";"];return'<div style="'+nc.join("")+'"></div>'}function assembleTransition(n,r){var a="cubic-bezier(0.23,1,0.32,1)",s=" "+n/2+"s "+a,o="opacity"+s+",visibility"+s;return r||(s=" "+n+"s "+a,o+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+s:",left"+s+",top"+s),CSS_TRANSITION_VENDOR+":"+o}function assembleTransform(n,r,a){var s=n.toFixed(0)+"px",o=r.toFixed(0)+"px";if(!env.transformSupported)return a?"top:"+o+";left:"+s+";":[["top",o],["left",s]];var u=env.transform3dSupported,c="translate"+(u?"3d":"")+"("+s+","+o+(u?",0":"")+")";return a?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+c+";":[["top",0],["left",0],[TRANSFORM_VENDOR,c]]}function assembleFont(n){var r=[],a=n.get("fontSize"),s=n.getTextColor();s&&r.push("color:"+s),r.push("font:"+n.getFont()),a&&r.push("line-height:"+Math.round(a*3/2)+"px");var o=n.get("textShadowColor"),u=n.get("textShadowBlur")||0,c=n.get("textShadowOffsetX")||0,p=n.get("textShadowOffsetY")||0;return o&&u&&r.push("text-shadow:"+c+"px "+p+"px "+u+"px "+o),each$f(["decoration","align"],function(d){var _=n.get(d);_&&r.push("text-"+d+":"+_)}),r.join(";")}function assembleCssText(n,r,a){var s=[],o=n.get("transitionDuration"),u=n.get("backgroundColor"),c=n.get("shadowBlur"),p=n.get("shadowColor"),d=n.get("shadowOffsetX"),_=n.get("shadowOffsetY"),ja=n.getModel("textStyle"),Ja=getPaddingFromTooltipModel(n,"html"),ec=d+"px "+_+"px "+c+"px "+p;return s.push("box-shadow:"+ec),r&&o&&s.push(assembleTransition(o,a)),u&&s.push("background-color:"+u),each$f(["width","color","radius"],function(tc){var rc="border-"+tc,nc=toCamelCase(rc),ic=n.get(nc);ic!=null&&s.push(rc+":"+ic+(tc==="color"?"":"px"))}),s.push(assembleFont(ja)),Ja!=null&&s.push("padding:"+normalizeCssArray(Ja).join("px ")+"px"),s.join(";")+";"}function makeStyleCoord$1(n,r,a,s,o){var u=r&&r.painter;if(a){var c=u&&u.getViewportRoot();c&&transformLocalCoord(n,c,a,s,o)}else{n[0]=s,n[1]=o;var p=u&&u.getViewportRootOffset();p&&(n[0]+=p.offsetLeft,n[1]+=p.offsetTop)}n[2]=n[0]/r.getWidth(),n[3]=n[1]/r.getHeight()}var TooltipHTMLContent=function(){function n(r,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var s=document.createElement("div");s.domBelongToZr=!0,this.el=s;var o=this._zr=r.getZr(),u=a.appendTo,c=u&&(isString(u)?document.querySelector(u):isDom(u)?u:isFunction(u)&&u(r.getDom()));makeStyleCoord$1(this._styleCoord,o,c,r.getWidth()/2,r.getHeight()/2),(c||r.getDom()).appendChild(s),this._api=r,this._container=c;var p=this;s.onmouseenter=function(){p._enterable&&(clearTimeout(p._hideTimeout),p._show=!0),p._inContent=!0},s.onmousemove=function(d){if(d=d||window.event,!p._enterable){var _=o.handler,ja=o.painter.getViewportRoot();normalizeEvent(ja,d,!0),_.dispatch("mousemove",d)}},s.onmouseleave=function(){p._inContent=!1,p._enterable&&p._show&&p.hideLater(p._hideDelay)}}return n.prototype.update=function(r){if(!this._container){var a=this._api.getDom(),s=getComputedStyle$1(a,"position"),o=a.style;o.position!=="absolute"&&s!=="absolute"&&(o.position="relative")}var u=r.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u,this.el.className=r.get("className")||""},n.prototype.show=function(r,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var s=this.el,o=s.style,u=this._styleCoord;s.innerHTML?o.cssText=gCssText+assembleCssText(r,!this._firstShow,this._longHide)+assembleTransform(u[0],u[1],!0)+("border-color:"+convertToColorString(a)+";")+(r.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(r,a,s,o,u){var c=this.el;if(r==null){c.innerHTML="";return}var p="";if(isString(u)&&s.get("trigger")==="item"&&!shouldTooltipConfine(s)&&(p=assembleArrow(s,o,u)),isString(r))c.innerHTML=r+p;else if(r){c.innerHTML="",isArray$1(r)||(r=[r]);for(var d=0;d<r.length;d++)isDom(r[d])&&r[d].parentNode!==c&&c.appendChild(r[d]);if(p&&c.childNodes.length){var _=document.createElement("div");_.innerHTML=p,c.appendChild(_)}}},n.prototype.setEnterable=function(r){this._enterable=r},n.prototype.getSize=function(){var r=this.el;return[r.offsetWidth,r.offsetHeight]},n.prototype.moveTo=function(r,a){var s=this._styleCoord;if(makeStyleCoord$1(s,this._zr,this._container,r,a),s[0]!=null&&s[1]!=null){var o=this.el.style,u=assembleTransform(s[0],s[1]);each$f(u,function(c){o[c[0]]=c[1]})}},n.prototype._moveIfResized=function(){var r=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),a*this._zr.getHeight())},n.prototype.hide=function(){var r=this,a=this.el.style;a.visibility="hidden",a.opacity="0",env.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return r._longHide=!0},500)},n.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),r)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el.parentNode;r&&r.removeChild(this.el),this.el=this._container=null},n}(),TooltipRichContent=function(){function n(r){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=r.getZr(),makeStyleCoord(this._styleCoord,this._zr,r.getWidth()/2,r.getHeight()/2)}return n.prototype.update=function(r){var a=r.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(r,a,s,o,u){var c=this;isObject$3(r)&&throwError(""),this.el&&this._zr.remove(this.el);var p=s.getModel("textStyle");this.el=new ZRText({style:{rich:a.richTextStyles,text:r,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:p.get("textShadowColor"),fill:s.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(s,"richText"),verticalAlign:"top",align:"left"},z:s.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(_){c.el.style[_]=s.get(_)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(_){c.el.style[_]=p.get(_)||0}),this._zr.add(this.el);var d=this;this.el.on("mouseover",function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0}),this.el.on("mouseout",function(){d._enterable&&d._show&&d.hideLater(d._hideDelay),d._inContent=!1})},n.prototype.setEnterable=function(r){this._enterable=r},n.prototype.getSize=function(){var r=this.el,a=this.el.getBoundingRect(),s=calcShadowOuterSize(r.style);return[a.width+s.left+s.right,a.height+s.top+s.bottom]},n.prototype.moveTo=function(r,a){var s=this.el;if(s){var o=this._styleCoord;makeStyleCoord(o,this._zr,r,a),r=o[0],a=o[1];var u=s.style,c=mathMaxWith0(u.borderWidth||0),p=calcShadowOuterSize(u);s.x=r+c+p.left,s.y=a+c+p.top,s.markRedraw()}},n.prototype._moveIfResized=function(){var r=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),a*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),r)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function mathMaxWith0(n){return Math.max(0,n)}function calcShadowOuterSize(n){var r=mathMaxWith0(n.shadowBlur||0),a=mathMaxWith0(n.shadowOffsetX||0),s=mathMaxWith0(n.shadowOffsetY||0);return{left:mathMaxWith0(r-a),right:mathMaxWith0(r+a),top:mathMaxWith0(r-s),bottom:mathMaxWith0(r+s)}}function makeStyleCoord(n,r,a,s){n[0]=a,n[1]=s,n[2]=n[0]/r.getWidth(),n[3]=n[1]/r.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a,s){if(!(env.node||!s.getDom())){var o=a.getComponent("tooltip"),u=this._renderMode=getTooltipRenderMode(o.get("renderMode"));this._tooltipContent=u==="richText"?new TooltipRichContent(s):new TooltipHTMLContent(s,{appendTo:o.get("appendToBody",!0)?"body":o.get("appendTo",!0)})}},r.prototype.render=function(a,s,o){if(!(env.node||!o.getDom())){this.group.removeAll(),this._tooltipModel=a,this._ecModel=s,this._api=o;var u=this._tooltipContent;u.update(a),u.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&a.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},r.prototype._initGlobalListener=function(){var a=this._tooltipModel,s=a.get("triggerOn");register$1("itemTooltip",this._api,bind$1(function(o,u,c){s!=="none"&&(s.indexOf(o)>=0?this._tryShow(u,c):o==="leave"&&this._hide(c))},this))},r.prototype._keepShow=function(){var a=this._tooltipModel,s=this._ecModel,o=this._api,u=a.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&u!=="none"&&u!=="click"){var c=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&c.manuallyShowTip(a,s,o,{x:c._lastX,y:c._lastY,dataByCoordSys:c._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(a,s,o,u){if(!(u.from===this.uid||env.node||!o.getDom())){var c=makeDispatchAction(u,o);this._ticket="";var p=u.dataByCoordSys,d=findComponentReference(u,s,o);if(d){var _=d.el.getBoundingRect().clone();_.applyTransform(d.el.transform),this._tryShow({offsetX:_.x+_.width/2,offsetY:_.y+_.height/2,target:d.el,position:u.position,positionDefault:"bottom"},c)}else if(u.tooltip&&u.x!=null&&u.y!=null){var ja=proxyRect;ja.x=u.x,ja.y=u.y,ja.update(),getECData(ja).tooltipConfig={name:null,option:u.tooltip},this._tryShow({offsetX:u.x,offsetY:u.y,target:ja},c)}else if(p)this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,dataByCoordSys:p,tooltipOption:u.tooltipOption},c);else if(u.seriesIndex!=null){if(this._manuallyAxisShowTip(a,s,o,u))return;var Ja=findPointFromSeries(u,s),ec=Ja.point[0],tc=Ja.point[1];ec!=null&&tc!=null&&this._tryShow({offsetX:ec,offsetY:tc,target:Ja.el,position:u.position,positionDefault:"bottom"},c)}else u.x!=null&&u.y!=null&&(o.dispatchAction({type:"updateAxisPointer",x:u.x,y:u.y}),this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,target:o.getZr().findHover(u.x,u.y).target},c))}},r.prototype.manuallyHideTip=function(a,s,o,u){var c=this._tooltipContent;this._tooltipModel&&c.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,u.from!==this.uid&&this._hide(makeDispatchAction(u,o))},r.prototype._manuallyAxisShowTip=function(a,s,o,u){var c=u.seriesIndex,p=u.dataIndex,d=s.getComponent("axisPointer").coordSysAxesInfo;if(!(c==null||p==null||d==null)){var _=s.getSeriesByIndex(c);if(_){var ja=_.getData(),Ja=buildTooltipModel([ja.getItemModel(p),_,(_.coordinateSystem||{}).model],this._tooltipModel);if(Ja.get("trigger")==="axis")return o.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:p,position:u.position}),!0}}},r.prototype._tryShow=function(a,s){var o=a.target,u=this._tooltipModel;if(u){this._lastX=a.offsetX,this._lastY=a.offsetY;var c=a.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,a);else if(o){var p=getECData(o);if(p.ssrType==="legend")return;this._lastDataByCoordSys=null;var d,_;findEventDispatcher(o,function(ja){if(getECData(ja).dataIndex!=null)return d=ja,!0;if(getECData(ja).tooltipConfig!=null)return _=ja,!0},!0),d?this._showSeriesItemTooltip(a,d,s):_?this._showComponentItemTooltip(a,_,s):this._hide(s)}else this._lastDataByCoordSys=null,this._hide(s)}},r.prototype._showOrMove=function(a,s){var o=a.get("showDelay");s=bind$1(s,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(s,o):s()},r.prototype._showAxisTooltip=function(a,s){var o=this._ecModel,u=this._tooltipModel,c=[s.offsetX,s.offsetY],p=buildTooltipModel([s.tooltipOption],u),d=this._renderMode,_=[],ja=createTooltipMarkup("section",{blocks:[],noHeader:!0}),Ja=[],ec=new TooltipMarkupStyleCreator;each$f(a,function(eh){each$f(eh.dataByAxis,function(rh){var ah=o.getComponent(rh.axisDim+"Axis",rh.axisIndex),ih=rh.value;if(!(!ah||ih==null)){var oh=getValueLabel(ih,ah.axis,o,rh.seriesDataIndices,rh.valueLabelOpt),uh=createTooltipMarkup("section",{header:oh,noHeader:!trim$1(oh),sortBlocks:!0,blocks:[]});ja.blocks.push(uh),each$f(rh.seriesDataIndices,function(ch){var hh=o.getSeriesByIndex(ch.seriesIndex),dh=ch.dataIndexInside,gh=hh.getDataParams(dh);if(!(gh.dataIndex<0)){gh.axisDim=rh.axisDim,gh.axisIndex=rh.axisIndex,gh.axisType=rh.axisType,gh.axisId=rh.axisId,gh.axisValue=getAxisRawValue(ah.axis,{value:ih}),gh.axisValueLabel=oh,gh.marker=ec.makeTooltipMarker("item",convertToColorString(gh.color),d);var fh=normalizeTooltipFormatResult(hh.formatTooltip(dh,!0,null)),vh=fh.frag;if(vh){var ph=buildTooltipModel([hh],u).get("valueFormatter");uh.blocks.push(ph?extend$2({valueFormatter:ph},vh):vh)}fh.text&&Ja.push(fh.text),_.push(gh)}})}})}),ja.blocks.reverse(),Ja.reverse();var tc=s.position,rc=p.get("order"),nc=buildTooltipMarkup(ja,ec,d,rc,o.get("useUTC"),p.get("textStyle"));nc&&Ja.unshift(nc);var ic=d==="richText"?`

`:"<br/>",uc=Ja.join(ic);this._showOrMove(p,function(){this._updateContentNotChangedOnAxis(a,_)?this._updatePosition(p,tc,c[0],c[1],this._tooltipContent,_):this._showTooltipContent(p,uc,_,Math.random()+"",c[0],c[1],tc,null,ec)})},r.prototype._showSeriesItemTooltip=function(a,s,o){var u=this._ecModel,c=getECData(s),p=c.seriesIndex,d=u.getSeriesByIndex(p),_=c.dataModel||d,ja=c.dataIndex,Ja=c.dataType,ec=_.getData(Ja),tc=this._renderMode,rc=a.positionDefault,nc=buildTooltipModel([ec.getItemModel(ja),_,d&&(d.coordinateSystem||{}).model],this._tooltipModel,rc?{position:rc}:null),ic=nc.get("trigger");if(!(ic!=null&&ic!=="item")){var uc=_.getDataParams(ja,Ja),eh=new TooltipMarkupStyleCreator;uc.marker=eh.makeTooltipMarker("item",convertToColorString(uc.color),tc);var rh=normalizeTooltipFormatResult(_.formatTooltip(ja,!1,Ja)),ah=nc.get("order"),ih=nc.get("valueFormatter"),oh=rh.frag,uh=oh?buildTooltipMarkup(ih?extend$2({valueFormatter:ih},oh):oh,eh,tc,ah,u.get("useUTC"),nc.get("textStyle")):rh.text,ch="item_"+_.name+"_"+ja;this._showOrMove(nc,function(){this._showTooltipContent(nc,uh,uc,ch,a.offsetX,a.offsetY,a.position,a.target,eh)}),o({type:"showTip",dataIndexInside:ja,dataIndex:ec.getRawIndex(ja),seriesIndex:p,from:this.uid})}},r.prototype._showComponentItemTooltip=function(a,s,o){var u=getECData(s),c=u.tooltipConfig,p=c.option||{};if(isString(p)){var d=p;p={content:d,formatter:d}}var _=[p],ja=this._ecModel.getComponent(u.componentMainType,u.componentIndex);ja&&_.push(ja),_.push({formatter:p.content});var Ja=a.positionDefault,ec=buildTooltipModel(_,this._tooltipModel,Ja?{position:Ja}:null),tc=ec.get("content"),rc=Math.random()+"",nc=new TooltipMarkupStyleCreator;this._showOrMove(ec,function(){var ic=clone$4(ec.get("formatterParams")||{});this._showTooltipContent(ec,tc,ic,rc,a.offsetX,a.offsetY,a.position,s,nc)}),o({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(a,s,o,u,c,p,d,_,ja){if(this._ticket="",!(!a.get("showContent")||!a.get("show"))){var Ja=this._tooltipContent;Ja.setEnterable(a.get("enterable"));var ec=a.get("formatter");d=d||a.get("position");var tc=s,rc=this._getNearestPoint([c,p],o,a.get("trigger"),a.get("borderColor")),nc=rc.color;if(ec)if(isString(ec)){var ic=a.ecModel.get("useUTC"),uc=isArray$1(o)?o[0]:o,eh=uc&&uc.axisType&&uc.axisType.indexOf("time")>=0;tc=ec,eh&&(tc=format(uc.axisValue,tc,ic)),tc=formatTpl(tc,o,!0)}else if(isFunction(ec)){var rh=bind$1(function(ah,ih){ah===this._ticket&&(Ja.setContent(ih,ja,a,nc,d),this._updatePosition(a,d,c,p,Ja,o,_))},this);this._ticket=u,tc=ec(o,u,rh)}else tc=ec;Ja.setContent(tc,ja,a,nc,d),Ja.show(a,nc),this._updatePosition(a,d,c,p,Ja,o,_)}},r.prototype._getNearestPoint=function(a,s,o,u){if(o==="axis"||isArray$1(s))return{color:u||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(s))return{color:u||s.color||s.borderColor}},r.prototype._updatePosition=function(a,s,o,u,c,p,d){var _=this._api.getWidth(),ja=this._api.getHeight();s=s||a.get("position");var Ja=c.getSize(),ec=a.get("align"),tc=a.get("verticalAlign"),rc=d&&d.getBoundingRect().clone();if(d&&rc.applyTransform(d.transform),isFunction(s)&&(s=s([o,u],p,c.el,rc,{viewSize:[_,ja],contentSize:Ja.slice()})),isArray$1(s))o=parsePercent(s[0],_),u=parsePercent(s[1],ja);else if(isObject$3(s)){var nc=s;nc.width=Ja[0],nc.height=Ja[1];var ic=getLayoutRect(nc,{width:_,height:ja});o=ic.x,u=ic.y,ec=null,tc=null}else if(isString(s)&&d){var uc=calcTooltipPosition(s,rc,Ja,a.get("borderWidth"));o=uc[0],u=uc[1]}else{var uc=refixTooltipPosition(o,u,c,_,ja,ec?null:20,tc?null:20);o=uc[0],u=uc[1]}if(ec&&(o-=isCenterAlign(ec)?Ja[0]/2:ec==="right"?Ja[0]:0),tc&&(u-=isCenterAlign(tc)?Ja[1]/2:tc==="bottom"?Ja[1]:0),shouldTooltipConfine(a)){var uc=confineTooltipPosition(o,u,c,_,ja);o=uc[0],u=uc[1]}c.moveTo(o,u)},r.prototype._updateContentNotChangedOnAxis=function(a,s){var o=this._lastDataByCoordSys,u=this._cbParamsList,c=!!o&&o.length===a.length;return c&&each$f(o,function(p,d){var _=p.dataByAxis||[],ja=a[d]||{},Ja=ja.dataByAxis||[];c=c&&_.length===Ja.length,c&&each$f(_,function(ec,tc){var rc=Ja[tc]||{},nc=ec.seriesDataIndices||[],ic=rc.seriesDataIndices||[];c=c&&ec.value===rc.value&&ec.axisType===rc.axisType&&ec.axisId===rc.axisId&&nc.length===ic.length,c&&each$f(nc,function(uc,eh){var rh=ic[eh];c=c&&uc.seriesIndex===rh.seriesIndex&&uc.dataIndex===rh.dataIndex}),u&&each$f(ec.seriesDataIndices,function(uc){var eh=uc.seriesIndex,rh=s[eh],ah=u[eh];rh&&ah&&ah.data!==rh.data&&(c=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=s,!!c},r.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},r.prototype.dispose=function(a,s){env.node||!s.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",s))},r.type="tooltip",r}(ComponentView);function buildTooltipModel(n,r,a){var s=r.ecModel,o;a?(o=new Model(a,s,s),o=new Model(r.option,o,s)):o=r;for(var u=n.length-1;u>=0;u--){var c=n[u];c&&(c instanceof Model&&(c=c.get("tooltip",!0)),isString(c)&&(c={formatter:c}),c&&(o=new Model(c,o,s)))}return o}function makeDispatchAction(n,r){return n.dispatchAction||bind$1(r.dispatchAction,r)}function refixTooltipPosition(n,r,a,s,o,u,c){var p=a.getSize(),d=p[0],_=p[1];return u!=null&&(n+d+u+2>s?n-=d+u:n+=u),c!=null&&(r+_+c>o?r-=_+c:r+=c),[n,r]}function confineTooltipPosition(n,r,a,s,o){var u=a.getSize(),c=u[0],p=u[1];return n=Math.min(n+c,s)-c,r=Math.min(r+p,o)-p,n=Math.max(n,0),r=Math.max(r,0),[n,r]}function calcTooltipPosition(n,r,a,s){var o=a[0],u=a[1],c=Math.ceil(Math.SQRT2*s)+8,p=0,d=0,_=r.width,ja=r.height;switch(n){case"inside":p=r.x+_/2-o/2,d=r.y+ja/2-u/2;break;case"top":p=r.x+_/2-o/2,d=r.y-u-c;break;case"bottom":p=r.x+_/2-o/2,d=r.y+ja+c;break;case"left":p=r.x-o-c,d=r.y+ja/2-u/2;break;case"right":p=r.x+_+c,d=r.y+ja/2-u/2}return[p,d]}function isCenterAlign(n){return n==="center"||n==="middle"}function findComponentReference(n,r,a){var s=preParseFinder(n).queryOptionMap,o=s.keys()[0];if(!(!o||o==="series")){var u=queryReferringComponents(r,o,s.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),c=u.models[0];if(c){var p=a.getViewOfComponentModel(c),d;if(p.group.traverse(function(_){var ja=getECData(_).tooltipConfig;if(ja&&ja.name===n.name)return d=_,!0}),d)return{componentMainType:o,componentIndex:c.componentIndex,el:d}}}}function install$y(n){use(install$G),n.registerComponentModel(TooltipModel),n.registerComponentView(TooltipView),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop$1),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop$1)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(n,r){var a=normalizeToArray(n?n.brush:[]);if(a.length){var s=[];each$f(a,function(d){var _=d.hasOwnProperty("toolbox")?d.toolbox:[];_ instanceof Array&&(s=s.concat(_))});var o=n&&n.toolbox;isArray$1(o)&&(o=o[0]),o||(o={feature:{}},n.toolbox=[o]);var u=o.feature||(o.feature={}),c=u.brush||(u.brush={}),p=c.type||(c.type=[]);p.push.apply(p,s),removeDuplicate(p),r&&!p.length&&p.push.apply(p,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(n){var r={};each$f(n,function(a){r[a]=1}),n.length=0,each$f(r,function(a,s){n.push(s)})}var each$4=each$f;function hasKeys(n){if(n){for(var r in n)if(n.hasOwnProperty(r))return!0}}function createVisualMappings(n,r,a){var s={};return each$4(r,function(u){var c=s[u]=o();each$4(n[u],function(p,d){if(VisualMapping.isValidType(d)){var _={type:d,visual:p};a&&a(_,u),c[d]=new VisualMapping(_),d==="opacity"&&(_=clone$4(_),_.type="colorAlpha",c.__hidden.__alphaForOpacity=new VisualMapping(_))}})}),s;function o(){var u=function(){};u.prototype.__hidden=u.prototype;var c=new u;return c}}function replaceVisualOption(n,r,a){var s;each$f(a,function(o){r.hasOwnProperty(o)&&hasKeys(r[o])&&(s=!0)}),s&&each$f(a,function(o){r.hasOwnProperty(o)&&hasKeys(r[o])?n[o]=clone$4(r[o]):delete n[o]})}function applyVisual(n,r,a,s,o,u){var c={};each$f(n,function(Ja){var ec=VisualMapping.prepareVisualTypes(r[Ja]);c[Ja]=ec});var p;function d(Ja){return getItemVisualFromData(a,p,Ja)}function _(Ja,ec){setItemVisualFromData(a,p,Ja,ec)}a.each(ja);function ja(Ja,ec){p=Ja;var tc=a.getRawDataItem(p);if(!(tc&&tc.visualMap===!1))for(var rc=s.call(o,Ja),nc=r[rc],ic=c[rc],uc=0,eh=ic.length;uc<eh;uc++){var rh=ic[uc];nc[rh]&&nc[rh].applyVisual(Ja,d,_)}}}function incrementalApplyVisual(n,r,a,s){var o={};return each$f(n,function(u){var c=VisualMapping.prepareVisualTypes(r[u]);o[u]=c}),{progress:function(c,p){var d;s!=null&&(d=p.getDimensionIndex(s));function _(ih){return getItemVisualFromData(p,Ja,ih)}function ja(ih,oh){setItemVisualFromData(p,Ja,ih,oh)}for(var Ja,ec=p.getStore();(Ja=c.next())!=null;){var tc=p.getRawDataItem(Ja);if(!(tc&&tc.visualMap===!1))for(var rc=s!=null?ec.get(d,Ja):Ja,nc=a(rc),ic=r[nc],uc=o[nc],eh=0,rh=uc.length;eh<rh;eh++){var ah=uc[eh];ic[ah]&&ic[ah].applyVisual(rc,_,ja)}}}}}function makeBrushCommonSelectorForSeries(n){var r=n.brushType,a={point:function(s){return selector[r].point(s,a,n)},rect:function(s){return selector[r].rect(s,a,n)}};return a}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(n,r,a){return n&&a.boundingRect.contain(n[0],n[1])},rect:function(n,r,a){return n&&a.boundingRect.intersect(n)}},polygon:{point:function(n,r,a){return n&&a.boundingRect.contain(n[0],n[1])&&contain(a.range,n[0],n[1])},rect:function(n,r,a){var s=a.range;if(!n||s.length<=1)return!1;var o=n.x,u=n.y,c=n.width,p=n.height,d=s[0];if(contain(s,o,u)||contain(s,o+c,u)||contain(s,o,u+p)||contain(s,o+c,u+p)||BoundingRect.create(n).contain(d[0],d[1])||linePolygonIntersect(o,u,o+c,u,s)||linePolygonIntersect(o,u,o,u+p,s)||linePolygonIntersect(o+c,u,o+c,u+p,s)||linePolygonIntersect(o,u+p,o+c,u+p,s))return!0}}};function getLineSelectors(n){var r=["x","y"],a=["width","height"];return{point:function(s,o,u){if(s){var c=u.range,p=s[n];return inLineRange(p,c)}},rect:function(s,o,u){if(s){var c=u.range,p=[s[r[n]],s[r[n]]+s[a[n]]];return p[1]<p[0]&&p.reverse(),inLineRange(p[0],c)||inLineRange(p[1],c)||inLineRange(c[0],p)||inLineRange(c[1],p)}}}}function inLineRange(n,r){return r[0]<=n&&n<=r[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(n){n.eachComponent({mainType:"brush"},function(r){var a=r.brushTargetManager=new BrushTargetManager(r.option,n);a.setInputRanges(r.areas,n)})}function brushVisual(n,r,a){var s=[],o,u;n.eachComponent({mainType:"brush"},function(c){a&&a.type==="takeGlobalCursor"&&c.setBrushOption(a.key==="brush"?a.brushOption:{brushType:!1})}),layoutCovers(n),n.eachComponent({mainType:"brush"},function(c,p){var d={brushId:c.id,brushIndex:p,brushName:c.name,areas:clone$4(c.areas),selected:[]};s.push(d);var _=c.option,ja=_.brushLink,Ja=[],ec=[],tc=[],rc=!1;p||(o=_.throttleType,u=_.throttleDelay);var nc=map$1(c.areas,function(ih){var oh=boundingRectBuilders[ih.brushType],uh=defaults({boundingRect:oh?oh(ih):void 0},ih);return uh.selectors=makeBrushCommonSelectorForSeries(uh),uh}),ic=createVisualMappings(c.option,STATE_LIST,function(ih){ih.mappingMethod="fixed"});isArray$1(ja)&&each$f(ja,function(ih){Ja[ih]=1});function uc(ih){return ja==="all"||!!Ja[ih]}function eh(ih){return!!ih.length}n.eachSeries(function(ih,oh){var uh=tc[oh]=[];ih.subType==="parallel"?rh(ih,oh):ah(ih,oh,uh)});function rh(ih,oh){var uh=ih.coordinateSystem;rc=rc||uh.hasAxisBrushed(),uc(oh)&&uh.eachActiveState(ih.getData(),function(ch,hh){ch==="active"&&(ec[hh]=1)})}function ah(ih,oh,uh){if(!(!ih.brushSelector||brushModelNotControll(c,oh))&&(each$f(nc,function(hh){c.brushTargetManager.controlSeries(hh,ih,n)&&uh.push(hh),rc=rc||eh(uh)}),uc(oh)&&eh(uh))){var ch=ih.getData();ch.each(function(hh){checkInRange(ih,uh,ch,hh)&&(ec[hh]=1)})}}n.eachSeries(function(ih,oh){var uh={seriesId:ih.id,seriesIndex:oh,seriesName:ih.name,dataIndex:[]};d.selected.push(uh);var ch=tc[oh],hh=ih.getData(),dh=uc(oh)?function(gh){return ec[gh]?(uh.dataIndex.push(hh.getRawIndex(gh)),"inBrush"):"outOfBrush"}:function(gh){return checkInRange(ih,ch,hh,gh)?(uh.dataIndex.push(hh.getRawIndex(gh)),"inBrush"):"outOfBrush"};(uc(oh)?rc:eh(ch))&&applyVisual(STATE_LIST,ic,hh,dh)})}),dispatchAction$1(r,o,u,s,a)}function dispatchAction$1(n,r,a,s,o){if(o){var u=n.getZr();if(!u[DISPATCH_FLAG]){u[DISPATCH_METHOD]||(u[DISPATCH_METHOD]=doDispatch);var c=createOrUpdate(u,DISPATCH_METHOD,a,r);c(n,s)}}}function doDispatch(n,r){if(!n.isDisposed()){var a=n.getZr();a[DISPATCH_FLAG]=!0,n.dispatchAction({type:"brushSelect",batch:r}),a[DISPATCH_FLAG]=!1}}function checkInRange(n,r,a,s){for(var o=0,u=r.length;o<u;o++){var c=r[o];if(n.brushSelector(s,a,c.selectors,c))return!0}}function brushModelNotControll(n,r){var a=n.option.seriesIndex;return a!=null&&a!=="all"&&(isArray$1(a)?indexOf(a,r)<0:r!==a)}var boundingRectBuilders={rect:function(n){return getBoundingRectFromMinMax(n.range)},polygon:function(n){for(var r,a=n.range,s=0,o=a.length;s<o;s++){r=r||[[1/0,-1/0],[1/0,-1/0]];var u=a[s];u[0]<r[0][0]&&(r[0][0]=u[0]),u[0]>r[0][1]&&(r[0][1]=u[0]),u[1]<r[1][0]&&(r[1][0]=u[1]),u[1]>r[1][1]&&(r[1][1]=u[1])}return r&&getBoundingRectFromMinMax(r)}};function getBoundingRectFromMinMax(n){return new BoundingRect(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var BrushView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a,s){this.ecModel=a,this.api=s,this.model,(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},r.prototype.render=function(a,s,o,u){this.model=a,this._updateController(a,s,o,u)},r.prototype.updateTransform=function(a,s,o,u){layoutCovers(s),this._updateController(a,s,o,u)},r.prototype.updateVisual=function(a,s,o,u){this.updateTransform(a,s,o,u)},r.prototype.updateView=function(a,s,o,u){this._updateController(a,s,o,u)},r.prototype._updateController=function(a,s,o,u){(!u||u.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(o)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},r.prototype.dispose=function(){this._brushController.dispose()},r.prototype._onBrush=function(a){var s=this.model.id,o=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:s,areas:clone$4(o),$from:s}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:s,areas:clone$4(o),$from:s})},r.type="brush",r}(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.areas=[],a.brushOption={},a}return r.prototype.optionUpdated=function(a,s){var o=this.option;!s&&replaceVisualOption(o,a,["inBrush","outOfBrush"]);var u=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},u.hasOwnProperty("liftZ")||(u.liftZ=5)},r.prototype.setAreas=function(a){a&&(this.areas=map$1(a,function(s){return generateBrushOption(this.option,s)},this))},r.prototype.setBrushOption=function(a){this.brushOption=generateBrushOption(this.option,a),this.brushType=this.brushOption.brushType},r.type="brush",r.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],r.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},r}(ComponentModel);function generateBrushOption(n,r){return merge({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new Model(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},r,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.render=function(a,s,o){var u,c,p;s.eachComponent({mainType:"brush"},function(d){u=d.brushType,c=d.brushOption.brushMode||"single",p=p||!!d.areas.length}),this._brushType=u,this._brushMode=c,each$f(a.get("type",!0),function(d){a.setIconStatus(d,(d==="keep"?c==="multiple":d==="clear"?p:d===u)?"emphasis":"normal")})},r.prototype.updateView=function(a,s,o){this.render(a,s,o)},r.prototype.getIcons=function(){var a=this.model,s=a.get("icon",!0),o={};return each$f(a.get("type",!0),function(u){s[u]&&(o[u]=s[u])}),o},r.prototype.onclick=function(a,s,o){var u=this._brushType,c=this._brushMode;o==="clear"?(s.dispatchAction({type:"axisAreaSelect",intervals:[]}),s.dispatchAction({type:"brush",command:"clear",areas:[]})):s.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:o==="keep"?u:u===o?!1:o,brushMode:o==="keep"?c==="multiple"?"single":"multiple":c}})},r.getDefaultOption=function(a){var s={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])};return s},r}(ToolboxFeature);function install$x(n){n.registerComponentView(BrushView),n.registerComponentModel(BrushModel),n.registerPreprocessor(brushPreprocessor),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,brushVisual),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(r,a){a.eachComponent({mainType:"brush",query:r},function(s){s.setAreas(r.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop$1),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop$1),registerFeature("brush",BrushFeature)}var TitleModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.layoutMode={type:"box",ignoreSize:!0},a}return r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(ComponentModel),TitleView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.render=function(a,s,o){if(this.group.removeAll(),!!a.get("show")){var u=this.group,c=a.getModel("textStyle"),p=a.getModel("subtextStyle"),d=a.get("textAlign"),_=retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),ja=new ZRText({style:createTextStyle(c,{text:a.get("text"),fill:c.getTextColor()},{disableBox:!0}),z2:10}),Ja=ja.getBoundingRect(),ec=a.get("subtext"),tc=new ZRText({style:createTextStyle(p,{text:ec,fill:p.getTextColor(),y:Ja.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),rc=a.get("link"),nc=a.get("sublink"),ic=a.get("triggerEvent",!0);ja.silent=!rc&&!ic,tc.silent=!nc&&!ic,rc&&ja.on("click",function(){windowOpen(rc,"_"+a.get("target"))}),nc&&tc.on("click",function(){windowOpen(nc,"_"+a.get("subtarget"))}),getECData(ja).eventData=getECData(tc).eventData=ic?{componentType:"title",componentIndex:a.componentIndex}:null,u.add(ja),ec&&u.add(tc);var uc=u.getBoundingRect(),eh=a.getBoxLayoutParams();eh.width=uc.width,eh.height=uc.height;var rh=getLayoutRect(eh,{width:o.getWidth(),height:o.getHeight()},a.get("padding"));d||(d=a.get("left")||a.get("right"),d==="middle"&&(d="center"),d==="right"?rh.x+=rh.width:d==="center"&&(rh.x+=rh.width/2)),_||(_=a.get("top")||a.get("bottom"),_==="center"&&(_="middle"),_==="bottom"?rh.y+=rh.height:_==="middle"&&(rh.y+=rh.height/2),_=_||"top"),u.x=rh.x,u.y=rh.y,u.markRedraw();var ah={align:d,verticalAlign:_};ja.setStyle(ah),tc.setStyle(ah),uc=u.getBoundingRect();var ih=rh.margin,oh=a.getItemStyle(["color","opacity"]);oh.fill=a.get("backgroundColor");var uh=new Rect$2({shape:{x:uc.x-ih[3],y:uc.y-ih[0],width:uc.width+ih[1]+ih[3],height:uc.height+ih[0]+ih[2],r:a.get("borderRadius")},style:oh,subPixelOptimize:!0,silent:!0});u.add(uh)}},r.type="title",r}(ComponentView);function install$w(n){n.registerComponentModel(TitleModel),n.registerComponentView(TitleView)}var TimelineModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.layoutMode="box",a}return r.prototype.init=function(a,s,o){this.mergeDefaultAndTheme(a,o),this._initData()},r.prototype.mergeOption=function(a){n.prototype.mergeOption.apply(this,arguments),this._initData()},r.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var s=this._data.count();this.option.loop?a=(a%s+s)%s:(a>=s&&(a=s-1),a<0&&(a=0)),this.option.currentIndex=a},r.prototype.getCurrentIndex=function(){return this.option.currentIndex},r.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},r.prototype.setPlayState=function(a){this.option.autoPlay=!!a},r.prototype.getPlayState=function(){return!!this.option.autoPlay},r.prototype._initData=function(){var a=this.option,s=a.data||[],o=a.axisType,u=this._names=[],c;o==="category"?(c=[],each$f(s,function(_,ja){var Ja=convertOptionIdName(getDataItemValue(_),""),ec;isObject$3(_)?(ec=clone$4(_),ec.value=ja):ec=ja,c.push(ec),u.push(Ja)})):c=s;var p={category:"ordinal",time:"time",value:"number"}[o]||"number",d=this._data=new SeriesData([{name:"value",type:p}],this);d.initData(c,u)},r.prototype.getData=function(){return this._data},r.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},r.type="timeline",r.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},r}(ComponentModel),SliderTimelineModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="timeline.slider",r.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),r}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="timeline",r}(ComponentView),TimelineAxis=function(n){__extends(r,n);function r(a,s,o,u){var c=n.call(this,a,s,o)||this;return c.type=u||"value",c}return r.prototype.getLabelModel=function(){return this.model.getModel("label")},r.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},r}(Axis),PI$2=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(a,s){this.api=s},r.prototype.render=function(a,s,o){if(this.model=a,this.api=o,this.ecModel=s,this.group.removeAll(),a.get("show",!0)){var u=this._layout(a,o),c=this._createGroup("_mainGroup"),p=this._createGroup("_labelGroup"),d=this._axis=this._createAxis(u,a);a.formatTooltip=function(_){var ja=d.scale.getLabel({value:_});return createTooltipMarkup("nameValue",{noName:!0,value:ja})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(_){this["_render"+_](u,c,d,a)},this),this._renderAxisLabel(u,p,d,a),this._position(u,a)}this._doPlayStop(),this._updateTicksStatus()},r.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},r.prototype.dispose=function(){this._clearTimer()},r.prototype._layout=function(a,s){var o=a.get(["label","position"]),u=a.get("orient"),c=getViewRect(a,s),p;o==null||o==="auto"?p=u==="horizontal"?c.y+c.height/2<s.getHeight()/2?"-":"+":c.x+c.width/2<s.getWidth()/2?"+":"-":isString(o)?p={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[u][o]:p=o;var d={horizontal:"center",vertical:p>=0||p==="+"?"left":"right"},_={horizontal:p>=0||p==="+"?"top":"bottom",vertical:"middle"},ja={horizontal:0,vertical:PI$2/2},Ja=u==="vertical"?c.height:c.width,ec=a.getModel("controlStyle"),tc=ec.get("show",!0),rc=tc?ec.get("itemSize"):0,nc=tc?ec.get("itemGap"):0,ic=rc+nc,uc=a.get(["label","rotate"])||0;uc=uc*PI$2/180;var eh,rh,ah,ih=ec.get("position",!0),oh=tc&&ec.get("showPlayBtn",!0),uh=tc&&ec.get("showPrevBtn",!0),ch=tc&&ec.get("showNextBtn",!0),hh=0,dh=Ja;ih==="left"||ih==="bottom"?(oh&&(eh=[0,0],hh+=ic),uh&&(rh=[hh,0],hh+=ic),ch&&(ah=[dh-rc,0],dh-=ic)):(oh&&(eh=[dh-rc,0],dh-=ic),uh&&(rh=[0,0],hh+=ic),ch&&(ah=[dh-rc,0],dh-=ic));var gh=[hh,dh];return a.get("inverse")&&gh.reverse(),{viewRect:c,mainLength:Ja,orient:u,rotation:ja[u],labelRotation:uc,labelPosOpt:p,labelAlign:a.get(["label","align"])||d[u],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||_[u],playPosition:eh,prevBtnPosition:rh,nextBtnPosition:ah,axisExtent:gh,controlSize:rc,controlGap:nc}},r.prototype._position=function(a,s){var o=this._mainGroup,u=this._labelGroup,c=a.viewRect;if(a.orient==="vertical"){var p=create$2(),d=c.x,_=c.y+c.height;translate(p,p,[-d,-_]),rotate(p,p,-PI$2/2),translate(p,p,[d,_]),c=c.clone(),c.applyTransform(p)}var ja=eh(c),Ja=eh(o.getBoundingRect()),ec=eh(u.getBoundingRect()),tc=[o.x,o.y],rc=[u.x,u.y];rc[0]=tc[0]=ja[0][0];var nc=a.labelPosOpt;if(nc==null||isString(nc)){var ic=nc==="+"?0:1;rh(tc,Ja,ja,1,ic),rh(rc,ec,ja,1,1-ic)}else{var ic=nc>=0?0:1;rh(tc,Ja,ja,1,ic),rc[1]=tc[1]+nc}o.setPosition(tc),u.setPosition(rc),o.rotation=u.rotation=a.rotation,uc(o),uc(u);function uc(ah){ah.originX=ja[0][0]-ah.x,ah.originY=ja[1][0]-ah.y}function eh(ah){return[[ah.x,ah.x+ah.width],[ah.y,ah.y+ah.height]]}function rh(ah,ih,oh,uh,ch){ah[uh]+=oh[uh][ch]-ih[uh][ch]}},r.prototype._createAxis=function(a,s){var o=s.getData(),u=s.get("axisType"),c=createScaleByModel(s,u);c.getTicks=function(){return o.mapArray(["value"],function(_){return{value:_}})};var p=o.getDataExtent("value");c.setExtent(p[0],p[1]),c.calcNiceTicks();var d=new TimelineAxis("value",c,a.axisExtent,u);return d.model=s,d},r.prototype._createGroup=function(a){var s=this[a]=new Group$3;return this.group.add(s),s},r.prototype._renderAxisLine=function(a,s,o,u){var c=o.getExtent();if(u.get(["lineStyle","show"])){var p=new Line$2({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:extend$2({lineCap:"round"},u.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});s.add(p);var d=this._progressLine=new Line$2({shape:{x1:c[0],x2:this._currentPointer?this._currentPointer.x:c[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:p.style.lineWidth},u.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});s.add(d)}},r.prototype._renderAxisTick=function(a,s,o,u){var c=this,p=u.getData(),d=o.scale.getTicks();this._tickSymbols=[],each$f(d,function(_){var ja=o.dataToCoord(_.value),Ja=p.getItemModel(_.value),ec=Ja.getModel("itemStyle"),tc=Ja.getModel(["emphasis","itemStyle"]),rc=Ja.getModel(["progress","itemStyle"]),nc={x:ja,y:0,onclick:bind$1(c._changeTimeline,c,_.value)},ic=giveSymbol(Ja,ec,s,nc);ic.ensureState("emphasis").style=tc.getItemStyle(),ic.ensureState("progress").style=rc.getItemStyle(),enableHoverEmphasis(ic);var uc=getECData(ic);Ja.get("tooltip")?(uc.dataIndex=_.value,uc.dataModel=u):uc.dataIndex=uc.dataModel=null,c._tickSymbols.push(ic)})},r.prototype._renderAxisLabel=function(a,s,o,u){var c=this,p=o.getLabelModel();if(p.get("show")){var d=u.getData(),_=o.getViewLabels();this._tickLabels=[],each$f(_,function(ja){var Ja=ja.tickValue,ec=d.getItemModel(Ja),tc=ec.getModel("label"),rc=ec.getModel(["emphasis","label"]),nc=ec.getModel(["progress","label"]),ic=o.dataToCoord(ja.tickValue),uc=new ZRText({x:ic,y:0,rotation:a.labelRotation-a.rotation,onclick:bind$1(c._changeTimeline,c,Ja),silent:!1,style:createTextStyle(tc,{text:ja.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});uc.ensureState("emphasis").style=createTextStyle(rc),uc.ensureState("progress").style=createTextStyle(nc),s.add(uc),enableHoverEmphasis(uc),labelDataIndexStore(uc).dataIndex=Ja,c._tickLabels.push(uc)})}},r.prototype._renderControl=function(a,s,o,u){var c=a.controlSize,p=a.rotation,d=u.getModel("controlStyle").getItemStyle(),_=u.getModel(["emphasis","controlStyle"]).getItemStyle(),ja=u.getPlayState(),Ja=u.get("inverse",!0);ec(a.nextBtnPosition,"next",bind$1(this._changeTimeline,this,Ja?"-":"+")),ec(a.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,Ja?"+":"-")),ec(a.playPosition,ja?"stop":"play",bind$1(this._handlePlayClick,this,!ja),!0);function ec(tc,rc,nc,ic){if(tc){var uc=parsePercent$1(retrieve2(u.get(["controlStyle",rc+"BtnSize"]),c),c),eh=[0,-uc/2,uc,uc],rh=makeControlIcon(u,rc+"Icon",eh,{x:tc[0],y:tc[1],originX:c/2,originY:0,rotation:ic?-p:0,rectHover:!0,style:d,onclick:nc});rh.ensureState("emphasis").style=_,s.add(rh),enableHoverEmphasis(rh)}}},r.prototype._renderCurrentPointer=function(a,s,o,u){var c=u.getData(),p=u.getCurrentIndex(),d=c.getItemModel(p).getModel("checkpointStyle"),_=this,ja={onCreate:function(Ja){Ja.draggable=!0,Ja.drift=bind$1(_._handlePointerDrag,_),Ja.ondragend=bind$1(_._handlePointerDragend,_),pointerMoveTo(Ja,_._progressLine,p,o,u,!0)},onUpdate:function(Ja){pointerMoveTo(Ja,_._progressLine,p,o,u)}};this._currentPointer=giveSymbol(d,d,this._mainGroup,{},this._currentPointer,ja)},r.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},r.prototype._handlePointerDrag=function(a,s,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},r.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},r.prototype._pointerChangeTimeline=function(a,s){var o=this._toAxisCoord(a)[0],u=this._axis,c=asc$2(u.getExtent().slice());o>c[1]&&(o=c[1]),o<c[0]&&(o=c[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var p=this._progressLine;p&&(p.shape.x2=o,p.dirty());var d=this._findNearestTick(o),_=this.model;(s||d!==_.getCurrentIndex()&&_.get("realtime"))&&this._changeTimeline(d)},r.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var s=a.model;a._changeTimeline(s.getCurrentIndex()+(s.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},r.prototype._toAxisCoord=function(a){var s=this._mainGroup.getLocalTransform();return applyTransform(a,s,!0)},r.prototype._findNearestTick=function(a){var s=this.model.getData(),o=1/0,u,c=this._axis;return s.each(["value"],function(p,d){var _=c.dataToCoord(p),ja=Math.abs(_-a);ja<o&&(o=ja,u=d)}),u},r.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},r.prototype._changeTimeline=function(a){var s=this.model.getCurrentIndex();a==="+"?a=s+1:a==="-"&&(a=s-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},r.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),s=this._tickSymbols,o=this._tickLabels;if(s)for(var u=0;u<s.length;u++)s&&s[u]&&s[u].toggleState("progress",u<a);if(o)for(var u=0;u<o.length;u++)o&&o[u]&&o[u].toggleState("progress",labelDataIndexStore(o[u]).dataIndex<=a)},r.type="timeline.slider",r}(TimelineView);function createScaleByModel(n,r){if(r=r||n.get("type"),r)switch(r){case"category":return new OrdinalScale({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(n,r){return getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()},n.get("padding"))}function makeControlIcon(n,r,a,s){var o=s.style,u=createIcon(n.get(["controlStyle",r]),s||{},new BoundingRect(a[0],a[1],a[2],a[3]));return o&&u.setStyle(o),u}function giveSymbol(n,r,a,s,o,u){var c=r.get("color");if(o)o.setColor(c),a.add(o),u&&u.onUpdate(o);else{var p=n.get("symbol");o=createSymbol$1(p,-1,-1,2,2,c),o.setStyle("strokeNoScale",!0),a.add(o),u&&u.onCreate(o)}var d=r.getItemStyle(["color"]);o.setStyle(d),s=merge({rectHover:!0,z2:100},s,!0);var _=normalizeSymbolSize(n.get("symbolSize"));s.scaleX=_[0]/2,s.scaleY=_[1]/2;var ja=normalizeSymbolOffset(n.get("symbolOffset"),_);ja&&(s.x=(s.x||0)+ja[0],s.y=(s.y||0)+ja[1]);var Ja=n.get("symbolRotate");return s.rotation=(Ja||0)*Math.PI/180||0,o.attr(s),o.updateTransform(),o}function pointerMoveTo(n,r,a,s,o,u){if(!n.dragging){var c=o.getModel("checkpointStyle"),p=s.dataToCoord(o.getData().get("value",a));if(u||!c.get("animation",!0))n.attr({x:p,y:0}),r&&r.attr({shape:{x2:p}});else{var d={duration:c.get("animationDuration",!0),easing:c.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:p,y:0},d),r&&r.animateTo({shape:{x2:p}},d)}}}function installTimelineAction(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(r,a,s){var o=a.getComponent("timeline");return o&&r.currentIndex!=null&&(o.setCurrentIndex(r.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),s.dispatchAction({type:"timelinePlayChange",playState:!1,from:r.from}))),a.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),defaults({currentIndex:o.option.currentIndex},r)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(r,a){var s=a.getComponent("timeline");s&&r.playState!=null&&s.setPlayState(r.playState)})}function timelinePreprocessor(n){var r=n&&n.timeline;isArray$1(r)||(r=r?[r]:[]),each$f(r,function(a){a&&compatibleEC2(a)})}function compatibleEC2(n){var r=n.type,a={number:"value",time:"time"};if(a[r]&&(n.axisType=a[r],delete n.type),transferItem(n),has$1(n,"controlPosition")){var s=n.controlStyle||(n.controlStyle={});has$1(s,"position")||(s.position=n.controlPosition),s.position==="none"&&!has$1(s,"show")&&(s.show=!1,delete s.position),delete n.controlPosition}each$f(n.data||[],function(o){isObject$3(o)&&!isArray$1(o)&&(!has$1(o,"value")&&has$1(o,"name")&&(o.value=o.name),transferItem(o))})}function transferItem(n){var r=n.itemStyle||(n.itemStyle={}),a=r.emphasis||(r.emphasis={}),s=n.label||n.label||{},o=s.normal||(s.normal={}),u={normal:1,emphasis:1};each$f(s,function(c,p){!u[p]&&!has$1(o,p)&&(o[p]=c)}),a.label&&!has$1(s,"emphasis")&&(s.emphasis=a.label,delete a.label)}function has$1(n,r){return n.hasOwnProperty(r)}function install$v(n){n.registerComponentModel(SliderTimelineModel),n.registerComponentView(SliderTimelineView),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(n),n.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(n,r){if(!n)return!1;for(var a=isArray$1(n)?n:[n],s=0;s<a.length;s++)if(a[s]&&a[s][r])return!0;return!1}function fillLabel(n){defaultEmphasis(n,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.createdBySelf=!1,a}return r.prototype.init=function(a,s,o){this.mergeDefaultAndTheme(a,o),this._mergeOption(a,o,!1,!0)},r.prototype.isAnimationEnabled=function(){if(env.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},r.prototype.mergeOption=function(a,s){this._mergeOption(a,s,!1,!1)},r.prototype._mergeOption=function(a,s,o,u){var c=this.mainType;o||s.eachSeries(function(p){var d=p.get(this.mainType,!0),_=inner$5(p)[c];if(!d||!d.data){inner$5(p)[c]=null;return}_?_._mergeOption(d,s,!0):(u&&fillLabel(d),each$f(d.data,function(ja){ja instanceof Array?(fillLabel(ja[0]),fillLabel(ja[1])):fillLabel(ja)}),_=this.createMarkerModelFromSeries(d,this,s),extend$2(_,{mainType:this.mainType,seriesIndex:p.seriesIndex,name:p.name,createdBySelf:!0}),_.__hostSeries=p),inner$5(p)[c]=_},this)},r.prototype.formatTooltip=function(a,s,o){var u=this.getData(),c=this.getRawValue(a),p=u.getName(a);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:p,value:c,noName:!p,noValue:c==null})]})},r.prototype.getData=function(){return this._data},r.prototype.setData=function(a){this._data=a},r.getMarkerModelFromSeries=function(a,s){return inner$5(a)[s]},r.type="marker",r.dependencies=["series","grid","polar","geo"],r}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.createMarkerModelFromSeries=function(a,s,o){return new r(a,s,o)},r.type="markPoint",r.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},r}(MarkerModel);function hasXOrY(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function hasXAndY(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function markerTypeCalculatorWithExtent(n,r,a,s,o,u){var c=[],p=isDimensionStacked$2(r,s),d=p?r.getCalculationInfo("stackResultDimension"):s,_=numCalculate(r,d,n),ja=r.indicesOfNearest(d,_)[0];c[o]=r.get(a,ja),c[u]=r.get(d,ja);var Ja=r.get(s,ja),ec=getPrecision(r.get(s,ja));return ec=Math.min(ec,20),ec>=0&&(c[u]=+c[u].toFixed(ec)),[c,Ja]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(n,r){if(r){var a=n.getData(),s=n.coordinateSystem,o=s&&s.dimensions;if(!hasXAndY(r)&&!isArray$1(r.coord)&&isArray$1(o)){var u=getAxisInfo(r,a,s,n);if(r=clone$4(r),r.type&&markerTypeCalculator[r.type]&&u.baseAxis&&u.valueAxis){var c=indexOf(o,u.baseAxis.dim),p=indexOf(o,u.valueAxis.dim),d=markerTypeCalculator[r.type](a,u.baseDataDim,u.valueDataDim,c,p);r.coord=d[0],r.value=d[1]}else r.coord=[r.xAxis!=null?r.xAxis:r.radiusAxis,r.yAxis!=null?r.yAxis:r.angleAxis]}if(r.coord==null||!isArray$1(o))r.coord=[];else for(var _=r.coord,ja=0;ja<2;ja++)markerTypeCalculator[_[ja]]&&(_[ja]=numCalculate(a,a.mapDimension(o[ja]),_[ja]));return r}}function getAxisInfo(n,r,a,s){var o={};return n.valueIndex!=null||n.valueDim!=null?(o.valueDataDim=n.valueIndex!=null?r.getDimension(n.valueIndex):n.valueDim,o.valueAxis=a.getAxis(dataDimToCoordDim(s,o.valueDataDim)),o.baseAxis=a.getOtherAxis(o.valueAxis),o.baseDataDim=r.mapDimension(o.baseAxis.dim)):(o.baseAxis=s.getBaseAxis(),o.valueAxis=a.getOtherAxis(o.baseAxis),o.baseDataDim=r.mapDimension(o.baseAxis.dim),o.valueDataDim=r.mapDimension(o.valueAxis.dim)),o}function dataDimToCoordDim(n,r){var a=n.getData().getDimensionInfo(r);return a&&a.coordDim}function dataFilter(n,r){return n&&n.containData&&r.coord&&!hasXOrY(r)?n.containData(r.coord):!0}function zoneFilter(n,r,a){return n&&n.containZone&&r.coord&&a.coord&&!hasXOrY(r)&&!hasXOrY(a)?n.containZone(r.coord,a.coord):!0}function createMarkerDimValueGetter(n,r){return n?function(a,s,o,u){var c=u<2?a.coord&&a.coord[u]:a.value;return parseDataValue(c,r[u])}:function(a,s,o,u){return parseDataValue(a.value,r[u])}}function numCalculate(n,r,a){if(a==="average"){var s=0,o=0;return n.each(r,function(u,c){isNaN(u)||(s+=u,o++)}),s/o}else return a==="median"?n.getMedian(r):n.getDataExtent(r)[a==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.init=function(){this.markerGroupMap=createHashMap()},r.prototype.render=function(a,s,o){var u=this,c=this.markerGroupMap;c.each(function(p){inner$4(p).keep=!1}),s.eachSeries(function(p){var d=MarkerModel.getMarkerModelFromSeries(p,u.type);d&&u.renderSeries(p,d,s,o)}),c.each(function(p){!inner$4(p).keep&&u.group.remove(p.group)})},r.prototype.markKeep=function(a){inner$4(a).keep=!0},r.prototype.toggleBlurSeries=function(a,s){var o=this;each$f(a,function(u){var c=MarkerModel.getMarkerModelFromSeries(u,o.type);if(c){var p=c.getData();p.eachItemGraphicEl(function(d){d&&(s?enterBlur(d):leaveBlur(d))})}})},r.type="marker",r}(ComponentView);function updateMarkerLayout(n,r,a){var s=r.coordinateSystem;n.each(function(o){var u=n.getItemModel(o),c,p=parsePercent(u.get("x"),a.getWidth()),d=parsePercent(u.get("y"),a.getHeight());if(!isNaN(p)&&!isNaN(d))c=[p,d];else if(r.getMarkerPosition)c=r.getMarkerPosition(n.getValues(n.dimensions,o));else if(s){var _=n.get(s.dimensions[0],o),ja=n.get(s.dimensions[1],o);c=s.dataToPoint([_,ja])}isNaN(p)||(c[0]=p),isNaN(d)||(c[1]=d),n.setItemLayout(o,c)})}var MarkPointView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.updateTransform=function(a,s,o){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markPoint");c&&(updateMarkerLayout(c.getData(),u,o),this.markerGroupMap.get(u.id).updateLayout())},this)},r.prototype.renderSeries=function(a,s,o,u){var c=a.coordinateSystem,p=a.id,d=a.getData(),_=this.markerGroupMap,ja=_.get(p)||_.set(p,new SymbolDraw),Ja=createData(c,a,s);s.setData(Ja),updateMarkerLayout(s.getData(),a,u),Ja.each(function(ec){var tc=Ja.getItemModel(ec),rc=tc.getShallow("symbol"),nc=tc.getShallow("symbolSize"),ic=tc.getShallow("symbolRotate"),uc=tc.getShallow("symbolOffset"),eh=tc.getShallow("symbolKeepAspect");if(isFunction(rc)||isFunction(nc)||isFunction(ic)||isFunction(uc)){var rh=s.getRawValue(ec),ah=s.getDataParams(ec);isFunction(rc)&&(rc=rc(rh,ah)),isFunction(nc)&&(nc=nc(rh,ah)),isFunction(ic)&&(ic=ic(rh,ah)),isFunction(uc)&&(uc=uc(rh,ah))}var ih=tc.getModel("itemStyle").getItemStyle(),oh=getVisualFromData(d,"color");ih.fill||(ih.fill=oh),Ja.setItemVisual(ec,{symbol:rc,symbolSize:nc,symbolRotate:ic,symbolOffset:uc,symbolKeepAspect:eh,style:ih})}),ja.updateData(Ja),this.group.add(ja.group),Ja.eachItemGraphicEl(function(ec){ec.traverse(function(tc){getECData(tc).dataModel=s})}),this.markKeep(ja),ja.group.silent=s.get("silent")||a.get("silent")},r.type="markPoint",r}(MarkerView);function createData(n,r,a){var s;n?s=map$1(n&&n.dimensions,function(p){var d=r.getData().getDimensionInfo(r.getData().mapDimension(p))||{};return extend$2(extend$2({},d),{name:p,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var o=new SeriesData(s,a),u=map$1(a.get("data"),curry$1(dataTransform,r));n&&(u=filter(u,curry$1(dataFilter,n)));var c=createMarkerDimValueGetter(!!n,s);return o.initData(u,null,c),o}function install$u(n){n.registerComponentModel(MarkPointModel),n.registerComponentView(MarkPointView),n.registerPreprocessor(function(r){checkMarkerInSeries(r.series,"markPoint")&&(r.markPoint=r.markPoint||{})})}var MarkLineModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.createMarkerModelFromSeries=function(a,s,o){return new r(a,s,o)},r.type="markLine",r.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},r}(MarkerModel),inner$3=makeInner(),markLineTransform=function(n,r,a,s){var o=n.getData(),u;if(isArray$1(s))u=s;else{var c=s.type;if(c==="min"||c==="max"||c==="average"||c==="median"||s.xAxis!=null||s.yAxis!=null){var p=void 0,d=void 0;if(s.yAxis!=null||s.xAxis!=null)p=r.getAxis(s.yAxis!=null?"y":"x"),d=retrieve$1(s.yAxis,s.xAxis);else{var _=getAxisInfo(s,o,r,n);p=_.valueAxis;var ja=getStackedDimension(o,_.valueDataDim);d=numCalculate(o,ja,c)}var Ja=p.dim==="x"?0:1,ec=1-Ja,tc=clone$4(s),rc={coord:[]};tc.type=null,tc.coord=[],tc.coord[ec]=-1/0,rc.coord[ec]=1/0;var nc=a.get("precision");nc>=0&&isNumber(d)&&(d=+d.toFixed(Math.min(nc,20))),tc.coord[Ja]=rc.coord[Ja]=d,u=[tc,rc,{type:c,valueIndex:s.valueIndex,value:d}]}else u=[]}var ic=[dataTransform(n,u[0]),dataTransform(n,u[1]),extend$2({},u[2])];return ic[2].type=ic[2].type||null,merge(ic[2],ic[0]),merge(ic[2],ic[1]),ic};function isInfinity$1(n){return!isNaN(n)&&!isFinite(n)}function ifMarkLineHasOnlyDim(n,r,a,s){var o=1-n,u=s.dimensions[n];return isInfinity$1(r[o])&&isInfinity$1(a[o])&&r[n]===a[n]&&s.getAxis(u).containData(r[n])}function markLineFilter(n,r){if(n.type==="cartesian2d"){var a=r[0].coord,s=r[1].coord;if(a&&s&&(ifMarkLineHasOnlyDim(1,a,s,n)||ifMarkLineHasOnlyDim(0,a,s,n)))return!0}return dataFilter(n,r[0])&&dataFilter(n,r[1])}function updateSingleMarkerEndLayout(n,r,a,s,o){var u=s.coordinateSystem,c=n.getItemModel(r),p,d=parsePercent(c.get("x"),o.getWidth()),_=parsePercent(c.get("y"),o.getHeight());if(!isNaN(d)&&!isNaN(_))p=[d,_];else{if(s.getMarkerPosition)p=s.getMarkerPosition(n.getValues(n.dimensions,r));else{var ja=u.dimensions,Ja=n.get(ja[0],r),ec=n.get(ja[1],r);p=u.dataToPoint([Ja,ec])}if(isCoordinateSystemType(u,"cartesian2d")){var tc=u.getAxis("x"),rc=u.getAxis("y"),ja=u.dimensions;isInfinity$1(n.get(ja[0],r))?p[0]=tc.toGlobalCoord(tc.getExtent()[a?0:1]):isInfinity$1(n.get(ja[1],r))&&(p[1]=rc.toGlobalCoord(rc.getExtent()[a?0:1]))}isNaN(d)||(p[0]=d),isNaN(_)||(p[1]=_)}n.setItemLayout(r,p)}var MarkLineView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.updateTransform=function(a,s,o){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markLine");if(c){var p=c.getData(),d=inner$3(c).from,_=inner$3(c).to;d.each(function(ja){updateSingleMarkerEndLayout(d,ja,!0,u,o),updateSingleMarkerEndLayout(_,ja,!1,u,o)}),p.each(function(ja){p.setItemLayout(ja,[d.getItemLayout(ja),_.getItemLayout(ja)])}),this.markerGroupMap.get(u.id).updateLayout()}},this)},r.prototype.renderSeries=function(a,s,o,u){var c=a.coordinateSystem,p=a.id,d=a.getData(),_=this.markerGroupMap,ja=_.get(p)||_.set(p,new LineDraw);this.group.add(ja.group);var Ja=createList$2(c,a,s),ec=Ja.from,tc=Ja.to,rc=Ja.line;inner$3(s).from=ec,inner$3(s).to=tc,s.setData(rc);var nc=s.get("symbol"),ic=s.get("symbolSize"),uc=s.get("symbolRotate"),eh=s.get("symbolOffset");isArray$1(nc)||(nc=[nc,nc]),isArray$1(ic)||(ic=[ic,ic]),isArray$1(uc)||(uc=[uc,uc]),isArray$1(eh)||(eh=[eh,eh]),Ja.from.each(function(ah){rh(ec,ah,!0),rh(tc,ah,!1)}),rc.each(function(ah){var ih=rc.getItemModel(ah).getModel("lineStyle").getLineStyle();rc.setItemLayout(ah,[ec.getItemLayout(ah),tc.getItemLayout(ah)]),ih.stroke==null&&(ih.stroke=ec.getItemVisual(ah,"style").fill),rc.setItemVisual(ah,{fromSymbolKeepAspect:ec.getItemVisual(ah,"symbolKeepAspect"),fromSymbolOffset:ec.getItemVisual(ah,"symbolOffset"),fromSymbolRotate:ec.getItemVisual(ah,"symbolRotate"),fromSymbolSize:ec.getItemVisual(ah,"symbolSize"),fromSymbol:ec.getItemVisual(ah,"symbol"),toSymbolKeepAspect:tc.getItemVisual(ah,"symbolKeepAspect"),toSymbolOffset:tc.getItemVisual(ah,"symbolOffset"),toSymbolRotate:tc.getItemVisual(ah,"symbolRotate"),toSymbolSize:tc.getItemVisual(ah,"symbolSize"),toSymbol:tc.getItemVisual(ah,"symbol"),style:ih})}),ja.updateData(rc),Ja.line.eachItemGraphicEl(function(ah){getECData(ah).dataModel=s,ah.traverse(function(ih){getECData(ih).dataModel=s})});function rh(ah,ih,oh){var uh=ah.getItemModel(ih);updateSingleMarkerEndLayout(ah,ih,oh,a,u);var ch=uh.getModel("itemStyle").getItemStyle();ch.fill==null&&(ch.fill=getVisualFromData(d,"color")),ah.setItemVisual(ih,{symbolKeepAspect:uh.get("symbolKeepAspect"),symbolOffset:retrieve2(uh.get("symbolOffset",!0),eh[oh?0:1]),symbolRotate:retrieve2(uh.get("symbolRotate",!0),uc[oh?0:1]),symbolSize:retrieve2(uh.get("symbolSize"),ic[oh?0:1]),symbol:retrieve2(uh.get("symbol",!0),nc[oh?0:1]),style:ch})}this.markKeep(ja),ja.group.silent=s.get("silent")||a.get("silent")},r.type="markLine",r}(MarkerView);function createList$2(n,r,a){var s;n?s=map$1(n&&n.dimensions,function(_){var ja=r.getData().getDimensionInfo(r.getData().mapDimension(_))||{};return extend$2(extend$2({},ja),{name:_,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var o=new SeriesData(s,a),u=new SeriesData(s,a),c=new SeriesData([],a),p=map$1(a.get("data"),curry$1(markLineTransform,r,n,a));n&&(p=filter(p,curry$1(markLineFilter,n)));var d=createMarkerDimValueGetter(!!n,s);return o.initData(map$1(p,function(_){return _[0]}),null,d),u.initData(map$1(p,function(_){return _[1]}),null,d),c.initData(map$1(p,function(_){return _[2]})),c.hasItemOption=!0,{from:o,to:u,line:c}}function install$t(n){n.registerComponentModel(MarkLineModel),n.registerComponentView(MarkLineView),n.registerPreprocessor(function(r){checkMarkerInSeries(r.series,"markLine")&&(r.markLine=r.markLine||{})})}var MarkAreaModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.createMarkerModelFromSeries=function(a,s,o){return new r(a,s,o)},r.type="markArea",r.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},r}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(n,r,a,s){var o=s[0],u=s[1];if(!(!o||!u)){var c=dataTransform(n,o),p=dataTransform(n,u),d=c.coord,_=p.coord;d[0]=retrieve$1(d[0],-1/0),d[1]=retrieve$1(d[1],-1/0),_[0]=retrieve$1(_[0],1/0),_[1]=retrieve$1(_[1],1/0);var ja=mergeAll([{},c,p]);return ja.coord=[c.coord,p.coord],ja.x0=c.x,ja.y0=c.y,ja.x1=p.x,ja.y1=p.y,ja}};function isInfinity(n){return!isNaN(n)&&!isFinite(n)}function ifMarkAreaHasOnlyDim(n,r,a,s){var o=1-n;return isInfinity(r[o])&&isInfinity(a[o])}function markAreaFilter(n,r){var a=r.coord[0],s=r.coord[1],o={coord:a,x:r.x0,y:r.y0},u={coord:s,x:r.x1,y:r.y1};return isCoordinateSystemType(n,"cartesian2d")?a&&s&&(ifMarkAreaHasOnlyDim(1,a,s)||ifMarkAreaHasOnlyDim(0,a,s))?!0:zoneFilter(n,o,u):dataFilter(n,o)||dataFilter(n,u)}function getSingleMarkerEndPoint(n,r,a,s,o){var u=s.coordinateSystem,c=n.getItemModel(r),p,d=parsePercent(c.get(a[0]),o.getWidth()),_=parsePercent(c.get(a[1]),o.getHeight());if(!isNaN(d)&&!isNaN(_))p=[d,_];else{if(s.getMarkerPosition){var ja=n.getValues(["x0","y0"],r),Ja=n.getValues(["x1","y1"],r),ec=u.clampData(ja),tc=u.clampData(Ja),rc=[];a[0]==="x0"?rc[0]=ec[0]>tc[0]?Ja[0]:ja[0]:rc[0]=ec[0]>tc[0]?ja[0]:Ja[0],a[1]==="y0"?rc[1]=ec[1]>tc[1]?Ja[1]:ja[1]:rc[1]=ec[1]>tc[1]?ja[1]:Ja[1],p=s.getMarkerPosition(rc,a,!0)}else{var nc=n.get(a[0],r),ic=n.get(a[1],r),uc=[nc,ic];u.clampData&&u.clampData(uc,uc),p=u.dataToPoint(uc,!0)}if(isCoordinateSystemType(u,"cartesian2d")){var eh=u.getAxis("x"),rh=u.getAxis("y"),nc=n.get(a[0],r),ic=n.get(a[1],r);isInfinity(nc)?p[0]=eh.toGlobalCoord(eh.getExtent()[a[0]==="x0"?0:1]):isInfinity(ic)&&(p[1]=rh.toGlobalCoord(rh.getExtent()[a[1]==="y0"?0:1]))}isNaN(d)||(p[0]=d),isNaN(_)||(p[1]=_)}return p}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.updateTransform=function(a,s,o){s.eachSeries(function(u){var c=MarkerModel.getMarkerModelFromSeries(u,"markArea");if(c){var p=c.getData();p.each(function(d){var _=map$1(dimPermutations,function(Ja){return getSingleMarkerEndPoint(p,d,Ja,u,o)});p.setItemLayout(d,_);var ja=p.getItemGraphicEl(d);ja.setShape("points",_)})}},this)},r.prototype.renderSeries=function(a,s,o,u){var c=a.coordinateSystem,p=a.id,d=a.getData(),_=this.markerGroupMap,ja=_.get(p)||_.set(p,{group:new Group$3});this.group.add(ja.group),this.markKeep(ja);var Ja=createList$1(c,a,s);s.setData(Ja),Ja.each(function(ec){var tc=map$1(dimPermutations,function(ch){return getSingleMarkerEndPoint(Ja,ec,ch,a,u)}),rc=c.getAxis("x").scale,nc=c.getAxis("y").scale,ic=rc.getExtent(),uc=nc.getExtent(),eh=[rc.parse(Ja.get("x0",ec)),rc.parse(Ja.get("x1",ec))],rh=[nc.parse(Ja.get("y0",ec)),nc.parse(Ja.get("y1",ec))];asc$2(eh),asc$2(rh);var ah=!(ic[0]>eh[1]||ic[1]<eh[0]||uc[0]>rh[1]||uc[1]<rh[0]),ih=!ah;Ja.setItemLayout(ec,{points:tc,allClipped:ih});var oh=Ja.getItemModel(ec).getModel("itemStyle").getItemStyle(),uh=getVisualFromData(d,"color");oh.fill||(oh.fill=uh,isString(oh.fill)&&(oh.fill=modifyAlpha(oh.fill,.4))),oh.stroke||(oh.stroke=uh),Ja.setItemVisual(ec,"style",oh)}),Ja.diff(inner$2(ja).data).add(function(ec){var tc=Ja.getItemLayout(ec);if(!tc.allClipped){var rc=new Polygon({shape:{points:tc.points}});Ja.setItemGraphicEl(ec,rc),ja.group.add(rc)}}).update(function(ec,tc){var rc=inner$2(ja).data.getItemGraphicEl(tc),nc=Ja.getItemLayout(ec);nc.allClipped?rc&&ja.group.remove(rc):(rc?updateProps$1(rc,{shape:{points:nc.points}},s,ec):rc=new Polygon({shape:{points:nc.points}}),Ja.setItemGraphicEl(ec,rc),ja.group.add(rc))}).remove(function(ec){var tc=inner$2(ja).data.getItemGraphicEl(ec);ja.group.remove(tc)}).execute(),Ja.eachItemGraphicEl(function(ec,tc){var rc=Ja.getItemModel(tc),nc=Ja.getItemVisual(tc,"style");ec.useStyle(Ja.getItemVisual(tc,"style")),setLabelStyle(ec,getLabelStatesModels(rc),{labelFetcher:s,labelDataIndex:tc,defaultText:Ja.getName(tc)||"",inheritColor:isString(nc.fill)?modifyAlpha(nc.fill,1):"#000"}),setStatesStylesFromModel(ec,rc),toggleHoverEmphasis(ec,null,null,rc.get(["emphasis","disabled"])),getECData(ec).dataModel=s}),inner$2(ja).data=Ja,ja.group.silent=s.get("silent")||a.get("silent")},r.type="markArea",r}(MarkerView);function createList$1(n,r,a){var s,o,u=["x0","y0","x1","y1"];if(n){var c=map$1(n&&n.dimensions,function(_){var ja=r.getData(),Ja=ja.getDimensionInfo(ja.mapDimension(_))||{};return extend$2(extend$2({},Ja),{name:_,ordinalMeta:null})});o=map$1(u,function(_,ja){return{name:_,type:c[ja%2].type}}),s=new SeriesData(o,a)}else o=[{name:"value",type:"float"}],s=new SeriesData(o,a);var p=map$1(a.get("data"),curry$1(markAreaTransform,r,n,a));n&&(p=filter(p,curry$1(markAreaFilter,n)));var d=n?function(_,ja,Ja,ec){var tc=_.coord[Math.floor(ec/2)][ec%2];return parseDataValue(tc,o[ec])}:function(_,ja,Ja,ec){return parseDataValue(_.value,o[ec])};return s.initData(p,null,d),s.hasItemOption=!0,s}function install$s(n){n.registerComponentModel(MarkAreaModel),n.registerComponentView(MarkAreaView),n.registerPreprocessor(function(r){checkMarkerInSeries(r.series,"markArea")&&(r.markArea=r.markArea||{})})}var getDefaultSelectorOptions=function(n,r){if(r==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(r==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.layoutMode={type:"box",ignoreSize:!0},a}return r.prototype.init=function(a,s,o){this.mergeDefaultAndTheme(a,o),a.selected=a.selected||{},this._updateSelector(a)},r.prototype.mergeOption=function(a,s){n.prototype.mergeOption.call(this,a,s),this._updateSelector(a)},r.prototype._updateSelector=function(a){var s=a.selector,o=this.ecModel;s===!0&&(s=a.selector=["all","inverse"]),isArray$1(s)&&each$f(s,function(u,c){isString(u)&&(u={type:u}),s[c]=merge(u,getDefaultSelectorOptions(o,u.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&this.get("selectedMode")==="single"){for(var s=!1,o=0;o<a.length;o++){var u=a[o].get("name");if(this.isSelected(u)){this.select(u),s=!0;break}}!s&&this.select(a[0].get("name"))}},r.prototype._updateData=function(a){var s=[],o=[];a.eachRawSeries(function(d){var _=d.name;o.push(_);var ja;if(d.legendVisualProvider){var Ja=d.legendVisualProvider,ec=Ja.getAllNames();a.isSeriesFiltered(d)||(o=o.concat(ec)),ec.length?s=s.concat(ec):ja=!0}else ja=!0;ja&&isNameSpecified(d)&&s.push(d.name)}),this._availableNames=o;var u=this.get("data")||s,c=createHashMap(),p=map$1(u,function(d){return(isString(d)||isNumber(d))&&(d={name:d}),c.get(d.name)?null:(c.set(d.name,!0),new Model(d,this,this.ecModel))},this);this._data=filter(p,function(d){return!!d})},r.prototype.getData=function(){return this._data},r.prototype.select=function(a){var s=this.option.selected,o=this.get("selectedMode");if(o==="single"){var u=this._data;each$f(u,function(c){s[c.get("name")]=!1})}s[a]=!0},r.prototype.unSelect=function(a){this.get("selectedMode")!=="single"&&(this.option.selected[a]=!1)},r.prototype.toggleSelected=function(a){var s=this.option.selected;s.hasOwnProperty(a)||(s[a]=!0),this[s[a]?"unSelect":"select"](a)},r.prototype.allSelect=function(){var a=this._data,s=this.option.selected;each$f(a,function(o){s[o.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var a=this._data,s=this.option.selected;each$f(a,function(o){var u=o.get("name",!0);s.hasOwnProperty(u)||(s[u]=!0),s[u]=!s[u]})},r.prototype.isSelected=function(a){var s=this.option.selected;return!(s.hasOwnProperty(a)&&!s[a])&&indexOf(this._availableNames,a)>=0},r.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.newlineDisabled=!1,a}return r.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(a,s,o){var u=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!a.get("show",!0)){var c=a.get("align"),p=a.get("orient");(!c||c==="auto")&&(c=a.get("left")==="right"&&p==="vertical"?"right":"left");var d=a.get("selector",!0),_=a.get("selectorPosition",!0);d&&(!_||_==="auto")&&(_=p==="horizontal"?"end":"start"),this.renderInner(c,a,s,o,d,p,_);var ja=a.getBoxLayoutParams(),Ja={width:o.getWidth(),height:o.getHeight()},ec=a.get("padding"),tc=getLayoutRect(ja,Ja,ec),rc=this.layoutInner(a,c,tc,u,d,_),nc=getLayoutRect(defaults({width:rc.width,height:rc.height},ja),Ja,ec);this.group.x=nc.x-rc.x,this.group.y=nc.y-rc.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(rc,a))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(a,s,o,u,c,p,d){var _=this.getContentGroup(),ja=createHashMap(),Ja=s.get("selectedMode"),ec=[];o.eachRawSeries(function(tc){!tc.get("legendHoverLink")&&ec.push(tc.id)}),each$3(s.getData(),function(tc,rc){var nc=tc.get("name");if(!this.newlineDisabled&&(nc===""||nc===`
`)){var ic=new Group$1;ic.newline=!0,_.add(ic);return}var uc=o.getSeriesByName(nc)[0];if(!ja.get(nc))if(uc){var eh=uc.getData(),rh=eh.getVisual("legendLineStyle")||{},ah=eh.getVisual("legendIcon"),ih=eh.getVisual("style"),oh=this._createItem(uc,nc,rc,tc,s,a,rh,ih,ah,Ja,u);oh.on("click",curry(dispatchSelectAction,nc,null,u,ec)).on("mouseover",curry(dispatchHighlightAction,uc.name,null,u,ec)).on("mouseout",curry(dispatchDownplayAction,uc.name,null,u,ec)),o.ssr&&oh.eachChild(function(uh){var ch=getECData(uh);ch.seriesIndex=uc.seriesIndex,ch.dataIndex=rc,ch.ssrType="legend"}),ja.set(nc,!0)}else o.eachRawSeries(function(uh){if(!ja.get(nc)&&uh.legendVisualProvider){var ch=uh.legendVisualProvider;if(!ch.containName(nc))return;var hh=ch.indexOfName(nc),dh=ch.getItemVisual(hh,"style"),gh=ch.getItemVisual(hh,"legendIcon"),fh=parse(dh.fill);fh&&fh[3]===0&&(fh[3]=.2,dh=extend$2(extend$2({},dh),{fill:stringify(fh,"rgba")}));var vh=this._createItem(uh,nc,rc,tc,s,a,{},dh,gh,Ja,u);vh.on("click",curry(dispatchSelectAction,null,nc,u,ec)).on("mouseover",curry(dispatchHighlightAction,null,nc,u,ec)).on("mouseout",curry(dispatchDownplayAction,null,nc,u,ec)),o.ssr&&vh.eachChild(function(ph){var yh=getECData(ph);yh.seriesIndex=uh.seriesIndex,yh.dataIndex=rc,yh.ssrType="legend"}),ja.set(nc,!0)}},this)},this),c&&this._createSelector(c,s,u,p,d)},r.prototype._createSelector=function(a,s,o,u,c){var p=this.getSelectorGroup();each$3(a,function(_){var ja=_.type,Ja=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:ja==="all"?"legendAllSelect":"legendInverseSelect"})}});p.add(Ja);var ec=s.getModel("selectorLabel"),tc=s.getModel(["emphasis","selectorLabel"]);setLabelStyle(Ja,{normal:ec,emphasis:tc},{defaultText:_.title}),enableHoverEmphasis(Ja)})},r.prototype._createItem=function(a,s,o,u,c,p,d,_,ja,Ja,ec){var tc=a.visualDrawType,rc=c.get("itemWidth"),nc=c.get("itemHeight"),ic=c.isSelected(s),uc=u.get("symbolRotate"),eh=u.get("symbolKeepAspect"),rh=u.get("icon");ja=rh||ja||"roundRect";var ah=getLegendStyle(ja,u,d,_,tc,ic,ec),ih=new Group$1,oh=u.getModel("textStyle");if(isFunction(a.getLegendIcon)&&(!rh||rh==="inherit"))ih.add(a.getLegendIcon({itemWidth:rc,itemHeight:nc,icon:ja,iconRotate:uc,itemStyle:ah.itemStyle,lineStyle:ah.lineStyle,symbolKeepAspect:eh}));else{var uh=rh==="inherit"&&a.getData().getVisual("symbol")?uc==="inherit"?a.getData().getVisual("symbolRotate"):uc:0;ih.add(getDefaultLegendIcon({itemWidth:rc,itemHeight:nc,icon:ja,iconRotate:uh,itemStyle:ah.itemStyle,lineStyle:ah.lineStyle,symbolKeepAspect:eh}))}var ch=p==="left"?rc+5:-5,hh=p,dh=c.get("formatter"),gh=s;isString(dh)&&dh?gh=dh.replace("{name}",s??""):isFunction(dh)&&(gh=dh(s));var fh=ic?oh.getTextColor():u.get("inactiveColor");ih.add(new ZRText({style:createTextStyle(oh,{text:gh,x:ch,y:nc/2,fill:fh,align:hh,verticalAlign:"middle"},{inheritColor:fh})}));var vh=new Rect$2({shape:ih.getBoundingRect(),style:{fill:"transparent"}}),ph=u.getModel("tooltip");return ph.get("show")&&setTooltipConfig({el:vh,componentModel:c,itemName:s,itemTooltipOption:ph.option}),ih.add(vh),ih.eachChild(function(yh){yh.silent=!0}),vh.silent=!Ja,this.getContentGroup().add(ih),enableHoverEmphasis(ih),ih.__legendDataIndex=o,ih},r.prototype.layoutInner=function(a,s,o,u,c,p){var d=this.getContentGroup(),_=this.getSelectorGroup();box(a.get("orient"),d,a.get("itemGap"),o.width,o.height);var ja=d.getBoundingRect(),Ja=[-ja.x,-ja.y];if(_.markRedraw(),d.markRedraw(),c){box("horizontal",_,a.get("selectorItemGap",!0));var ec=_.getBoundingRect(),tc=[-ec.x,-ec.y],rc=a.get("selectorButtonGap",!0),nc=a.getOrient().index,ic=nc===0?"width":"height",uc=nc===0?"height":"width",eh=nc===0?"y":"x";p==="end"?tc[nc]+=ja[ic]+rc:Ja[nc]+=ec[ic]+rc,tc[1-nc]+=ja[uc]/2-ec[uc]/2,_.x=tc[0],_.y=tc[1],d.x=Ja[0],d.y=Ja[1];var rh={x:0,y:0};return rh[ic]=ja[ic]+rc+ec[ic],rh[uc]=Math.max(ja[uc],ec[uc]),rh[eh]=Math.min(0,ec[eh]+tc[1-nc]),rh}else return d.x=Ja[0],d.y=Ja[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(ComponentView);function getLegendStyle(n,r,a,s,o,u,c){function p(ic,uc){ic.lineWidth==="auto"&&(ic.lineWidth=uc.lineWidth>0?2:0),each$3(ic,function(eh,rh){ic[rh]==="inherit"&&(ic[rh]=uc[rh])})}var d=r.getModel("itemStyle"),_=d.getItemStyle(),ja=n.lastIndexOf("empty",0)===0?"fill":"stroke",Ja=d.getShallow("decal");_.decal=!Ja||Ja==="inherit"?s.decal:createOrUpdatePatternFromDecal(Ja,c),_.fill==="inherit"&&(_.fill=s[o]),_.stroke==="inherit"&&(_.stroke=s[ja]),_.opacity==="inherit"&&(_.opacity=(o==="fill"?s:a).opacity),p(_,s);var ec=r.getModel("lineStyle"),tc=ec.getLineStyle();if(p(tc,a),_.fill==="auto"&&(_.fill=s.fill),_.stroke==="auto"&&(_.stroke=s.fill),tc.stroke==="auto"&&(tc.stroke=s.fill),!u){var rc=r.get("inactiveBorderWidth"),nc=_[ja];_.lineWidth=rc==="auto"?s.lineWidth>0&&nc?2:0:_.lineWidth,_.fill=r.get("inactiveColor"),_.stroke=r.get("inactiveBorderColor"),tc.stroke=ec.get("inactiveColor"),tc.lineWidth=ec.get("inactiveWidth")}return{itemStyle:_,lineStyle:tc}}function getDefaultLegendIcon(n){var r=n.icon||"roundRect",a=createSymbol$1(r,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return a.setStyle(n.itemStyle),a.rotation=(n.iconRotate||0)*Math.PI/180,a.setOrigin([n.itemWidth/2,n.itemHeight/2]),r.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}function dispatchSelectAction(n,r,a,s){dispatchDownplayAction(n,r,a,s),a.dispatchAction({type:"legendToggleSelect",name:n??r}),dispatchHighlightAction(n,r,a,s)}function isUseHoverLayer(n){for(var r=n.getZr().storage.getDisplayList(),a,s=0,o=r.length;s<o&&!(a=r[s].states.emphasis);)s++;return a&&a.hoverLayer}function dispatchHighlightAction(n,r,a,s){isUseHoverLayer(a)||a.dispatchAction({type:"highlight",seriesName:n,name:r,excludeSeriesId:s})}function dispatchDownplayAction(n,r,a,s){isUseHoverLayer(a)||a.dispatchAction({type:"downplay",seriesName:n,name:r,excludeSeriesId:s})}function legendFilter(n){var r=n.findComponents({mainType:"legend"});r&&r.length&&n.filterSeries(function(a){for(var s=0;s<r.length;s++)if(!r[s].isSelected(a.name))return!1;return!0})}function legendSelectActionHandler(n,r,a){var s={},o=n==="toggleSelected",u;return a.eachComponent("legend",function(c){o&&u!=null?c[u?"select":"unSelect"](r.name):n==="allSelect"||n==="inverseSelect"?c[n]():(c[n](r.name),u=c.isSelected(r.name));var p=c.getData();each$f(p,function(d){var _=d.get("name");if(!(_===`
`||_==="")){var ja=c.isSelected(_);s.hasOwnProperty(_)?s[_]=s[_]&&ja:s[_]=ja}})}),n==="allSelect"||n==="inverseSelect"?{selected:s}:{name:r.name,selected:s}}function installLegendAction(n){n.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),n.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),n.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$r(n){n.registerComponentModel(LegendModel),n.registerComponentView(LegendView),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),n.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(n)}var ScrollableLegendModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},r.prototype.init=function(a,s,o){var u=getLayoutParams(a);n.prototype.init.call(this,a,s,o),mergeAndNormalizeLayoutParams(this,a,u)},r.prototype.mergeOption=function(a,s){n.prototype.mergeOption.call(this,a,s),mergeAndNormalizeLayoutParams(this,this.option,a)},r.type="legend.scroll",r.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r}(LegendModel);function mergeAndNormalizeLayoutParams(n,r,a){var s=n.getOrient(),o=[1,1];o[s.index]=0,mergeLayoutParam(r,a,{type:"box",ignoreSize:!!o})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.newlineDisabled=!0,a._currentIndex=0,a}return r.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},r.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(a,s,o,u,c,p,d){var _=this;n.prototype.renderInner.call(this,a,s,o,u,c,p,d);var ja=this._controllerGroup,Ja=s.get("pageIconSize",!0),ec=isArray$1(Ja)?Ja:[Ja,Ja];rc("pagePrev",0);var tc=s.getModel("pageTextStyle");ja.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:tc.getTextColor(),font:tc.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),rc("pageNext",1);function rc(nc,ic){var uc=nc+"DataIndex",eh=createIcon(s.get("pageIcons",!0)[s.getOrient().name][ic],{onclick:bind$1(_._pageGo,_,uc,s,u)},{x:-ec[0]/2,y:-ec[1]/2,width:ec[0],height:ec[1]});eh.name=nc,ja.add(eh)}},r.prototype.layoutInner=function(a,s,o,u,c,p){var d=this.getSelectorGroup(),_=a.getOrient().index,ja=WH[_],Ja=XY[_],ec=WH[1-_],tc=XY[1-_];c&&box("horizontal",d,a.get("selectorItemGap",!0));var rc=a.get("selectorButtonGap",!0),nc=d.getBoundingRect(),ic=[-nc.x,-nc.y],uc=clone$4(o);c&&(uc[ja]=o[ja]-nc[ja]-rc);var eh=this._layoutContentAndController(a,u,uc,_,ja,ec,tc,Ja);if(c){if(p==="end")ic[_]+=eh[ja]+rc;else{var rh=nc[ja]+rc;ic[_]-=rh,eh[Ja]-=rh}eh[ja]+=nc[ja]+rc,ic[1-_]+=eh[tc]+eh[ec]/2-nc[ec]/2,eh[ec]=Math.max(eh[ec],nc[ec]),eh[tc]=Math.min(eh[tc],nc[tc]+ic[1-_]),d.x=ic[0],d.y=ic[1],d.markRedraw()}return eh},r.prototype._layoutContentAndController=function(a,s,o,u,c,p,d,_){var ja=this.getContentGroup(),Ja=this._containerGroup,ec=this._controllerGroup;box(a.get("orient"),ja,a.get("itemGap"),u?o.width:null,u?null:o.height),box("horizontal",ec,a.get("pageButtonItemGap",!0));var tc=ja.getBoundingRect(),rc=ec.getBoundingRect(),nc=this._showController=tc[c]>o[c],ic=[-tc.x,-tc.y];s||(ic[u]=ja[_]);var uc=[0,0],eh=[-rc.x,-rc.y],rh=retrieve2(a.get("pageButtonGap",!0),a.get("itemGap",!0));if(nc){var ah=a.get("pageButtonPosition",!0);ah==="end"?eh[u]+=o[c]-rc[c]:uc[u]+=rc[c]+rh}eh[1-u]+=tc[p]/2-rc[p]/2,ja.setPosition(ic),Ja.setPosition(uc),ec.setPosition(eh);var ih={x:0,y:0};if(ih[c]=nc?o[c]:tc[c],ih[p]=Math.max(tc[p],rc[p]),ih[d]=Math.min(0,rc[d]+eh[1-u]),Ja.__rectSize=o[c],nc){var oh={x:0,y:0};oh[c]=Math.max(o[c]-rc[c]-rh,0),oh[p]=ih[p],Ja.setClipPath(new Rect$2({shape:oh})),Ja.__rectSize=oh[c]}else ec.eachChild(function(ch){ch.attr({invisible:!0,silent:!0})});var uh=this._getPageInfo(a);return uh.pageIndex!=null&&updateProps$1(ja,{x:uh.contentPosition[0],y:uh.contentPosition[1]},nc?a:null),this._updatePageInfoView(a,uh),ih},r.prototype._pageGo=function(a,s,o){var u=this._getPageInfo(s)[a];u!=null&&o.dispatchAction({type:"legendScroll",scrollDataIndex:u,legendId:s.id})},r.prototype._updatePageInfoView=function(a,s){var o=this._controllerGroup;each$f(["pagePrev","pageNext"],function(ja){var Ja=ja+"DataIndex",ec=s[Ja]!=null,tc=o.childOfName(ja);tc&&(tc.setStyle("fill",ec?a.get("pageIconColor",!0):a.get("pageIconInactiveColor",!0)),tc.cursor=ec?"pointer":"default")});var u=o.childOfName("pageText"),c=a.get("pageFormatter"),p=s.pageIndex,d=p!=null?p+1:0,_=s.pageCount;u&&c&&u.setStyle("text",isString(c)?c.replace("{current}",d==null?"":d+"").replace("{total}",_==null?"":_+""):c({current:d,total:_}))},r.prototype._getPageInfo=function(a){var s=a.get("scrollDataIndex",!0),o=this.getContentGroup(),u=this._containerGroup.__rectSize,c=a.getOrient().index,p=WH[c],d=XY[c],_=this._findTargetItemIndex(s),ja=o.children(),Ja=ja[_],ec=ja.length,tc=ec?1:0,rc={contentPosition:[o.x,o.y],pageCount:tc,pageIndex:tc-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!Ja)return rc;var nc=ah(Ja);rc.contentPosition[c]=-nc.s;for(var ic=_+1,uc=nc,eh=nc,rh=null;ic<=ec;++ic)rh=ah(ja[ic]),(!rh&&eh.e>uc.s+u||rh&&!ih(rh,uc.s))&&(eh.i>uc.i?uc=eh:uc=rh,uc&&(rc.pageNextDataIndex==null&&(rc.pageNextDataIndex=uc.i),++rc.pageCount)),eh=rh;for(var ic=_-1,uc=nc,eh=nc,rh=null;ic>=-1;--ic)rh=ah(ja[ic]),(!rh||!ih(eh,rh.s))&&uc.i<eh.i&&(eh=uc,rc.pagePrevDataIndex==null&&(rc.pagePrevDataIndex=uc.i),++rc.pageCount,++rc.pageIndex),uc=rh;return rc;function ah(oh){if(oh){var uh=oh.getBoundingRect(),ch=uh[d]+oh[d];return{s:ch,e:ch+uh[p],i:oh.__legendDataIndex}}}function ih(oh,uh){return oh.e>=uh&&oh.s<=uh+u}},r.prototype._findTargetItemIndex=function(a){if(!this._showController)return 0;var s,o=this.getContentGroup(),u;return o.eachChild(function(c,p){var d=c.__legendDataIndex;u==null&&d!=null&&(u=p),d===a&&(s=p)}),s??u},r.type="legend.scroll",r}(LegendView);function installScrollableLegendAction(n){n.registerAction("legendScroll","legendscroll",function(r,a){var s=r.scrollDataIndex;s!=null&&a.eachComponent({mainType:"legend",subType:"scroll",query:r},function(o){o.setScrollDataIndex(s)})})}function install$q(n){use(install$r),n.registerComponentModel(ScrollableLegendModel),n.registerComponentView(ScrollableLegendView),installScrollableLegendAction(n)}function install$p(n){use(install$r),use(install$q)}var InsideZoomModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="dataZoom.inside",r.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(n,r,a){inner$1(n).coordSysRecordMap.each(function(s){var o=s.dataZoomInfoMap.get(r.uid);o&&(o.getRange=a)})}function disposeCoordSysRecordIfNeeded(n,r){for(var a=inner$1(n).coordSysRecordMap,s=a.keys(),o=0;o<s.length;o++){var u=s[o],c=a.get(u),p=c.dataZoomInfoMap;if(p){var d=r.uid,_=p.get(d);_&&(p.removeKey(d),p.keys().length||disposeCoordSysRecord(a,c))}}}function disposeCoordSysRecord(n,r){if(r){n.removeKey(r.model.uid);var a=r.controller;a&&a.dispose()}}function createCoordSysRecord(n,r){var a={model:r,containsPoint:curry$1(containsPoint,r),dispatchAction:curry$1(dispatchAction,n),dataZoomInfoMap:null,controller:null},s=a.controller=new RoamController(n.getZr());return each$f(["pan","zoom","scrollMove"],function(o){s.on(o,function(u){var c=[];a.dataZoomInfoMap.each(function(p){if(u.isAvailableBehavior(p.model.option)){var d=(p.getRange||{})[o],_=d&&d(p.dzReferCoordSysInfo,a.model.mainType,a.controller,u);!p.model.get("disabled",!0)&&_&&c.push({dataZoomId:p.model.id,start:_[0],end:_[1]})}}),c.length&&a.dispatchAction(c)})}),a}function dispatchAction(n,r){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function containsPoint(n,r,a,s){return n.coordinateSystem.containPoint([a,s])}function mergeControllerParams(n){var r,a="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return n.each(function(u){var c=u.model,p=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;s[a+p]>s[a+r]&&(r=p),o=o&&c.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}function installDataZoomRoamProcessor(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(r,a){var s=inner$1(a),o=s.coordSysRecordMap||(s.coordSysRecordMap=createHashMap());o.each(function(u){u.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(u){var c=collectReferCoordSysModelInfo(u);each$f(c.infoList,function(p){var d=p.model.uid,_=o.get(d)||o.set(d,createCoordSysRecord(a,p.model)),ja=_.dataZoomInfoMap||(_.dataZoomInfoMap=createHashMap());ja.set(u.uid,{dzReferCoordSysInfo:p,model:u,getRange:null})})}),o.each(function(u){var c=u.controller,p,d=u.dataZoomInfoMap;if(d){var _=d.keys()[0];_!=null&&(p=d.get(_))}if(!p){disposeCoordSysRecord(o,u);return}var ja=mergeControllerParams(d);c.enable(ja.controlType,ja.opt),c.setPointerChecker(u.containsPoint),createOrUpdate(u,"dispatchAction",p.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return r.prototype.render=function(a,s,o){if(n.prototype.render.apply(this,arguments),a.noTarget()){this._clear();return}this.range=a.getPercentRange(),setViewInfoToCoordSysRecord(o,a,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(DataZoomView),getRangeHandlers={zoom:function(n,r,a,s){var o=this.range,u=o.slice(),c=n.axisModels[0];if(c){var p=getDirectionInfo[r](null,[s.originX,s.originY],c,a,n),d=(p.signal>0?p.pixelStart+p.pixelLength-p.pixel:p.pixel-p.pixelStart)/p.pixelLength*(u[1]-u[0])+u[0],_=Math.max(1/s.scale,0);u[0]=(u[0]-d)*_+d,u[1]=(u[1]-d)*_+d;var ja=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,u,[0,100],0,ja.minSpan,ja.maxSpan),this.range=u,o[0]!==u[0]||o[1]!==u[1])return u}},pan:makeMover(function(n,r,a,s,o,u){var c=getDirectionInfo[s]([u.oldX,u.oldY],[u.newX,u.newY],r,o,a);return c.signal*(n[1]-n[0])*c.pixel/c.pixelLength}),scrollMove:makeMover(function(n,r,a,s,o,u){var c=getDirectionInfo[s]([0,0],[u.scrollDelta,u.scrollDelta],r,o,a);return c.signal*(n[1]-n[0])*u.scrollDelta})};function makeMover(n){return function(r,a,s,o){var u=this.range,c=u.slice(),p=r.axisModels[0];if(p){var d=n(c,p,r,a,s,o);if(sliderMove(d,c,[0,100],"all"),this.range=c,u[0]!==c[0]||u[1]!==c[1])return c}}}var getDirectionInfo={grid:function(n,r,a,s,o){var u=a.axis,c={},p=o.model.coordinateSystem.getRect();return n=n||[0,0],u.dim==="x"?(c.pixel=r[0]-n[0],c.pixelLength=p.width,c.pixelStart=p.x,c.signal=u.inverse?1:-1):(c.pixel=r[1]-n[1],c.pixelLength=p.height,c.pixelStart=p.y,c.signal=u.inverse?-1:1),c},polar:function(n,r,a,s,o){var u=a.axis,c={},p=o.model.coordinateSystem,d=p.getRadiusAxis().getExtent(),_=p.getAngleAxis().getExtent();return n=n?p.pointToCoord(n):[0,0],r=p.pointToCoord(r),a.mainType==="radiusAxis"?(c.pixel=r[0]-n[0],c.pixelLength=d[1]-d[0],c.pixelStart=d[0],c.signal=u.inverse?1:-1):(c.pixel=r[1]-n[1],c.pixelLength=_[1]-_[0],c.pixelStart=_[0],c.signal=u.inverse?-1:1),c},singleAxis:function(n,r,a,s,o){var u=a.axis,c=o.model.coordinateSystem.getRect(),p={};return n=n||[0,0],u.orient==="horizontal"?(p.pixel=r[0]-n[0],p.pixelLength=c.width,p.pixelStart=c.x,p.signal=u.inverse?1:-1):(p.pixel=r[1]-n[1],p.pixelLength=c.height,p.pixelStart=c.y,p.signal=u.inverse?-1:1),p}};function install$o(n){installCommon$1(n),n.registerComponentModel(InsideZoomModel),n.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(n)}var SliderZoomModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._displayables={},a}return r.prototype.init=function(a,s){this.api=s,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},r.prototype.render=function(a,s,o,u){if(n.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),a.get("show")===!1){this.group.removeAll();return}if(a.noTarget()){this._clear(),this.group.removeAll();return}(!u||u.type!=="dataZoom"||u.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var s=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(s),this._positionGroup()},r.prototype._resetLocation=function(){var a=this.dataZoomModel,s=this.api,o=a.get("brushSelect"),u=o?DEFAULT_MOVE_HANDLE_SIZE:0,c=this._findCoordRect(),p={width:s.getWidth(),height:s.getHeight()},d=this._orient===HORIZONTAL?{right:p.width-c.x-c.width,top:p.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-u,width:c.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:c.y,width:DEFAULT_FILLER_SIZE,height:c.height},_=getLayoutParams(a.option);each$f(["right","top","width","height"],function(Ja){_[Ja]==="ph"&&(_[Ja]=d[Ja])});var ja=getLayoutRect(_,p);this._location={x:ja.x,y:ja.y},this._size=[ja.width,ja.height],this._orient===VERTICAL&&this._size.reverse()},r.prototype._positionGroup=function(){var a=this.group,s=this._location,o=this._orient,u=this.dataZoomModel.getFirstTargetAxisModel(),c=u&&u.get("inverse"),p=this._displayables.sliderGroup,d=(this._dataShadowInfo||{}).otherAxisInverse;p.attr(o===HORIZONTAL&&!c?{scaleY:d?1:-1,scaleX:1}:o===HORIZONTAL&&c?{scaleY:d?1:-1,scaleX:-1}:o===VERTICAL&&!c?{scaleY:d?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:d?-1:1,scaleX:-1,rotation:Math.PI/2});var _=a.getBoundingRect([p]);a.x=s.x-_.x,a.y=s.y-_.y,a.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var a=this.dataZoomModel,s=this._size,o=this._displayables.sliderGroup,u=a.get("brushSelect");o.add(new Rect({silent:!0,shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var c=new Rect({shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),p=this.api.getZr();u?(c.on("mousedown",this._onBrushStart,this),c.cursor="crosshair",p.on("mousemove",this._onBrush),p.on("mouseup",this._onBrushEnd)):(p.off("mousemove",this._onBrush),p.off("mouseup",this._onBrushEnd)),o.add(c)},r.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!a)return;var s=this._size,o=this._shadowSize||[],u=a.series,c=u.getRawData(),p=u.getShadowDim&&u.getShadowDim(),d=p&&c.getDimensionInfo(p)?u.getShadowDim():a.otherDim;if(d==null)return;var _=this._shadowPolygonPts,ja=this._shadowPolylinePts;if(c!==this._shadowData||d!==this._shadowDim||s[0]!==o[0]||s[1]!==o[1]){var Ja=c.getDataExtent(d),ec=(Ja[1]-Ja[0])*.3;Ja=[Ja[0]-ec,Ja[1]+ec];var tc=[0,s[1]],rc=[0,s[0]],nc=[[s[0],0],[0,0]],ic=[],uc=rc[1]/(c.count()-1),eh=0,rh=Math.round(c.count()/s[0]),ah;c.each([d],function(hh,dh){if(rh>0&&dh%rh){eh+=uc;return}var gh=hh==null||isNaN(hh)||hh==="",fh=gh?0:linearMap$2(hh,Ja,tc,!0);gh&&!ah&&dh?(nc.push([nc[nc.length-1][0],0]),ic.push([ic[ic.length-1][0],0])):!gh&&ah&&(nc.push([eh,0]),ic.push([eh,0])),nc.push([eh,fh]),ic.push([eh,fh]),eh+=uc,ah=gh}),_=this._shadowPolygonPts=nc,ja=this._shadowPolylinePts=ic}this._shadowData=c,this._shadowDim=d,this._shadowSize=[s[0],s[1]];var ih=this.dataZoomModel;function oh(hh){var dh=ih.getModel(hh?"selectedDataBackground":"dataBackground"),gh=new Group$3,fh=new Polygon({shape:{points:_},segmentIgnoreThreshold:1,style:dh.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),vh=new Polyline$1({shape:{points:ja},segmentIgnoreThreshold:1,style:dh.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return gh.add(fh),gh.add(vh),gh}for(var uh=0;uh<3;uh++){var ch=oh(uh===1);this._displayables.sliderGroup.add(ch),this._displayables.dataShadowSegs.push(ch)}},r.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,s=a.get("showDataShadow");if(s!==!1){var o,u=this.ecModel;return a.eachTargetAxis(function(c,p){var d=a.getAxisProxy(c,p).getTargetSeriesModels();each$f(d,function(_){if(!o&&!(s!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,_.get("type"))<0)){var ja=u.getComponent(getAxisMainType(c),p).axis,Ja=getOtherDim(c),ec,tc=_.coordinateSystem;Ja!=null&&tc.getOtherAxis&&(ec=tc.getOtherAxis(ja).inverse),Ja=_.getData().mapDimension(Ja),o={thisAxis:ja,series:_,thisDim:c,otherDim:Ja,otherAxisInverse:ec}}},this)},this),o}},r.prototype._renderHandle=function(){var a=this.group,s=this._displayables,o=s.handles=[null,null],u=s.handleLabels=[null,null],c=this._displayables.sliderGroup,p=this._size,d=this.dataZoomModel,_=this.api,ja=d.get("borderRadius")||0,Ja=d.get("brushSelect"),ec=s.filler=new Rect({silent:Ja,style:{fill:d.get("fillerColor")},textConfig:{position:"inside"}});c.add(ec),c.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:p[0],height:p[1],r:ja},style:{stroke:d.get("dataBackgroundColor")||d.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(rh){var ah=d.get("handleIcon");!symbolBuildProxies[ah]&&ah.indexOf("path://")<0&&ah.indexOf("image://")<0&&(ah="path://"+ah);var ih=createSymbol$1(ah,-1,0,2,2,null,!0);ih.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,rh),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var oh=ih.getBoundingRect(),uh=d.get("handleSize");this._handleHeight=parsePercent(uh,this._size[1]),this._handleWidth=oh.width/oh.height*this._handleHeight,ih.setStyle(d.getModel("handleStyle").getItemStyle()),ih.style.strokeNoScale=!0,ih.rectHover=!0,ih.ensureState("emphasis").style=d.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(ih);var ch=d.get("handleColor");ch!=null&&(ih.style.fill=ch),c.add(o[rh]=ih);var hh=d.getModel("textStyle");a.add(u[rh]=new ZRText({silent:!0,invisible:!0,style:createTextStyle(hh,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:hh.getTextColor(),font:hh.getFont()}),z2:10}))},this);var tc=ec;if(Ja){var rc=parsePercent(d.get("moveHandleSize"),p[1]),nc=s.moveHandle=new Rect$2({style:d.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:p[1]-.5,height:rc}}),ic=rc*.8,uc=s.moveHandleIcon=createSymbol$1(d.get("moveHandleIcon"),-ic/2,-ic/2,ic,ic,"#fff",!0);uc.silent=!0,uc.y=p[1]+rc/2-.5,nc.ensureState("emphasis").style=d.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var eh=Math.min(p[1]/2,Math.max(rc,10));tc=s.moveZone=new Rect$2({invisible:!0,shape:{y:p[1]-eh,height:rc+eh}}),tc.on("mouseover",function(){_.enterEmphasis(nc)}).on("mouseout",function(){_.leaveEmphasis(nc)}),c.add(nc),c.add(uc),c.add(tc)}tc.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),s=this._getViewExtent();this._handleEnds=[linearMap$2(a[0],[0,100],s,!0),linearMap$2(a[1],[0,100],s,!0)]},r.prototype._updateInterval=function(a,s){var o=this.dataZoomModel,u=this._handleEnds,c=this._getViewExtent(),p=o.findRepresentativeAxisProxy().getMinMaxSpan(),d=[0,100];sliderMove(s,u,c,o.get("zoomLock")?"all":a,p.minSpan!=null?linearMap$2(p.minSpan,d,c,!0):null,p.maxSpan!=null?linearMap$2(p.maxSpan,d,c,!0):null);var _=this._range,ja=this._range=asc$2([linearMap$2(u[0],c,d,!0),linearMap$2(u[1],c,d,!0)]);return!_||_[0]!==ja[0]||_[1]!==ja[1]},r.prototype._updateView=function(a){var s=this._displayables,o=this._handleEnds,u=asc$2(o.slice()),c=this._size;each$f([0,1],function(tc){var rc=s.handles[tc],nc=this._handleHeight;rc.attr({scaleX:nc/2,scaleY:nc/2,x:o[tc]+(tc?-1:1),y:c[1]/2-nc/2})},this),s.filler.setShape({x:u[0],y:0,width:u[1]-u[0],height:c[1]});var p={x:u[0],width:u[1]-u[0]};s.moveHandle&&(s.moveHandle.setShape(p),s.moveZone.setShape(p),s.moveZone.getBoundingRect(),s.moveHandleIcon&&s.moveHandleIcon.attr("x",p.x+p.width/2));for(var d=s.dataShadowSegs,_=[0,u[0],u[1],c[0]],ja=0;ja<d.length;ja++){var Ja=d[ja],ec=Ja.getClipPath();ec||(ec=new Rect$2,Ja.setClipPath(ec)),ec.setShape({x:_[ja],y:0,width:_[ja+1]-_[ja],height:c[1]})}this._updateDataInfo(a)},r.prototype._updateDataInfo=function(a){var s=this.dataZoomModel,o=this._displayables,u=o.handleLabels,c=this._orient,p=["",""];if(s.get("showDetail")){var d=s.findRepresentativeAxisProxy();if(d){var _=d.getAxisModel().axis,ja=this._range,Ja=a?d.calculateDataWindow({start:ja[0],end:ja[1]}).valueWindow:d.getDataValueWindow();p=[this._formatLabel(Ja[0],_),this._formatLabel(Ja[1],_)]}}var ec=asc$2(this._handleEnds.slice());tc.call(this,0),tc.call(this,1);function tc(rc){var nc=getTransform$1(o.handles[rc].parent,this.group),ic=transformDirection(rc===0?"right":"left",nc),uc=this._handleWidth/2+LABEL_GAP,eh=applyTransform([ec[rc]+(rc===0?-uc:uc),this._size[1]/2],nc);u[rc].setStyle({x:eh[0],y:eh[1],verticalAlign:c===HORIZONTAL?"middle":ic,align:c===HORIZONTAL?ic:"center",text:p[rc]})}},r.prototype._formatLabel=function(a,s){var o=this.dataZoomModel,u=o.get("labelFormatter"),c=o.get("labelPrecision");(c==null||c==="auto")&&(c=s.getPixelPrecision());var p=a==null||isNaN(a)?"":s.type==="category"||s.type==="time"?s.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(c,20));return isFunction(u)?u(a,p):isString(u)?u.replace("{value}",p):p},r.prototype._showDataInfo=function(a){a=this._dragging||a;var s=this._displayables,o=s.handleLabels;o[0].attr("invisible",!a),o[1].attr("invisible",!a),s.moveHandle&&this.api[a?"enterEmphasis":"leaveEmphasis"](s.moveHandle,1)},r.prototype._onDragMove=function(a,s,o,u){this._dragging=!0,stop(u.event);var c=this._displayables.sliderGroup.getLocalTransform(),p=applyTransform([s,o],c,!0),d=this._updateInterval(a,p[0]),_=this.dataZoomModel.get("realtime");this._updateView(!_),d&&_&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var a=this.dataZoomModel.get("realtime");!a&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(a){var s=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(o[0]<0||o[0]>s[0]||o[1]<0||o[1]>s[1])){var u=this._handleEnds,c=(u[0]+u[1])/2,p=this._updateInterval("all",o[0]-c);this._updateView(),p&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(a){var s=a.offsetX,o=a.offsetY;this._brushStart=new Point(s,o),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(a){if(this._brushing){var s=this._displayables.brushRect;if(this._brushing=!1,!!s){s.attr("ignore",!0);var o=s.shape,u=+new Date;if(!(u-this._brushStartTime<200&&Math.abs(o.width)<5)){var c=this._getViewExtent(),p=[0,100];this._range=asc$2([linearMap$2(o.x,c,p,!0),linearMap$2(o.x+o.width,c,p,!0)]),this._handleEnds=[o.x,o.x+o.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(a){this._brushing&&(stop(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},r.prototype._updateBrushRect=function(a,s){var o=this._displayables,u=this.dataZoomModel,c=o.brushRect;c||(c=o.brushRect=new Rect({silent:!0,style:u.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(c)),c.attr("ignore",!1);var p=this._brushStart,d=this._displayables.sliderGroup,_=d.transformCoordToLocal(a,s),ja=d.transformCoordToLocal(p.x,p.y),Ja=this._size;_[0]=Math.max(Math.min(Ja[0],_[0]),0),c.setShape({x:ja[0],y:0,width:_[0]-ja[0],height:Ja[1]})},r.prototype._dispatchZoomAction=function(a){var s=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?REALTIME_ANIMATION_CONFIG:null,start:s[0],end:s[1]})},r.prototype._findCoordRect=function(){var a,s=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!a&&s.length){var o=s[0].model.coordinateSystem;a=o.getRect&&o.getRect()}if(!a){var u=this.api.getWidth(),c=this.api.getHeight();a={x:u*.2,y:c*.2,width:u*.6,height:c*.6}}return a},r.type="dataZoom.slider",r}(DataZoomView);function getOtherDim(n){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[n]}function getCursor$1(n){return n==="vertical"?"ns-resize":"ew-resize"}function install$n(n){n.registerComponentModel(SliderZoomModel),n.registerComponentView(SliderZoomView),installCommon$1(n)}function install$m(n){use(install$o),use(install$n)}var visualDefault={get:function(n,r,a){var s=clone$4((defaultOption$1[n]||{})[r]);return a&&isArray$1(s)?s[s.length-1]:s}},defaultOption$1={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return r.prototype.init=function(a,s,o){this.mergeDefaultAndTheme(a,o)},r.prototype.optionUpdated=function(a,s){var o=this.option;!s&&replaceVisualOption(o,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(a){var s=this.stateList;a=bind$1(a,this),this.controllerVisuals=createVisualMappings(this.option.controller,s,a),this.targetVisuals=createVisualMappings(this.option.target,s,a)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,s=[];return a==null||a==="all"?this.ecModel.eachSeries(function(o,u){s.push(u)}):s=normalizeToArray(a),s},r.prototype.eachTargetSeries=function(a,s){each$f(this.getTargetSeriesIndices(),function(o){var u=this.ecModel.getSeriesByIndex(o);u&&a.call(s,u)},this)},r.prototype.isTargetSeries=function(a){var s=!1;return this.eachTargetSeries(function(o){o===a&&(s=!0)}),s},r.prototype.formatValueText=function(a,s,o){var u=this.option,c=u.precision,p=this.dataBound,d=u.formatter,_;o=o||["<",">"],isArray$1(a)&&(a=a.slice(),_=!0);var ja=s?a:_?[Ja(a[0]),Ja(a[1])]:Ja(a);if(isString(d))return d.replace("{value}",_?ja[0]:ja).replace("{value2}",_?ja[1]:ja);if(isFunction(d))return _?d(a[0],a[1]):d(a);if(_)return a[0]===p[0]?o[0]+" "+ja[1]:a[1]===p[1]?o[1]+" "+ja[0]:ja[0]+" - "+ja[1];return ja;function Ja(ec){return ec===p[0]?"min":ec===p[1]?"max":(+ec).toFixed(Math.min(c,20))}},r.prototype.resetExtent=function(){var a=this.option,s=asc([a.min,a.max]);this._dataExtent=s},r.prototype.getDataDimensionIndex=function(a){var s=this.option.dimension;if(s!=null)return a.getDimensionIndex(s);for(var o=a.dimensions,u=o.length-1;u>=0;u--){var c=o[u],p=a.getDimensionInfo(c);if(!p.isCalculationCoord)return p.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var a=this.ecModel,s=this.option,o={inRange:s.inRange,outOfRange:s.outOfRange},u=s.target||(s.target={}),c=s.controller||(s.controller={});merge(u,o),merge(c,o);var p=this.isCategory();d.call(this,u),d.call(this,c),_.call(this,u,"inRange","outOfRange"),ja.call(this,c);function d(Ja){isArray(s.color)&&!Ja.inRange&&(Ja.inRange={color:s.color.slice().reverse()}),Ja.inRange=Ja.inRange||{color:a.get("gradientColor")}}function _(Ja,ec,tc){var rc=Ja[ec],nc=Ja[tc];rc&&!nc&&(nc=Ja[tc]={},each$2(rc,function(ic,uc){if(VisualMapping.isValidType(uc)){var eh=visualDefault.get(uc,"inactive",p);eh!=null&&(nc[uc]=eh,uc==="color"&&!nc.hasOwnProperty("opacity")&&!nc.hasOwnProperty("colorAlpha")&&(nc.opacity=[0,0]))}}))}function ja(Ja){var ec=(Ja.inRange||{}).symbol||(Ja.outOfRange||{}).symbol,tc=(Ja.inRange||{}).symbolSize||(Ja.outOfRange||{}).symbolSize,rc=this.get("inactiveColor"),nc=this.getItemSymbol(),ic=nc||"roundRect";each$2(this.stateList,function(uc){var eh=this.itemSize,rh=Ja[uc];rh||(rh=Ja[uc]={color:p?rc:[rc]}),rh.symbol==null&&(rh.symbol=ec&&clone$4(ec)||(p?ic:[ic])),rh.symbolSize==null&&(rh.symbolSize=tc&&clone$4(tc)||(p?eh[0]:[eh[0],eh[0]])),rh.symbol=mapVisual(rh.symbol,function(oh){return oh==="none"?ic:oh});var ah=rh.symbolSize;if(ah!=null){var ih=-1/0;eachVisual(ah,function(oh){oh>ih&&(ih=oh)}),rh.symbolSize=mapVisual(ah,function(oh){return linearMap$1(oh,[0,ih],[0,eh[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(a){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(a){return null},r.prototype.getVisualMeta=function(a){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.optionUpdated=function(a,s){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(a[0]==null||isNaN(a[0]))&&(a[0]=DEFAULT_BAR_BOUND[0]),(a[1]==null||isNaN(a[1]))&&(a[1]=DEFAULT_BAR_BOUND[1])},r.prototype._resetRange=function(){var a=this.getExtent(),s=this.option.range;!s||s.auto?(a.auto=1,this.option.range=a):isArray$1(s)&&(s[0]>s[1]&&s.reverse(),s[0]=Math.max(s[0],a[0]),s[1]=Math.min(s[1],a[1]))},r.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(a){var s=this.option.controller[a].symbolSize;s&&s[0]!==s[1]&&(s[0]=s[1]/3)},this)},r.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},r.prototype.getSelected=function(){var a=this.getExtent(),s=asc$2((this.get("range")||[]).slice());return s[0]>a[1]&&(s[0]=a[1]),s[1]>a[1]&&(s[1]=a[1]),s[0]<a[0]&&(s[0]=a[0]),s[1]<a[0]&&(s[1]=a[0]),s},r.prototype.getValueState=function(a){var s=this.option.range,o=this.getExtent();return(s[0]<=o[0]||s[0]<=a)&&(s[1]>=o[1]||a<=s[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(a){var s=[];return this.eachTargetSeries(function(o){var u=[],c=o.getData();c.each(this.getDataDimensionIndex(c),function(p,d){a[0]<=p&&p<=a[1]&&u.push(d)},this),s.push({seriesId:o.id,dataIndex:u})},this),s},r.prototype.getVisualMeta=function(a){var s=getColorStopValues(this,"outOfRange",this.getExtent()),o=getColorStopValues(this,"inRange",this.option.range.slice()),u=[];function c(tc,rc){u.push({value:tc,color:a(tc,rc)})}for(var p=0,d=0,_=o.length,ja=s.length;d<ja&&(!o.length||s[d]<=o[0]);d++)s[d]<o[p]&&c(s[d],"outOfRange");for(var Ja=1;p<_;p++,Ja=0)Ja&&u.length&&c(o[p],"outOfRange"),c(o[p],"inRange");for(var Ja=1;d<ja;d++)(!o.length||o[o.length-1]<s[d])&&(Ja&&(u.length&&c(u[u.length-1].value,"outOfRange"),Ja=0),c(s[d],"outOfRange"));var ec=u.length;return{stops:u,outerColors:[ec?u[0].color:"transparent",ec?u[ec-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(VisualMapModel);function getColorStopValues(n,r,a){if(a[0]===a[1])return a.slice();for(var s=200,o=(a[1]-a[0])/s,u=a[0],c=[],p=0;p<=s&&u<a[1];p++)c.push(u),u+=o;return c.push(a[1]),c}var VisualMapView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return r.prototype.init=function(a,s){this.ecModel=a,this.api=s},r.prototype.render=function(a,s,o,u){if(this.visualMapModel=a,a.get("show")===!1){this.group.removeAll();return}this.doRender(a,s,o,u)},r.prototype.renderBackground=function(a){var s=this.visualMapModel,o=normalizeCssArray(s.get("padding")||0),u=a.getBoundingRect();a.add(new Rect$2({z2:-1,silent:!0,shape:{x:u.x-o[3],y:u.y-o[0],width:u.width+o[3]+o[1],height:u.height+o[0]+o[2]},style:{fill:s.get("backgroundColor"),stroke:s.get("borderColor"),lineWidth:s.get("borderWidth")}}))},r.prototype.getControllerVisual=function(a,s,o){o=o||{};var u=o.forceState,c=this.visualMapModel,p={};if(s==="color"){var d=c.get("contentColor");p.color=d}function _(tc){return p[tc]}function ja(tc,rc){p[tc]=rc}var Ja=c.controllerVisuals[u||c.getValueState(a)],ec=VisualMapping.prepareVisualTypes(Ja);return each$f(ec,function(tc){var rc=Ja[tc];o.convertOpacityToAlpha&&tc==="opacity"&&(tc="colorAlpha",rc=Ja.__alphaForOpacity),VisualMapping.dependsOn(tc,s)&&rc&&rc.applyVisual(a,_,ja)}),p[s]},r.prototype.positionGroup=function(a){var s=this.visualMapModel,o=this.api;positionElement(a,s.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})},r.prototype.doRender=function(a,s,o,u){},r.type="visualMap",r}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(n,r,a){var s=n.option,o=s.align;if(o!=null&&o!=="auto")return o;for(var u={width:r.getWidth(),height:r.getHeight()},c=s.orient==="horizontal"?1:0,p=paramsSet[c],d=[0,null,10],_={},ja=0;ja<3;ja++)_[paramsSet[1-c][ja]]=d[ja],_[p[ja]]=ja===2?a[0]:s[p[ja]];var Ja=[["x","width",3],["y","height",0]][c],ec=getLayoutRect(_,u,s.padding);return p[(ec.margin[Ja[2]]||0)+ec[Ja[0]]+ec[Ja[1]]*.5<u[Ja[1]]*.5?0:1]}function makeHighDownBatch(n,r){return each$f(n||[],function(a){a.dataIndex!=null&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(r?r.componentIndex:"")}),n}var linearMap=linearMap$2,each$1=each$f,mathMin$1=Math.min,mathMax$1=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return r.prototype.init=function(a,s){n.prototype.init.call(this,a,s),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},r.prototype.doRender=function(a,s,o,u){(!u||u.type!=="selectDataRange"||u.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,s=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(s);var o=a.get("text");this._renderEndsText(s,o,0),this._renderEndsText(s,o,1),this._updateView(!0),this.renderBackground(s),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(s)},r.prototype._renderEndsText=function(a,s,o){if(s){var u=s[1-o];u=u!=null?u+"":"";var c=this.visualMapModel,p=c.get("textGap"),d=c.itemSize,_=this._shapes.mainGroup,ja=this._applyTransform([d[0]/2,o===0?-p:d[1]+p],_),Ja=this._applyTransform(o===0?"bottom":"top",_),ec=this._orient,tc=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle(tc,{x:ja[0],y:ja[1],verticalAlign:ec==="horizontal"?"middle":Ja,align:ec==="horizontal"?Ja:"center",text:u})}))}},r.prototype._renderBar=function(a){var s=this.visualMapModel,o=this._shapes,u=s.itemSize,c=this._orient,p=this._useHandle,d=getItemAlign(s,this.api,u),_=o.mainGroup=this._createBarGroup(d),ja=new Group$3;_.add(ja),ja.add(o.outOfRange=createPolygon()),ja.add(o.inRange=createPolygon(null,p?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),ja.setClipPath(new Rect$2({shape:{x:0,y:0,width:u[0],height:u[1],r:3}}));var Ja=s.textStyleModel.getTextRect("国"),ec=mathMax$1(Ja.width,Ja.height);p&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(s,_,0,u,ec,c),this._createHandle(s,_,1,u,ec,c)),this._createIndicator(s,_,u,ec,c),a.add(_)},r.prototype._createHandle=function(a,s,o,u,c,p){var d=bind$1(this._dragHandle,this,o,!1),_=bind$1(this._dragHandle,this,o,!0),ja=parsePercent$1(a.get("handleSize"),u[0]),Ja=createSymbol$1(a.get("handleIcon"),-ja/2,-ja/2,ja,ja,null,!0),ec=getCursor(this._orient);Ja.attr({cursor:ec,draggable:!0,drift:d,ondragend:_,onmousemove:function(uc){stop(uc.event)}}),Ja.x=u[0]/2,Ja.useStyle(a.getModel("handleStyle").getItemStyle()),Ja.setStyle({strokeNoScale:!0,strokeFirst:!0}),Ja.style.lineWidth*=2,Ja.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(Ja,!0),s.add(Ja);var tc=this.visualMapModel.textStyleModel,rc=new ZRText({cursor:ec,draggable:!0,drift:d,onmousemove:function(uc){stop(uc.event)},ondragend:_,style:createTextStyle(tc,{x:0,y:0,text:""})});rc.ensureState("blur").style={opacity:.1},rc.stateTransition={duration:200},this.group.add(rc);var nc=[ja,0],ic=this._shapes;ic.handleThumbs[o]=Ja,ic.handleLabelPoints[o]=nc,ic.handleLabels[o]=rc},r.prototype._createIndicator=function(a,s,o,u,c){var p=parsePercent$1(a.get("indicatorSize"),o[0]),d=createSymbol$1(a.get("indicatorIcon"),-p/2,-p/2,p,p,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var _=a.getModel("indicatorStyle").getItemStyle();if(d instanceof ZRImage){var ja=d.style;d.useStyle(extend$2({image:ja.image,x:ja.x,y:ja.y,width:ja.width,height:ja.height},_))}else d.useStyle(_);s.add(d);var Ja=this.visualMapModel.textStyleModel,ec=new ZRText({silent:!0,invisible:!0,style:createTextStyle(Ja,{x:0,y:0,text:""})});this.group.add(ec);var tc=[(c==="horizontal"?u/2:HOVER_LINK_OUT)+o[0]/2,0],rc=this._shapes;rc.indicator=d,rc.indicatorLabel=ec,rc.indicatorLabelPoint=tc,this._firstShowIndicator=!0},r.prototype._dragHandle=function(a,s,o,u){if(this._useHandle){if(this._dragging=!s,!s){var c=this._applyTransform([o,u],this._shapes.mainGroup,!0);this._updateInterval(a,c[1]),this._hideIndicator(),this._updateView()}s===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),s?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},r.prototype._resetInterval=function(){var a=this.visualMapModel,s=this._dataInterval=a.getSelected(),o=a.getExtent(),u=[0,a.itemSize[1]];this._handleEnds=[linearMap(s[0],o,u,!0),linearMap(s[1],o,u,!0)]},r.prototype._updateInterval=function(a,s){s=s||0;var o=this.visualMapModel,u=this._handleEnds,c=[0,o.itemSize[1]];sliderMove(s,u,c,a,0);var p=o.getExtent();this._dataInterval=[linearMap(u[0],c,p,!0),linearMap(u[1],c,p,!0)]},r.prototype._updateView=function(a){var s=this.visualMapModel,o=s.getExtent(),u=this._shapes,c=[0,s.itemSize[1]],p=a?c:this._handleEnds,d=this._createBarVisual(this._dataInterval,o,p,"inRange"),_=this._createBarVisual(o,o,c,"outOfRange");u.inRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),u.outOfRange.setStyle({fill:_.barColor}).setShape("points",_.barPoints),this._updateHandle(p,d)},r.prototype._createBarVisual=function(a,s,o,u){var c={forceState:u,convertOpacityToAlpha:!0},p=this._makeColorGradient(a,c),d=[this.getControllerVisual(a[0],"symbolSize",c),this.getControllerVisual(a[1],"symbolSize",c)],_=this._createBarPoints(o,d);return{barColor:new LinearGradient(0,0,0,1,p),barPoints:_,handlesColor:[p[0].color,p[p.length-1].color]}},r.prototype._makeColorGradient=function(a,s){var o=100,u=[],c=(a[1]-a[0])/o;u.push({color:this.getControllerVisual(a[0],"color",s),offset:0});for(var p=1;p<o;p++){var d=a[0]+c*p;if(d>a[1])break;u.push({color:this.getControllerVisual(d,"color",s),offset:p/o})}return u.push({color:this.getControllerVisual(a[1],"color",s),offset:1}),u},r.prototype._createBarPoints=function(a,s){var o=this.visualMapModel.itemSize;return[[o[0]-s[0],a[0]],[o[0],a[0]],[o[0],a[1]],[o[0]-s[1],a[1]]]},r.prototype._createBarGroup=function(a){var s=this._orient,o=this.visualMapModel.get("inverse");return new Group$3(s==="horizontal"&&!o?{scaleX:a==="bottom"?1:-1,rotation:Math.PI/2}:s==="horizontal"&&o?{scaleX:a==="bottom"?-1:1,rotation:-Math.PI/2}:s==="vertical"&&!o?{scaleX:a==="left"?1:-1,scaleY:-1}:{scaleX:a==="left"?1:-1})},r.prototype._updateHandle=function(a,s){if(this._useHandle){var o=this._shapes,u=this.visualMapModel,c=o.handleThumbs,p=o.handleLabels,d=u.itemSize,_=u.getExtent();each$1([0,1],function(ja){var Ja=c[ja];Ja.setStyle("fill",s.handlesColor[ja]),Ja.y=a[ja];var ec=linearMap(a[ja],[0,d[1]],_,!0),tc=this.getControllerVisual(ec,"symbolSize");Ja.scaleX=Ja.scaleY=tc/d[0],Ja.x=d[0]-tc/2;var rc=applyTransform(o.handleLabelPoints[ja],getTransform$1(Ja,this.group));p[ja].setStyle({x:rc[0],y:rc[1],text:u.formatValueText(this._dataInterval[ja]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",o.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(a,s,o,u){var c=this.visualMapModel,p=c.getExtent(),d=c.itemSize,_=[0,d[1]],ja=this._shapes,Ja=ja.indicator;if(Ja){Ja.attr("invisible",!1);var ec={convertOpacityToAlpha:!0},tc=this.getControllerVisual(a,"color",ec),rc=this.getControllerVisual(a,"symbolSize"),nc=linearMap(a,p,_,!0),ic=d[0]-rc/2,uc={x:Ja.x,y:Ja.y};Ja.y=nc,Ja.x=ic;var eh=applyTransform(ja.indicatorLabelPoint,getTransform$1(Ja,this.group)),rh=ja.indicatorLabel;rh.attr("invisible",!1);var ah=this._applyTransform("left",ja.mainGroup),ih=this._orient,oh=ih==="horizontal";rh.setStyle({text:(o||"")+c.formatValueText(s),verticalAlign:oh?ah:"middle",align:oh?"center":ah});var uh={x:ic,y:nc,style:{fill:tc}},ch={style:{x:eh[0],y:eh[1]}};if(c.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var hh={duration:100,easing:"cubicInOut",additive:!0};Ja.x=uc.x,Ja.y=uc.y,Ja.animateTo(uh,hh),rh.animateTo(ch,hh)}else Ja.attr(uh),rh.attr(ch);this._firstShowIndicator=!1;var dh=this._shapes.handleLabels;if(dh)for(var gh=0;gh<dh.length;gh++)this.api.enterBlur(dh[gh])}},r.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(s){if(a._hovering=!0,!a._dragging){var o=a.visualMapModel.itemSize,u=a._applyTransform([s.offsetX,s.offsetY],a._shapes.mainGroup,!0,!0);u[1]=mathMin$1(mathMax$1(0,u[1]),o[1]),a._doHoverLinkToSeries(u[1],0<=u[0]&&u[0]<=o[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(a,s){var o=this.visualMapModel,u=o.itemSize;if(o.option.hoverLink){var c=[0,u[1]],p=o.getExtent();a=mathMin$1(mathMax$1(c[0],a),c[1]);var d=getHalfHoverLinkSize(o,p,c),_=[a-d,a+d],ja=linearMap(a,c,p,!0),Ja=[linearMap(_[0],c,p,!0),linearMap(_[1],c,p,!0)];_[0]<c[0]&&(Ja[0]=-1/0),_[1]>c[1]&&(Ja[1]=1/0),s&&(Ja[0]===-1/0?this._showIndicator(ja,Ja[1],"< ",d):Ja[1]===1/0?this._showIndicator(ja,Ja[0],"> ",d):this._showIndicator(ja,ja,"≈ ",d));var ec=this._hoverLinkDataIndices,tc=[];(s||useHoverLinkOnHandle(o))&&(tc=this._hoverLinkDataIndices=o.findTargetDataIndices(Ja));var rc=compressBatches(ec,tc);this._dispatchHighDown("downplay",makeHighDownBatch(rc[0],o)),this._dispatchHighDown("highlight",makeHighDownBatch(rc[1],o))}},r.prototype._hoverLinkFromSeriesMouseOver=function(a){var s;if(findEventDispatcher(a.target,function(d){var _=getECData(d);if(_.dataIndex!=null)return s=_,!0},!0),!!s){var o=this.ecModel.getSeriesByIndex(s.seriesIndex),u=this.visualMapModel;if(u.isTargetSeries(o)){var c=o.getData(s.dataType),p=c.getStore().get(u.getDataDimensionIndex(c),s.dataIndex);isNaN(p)||this._showIndicator(p,p)}}},r.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var s=this._shapes.handleLabels;if(s)for(var o=0;o<s.length;o++)this.api.leaveBlur(s[o])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(a,this.visualMapModel)),a.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(a,s,o,u){var c=getTransform$1(s,u?null:this.group);return isArray$1(a)?applyTransform(a,c,o):transformDirection(a,c,o)},r.prototype._dispatchHighDown=function(a,s){s&&s.length&&this.api.dispatchAction({type:a,batch:s})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(VisualMapView);function createPolygon(n,r,a,s){return new Polygon({shape:{points:n},draggable:!!a,cursor:r,drift:a,onmousemove:function(o){stop(o.event)},ondragend:s})}function getHalfHoverLinkSize(n,r,a){var s=HOVER_LINK_SIZE/2,o=n.get("hoverLinkDataSize");return o&&(s=linearMap(o,r,a,!0)/2),s}function useHoverLinkOnHandle(n){var r=n.get("hoverLinkOnHandle");return!!(r??n.get("realtime"))}function getCursor(n){return n==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(n,r){r.eachComponent({mainType:"visualMap",query:n},function(a){a.setSelected(n.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(n,r){var a=[];return r.eachComponent("visualMap",function(s){var o=n.pipelineContext;!s.isTargetSeries(n)||o&&o.large||a.push(incrementalApplyVisual(s.stateList,s.targetVisuals,bind$1(s.getValueState,s),s.getDataDimensionIndex(n.getData())))}),a}},{createOnAllSeries:!0,reset:function(n,r){var a=n.getData(),s=[];r.eachComponent("visualMap",function(o){if(o.isTargetSeries(n)){var u=o.getVisualMeta(bind$1(getColorVisual,null,n,o))||{stops:[],outerColors:[]},c=o.getDataDimensionIndex(a);c>=0&&(u.dimension=c,s.push(u))}}),n.getData().setVisual("visualMeta",s)}}];function getColorVisual(n,r,a,s){for(var o=r.targetVisuals[s],u=VisualMapping.prepareVisualTypes(o),c={color:getVisualFromData(n.getData(),"color")},p=0,d=u.length;p<d;p++){var _=u[p],ja=o[_==="opacity"?"__alphaForOpacity":_];ja&&ja.applyVisual(a,Ja,ec)}return c.color;function Ja(tc){return c[tc]}function ec(tc,rc){c[tc]=rc}}var each=each$f;function visualMapPreprocessor(n){var r=n&&n.visualMap;isArray$1(r)||(r=r?[r]:[]),each(r,function(a){if(a){has(a,"splitList")&&!has(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var s=a.pieces;s&&isArray$1(s)&&each(s,function(o){isObject$3(o)&&(has(o,"start")&&!has(o,"min")&&(o.min=o.start),has(o,"end")&&!has(o,"max")&&(o.max=o.end))})}})}function has(n,r){return n&&n.hasOwnProperty&&n.hasOwnProperty(r)}var installed=!1;function installCommon(n){installed||(installed=!0,n.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),n.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(r){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,r)}),n.registerPreprocessor(visualMapPreprocessor))}function install$l(n){n.registerComponentModel(ContinuousModel),n.registerComponentView(ContinuousView),installCommon(n)}var PiecewiseModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a._pieceList=[],a}return r.prototype.optionUpdated=function(a,s){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(a,s);var u=this.option.categories;this.resetVisual(function(c,p){o==="categories"?(c.mappingMethod="category",c.categories=clone$4(u)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=map$1(this._pieceList,function(d){return d=clone$4(d),p!=="inRange"&&(d.visual=null),d}))})},r.prototype.completeVisualOption=function(){var a=this.option,s={},o=VisualMapping.listVisualTypes(),u=this.isCategory();each$f(a.pieces,function(p){each$f(o,function(d){p.hasOwnProperty(d)&&(s[d]=1)})}),each$f(s,function(p,d){var _=!1;each$f(this.stateList,function(ja){_=_||c(a,ja,d)||c(a.target,ja,d)},this),!_&&each$f(this.stateList,function(ja){(a[ja]||(a[ja]={}))[d]=visualDefault.get(d,ja==="inRange"?"active":"inactive",u)})},this);function c(p,d,_){return p&&p[d]&&p[d].hasOwnProperty(_)}n.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(a,s){var o=this.option,u=this._pieceList,c=(s?o:a).selected||{};if(o.selected=c,each$f(u,function(d,_){var ja=this.getSelectedMapKey(d);c.hasOwnProperty(ja)||(c[ja]=!0)},this),o.selectedMode==="single"){var p=!1;each$f(u,function(d,_){var ja=this.getSelectedMapKey(d);c[ja]&&(p?c[ja]=!1:p=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(a){return this._mode==="categories"?a.value+"":a.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(a){this.option.selected=clone$4(a)},r.prototype.getValueState=function(a){var s=VisualMapping.findPieceIndex(a,this._pieceList);return s!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[s])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(a){var s=[],o=this._pieceList;return this.eachTargetSeries(function(u){var c=[],p=u.getData();p.each(this.getDataDimensionIndex(p),function(d,_){var ja=VisualMapping.findPieceIndex(d,o);ja===a&&c.push(_)},this),s.push({seriesId:u.id,dataIndex:c})},this),s},r.prototype.getRepresentValue=function(a){var s;if(this.isCategory())s=a.value;else if(a.value!=null)s=a.value;else{var o=a.interval||[];s=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return s},r.prototype.getVisualMeta=function(a){if(this.isCategory())return;var s=[],o=["",""],u=this;function c(ja,Ja){var ec=u.getRepresentValue({interval:ja});Ja||(Ja=u.getValueState(ec));var tc=a(ec,Ja);ja[0]===-1/0?o[0]=tc:ja[1]===1/0?o[1]=tc:s.push({value:ja[0],color:tc},{value:ja[1],color:tc})}var p=this._pieceList.slice();if(!p.length)p.push({interval:[-1/0,1/0]});else{var d=p[0].interval[0];d!==-1/0&&p.unshift({interval:[-1/0,d]}),d=p[p.length-1].interval[1],d!==1/0&&p.push({interval:[d,1/0]})}var _=-1/0;return each$f(p,function(ja){var Ja=ja.interval;Ja&&(Ja[0]>_&&c([_,Ja[0]],"outOfRange"),c(Ja.slice()),_=Ja[1])},this),{stops:s,outerColors:o}},r.type="visualMap.piecewise",r.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(VisualMapModel),resetMethods={splitNumber:function(n){var r=this.option,a=Math.min(r.precision,20),s=this.getExtent(),o=r.splitNumber;o=Math.max(parseInt(o,10),1),r.splitNumber=o;for(var u=(s[1]-s[0])/o;+u.toFixed(a)!==u&&a<5;)a++;r.precision=a,u=+u.toFixed(a),r.minOpen&&n.push({interval:[-1/0,s[0]],close:[0,0]});for(var c=0,p=s[0];c<o;p+=u,c++){var d=c===o-1?s[1]:p+u;n.push({interval:[p,d],close:[1,1]})}r.maxOpen&&n.push({interval:[s[1],1/0],close:[0,0]}),reformIntervals(n),each$f(n,function(_,ja){_.index=ja,_.text=this.formatValueText(_.interval)},this)},categories:function(n){var r=this.option;each$f(r.categories,function(a){n.push({text:this.formatValueText(a,!0),value:a})},this),normalizeReverse(r,n)},pieces:function(n){var r=this.option;each$f(r.pieces,function(a,s){isObject$3(a)||(a={value:a});var o={text:"",index:s};if(a.label!=null&&(o.text=a.label),a.hasOwnProperty("value")){var u=o.value=a.value;o.interval=[u,u],o.close=[1,1]}else{for(var c=o.interval=[],p=o.close=[0,0],d=[1,0,1],_=[-1/0,1/0],ja=[],Ja=0;Ja<2;Ja++){for(var ec=[["gte","gt","min"],["lte","lt","max"]][Ja],tc=0;tc<3&&c[Ja]==null;tc++)c[Ja]=a[ec[tc]],p[Ja]=d[tc],ja[Ja]=tc===2;c[Ja]==null&&(c[Ja]=_[Ja])}ja[0]&&c[1]===1/0&&(p[0]=0),ja[1]&&c[0]===-1/0&&(p[1]=0),c[0]===c[1]&&p[0]&&p[1]&&(o.value=c[0])}o.visual=VisualMapping.retrieveVisuals(a),n.push(o)},this),normalizeReverse(r,n),reformIntervals(n),each$f(n,function(a){var s=a.close,o=[["<","≤"][s[1]],[">","≥"][s[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,o)},this)}};function normalizeReverse(n,r){var a=n.inverse;(n.orient==="vertical"?!a:a)&&r.reverse()}var PiecewiseVisualMapView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type=r.type,a}return r.prototype.doRender=function(){var a=this.group;a.removeAll();var s=this.visualMapModel,o=s.get("textGap"),u=s.textStyleModel,c=u.getFont(),p=u.getTextColor(),d=this._getItemAlign(),_=s.itemSize,ja=this._getViewData(),Ja=ja.endsText,ec=retrieve$1(s.get("showLabel",!0),!Ja);Ja&&this._renderEndsText(a,Ja[0],_,ec,d),each$f(ja.viewPieceList,function(tc){var rc=tc.piece,nc=new Group$3;nc.onclick=bind$1(this._onItemClick,this,rc),this._enableHoverLink(nc,tc.indexInModelPieceList);var ic=s.getRepresentValue(rc);if(this._createItemSymbol(nc,ic,[0,0,_[0],_[1]]),ec){var uc=this.visualMapModel.getValueState(ic);nc.add(new ZRText({style:{x:d==="right"?-o:_[0]+o,y:_[1]/2,text:rc.text,verticalAlign:"middle",align:d,font:c,fill:p,opacity:uc==="outOfRange"?.5:1}}))}a.add(nc)},this),Ja&&this._renderEndsText(a,Ja[1],_,ec,d),box(s.get("orient"),a,s.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},r.prototype._enableHoverLink=function(a,s){var o=this;a.on("mouseover",function(){return u("highlight")}).on("mouseout",function(){return u("downplay")});var u=function(c){var p=o.visualMapModel;p.option.hoverLink&&o.api.dispatchAction({type:c,batch:makeHighDownBatch(p.findTargetDataIndices(s),p)})}},r.prototype._getItemAlign=function(){var a=this.visualMapModel,s=a.option;if(s.orient==="vertical")return getItemAlign(a,this.api,a.itemSize);var o=s.align;return(!o||o==="auto")&&(o="left"),o},r.prototype._renderEndsText=function(a,s,o,u,c){if(s){var p=new Group$3,d=this.visualMapModel.textStyleModel;p.add(new ZRText({style:createTextStyle(d,{x:u?c==="right"?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:u?c:"center",text:s})})),a.add(p)}},r.prototype._getViewData=function(){var a=this.visualMapModel,s=map$1(a.getPieceList(),function(p,d){return{piece:p,indexInModelPieceList:d}}),o=a.get("text"),u=a.get("orient"),c=a.get("inverse");return(u==="horizontal"?c:!c)?s.reverse():o&&(o=o.slice().reverse()),{viewPieceList:s,endsText:o}},r.prototype._createItemSymbol=function(a,s,o){a.add(createSymbol$1(this.getControllerVisual(s,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(s,"color")))},r.prototype._onItemClick=function(a){var s=this.visualMapModel,o=s.option,u=o.selectedMode;if(u){var c=clone$4(o.selected),p=s.getSelectedMapKey(a);u==="single"||u===!0?(c[p]=!0,each$f(c,function(d,_){c[_]=_===p})):c[p]=!c[p],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:c})}},r.type="visualMap.piecewise",r}(VisualMapView);function install$k(n){n.registerComponentModel(PiecewiseModel),n.registerComponentView(PiecewiseVisualMapView),installCommon(n)}function install$j(n){use(install$l),use(install$k)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(n,r){var a=n.getModel("aria");if(!a.get("enabled"))return;var s=clone$4(DEFAULT_OPTION);merge(s.label,n.getLocaleModel().get("aria"),!1),merge(a.option,s,!1),o(),u();function o(){var _=a.getModel("decal"),ja=_.get("show");if(ja){var Ja=createHashMap();n.eachSeries(function(ec){if(!ec.isColorBySeries()){var tc=Ja.get(ec.type);tc||(tc={},Ja.set(ec.type,tc)),inner(ec).scope=tc}}),n.eachRawSeries(function(ec){if(n.isSeriesFiltered(ec))return;if(isFunction(ec.enableAriaDecal)){ec.enableAriaDecal();return}var tc=ec.getData();if(ec.isColorBySeries()){var eh=getDecalFromPalette(ec.ecModel,ec.name,decalPaletteScope,n.getSeriesCount()),rh=tc.getVisual("decal");tc.setVisual("decal",ah(rh,eh))}else{var rc=ec.getRawData(),nc={},ic=inner(ec).scope;tc.each(function(ih){var oh=tc.getRawIndex(ih);nc[oh]=ih});var uc=rc.count();rc.each(function(ih){var oh=nc[ih],uh=rc.getName(ih)||ih+"",ch=getDecalFromPalette(ec.ecModel,uh,ic,uc),hh=tc.getItemVisual(oh,"decal");tc.setItemVisual(oh,"decal",ah(hh,ch))})}function ah(ih,oh){var uh=ih?extend$2(extend$2({},oh),ih):oh;return uh.dirty=!0,uh}})}}function u(){var _=n.getLocaleModel().get("aria"),ja=a.getModel("label");if(ja.option=defaults(ja.option,_),!!ja.get("enabled")){var Ja=r.getZr().dom;if(ja.get("description")){Ja.setAttribute("aria-label",ja.get("description"));return}var ec=n.getSeriesCount(),tc=ja.get(["data","maxCount"])||10,rc=ja.get(["series","maxCount"])||10,nc=Math.min(ec,rc),ic;if(!(ec<1)){var uc=p();if(uc){var eh=ja.get(["general","withTitle"]);ic=c(eh,{title:uc})}else ic=ja.get(["general","withoutTitle"]);var rh=[],ah=ec>1?ja.get(["series","multiple","prefix"]):ja.get(["series","single","prefix"]);ic+=c(ah,{seriesCount:ec}),n.eachSeries(function(ch,hh){if(hh<nc){var dh=void 0,gh=ch.get("name"),fh=gh?"withName":"withoutName";dh=ec>1?ja.get(["series","multiple",fh]):ja.get(["series","single",fh]),dh=c(dh,{seriesId:ch.seriesIndex,seriesName:ch.get("name"),seriesType:d(ch.subType)});var vh=ch.getData();if(vh.count()>tc){var ph=ja.get(["data","partialData"]);dh+=c(ph,{displayCnt:tc})}else dh+=ja.get(["data","allData"]);for(var yh=ja.get(["data","separator","middle"]),xh=ja.get(["data","separator","end"]),_h=[],bh=0;bh<vh.count();bh++)if(bh<tc){var Dh=vh.getName(bh),Th=vh.getValues(bh),Ch=ja.get(["data",Dh?"withName":"withoutName"]);_h.push(c(Ch,{name:Dh,value:Th.join(yh)}))}dh+=_h.join(yh)+xh,rh.push(dh)}});var ih=ja.getModel(["series","multiple","separator"]),oh=ih.get("middle"),uh=ih.get("end");ic+=rh.join(oh)+uh,Ja.setAttribute("aria-label",ic)}}}function c(_,ja){if(!isString(_))return _;var Ja=_;return each$f(ja,function(ec,tc){Ja=Ja.replace(new RegExp("\\{\\s*"+tc+"\\s*\\}","g"),ec)}),Ja}function p(){var _=n.get("title");return _&&_.length&&(_=_[0]),_&&_.text}function d(_){var ja=n.getLocaleModel().get(["series","typeNames"]);return ja[_]||ja.chart}}function ariaPreprocessor(n){if(!(!n||!n.aria)){var r=n.aria;r.show!=null&&(r.enabled=r.show),r.label=r.label||{},each$f(["description","general","series","data"],function(a){r[a]!=null&&(r.label[a]=r[a])})}}function install$i(n){n.registerPreprocessor(ariaPreprocessor),n.registerVisual(n.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function n(r){var a=this._condVal=isString(r)?new RegExp(r):isRegExp(r)?r:null;if(a==null){var s="";throwError(s)}}return n.prototype.evaluate=function(r){var a=typeof r;return isString(a)?this._condVal.test(r):isNumber(a)?this._condVal.test(r+""):!1},n}(),ConstConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),AndConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var r=this.children,a=0;a<r.length;a++)if(!r[a].evaluate())return!1;return!0},n}(),OrConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var r=this.children,a=0;a<r.length;a++)if(r[a].evaluate())return!0;return!1},n}(),NotConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),RelationalConditionInternal=function(){function n(){}return n.prototype.evaluate=function(){for(var r=!!this.valueParser,a=this.getValue,s=a(this.valueGetterParam),o=r?this.valueParser(s):null,u=0;u<this.subCondList.length;u++)if(!this.subCondList[u].evaluate(r?o:s))return!1;return!0},n}();function parseOption(n,r){if(n===!0||n===!1){var a=new ConstConditionInternal;return a.value=n,a}var s="";return isObjectNotArray(n)||throwError(s),n.and?parseAndOrOption("and",n,r):n.or?parseAndOrOption("or",n,r):n.not?parseNotOption(n,r):parseRelationalOption(n,r)}function parseAndOrOption(n,r,a){var s=r[n],o="";isArray$1(s)||throwError(o),s.length||throwError(o);var u=n==="and"?new AndConditionInternal:new OrConditionInternal;return u.children=map$1(s,function(c){return parseOption(c,a)}),u.children.length||throwError(o),u}function parseNotOption(n,r){var a=n.not,s="";isObjectNotArray(a)||throwError(s);var o=new NotConditionInternal;return o.child=parseOption(a,r),o.child||throwError(s),o}function parseRelationalOption(n,r){for(var a="",s=r.prepareGetValue(n),o=[],u=keys(n),c=n.parser,p=c?getRawValueParser(c):null,d=0;d<u.length;d++){var _=u[d];if(!(_==="parser"||r.valueGetterAttrMap.get(_))){var ja=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,_)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[_]:_,Ja=n[_],ec=p?p(Ja):Ja,tc=createFilterComparator(ja,ec)||ja==="reg"&&new RegExpEvaluator(ec);tc||throwError(a),o.push(tc)}}o.length||throwError(a);var rc=new RelationalConditionInternal;return rc.valueGetterParam=s,rc.valueParser=p,rc.getValue=r.getValue,rc.subCondList=o,rc}function isObjectNotArray(n){return isObject$3(n)&&!isArrayLike(n)}var ConditionalExpressionParsed=function(){function n(r,a){this._cond=parseOption(r,a)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}();function parseConditionalExpression(n,r){return new ConditionalExpressionParsed(n,r)}var filterTransform={type:"echarts:filter",transform:function(n){for(var r=n.upstream,a,s=parseConditionalExpression(n.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(p){var d="",_=p.dimension;hasOwn(p,"dimension")||throwError(d);var ja=r.getDimensionInfo(_);return ja||throwError(d),{dimIdx:ja.index}},getValue:function(p){return r.retrieveValueFromItem(a,p.dimIdx)}}),o=[],u=0,c=r.count();u<c;u++)a=r.getRawDataItem(u),s.evaluate()&&o.push(a);return{data:o}}},sortTransform={type:"echarts:sort",transform:function(n){var r=n.upstream,a=n.config,s="",o=normalizeToArray(a);o.length||throwError(s);var u=[];each$f(o,function(ja){var Ja=ja.dimension,ec=ja.order,tc=ja.parser,rc=ja.incomparable;if(Ja==null&&throwError(s),ec!=="asc"&&ec!=="desc"&&throwError(s),rc&&rc!=="min"&&rc!=="max"){var nc="";throwError(nc)}if(ec!=="asc"&&ec!=="desc"){var ic="";throwError(ic)}var uc=r.getDimensionInfo(Ja);uc||throwError(s);var eh=tc?getRawValueParser(tc):null;tc&&!eh&&throwError(s),u.push({dimIdx:uc.index,parser:eh,comparator:new SortOrderComparator(ec,rc)})});var c=r.sourceFormat;c!==SOURCE_FORMAT_ARRAY_ROWS&&c!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(s);for(var p=[],d=0,_=r.count();d<_;d++)p.push(r.getRawDataItem(d));return p.sort(function(ja,Ja){for(var ec=0;ec<u.length;ec++){var tc=u[ec],rc=r.retrieveValueFromItem(ja,tc.dimIdx),nc=r.retrieveValueFromItem(Ja,tc.dimIdx);tc.parser&&(rc=tc.parser(rc),nc=tc.parser(nc));var ic=tc.comparator.evaluate(rc,nc);if(ic!==0)return ic}return 0}),{data:p}}};function install$h(n){n.registerTransform(filterTransform),n.registerTransform(sortTransform)}var DatasetModel=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type="dataset",a}return r.prototype.init=function(a,s,o){n.prototype.init.call(this,a,s,o),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},r.prototype.mergeOption=function(a,s){n.prototype.mergeOption.call(this,a,s),disableTransformOptionMerge(this)},r.prototype.optionUpdated=function(){this._sourceManager.dirty()},r.prototype.getSourceManager=function(){return this._sourceManager},r.type="dataset",r.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},r}(ComponentModel),DatasetView=function(n){__extends(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.type="dataset",a}return r.type="dataset",r}(ComponentView);function install$g(n){n.registerComponentModel(DatasetModel),n.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(n,r){return Math.abs(n-r)<1e-5}function pathToBezierCurves(n){var r=n.data,a=n.len(),s=[],o,u=0,c=0,p=0,d=0;function _(vh,ph){o&&o.length>2&&s.push(o),o=[vh,ph]}function ja(vh,ph,yh,xh){aroundEqual(vh,yh)&&aroundEqual(ph,xh)||o.push(vh,ph,yh,xh,yh,xh)}function Ja(vh,ph,yh,xh,_h,bh){var Dh=Math.abs(ph-vh),Th=Math.tan(Dh/4)*4/3,Ch=ph<vh?-1:1,wh=Math.cos(vh),Nh=Math.sin(vh),Rh=Math.cos(ph),kh=Math.sin(ph),Lh=wh*_h+yh,Fh=Nh*bh+xh,Wh=Rh*_h+yh,Qh=kh*bh+xh,jh=_h*Th*Ch,Hh=bh*Th*Ch;o.push(Lh-jh*Nh,Fh+Hh*wh,Wh+jh*kh,Qh-Hh*Rh,Wh,Qh)}for(var ec,tc,rc,nc,ic=0;ic<a;){var uc=r[ic++],eh=ic===1;switch(eh&&(u=r[ic],c=r[ic+1],p=u,d=c,(uc===CMD.L||uc===CMD.C||uc===CMD.Q)&&(o=[p,d])),uc){case CMD.M:u=p=r[ic++],c=d=r[ic++],_(p,d);break;case CMD.L:ec=r[ic++],tc=r[ic++],ja(u,c,ec,tc),u=ec,c=tc;break;case CMD.C:o.push(r[ic++],r[ic++],r[ic++],r[ic++],u=r[ic++],c=r[ic++]);break;case CMD.Q:ec=r[ic++],tc=r[ic++],rc=r[ic++],nc=r[ic++],o.push(u+2/3*(ec-u),c+2/3*(tc-c),rc+2/3*(ec-rc),nc+2/3*(tc-nc),rc,nc),u=rc,c=nc;break;case CMD.A:var rh=r[ic++],ah=r[ic++],ih=r[ic++],oh=r[ic++],uh=r[ic++],ch=r[ic++]+uh;ic+=1;var hh=!r[ic++];ec=Math.cos(uh)*ih+rh,tc=Math.sin(uh)*oh+ah,eh?(p=ec,d=tc,_(p,d)):ja(u,c,ec,tc),u=Math.cos(ch)*ih+rh,c=Math.sin(ch)*oh+ah;for(var dh=(hh?-1:1)*Math.PI/2,gh=uh;hh?gh>ch:gh<ch;gh+=dh){var fh=hh?Math.max(gh+dh,ch):Math.min(gh+dh,ch);Ja(gh,fh,rh,ah,ih,oh)}break;case CMD.R:p=u=r[ic++],d=c=r[ic++],ec=p+r[ic++],tc=d+r[ic++],_(ec,d),ja(ec,d,ec,tc),ja(ec,tc,p,tc),ja(p,tc,p,d),ja(p,d,ec,d);break;case CMD.Z:o&&ja(u,c,p,d),u=p,c=d;break}}return o&&o.length>2&&s.push(o),s}function adpativeBezier(n,r,a,s,o,u,c,p,d,_){if(aroundEqual(n,a)&&aroundEqual(r,s)&&aroundEqual(o,c)&&aroundEqual(u,p)){d.push(c,p);return}var ja=2/_,Ja=ja*ja,ec=c-n,tc=p-r,rc=Math.sqrt(ec*ec+tc*tc);ec/=rc,tc/=rc;var nc=a-n,ic=s-r,uc=o-c,eh=u-p,rh=nc*nc+ic*ic,ah=uc*uc+eh*eh;if(rh<Ja&&ah<Ja){d.push(c,p);return}var ih=ec*nc+tc*ic,oh=-ec*uc-tc*eh,uh=rh-ih*ih,ch=ah-oh*oh;if(uh<Ja&&ih>=0&&ch<Ja&&oh>=0){d.push(c,p);return}var hh=[],dh=[];cubicSubdivide(n,a,o,c,.5,hh),cubicSubdivide(r,s,u,p,.5,dh),adpativeBezier(hh[0],dh[0],hh[1],dh[1],hh[2],dh[2],hh[3],dh[3],d,_),adpativeBezier(hh[4],dh[4],hh[5],dh[5],hh[6],dh[6],hh[7],dh[7],d,_)}function pathToPolygons(n,r){var a=pathToBezierCurves(n),s=[];r=r||1;for(var o=0;o<a.length;o++){var u=a[o],c=[],p=u[0],d=u[1];c.push(p,d);for(var _=2;_<u.length;){var ja=u[_++],Ja=u[_++],ec=u[_++],tc=u[_++],rc=u[_++],nc=u[_++];adpativeBezier(p,d,ja,Ja,ec,tc,rc,nc,c,r),p=rc,d=nc}s.push(c)}return s}function getDividingGrids(n,r,a){var s=n[r],o=n[1-r],u=Math.abs(s/o),c=Math.ceil(Math.sqrt(u*a)),p=Math.floor(a/c);p===0&&(p=1,c=a);for(var d=[],_=0;_<c;_++)d.push(p);var ja=c*p,Ja=a-ja;if(Ja>0)for(var _=0;_<Ja;_++)d[_%c]+=1;return d}function divideSector(n,r,a){for(var s=n.r0,o=n.r,u=n.startAngle,c=n.endAngle,p=Math.abs(c-u),d=p*o,_=o-s,ja=d>Math.abs(_),Ja=getDividingGrids([d,_],ja?0:1,r),ec=(ja?p:_)/Ja.length,tc=0;tc<Ja.length;tc++)for(var rc=(ja?_:p)/Ja[tc],nc=0;nc<Ja[tc];nc++){var ic={};ja?(ic.startAngle=u+ec*tc,ic.endAngle=u+ec*(tc+1),ic.r0=s+rc*nc,ic.r=s+rc*(nc+1)):(ic.startAngle=u+rc*nc,ic.endAngle=u+rc*(nc+1),ic.r0=s+ec*tc,ic.r=s+ec*(tc+1)),ic.clockwise=n.clockwise,ic.cx=n.cx,ic.cy=n.cy,a.push(ic)}}function divideRect(n,r,a){for(var s=n.width,o=n.height,u=s>o,c=getDividingGrids([s,o],u?0:1,r),p=u?"width":"height",d=u?"height":"width",_=u?"x":"y",ja=u?"y":"x",Ja=n[p]/c.length,ec=0;ec<c.length;ec++)for(var tc=n[d]/c[ec],rc=0;rc<c[ec];rc++){var nc={};nc[_]=ec*Ja,nc[ja]=rc*tc,nc[p]=Ja,nc[d]=tc,nc.x+=n.x,nc.y+=n.y,a.push(nc)}}function crossProduct2d(n,r,a,s){return n*s-a*r}function lineLineIntersect(n,r,a,s,o,u,c,p){var d=a-n,_=s-r,ja=c-o,Ja=p-u,ec=crossProduct2d(ja,Ja,d,_);if(Math.abs(ec)<1e-6)return null;var tc=n-o,rc=r-u,nc=crossProduct2d(tc,rc,ja,Ja)/ec;return nc<0||nc>1?null:new Point(nc*d+n,nc*_+r)}function projPtOnLine(n,r,a){var s=new Point;Point.sub(s,a,r),s.normalize();var o=new Point;Point.sub(o,n,r);var u=o.dot(s);return u}function addToPoly(n,r){var a=n[n.length-1];a&&a[0]===r[0]&&a[1]===r[1]||n.push(r)}function splitPolygonByLine(n,r,a){for(var s=n.length,o=[],u=0;u<s;u++){var c=n[u],p=n[(u+1)%s],d=lineLineIntersect(c[0],c[1],p[0],p[1],r.x,r.y,a.x,a.y);d&&o.push({projPt:projPtOnLine(d,r,a),pt:d,idx:u})}if(o.length<2)return[{points:n},{points:n}];o.sort(function(ic,uc){return ic.projPt-uc.projPt});var _=o[0],ja=o[o.length-1];if(ja.idx<_.idx){var Ja=_;_=ja,ja=Ja}for(var ec=[_.pt.x,_.pt.y],tc=[ja.pt.x,ja.pt.y],rc=[ec],nc=[tc],u=_.idx+1;u<=ja.idx;u++)addToPoly(rc,n[u].slice());addToPoly(rc,tc),addToPoly(rc,ec);for(var u=ja.idx+1;u<=_.idx+s;u++)addToPoly(nc,n[u%s].slice());return addToPoly(nc,ec),addToPoly(nc,tc),[{points:rc},{points:nc}]}function binaryDividePolygon(n){var r=n.points,a=[],s=[];fromPoints(r,a,s);var o=new BoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),u=o.width,c=o.height,p=o.x,d=o.y,_=new Point,ja=new Point;return u>c?(_.x=ja.x=p+u/2,_.y=d,ja.y=d+c):(_.y=ja.y=d+c/2,_.x=p,ja.x=p+u),splitPolygonByLine(r,_,ja)}function binaryDivideRecursive(n,r,a,s){if(a===1)s.push(r);else{var o=Math.floor(a/2),u=n(r);binaryDivideRecursive(n,u[0],o,s),binaryDivideRecursive(n,u[1],a-o,s)}return s}function clone(n,r){for(var a=[],s=0;s<r;s++)a.push(clonePath(n));return a}function copyPathProps(n,r){r.setStyle(n.style),r.z=n.z,r.z2=n.z2,r.zlevel=n.zlevel}function polygonConvert(n){for(var r=[],a=0;a<n.length;)r.push([n[a++],n[a++]]);return r}function split(n,r){var a=[],s=n.shape,o;switch(n.type){case"rect":divideRect(s,r,a),o=Rect$2;break;case"sector":divideSector(s,r,a),o=Sector;break;case"circle":divideSector({r0:0,r:s.r,startAngle:0,endAngle:Math.PI*2,cx:s.cx,cy:s.cy},r,a),o=Sector;break;default:var u=n.getComputedTransform(),c=u?Math.sqrt(Math.max(u[0]*u[0]+u[1]*u[1],u[2]*u[2]+u[3]*u[3])):1,p=map$1(pathToPolygons(n.getUpdatedPathProxy(),c),function(uc){return polygonConvert(uc)}),d=p.length;if(d===0)binaryDivideRecursive(binaryDividePolygon,{points:p[0]},r,a);else if(d===r)for(var _=0;_<d;_++)a.push({points:p[_]});else{var ja=0,Ja=map$1(p,function(uc){var eh=[],rh=[];fromPoints(uc,eh,rh);var ah=(rh[1]-eh[1])*(rh[0]-eh[0]);return ja+=ah,{poly:uc,area:ah}});Ja.sort(function(uc,eh){return eh.area-uc.area});for(var ec=r,_=0;_<d;_++){var tc=Ja[_];if(ec<=0)break;var rc=_===d-1?ec:Math.ceil(tc.area/ja*r);rc<0||(binaryDivideRecursive(binaryDividePolygon,{points:tc.poly},rc,a),ec-=rc)}}o=Polygon;break}if(!o)return clone(n,r);for(var nc=[],_=0;_<a.length;_++){var ic=new o;ic.setShape(a[_]),copyPathProps(n,ic),nc.push(ic)}return nc}function alignSubpath(n,r){var a=n.length,s=r.length;if(a===s)return[n,r];for(var o=[],u=[],c=a<s?n:r,p=Math.min(a,s),d=Math.abs(s-a)/6,_=(p-2)/6,ja=Math.ceil(d/_)+1,Ja=[c[0],c[1]],ec=d,tc=2;tc<p;){var rc=c[tc-2],nc=c[tc-1],ic=c[tc++],uc=c[tc++],eh=c[tc++],rh=c[tc++],ah=c[tc++],ih=c[tc++];if(ec<=0){Ja.push(ic,uc,eh,rh,ah,ih);continue}for(var oh=Math.min(ec,ja-1)+1,uh=1;uh<=oh;uh++){var ch=uh/oh;cubicSubdivide(rc,ic,eh,ah,ch,o),cubicSubdivide(nc,uc,rh,ih,ch,u),rc=o[3],nc=u[3],Ja.push(o[1],u[1],o[2],u[2],rc,nc),ic=o[5],uc=u[5],eh=o[6],rh=u[6]}ec-=oh-1}return c===n?[Ja,r]:[n,Ja]}function createSubpath(n,r){for(var a=n.length,s=n[a-2],o=n[a-1],u=[],c=0;c<r.length;)u[c++]=s,u[c++]=o;return u}function alignBezierCurves(n,r){for(var a,s,o,u=[],c=[],p=0;p<Math.max(n.length,r.length);p++){var d=n[p],_=r[p],ja=void 0,Ja=void 0;d?_?(a=alignSubpath(d,_),ja=a[0],Ja=a[1],s=ja,o=Ja):(Ja=createSubpath(o||d,d),ja=d):(ja=createSubpath(s||_,_),Ja=_),u.push(ja),c.push(Ja)}return[u,c]}function centroid(n){for(var r=0,a=0,s=0,o=n.length,u=0,c=o-2;u<o;c=u,u+=2){var p=n[c],d=n[c+1],_=n[u],ja=n[u+1],Ja=p*ja-_*d;r+=Ja,a+=(p+_)*Ja,s+=(d+ja)*Ja}return r===0?[n[0]||0,n[1]||0]:[a/r/3,s/r/3,r]}function findBestRingOffset(n,r,a,s){for(var o=(n.length-2)/6,u=1/0,c=0,p=n.length,d=p-2,_=0;_<o;_++){for(var ja=_*6,Ja=0,ec=0;ec<p;ec+=2){var tc=ec===0?ja:(ja+ec-2)%d+2,rc=n[tc]-a[0],nc=n[tc+1]-a[1],ic=r[ec]-s[0],uc=r[ec+1]-s[1],eh=ic-rc,rh=uc-nc;Ja+=eh*eh+rh*rh}Ja<u&&(u=Ja,c=_)}return c}function reverse(n){for(var r=[],a=n.length,s=0;s<a;s+=2)r[s]=n[a-s-2],r[s+1]=n[a-s-1];return r}function findBestMorphingRotation(n,r,a,s){for(var o=[],u,c=0;c<n.length;c++){var p=n[c],d=r[c],_=centroid(p),ja=centroid(d);u==null&&(u=_[2]<0!=ja[2]<0);var Ja=[],ec=[],tc=0,rc=1/0,nc=[],ic=p.length;u&&(p=reverse(p));for(var uc=findBestRingOffset(p,d,_,ja)*6,eh=ic-2,rh=0;rh<eh;rh+=2){var ah=(uc+rh)%eh+2;Ja[rh+2]=p[ah]-_[0],Ja[rh+3]=p[ah+1]-_[1]}Ja[0]=p[uc]-_[0],Ja[1]=p[uc+1]-_[1];for(var ih=s/a,oh=-s/2;oh<=s/2;oh+=ih){for(var uh=Math.sin(oh),ch=Math.cos(oh),hh=0,rh=0;rh<p.length;rh+=2){var dh=Ja[rh],gh=Ja[rh+1],fh=d[rh]-ja[0],vh=d[rh+1]-ja[1],ph=fh*ch-vh*uh,yh=fh*uh+vh*ch;nc[rh]=ph,nc[rh+1]=yh;var xh=ph-dh,_h=yh-gh;hh+=xh*xh+_h*_h}if(hh<rc){rc=hh,tc=oh;for(var bh=0;bh<nc.length;bh++)ec[bh]=nc[bh]}}o.push({from:Ja,to:ec,fromCp:_,toCp:ja,rotation:-tc})}return o}function isCombineMorphing(n){return n.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(n,r,a){var s=SAVED_METHOD_PREFIX+r,o=n[s]||n[r];n[s]||(n[s]=n[r]);var u=a.replace,c=a.after,p=a.before;n[r]=function(){var d=arguments,_;return p&&p.apply(this,d),u?_=u.apply(this,d):_=o.apply(this,d),c&&c.apply(this,d),_}}function restoreMethod(n,r){var a=SAVED_METHOD_PREFIX+r;n[a]&&(n[r]=n[a],n[a]=null)}function applyTransformOnBeziers(n,r){for(var a=0;a<n.length;a++)for(var s=n[a],o=0;o<s.length;){var u=s[o],c=s[o+1];s[o++]=r[0]*u+r[2]*c+r[4],s[o++]=r[1]*u+r[3]*c+r[5]}}function prepareMorphPath(n,r){var a=n.getUpdatedPathProxy(),s=r.getUpdatedPathProxy(),o=alignBezierCurves(pathToBezierCurves(a),pathToBezierCurves(s)),u=o[0],c=o[1],p=n.getComputedTransform(),d=r.getComputedTransform();function _(){this.transform=null}p&&applyTransformOnBeziers(u,p),d&&applyTransformOnBeziers(c,d),saveAndModifyMethod(r,"updateTransform",{replace:_}),r.transform=null;var ja=findBestMorphingRotation(u,c,10,Math.PI),Ja=[];saveAndModifyMethod(r,"buildPath",{replace:function(ec){for(var tc=r.__morphT,rc=1-tc,nc=[],ic=0;ic<ja.length;ic++){var uc=ja[ic],eh=uc.from,rh=uc.to,ah=uc.rotation*tc,ih=uc.fromCp,oh=uc.toCp,uh=Math.sin(ah),ch=Math.cos(ah);lerp$2(nc,ih,oh,tc);for(var hh=0;hh<eh.length;hh+=2){var dh=eh[hh],gh=eh[hh+1],fh=rh[hh],vh=rh[hh+1],ph=dh*rc+fh*tc,yh=gh*rc+vh*tc;Ja[hh]=ph*ch-yh*uh+nc[0],Ja[hh+1]=ph*uh+yh*ch+nc[1]}var xh=Ja[0],_h=Ja[1];ec.moveTo(xh,_h);for(var hh=2;hh<eh.length;){var fh=Ja[hh++],vh=Ja[hh++],bh=Ja[hh++],Dh=Ja[hh++],Th=Ja[hh++],Ch=Ja[hh++];xh===fh&&_h===vh&&bh===Th&&Dh===Ch?ec.lineTo(Th,Ch):ec.bezierCurveTo(fh,vh,bh,Dh,Th,Ch),xh=Th,_h=Ch}}}})}function morphPath(n,r,a){if(!n||!r)return r;var s=a.done,o=a.during;prepareMorphPath(n,r),r.__morphT=0;function u(){restoreMethod(r,"buildPath"),restoreMethod(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()}return r.animateTo({__morphT:1},defaults({during:function(c){r.dirtyShape(),o&&o(c)},done:function(){u(),s&&s()}},a)),r}function hilbert(n,r,a,s,o,u){var c=16;n=o===a?0:Math.round(32767*(n-a)/(o-a)),r=u===s?0:Math.round(32767*(r-s)/(u-s));for(var p=0,d,_=(1<<c)/2;_>0;_/=2){var ja=0,Ja=0;(n&_)>0&&(ja=1),(r&_)>0&&(Ja=1),p+=_*_*(3*ja^Ja),Ja===0&&(ja===1&&(n=_-1-n,r=_-1-r),d=n,n=r,r=d)}return p}function sortPaths(n){var r=1/0,a=1/0,s=-1/0,o=-1/0,u=map$1(n,function(p){var d=p.getBoundingRect(),_=p.getComputedTransform(),ja=d.x+d.width/2+(_?_[4]:0),Ja=d.y+d.height/2+(_?_[5]:0);return r=Math.min(ja,r),a=Math.min(Ja,a),s=Math.max(ja,s),o=Math.max(Ja,o),[ja,Ja]}),c=map$1(u,function(p,d){return{cp:p,z:hilbert(p[0],p[1],r,a,s,o),path:n[d]}});return c.sort(function(p,d){return p.z-d.z}).map(function(p){return p.path})}function defaultDividePath(n){return split(n.path,n.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(n,r,a){var s=[];function o(ih){for(var oh=0;oh<ih.length;oh++){var uh=ih[oh];isCombineMorphing(uh)?o(uh.childrenRef()):uh instanceof Path&&s.push(uh)}}o(n);var u=s.length;if(!u)return createEmptyReturn();var c=a.dividePath||defaultDividePath,p=c({path:r,count:u});if(p.length!==u)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();s=sortPaths(s),p=sortPaths(p);for(var d=a.done,_=a.during,ja=a.individualDelay,Ja=new Transformable,ec=0;ec<u;ec++){var tc=s[ec],rc=p[ec];rc.parent=r,rc.copyTransform(Ja),ja||prepareMorphPath(tc,rc)}r.__isCombineMorphing=!0,r.childrenRef=function(){return p};function nc(ih){for(var oh=0;oh<p.length;oh++)p[oh].addSelfToZr(ih)}saveAndModifyMethod(r,"addSelfToZr",{after:function(ih){nc(ih)}}),saveAndModifyMethod(r,"removeSelfFromZr",{after:function(ih){for(var oh=0;oh<p.length;oh++)p[oh].removeSelfFromZr(ih)}});function ic(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,restoreMethod(r,"addSelfToZr"),restoreMethod(r,"removeSelfFromZr")}var uc=p.length;if(ja)for(var eh=uc,rh=function(){eh--,eh===0&&(ic(),d&&d())},ec=0;ec<uc;ec++){var ah=ja?defaults({delay:(a.delay||0)+ja(ec,uc,s[ec],p[ec]),done:rh},a):a;morphPath(s[ec],p[ec],ah)}else r.__morphT=0,r.animateTo({__morphT:1},defaults({during:function(ih){for(var oh=0;oh<uc;oh++){var uh=p[oh];uh.__morphT=r.__morphT,uh.dirtyShape()}_&&_(ih)},done:function(){ic();for(var ih=0;ih<n.length;ih++)restoreMethod(n[ih],"updateTransform");d&&d()}},a));return r.__zr&&nc(r.__zr),{fromIndividuals:s,toIndividuals:p,count:uc}}function separateMorph(n,r,a){var s=r.length,o=[],u=a.dividePath||defaultDividePath;function c(tc){for(var rc=0;rc<tc.length;rc++){var nc=tc[rc];isCombineMorphing(nc)?c(nc.childrenRef()):nc instanceof Path&&o.push(nc)}}if(isCombineMorphing(n)){c(n.childrenRef());var p=o.length;if(p<s)for(var d=0,_=p;_<s;_++)o.push(clonePath(o[d++%p]));o.length=s}else{o=u({path:n,count:s});for(var ja=n.getComputedTransform(),_=0;_<o.length;_++)o[_].setLocalTransform(ja);if(o.length!==s)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}o=sortPaths(o),r=sortPaths(r);for(var Ja=a.individualDelay,_=0;_<s;_++){var ec=Ja?defaults({delay:(a.delay||0)+Ja(_,s,o[_],r[_])},a):a;morphPath(o[_],r[_],ec)}return{fromIndividuals:o,toIndividuals:r,count:r.length}}function isMultiple(n){return isArray$1(n[0])}function prepareMorphBatches(n,r){for(var a=[],s=n.length,o=0;o<s;o++)a.push({one:n[o],many:[]});for(var o=0;o<r.length;o++){var u=r[o].length,c=void 0;for(c=0;c<u;c++)a[c%s].many.push(r[o][c])}for(var p=0,o=s-1;o>=0;o--)if(!a[o].many.length){var d=a[p].many;if(d.length<=1)if(p)p=0;else return a;var u=d.length,_=Math.ceil(u/2);a[o].many=d.slice(_,u),a[p].many=d.slice(0,_),p++}return a}var pathDividers={clone:function(n){for(var r=[],a=1-Math.pow(1-n.path.style.opacity,1/n.count),s=0;s<n.count;s++){var o=clonePath(n.path);o.setStyle("opacity",a),r.push(o)}return r},split:null};function applyMorphAnimation(n,r,a,s,o,u){if(!n.length||!r.length)return;var c=getAnimationConfig("update",s,o);if(!(c&&c.duration>0))return;var p=s.getModel("universalTransition").get("delay"),d=Object.assign({setToFinal:!0},c),_,ja;isMultiple(n)&&(_=n,ja=r),isMultiple(r)&&(_=r,ja=n);function Ja(uc,eh,rh,ah,ih){var oh=uc.many,uh=uc.one;if(oh.length===1&&!ih){var ch=eh?oh[0]:uh,hh=eh?uh:oh[0];if(isCombineMorphing(ch))Ja({many:[ch],one:hh},!0,rh,ah,!0);else{var dh=p?defaults({delay:p(rh,ah)},d):d;morphPath(ch,hh,dh),u(ch,hh,ch,hh,dh)}}else for(var gh=defaults({dividePath:pathDividers[a],individualDelay:p&&function(_h,bh,Dh,Th){return p(_h+rh,ah)}},d),fh=eh?combineMorph(oh,uh,gh):separateMorph(uh,oh,gh),vh=fh.fromIndividuals,ph=fh.toIndividuals,yh=vh.length,xh=0;xh<yh;xh++){var dh=p?defaults({delay:p(xh,yh)},d):d;u(vh[xh],ph[xh],eh?oh[xh]:uc.one,eh?uc.one:oh[xh],dh)}}for(var ec=_?_===n:n.length>r.length,tc=_?prepareMorphBatches(ja,_):prepareMorphBatches(ec?r:n,[ec?n:r]),rc=0,nc=0;nc<tc.length;nc++)rc+=tc[nc].many.length;for(var ic=0,nc=0;nc<tc.length;nc++)Ja(tc[nc],ec,ic,rc),ic+=tc[nc].many.length}function getPathList(n){if(!n)return[];if(isArray$1(n)){for(var r=[],a=0;a<n.length;a++)r.push(getPathList(n[a]));return r}var s=[];return n.traverse(function(o){o instanceof Path&&!o.disableMorphing&&!o.invisible&&!o.ignore&&s.push(o)}),s}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(n,r){for(var a=n.dimensions,s=0;s<a.length;s++){var o=n.getDimensionInfo(a[s]);if(o&&o.otherDims[r]===0)return a[s]}}function getValueByDimension(n,r,a){var s=n.getDimensionInfo(a),o=s&&s.ordinalMeta;if(s){var u=n.get(s.name,r);return o&&o.categories[u]||u+""}}function getGroupId(n,r,a,s){var o=s?"itemChildGroupId":"itemGroupId",u=getDimension(n,o);if(u){var c=getValueByDimension(n,r,u);return c}var p=n.getRawDataItem(r),d=s?"childGroupId":"groupId";if(p&&p[d])return p[d]+"";if(!s)return a||n.getId(r)}function flattenDataDiffItems(n){var r=[];return each$f(n,function(a){var s=a.data,o=a.dataGroupId;if(!(s.count()>DATA_COUNT_THRESHOLD))for(var u=s.getIndices(),c=0;c<u.length;c++)r.push({data:s,groupId:getGroupId(s,c,o,!1),childGroupId:getGroupId(s,c,o,!0),divide:a.divide,dataIndex:c})}),r}function fadeInElement(n,r,a){n.traverse(function(s){s instanceof Path&&initProps(s,{style:{opacity:0}},r,{dataIndex:a,isFrom:!0})})}function removeEl(n){if(n.parent){var r=n.getComputedTransform();n.setLocalTransform(r),n.parent.remove(n)}}function stopAnimation(n){n.stopAnimation(),n.isGroup&&n.traverse(function(r){r.stopAnimation()})}function animateElementStyles(n,r,a){var s=getAnimationConfig("update",a,r);s&&n.traverse(function(o){if(o instanceof Displayable$1){var u=getOldStyle(o);u&&o.animateFrom({style:u},s)}})}function isAllIdSame(n,r){var a=n.length;if(a!==r.length)return!1;for(var s=0;s<a;s++){var o=n[s],u=r[s];if(o.data.getId(o.dataIndex)!==u.data.getId(u.dataIndex))return!1}return!0}function transitionBetween(n,r,a){var s=flattenDataDiffItems(n),o=flattenDataDiffItems(r);function u(rh,ah,ih,oh,uh){(ih||rh)&&ah.animateFrom({style:ih&&ih!==rh?extend$2(extend$2({},ih.style),rh.style):rh.style},uh)}var c=!1,p=TRANSITION_NONE,d=createHashMap(),_=createHashMap();s.forEach(function(rh){rh.groupId&&d.set(rh.groupId,!0),rh.childGroupId&&_.set(rh.childGroupId,!0)});for(var ja=0;ja<o.length;ja++){var Ja=o[ja].groupId;if(_.get(Ja)){p=TRANSITION_P2C;break}var ec=o[ja].childGroupId;if(ec&&d.get(ec)){p=TRANSITION_C2P;break}}function tc(rh,ah){return function(ih){var oh=ih.data,uh=ih.dataIndex;return ah?oh.getId(uh):rh?p===TRANSITION_P2C?ih.childGroupId:ih.groupId:p===TRANSITION_C2P?ih.childGroupId:ih.groupId}}var rc=isAllIdSame(s,o),nc={};if(!rc)for(var ja=0;ja<o.length;ja++){var ic=o[ja],uc=ic.data.getItemGraphicEl(ic.dataIndex);uc&&(nc[uc.id]=!0)}function eh(rh,ah){var ih=s[ah],oh=o[rh],uh=oh.data.hostModel,ch=ih.data.getItemGraphicEl(ih.dataIndex),hh=oh.data.getItemGraphicEl(oh.dataIndex);if(ch===hh){hh&&animateElementStyles(hh,oh.dataIndex,uh);return}ch&&nc[ch.id]||hh&&(stopAnimation(hh),ch?(stopAnimation(ch),removeEl(ch),c=!0,applyMorphAnimation(getPathList(ch),getPathList(hh),oh.divide,uh,rh,u)):fadeInElement(hh,uh,rh))}new DataDiffer(s,o,tc(!0,rc),tc(!1,rc),null,"multiple").update(eh).updateManyToOne(function(rh,ah){var ih=o[rh],oh=ih.data,uh=oh.hostModel,ch=oh.getItemGraphicEl(ih.dataIndex),hh=filter(map$1(ah,function(dh){return s[dh].data.getItemGraphicEl(s[dh].dataIndex)}),function(dh){return dh&&dh!==ch&&!nc[dh.id]});ch&&(stopAnimation(ch),hh.length?(each$f(hh,function(dh){stopAnimation(dh),removeEl(dh)}),c=!0,applyMorphAnimation(getPathList(hh),getPathList(ch),ih.divide,uh,rh,u)):fadeInElement(ch,uh,ih.dataIndex))}).updateOneToMany(function(rh,ah){var ih=s[ah],oh=ih.data.getItemGraphicEl(ih.dataIndex);if(!(oh&&nc[oh.id])){var uh=filter(map$1(rh,function(hh){return o[hh].data.getItemGraphicEl(o[hh].dataIndex)}),function(hh){return hh&&hh!==oh}),ch=o[rh[0]].data.hostModel;uh.length&&(each$f(uh,function(hh){return stopAnimation(hh)}),oh?(stopAnimation(oh),removeEl(oh),c=!0,applyMorphAnimation(getPathList(oh),getPathList(uh),ih.divide,ch,rh[0],u)):each$f(uh,function(hh){return fadeInElement(hh,ch,rh[0])}))}}).updateManyToMany(function(rh,ah){new DataDiffer(ah,rh,function(ih){return s[ih].data.getId(s[ih].dataIndex)},function(ih){return o[ih].data.getId(o[ih].dataIndex)}).update(function(ih,oh){eh(rh[ih],ah[oh])}).execute()}).execute(),c&&each$f(r,function(rh){var ah=rh.data,ih=ah.hostModel,oh=ih&&a.getViewOfSeriesModel(ih),uh=getAnimationConfig("update",ih,0);oh&&ih.isAnimationEnabled()&&uh&&uh.duration>0&&oh.group.traverse(function(ch){ch instanceof Path&&!ch.animators.length&&ch.animateFrom({style:{opacity:0}},uh)})})}function getSeriesTransitionKey(n){var r=n.getModel("universalTransition").get("seriesKey");return r||n.id}function convertArraySeriesKeyToString(n){return isArray$1(n)?n.sort().join(","):n}function getDivideShapeFromData(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(n,r){var a=createHashMap(),s=createHashMap(),o=createHashMap();return each$f(n.oldSeries,function(u,c){var p=n.oldDataGroupIds[c],d=n.oldData[c],_=getSeriesTransitionKey(u),ja=convertArraySeriesKeyToString(_);s.set(ja,{dataGroupId:p,data:d}),isArray$1(_)&&each$f(_,function(Ja){o.set(Ja,{key:ja,dataGroupId:p,data:d})})}),each$f(r.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var c=u.get("dataGroupId"),p=u.getData(),d=getSeriesTransitionKey(u),_=convertArraySeriesKeyToString(d),ja=s.get(_);if(ja)a.set(_,{oldSeries:[{dataGroupId:ja.dataGroupId,divide:getDivideShapeFromData(ja.data),data:ja.data}],newSeries:[{dataGroupId:c,divide:getDivideShapeFromData(p),data:p}]});else if(isArray$1(d)){var Ja=[];each$f(d,function(rc){var nc=s.get(rc);nc.data&&Ja.push({dataGroupId:nc.dataGroupId,divide:getDivideShapeFromData(nc.data),data:nc.data})}),Ja.length&&a.set(_,{oldSeries:Ja,newSeries:[{dataGroupId:c,data:p,divide:getDivideShapeFromData(p)}]})}else{var ec=o.get(d);if(ec){var tc=a.get(ec.key);tc||(tc={oldSeries:[{dataGroupId:ec.dataGroupId,data:ec.data,divide:getDivideShapeFromData(ec.data)}],newSeries:[]},a.set(ec.key,tc)),tc.newSeries.push({dataGroupId:c,data:p,divide:getDivideShapeFromData(p)})}}}}),a}function querySeries(n,r){for(var a=0;a<n.length;a++){var s=r.seriesIndex!=null&&r.seriesIndex===n[a].seriesIndex||r.seriesId!=null&&r.seriesId===n[a].id;if(s)return a}}function transitionSeriesFromOpt(n,r,a,s){var o=[],u=[];each$f(normalizeToArray(n.from),function(c){var p=querySeries(r.oldSeries,c);p>=0&&o.push({dataGroupId:r.oldDataGroupIds[p],data:r.oldData[p],divide:getDivideShapeFromData(r.oldData[p]),groupIdDim:c.dimension})}),each$f(normalizeToArray(n.to),function(c){var p=querySeries(a.updatedSeries,c);if(p>=0){var d=a.updatedSeries[p].getData();u.push({dataGroupId:r.oldDataGroupIds[p],data:d,divide:getDivideShapeFromData(d),groupIdDim:c.dimension})}}),o.length>0&&u.length>0&&transitionBetween(o,u,s)}function installUniversalTransition(n){n.registerUpdateLifecycle("series:beforeupdate",function(r,a,s){each$f(normalizeToArray(s.seriesTransition),function(o){each$f(normalizeToArray(o.to),function(u){for(var c=s.updatedSeries,p=0;p<c.length;p++)(u.seriesIndex!=null&&u.seriesIndex===c[p].seriesIndex||u.seriesId!=null&&u.seriesId===c[p].id)&&(c[p][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(r,a,s){var o=getUniversalTransitionGlobalStore(a);if(o.oldSeries&&s.updatedSeries&&s.optionChanged){var u=s.seriesTransition;if(u)each$f(normalizeToArray(u),function(tc){transitionSeriesFromOpt(tc,o,s,a)});else{var c=findTransitionSeriesBatches(o,s);each$f(c.keys(),function(tc){var rc=c.get(tc);transitionBetween(rc.oldSeries,rc.newSeries,a)})}each$f(s.updatedSeries,function(tc){tc[SERIES_UNIVERSAL_TRANSITION_PROP]&&(tc[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var p=r.getSeries(),d=o.oldSeries=[],_=o.oldDataGroupIds=[],ja=o.oldData=[],Ja=0;Ja<p.length;Ja++){var ec=p[Ja].getData();ec.count()<DATA_COUNT_THRESHOLD&&(d.push(p[Ja]),_.push(p[Ja].get("dataGroupId")),ja.push(ec))}})}use([install$15]);use([install$16]);use([install$14,install$13,install$12,install$10,install$_,install$Y,install$X,install$W,install$V,install$U,install$T,install$R,install$Q,install$P,install$O,install$N,install$M,install$L,install$K,install$J,install$I,install$H]);use(install$F);use(install$E);use(install$Z);use(install$D);use(install$S);use(install$C);use(install$B);use(install$z);use(install$y);use(install$G);use(install$x);use(install$w);use(install$v);use(install$u);use(install$t);use(install$s);use(install$p);use(install$m);use(install$o);use(install$n);use(install$j);use(install$l);use(install$k);use(install$i);use(install$h);use(install$g);use(installUniversalTransition);use(installLabelLayout);function cubeRenderItem$1(n,r,a){var ic;const{seriesIndex:s}=n,o=r.currentSeriesIndices(),u=r.barLayout({barGap:"30%",barCategoryGap:"20%",count:o.length}),c=r.coord([r.value(0),r.value(s+1)]),p=c[1],d=c[0]+(((ic=u[s])==null?void 0:ic.offsetCenter)??0),_=r.coord([r.value(0),0])[1],ja=extendShape({buildPath(uc,eh){const{topBasicsYAxis:rh,bottomYAxis:ah,basicsXAxis:ih}=eh,oh=a,uh=a/2-1,ch=[ih-oh,rh+uh],hh=[ih-oh,ah+uh],dh=[ih,ah+uh],gh=[ih,rh+uh];uc.moveTo(ch[0],ch[1]),uc.lineTo(hh[0],hh[1]),uc.lineTo(dh[0],dh[1]),uc.lineTo(gh[0],gh[1])}}),Ja=extendShape({buildPath(uc,eh){const{topBasicsYAxis:rh,bottomYAxis:ah,basicsXAxis:ih}=eh,oh=a/2,uh=a/2-1,ch=[ih,rh+uh],hh=[ih,ah+uh],dh=[ih+oh,ah],gh=[ih+oh,rh];uc.moveTo(ch[0],ch[1]),uc.lineTo(hh[0],hh[1]),uc.lineTo(dh[0],dh[1]),uc.lineTo(gh[0],gh[1])}}),ec=extendShape({buildPath(uc,eh){const{topBasicsYAxis:rh,basicsXAxis:ah}=eh,ih=a,oh=a/2,uh=a/2-1,ch=[ah,rh+uh],hh=[ah+oh,rh],dh=[ah+oh-ih,rh],gh=[ah-ih,rh+uh];uc.moveTo(ch[0],ch[1]),uc.lineTo(hh[0],hh[1]),uc.lineTo(dh[0],dh[1]),uc.lineTo(gh[0],gh[1])}});registerShape("leftShape",ja),registerShape("rightShape",Ja),registerShape("topShape",ec);let tc=r.visual("color"),rc=!1,nc=tc;return(tc==null?void 0:tc.type)=="linear"&&(rc=!0,nc=tc.colorStops[1].color,tc=tc.colorStops[0].color),{type:"group",children:[{type:"leftShape",shape:{topBasicsYAxis:p,basicsXAxis:d,bottomYAxis:_},style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:tc},{offset:1,color:rc?nc:tc.replaceAll(/(\d+)(?=%)/g,(uc,eh)=>eh/2)}],global:!1}}},{type:"rightShape",shape:{topBasicsYAxis:p,basicsXAxis:d,bottomYAxis:_},style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:tc.replaceAll(/(\d+)(?=%)/g,(uc,eh)=>eh/1.5)},{offset:1,color:rc?nc:tc.replaceAll(/(\d+)(?=%)/g,(uc,eh)=>eh/2)}],global:!1}}},{type:"topShape",shape:{topBasicsYAxis:p,basicsXAxis:d,bottomYAxis:_},style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:tc},{offset:1,color:tc.replaceAll(/(\d+)(?=%)/g,(uc,eh)=>eh/1.2)}],global:!1}}}]}}function cylinderRenderItem$1(n,r,a){var rc;const{seriesIndex:s}=n,o=r.currentSeriesIndices(),u=r.barLayout({barGap:"30%",barCategoryGap:"20%",count:o.length}),c=r.value(s+1),p=r.coord([r.value(0),c]),d=p[1],_=p[0]+(((rc=u[s])==null?void 0:rc.offsetCenter)??0),ja=r.coord([r.value(0),0])[1];let Ja=r.visual("color"),ec=!1,tc=Ja;return(Ja==null?void 0:Ja.type)=="linear"&&(ec=!0,tc=Ja.colorStops[1].color,Ja=Ja.colorStops[0].color),{type:"group",children:[{type:"circle",shape:{cx:_,cy:ja,r:a/2},scaleY:.5,originX:_,originY:ja,style:{fill:ec?tc:Ja.replaceAll(/(\d+)(?=%)/g,(nc,ic)=>ic/2)}},{type:"rect",shape:{x:_-a/2,y:d,width:a,height:r.size([0,c])[1]},style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:Ja.replaceAll(/(\d+)(?=%)/g,(nc,ic)=>ic/1.5)},{offset:1,color:ec?tc:Ja.replaceAll(/(\d+)(?=%)/g,(nc,ic)=>ic/2)}],global:!1}}},{type:"circle",shape:{cx:_,cy:d,r:a/2},scaleY:.5,originX:_,originY:d,style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:Ja.replaceAll(/(\d+)(?=%)/g,(nc,ic)=>ic/1.5)},{offset:1,color:Ja}],global:!1}}}]}}const _sfc_main$c=defineComponent({__name:"BarChart",props:{pOption:{type:Object,default:()=>({})},data:{type:Array,default:()=>[]},autoAction:{type:Boolean,default:!1}},setup(n){const r=n,a=ref();let s=null;const o=()=>{const{type:tc,color:rc,colorLinear:nc,barWidth:ic,yAxisName:uc,axisLabelColor:eh,legendTextStyleColor:rh,datasetDimensions:ah,datasetSourceProduct:ih,stack:oh}=r.pOption,uh={color:rc??["hsla(210, 100%, 67%, 1)","hsla(30, 100%, 67%, 1)"],title:{show:!1},tooltip:{trigger:"axis",textStyle:{color:"var(--ec-text-color)"},backgroundColor:"var(--ec-background-color)",borderColor:"var(--ec-border-color)",formatter:ch=>ch.reduce((hh,dh)=>{const{data:gh,seriesName:fh,name:vh,color:ph}=dh;return hh+`
              <span style="color: ${ph}">${fh}</span>
              &nbsp;&nbsp;&nbsp;
              <b>${gh[fh]}</b>
              <br />
            `},`<small>${ch[0].name}</small><br/>`)},dataset:{dimensions:["product",...ah],source:r.data.map(ch=>(ch.product=ch[ih],ch))},legend:{textStyle:{color:rh??"#aaa"},itemWidth:20,itemHeight:10,icon:"roundRect"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category"}],yAxis:[{type:"value",name:uc??"",nameTextStyle:{color:eh},splitLine:{lineStyle:{type:"dashed",opacity:.2}}}],axisLabel:{color:eh??"#333"},series:[]};return nc&&(uh.color=rc.map((ch,hh)=>({type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:ch},{offset:1,color:rc[hh+1]??"transparent"}],global:!1}))),uh.series=ah.map(ch=>{let hh={};return tc=="cube"?hh={type:"custom",name:ch,tooltip:{formatter:gh=>{const{data:fh,seriesName:vh,name:ph,color:yh}=gh;return`
              <small style="color: ${yh}">${vh}</small>
              <br/>
              <span>${ph}</span>
              &nbsp;&nbsp;&nbsp;
              <b>${fh[vh]}</b>
            `}},renderItem:(gh,fh)=>cubeRenderItem$1(gh,fh,ic??18)}:tc=="cylinder"?hh={type:"custom",name:ch,renderItem:(gh,fh)=>cylinderRenderItem$1(gh,fh,ic??18)}:hh={type:"bar",name:ch,barWidth:ic,stack:oh?"total":"",encode:{x:"product",y:ch}},hh}),uh};watch(r,()=>{s&&(s.clear(),s.setOption(o(),{notMerge:!0}))},{deep:!0});let u=-1,c=null,p=1e3,d=ref(!0);const _=function(){if(!d.value||!s)return;let tc=r.data.length;s.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:u});const rc=(u+1)%tc;u=Number.isNaN(rc)?-1:rc,s.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:u}),s.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:u})};watch(()=>r.autoAction,tc=>{c&&clearInterval(c),tc&&(c=setInterval(_,p))},{immediate:!0});const ja=()=>{nextTick(()=>{s=init$1(a.value),s.setOption(o())})};let Ja;const ec=()=>{Ja=new window.ResizeObserver(tc=>s==null?void 0:s.resize()),Ja.observe(a.value)};return onMounted(()=>{ja(),ec()}),onUnmounted(()=>{s.dispose(),s=null,Ja&&Ja.disconnect()}),(tc,rc)=>(openBlock(),createElementBlock("div",{ref_key:"chartDomRef",ref:a,style:{width:"100%",height:"100%"},onMouseover:rc[0]||(rc[0]=nc=>isRef(d)?d.value=!1:d=!1),onMouseout:rc[1]||(rc[1]=nc=>isRef(d)?d.value=!0:d=!0)},null,544))}}),BarChartRaw=`<script setup lang="ts">\r
import { nextTick, onMounted, onUnmounted, ref, watch } from 'vue'\r
import * as echarts from 'echarts'\r
import { cubeRenderItem, cylinderRenderItem } from './barRenderItem.js'\r
\r
const props = defineProps({\r
  pOption: {\r
    type: Object,\r
    default: () => ({})\r
  },\r
  data: {\r
    type: Array,\r
    default: () => []\r
  },\r
  autoAction: {\r
    type: Boolean,\r
    default: false\r
  }\r
})\r
\r
const chartDomRef = ref()\r
let chartInstance = null\r
\r
const generateOption = () => {\r
  const {\r
    type,\r
    color,\r
    colorLinear,\r
    barWidth,\r
    yAxisName,\r
    axisLabelColor,\r
    legendTextStyleColor,\r
    datasetDimensions,\r
    datasetSourceProduct,\r
    stack\r
  } = props.pOption\r
\r
  const opt: any = {\r
    color: color ?? ['hsla(210, 100%, 67%, 1)', 'hsla(30, 100%, 67%, 1)'],\r
    title: {\r
      show: false\r
    },\r
    tooltip: {\r
      trigger: 'axis',\r
      textStyle: {\r
        color: 'var(--ec-text-color)'\r
      },\r
      backgroundColor: 'var(--ec-background-color)',\r
      borderColor: 'var(--ec-border-color)',\r
      formatter: (paramsArr) => {\r
        return paramsArr.reduce((accumulator, currentValue) => {\r
          const { data, seriesName, name, color } = currentValue\r
\r
          return (\r
            accumulator +\r
            \`\r
              <span style="color: \${color}">\${seriesName}</span>\r
              &nbsp;&nbsp;&nbsp;\r
              <b>\${data[seriesName]}</b>\r
              <br />\r
            \`\r
          )\r
        }, \`<small>\${paramsArr[0].name}</small><br/>\`)\r
      }\r
    },\r
    dataset: {\r
      dimensions: ['product', ...datasetDimensions],\r
      source: props.data.map((data: any) => {\r
        data.product = data[datasetSourceProduct]\r
        return data\r
      })\r
    },\r
    legend: {\r
      textStyle: {\r
        color: legendTextStyleColor ?? '#aaa'\r
      },\r
      itemWidth: 20,\r
      itemHeight: 10,\r
      icon: 'roundRect'\r
    },\r
    grid: {\r
      left: '3%',\r
      right: '4%',\r
      bottom: '3%',\r
      containLabel: true\r
    },\r
    xAxis: [\r
      {\r
        type: 'category'\r
      }\r
    ],\r
    yAxis: [\r
      {\r
        type: 'value',\r
        name: yAxisName ?? '',\r
        nameTextStyle: {\r
          color: axisLabelColor\r
        },\r
        splitLine: {\r
          lineStyle: {\r
            type: 'dashed',\r
            opacity: 0.2\r
          }\r
        }\r
      }\r
    ],\r
    axisLabel: {\r
      color: axisLabelColor ?? '#333'\r
    },\r
    series: []\r
  }\r
\r
  if (colorLinear) {\r
    opt.color = color.map((c, i) => ({\r
      type: 'linear',\r
      x: 0,\r
      y: 0,\r
      x2: 0,\r
      y2: 1,\r
      colorStops: [\r
        {\r
          offset: 0,\r
          color: c\r
        },\r
        {\r
          offset: 1,\r
          color: color[i + 1] ?? 'transparent'\r
        }\r
      ],\r
      global: false\r
    }))\r
  }\r
\r
  opt.series = datasetDimensions.map((name) => {\r
    let item = {}\r
    const stackName = 'total'\r
\r
    if (type == 'cube') {\r
      item = {\r
        type: 'custom',\r
        name,\r
        tooltip: {\r
          formatter: (params) => {\r
            const { data, seriesName, name, color } = params\r
\r
            return \`\r
              <small style="color: \${color}">\${seriesName}</small>\r
              <br/>\r
              <span>\${name}</span>\r
              &nbsp;&nbsp;&nbsp;\r
              <b>\${data[seriesName]}</b>\r
            \`\r
          }\r
        },\r
        renderItem: (params, api) => cubeRenderItem(params, api, barWidth ?? 18)\r
      }\r
    } else if (type == 'cylinder') {\r
      item = {\r
        type: 'custom',\r
        name,\r
        renderItem: (params, api) => cylinderRenderItem(params, api, barWidth ?? 18)\r
      }\r
    } else {\r
      item = {\r
        type: 'bar',\r
        name,\r
        barWidth,\r
        stack: stack ? stackName : '',\r
        encode: {\r
          x: 'product',\r
          y: name\r
        }\r
      }\r
    }\r
\r
    return item\r
  })\r
\r
  return opt\r
}\r
\r
watch(\r
  props,\r
  () => {\r
    if (chartInstance) {\r
      chartInstance.clear()\r
      chartInstance.setOption(generateOption(), { notMerge: true })\r
    }\r
  },\r
  { deep: true }\r
)\r
// 轮流选择\r
let currentIndex = -1\r
let intervalAction = null\r
let actionDelay = 1000\r
let actionable = ref(true)\r
\r
const action = function () {\r
  if (!actionable.value || !chartInstance) return\r
\r
  let dataLen = props.data.length\r
\r
  chartInstance.dispatchAction({\r
    type: 'downplay',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
\r
  const index = (currentIndex + 1) % dataLen\r
  currentIndex = Number.isNaN(index) ? -1 : index\r
\r
  chartInstance.dispatchAction({\r
    type: 'highlight',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
  chartInstance.dispatchAction({\r
    type: 'showTip',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
}\r
\r
watch(\r
  () => props.autoAction,\r
  (newVal) => {\r
    if (intervalAction) clearInterval(intervalAction)\r
\r
    if (newVal) intervalAction = setInterval(action, actionDelay)\r
  },\r
  {\r
    immediate: true\r
  }\r
)\r
// 初始化\r
const initChart = () => {\r
  nextTick(() => {\r
    chartInstance = echarts.init(chartDomRef.value)\r
    chartInstance.setOption(generateOption())\r
  })\r
}\r
\r
let resizeObserver\r
const chartResizeObserver = () => {\r
  resizeObserver = new window.ResizeObserver((entries) => chartInstance?.resize())\r
  resizeObserver.observe(chartDomRef.value)\r
}\r
\r
onMounted(() => {\r
  initChart()\r
  chartResizeObserver()\r
})\r
\r
onUnmounted(() => {\r
  chartInstance.dispose()\r
  chartInstance = null\r
  if (resizeObserver) resizeObserver.disconnect()\r
})\r
<\/script>\r
\r
<template>\r
  <div\r
    ref="chartDomRef"\r
    :style="{ width: '100%', height: '100%' }"\r
    @mouseover="actionable = false"\r
    @mouseout="actionable = true"\r
  ></div>\r
</template>\r
\r
<style scoped></style>\r
`,barRenderItemRaw$1=`import * as echarts from 'echarts'\r
\r
export function cubeRenderItem(params, api, barWidth) {\r
  const { seriesIndex } = params\r
  const currentSeriesIndices = api.currentSeriesIndices()\r
  const barLayout = api.barLayout({\r
    barGap: '30%',\r
    barCategoryGap: '20%',\r
    count: currentSeriesIndices.length\r
  })\r
  // 基础坐标\r
  const basicsCoord = api.coord([api.value(0), api.value(seriesIndex + 1)])\r
  // 顶部基础y轴\r
  const topBasicsYAxis = basicsCoord[1]\r
  // 基础x轴 + 偏移\r
  const basicsXAxis = basicsCoord[0] + (barLayout[seriesIndex]?.offsetCenter ?? 0)\r
  // 底部基础y轴\r
  const bottomYAxis = api.coord([api.value(0), 0])[1]\r
\r
  // 绘制柱状体三个面的图形并注册\r
  const leftShape = echarts.graphic.extendShape({\r
    buildPath(ctx, shape) {\r
      const { topBasicsYAxis, bottomYAxis, basicsXAxis } = shape\r
      // 侧面宽度\r
      const WIDTH = barWidth\r
      // 斜角高度\r
      const OBLIQUE_ANGLE_HEIGHT = barWidth / 2 - 1\r
      const p1 = [basicsXAxis - WIDTH, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 左上角坐标\r
      const p2 = [basicsXAxis - WIDTH, bottomYAxis + OBLIQUE_ANGLE_HEIGHT] // 左下角坐标\r
      const p3 = [basicsXAxis, bottomYAxis + OBLIQUE_ANGLE_HEIGHT] // 右下角坐标\r
      const p4 = [basicsXAxis, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 右上角坐标\r
      ctx.moveTo(p1[0], p1[1])\r
      ctx.lineTo(p2[0], p2[1])\r
      ctx.lineTo(p3[0], p3[1])\r
      ctx.lineTo(p4[0], p4[1])\r
    }\r
  })\r
  const rightShape = echarts.graphic.extendShape({\r
    buildPath(ctx, shape) {\r
      const { topBasicsYAxis, bottomYAxis, basicsXAxis } = shape\r
      // 侧面宽度\r
      const WIDTH = barWidth / 2\r
      // 斜角高度\r
      const OBLIQUE_ANGLE_HEIGHT = barWidth / 2 - 1\r
      const p1 = [basicsXAxis, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 左上角坐标\r
      const p2 = [basicsXAxis, bottomYAxis + OBLIQUE_ANGLE_HEIGHT] // 左下角坐标\r
      const p3 = [basicsXAxis + WIDTH, bottomYAxis] // 右下角坐标\r
      const p4 = [basicsXAxis + WIDTH, topBasicsYAxis] // 右上角坐标\r
      ctx.moveTo(p1[0], p1[1])\r
      ctx.lineTo(p2[0], p2[1])\r
      ctx.lineTo(p3[0], p3[1])\r
      ctx.lineTo(p4[0], p4[1])\r
    }\r
  })\r
  const topShape = echarts.graphic.extendShape({\r
    buildPath(ctx, shape) {\r
      const { topBasicsYAxis, basicsXAxis } = shape\r
      // 侧面宽度\r
      const LEFT_WIDTH = barWidth\r
      const RIGHT_WIDTH = barWidth / 2\r
      // 斜角高度\r
      const OBLIQUE_ANGLE_HEIGHT = barWidth / 2 - 1\r
      const p1 = [basicsXAxis, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 右下角坐标\r
      const p2 = [basicsXAxis + RIGHT_WIDTH, topBasicsYAxis] // 右上角坐标\r
      const p3 = [basicsXAxis + RIGHT_WIDTH - LEFT_WIDTH, topBasicsYAxis] // 左上角坐标\r
      const p4 = [basicsXAxis - LEFT_WIDTH, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 左下角坐标\r
      ctx.moveTo(p1[0], p1[1])\r
      ctx.lineTo(p2[0], p2[1])\r
      ctx.lineTo(p3[0], p3[1])\r
      ctx.lineTo(p4[0], p4[1])\r
    }\r
  })\r
  echarts.graphic.registerShape('leftShape', leftShape)\r
  echarts.graphic.registerShape('rightShape', rightShape)\r
  echarts.graphic.registerShape('topShape', topShape)\r
\r
  let color = api.visual('color')\r
  let colorLinear = false\r
  let colorEnd = color\r
\r
  if (color?.type == 'linear') {\r
    colorLinear = true\r
    colorEnd = color.colorStops[1].color\r
    color = color.colorStops[0].color\r
  }\r
\r
  return {\r
    type: 'group',\r
    children: [\r
      {\r
        type: 'leftShape',\r
        shape: {\r
          topBasicsYAxis,\r
          basicsXAxis,\r
          bottomYAxis\r
        },\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color\r
              },\r
              {\r
                offset: 1,\r
                color: colorLinear ? colorEnd : color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 2)\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      },\r
      {\r
        type: 'rightShape',\r
        shape: {\r
          topBasicsYAxis,\r
          basicsXAxis,\r
          bottomYAxis\r
        },\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 1.5)\r
              },\r
              {\r
                offset: 1,\r
                color: colorLinear ? colorEnd : color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 2)\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      },\r
      {\r
        type: 'topShape',\r
        shape: {\r
          topBasicsYAxis,\r
          basicsXAxis,\r
          bottomYAxis\r
        },\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color\r
              },\r
              {\r
                offset: 1,\r
                color: color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 1.2)\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      }\r
    ]\r
  }\r
}\r
\r
export function cylinderRenderItem(params, api, barWidth) {\r
  const { seriesIndex } = params\r
  const currentSeriesIndices = api.currentSeriesIndices()\r
  const barLayout = api.barLayout({\r
    barGap: '30%',\r
    barCategoryGap: '20%',\r
    count: currentSeriesIndices.length\r
  })\r
  const yValue = api.value(seriesIndex + 1)\r
  // 基础坐标\r
  const basicsCoord = api.coord([api.value(0), yValue])\r
  // 顶部基础y轴\r
  const topBasicsYAxis = basicsCoord[1]\r
  // 基础x轴 + 偏移\r
  const basicsXAxis = basicsCoord[0] + (barLayout[seriesIndex]?.offsetCenter ?? 0)\r
  // 底部基础y轴\r
  const bottomYAxis = api.coord([api.value(0), 0])[1]\r
\r
  let color = api.visual('color')\r
  let colorLinear = false\r
  let colorEnd = color\r
\r
  if (color?.type == 'linear') {\r
    colorLinear = true\r
    colorEnd = color.colorStops[1].color\r
    color = color.colorStops[0].color\r
  }\r
\r
  return {\r
    type: 'group',\r
    children: [\r
      {\r
        type: 'circle',\r
        shape: {\r
          cx: basicsXAxis,\r
          cy: bottomYAxis,\r
          r: barWidth / 2\r
        },\r
        scaleY: 0.5,\r
        originX: basicsXAxis,\r
        originY: bottomYAxis,\r
        style: {\r
          fill: colorLinear ? colorEnd : color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 2)\r
        }\r
      },\r
      {\r
        type: 'rect',\r
        shape: {\r
          x: basicsXAxis - barWidth / 2,\r
          y: topBasicsYAxis,\r
          width: barWidth,\r
          height: api.size([0, yValue])[1]\r
        },\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 1.5)\r
              },\r
              {\r
                offset: 1,\r
                color: colorLinear ? colorEnd : color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 2)\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      },\r
      {\r
        type: 'circle',\r
        shape: {\r
          cx: basicsXAxis,\r
          cy: topBasicsYAxis,\r
          r: barWidth / 2\r
        },\r
        scaleY: 0.5,\r
        originX: basicsXAxis,\r
        originY: topBasicsYAxis,\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 1.5)\r
              },\r
              {\r
                offset: 1,\r
                color: color\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      }\r
    ]\r
  }\r
}\r
`,config={baseUrl:"",token:""};async function request$1({url:n,method:r,header:a,data:s}){const o={method:r.toUpperCase()??"GET",headers:{},mode:"cors",credentials:"same-origin"},u=/^http/;a?o.headers=a:s instanceof FormData?o.body=s:(o.headers={"Content-Type":"application/json"},o.body=JSON.stringify(s)),o.headers.Authorization=`Bearer ${config.token}`;function c(_,ja){return console.error(ja)}let p;try{p=await fetch(u.test(n)?n:config.baseUrl+n,o)}catch(_){return c(0,_.message),_}const d=p.headers.get("Content-Type");if(p.ok)return d!=null&&d.includes("application/json")?await p.json():d!=null&&d.includes("text/html")?p.text():p.blob();if(d!=null&&d.includes("application/json")){const _=await p.json();return c(_.code,_.message),_}return c(p.status,p.statusText),p}const requestRaw=`import { ElMessage } from 'element-plus'\r
\r
export const config = {\r
  baseUrl: '',\r
  token: ''\r
}\r
\r
export default async function request({ url, method, header, data }) {\r
  const options = {\r
    method: method.toUpperCase() ?? 'GET',\r
    headers: {},\r
    mode: 'cors',\r
    credentials: 'same-origin'\r
  }\r
  const re = /^http/\r
\r
  if (header) {\r
    options.headers = header\r
  } else {\r
    if (data instanceof FormData) {\r
      options.body = data\r
    } else {\r
      options.headers = {\r
        'Content-Type': 'application/json'\r
        // 'Content-Type': 'application/x-www-form-urlencoded',\r
      }\r
      options.body = JSON.stringify(data)\r
    }\r
  }\r
\r
  options.headers['Authorization'] = \`Bearer \${config.token}\`\r
\r
  function checkError(code, message) {\r
    return console.error(message)\r
  }\r
\r
  let response\r
  try {\r
    response = await fetch(re.test(url) ? url : config.baseUrl + url, options)\r
  } catch (error) {\r
    checkError(0, error.message)\r
\r
    return error\r
  }\r
\r
  const contentType = response.headers.get('Content-Type')\r
\r
  if (response.ok) {\r
    if (contentType?.includes('application/json')) {\r
      const res = await response.json()\r
      return res\r
    } else if (contentType?.includes('text/html')) return response.text()\r
    else return response.blob()\r
  } else {\r
    if (contentType?.includes('application/json')) {\r
      const res = await response.json()\r
      checkError(res.code, res.message)\r
      return res\r
    }\r
\r
    checkError(response.status, response.statusText)\r
    return response\r
  }\r
}\r
`;class Text{lineAt(r){if(r<0||r>this.length)throw new RangeError(`Invalid position ${r} in document of length ${this.length}`);return this.lineInner(r,!1,1,0)}line(r){if(r<1||r>this.lines)throw new RangeError(`Invalid line number ${r} in ${this.lines}-line document`);return this.lineInner(r,!0,1,0)}replace(r,a,s){[r,a]=clip(this,r,a);let o=[];return this.decompose(0,r,o,2),s.length&&s.decompose(0,s.length,o,3),this.decompose(a,this.length,o,1),TextNode.from(o,this.length-(a-r)+s.length)}append(r){return this.replace(this.length,this.length,r)}slice(r,a=this.length){[r,a]=clip(this,r,a);let s=[];return this.decompose(r,a,s,0),TextNode.from(s,a-r)}eq(r){if(r==this)return!0;if(r.length!=this.length||r.lines!=this.lines)return!1;let a=this.scanIdentical(r,1),s=this.length-this.scanIdentical(r,-1),o=new RawTextCursor(this),u=new RawTextCursor(r);for(let c=a,p=a;;){if(o.next(c),u.next(c),c=0,o.lineBreak!=u.lineBreak||o.done!=u.done||o.value!=u.value)return!1;if(p+=o.value.length,o.done||p>=s)return!0}}iter(r=1){return new RawTextCursor(this,r)}iterRange(r,a=this.length){return new PartialTextCursor(this,r,a)}iterLines(r,a){let s;if(r==null)s=this.iter();else{a==null&&(a=this.lines+1);let o=this.line(r).from;s=this.iterRange(o,Math.max(o,a==this.lines+1?this.length:a<=1?0:this.line(a-1).to))}return new LineCursor(s)}toString(){return this.sliceString(0)}toJSON(){let r=[];return this.flatten(r),r}constructor(){}static of(r){if(r.length==0)throw new RangeError("A document must have at least one line");return r.length==1&&!r[0]?Text.empty:r.length<=32?new TextLeaf(r):TextNode.from(TextLeaf.split(r,[]))}}class TextLeaf extends Text{constructor(r,a=textLength(r)){super(),this.text=r,this.length=a}get lines(){return this.text.length}get children(){return null}lineInner(r,a,s,o){for(let u=0;;u++){let c=this.text[u],p=o+c.length;if((a?s:p)>=r)return new Line(o,p,s,c);o=p+1,s++}}decompose(r,a,s,o){let u=r<=0&&a>=this.length?this:new TextLeaf(sliceText(this.text,r,a),Math.min(a,this.length)-Math.max(0,r));if(o&1){let c=s.pop(),p=appendText(u.text,c.text.slice(),0,u.length);if(p.length<=32)s.push(new TextLeaf(p,c.length+u.length));else{let d=p.length>>1;s.push(new TextLeaf(p.slice(0,d)),new TextLeaf(p.slice(d)))}}else s.push(u)}replace(r,a,s){if(!(s instanceof TextLeaf))return super.replace(r,a,s);[r,a]=clip(this,r,a);let o=appendText(this.text,appendText(s.text,sliceText(this.text,0,r)),a),u=this.length+s.length-(a-r);return o.length<=32?new TextLeaf(o,u):TextNode.from(TextLeaf.split(o,[]),u)}sliceString(r,a=this.length,s=`
`){[r,a]=clip(this,r,a);let o="";for(let u=0,c=0;u<=a&&c<this.text.length;c++){let p=this.text[c],d=u+p.length;u>r&&c&&(o+=s),r<d&&a>u&&(o+=p.slice(Math.max(0,r-u),a-u)),u=d+1}return o}flatten(r){for(let a of this.text)r.push(a)}scanIdentical(){return 0}static split(r,a){let s=[],o=-1;for(let u of r)s.push(u),o+=u.length+1,s.length==32&&(a.push(new TextLeaf(s,o)),s=[],o=-1);return o>-1&&a.push(new TextLeaf(s,o)),a}}class TextNode extends Text{constructor(r,a){super(),this.children=r,this.length=a,this.lines=0;for(let s of r)this.lines+=s.lines}lineInner(r,a,s,o){for(let u=0;;u++){let c=this.children[u],p=o+c.length,d=s+c.lines-1;if((a?d:p)>=r)return c.lineInner(r,a,s,o);o=p+1,s=d+1}}decompose(r,a,s,o){for(let u=0,c=0;c<=a&&u<this.children.length;u++){let p=this.children[u],d=c+p.length;if(r<=d&&a>=c){let _=o&((c<=r?1:0)|(d>=a?2:0));c>=r&&d<=a&&!_?s.push(p):p.decompose(r-c,a-c,s,_)}c=d+1}}replace(r,a,s){if([r,a]=clip(this,r,a),s.lines<this.lines)for(let o=0,u=0;o<this.children.length;o++){let c=this.children[o],p=u+c.length;if(r>=u&&a<=p){let d=c.replace(r-u,a-u,s),_=this.lines-c.lines+d.lines;if(d.lines<_>>4&&d.lines>_>>6){let ja=this.children.slice();return ja[o]=d,new TextNode(ja,this.length-(a-r)+s.length)}return super.replace(u,p,d)}u=p+1}return super.replace(r,a,s)}sliceString(r,a=this.length,s=`
`){[r,a]=clip(this,r,a);let o="";for(let u=0,c=0;u<this.children.length&&c<=a;u++){let p=this.children[u],d=c+p.length;c>r&&u&&(o+=s),r<d&&a>c&&(o+=p.sliceString(r-c,a-c,s)),c=d+1}return o}flatten(r){for(let a of this.children)a.flatten(r)}scanIdentical(r,a){if(!(r instanceof TextNode))return 0;let s=0,[o,u,c,p]=a>0?[0,0,this.children.length,r.children.length]:[this.children.length-1,r.children.length-1,-1,-1];for(;;o+=a,u+=a){if(o==c||u==p)return s;let d=this.children[o],_=r.children[u];if(d!=_)return s+d.scanIdentical(_,a);s+=d.length+1}}static from(r,a=r.reduce((s,o)=>s+o.length+1,-1)){let s=0;for(let tc of r)s+=tc.lines;if(s<32){let tc=[];for(let rc of r)rc.flatten(tc);return new TextLeaf(tc,a)}let o=Math.max(32,s>>5),u=o<<1,c=o>>1,p=[],d=0,_=-1,ja=[];function Ja(tc){let rc;if(tc.lines>u&&tc instanceof TextNode)for(let nc of tc.children)Ja(nc);else tc.lines>c&&(d>c||!d)?(ec(),p.push(tc)):tc instanceof TextLeaf&&d&&(rc=ja[ja.length-1])instanceof TextLeaf&&tc.lines+rc.lines<=32?(d+=tc.lines,_+=tc.length+1,ja[ja.length-1]=new TextLeaf(rc.text.concat(tc.text),rc.length+1+tc.length)):(d+tc.lines>o&&ec(),d+=tc.lines,_+=tc.length+1,ja.push(tc))}function ec(){d!=0&&(p.push(ja.length==1?ja[0]:TextNode.from(ja,_)),_=-1,d=ja.length=0)}for(let tc of r)Ja(tc);return ec(),p.length==1?p[0]:new TextNode(p,a)}}Text.empty=new TextLeaf([""],0);function textLength(n){let r=-1;for(let a of n)r+=a.length+1;return r}function appendText(n,r,a=0,s=1e9){for(let o=0,u=0,c=!0;u<n.length&&o<=s;u++){let p=n[u],d=o+p.length;d>=a&&(d>s&&(p=p.slice(0,s-o)),o<a&&(p=p.slice(a-o)),c?(r[r.length-1]+=p,c=!1):r.push(p)),o=d+1}return r}function sliceText(n,r,a){return appendText(n,[""],r,a)}class RawTextCursor{constructor(r,a=1){this.dir=a,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[r],this.offsets=[a>0?1:(r instanceof TextLeaf?r.text.length:r.children.length)<<1]}nextInner(r,a){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,o=this.nodes[s],u=this.offsets[s],c=u>>1,p=o instanceof TextLeaf?o.text.length:o.children.length;if(c==(a>0?p:0)){if(s==0)return this.done=!0,this.value="",this;a>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((u&1)==(a>0?0:1)){if(this.offsets[s]+=a,r==0)return this.lineBreak=!0,this.value=`
`,this;r--}else if(o instanceof TextLeaf){let d=o.text[c+(a<0?-1:0)];if(this.offsets[s]+=a,d.length>Math.max(0,r))return this.value=r==0?d:a>0?d.slice(r):d.slice(0,d.length-r),this;r-=d.length}else{let d=o.children[c+(a<0?-1:0)];r>d.length?(r-=d.length,this.offsets[s]+=a):(a<0&&this.offsets[s]--,this.nodes.push(d),this.offsets.push(a>0?1:(d instanceof TextLeaf?d.text.length:d.children.length)<<1))}}}next(r=0){return r<0&&(this.nextInner(-r,-this.dir),r=this.value.length),this.nextInner(r,this.dir)}}class PartialTextCursor{constructor(r,a,s){this.value="",this.done=!1,this.cursor=new RawTextCursor(r,a>s?-1:1),this.pos=a>s?r.length:0,this.from=Math.min(a,s),this.to=Math.max(a,s)}nextInner(r,a){if(a<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;r+=Math.max(0,a<0?this.pos-this.to:this.from-this.pos);let s=a<0?this.pos-this.from:this.to-this.pos;r>s&&(r=s),s-=r;let{value:o}=this.cursor.next(r);return this.pos+=(o.length+r)*a,this.value=o.length<=s?o:a<0?o.slice(o.length-s):o.slice(0,s),this.done=!this.value,this}next(r=0){return r<0?r=Math.max(r,this.from-this.pos):r>0&&(r=Math.min(r,this.to-this.pos)),this.nextInner(r,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(r){this.inner=r,this.afterBreak=!0,this.value="",this.done=!1}next(r=0){let{done:a,lineBreak:s,value:o}=this.inner.next(r);return a&&this.afterBreak?(this.value="",this.afterBreak=!1):a?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(r,a,s,o){this.from=r,this.to=a,this.number=s,this.text=o}get length(){return this.to-this.from}}function clip(n,r,a){return r=Math.max(0,Math.min(n.length,r)),[r,Math.max(r,Math.min(n.length,a))]}let extend$1="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<extend$1.length;n++)extend$1[n]+=extend$1[n-1];function isExtendingChar(n){for(let r=1;r<extend$1.length;r+=2)if(extend$1[r]>n)return extend$1[r-1]<=n;return!1}function isRegionalIndicator(n){return n>=127462&&n<=127487}const ZWJ=8205;function findClusterBreak(n,r,a=!0,s=!0){return(a?nextClusterBreak:prevClusterBreak)(n,r,s)}function nextClusterBreak(n,r,a){if(r==n.length)return r;r&&surrogateLow(n.charCodeAt(r))&&surrogateHigh(n.charCodeAt(r-1))&&r--;let s=codePointAt(n,r);for(r+=codePointSize(s);r<n.length;){let o=codePointAt(n,r);if(s==ZWJ||o==ZWJ||a&&isExtendingChar(o))r+=codePointSize(o),s=o;else if(isRegionalIndicator(o)){let u=0,c=r-2;for(;c>=0&&isRegionalIndicator(codePointAt(n,c));)u++,c-=2;if(u%2==0)break;r+=2}else break}return r}function prevClusterBreak(n,r,a){for(;r>0;){let s=nextClusterBreak(n,r-2,a);if(s<r)return s;r--}return 0}function surrogateLow(n){return n>=56320&&n<57344}function surrogateHigh(n){return n>=55296&&n<56320}function codePointAt(n,r){let a=n.charCodeAt(r);if(!surrogateHigh(a)||r+1==n.length)return a;let s=n.charCodeAt(r+1);return surrogateLow(s)?(a-55296<<10)+(s-56320)+65536:a}function codePointSize(n){return n<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(MapMode||(MapMode={}));class ChangeDesc{constructor(r){this.sections=r}get length(){let r=0;for(let a=0;a<this.sections.length;a+=2)r+=this.sections[a];return r}get newLength(){let r=0;for(let a=0;a<this.sections.length;a+=2){let s=this.sections[a+1];r+=s<0?this.sections[a]:s}return r}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(r){for(let a=0,s=0,o=0;a<this.sections.length;){let u=this.sections[a++],c=this.sections[a++];c<0?(r(s,o,u),o+=u):o+=c,s+=u}}iterChangedRanges(r,a=!1){iterChanges(this,r,a)}get invertedDesc(){let r=[];for(let a=0;a<this.sections.length;){let s=this.sections[a++],o=this.sections[a++];o<0?r.push(s,o):r.push(o,s)}return new ChangeDesc(r)}composeDesc(r){return this.empty?r:r.empty?this:composeSets(this,r)}mapDesc(r,a=!1){return r.empty?this:mapSet(this,r,a)}mapPos(r,a=-1,s=MapMode.Simple){let o=0,u=0;for(let c=0;c<this.sections.length;){let p=this.sections[c++],d=this.sections[c++],_=o+p;if(d<0){if(_>r)return u+(r-o);u+=p}else{if(s!=MapMode.Simple&&_>=r&&(s==MapMode.TrackDel&&o<r&&_>r||s==MapMode.TrackBefore&&o<r||s==MapMode.TrackAfter&&_>r))return null;if(_>r||_==r&&a<0&&!p)return r==o||a<0?u:u+d;u+=d}o=_}if(r>o)throw new RangeError(`Position ${r} is out of range for changeset of length ${o}`);return u}touchesRange(r,a=r){for(let s=0,o=0;s<this.sections.length&&o<=a;){let u=this.sections[s++],c=this.sections[s++],p=o+u;if(c>=0&&o<=a&&p>=r)return o<r&&p>a?"cover":!0;o=p}return!1}toString(){let r="";for(let a=0;a<this.sections.length;){let s=this.sections[a++],o=this.sections[a++];r+=(r?" ":"")+s+(o>=0?":"+o:"")}return r}toJSON(){return this.sections}static fromJSON(r){if(!Array.isArray(r)||r.length%2||r.some(a=>typeof a!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(r)}static create(r){return new ChangeDesc(r)}}class ChangeSet extends ChangeDesc{constructor(r,a){super(r),this.inserted=a}apply(r){if(this.length!=r.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(a,s,o,u,c)=>r=r.replace(o,o+(s-a),c),!1),r}mapDesc(r,a=!1){return mapSet(this,r,a,!0)}invert(r){let a=this.sections.slice(),s=[];for(let o=0,u=0;o<a.length;o+=2){let c=a[o],p=a[o+1];if(p>=0){a[o]=p,a[o+1]=c;let d=o>>1;for(;s.length<d;)s.push(Text.empty);s.push(c?r.slice(u,u+c):Text.empty)}u+=c}return new ChangeSet(a,s)}compose(r){return this.empty?r:r.empty?this:composeSets(this,r,!0)}map(r,a=!1){return r.empty?this:mapSet(this,r,a,!0)}iterChanges(r,a=!1){iterChanges(this,r,a)}get desc(){return ChangeDesc.create(this.sections)}filter(r){let a=[],s=[],o=[],u=new SectionIter(this);e:for(let c=0,p=0;;){let d=c==r.length?1e9:r[c++];for(;p<d||p==d&&u.len==0;){if(u.done)break e;let ja=Math.min(u.len,d-p);addSection(o,ja,-1);let Ja=u.ins==-1?-1:u.off==0?u.ins:0;addSection(a,ja,Ja),Ja>0&&addInsert(s,a,u.text),u.forward(ja),p+=ja}let _=r[c++];for(;p<_;){if(u.done)break e;let ja=Math.min(u.len,_-p);addSection(a,ja,-1),addSection(o,ja,u.ins==-1?-1:u.off==0?u.ins:0),u.forward(ja),p+=ja}}return{changes:new ChangeSet(a,s),filtered:ChangeDesc.create(o)}}toJSON(){let r=[];for(let a=0;a<this.sections.length;a+=2){let s=this.sections[a],o=this.sections[a+1];o<0?r.push(s):o==0?r.push([s]):r.push([s].concat(this.inserted[a>>1].toJSON()))}return r}static of(r,a,s){let o=[],u=[],c=0,p=null;function d(ja=!1){if(!ja&&!o.length)return;c<a&&addSection(o,a-c,-1);let Ja=new ChangeSet(o,u);p=p?p.compose(Ja.map(p)):Ja,o=[],u=[],c=0}function _(ja){if(Array.isArray(ja))for(let Ja of ja)_(Ja);else if(ja instanceof ChangeSet){if(ja.length!=a)throw new RangeError(`Mismatched change set length (got ${ja.length}, expected ${a})`);d(),p=p?p.compose(ja.map(p)):ja}else{let{from:Ja,to:ec=Ja,insert:tc}=ja;if(Ja>ec||Ja<0||ec>a)throw new RangeError(`Invalid change range ${Ja} to ${ec} (in doc of length ${a})`);let rc=tc?typeof tc=="string"?Text.of(tc.split(s||DefaultSplit)):tc:Text.empty,nc=rc.length;if(Ja==ec&&nc==0)return;Ja<c&&d(),Ja>c&&addSection(o,Ja-c,-1),addSection(o,ec-Ja,nc),addInsert(u,o,rc),c=ec}}return _(r),d(!p),p}static empty(r){return new ChangeSet(r?[r,-1]:[],[])}static fromJSON(r){if(!Array.isArray(r))throw new RangeError("Invalid JSON representation of ChangeSet");let a=[],s=[];for(let o=0;o<r.length;o++){let u=r[o];if(typeof u=="number")a.push(u,-1);else{if(!Array.isArray(u)||typeof u[0]!="number"||u.some((c,p)=>p&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(u.length==1)a.push(u[0],0);else{for(;s.length<o;)s.push(Text.empty);s[o]=Text.of(u.slice(1)),a.push(u[0],s[o].length)}}}return new ChangeSet(a,s)}static createSet(r,a){return new ChangeSet(r,a)}}function addSection(n,r,a,s=!1){if(r==0&&a<=0)return;let o=n.length-2;o>=0&&a<=0&&a==n[o+1]?n[o]+=r:r==0&&n[o]==0?n[o+1]+=a:s?(n[o]+=r,n[o+1]+=a):n.push(r,a)}function addInsert(n,r,a){if(a.length==0)return;let s=r.length-2>>1;if(s<n.length)n[n.length-1]=n[n.length-1].append(a);else{for(;n.length<s;)n.push(Text.empty);n.push(a)}}function iterChanges(n,r,a){let s=n.inserted;for(let o=0,u=0,c=0;c<n.sections.length;){let p=n.sections[c++],d=n.sections[c++];if(d<0)o+=p,u+=p;else{let _=o,ja=u,Ja=Text.empty;for(;_+=p,ja+=d,d&&s&&(Ja=Ja.append(s[c-2>>1])),!(a||c==n.sections.length||n.sections[c+1]<0);)p=n.sections[c++],d=n.sections[c++];r(o,_,u,ja,Ja),o=_,u=ja}}}function mapSet(n,r,a,s=!1){let o=[],u=s?[]:null,c=new SectionIter(n),p=new SectionIter(r);for(let d=-1;;)if(c.ins==-1&&p.ins==-1){let _=Math.min(c.len,p.len);addSection(o,_,-1),c.forward(_),p.forward(_)}else if(p.ins>=0&&(c.ins<0||d==c.i||c.off==0&&(p.len<c.len||p.len==c.len&&!a))){let _=p.len;for(addSection(o,p.ins,-1);_;){let ja=Math.min(c.len,_);c.ins>=0&&d<c.i&&c.len<=ja&&(addSection(o,0,c.ins),u&&addInsert(u,o,c.text),d=c.i),c.forward(ja),_-=ja}p.next()}else if(c.ins>=0){let _=0,ja=c.len;for(;ja;)if(p.ins==-1){let Ja=Math.min(ja,p.len);_+=Ja,ja-=Ja,p.forward(Ja)}else if(p.ins==0&&p.len<ja)ja-=p.len,p.next();else break;addSection(o,_,d<c.i?c.ins:0),u&&d<c.i&&addInsert(u,o,c.text),d=c.i,c.forward(c.len-ja)}else{if(c.done&&p.done)return u?ChangeSet.createSet(o,u):ChangeDesc.create(o);throw new Error("Mismatched change set lengths")}}function composeSets(n,r,a=!1){let s=[],o=a?[]:null,u=new SectionIter(n),c=new SectionIter(r);for(let p=!1;;){if(u.done&&c.done)return o?ChangeSet.createSet(s,o):ChangeDesc.create(s);if(u.ins==0)addSection(s,u.len,0,p),u.next();else if(c.len==0&&!c.done)addSection(s,0,c.ins,p),o&&addInsert(o,s,c.text),c.next();else{if(u.done||c.done)throw new Error("Mismatched change set lengths");{let d=Math.min(u.len2,c.len),_=s.length;if(u.ins==-1){let ja=c.ins==-1?-1:c.off?0:c.ins;addSection(s,d,ja,p),o&&ja&&addInsert(o,s,c.text)}else c.ins==-1?(addSection(s,u.off?0:u.len,d,p),o&&addInsert(o,s,u.textBit(d))):(addSection(s,u.off?0:u.len,c.off?0:c.ins,p),o&&!c.off&&addInsert(o,s,c.text));p=(u.ins>d||c.ins>=0&&c.len>d)&&(p||s.length>_),u.forward2(d),c.forward(d)}}}}class SectionIter{constructor(r){this.set=r,this.i=0,this.next()}next(){let{sections:r}=this.set;this.i<r.length?(this.len=r[this.i++],this.ins=r[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:r}=this.set,a=this.i-2>>1;return a>=r.length?Text.empty:r[a]}textBit(r){let{inserted:a}=this.set,s=this.i-2>>1;return s>=a.length&&!r?Text.empty:a[s].slice(this.off,r==null?void 0:this.off+r)}forward(r){r==this.len?this.next():(this.len-=r,this.off+=r)}forward2(r){this.ins==-1?this.forward(r):r==this.ins?this.next():(this.ins-=r,this.off+=r)}}class SelectionRange{constructor(r,a,s){this.from=r,this.to=a,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let r=this.flags&7;return r==7?null:r}get goalColumn(){let r=this.flags>>6;return r==16777215?void 0:r}map(r,a=-1){let s,o;return this.empty?s=o=r.mapPos(this.from,a):(s=r.mapPos(this.from,1),o=r.mapPos(this.to,-1)),s==this.from&&o==this.to?this:new SelectionRange(s,o,this.flags)}extend(r,a=r){if(r<=this.anchor&&a>=this.anchor)return EditorSelection.range(r,a);let s=Math.abs(r-this.anchor)>Math.abs(a-this.anchor)?r:a;return EditorSelection.range(this.anchor,s)}eq(r,a=!1){return this.anchor==r.anchor&&this.head==r.head&&(!a||!this.empty||this.assoc==r.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(r){if(!r||typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(r.anchor,r.head)}static create(r,a,s){return new SelectionRange(r,a,s)}}class EditorSelection{constructor(r,a){this.ranges=r,this.mainIndex=a}map(r,a=-1){return r.empty?this:EditorSelection.create(this.ranges.map(s=>s.map(r,a)),this.mainIndex)}eq(r,a=!1){if(this.ranges.length!=r.ranges.length||this.mainIndex!=r.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(r.ranges[s],a))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(r,a=!0){return EditorSelection.create([r].concat(this.ranges),a?0:this.mainIndex+1)}replaceRange(r,a=this.mainIndex){let s=this.ranges.slice();return s[a]=r,EditorSelection.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(r=>r.toJSON()),main:this.mainIndex}}static fromJSON(r){if(!r||!Array.isArray(r.ranges)||typeof r.main!="number"||r.main>=r.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(r.ranges.map(a=>SelectionRange.fromJSON(a)),r.main)}static single(r,a=r){return new EditorSelection([EditorSelection.range(r,a)],0)}static create(r,a=0){if(r.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,o=0;o<r.length;o++){let u=r[o];if(u.empty?u.from<=s:u.from<s)return EditorSelection.normalized(r.slice(),a);s=u.to}return new EditorSelection(r,a)}static cursor(r,a=0,s,o){return SelectionRange.create(r,r,(a==0?0:a<0?8:16)|(s==null?7:Math.min(6,s))|(o??16777215)<<6)}static range(r,a,s,o){let u=(s??16777215)<<6|(o==null?7:Math.min(6,o));return a<r?SelectionRange.create(a,r,48|u):SelectionRange.create(r,a,(a>r?8:0)|u)}static normalized(r,a=0){let s=r[a];r.sort((o,u)=>o.from-u.from),a=r.indexOf(s);for(let o=1;o<r.length;o++){let u=r[o],c=r[o-1];if(u.empty?u.from<=c.to:u.from<c.to){let p=c.from,d=Math.max(u.to,c.to);o<=a&&a--,r.splice(--o,2,u.anchor>u.head?EditorSelection.range(d,p):EditorSelection.range(p,d))}}return new EditorSelection(r,a)}}function checkSelection(n,r){for(let a of n.ranges)if(a.to>r)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(r,a,s,o,u){this.combine=r,this.compareInput=a,this.compare=s,this.isStatic=o,this.id=nextID++,this.default=r([]),this.extensions=typeof u=="function"?u(this):u}get reader(){return this}static define(r={}){return new Facet(r.combine||(a=>a),r.compareInput||((a,s)=>a===s),r.compare||(r.combine?(a,s)=>a===s:sameArray$1),!!r.static,r.enables)}of(r){return new FacetProvider([],this,0,r)}compute(r,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(r,this,1,a)}computeN(r,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(r,this,2,a)}from(r,a){return a||(a=s=>s),this.compute([r],s=>a(s.field(r)))}}function sameArray$1(n,r){return n==r||n.length==r.length&&n.every((a,s)=>a===r[s])}class FacetProvider{constructor(r,a,s,o){this.dependencies=r,this.facet=a,this.type=s,this.value=o,this.id=nextID++}dynamicSlot(r){var a;let s=this.value,o=this.facet.compareInput,u=this.id,c=r[u]>>1,p=this.type==2,d=!1,_=!1,ja=[];for(let Ja of this.dependencies)Ja=="doc"?d=!0:Ja=="selection"?_=!0:((a=r[Ja.id])!==null&&a!==void 0?a:1)&1||ja.push(r[Ja.id]);return{create(Ja){return Ja.values[c]=s(Ja),1},update(Ja,ec){if(d&&ec.docChanged||_&&(ec.docChanged||ec.selection)||ensureAll(Ja,ja)){let tc=s(Ja);if(p?!compareArray(tc,Ja.values[c],o):!o(tc,Ja.values[c]))return Ja.values[c]=tc,1}return 0},reconfigure:(Ja,ec)=>{let tc,rc=ec.config.address[u];if(rc!=null){let nc=getAddr(ec,rc);if(this.dependencies.every(ic=>ic instanceof Facet?ec.facet(ic)===Ja.facet(ic):ic instanceof StateField?ec.field(ic,!1)==Ja.field(ic,!1):!0)||(p?compareArray(tc=s(Ja),nc,o):o(tc=s(Ja),nc)))return Ja.values[c]=nc,0}else tc=s(Ja);return Ja.values[c]=tc,1}}}}function compareArray(n,r,a){if(n.length!=r.length)return!1;for(let s=0;s<n.length;s++)if(!a(n[s],r[s]))return!1;return!0}function ensureAll(n,r){let a=!1;for(let s of r)ensureAddr(n,s)&1&&(a=!0);return a}function dynamicFacetSlot(n,r,a){let s=a.map(d=>n[d.id]),o=a.map(d=>d.type),u=s.filter(d=>!(d&1)),c=n[r.id]>>1;function p(d){let _=[];for(let ja=0;ja<s.length;ja++){let Ja=getAddr(d,s[ja]);if(o[ja]==2)for(let ec of Ja)_.push(ec);else _.push(Ja)}return r.combine(_)}return{create(d){for(let _ of s)ensureAddr(d,_);return d.values[c]=p(d),1},update(d,_){if(!ensureAll(d,u))return 0;let ja=p(d);return r.compare(ja,d.values[c])?0:(d.values[c]=ja,1)},reconfigure(d,_){let ja=ensureAll(d,s),Ja=_.config.facets[r.id],ec=_.facet(r);if(Ja&&!ja&&sameArray$1(a,Ja))return d.values[c]=ec,0;let tc=p(d);return r.compare(tc,ec)?(d.values[c]=ec,0):(d.values[c]=tc,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(r,a,s,o,u){this.id=r,this.createF=a,this.updateF=s,this.compareF=o,this.spec=u,this.provides=void 0}static define(r){let a=new StateField(nextID++,r.create,r.update,r.compare||((s,o)=>s===o),r);return r.provide&&(a.provides=r.provide(a)),a}create(r){let a=r.facet(initField).find(s=>s.field==this);return((a==null?void 0:a.create)||this.createF)(r)}slot(r){let a=r[this.id]>>1;return{create:s=>(s.values[a]=this.create(s),1),update:(s,o)=>{let u=s.values[a],c=this.updateF(u,o);return this.compareF(u,c)?0:(s.values[a]=c,1)},reconfigure:(s,o)=>o.config.address[this.id]!=null?(s.values[a]=o.field(this),0):(s.values[a]=this.create(s),1)}}init(r){return[this,initField.of({field:this,create:r})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(n){return r=>new PrecExtension(r,n)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(r,a){this.inner=r,this.prec=a}}class Compartment{of(r){return new CompartmentInstance(this,r)}reconfigure(r){return Compartment.reconfigure.of({compartment:this,extension:r})}get(r){return r.config.compartments.get(this)}}class CompartmentInstance{constructor(r,a){this.compartment=r,this.inner=a}}class Configuration{constructor(r,a,s,o,u,c){for(this.base=r,this.compartments=a,this.dynamicSlots=s,this.address=o,this.staticValues=u,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(r){let a=this.address[r.id];return a==null?r.default:this.staticValues[a>>1]}static resolve(r,a,s){let o=[],u=Object.create(null),c=new Map;for(let ec of flatten(r,a,c))ec instanceof StateField?o.push(ec):(u[ec.facet.id]||(u[ec.facet.id]=[])).push(ec);let p=Object.create(null),d=[],_=[];for(let ec of o)p[ec.id]=_.length<<1,_.push(tc=>ec.slot(tc));let ja=s==null?void 0:s.config.facets;for(let ec in u){let tc=u[ec],rc=tc[0].facet,nc=ja&&ja[ec]||[];if(tc.every(ic=>ic.type==0))if(p[rc.id]=d.length<<1|1,sameArray$1(nc,tc))d.push(s.facet(rc));else{let ic=rc.combine(tc.map(uc=>uc.value));d.push(s&&rc.compare(ic,s.facet(rc))?s.facet(rc):ic)}else{for(let ic of tc)ic.type==0?(p[ic.id]=d.length<<1|1,d.push(ic.value)):(p[ic.id]=_.length<<1,_.push(uc=>ic.dynamicSlot(uc)));p[rc.id]=_.length<<1,_.push(ic=>dynamicFacetSlot(ic,rc,tc))}}let Ja=_.map(ec=>ec(p));return new Configuration(r,c,Ja,p,d,u)}}function flatten(n,r,a){let s=[[],[],[],[],[]],o=new Map;function u(c,p){let d=o.get(c);if(d!=null){if(d<=p)return;let _=s[d].indexOf(c);_>-1&&s[d].splice(_,1),c instanceof CompartmentInstance&&a.delete(c.compartment)}if(o.set(c,p),Array.isArray(c))for(let _ of c)u(_,p);else if(c instanceof CompartmentInstance){if(a.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let _=r.get(c.compartment)||c.inner;a.set(c.compartment,_),u(_,p)}else if(c instanceof PrecExtension)u(c.inner,c.prec);else if(c instanceof StateField)s[p].push(c),c.provides&&u(c.provides,p);else if(c instanceof FacetProvider)s[p].push(c),c.facet.extensions&&u(c.facet.extensions,Prec_.default);else{let _=c.extension;if(!_)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);u(_,p)}}return u(n,Prec_.default),s.reduce((c,p)=>c.concat(p))}function ensureAddr(n,r){if(r&1)return 2;let a=r>>1,s=n.status[a];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;n.status[a]=4;let o=n.computeSlot(n,n.config.dynamicSlots[a]);return n.status[a]=2|o}function getAddr(n,r){return r&1?n.config.staticValues[r>>1]:n.values[r>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:n=>n.some(r=>r),static:!0}),lineSeparator=Facet.define({combine:n=>n.length?n[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:n=>n.length?n[0]:!1});class Annotation{constructor(r,a){this.type=r,this.value=a}static define(){return new AnnotationType}}class AnnotationType{of(r){return new Annotation(this,r)}}class StateEffectType{constructor(r){this.map=r}of(r){return new StateEffect(this,r)}}class StateEffect{constructor(r,a){this.type=r,this.value=a}map(r){let a=this.type.map(this.value,r);return a===void 0?void 0:a==this.value?this:new StateEffect(this.type,a)}is(r){return this.type==r}static define(r={}){return new StateEffectType(r.map||(a=>a))}static mapEffects(r,a){if(!r.length)return r;let s=[];for(let o of r){let u=o.map(a);u&&s.push(u)}return s}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(r,a,s,o,u,c){this.startState=r,this.changes=a,this.selection=s,this.effects=o,this.annotations=u,this.scrollIntoView=c,this._doc=null,this._state=null,s&&checkSelection(s,a.newLength),u.some(p=>p.type==Transaction.time)||(this.annotations=u.concat(Transaction.time.of(Date.now())))}static create(r,a,s,o,u,c){return new Transaction(r,a,s,o,u,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(r){for(let a of this.annotations)if(a.type==r)return a.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(r){let a=this.annotation(Transaction.userEvent);return!!(a&&(a==r||a.length>r.length&&a.slice(0,r.length)==r&&a[r.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(n,r){let a=[];for(let s=0,o=0;;){let u,c;if(s<n.length&&(o==r.length||r[o]>=n[s]))u=n[s++],c=n[s++];else if(o<r.length)u=r[o++],c=r[o++];else return a;!a.length||a[a.length-1]<u?a.push(u,c):a[a.length-1]<c&&(a[a.length-1]=c)}}function mergeTransaction(n,r,a){var s;let o,u,c;return a?(o=r.changes,u=ChangeSet.empty(r.changes.length),c=n.changes.compose(r.changes)):(o=r.changes.map(n.changes),u=n.changes.mapDesc(r.changes,!0),c=n.changes.compose(o)),{changes:c,selection:r.selection?r.selection.map(u):(s=n.selection)===null||s===void 0?void 0:s.map(o),effects:StateEffect.mapEffects(n.effects,o).concat(StateEffect.mapEffects(r.effects,u)),annotations:n.annotations.length?n.annotations.concat(r.annotations):r.annotations,scrollIntoView:n.scrollIntoView||r.scrollIntoView}}function resolveTransactionInner(n,r,a){let s=r.selection,o=asArray(r.annotations);return r.userEvent&&(o=o.concat(Transaction.userEvent.of(r.userEvent))),{changes:r.changes instanceof ChangeSet?r.changes:ChangeSet.of(r.changes||[],a,n.facet(lineSeparator)),selection:s&&(s instanceof EditorSelection?s:EditorSelection.single(s.anchor,s.head)),effects:asArray(r.effects),annotations:o,scrollIntoView:!!r.scrollIntoView}}function resolveTransaction(n,r,a){let s=resolveTransactionInner(n,r.length?r[0]:{},n.doc.length);r.length&&r[0].filter===!1&&(a=!1);for(let u=1;u<r.length;u++){r[u].filter===!1&&(a=!1);let c=!!r[u].sequential;s=mergeTransaction(s,resolveTransactionInner(n,r[u],c?s.changes.newLength:n.doc.length),c)}let o=Transaction.create(n,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return extendTransaction(a?filterTransaction(o):o)}function filterTransaction(n){let r=n.startState,a=!0;for(let o of r.facet(changeFilter)){let u=o(n);if(u===!1){a=!1;break}Array.isArray(u)&&(a=a===!0?u:joinRanges(a,u))}if(a!==!0){let o,u;if(a===!1)u=n.changes.invertedDesc,o=ChangeSet.empty(r.doc.length);else{let c=n.changes.filter(a);o=c.changes,u=c.filtered.mapDesc(c.changes).invertedDesc}n=Transaction.create(r,o,n.selection&&n.selection.map(u),StateEffect.mapEffects(n.effects,u),n.annotations,n.scrollIntoView)}let s=r.facet(transactionFilter);for(let o=s.length-1;o>=0;o--){let u=s[o](n);u instanceof Transaction?n=u:Array.isArray(u)&&u.length==1&&u[0]instanceof Transaction?n=u[0]:n=resolveTransaction(r,asArray(u),!1)}return n}function extendTransaction(n){let r=n.startState,a=r.facet(transactionExtender),s=n;for(let o=a.length-1;o>=0;o--){let u=a[o](n);u&&Object.keys(u).length&&(s=mergeTransaction(s,resolveTransactionInner(r,u,n.changes.newLength),!0))}return s==n?n:Transaction.create(r,n.changes,n.selection,s.effects,s.annotations,s.scrollIntoView)}const none$1=[];function asArray(n){return n==null?none$1:Array.isArray(n)?n:[n]}var CharCategory=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(n){if(wordChar)return wordChar.test(n);for(let r=0;r<n.length;r++){let a=n[r];if(/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||nonASCIISingleCaseWordChar.test(a)))return!0}return!1}function makeCategorizer(n){return r=>{if(!/\S/.test(r))return CharCategory.Space;if(hasWordChar(r))return CharCategory.Word;for(let a=0;a<n.length;a++)if(r.indexOf(n[a])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(r,a,s,o,u,c){this.config=r,this.doc=a,this.selection=s,this.values=o,this.status=r.statusTemplate.slice(),this.computeSlot=u,c&&(c._state=this);for(let p=0;p<this.config.dynamicSlots.length;p++)ensureAddr(this,p<<1);this.computeSlot=null}field(r,a=!0){let s=this.config.address[r.id];if(s==null){if(a)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,s),getAddr(this,s)}update(...r){return resolveTransaction(this,r,!0)}applyTransaction(r){let a=this.config,{base:s,compartments:o}=a;for(let p of r.effects)p.is(Compartment.reconfigure)?(a&&(o=new Map,a.compartments.forEach((d,_)=>o.set(_,d)),a=null),o.set(p.value.compartment,p.value.extension)):p.is(StateEffect.reconfigure)?(a=null,s=p.value):p.is(StateEffect.appendConfig)&&(a=null,s=asArray(s).concat(p.value));let u;a?u=r.startState.values.slice():(a=Configuration.resolve(s,o,this),u=new EditorState(a,this.doc,this.selection,a.dynamicSlots.map(()=>null),(d,_)=>_.reconfigure(d,this),null).values);let c=r.startState.facet(allowMultipleSelections)?r.newSelection:r.newSelection.asSingle();new EditorState(a,r.newDoc,c,u,(p,d)=>d.update(p,r),r)}replaceSelection(r){return typeof r=="string"&&(r=this.toText(r)),this.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:r},range:EditorSelection.cursor(a.from+r.length)}))}changeByRange(r){let a=this.selection,s=r(a.ranges[0]),o=this.changes(s.changes),u=[s.range],c=asArray(s.effects);for(let p=1;p<a.ranges.length;p++){let d=r(a.ranges[p]),_=this.changes(d.changes),ja=_.map(o);for(let ec=0;ec<p;ec++)u[ec]=u[ec].map(ja);let Ja=o.mapDesc(_,!0);u.push(d.range.map(Ja)),o=o.compose(ja),c=StateEffect.mapEffects(c,ja).concat(StateEffect.mapEffects(asArray(d.effects),Ja))}return{changes:o,selection:EditorSelection.create(u,a.mainIndex),effects:c}}changes(r=[]){return r instanceof ChangeSet?r:ChangeSet.of(r,this.doc.length,this.facet(EditorState.lineSeparator))}toText(r){return Text.of(r.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(r=0,a=this.doc.length){return this.doc.sliceString(r,a,this.lineBreak)}facet(r){let a=this.config.address[r.id];return a==null?r.default:(ensureAddr(this,a),getAddr(this,a))}toJSON(r){let a={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(r)for(let s in r){let o=r[s];o instanceof StateField&&this.config.address[o.id]!=null&&(a[s]=o.spec.toJSON(this.field(r[s]),this))}return a}static fromJSON(r,a={},s){if(!r||typeof r.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(s){for(let u in s)if(Object.prototype.hasOwnProperty.call(r,u)){let c=s[u],p=r[u];o.push(c.init(d=>c.spec.fromJSON(p,d)))}}return EditorState.create({doc:r.doc,selection:EditorSelection.fromJSON(r.selection),extensions:a.extensions?o.concat([a.extensions]):o})}static create(r={}){let a=Configuration.resolve(r.extensions||[],new Map),s=r.doc instanceof Text?r.doc:Text.of((r.doc||"").split(a.staticFacet(EditorState.lineSeparator)||DefaultSplit)),o=r.selection?r.selection instanceof EditorSelection?r.selection:EditorSelection.single(r.selection.anchor,r.selection.head):EditorSelection.single(0);return checkSelection(o,s.length),a.staticFacet(allowMultipleSelections)||(o=o.asSingle()),new EditorState(a,s,o,a.dynamicSlots.map(()=>null),(u,c)=>c.create(u),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(r,...a){for(let s of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(s,r)){r=s[r];break}return a.length&&(r=r.replace(/\$(\$|\d*)/g,(s,o)=>{if(o=="$")return"$";let u=+(o||1);return!u||u>a.length?s:a[u-1]})),r}languageDataAt(r,a,s=-1){let o=[];for(let u of this.facet(languageData))for(let c of u(this,a,s))Object.prototype.hasOwnProperty.call(c,r)&&o.push(c[r]);return o}charCategorizer(r){return makeCategorizer(this.languageDataAt("wordChars",r).join(""))}wordAt(r){let{text:a,from:s,length:o}=this.doc.lineAt(r),u=this.charCategorizer(r),c=r-s,p=r-s;for(;c>0;){let d=findClusterBreak(a,c,!1);if(u(a.slice(d,c))!=CharCategory.Word)break;c=d}for(;p<o;){let d=findClusterBreak(a,p);if(u(a.slice(p,d))!=CharCategory.Word)break;p=d}return c==p?null:EditorSelection.range(c+s,p+s)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:n=>n.length?n[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(n,r){let a=Object.keys(n),s=Object.keys(r);return a.length==s.length&&a.every(o=>n[o]==r[o])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(n,r,a={}){let s={};for(let o of n)for(let u of Object.keys(o)){let c=o[u],p=s[u];if(p===void 0)s[u]=c;else if(!(p===c||c===void 0))if(Object.hasOwnProperty.call(a,u))s[u]=a[u](p,c);else throw new Error("Config merge conflict for field "+u)}for(let o in r)s[o]===void 0&&(s[o]=r[o]);return s}class RangeValue{eq(r){return this==r}range(r,a=r){return Range$1.create(r,a,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class Mf{constructor(r,a,s){this.from=r,this.to=a,this.value=s}static create(r,a,s){return new Mf(r,a,s)}};function cmpRange(n,r){return n.from-r.from||n.value.startSide-r.value.startSide}class Chunk{constructor(r,a,s,o){this.from=r,this.to=a,this.value=s,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(r,a,s,o=0){let u=s?this.to:this.from;for(let c=o,p=u.length;;){if(c==p)return c;let d=c+p>>1,_=u[d]-r||(s?this.value[d].endSide:this.value[d].startSide)-a;if(d==c)return _>=0?c:p;_>=0?p=d:c=d+1}}between(r,a,s,o){for(let u=this.findIndex(a,-1e9,!0),c=this.findIndex(s,1e9,!1,u);u<c;u++)if(o(this.from[u]+r,this.to[u]+r,this.value[u])===!1)return!1}map(r,a){let s=[],o=[],u=[],c=-1,p=-1;for(let d=0;d<this.value.length;d++){let _=this.value[d],ja=this.from[d]+r,Ja=this.to[d]+r,ec,tc;if(ja==Ja){let rc=a.mapPos(ja,_.startSide,_.mapMode);if(rc==null||(ec=tc=rc,_.startSide!=_.endSide&&(tc=a.mapPos(ja,_.endSide),tc<ec)))continue}else if(ec=a.mapPos(ja,_.startSide),tc=a.mapPos(Ja,_.endSide),ec>tc||ec==tc&&_.startSide>0&&_.endSide<=0)continue;(tc-ec||_.endSide-_.startSide)<0||(c<0&&(c=ec),_.point&&(p=Math.max(p,tc-ec)),s.push(_),o.push(ec-c),u.push(tc-c))}return{mapped:s.length?new Chunk(o,u,s,p):null,pos:c}}}class RangeSet{constructor(r,a,s,o){this.chunkPos=r,this.chunk=a,this.nextLayer=s,this.maxPoint=o}static create(r,a,s,o){return new RangeSet(r,a,s,o)}get length(){let r=this.chunk.length-1;return r<0?0:Math.max(this.chunkEnd(r),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let r=this.nextLayer.size;for(let a of this.chunk)r+=a.value.length;return r}chunkEnd(r){return this.chunkPos[r]+this.chunk[r].length}update(r){let{add:a=[],sort:s=!1,filterFrom:o=0,filterTo:u=this.length}=r,c=r.filter;if(a.length==0&&!c)return this;if(s&&(a=a.slice().sort(cmpRange)),this.isEmpty)return a.length?RangeSet.of(a):this;let p=new LayerCursor(this,null,-1).goto(0),d=0,_=[],ja=new RangeSetBuilder;for(;p.value||d<a.length;)if(d<a.length&&(p.from-a[d].from||p.startSide-a[d].value.startSide)>=0){let Ja=a[d++];ja.addInner(Ja.from,Ja.to,Ja.value)||_.push(Ja)}else p.rangeIndex==1&&p.chunkIndex<this.chunk.length&&(d==a.length||this.chunkEnd(p.chunkIndex)<a[d].from)&&(!c||o>this.chunkEnd(p.chunkIndex)||u<this.chunkPos[p.chunkIndex])&&ja.addChunk(this.chunkPos[p.chunkIndex],this.chunk[p.chunkIndex])?p.nextChunk():((!c||o>p.to||u<p.from||c(p.from,p.to,p.value))&&(ja.addInner(p.from,p.to,p.value)||_.push(Range$1.create(p.from,p.to,p.value))),p.next());return ja.finishInner(this.nextLayer.isEmpty&&!_.length?RangeSet.empty:this.nextLayer.update({add:_,filter:c,filterFrom:o,filterTo:u}))}map(r){if(r.empty||this.isEmpty)return this;let a=[],s=[],o=-1;for(let c=0;c<this.chunk.length;c++){let p=this.chunkPos[c],d=this.chunk[c],_=r.touchesRange(p,p+d.length);if(_===!1)o=Math.max(o,d.maxPoint),a.push(d),s.push(r.mapPos(p));else if(_===!0){let{mapped:ja,pos:Ja}=d.map(p,r);ja&&(o=Math.max(o,ja.maxPoint),a.push(ja),s.push(Ja))}}let u=this.nextLayer.map(r);return a.length==0?u:new RangeSet(s,a,u||RangeSet.empty,o)}between(r,a,s){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let u=this.chunkPos[o],c=this.chunk[o];if(a>=u&&r<=u+c.length&&c.between(u,r-u,a-u,s)===!1)return}this.nextLayer.between(r,a,s)}}iter(r=0){return HeapCursor.from([this]).goto(r)}get isEmpty(){return this.nextLayer==this}static iter(r,a=0){return HeapCursor.from(r).goto(a)}static compare(r,a,s,o,u=-1){let c=r.filter(Ja=>Ja.maxPoint>0||!Ja.isEmpty&&Ja.maxPoint>=u),p=a.filter(Ja=>Ja.maxPoint>0||!Ja.isEmpty&&Ja.maxPoint>=u),d=findSharedChunks(c,p,s),_=new SpanCursor(c,d,u),ja=new SpanCursor(p,d,u);s.iterGaps((Ja,ec,tc)=>compare(_,Ja,ja,ec,tc,o)),s.empty&&s.length==0&&compare(_,0,ja,0,0,o)}static eq(r,a,s=0,o){o==null&&(o=999999999);let u=r.filter(ja=>!ja.isEmpty&&a.indexOf(ja)<0),c=a.filter(ja=>!ja.isEmpty&&r.indexOf(ja)<0);if(u.length!=c.length)return!1;if(!u.length)return!0;let p=findSharedChunks(u,c),d=new SpanCursor(u,p,0).goto(s),_=new SpanCursor(c,p,0).goto(s);for(;;){if(d.to!=_.to||!sameValues(d.active,_.active)||d.point&&(!_.point||!d.point.eq(_.point)))return!1;if(d.to>o)return!0;d.next(),_.next()}}static spans(r,a,s,o,u=-1){let c=new SpanCursor(r,null,u).goto(a),p=a,d=c.openStart;for(;;){let _=Math.min(c.to,s);if(c.point){let ja=c.activeForPoint(c.to),Ja=c.pointFrom<a?ja.length+1:c.point.startSide<0?ja.length:Math.min(ja.length,d);o.point(p,_,c.point,ja,Ja,c.pointRank),d=Math.min(c.openEnd(_),ja.length)}else _>p&&(o.span(p,_,c.active,d),d=c.openEnd(_));if(c.to>s)return d+(c.point&&c.to>s?1:0);p=c.to,c.next()}}static of(r,a=!1){let s=new RangeSetBuilder;for(let o of r instanceof Range$1?[r]:a?lazySort(r):r)s.add(o.from,o.to,o.value);return s.finish()}static join(r){if(!r.length)return RangeSet.empty;let a=r[r.length-1];for(let s=r.length-2;s>=0;s--)for(let o=r[s];o!=RangeSet.empty;o=o.nextLayer)a=new RangeSet(o.chunkPos,o.chunk,a,Math.max(o.maxPoint,a.maxPoint));return a}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(n){if(n.length>1)for(let r=n[0],a=1;a<n.length;a++){let s=n[a];if(cmpRange(r,s)>0)return n.slice().sort(cmpRange);r=s}return n}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(r){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,r&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(r,a,s){this.addInner(r,a,s)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(r,a,s)}addInner(r,a,s){let o=r-this.lastTo||s.startSide-this.last.endSide;if(o<=0&&(r-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=r),this.from.push(r-this.chunkStart),this.to.push(a-this.chunkStart),this.last=s,this.lastFrom=r,this.lastTo=a,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,a-r)),!0)}addChunk(r,a){if((r-this.lastTo||a.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,a.maxPoint),this.chunks.push(a),this.chunkPos.push(r);let s=a.value.length-1;return this.last=a.value[s],this.lastFrom=a.from[s]+r,this.lastTo=a.to[s]+r,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(r){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return r;let a=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(r):r,this.setMaxPoint);return this.from=null,a}}function findSharedChunks(n,r,a){let s=new Map;for(let u of n)for(let c=0;c<u.chunk.length;c++)u.chunk[c].maxPoint<=0&&s.set(u.chunk[c],u.chunkPos[c]);let o=new Set;for(let u of r)for(let c=0;c<u.chunk.length;c++){let p=s.get(u.chunk[c]);p!=null&&(a?a.mapPos(p):p)==u.chunkPos[c]&&!(a!=null&&a.touchesRange(p,p+u.chunk[c].length))&&o.add(u.chunk[c])}return o}class LayerCursor{constructor(r,a,s,o=0){this.layer=r,this.skip=a,this.minPoint=s,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(r,a=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(r,a,!1),this}gotoInner(r,a,s){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<r||o.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(r-this.layer.chunkPos[this.chunkIndex],a,!0);(!s||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(r,a){(this.to-r||this.endSide-a)<0&&this.gotoInner(r,a,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let r=this.layer.chunkPos[this.chunkIndex],a=this.layer.chunk[this.chunkIndex],s=r+a.from[this.rangeIndex];if(this.from=s,this.to=r+a.to[this.rangeIndex],this.value=a.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(r){if(r==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=r}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(r){return this.from-r.from||this.startSide-r.startSide||this.rank-r.rank||this.to-r.to||this.endSide-r.endSide}}class HeapCursor{constructor(r){this.heap=r}static from(r,a=null,s=-1){let o=[];for(let u=0;u<r.length;u++)for(let c=r[u];!c.isEmpty;c=c.nextLayer)c.maxPoint>=s&&o.push(new LayerCursor(c,a,s,u));return o.length==1?o[0]:new HeapCursor(o)}get startSide(){return this.value?this.value.startSide:0}goto(r,a=-1e9){for(let s of this.heap)s.goto(r,a);for(let s=this.heap.length>>1;s>=0;s--)heapBubble(this.heap,s);return this.next(),this}forward(r,a){for(let s of this.heap)s.forward(r,a);for(let s=this.heap.length>>1;s>=0;s--)heapBubble(this.heap,s);(this.to-r||this.value.endSide-a)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let r=this.heap[0];this.from=r.from,this.to=r.to,this.value=r.value,this.rank=r.rank,r.value&&r.next(),heapBubble(this.heap,0)}}}function heapBubble(n,r){for(let a=n[r];;){let s=(r<<1)+1;if(s>=n.length)break;let o=n[s];if(s+1<n.length&&o.compare(n[s+1])>=0&&(o=n[s+1],s++),a.compare(o)<0)break;n[s]=a,n[r]=o,r=s}}class SpanCursor{constructor(r,a,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(r,a,s)}goto(r,a=-1e9){return this.cursor.goto(r,a),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=r,this.endSide=a,this.openStart=-1,this.next(),this}forward(r,a){for(;this.minActive>-1&&(this.activeTo[this.minActive]-r||this.active[this.minActive].endSide-a)<0;)this.removeActive(this.minActive);this.cursor.forward(r,a)}removeActive(r){remove(this.active,r),remove(this.activeTo,r),remove(this.activeRank,r),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(r){let a=0,{value:s,to:o,rank:u}=this.cursor;for(;a<this.activeRank.length&&(u-this.activeRank[a]||o-this.activeTo[a])>0;)a++;insert(this.active,a,s),insert(this.activeTo,a,o),insert(this.activeRank,a,u),r&&insert(r,a,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let r=this.to,a=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>r){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),s&&remove(s,o)}else if(this.cursor.value)if(this.cursor.from>r){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let u=this.cursor.value;if(!u.point)this.addActive(s),this.cursor.next();else if(a&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=u,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=u.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let o=s.length-1;o>=0&&s[o]<r;o--)this.openStart++}}activeForPoint(r){if(!this.active.length)return this.active;let a=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>r||this.activeTo[s]==r&&this.active[s].endSide>=this.point.endSide)&&a.push(this.active[s]);return a.reverse()}openEnd(r){let a=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>r;s--)a++;return a}}function compare(n,r,a,s,o,u){n.goto(r),a.goto(s);let c=s+o,p=s,d=s-r;for(;;){let _=n.to+d-a.to||n.endSide-a.endSide,ja=_<0?n.to+d:a.to,Ja=Math.min(ja,c);if(n.point||a.point?n.point&&a.point&&(n.point==a.point||n.point.eq(a.point))&&sameValues(n.activeForPoint(n.to),a.activeForPoint(a.to))||u.comparePoint(p,Ja,n.point,a.point):Ja>p&&!sameValues(n.active,a.active)&&u.compareRange(p,Ja,n.active,a.active),ja>c)break;p=ja,_<=0&&n.next(),_>=0&&a.next()}}function sameValues(n,r){if(n.length!=r.length)return!1;for(let a=0;a<n.length;a++)if(n[a]!=r[a]&&!n[a].eq(r[a]))return!1;return!0}function remove(n,r){for(let a=r,s=n.length-1;a<s;a++)n[a]=n[a+1];n.pop()}function insert(n,r,a){for(let s=n.length-1;s>=r;s--)n[s+1]=n[s];n[r]=a}function findMinIndex(n,r){let a=-1,s=1e9;for(let o=0;o<r.length;o++)(r[o]-s||n[o].endSide-n[a].endSide)<0&&(a=o,s=r[o]);return a}function countColumn(n,r,a=n.length){let s=0;for(let o=0;o<a;)n.charCodeAt(o)==9?(s+=r-s%r,o++):(s++,o=findClusterBreak(n,o));return s}function findColumn(n,r,a,s){for(let o=0,u=0;;){if(u>=r)return o;if(o==n.length)break;u+=n.charCodeAt(o)==9?a-u%a:1,o=findClusterBreak(n,o)}return s===!0?-1:n.length}const C="ͼ",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(r,a){this.rules=[];let{finish:s}=a||{};function o(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function u(c,p,d,_){let ja=[],Ja=/^@(\w+)\b/.exec(c[0]),ec=Ja&&Ja[1]=="keyframes";if(Ja&&p==null)return d.push(c[0]+";");for(let tc in p){let rc=p[tc];if(/&/.test(tc))u(tc.split(/,\s*/).map(nc=>c.map(ic=>nc.replace(/&/,ic))).reduce((nc,ic)=>nc.concat(ic)),rc,d);else if(rc&&typeof rc=="object"){if(!Ja)throw new RangeError("The value of a property ("+tc+") should be a primitive value.");u(o(tc),rc,ja,ec)}else rc!=null&&ja.push(tc.replace(/_.*/,"").replace(/[A-Z]/g,nc=>"-"+nc.toLowerCase())+": "+rc+";")}(ja.length||ec)&&d.push((s&&!Ja&&!_?c.map(s):c).join(", ")+" {"+ja.join(" ")+"}")}for(let c in r)u(o(c),r[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let r=top[COUNT]||1;return top[COUNT]=r+1,C+r.toString(36)}static mount(r,a,s){let o=r[SET],u=s&&s.nonce;o?u&&o.setNonce(u):o=new StyleSet(r,u),o.mount(Array.isArray(a)?a:[a],r)}}let adoptedSet=new Map;class StyleSet{constructor(r,a){let s=r.ownerDocument||r,o=s.defaultView;if(!r.head&&r.adoptedStyleSheets&&o.CSSStyleSheet){let u=adoptedSet.get(s);if(u)return r[SET]=u;this.sheet=new o.CSSStyleSheet,adoptedSet.set(s,this)}else this.styleTag=s.createElement("style"),a&&this.styleTag.setAttribute("nonce",a);this.modules=[],r[SET]=this}mount(r,a){let s=this.sheet,o=0,u=0;for(let c=0;c<r.length;c++){let p=r[c],d=this.modules.indexOf(p);if(d<u&&d>-1&&(this.modules.splice(d,1),u--,d=-1),d==-1){if(this.modules.splice(u++,0,p),s)for(let _=0;_<p.rules.length;_++)s.insertRule(p.rules[_],o++)}else{for(;u<d;)o+=this.modules[u++].rules.length;o+=p.rules.length,u++}}if(s)a.adoptedStyleSheets.indexOf(this.sheet)<0&&(a.adoptedStyleSheets=[this.sheet,...a.adoptedStyleSheets]);else{let c="";for(let d=0;d<this.modules.length;d++)c+=this.modules[d].getRules()+`
`;this.styleTag.textContent=c;let p=a.head||a;this.styleTag.parentNode!=p&&p.insertBefore(this.styleTag,p.firstChild)}}setNonce(r){this.styleTag&&this.styleTag.getAttribute("nonce")!=r&&this.styleTag.setAttribute("nonce",r)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$3=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(n){var r=mac&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||ie$3&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",a=!r&&n.key||(n.shiftKey?shift:base)[n.keyCode]||n.key||"Unidentified";return a=="Esc"&&(a="Escape"),a=="Del"&&(a="Delete"),a=="Left"&&(a="ArrowLeft"),a=="Up"&&(a="ArrowUp"),a=="Right"&&(a="ArrowRight"),a=="Down"&&(a="ArrowDown"),a}function getSelection(n){let r;return n.nodeType==11?r=n.getSelection?n:n.ownerDocument:r=n,r.getSelection()}function contains(n,r){return r?n==r||n.contains(r.nodeType!=1?r.parentNode:r):!1}function deepActiveElement(n){let r=n.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function hasSelection(n,r){if(!r.anchorNode)return!1;try{return contains(n,r.anchorNode)}catch{return!1}}function clientRectsFor(n){return n.nodeType==3?textRange(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function isEquivalentPosition(n,r,a,s){return a?scanFor(n,r,a,s,-1)||scanFor(n,r,a,s,1):!1}function domIndex(n){for(var r=0;;r++)if(n=n.previousSibling,!n)return r}function isBlockElement(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function scanFor(n,r,a,s,o){for(;;){if(n==a&&r==s)return!0;if(r==(o<0?0:maxOffset(n))){if(n.nodeName=="DIV")return!1;let u=n.parentNode;if(!u||u.nodeType!=1)return!1;r=domIndex(n)+(o<0?0:1),n=u}else if(n.nodeType==1){if(n=n.childNodes[r+(o<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;r=o<0?maxOffset(n):0}else return!1}}function maxOffset(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function flattenRect(n,r){let a=r?n.left:n.right;return{left:a,right:a,top:n.top,bottom:n.bottom}}function windowRect(n){let r=n.visualViewport;return r?{left:0,right:r.width,top:0,bottom:r.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function getScale(n,r){let a=r.width/n.offsetWidth,s=r.height/n.offsetHeight;return(a>.995&&a<1.005||!isFinite(a)||Math.abs(r.width-n.offsetWidth)<1)&&(a=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(r.height-n.offsetHeight)<1)&&(s=1),{scaleX:a,scaleY:s}}function scrollRectIntoView(n,r,a,s,o,u,c,p){let d=n.ownerDocument,_=d.defaultView||window;for(let ja=n,Ja=!1;ja&&!Ja;)if(ja.nodeType==1){let ec,tc=ja==d.body,rc=1,nc=1;if(tc)ec=windowRect(_);else{if(/^(fixed|sticky)$/.test(getComputedStyle(ja).position)&&(Ja=!0),ja.scrollHeight<=ja.clientHeight&&ja.scrollWidth<=ja.clientWidth){ja=ja.assignedSlot||ja.parentNode;continue}let eh=ja.getBoundingClientRect();({scaleX:rc,scaleY:nc}=getScale(ja,eh)),ec={left:eh.left,right:eh.left+ja.clientWidth*rc,top:eh.top,bottom:eh.top+ja.clientHeight*nc}}let ic=0,uc=0;if(o=="nearest")r.top<ec.top?(uc=-(ec.top-r.top+c),a>0&&r.bottom>ec.bottom+uc&&(uc=r.bottom-ec.bottom+uc+c)):r.bottom>ec.bottom&&(uc=r.bottom-ec.bottom+c,a<0&&r.top-uc<ec.top&&(uc=-(ec.top+uc-r.top+c)));else{let eh=r.bottom-r.top,rh=ec.bottom-ec.top;uc=(o=="center"&&eh<=rh?r.top+eh/2-rh/2:o=="start"||o=="center"&&a<0?r.top-c:r.bottom-rh+c)-ec.top}if(s=="nearest"?r.left<ec.left?(ic=-(ec.left-r.left+u),a>0&&r.right>ec.right+ic&&(ic=r.right-ec.right+ic+u)):r.right>ec.right&&(ic=r.right-ec.right+u,a<0&&r.left<ec.left+ic&&(ic=-(ec.left+ic-r.left+u))):ic=(s=="center"?r.left+(r.right-r.left)/2-(ec.right-ec.left)/2:s=="start"==p?r.left-u:r.right-(ec.right-ec.left)+u)-ec.left,ic||uc)if(tc)_.scrollBy(ic,uc);else{let eh=0,rh=0;if(uc){let ah=ja.scrollTop;ja.scrollTop+=uc/nc,rh=(ja.scrollTop-ah)*nc}if(ic){let ah=ja.scrollLeft;ja.scrollLeft+=ic/rc,eh=(ja.scrollLeft-ah)*rc}r={left:r.left-eh,top:r.top-rh,right:r.right-eh,bottom:r.bottom-rh},eh&&Math.abs(eh-ic)<1&&(s="nearest"),rh&&Math.abs(rh-uc)<1&&(o="nearest")}if(tc)break;ja=ja.assignedSlot||ja.parentNode}else if(ja.nodeType==11)ja=ja.host;else break}function scrollableParents(n){let r=n.ownerDocument,a,s;for(let o=n.parentNode;o&&!(o==r.body||a&&s);)if(o.nodeType==1)!s&&o.scrollHeight>o.clientHeight&&(s=o),!a&&o.scrollWidth>o.clientWidth&&(a=o),o=o.assignedSlot||o.parentNode;else if(o.nodeType==11)o=o.host;else break;return{x:a,y:s}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(r){return this.anchorNode==r.anchorNode&&this.anchorOffset==r.anchorOffset&&this.focusNode==r.focusNode&&this.focusOffset==r.focusOffset}setRange(r){let{anchorNode:a,focusNode:s}=r;this.set(a,Math.min(r.anchorOffset,a?maxOffset(a):0),s,Math.min(r.focusOffset,s?maxOffset(s):0))}set(r,a,s,o){this.anchorNode=r,this.anchorOffset=a,this.focusNode=s,this.focusOffset=o}}let preventScrollSupported=null;function focusPreventScroll(n){if(n.setActive)return n.setActive();if(preventScrollSupported)return n.focus(preventScrollSupported);let r=[];for(let a=n;a&&(r.push(a,a.scrollTop,a.scrollLeft),a!=a.ownerDocument);a=a.parentNode);if(n.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let a=0;a<r.length;){let s=r[a++],o=r[a++],u=r[a++];s.scrollTop!=o&&(s.scrollTop=o),s.scrollLeft!=u&&(s.scrollLeft=u)}}}let scratchRange;function textRange(n,r,a=r){let s=scratchRange||(scratchRange=document.createRange());return s.setEnd(n,a),s.setStart(n,r),s}function dispatchKey(n,r,a,s){let o={key:r,code:r,keyCode:a,which:a,cancelable:!0};s&&({altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,metaKey:o.metaKey}=s);let u=new KeyboardEvent("keydown",o);u.synthetic=!0,n.dispatchEvent(u);let c=new KeyboardEvent("keyup",o);return c.synthetic=!0,n.dispatchEvent(c),u.defaultPrevented||c.defaultPrevented}function getRoot(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function clearAttributes(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function atElementStart(n,r){let a=r.focusNode,s=r.focusOffset;if(!a||r.anchorNode!=a||r.anchorOffset!=s)return!1;for(s=Math.min(s,maxOffset(a));;)if(s){if(a.nodeType!=1)return!1;let o=a.childNodes[s-1];o.contentEditable=="false"?s--:(a=o,s=maxOffset(a))}else{if(a==n)return!0;s=domIndex(a),a=a.parentNode}}function isScrolledToBottom(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function textNodeBefore(n,r){for(let a=n,s=r;;){if(a.nodeType==3&&s>0)return{node:a,offset:s};if(a.nodeType==1&&s>0){if(a.contentEditable=="false")return null;a=a.childNodes[s-1],s=maxOffset(a)}else if(a.parentNode&&!isBlockElement(a))s=domIndex(a),a=a.parentNode;else return null}}function textNodeAfter(n,r){for(let a=n,s=r;;){if(a.nodeType==3&&s<a.nodeValue.length)return{node:a,offset:s};if(a.nodeType==1&&s<a.childNodes.length){if(a.contentEditable=="false")return null;a=a.childNodes[s],s=0}else if(a.parentNode&&!isBlockElement(a))s=domIndex(a)+1,a=a.parentNode;else return null}}class DOMPos{constructor(r,a,s=!0){this.node=r,this.offset=a,this.precise=s}static before(r,a){return new DOMPos(r.parentNode,domIndex(r),a)}static after(r,a){return new DOMPos(r.parentNode,domIndex(r)+1,a)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(r){let a=this.posAtStart;for(let s of this.children){if(s==r)return a;a+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(r){return this.posBefore(r)+r.length}sync(r,a){if(this.flags&2){let s=this.dom,o=null,u;for(let c of this.children){if(c.flags&7){if(!c.dom&&(u=o?o.nextSibling:s.firstChild)){let p=ContentView.get(u);(!p||!p.parent&&p.canReuseDOM(c))&&c.reuseDOM(u)}c.sync(r,a),c.flags&=-8}if(u=o?o.nextSibling:s.firstChild,a&&!a.written&&a.node==s&&u!=c.dom&&(a.written=!0),c.dom.parentNode==s)for(;u&&u!=c.dom;)u=rm$1(u);else s.insertBefore(c.dom,u);o=c.dom}for(u=o?o.nextSibling:s.firstChild,u&&a&&a.node==s&&(a.written=!0);u;)u=rm$1(u)}else if(this.flags&1)for(let s of this.children)s.flags&7&&(s.sync(r,a),s.flags&=-8)}reuseDOM(r){}localPosFromDOM(r,a){let s;if(r==this.dom)s=this.dom.childNodes[a];else{let o=maxOffset(r)==0?0:a==0?-1:1;for(;;){let u=r.parentNode;if(u==this.dom)break;o==0&&u.firstChild!=u.lastChild&&(r==u.firstChild?o=-1:o=1),r=u}o<0?s=r:s=r.nextSibling}if(s==this.dom.firstChild)return 0;for(;s&&!ContentView.get(s);)s=s.nextSibling;if(!s)return this.length;for(let o=0,u=0;;o++){let c=this.children[o];if(c.dom==s)return u;u+=c.length+c.breakAfter}}domBoundsAround(r,a,s=0){let o=-1,u=-1,c=-1,p=-1;for(let d=0,_=s,ja=s;d<this.children.length;d++){let Ja=this.children[d],ec=_+Ja.length;if(_<r&&ec>a)return Ja.domBoundsAround(r,a,_);if(ec>=r&&o==-1&&(o=d,u=_),_>a&&Ja.dom.parentNode==this.dom){c=d,p=ja;break}ja=ec,_=ec+Ja.breakAfter}return{from:u,to:p<0?s+this.length:p,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:c<this.children.length&&c>=0?this.children[c].dom:null}}markDirty(r=!1){this.flags|=2,this.markParentsDirty(r)}markParentsDirty(r){for(let a=this.parent;a;a=a.parent){if(r&&(a.flags|=2),a.flags&1)return;a.flags|=1,r=!1}}setParent(r){this.parent!=r&&(this.parent=r,this.flags&7&&this.markParentsDirty(!0))}setDOM(r){this.dom!=r&&(this.dom&&(this.dom.cmView=null),this.dom=r,r.cmView=this)}get rootView(){for(let r=this;;){let a=r.parent;if(!a)return r;r=a}}replaceChildren(r,a,s=noChildren){this.markDirty();for(let o=r;o<a;o++){let u=this.children[o];u.parent==this&&s.indexOf(u)<0&&u.destroy()}this.children.splice(r,a-r,...s);for(let o=0;o<s.length;o++)s[o].setParent(this)}ignoreMutation(r){return!1}ignoreEvent(r){return!1}childCursor(r=this.length){return new ChildCursor(this.children,r,this.children.length)}childPos(r,a=1){return this.childCursor().findPos(r,a)}toString(){let r=this.constructor.name.replace("View","");return r+(this.children.length?"("+this.children.join()+")":this.length?"["+(r=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(r){return r.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(r,a,s,o,u,c){return!1}become(r){return!1}canReuseDOM(r){return r.constructor==this.constructor&&!((this.flags|r.flags)&8)}getSide(){return 0}destroy(){for(let r of this.children)r.parent==this&&r.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(n){let r=n.nextSibling;return n.parentNode.removeChild(n),r}class ChildCursor{constructor(r,a,s){this.children=r,this.pos=a,this.i=s,this.off=0}findPos(r,a=1){for(;;){if(r>this.pos||r==this.pos&&(a>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=r-this.pos,this;let s=this.children[--this.i];this.pos-=s.length+s.breakAfter}}}function replaceRange(n,r,a,s,o,u,c,p,d){let{children:_}=n,ja=_.length?_[r]:null,Ja=u.length?u[u.length-1]:null,ec=Ja?Ja.breakAfter:c;if(!(r==s&&ja&&!c&&!ec&&u.length<2&&ja.merge(a,o,u.length?Ja:null,a==0,p,d))){if(s<_.length){let tc=_[s];tc&&(o<tc.length||tc.breakAfter&&(Ja!=null&&Ja.breakAfter))?(r==s&&(tc=tc.split(o),o=0),!ec&&Ja&&tc.merge(0,o,Ja,!0,0,d)?u[u.length-1]=tc:((o||tc.children.length&&!tc.children[0].length)&&tc.merge(0,o,null,!1,0,d),u.push(tc))):tc!=null&&tc.breakAfter&&(Ja?Ja.breakAfter=1:c=1),s++}for(ja&&(ja.breakAfter=c,a>0&&(!c&&u.length&&ja.merge(a,ja.length,u[0],!1,p,0)?ja.breakAfter=u.shift().breakAfter:(a<ja.length||ja.children.length&&ja.children[ja.children.length-1].length==0)&&ja.merge(a,ja.length,null,!1,p,0),r++));r<s&&u.length;)if(_[s-1].become(u[u.length-1]))s--,u.pop(),d=u.length?0:p;else if(_[r].become(u[0]))r++,u.shift(),p=u.length?0:d;else break;!u.length&&r&&s<_.length&&!_[r-1].breakAfter&&_[s].merge(0,0,_[r-1],!1,p,d)&&r--,(r<s||u.length)&&n.replaceChildren(r,s,u)}}function mergeChildrenInto(n,r,a,s,o,u){let c=n.childCursor(),{i:p,off:d}=c.findPos(a,1),{i:_,off:ja}=c.findPos(r,-1),Ja=r-a;for(let ec of s)Ja+=ec.length;n.length+=Ja,replaceRange(n,_,ja,p,d,s,0,o,u)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie$2=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie$2&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie$2&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie$2&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie:ie$2,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(r){super(),this.text=r}get length(){return this.text.length}createDOM(r){this.setDOM(r||document.createTextNode(this.text))}sync(r,a){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(a&&a.node==this.dom&&(a.written=!0),this.dom.nodeValue=this.text)}reuseDOM(r){r.nodeType==3&&this.createDOM(r)}merge(r,a,s){return this.flags&8||s&&(!(s instanceof TextView)||this.length-(a-r)+s.length>MaxJoinLen||s.flags&8)?!1:(this.text=this.text.slice(0,r)+(s?s.text:"")+this.text.slice(a),this.markDirty(),!0)}split(r){let a=new TextView(this.text.slice(r));return this.text=this.text.slice(0,r),this.markDirty(),a.flags|=this.flags&8,a}localPosFromDOM(r,a){return r==this.dom?a:a?this.text.length:0}domAtPos(r){return new DOMPos(this.dom,r)}domBoundsAround(r,a,s){return{from:s,to:s+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(r,a){return textCoords(this.dom,r,a)}}class MarkView extends ContentView{constructor(r,a=[],s=0){super(),this.mark=r,this.children=a,this.length=s;for(let o of a)o.setParent(this)}setAttrs(r){if(clearAttributes(r),this.mark.class&&(r.className=this.mark.class),this.mark.attrs)for(let a in this.mark.attrs)r.setAttribute(a,this.mark.attrs[a]);return r}canReuseDOM(r){return super.canReuseDOM(r)&&!((this.flags|r.flags)&8)}reuseDOM(r){r.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(r),this.flags|=6)}sync(r,a){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(r,a)}merge(r,a,s,o,u,c){return s&&(!(s instanceof MarkView&&s.mark.eq(this.mark))||r&&u<=0||a<this.length&&c<=0)?!1:(mergeChildrenInto(this,r,a,s?s.children.slice():[],u-1,c-1),this.markDirty(),!0)}split(r){let a=[],s=0,o=-1,u=0;for(let p of this.children){let d=s+p.length;d>r&&a.push(s<r?p.split(r-s):p),o<0&&s>=r&&(o=u),s=d,u++}let c=this.length-r;return this.length=r,o>-1&&(this.children.length=o,this.markDirty()),new MarkView(this.mark,a,c)}domAtPos(r){return inlineDOMAtPos(this,r)}coordsAt(r,a){return coordsInChildren(this,r,a)}}function textCoords(n,r,a){let s=n.nodeValue.length;r>s&&(r=s);let o=r,u=r,c=0;r==0&&a<0||r==s&&a>=0?browser.chrome||browser.gecko||(r?(o--,c=1):u<s&&(u++,c=-1)):a<0?o--:u<s&&u++;let p=textRange(n,o,u).getClientRects();if(!p.length)return null;let d=p[(c?c<0:a>=0)?0:p.length-1];return browser.safari&&!c&&d.width==0&&(d=Array.prototype.find.call(p,_=>_.width)||d),c?flattenRect(d,c<0):d||null}class WidgetView extends ContentView{static create(r,a,s){return new WidgetView(r,a,s)}constructor(r,a,s){super(),this.widget=r,this.length=a,this.side=s,this.prevWidget=null}split(r){let a=WidgetView.create(this.widget,this.length-r,this.side);return this.length-=r,a}sync(r){(!this.dom||!this.widget.updateDOM(this.dom,r))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(r)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(r,a,s,o,u,c){return s&&(!(s instanceof WidgetView)||!this.widget.compare(s.widget)||r>0&&u<=0||a<this.length&&c<=0)?!1:(this.length=r+(s?s.length:0)+(this.length-a),!0)}become(r){return r instanceof WidgetView&&r.side==this.side&&this.widget.constructor==r.widget.constructor?(this.widget.compare(r.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=r.widget,this.length=r.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(r){return this.widget.ignoreEvent(r)}get overrideDOMText(){if(this.length==0)return Text.empty;let r=this;for(;r.parent;)r=r.parent;let{view:a}=r,s=a&&a.state.doc,o=this.posAtStart;return s?s.slice(o,o+this.length):Text.empty}domAtPos(r){return(this.length?r==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,r==this.length)}domBoundsAround(){return null}coordsAt(r,a){let s=this.widget.coordsAt(this.dom,r,a);if(s)return s;let o=this.dom.getClientRects(),u=null;if(!o.length)return null;let c=this.side?this.side<0:r>0;for(let p=c?o.length-1:0;u=o[p],!(r>0?p==0:p==o.length-1||u.top<u.bottom);p+=c?-1:1);return flattenRect(u,!c)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(r){super(),this.side=r}get length(){return 0}merge(){return!1}become(r){return r instanceof WidgetBufferView&&r.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let r=document.createElement("img");r.className="cm-widgetBuffer",r.setAttribute("aria-hidden","true"),this.setDOM(r)}}getSide(){return this.side}domAtPos(r){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(r){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(n,r){let a=n.dom,{children:s}=n,o=0;for(let u=0;o<s.length;o++){let c=s[o],p=u+c.length;if(!(p==u&&c.getSide()<=0)){if(r>u&&r<p&&c.dom.parentNode==a)return c.domAtPos(r-u);if(r<=u)break;u=p}}for(let u=o;u>0;u--){let c=s[u-1];if(c.dom.parentNode==a)return c.domAtPos(c.length)}for(let u=o;u<s.length;u++){let c=s[u];if(c.dom.parentNode==a)return c.domAtPos(0)}return new DOMPos(a,0)}function joinInlineInto(n,r,a){let s,{children:o}=n;a>0&&r instanceof MarkView&&o.length&&(s=o[o.length-1])instanceof MarkView&&s.mark.eq(r.mark)?joinInlineInto(s,r.children[0],a-1):(o.push(r),r.setParent(n)),n.length+=r.length}function coordsInChildren(n,r,a){let s=null,o=-1,u=null,c=-1;function p(_,ja){for(let Ja=0,ec=0;Ja<_.children.length&&ec<=ja;Ja++){let tc=_.children[Ja],rc=ec+tc.length;rc>=ja&&(tc.children.length?p(tc,ja-ec):(!u||u.isHidden&&a>0)&&(rc>ja||ec==rc&&tc.getSide()>0)?(u=tc,c=ja-ec):(ec<ja||ec==rc&&tc.getSide()<0&&!tc.isHidden)&&(s=tc,o=ja-ec)),ec=rc}}p(n,r);let d=(a<0?s:u)||s||u;return d?d.coordsAt(Math.max(0,d==s?o:c),a):fallbackRect(n)}function fallbackRect(n){let r=n.dom.lastChild;if(!r)return n.dom.getBoundingClientRect();let a=clientRectsFor(r);return a[a.length-1]||null}function combineAttrs(n,r){for(let a in n)a=="class"&&r.class?r.class+=" "+n.class:a=="style"&&r.style?r.style+=";"+n.style:r[a]=n[a];return r}const noAttrs=Object.create(null);function attrsEq(n,r,a){if(n==r)return!0;n||(n=noAttrs),r||(r=noAttrs);let s=Object.keys(n),o=Object.keys(r);if(s.length-(a&&s.indexOf(a)>-1?1:0)!=o.length-(a&&o.indexOf(a)>-1?1:0))return!1;for(let u of s)if(u!=a&&(o.indexOf(u)==-1||n[u]!==r[u]))return!1;return!0}function updateAttrs(n,r,a){let s=!1;if(r)for(let o in r)a&&o in a||(s=!0,o=="style"?n.style.cssText="":n.removeAttribute(o));if(a)for(let o in a)r&&r[o]==a[o]||(s=!0,o=="style"?n.style.cssText=a[o]:n.setAttribute(o,a[o]));return s}function getAttrs(n){let r=Object.create(null);for(let a=0;a<n.attributes.length;a++){let s=n.attributes[a];r[s.name]=s.value}return r}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(r,a,s,o,u,c){if(s){if(!(s instanceof LineView))return!1;this.dom||s.transferDOM(this)}return o&&this.setDeco(s?s.attrs:null),mergeChildrenInto(this,r,a,s?s.children.slice():[],u,c),!0}split(r){let a=new LineView;if(a.breakAfter=this.breakAfter,this.length==0)return a;let{i:s,off:o}=this.childPos(r);o&&(a.append(this.children[s].split(o),0),this.children[s].merge(o,this.children[s].length,null,!1,0,0),s++);for(let u=s;u<this.children.length;u++)a.append(this.children[u],0);for(;s>0&&this.children[s-1].length==0;)this.children[--s].destroy();return this.children.length=s,this.markDirty(),this.length=r,a}transferDOM(r){this.dom&&(this.markDirty(),r.setDOM(this.dom),r.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(r){attrsEq(this.attrs,r)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=r)}append(r,a){joinInlineInto(this,r,a)}addLineDeco(r){let a=r.spec.attributes,s=r.spec.class;a&&(this.attrs=combineAttrs(a,this.attrs||{})),s&&(this.attrs=combineAttrs({class:s},this.attrs||{}))}domAtPos(r){return inlineDOMAtPos(this,r)}reuseDOM(r){r.nodeName=="DIV"&&(this.setDOM(r),this.flags|=6)}sync(r,a){var s;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(r,a);let o=this.dom.lastChild;for(;o&&ContentView.get(o)instanceof MarkView;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((s=ContentView.get(o))===null||s===void 0?void 0:s.isEditable)==!1&&(!browser.ios||!this.children.some(u=>u instanceof TextView))){let u=document.createElement("BR");u.cmIgnore=!0,this.dom.appendChild(u)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let r=0,a;for(let s of this.children){if(!(s instanceof TextView)||/[^ -~]/.test(s.text))return null;let o=clientRectsFor(s.dom);if(o.length!=1)return null;r+=o[0].width,a=o[0].height}return r?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:r/this.length,textHeight:a}:null}coordsAt(r,a){let s=coordsInChildren(this,r,a);if(!this.children.length&&s&&this.parent){let{heightOracle:o}=this.parent.view.viewState,u=s.bottom-s.top;if(Math.abs(u-o.lineHeight)<2&&o.textHeight<u){let c=(u-o.textHeight)/2;return{top:s.top+c,bottom:s.bottom-c,left:s.left,right:s.left}}}return s}become(r){return r instanceof LineView&&this.children.length==0&&r.children.length==0&&attrsEq(this.attrs,r.attrs)&&this.breakAfter==r.breakAfter}covers(){return!0}static find(r,a){for(let s=0,o=0;s<r.children.length;s++){let u=r.children[s],c=o+u.length;if(c>=a){if(u instanceof LineView)return u;if(c>a)break}o=c+u.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(r,a,s){super(),this.widget=r,this.length=a,this.deco=s,this.breakAfter=0,this.prevWidget=null}merge(r,a,s,o,u,c){return s&&(!(s instanceof BlockWidgetView)||!this.widget.compare(s.widget)||r>0&&u<=0||a<this.length&&c<=0)?!1:(this.length=r+(s?s.length:0)+(this.length-a),!0)}domAtPos(r){return r==0?DOMPos.before(this.dom):DOMPos.after(this.dom,r==this.length)}split(r){let a=this.length-r;this.length=r;let s=new BlockWidgetView(this.widget,a,this.deco);return s.breakAfter=this.breakAfter,s}get children(){return noChildren}sync(r){(!this.dom||!this.widget.updateDOM(this.dom,r))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(r)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(r){return r instanceof BlockWidgetView&&r.widget.constructor==this.widget.constructor?(r.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=r.widget,this.length=r.length,this.deco=r.deco,this.breakAfter=r.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(r){return this.widget.ignoreEvent(r)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(r,a){return this.widget.coordsAt(this.dom,r,a)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(r){let{startSide:a,endSide:s}=this.deco;return a==s?!1:r<0?a<0:s>0}}class WidgetType{eq(r){return!1}updateDOM(r,a){return!1}compare(r){return this==r||this.constructor==r.constructor&&this.eq(r)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(r){return!0}coordsAt(r,a,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(r){}}var BlockType=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(r,a,s,o){super(),this.startSide=r,this.endSide=a,this.widget=s,this.spec=o}get heightRelevant(){return!1}static mark(r){return new MarkDecoration(r)}static widget(r){let a=Math.max(-1e4,Math.min(1e4,r.side||0)),s=!!r.block;return a+=s&&!r.inlineOrder?a>0?3e8:-4e8:a>0?1e8:-1e8,new PointDecoration(r,a,a,s,r.widget||null,!1)}static replace(r){let a=!!r.block,s,o;if(r.isBlockGap)s=-5e8,o=4e8;else{let{start:u,end:c}=getInclusive(r,a);s=(u?a?-3e8:-1:5e8)-1,o=(c?a?2e8:1:-6e8)+1}return new PointDecoration(r,s,o,a,r.widget||null,!0)}static line(r){return new LineDecoration(r)}static set(r,a=!1){return RangeSet.of(r,a)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(r){let{start:a,end:s}=getInclusive(r);super(a?-1:5e8,s?1:-6e8,null,r),this.tagName=r.tagName||"span",this.class=r.class||"",this.attrs=r.attributes||null}eq(r){var a,s;return this==r||r instanceof MarkDecoration&&this.tagName==r.tagName&&(this.class||((a=this.attrs)===null||a===void 0?void 0:a.class))==(r.class||((s=r.attrs)===null||s===void 0?void 0:s.class))&&attrsEq(this.attrs,r.attrs,"class")}range(r,a=r){if(r>=a)throw new RangeError("Mark decorations may not be empty");return super.range(r,a)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(r){super(-2e8,-2e8,null,r)}eq(r){return r instanceof LineDecoration&&this.spec.class==r.spec.class&&attrsEq(this.spec.attributes,r.spec.attributes)}range(r,a=r){if(a!=r)throw new RangeError("Line decoration ranges must be zero-length");return super.range(r,a)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(r,a,s,o,u,c){super(a,s,u,r),this.block=o,this.isReplace=c,this.mapMode=o?a<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(r){return r instanceof PointDecoration&&widgetsEq(this.widget,r.widget)&&this.block==r.block&&this.startSide==r.startSide&&this.endSide==r.endSide}range(r,a=r){if(this.isReplace&&(r>a||r==a&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&a!=r)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(r,a)}}PointDecoration.prototype.point=!0;function getInclusive(n,r=!1){let{inclusiveStart:a,inclusiveEnd:s}=n;return a==null&&(a=n.inclusive),s==null&&(s=n.inclusive),{start:a??r,end:s??r}}function widgetsEq(n,r){return n==r||!!(n&&r&&n.compare(r))}function addRange(n,r,a,s=0){let o=a.length-1;o>=0&&a[o]+s>=n?a[o]=Math.max(a[o],r):a.push(n,r)}class ContentBuilder{constructor(r,a,s,o){this.doc=r,this.pos=a,this.end=s,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=r.iter(),this.skip=a}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let r=this.content[this.content.length-1];return!(r.breakAfter||r instanceof BlockWidgetView&&r.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(r=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),r),r.length),this.pendingBuffer=0)}addBlockWidget(r){this.flushBuffer(),this.curLine=null,this.content.push(r)}finish(r){this.pendingBuffer&&r<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(r&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(r,a,s){for(;r>0;){if(this.textOff==this.text.length){let{value:u,lineBreak:c,done:p}=this.cursor.next(this.skip);if(this.skip=0,p)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,r--;continue}else this.text=u,this.textOff=0}let o=Math.min(this.text.length-this.textOff,r,512);this.flushBuffer(a.slice(a.length-s)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+o)),a),s),this.atCursorPos=!0,this.textOff+=o,r-=o,s=0}}span(r,a,s,o){this.buildText(a-r,s,o),this.pos=a,this.openStart<0&&(this.openStart=o)}point(r,a,s,o,u,c){if(this.disallowBlockEffectsFor[c]&&s instanceof PointDecoration){if(s.block)throw new RangeError("Block decorations may not be specified via plugins");if(a>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let p=a-r;if(s instanceof PointDecoration)if(s.block)s.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(s.widget||NullWidget.block,p,s));else{let d=WidgetView.create(s.widget||NullWidget.inline,p,p?0:s.startSide),_=this.atCursorPos&&!d.isEditable&&u<=o.length&&(r<a||s.startSide>0),ja=!d.isEditable&&(r<a||u>o.length||s.startSide<=0),Ja=this.getLine();this.pendingBuffer==2&&!_&&!d.isEditable&&(this.pendingBuffer=0),this.flushBuffer(o),_&&(Ja.append(wrapMarks(new WidgetBufferView(1),o),u),u=o.length+Math.max(0,u-o.length)),Ja.append(wrapMarks(d,o),u),this.atCursorPos=ja,this.pendingBuffer=ja?r<a||u>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(s);p&&(this.textOff+p<=this.text.length?this.textOff+=p:(this.skip+=p-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=a),this.openStart<0&&(this.openStart=u)}static build(r,a,s,o,u){let c=new ContentBuilder(r,a,s,u);return c.openEnd=RangeSet.spans(o,a,s,c),c.openStart<0&&(c.openStart=c.openEnd),c.finish(c.openEnd),c}}function wrapMarks(n,r){for(let a of r)n=new MarkView(a,[n],n.length);return n}class NullWidget extends WidgetType{constructor(r){super(),this.tag=r}eq(r){return r.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(r){return r.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(n){let r=[];for(let a=0;a<n.length;a++)r.push(1<<+n[a]);return r}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let n of["()","[]","{}"]){let r=n.charCodeAt(0),a=n.charCodeAt(1);Brackets[r]=a,Brackets[a]=-r}function charType(n){return n<=247?LowTypes[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?ArabicTypes[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(r,a,s){this.from=r,this.to=a,this.level=s}side(r,a){return this.dir==a==r?this.to:this.from}forward(r,a){return r==(this.dir==a)}static find(r,a,s,o){let u=-1;for(let c=0;c<r.length;c++){let p=r[c];if(p.from<=a&&p.to>=a){if(p.level==s)return c;(u<0||(o!=0?o<0?p.from<a:p.to>a:r[u].level>p.level))&&(u=c)}}if(u<0)throw new RangeError("Index out of range");return u}}function isolatesEq(n,r){if(n.length!=r.length)return!1;for(let a=0;a<n.length;a++){let s=n[a],o=r[a];if(s.from!=o.from||s.to!=o.to||s.direction!=o.direction||!isolatesEq(s.inner,o.inner))return!1}return!0}const types=[];function computeCharTypes(n,r,a,s,o){for(let u=0;u<=s.length;u++){let c=u?s[u-1].to:r,p=u<s.length?s[u].from:a,d=u?256:o;for(let _=c,ja=d,Ja=d;_<p;_++){let ec=charType(n.charCodeAt(_));ec==512?ec=ja:ec==8&&Ja==4&&(ec=16),types[_]=ec==4?2:ec,ec&7&&(Ja=ec),ja=ec}for(let _=c,ja=d,Ja=d;_<p;_++){let ec=types[_];if(ec==128)_<p-1&&ja==types[_+1]&&ja&24?ec=types[_]=ja:types[_]=256;else if(ec==64){let tc=_+1;for(;tc<p&&types[tc]==64;)tc++;let rc=_&&ja==8||tc<a&&types[tc]==8?Ja==1?1:8:256;for(let nc=_;nc<tc;nc++)types[nc]=rc;_=tc-1}else ec==8&&Ja==1&&(types[_]=1);ja=ec,ec&7&&(Ja=ec)}}}function processBracketPairs(n,r,a,s,o){let u=o==1?2:1;for(let c=0,p=0,d=0;c<=s.length;c++){let _=c?s[c-1].to:r,ja=c<s.length?s[c].from:a;for(let Ja=_,ec,tc,rc;Ja<ja;Ja++)if(tc=Brackets[ec=n.charCodeAt(Ja)])if(tc<0){for(let nc=p-3;nc>=0;nc-=3)if(BracketStack[nc+1]==-tc){let ic=BracketStack[nc+2],uc=ic&2?o:ic&4?ic&1?u:o:0;uc&&(types[Ja]=types[BracketStack[nc]]=uc),p=nc;break}}else{if(BracketStack.length==189)break;BracketStack[p++]=Ja,BracketStack[p++]=ec,BracketStack[p++]=d}else if((rc=types[Ja])==2||rc==1){let nc=rc==o;d=nc?0:1;for(let ic=p-3;ic>=0;ic-=3){let uc=BracketStack[ic+2];if(uc&2)break;if(nc)BracketStack[ic+2]|=2;else{if(uc&4)break;BracketStack[ic+2]|=4}}}}}function processNeutrals(n,r,a,s){for(let o=0,u=s;o<=a.length;o++){let c=o?a[o-1].to:n,p=o<a.length?a[o].from:r;for(let d=c;d<p;){let _=types[d];if(_==256){let ja=d+1;for(;;)if(ja==p){if(o==a.length)break;ja=a[o++].to,p=o<a.length?a[o].from:r}else if(types[ja]==256)ja++;else break;let Ja=u==1,ec=(ja<r?types[ja]:s)==1,tc=Ja==ec?Ja?1:2:s;for(let rc=ja,nc=o,ic=nc?a[nc-1].to:n;rc>d;)rc==ic&&(rc=a[--nc].from,ic=nc?a[nc-1].to:n),types[--rc]=tc;d=ja}else u=_,d++}}}function emitSpans(n,r,a,s,o,u,c){let p=s%2?2:1;if(s%2==o%2)for(let d=r,_=0;d<a;){let ja=!0,Ja=!1;if(_==u.length||d<u[_].from){let nc=types[d];nc!=p&&(ja=!1,Ja=nc==16)}let ec=!ja&&p==1?[]:null,tc=ja?s:s+1,rc=d;e:for(;;)if(_<u.length&&rc==u[_].from){if(Ja)break e;let nc=u[_];if(!ja)for(let ic=nc.to,uc=_+1;;){if(ic==a)break e;if(uc<u.length&&u[uc].from==ic)ic=u[uc++].to;else{if(types[ic]==p)break e;break}}if(_++,ec)ec.push(nc);else{nc.from>d&&c.push(new BidiSpan(d,nc.from,tc));let ic=nc.direction==LTR!=!(tc%2);computeSectionOrder(n,ic?s+1:s,o,nc.inner,nc.from,nc.to,c),d=nc.to}rc=nc.to}else{if(rc==a||(ja?types[rc]!=p:types[rc]==p))break;rc++}ec?emitSpans(n,d,rc,s+1,o,ec,c):d<rc&&c.push(new BidiSpan(d,rc,tc)),d=rc}else for(let d=a,_=u.length;d>r;){let ja=!0,Ja=!1;if(!_||d>u[_-1].to){let nc=types[d-1];nc!=p&&(ja=!1,Ja=nc==16)}let ec=!ja&&p==1?[]:null,tc=ja?s:s+1,rc=d;e:for(;;)if(_&&rc==u[_-1].to){if(Ja)break e;let nc=u[--_];if(!ja)for(let ic=nc.from,uc=_;;){if(ic==r)break e;if(uc&&u[uc-1].to==ic)ic=u[--uc].from;else{if(types[ic-1]==p)break e;break}}if(ec)ec.push(nc);else{nc.to<d&&c.push(new BidiSpan(nc.to,d,tc));let ic=nc.direction==LTR!=!(tc%2);computeSectionOrder(n,ic?s+1:s,o,nc.inner,nc.from,nc.to,c),d=nc.from}rc=nc.from}else{if(rc==r||(ja?types[rc-1]!=p:types[rc-1]==p))break;rc--}ec?emitSpans(n,rc,d,s+1,o,ec,c):rc<d&&c.push(new BidiSpan(rc,d,tc)),d=rc}}function computeSectionOrder(n,r,a,s,o,u,c){let p=r%2?2:1;computeCharTypes(n,o,u,s,p),processBracketPairs(n,o,u,s,p),processNeutrals(o,u,s,p),emitSpans(n,o,u,r,a,s,c)}function computeOrder(n,r,a){if(!n)return[new BidiSpan(0,0,r==RTL?1:0)];if(r==LTR&&!a.length&&!BidiRE.test(n))return trivialOrder(n.length);if(a.length)for(;n.length>types.length;)types[types.length]=256;let s=[],o=r==LTR?0:1;return computeSectionOrder(n,o,o,a,0,n.length,s),s}function trivialOrder(n){return[new BidiSpan(0,n,0)]}let movedOver="";function moveVisually(n,r,a,s,o){var u;let c=s.head-n.from,p=BidiSpan.find(r,c,(u=s.bidiLevel)!==null&&u!==void 0?u:-1,s.assoc),d=r[p],_=d.side(o,a);if(c==_){let ec=p+=o?1:-1;if(ec<0||ec>=r.length)return null;d=r[p=ec],c=d.side(!o,a),_=d.side(o,a)}let ja=findClusterBreak(n.text,c,d.forward(o,a));(ja<d.from||ja>d.to)&&(ja=_),movedOver=n.text.slice(Math.min(c,ja),Math.max(c,ja));let Ja=p==(o?r.length-1:0)?null:r[p+(o?1:-1)];return Ja&&ja==_&&Ja.level+(o?0:1)<d.level?EditorSelection.cursor(Ja.side(!o,a)+n.from,Ja.forward(o,a)?1:-1,Ja.level):EditorSelection.cursor(ja+n.from,d.forward(o,a)?-1:1,d.level)}function autoDirection(n,r,a){for(let s=r;s<a;s++){let o=charType(n.charCodeAt(s));if(o==1)return LTR;if(o==2||o==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:n=>n.some(r=>r)}),nativeSelectionHidden=Facet.define({combine:n=>n.some(r=>r)}),scrollHandler=Facet.define();class ScrollTarget{constructor(r,a="nearest",s="nearest",o=5,u=5,c=!1){this.range=r,this.y=a,this.x=s,this.yMargin=o,this.xMargin=u,this.isSnapshot=c}map(r){return r.empty?this:new ScrollTarget(this.range.map(r),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(r){return this.range.to<=r.doc.length?this:new ScrollTarget(EditorSelection.cursor(r.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView=StateEffect.define({map:(n,r)=>n.map(r)}),setEditContextFormatting=StateEffect.define();function logException(n,r,a){let s=n.facet(exceptionSink);s.length?s[0](r):window.onerror?window.onerror(String(r),a,void 0,void 0,r):a?console.error(a+":",r):console.error(r)}const editable=Facet.define({combine:n=>n.length?n[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(r,a,s,o,u){this.id=r,this.create=a,this.domEventHandlers=s,this.domEventObservers=o,this.extension=u(this)}static define(r,a){const{eventHandlers:s,eventObservers:o,provide:u,decorations:c}=a||{};return new ViewPlugin(nextPluginID++,r,s,o,p=>{let d=[viewPlugin.of(p)];return c&&d.push(decorations.of(_=>{let ja=_.plugin(p);return ja?c(ja):Decoration.none})),u&&d.push(u(p)),d})}static fromClass(r,a){return ViewPlugin.define(s=>new r(s),a)}}class PluginInstance{constructor(r){this.spec=r,this.mustUpdate=null,this.value=null}update(r){if(this.value){if(this.mustUpdate){let a=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(a)}catch(s){if(logException(a.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(r)}catch(a){logException(r.state,a,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(r){var a;if(!((a=this.value)===null||a===void 0)&&a.destroy)try{this.value.destroy()}catch(s){logException(r.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(n,r){let a=n.state.facet(bidiIsolatedRanges);if(!a.length)return a;let s=a.map(u=>u instanceof Function?u(n):u),o=[];return RangeSet.spans(s,r.from,r.to,{point(){},span(u,c,p,d){let _=u-r.from,ja=c-r.from,Ja=o;for(let ec=p.length-1;ec>=0;ec--,d--){let tc=p[ec].spec.bidiIsolate,rc;if(tc==null&&(tc=autoDirection(r.text,_,ja)),d>0&&Ja.length&&(rc=Ja[Ja.length-1]).to==_&&rc.direction==tc)rc.to=ja,Ja=rc.inner;else{let nc={from:_,to:ja,direction:tc,inner:[]};Ja.push(nc),Ja=nc.inner}}}}),o}const scrollMargins=Facet.define();function getScrollMargins(n){let r=0,a=0,s=0,o=0;for(let u of n.state.facet(scrollMargins)){let c=u(n);c&&(c.left!=null&&(r=Math.max(r,c.left)),c.right!=null&&(a=Math.max(a,c.right)),c.top!=null&&(s=Math.max(s,c.top)),c.bottom!=null&&(o=Math.max(o,c.bottom)))}return{left:r,right:a,top:s,bottom:o}}const styleModule=Facet.define();class ChangedRange{constructor(r,a,s,o){this.fromA=r,this.toA=a,this.fromB=s,this.toB=o}join(r){return new ChangedRange(Math.min(this.fromA,r.fromA),Math.max(this.toA,r.toA),Math.min(this.fromB,r.fromB),Math.max(this.toB,r.toB))}addToSet(r){let a=r.length,s=this;for(;a>0;a--){let o=r[a-1];if(!(o.fromA>s.toA)){if(o.toA<s.fromA)break;s=s.join(o),r.splice(a-1,1)}}return r.splice(a,0,s),r}static extendWithRanges(r,a){if(a.length==0)return r;let s=[];for(let o=0,u=0,c=0,p=0;;o++){let d=o==r.length?null:r[o],_=c-p,ja=d?d.fromB:1e9;for(;u<a.length&&a[u]<ja;){let Ja=a[u],ec=a[u+1],tc=Math.max(p,Ja),rc=Math.min(ja,ec);if(tc<=rc&&new ChangedRange(tc+_,rc+_,tc,rc).addToSet(s),ec>ja)break;u+=2}if(!d)return s;new ChangedRange(d.fromA,d.toA,d.fromB,d.toB).addToSet(s),c=d.toA,p=d.toB}}}class ViewUpdate{constructor(r,a,s){this.view=r,this.state=a,this.transactions=s,this.flags=0,this.startState=r.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let u of s)this.changes=this.changes.compose(u.changes);let o=[];this.changes.iterChangedRanges((u,c,p,d)=>o.push(new ChangedRange(u,c,p,d))),this.changedRanges=o}static create(r,a,s){return new ViewUpdate(r,a,s)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(r=>r.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(r){super(),this.view=r,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(r.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,r.state.doc.length)],0,null)}update(r){var a;let s=r.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:_,toA:ja})=>ja<this.minWidthFrom||_>this.minWidthTo)?(this.minWidthFrom=r.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=r.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(r);let o=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((a=this.domChanged)===null||a===void 0)&&a.newSel?o=this.domChanged.newSel.head:!touchesComposition(r.changes,this.hasComposition)&&!r.selectionSet&&(o=r.state.selection.main.head));let u=o>-1?findCompositionRange(this.view,r.changes,o):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:_,to:ja}=this.hasComposition;s=new ChangedRange(_,ja,r.changes.mapPos(_,-1),r.changes.mapPos(ja,1)).addToSet(s.slice())}this.hasComposition=u?{from:u.range.fromB,to:u.range.toB}:null,(browser.ie||browser.chrome)&&!u&&r&&r.state.doc.lines!=r.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,p=this.updateDeco(),d=findChangedDeco(c,p,r.changes);return s=ChangedRange.extendWithRanges(s,d),!(this.flags&7)&&s.length==0?!1:(this.updateInner(s,r.startState.doc.length,u),r.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(r,a,s){this.view.viewState.mustMeasureContent=!0,this.updateChildren(r,a,s);let{observer:o}=this.view;o.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let c=browser.chrome||browser.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,c),this.flags&=-8,c&&(c.written||o.selectionRange.focusNode!=c.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(c=>c.flags&=-9);let u=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let c of this.children)c instanceof BlockWidgetView&&c.widget instanceof BlockGapWidget&&u.push(c.dom);o.updateGaps(u)}updateChildren(r,a,s){let o=s?s.range.addToSet(r.slice()):r,u=this.childCursor(a);for(let c=o.length-1;;c--){let p=c>=0?o[c]:null;if(!p)break;let{fromA:d,toA:_,fromB:ja,toB:Ja}=p,ec,tc,rc,nc;if(s&&s.range.fromB<Ja&&s.range.toB>ja){let ah=ContentBuilder.build(this.view.state.doc,ja,s.range.fromB,this.decorations,this.dynamicDecorationMap),ih=ContentBuilder.build(this.view.state.doc,s.range.toB,Ja,this.decorations,this.dynamicDecorationMap);tc=ah.breakAtStart,rc=ah.openStart,nc=ih.openEnd;let oh=this.compositionView(s);ih.breakAtStart?oh.breakAfter=1:ih.content.length&&oh.merge(oh.length,oh.length,ih.content[0],!1,ih.openStart,0)&&(oh.breakAfter=ih.content[0].breakAfter,ih.content.shift()),ah.content.length&&oh.merge(0,0,ah.content[ah.content.length-1],!0,0,ah.openEnd)&&ah.content.pop(),ec=ah.content.concat(oh).concat(ih.content)}else({content:ec,breakAtStart:tc,openStart:rc,openEnd:nc}=ContentBuilder.build(this.view.state.doc,ja,Ja,this.decorations,this.dynamicDecorationMap));let{i:ic,off:uc}=u.findPos(_,1),{i:eh,off:rh}=u.findPos(d,-1);replaceRange(this,eh,rh,ic,uc,ec,tc,rc,nc)}s&&this.fixCompositionDOM(s)}updateEditContextFormatting(r){this.editContextFormatting=this.editContextFormatting.map(r.changes);for(let a of r.transactions)for(let s of a.effects)s.is(setEditContextFormatting)&&(this.editContextFormatting=s.value)}compositionView(r){let a=new TextView(r.text.nodeValue);a.flags|=8;for(let{deco:o}of r.marks)a=new MarkView(o,[a],a.length);let s=new LineView;return s.append(a,0),s}fixCompositionDOM(r){let a=(u,c)=>{c.flags|=8|(c.children.some(d=>d.flags&7)?1:0),this.markedForComposition.add(c);let p=ContentView.get(u);p&&p!=c&&(p.dom=null),c.setDOM(u)},s=this.childPos(r.range.fromB,1),o=this.children[s.i];a(r.line,o);for(let u=r.marks.length-1;u>=-1;u--)s=o.childPos(s.off,1),o=o.children[s.i],a(u>=0?r.marks[u].node:r.text,o)}updateSelection(r=!1,a=!1){(r||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let s=this.view.root.activeElement,o=s==this.dom,u=!o&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(s&&this.dom.contains(s));if(!(o||a||u))return;let c=this.forceSelection;this.forceSelection=!1;let p=this.view.state.selection.main,d=this.moveToLine(this.domAtPos(p.anchor)),_=p.empty?d:this.moveToLine(this.domAtPos(p.head));if(browser.gecko&&p.empty&&!this.hasComposition&&betweenUneditable(d)){let Ja=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(Ja,d.node.childNodes[d.offset]||null)),d=_=new DOMPos(Ja,0),c=!0}let ja=this.view.observer.selectionRange;(c||!ja.focusNode||(!isEquivalentPosition(d.node,d.offset,ja.anchorNode,ja.anchorOffset)||!isEquivalentPosition(_.node,_.offset,ja.focusNode,ja.focusOffset))&&!this.suppressWidgetCursorChange(ja,p))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(ja.focusNode)&&inUneditable(ja.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let Ja=getSelection(this.view.root);if(Ja)if(p.empty){if(browser.gecko){let ec=nextToUneditable(d.node,d.offset);if(ec&&ec!=3){let tc=(ec==1?textNodeBefore:textNodeAfter)(d.node,d.offset);tc&&(d=new DOMPos(tc.node,tc.offset))}}Ja.collapse(d.node,d.offset),p.bidiLevel!=null&&Ja.caretBidiLevel!==void 0&&(Ja.caretBidiLevel=p.bidiLevel)}else if(Ja.extend){Ja.collapse(d.node,d.offset);try{Ja.extend(_.node,_.offset)}catch{}}else{let ec=document.createRange();p.anchor>p.head&&([d,_]=[_,d]),ec.setEnd(_.node,_.offset),ec.setStart(d.node,d.offset),Ja.removeAllRanges(),Ja.addRange(ec)}u&&this.view.root.activeElement==this.dom&&(this.dom.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(d,_)),this.impreciseAnchor=d.precise?null:new DOMPos(ja.anchorNode,ja.anchorOffset),this.impreciseHead=_.precise?null:new DOMPos(ja.focusNode,ja.focusOffset)}suppressWidgetCursorChange(r,a){return this.hasComposition&&a.empty&&isEquivalentPosition(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)&&this.posFromDOM(r.focusNode,r.focusOffset)==a.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:r}=this,a=r.state.selection.main,s=getSelection(r.root),{anchorNode:o,anchorOffset:u}=r.observer.selectionRange;if(!s||!a.empty||!a.assoc||!s.modify)return;let c=LineView.find(this,a.head);if(!c)return;let p=c.posAtStart;if(a.head==p||a.head==p+c.length)return;let d=this.coordsAt(a.head,-1),_=this.coordsAt(a.head,1);if(!d||!_||d.bottom>_.top)return;let ja=this.domAtPos(a.head+a.assoc);s.collapse(ja.node,ja.offset),s.modify("move",a.assoc<0?"forward":"backward","lineboundary"),r.observer.readSelectionRange();let Ja=r.observer.selectionRange;r.docView.posFromDOM(Ja.anchorNode,Ja.anchorOffset)!=a.from&&s.collapse(o,u)}moveToLine(r){let a=this.dom,s;if(r.node!=a)return r;for(let o=r.offset;!s&&o<a.childNodes.length;o++){let u=ContentView.get(a.childNodes[o]);u instanceof LineView&&(s=u.domAtPos(0))}for(let o=r.offset-1;!s&&o>=0;o--){let u=ContentView.get(a.childNodes[o]);u instanceof LineView&&(s=u.domAtPos(u.length))}return s?new DOMPos(s.node,s.offset,!0):r}nearest(r){for(let a=r;a;){let s=ContentView.get(a);if(s&&s.rootView==this)return s;a=a.parentNode}return null}posFromDOM(r,a){let s=this.nearest(r);if(!s)throw new RangeError("Trying to find position for a DOM position outside of the document");return s.localPosFromDOM(r,a)+s.posAtStart}domAtPos(r){let{i:a,off:s}=this.childCursor().findPos(r,-1);for(;a<this.children.length-1;){let o=this.children[a];if(s<o.length||o instanceof LineView)break;a++,s=0}return this.children[a].domAtPos(s)}coordsAt(r,a){let s=null,o=0;for(let u=this.length,c=this.children.length-1;c>=0;c--){let p=this.children[c],d=u-p.breakAfter,_=d-p.length;if(d<r)break;if(_<=r&&(_<r||p.covers(-1))&&(d>r||p.covers(1))&&(!s||p instanceof LineView&&!(s instanceof LineView&&a>=0)))s=p,o=_;else if(s&&_==r&&d==r&&p instanceof BlockWidgetView&&Math.abs(a)<2){if(p.deco.startSide<0)break;c&&(s=null)}u=_}return s?s.coordsAt(r-o,a):null}coordsForChar(r){let{i:a,off:s}=this.childPos(r,1),o=this.children[a];if(!(o instanceof LineView))return null;for(;o.children.length;){let{i:p,off:d}=o.childPos(s,1);for(;;p++){if(p==o.children.length)return null;if((o=o.children[p]).length)break}s=d}if(!(o instanceof TextView))return null;let u=findClusterBreak(o.text,s);if(u==s)return null;let c=textRange(o.dom,s,u).getClientRects();for(let p=0;p<c.length;p++){let d=c[p];if(p==c.length-1||d.top<d.bottom&&d.left<d.right)return d}return null}measureVisibleLineHeights(r){let a=[],{from:s,to:o}=r,u=this.view.contentDOM.clientWidth,c=u>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,p=-1,d=this.view.textDirection==Direction.LTR;for(let _=0,ja=0;ja<this.children.length;ja++){let Ja=this.children[ja],ec=_+Ja.length;if(ec>o)break;if(_>=s){let tc=Ja.dom.getBoundingClientRect();if(a.push(tc.height),c){let rc=Ja.dom.lastChild,nc=rc?clientRectsFor(rc):[];if(nc.length){let ic=nc[nc.length-1],uc=d?ic.right-tc.left:tc.right-ic.left;uc>p&&(p=uc,this.minWidth=u,this.minWidthFrom=_,this.minWidthTo=ec)}}}_=ec+Ja.breakAfter}return a}textDirectionAt(r){let{i:a}=this.childPos(r,1);return getComputedStyle(this.children[a].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let u of this.children)if(u instanceof LineView){let c=u.measureTextSize();if(c)return c}let r=document.createElement("div"),a,s,o;return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(r);let u=clientRectsFor(r.firstChild)[0];a=r.getBoundingClientRect().height,s=u?u.width/27:7,o=u?u.height:a,r.remove()}),{lineHeight:a,charWidth:s,textHeight:o}}childCursor(r=this.length){let a=this.children.length;return a&&(r-=this.children[--a].length),new ChildCursor(this.children,r,a)}computeBlockGapDeco(){let r=[],a=this.view.viewState;for(let s=0,o=0;;o++){let u=o==a.viewports.length?null:a.viewports[o],c=u?u.from-1:this.length;if(c>s){let p=(a.lineBlockAt(c).bottom-a.lineBlockAt(s).top)/this.view.scaleY;r.push(Decoration.replace({widget:new BlockGapWidget(p),block:!0,inclusive:!0,isBlockGap:!0}).range(s,c))}if(!u)break;s=u.to+1}return Decoration.set(r)}updateDeco(){let r=1,a=this.view.state.facet(decorations).map(u=>(this.dynamicDecorationMap[r++]=typeof u=="function")?u(this.view):u),s=!1,o=this.view.state.facet(outerDecorations).map((u,c)=>{let p=typeof u=="function";return p&&(s=!0),p?u(this.view):u});for(o.length&&(this.dynamicDecorationMap[r++]=s,a.push(RangeSet.join(o))),this.decorations=[this.editContextFormatting,...a,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];r<this.decorations.length;)this.dynamicDecorationMap[r++]=!1;return this.decorations}scrollIntoView(r){if(r.isSnapshot){let _=this.view.viewState.lineBlockAt(r.range.head);this.view.scrollDOM.scrollTop=_.top-r.yMargin,this.view.scrollDOM.scrollLeft=r.xMargin;return}for(let _ of this.view.state.facet(scrollHandler))try{if(_(this.view,r.range,r))return!0}catch(ja){logException(this.view.state,ja,"scroll handler")}let{range:a}=r,s=this.coordsAt(a.head,a.empty?a.assoc:a.head>a.anchor?-1:1),o;if(!s)return;!a.empty&&(o=this.coordsAt(a.anchor,a.anchor>a.head?-1:1))&&(s={left:Math.min(s.left,o.left),top:Math.min(s.top,o.top),right:Math.max(s.right,o.right),bottom:Math.max(s.bottom,o.bottom)});let u=getScrollMargins(this.view),c={left:s.left-u.left,top:s.top-u.top,right:s.right+u.right,bottom:s.bottom+u.bottom},{offsetWidth:p,offsetHeight:d}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,c,a.head<a.anchor?-1:1,r.x,r.y,Math.max(Math.min(r.xMargin,p),-p),Math.max(Math.min(r.yMargin,d),-d),this.view.textDirection==Direction.LTR)}}function betweenUneditable(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(r){super(),this.height=r}toDOM(){let r=document.createElement("div");return r.className="cm-gap",this.updateDOM(r),r}eq(r){return r.height==this.height}updateDOM(r){return r.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function findCompositionNode(n,r){let a=n.observer.selectionRange;if(!a.focusNode)return null;let s=textNodeBefore(a.focusNode,a.focusOffset),o=textNodeAfter(a.focusNode,a.focusOffset),u=s||o;if(o&&s&&o.node!=s.node){let p=ContentView.get(o.node);if(!p||p instanceof TextView&&p.text!=o.node.nodeValue)u=o;else if(n.docView.lastCompositionAfterCursor){let d=ContentView.get(s.node);!d||d instanceof TextView&&d.text!=s.node.nodeValue||(u=o)}}if(n.docView.lastCompositionAfterCursor=u!=s,!u)return null;let c=r-u.offset;return{from:c,to:c+u.node.nodeValue.length,node:u.node}}function findCompositionRange(n,r,a){let s=findCompositionNode(n,a);if(!s)return null;let{node:o,from:u,to:c}=s,p=o.nodeValue;if(/[\n\r]/.test(p)||n.state.doc.sliceString(s.from,s.to)!=p)return null;let d=r.invertedDesc,_=new ChangedRange(d.mapPos(u),d.mapPos(c),u,c),ja=[];for(let Ja=o.parentNode;;Ja=Ja.parentNode){let ec=ContentView.get(Ja);if(ec instanceof MarkView)ja.push({node:Ja,deco:ec.mark});else{if(ec instanceof LineView||Ja.nodeName=="DIV"&&Ja.parentNode==n.contentDOM)return{range:_,text:o,marks:ja,line:Ja};if(Ja!=n.contentDOM)ja.push({node:Ja,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(Ja),tagName:Ja.tagName.toLowerCase()})});else return null}}}function nextToUneditable(n,r){return n.nodeType!=1?0:(r&&n.childNodes[r-1].contentEditable=="false"?1:0)|(r<n.childNodes.length&&n.childNodes[r].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(r,a){addRange(r,a,this.changes)}comparePoint(r,a){addRange(r,a,this.changes)}};function findChangedDeco(n,r,a){let s=new DecorationComparator$1;return RangeSet.compare(n,r,a,s),s.changes}function inUneditable(n,r){for(let a=n;a&&a!=r;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return!0;return!1}function touchesComposition(n,r){let a=!1;return r&&n.iterChangedRanges((s,o)=>{s<r.to&&o>r.from&&(a=!0)}),a}function groupAt(n,r,a=1){let s=n.charCategorizer(r),o=n.doc.lineAt(r),u=r-o.from;if(o.length==0)return EditorSelection.cursor(r);u==0?a=1:u==o.length&&(a=-1);let c=u,p=u;a<0?c=findClusterBreak(o.text,u,!1):p=findClusterBreak(o.text,u);let d=s(o.text.slice(c,p));for(;c>0;){let _=findClusterBreak(o.text,c,!1);if(s(o.text.slice(_,c))!=d)break;c=_}for(;p<o.length;){let _=findClusterBreak(o.text,p);if(s(o.text.slice(p,_))!=d)break;p=_}return EditorSelection.range(c+o.from,p+o.from)}function getdx(n,r){return r.left>n?r.left-n:Math.max(0,n-r.right)}function getdy(n,r){return r.top>n?r.top-n:Math.max(0,n-r.bottom)}function yOverlap(n,r){return n.top<r.bottom-1&&n.bottom>r.top+1}function upTop(n,r){return r<n.top?{top:r,left:n.left,right:n.right,bottom:n.bottom}:n}function upBot(n,r){return r>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:r}:n}function domPosAtCoords(n,r,a){let s,o,u,c,p=!1,d,_,ja,Ja;for(let rc=n.firstChild;rc;rc=rc.nextSibling){let nc=clientRectsFor(rc);for(let ic=0;ic<nc.length;ic++){let uc=nc[ic];o&&yOverlap(o,uc)&&(uc=upTop(upBot(uc,o.bottom),o.top));let eh=getdx(r,uc),rh=getdy(a,uc);if(eh==0&&rh==0)return rc.nodeType==3?domPosInText(rc,r,a):domPosAtCoords(rc,r,a);if(!s||c>rh||c==rh&&u>eh){s=rc,o=uc,u=eh,c=rh;let ah=rh?a<uc.top?-1:1:eh?r<uc.left?-1:1:0;p=!ah||(ah>0?ic<nc.length-1:ic>0)}eh==0?a>uc.bottom&&(!ja||ja.bottom<uc.bottom)?(d=rc,ja=uc):a<uc.top&&(!Ja||Ja.top>uc.top)&&(_=rc,Ja=uc):ja&&yOverlap(ja,uc)?ja=upBot(ja,uc.bottom):Ja&&yOverlap(Ja,uc)&&(Ja=upTop(Ja,uc.top))}}if(ja&&ja.bottom>=a?(s=d,o=ja):Ja&&Ja.top<=a&&(s=_,o=Ja),!s)return{node:n,offset:0};let ec=Math.max(o.left,Math.min(o.right,r));if(s.nodeType==3)return domPosInText(s,ec,a);if(p&&s.contentEditable!="false")return domPosAtCoords(s,ec,a);let tc=Array.prototype.indexOf.call(n.childNodes,s)+(r>=(o.left+o.right)/2?1:0);return{node:n,offset:tc}}function domPosInText(n,r,a){let s=n.nodeValue.length,o=-1,u=1e9,c=0;for(let p=0;p<s;p++){let d=textRange(n,p,p+1).getClientRects();for(let _=0;_<d.length;_++){let ja=d[_];if(ja.top==ja.bottom)continue;c||(c=r-ja.left);let Ja=(ja.top>a?ja.top-a:a-ja.bottom)-1;if(ja.left-1<=r&&ja.right+1>=r&&Ja<u){let ec=r>=(ja.left+ja.right)/2,tc=ec;if((browser.chrome||browser.gecko)&&textRange(n,p).getBoundingClientRect().left==ja.right&&(tc=!ec),Ja<=0)return{node:n,offset:p+(tc?1:0)};o=p+(tc?1:0),u=Ja}}}return{node:n,offset:o>-1?o:c>0?n.nodeValue.length:0}}function posAtCoords(n,r,a,s=-1){var o,u;let c=n.contentDOM.getBoundingClientRect(),p=c.top+n.viewState.paddingTop,d,{docHeight:_}=n.viewState,{x:ja,y:Ja}=r,ec=Ja-p;if(ec<0)return 0;if(ec>_)return n.state.doc.length;for(let ah=n.viewState.heightOracle.textHeight/2,ih=!1;d=n.elementAtHeight(ec),d.type!=BlockType.Text;)for(;ec=s>0?d.bottom+ah:d.top-ah,!(ec>=0&&ec<=_);){if(ih)return a?null:0;ih=!0,s=-s}Ja=p+ec;let tc=d.from;if(tc<n.viewport.from)return n.viewport.from==0?0:a?null:posAtCoordsImprecise(n,c,d,ja,Ja);if(tc>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:a?null:posAtCoordsImprecise(n,c,d,ja,Ja);let rc=n.dom.ownerDocument,nc=n.root.elementFromPoint?n.root:rc,ic=nc.elementFromPoint(ja,Ja);ic&&!n.contentDOM.contains(ic)&&(ic=null),ic||(ja=Math.max(c.left+1,Math.min(c.right-1,ja)),ic=nc.elementFromPoint(ja,Ja),ic&&!n.contentDOM.contains(ic)&&(ic=null));let uc,eh=-1;if(ic&&((o=n.docView.nearest(ic))===null||o===void 0?void 0:o.isEditable)!=!1){if(rc.caretPositionFromPoint){let ah=rc.caretPositionFromPoint(ja,Ja);ah&&({offsetNode:uc,offset:eh}=ah)}else if(rc.caretRangeFromPoint){let ah=rc.caretRangeFromPoint(ja,Ja);ah&&({startContainer:uc,startOffset:eh}=ah,(!n.contentDOM.contains(uc)||browser.safari&&isSuspiciousSafariCaretResult(uc,eh,ja)||browser.chrome&&isSuspiciousChromeCaretResult(uc,eh,ja))&&(uc=void 0))}}if(!uc||!n.docView.dom.contains(uc)){let ah=LineView.find(n.docView,tc);if(!ah)return ec>d.top+d.height/2?d.to:d.from;({node:uc,offset:eh}=domPosAtCoords(ah.dom,ja,Ja))}let rh=n.docView.nearest(uc);if(!rh)return null;if(rh.isWidget&&((u=rh.dom)===null||u===void 0?void 0:u.nodeType)==1){let ah=rh.dom.getBoundingClientRect();return r.y<ah.top||r.y<=ah.bottom&&r.x<=(ah.left+ah.right)/2?rh.posAtStart:rh.posAtEnd}else return rh.localPosFromDOM(uc,eh)+rh.posAtStart}function posAtCoordsImprecise(n,r,a,s,o){let u=Math.round((s-r.left)*n.defaultCharacterWidth);if(n.lineWrapping&&a.height>n.defaultLineHeight*1.5){let p=n.viewState.heightOracle.textHeight,d=Math.floor((o-a.top-(n.defaultLineHeight-p)*.5)/p);u+=d*n.viewState.heightOracle.lineLength}let c=n.state.sliceDoc(a.from,a.to);return a.from+findColumn(c,u,n.state.tabSize)}function isSuspiciousSafariCaretResult(n,r,a){let s;if(n.nodeType!=3||r!=(s=n.nodeValue.length))return!1;for(let o=n.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return textRange(n,s-1,s).getBoundingClientRect().left>a}function isSuspiciousChromeCaretResult(n,r,a){if(r!=0)return!1;for(let o=n;;){let u=o.parentNode;if(!u||u.nodeType!=1||u.firstChild!=o)return!1;if(u.classList.contains("cm-line"))break;o=u}let s=n.nodeType==1?n.getBoundingClientRect():textRange(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return a-s.left>5}function blockAt(n,r){let a=n.lineBlockAt(r);if(Array.isArray(a.type)){for(let s of a.type)if(s.to>r||s.to==r&&(s.to==a.to||s.type==BlockType.Text))return s}return a}function moveToLineBoundary(n,r,a,s){let o=blockAt(n,r.head),u=!s||o.type!=BlockType.Text||!(n.lineWrapping||o.widgetLineBreaks)?null:n.coordsAtPos(r.assoc<0&&r.head>o.from?r.head-1:r.head);if(u){let c=n.dom.getBoundingClientRect(),p=n.textDirectionAt(o.from),d=n.posAtCoords({x:a==(p==Direction.LTR)?c.right-1:c.left+1,y:(u.top+u.bottom)/2});if(d!=null)return EditorSelection.cursor(d,a?-1:1)}return EditorSelection.cursor(a?o.to:o.from,a?-1:1)}function moveByChar(n,r,a,s){let o=n.state.doc.lineAt(r.head),u=n.bidiSpans(o),c=n.textDirectionAt(o.from);for(let p=r,d=null;;){let _=moveVisually(o,u,c,p,a),ja=movedOver;if(!_){if(o.number==(a?n.state.doc.lines:1))return p;ja=`
`,o=n.state.doc.line(o.number+(a?1:-1)),u=n.bidiSpans(o),_=n.visualLineSide(o,!a)}if(d){if(!d(ja))return p}else{if(!s)return _;d=s(ja)}p=_}}function byGroup(n,r,a){let s=n.state.charCategorizer(r),o=s(a);return u=>{let c=s(u);return o==CharCategory.Space&&(o=c),o==c}}function moveVertically(n,r,a,s){let o=r.head,u=a?1:-1;if(o==(a?n.state.doc.length:0))return EditorSelection.cursor(o,r.assoc);let c=r.goalColumn,p,d=n.contentDOM.getBoundingClientRect(),_=n.coordsAtPos(o,r.assoc||-1),ja=n.documentTop;if(_)c==null&&(c=_.left-d.left),p=u<0?_.top:_.bottom;else{let tc=n.viewState.lineBlockAt(o);c==null&&(c=Math.min(d.right-d.left,n.defaultCharacterWidth*(o-tc.from))),p=(u<0?tc.top:tc.bottom)+ja}let Ja=d.left+c,ec=s??n.viewState.heightOracle.textHeight>>1;for(let tc=0;;tc+=10){let rc=p+(ec+tc)*u,nc=posAtCoords(n,{x:Ja,y:rc},!1,u);if(rc<d.top||rc>d.bottom||(u<0?nc<o:nc>o)){let ic=n.docView.coordsForChar(nc),uc=!ic||rc<ic.top?-1:1;return EditorSelection.cursor(nc,uc,void 0,c)}}}function skipAtomicRanges(n,r,a){for(;;){let s=0;for(let o of n)o.between(r-1,r+1,(u,c,p)=>{if(r>u&&r<c){let d=s||a||(r-u<c-r?-1:1);r=d<0?u:c,s=d}});if(!s)return r}}function skipAtoms(n,r,a){let s=skipAtomicRanges(n.state.facet(atomicRanges).map(o=>o(n)),a.from,r.head>a.from?-1:1);return s==a.from?a:EditorSelection.cursor(s,s<a.from?1:-1)}class InputState{setSelectionOrigin(r){this.lastSelectionOrigin=r,this.lastSelectionTime=Date.now()}constructor(r){this.view=r,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=r.hasFocus,browser.safari&&r.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(r.contentDOM.ownerDocument)}handleEvent(r){!eventBelongsToEditor(this.view,r)||this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(r)||this.runHandlers(r.type,r)}runHandlers(r,a){let s=this.handlers[r];if(s){for(let o of s.observers)o(this.view,a);for(let o of s.handlers){if(a.defaultPrevented)break;if(o(this.view,a)){a.preventDefault();break}}}}ensureHandlers(r){let a=computeHandlers(r),s=this.handlers,o=this.view.contentDOM;for(let u in a)if(u!="scroll"){let c=!a[u].handlers.length,p=s[u];p&&c!=!p.handlers.length&&(o.removeEventListener(u,this.handleEvent),p=null),p||o.addEventListener(u,this.handleEvent,{passive:c})}for(let u in s)u!="scroll"&&!a[u]&&o.removeEventListener(u,this.handleEvent);this.handlers=a}keydown(r){if(this.lastKeyCode=r.keyCode,this.lastKeyTime=Date.now(),r.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&r.keyCode!=27&&modifierCodes.indexOf(r.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!r.synthetic&&(r.keyCode==13||r.keyCode==8))return this.view.observer.delayAndroidKey(r.key,r.keyCode),!0;let a;return browser.ios&&!r.synthetic&&!r.altKey&&!r.metaKey&&((a=PendingKeys.find(s=>s.keyCode==r.keyCode))&&!r.ctrlKey||EmacsyPendingKeys.indexOf(r.key)>-1&&r.ctrlKey&&!r.shiftKey)?(this.pendingIOSKey=a||r,setTimeout(()=>this.flushIOSKey(),250),!0):(r.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(r){let a=this.pendingIOSKey;return!a||a.key=="Enter"&&r&&r.from<r.to&&/^\S+$/.test(r.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,a.key,a.keyCode,a instanceof KeyboardEvent?a:void 0))}ignoreDuringComposition(r){return/^key/.test(r.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(r){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=r}update(r){this.view.observer.update(r),this.mouseSelection&&this.mouseSelection.update(r),this.draggedContent&&r.docChanged&&(this.draggedContent=this.draggedContent.map(r.changes)),r.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(n,r){return(a,s)=>{try{return r.call(n,s,a)}catch(o){logException(a.state,o)}}}function computeHandlers(n){let r=Object.create(null);function a(s){return r[s]||(r[s]={observers:[],handlers:[]})}for(let s of n){let o=s.spec;if(o&&o.domEventHandlers)for(let u in o.domEventHandlers){let c=o.domEventHandlers[u];c&&a(u).handlers.push(bindHandler(s.value,c))}if(o&&o.domEventObservers)for(let u in o.domEventObservers){let c=o.domEventObservers[u];c&&a(u).observers.push(bindHandler(s.value,c))}}for(let s in handlers)a(s).handlers.push(handlers[s]);for(let s in observers)a(s).observers.push(observers[s]);return r}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(n){return Math.max(0,n)*.7+8}function dist$1(n,r){return Math.max(Math.abs(n.clientX-r.clientX),Math.abs(n.clientY-r.clientY))}class MouseSelection{constructor(r,a,s,o){this.view=r,this.startEvent=a,this.style=s,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=a,this.scrollParents=scrollableParents(r.contentDOM),this.atoms=r.state.facet(atomicRanges).map(c=>c(r));let u=r.contentDOM.ownerDocument;u.addEventListener("mousemove",this.move=this.move.bind(this)),u.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=a.shiftKey,this.multiple=r.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(r,a),this.dragging=isInPrimarySelection(r,a)&&getClickType(a)==1?null:!1}start(r){this.dragging===!1&&this.select(r)}move(r){if(r.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist$1(this.startEvent,r)<10)return;this.select(this.lastEvent=r);let a=0,s=0,o=0,u=0,c=this.view.win.innerWidth,p=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:c}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:u,bottom:p}=this.scrollParents.y.getBoundingClientRect());let d=getScrollMargins(this.view);r.clientX-d.left<=o+dragScrollMargin?a=-dragScrollSpeed(o-r.clientX):r.clientX+d.right>=c-dragScrollMargin&&(a=dragScrollSpeed(r.clientX-c)),r.clientY-d.top<=u+dragScrollMargin?s=-dragScrollSpeed(u-r.clientY):r.clientY+d.bottom>=p-dragScrollMargin&&(s=dragScrollSpeed(r.clientY-p)),this.setScrollSpeed(a,s)}up(r){this.dragging==null&&this.select(this.lastEvent),this.dragging||r.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let r=this.view.contentDOM.ownerDocument;r.removeEventListener("mousemove",this.move),r.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(r,a){this.scrollSpeed={x:r,y:a},r||a?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:r,y:a}=this.scrollSpeed;r&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=r,r=0),a&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=a,a=0),(r||a)&&this.view.win.scrollBy(r,a),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(r){let a=null;for(let s=0;s<r.ranges.length;s++){let o=r.ranges[s],u=null;if(o.empty){let c=skipAtomicRanges(this.atoms,o.from,0);c!=o.from&&(u=EditorSelection.cursor(c,-1))}else{let c=skipAtomicRanges(this.atoms,o.from,-1),p=skipAtomicRanges(this.atoms,o.to,1);(c!=o.from||p!=o.to)&&(u=EditorSelection.range(o.from==o.anchor?c:p,o.from==o.head?c:p))}u&&(a||(a=r.ranges.slice()),a[s]=u)}return a?EditorSelection.create(a,r.mainIndex):r}select(r){let{view:a}=this,s=this.skipAtoms(this.style.get(r,this.extend,this.multiple));(this.mustSelect||!s.eq(a.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(r){r.transactions.some(a=>a.isUserEvent("input.type"))?this.destroy():this.style.update(r)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(n,r){let a=n.state.facet(clickAddsSelectionRange);return a.length?a[0](r):browser.mac?r.metaKey:r.ctrlKey}function dragMovesSelection(n,r){let a=n.state.facet(dragMovesSelection$1);return a.length?a[0](r):browser.mac?!r.altKey:!r.ctrlKey}function isInPrimarySelection(n,r){let{main:a}=n.state.selection;if(a.empty)return!1;let s=getSelection(n.root);if(!s||s.rangeCount==0)return!0;let o=s.getRangeAt(0).getClientRects();for(let u=0;u<o.length;u++){let c=o[u];if(c.left<=r.clientX&&c.right>=r.clientX&&c.top<=r.clientY&&c.bottom>=r.clientY)return!0}return!1}function eventBelongsToEditor(n,r){if(!r.bubbles)return!0;if(r.defaultPrevented)return!1;for(let a=r.target,s;a!=n.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(s=ContentView.get(a))&&s.ignoreEvent(r))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(n){let r=n.dom.parentNode;if(!r)return;let a=r.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(()=>{n.focus(),a.remove(),doPaste(n,a.value)},50)}function doPaste(n,r){let{state:a}=n,s,o=1,u=a.toText(r),c=u.lines==a.selection.ranges.length;if(lastLinewiseCopy!=null&&a.selection.ranges.every(d=>d.empty)&&lastLinewiseCopy==u.toString()){let d=-1;s=a.changeByRange(_=>{let ja=a.doc.lineAt(_.from);if(ja.from==d)return{range:_};d=ja.from;let Ja=a.toText((c?u.line(o++).text:r)+a.lineBreak);return{changes:{from:ja.from,insert:Ja},range:EditorSelection.cursor(_.from+Ja.length)}})}else c?s=a.changeByRange(d=>{let _=u.line(o++);return{changes:{from:d.from,to:d.to,insert:_.text},range:EditorSelection.cursor(d.from+_.length)}}):s=a.replaceSelection(u);n.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};handlers.keydown=(n,r)=>(n.inputState.setSelectionOrigin("select"),r.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(n,r)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(n,r)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let a=null;for(let s of n.state.facet(mouseSelectionStyle))if(a=s(n,r),a)break;if(!a&&r.button==0&&(a=basicMouseSelection(n,r)),a){let s=!n.hasFocus;n.inputState.startMouseSelection(new MouseSelection(n,r,a,s)),s&&n.observer.ignore(()=>{focusPreventScroll(n.contentDOM);let u=n.root.activeElement;u&&!u.contains(n.contentDOM)&&u.blur()});let o=n.inputState.mouseSelection;if(o)return o.start(r),o.dragging===!1}return!1};function rangeForClick(n,r,a,s){if(s==1)return EditorSelection.cursor(r,a);if(s==2)return groupAt(n.state,r,a);{let o=LineView.find(n.docView,r),u=n.state.doc.lineAt(o?o.posAtEnd:r),c=o?o.posAtStart:u.from,p=o?o.posAtEnd:u.to;return p<n.state.doc.length&&p==u.to&&p++,EditorSelection.range(c,p)}}let inside=(n,r,a)=>r>=a.top&&r<=a.bottom&&n>=a.left&&n<=a.right;function findPositionSide(n,r,a,s){let o=LineView.find(n.docView,r);if(!o)return 1;let u=r-o.posAtStart;if(u==0)return 1;if(u==o.length)return-1;let c=o.coordsAt(u,-1);if(c&&inside(a,s,c))return-1;let p=o.coordsAt(u,1);return p&&inside(a,s,p)?1:c&&c.bottom>=s?-1:1}function queryPos(n,r){let a=n.posAtCoords({x:r.clientX,y:r.clientY},!1);return{pos:a,bias:findPositionSide(n,a,r.clientX,r.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(n){if(!BadMouseDetail)return n.detail;let r=lastMouseDown,a=lastMouseDownTime;return lastMouseDown=n,lastMouseDownTime=Date.now(),lastMouseDownCount=!r||a>Date.now()-400&&Math.abs(r.clientX-n.clientX)<2&&Math.abs(r.clientY-n.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(n,r){let a=queryPos(n,r),s=getClickType(r),o=n.state.selection;return{update(u){u.docChanged&&(a.pos=u.changes.mapPos(a.pos),o=o.map(u.changes))},get(u,c,p){let d=queryPos(n,u),_,ja=rangeForClick(n,d.pos,d.bias,s);if(a.pos!=d.pos&&!c){let Ja=rangeForClick(n,a.pos,a.bias,s),ec=Math.min(Ja.from,ja.from),tc=Math.max(Ja.to,ja.to);ja=ec<ja.from?EditorSelection.range(ec,tc):EditorSelection.range(tc,ec)}return c?o.replaceRange(o.main.extend(ja.from,ja.to)):p&&s==1&&o.ranges.length>1&&(_=removeRangeAround(o,d.pos))?_:p?o.addRange(ja):EditorSelection.create([ja])}}}function removeRangeAround(n,r){for(let a=0;a<n.ranges.length;a++){let{from:s,to:o}=n.ranges[a];if(s<=r&&o>=r)return EditorSelection.create(n.ranges.slice(0,a).concat(n.ranges.slice(a+1)),n.mainIndex==a?0:n.mainIndex-(n.mainIndex>a?1:0))}return null}handlers.dragstart=(n,r)=>{let{selection:{main:a}}=n.state;if(r.target.draggable){let o=n.docView.nearest(r.target);if(o&&o.isWidget){let u=o.posAtStart,c=u+o.length;(u>=a.to||c<=a.from)&&(a=EditorSelection.range(u,c))}}let{inputState:s}=n;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=a,r.dataTransfer&&(r.dataTransfer.setData("Text",n.state.sliceDoc(a.from,a.to)),r.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=n=>(n.inputState.draggedContent=null,!1);function dropText(n,r,a,s){if(!a)return;let o=n.posAtCoords({x:r.clientX,y:r.clientY},!1),{draggedContent:u}=n.inputState,c=s&&u&&dragMovesSelection(n,r)?{from:u.from,to:u.to}:null,p={from:o,insert:a},d=n.state.changes(c?[c,p]:p);n.focus(),n.dispatch({changes:d,selection:{anchor:d.mapPos(o,-1),head:d.mapPos(o,1)},userEvent:c?"move.drop":"input.drop"}),n.inputState.draggedContent=null}handlers.drop=(n,r)=>{if(!r.dataTransfer)return!1;if(n.state.readOnly)return!0;let a=r.dataTransfer.files;if(a&&a.length){let s=Array(a.length),o=0,u=()=>{++o==a.length&&dropText(n,r,s.filter(c=>c!=null).join(n.state.lineBreak),!1)};for(let c=0;c<a.length;c++){let p=new FileReader;p.onerror=u,p.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(p.result)||(s[c]=p.result),u()},p.readAsText(a[c])}return!0}else{let s=r.dataTransfer.getData("Text");if(s)return dropText(n,r,s,!0),!0}return!1};handlers.paste=(n,r)=>{if(n.state.readOnly)return!0;n.observer.flush();let a=brokenClipboardAPI?null:r.clipboardData;return a?(doPaste(n,a.getData("text/plain")||a.getData("text/uri-list")),!0):(capturePaste(n),!1)};function captureCopy(n,r){let a=n.dom.parentNode;if(!a)return;let s=a.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=r,s.focus(),s.selectionEnd=r.length,s.selectionStart=0,setTimeout(()=>{s.remove(),n.focus()},50)}function copiedRange(n){let r=[],a=[],s=!1;for(let o of n.selection.ranges)o.empty||(r.push(n.sliceDoc(o.from,o.to)),a.push(o));if(!r.length){let o=-1;for(let{from:u}of n.selection.ranges){let c=n.doc.lineAt(u);c.number>o&&(r.push(c.text),a.push({from:c.from,to:Math.min(n.doc.length,c.to+1)})),o=c.number}s=!0}return{text:r.join(n.lineBreak),ranges:a,linewise:s}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(n,r)=>{let{text:a,ranges:s,linewise:o}=copiedRange(n.state);if(!a&&!o)return!1;lastLinewiseCopy=o?a:null,r.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let u=brokenClipboardAPI?null:r.clipboardData;return u?(u.clearData(),u.setData("text/plain",a),!0):(captureCopy(n,a),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(n,r){let a=[];for(let s of n.facet(focusChangeEffect)){let o=s(n,r);o&&a.push(o)}return a?n.update({effects:a,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(n){setTimeout(()=>{let r=n.hasFocus;if(r!=n.inputState.notifiedFocused){let a=focusChangeTransaction(n.state,r);a?n.dispatch(a):n.update([])}},10)}observers.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),updateForFocusChange(n)};observers.blur=n=>{n.observer.clearSelectionRange(),updateForFocusChange(n)};observers.compositionstart=observers.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};observers.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,browser.chrome&&browser.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};observers.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(n,r)=>{var a;let s;if(browser.chrome&&browser.android&&(s=PendingKeys.find(o=>o.inputType==r.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0;setTimeout(()=>{var u;(((u=window.visualViewport)===null||u===void 0?void 0:u.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return browser.ios&&r.inputType=="deleteContentForward"&&n.observer.flushSoon(),browser.safari&&r.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>observers.compositionend(n,r),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(n){appliedFirefoxHack.has(n)||(appliedFirefoxHack.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(r){this.lineWrapping=r,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(r,a){let s=this.doc.lineAt(a).number-this.doc.lineAt(r).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((a-r-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(r){return this.lineWrapping?(1+Math.max(0,Math.ceil((r-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(r){return this.doc=r,this}mustRefreshForWrapping(r){return wrappingWhiteSpace.indexOf(r)>-1!=this.lineWrapping}mustRefreshForHeights(r){let a=!1;for(let s=0;s<r.length;s++){let o=r[s];o<0?s++:this.heightSamples[Math.floor(o*10)]||(a=!0,this.heightSamples[Math.floor(o*10)]=!0)}return a}refresh(r,a,s,o,u,c){let p=wrappingWhiteSpace.indexOf(r)>-1,d=Math.round(a)!=Math.round(this.lineHeight)||this.lineWrapping!=p;if(this.lineWrapping=p,this.lineHeight=a,this.charWidth=s,this.textHeight=o,this.lineLength=u,d){this.heightSamples={};for(let _=0;_<c.length;_++){let ja=c[_];ja<0?_++:this.heightSamples[Math.floor(ja*10)]=!0}}return d}}class MeasuredHeights{constructor(r,a){this.from=r,this.heights=a,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(r,a,s,o,u){this.from=r,this.length=a,this.top=s,this.height=o,this._content=u}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(r){let a=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(r._content)?r._content:[r]);return new BlockInfo(this.from,this.length+r.length,this.top,this.height+r.height,a)}}var QueryType=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(QueryType||(QueryType={}));const Epsilon=.001;class HeightMap{constructor(r,a,s=2){this.length=r,this.height=a,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(r){this.flags=(r?2:0)|this.flags&-3}setHeight(r){this.height!=r&&(Math.abs(this.height-r)>Epsilon&&(heightChangeFlag=!0),this.height=r)}replace(r,a,s){return HeightMap.of(s)}decomposeLeft(r,a){a.push(this)}decomposeRight(r,a){a.push(this)}applyChanges(r,a,s,o){let u=this,c=s.doc;for(let p=o.length-1;p>=0;p--){let{fromA:d,toA:_,fromB:ja,toB:Ja}=o[p],ec=u.lineAt(d,QueryType.ByPosNoHeight,s.setDoc(a),0,0),tc=ec.to>=_?ec:u.lineAt(_,QueryType.ByPosNoHeight,s,0,0);for(Ja+=tc.to-_,_=tc.to;p>0&&ec.from<=o[p-1].toA;)d=o[p-1].fromA,ja=o[p-1].fromB,p--,d<ec.from&&(ec=u.lineAt(d,QueryType.ByPosNoHeight,s,0,0));ja+=ec.from-d,d=ec.from;let rc=NodeBuilder.build(s.setDoc(c),r,ja,Ja);u=replace(u,u.replace(d,_,rc))}return u.updateHeight(s,0)}static empty(){return new HeightMapText(0,0)}static of(r){if(r.length==1)return r[0];let a=0,s=r.length,o=0,u=0;for(;;)if(a==s)if(o>u*2){let p=r[a-1];p.break?r.splice(--a,1,p.left,null,p.right):r.splice(--a,1,p.left,p.right),s+=1+p.break,o-=p.size}else if(u>o*2){let p=r[s];p.break?r.splice(s,1,p.left,null,p.right):r.splice(s,1,p.left,p.right),s+=2+p.break,u-=p.size}else break;else if(o<u){let p=r[a++];p&&(o+=p.size)}else{let p=r[--s];p&&(u+=p.size)}let c=0;return r[a-1]==null?(c=1,a--):r[a]==null&&(c=1,s++),new HeightMapBranch(HeightMap.of(r.slice(0,a)),c,HeightMap.of(r.slice(s)))}}function replace(n,r){return n==r?n:(n.constructor!=r.constructor&&(heightChangeFlag=!0),r)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(r,a,s){super(r,a),this.deco=s}blockAt(r,a,s,o){return new BlockInfo(o,this.length,s,this.height,this.deco||0)}lineAt(r,a,s,o,u){return this.blockAt(0,s,o,u)}forEachLine(r,a,s,o,u,c){r<=u+this.length&&a>=u&&c(this.blockAt(0,s,o,u))}updateHeight(r,a=0,s=!1,o){return o&&o.from<=a&&o.more&&this.setHeight(o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(r,a){super(r,a,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(r,a,s,o){return new BlockInfo(o,this.length,s,this.height,this.breaks)}replace(r,a,s){let o=s[0];return s.length==1&&(o instanceof HeightMapText||o instanceof HeightMapGap&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof HeightMapGap?o=new HeightMapText(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):HeightMap.of(s)}updateHeight(r,a=0,s=!1,o){return o&&o.from<=a&&o.more?this.setHeight(o.heights[o.index++]):(s||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,r.heightForLine(this.length-this.collapsed))+this.breaks*r.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(r){super(r,0)}heightMetrics(r,a){let s=r.doc.lineAt(a).number,o=r.doc.lineAt(a+this.length).number,u=o-s+1,c,p=0;if(r.lineWrapping){let d=Math.min(this.height,r.lineHeight*u);c=d/u,this.length>u+1&&(p=(this.height-d)/(this.length-u-1))}else c=this.height/u;return{firstLine:s,lastLine:o,perLine:c,perChar:p}}blockAt(r,a,s,o){let{firstLine:u,lastLine:c,perLine:p,perChar:d}=this.heightMetrics(a,o);if(a.lineWrapping){let _=o+(r<a.lineHeight?0:Math.round(Math.max(0,Math.min(1,(r-s)/this.height))*this.length)),ja=a.doc.lineAt(_),Ja=p+ja.length*d,ec=Math.max(s,r-Ja/2);return new BlockInfo(ja.from,ja.length,ec,Ja,0)}else{let _=Math.max(0,Math.min(c-u,Math.floor((r-s)/p))),{from:ja,length:Ja}=a.doc.line(u+_);return new BlockInfo(ja,Ja,s+p*_,p,0)}}lineAt(r,a,s,o,u){if(a==QueryType.ByHeight)return this.blockAt(r,s,o,u);if(a==QueryType.ByPosNoHeight){let{from:tc,to:rc}=s.doc.lineAt(r);return new BlockInfo(tc,rc-tc,0,0,0)}let{firstLine:c,perLine:p,perChar:d}=this.heightMetrics(s,u),_=s.doc.lineAt(r),ja=p+_.length*d,Ja=_.number-c,ec=o+p*Ja+d*(_.from-u-Ja);return new BlockInfo(_.from,_.length,Math.max(o,Math.min(ec,o+this.height-ja)),ja,0)}forEachLine(r,a,s,o,u,c){r=Math.max(r,u),a=Math.min(a,u+this.length);let{firstLine:p,perLine:d,perChar:_}=this.heightMetrics(s,u);for(let ja=r,Ja=o;ja<=a;){let ec=s.doc.lineAt(ja);if(ja==r){let rc=ec.number-p;Ja+=d*rc+_*(r-u-rc)}let tc=d+_*ec.length;c(new BlockInfo(ec.from,ec.length,Ja,tc,0)),Ja+=tc,ja=ec.to+1}}replace(r,a,s){let o=this.length-a;if(o>0){let u=s[s.length-1];u instanceof HeightMapGap?s[s.length-1]=new HeightMapGap(u.length+o):s.push(null,new HeightMapGap(o-1))}if(r>0){let u=s[0];u instanceof HeightMapGap?s[0]=new HeightMapGap(r+u.length):s.unshift(new HeightMapGap(r-1),null)}return HeightMap.of(s)}decomposeLeft(r,a){a.push(new HeightMapGap(r-1),null)}decomposeRight(r,a){a.push(null,new HeightMapGap(this.length-r-1))}updateHeight(r,a=0,s=!1,o){let u=a+this.length;if(o&&o.from<=a+this.length&&o.more){let c=[],p=Math.max(a,o.from),d=-1;for(o.from>a&&c.push(new HeightMapGap(o.from-a-1).updateHeight(r,a));p<=u&&o.more;){let ja=r.doc.lineAt(p).length;c.length&&c.push(null);let Ja=o.heights[o.index++];d==-1?d=Ja:Math.abs(Ja-d)>=Epsilon&&(d=-2);let ec=new HeightMapText(ja,Ja);ec.outdated=!1,c.push(ec),p+=ja+1}p<=u&&c.push(null,new HeightMapGap(u-p).updateHeight(r,p));let _=HeightMap.of(c);return(d<0||Math.abs(_.height-this.height)>=Epsilon||Math.abs(d-this.heightMetrics(r,a).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,_)}else(s||this.outdated)&&(this.setHeight(r.heightForGap(a,a+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(r,a,s){super(r.length+a+s.length,r.height+s.height,a|(r.outdated||s.outdated?2:0)),this.left=r,this.right=s,this.size=r.size+s.size}get break(){return this.flags&1}blockAt(r,a,s,o){let u=s+this.left.height;return r<u?this.left.blockAt(r,a,s,o):this.right.blockAt(r,a,u,o+this.left.length+this.break)}lineAt(r,a,s,o,u){let c=o+this.left.height,p=u+this.left.length+this.break,d=a==QueryType.ByHeight?r<c:r<p,_=d?this.left.lineAt(r,a,s,o,u):this.right.lineAt(r,a,s,c,p);if(this.break||(d?_.to<p:_.from>p))return _;let ja=a==QueryType.ByPosNoHeight?QueryType.ByPosNoHeight:QueryType.ByPos;return d?_.join(this.right.lineAt(p,ja,s,c,p)):this.left.lineAt(p,ja,s,o,u).join(_)}forEachLine(r,a,s,o,u,c){let p=o+this.left.height,d=u+this.left.length+this.break;if(this.break)r<d&&this.left.forEachLine(r,a,s,o,u,c),a>=d&&this.right.forEachLine(r,a,s,p,d,c);else{let _=this.lineAt(d,QueryType.ByPos,s,o,u);r<_.from&&this.left.forEachLine(r,_.from-1,s,o,u,c),_.to>=r&&_.from<=a&&c(_),a>_.to&&this.right.forEachLine(_.to+1,a,s,p,d,c)}}replace(r,a,s){let o=this.left.length+this.break;if(a<o)return this.balanced(this.left.replace(r,a,s),this.right);if(r>this.left.length)return this.balanced(this.left,this.right.replace(r-o,a-o,s));let u=[];r>0&&this.decomposeLeft(r,u);let c=u.length;for(let p of s)u.push(p);if(r>0&&mergeGaps(u,c-1),a<this.length){let p=u.length;this.decomposeRight(a,u),mergeGaps(u,p)}return HeightMap.of(u)}decomposeLeft(r,a){let s=this.left.length;if(r<=s)return this.left.decomposeLeft(r,a);a.push(this.left),this.break&&(s++,r>=s&&a.push(null)),r>s&&this.right.decomposeLeft(r-s,a)}decomposeRight(r,a){let s=this.left.length,o=s+this.break;if(r>=o)return this.right.decomposeRight(r-o,a);r<s&&this.left.decomposeRight(r,a),this.break&&r<o&&a.push(null),a.push(this.right)}balanced(r,a){return r.size>2*a.size||a.size>2*r.size?HeightMap.of(this.break?[r,null,a]:[r,a]):(this.left=replace(this.left,r),this.right=replace(this.right,a),this.setHeight(r.height+a.height),this.outdated=r.outdated||a.outdated,this.size=r.size+a.size,this.length=r.length+this.break+a.length,this)}updateHeight(r,a=0,s=!1,o){let{left:u,right:c}=this,p=a+u.length+this.break,d=null;return o&&o.from<=a+u.length&&o.more?d=u=u.updateHeight(r,a,s,o):u.updateHeight(r,a,s),o&&o.from<=p+c.length&&o.more?d=c=c.updateHeight(r,p,s,o):c.updateHeight(r,p,s),d?this.balanced(u,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(n,r){let a,s;n[r]==null&&(a=n[r-1])instanceof HeightMapGap&&(s=n[r+1])instanceof HeightMapGap&&n.splice(r-1,3,new HeightMapGap(a.length+1+s.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(r,a){this.pos=r,this.oracle=a,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=r}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(r,a){if(this.lineStart>-1){let s=Math.min(a,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof HeightMapText?o.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(s-this.pos,-1)),this.writtenTo=s,a>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}point(r,a,s){if(r<a||s.heightRelevant){let o=s.widget?s.widget.estimatedHeight:0,u=s.widget?s.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let c=a-r;s.block?this.addBlock(new HeightMapBlock(c,o,s)):(c||u||o>=relevantWidgetHeight)&&this.addLineDeco(o,u,c)}else a>r&&this.span(r,a);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:r,to:a}=this.oracle.doc.lineAt(this.pos);this.lineStart=r,this.lineEnd=a,this.writtenTo<r&&((this.writtenTo<r-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,r-1)),this.nodes.push(null)),this.pos>r&&this.nodes.push(new HeightMapText(this.pos-r,-1)),this.writtenTo=this.pos}blankContent(r,a){let s=new HeightMapGap(a-r);return this.oracle.doc.lineAt(r).to==a&&(s.flags|=4),s}ensureLine(){this.enterLine();let r=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(r instanceof HeightMapText)return r;let a=new HeightMapText(0,-1);return this.nodes.push(a),a}addBlock(r){this.enterLine();let a=r.deco;a&&a.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(r),this.writtenTo=this.pos=this.pos+r.length,a&&a.endSide>0&&(this.covering=r)}addLineDeco(r,a,s){let o=this.ensureLine();o.length+=s,o.collapsed+=s,o.widgetHeight=Math.max(o.widgetHeight,r),o.breaks+=a,this.writtenTo=this.pos=this.pos+s}finish(r){let a=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(a instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||a==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=r;for(let o of this.nodes)o instanceof HeightMapText&&o.updateHeight(this.oracle,s),s+=o?o.length:1;return this.nodes}static build(r,a,s,o){let u=new NodeBuilder(s,r);return RangeSet.spans(a,s,o,u,0),u.finish(s)}}function heightRelevantDecoChanges(n,r,a){let s=new DecorationComparator;return RangeSet.compare(n,r,a,s,0),s.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(r,a,s,o){(r<a||s&&s.heightRelevant||o&&o.heightRelevant)&&addRange(r,a,this.changes,5)}}function visiblePixelRange(n,r){let a=n.getBoundingClientRect(),s=n.ownerDocument,o=s.defaultView||window,u=Math.max(0,a.left),c=Math.min(o.innerWidth,a.right),p=Math.max(0,a.top),d=Math.min(o.innerHeight,a.bottom);for(let _=n.parentNode;_&&_!=s.body;)if(_.nodeType==1){let ja=_,Ja=window.getComputedStyle(ja);if((ja.scrollHeight>ja.clientHeight||ja.scrollWidth>ja.clientWidth)&&Ja.overflow!="visible"){let ec=ja.getBoundingClientRect();u=Math.max(u,ec.left),c=Math.min(c,ec.right),p=Math.max(p,ec.top),d=_==n.parentNode?ec.bottom:Math.min(d,ec.bottom)}_=Ja.position=="absolute"||Ja.position=="fixed"?ja.offsetParent:ja.parentNode}else if(_.nodeType==11)_=_.host;else break;return{left:u-a.left,right:Math.max(u,c)-a.left,top:p-(a.top+r),bottom:Math.max(p,d)-(a.top+r)}}function fullPixelRange(n,r){let a=n.getBoundingClientRect();return{left:0,right:a.right-a.left,top:r,bottom:a.bottom-(a.top+r)}}class LineGap{constructor(r,a,s){this.from=r,this.to=a,this.size=s}static same(r,a){if(r.length!=a.length)return!1;for(let s=0;s<r.length;s++){let o=r[s],u=a[s];if(o.from!=u.from||o.to!=u.to||o.size!=u.size)return!1}return!0}draw(r,a){return Decoration.replace({widget:new LineGapWidget(this.size*(a?r.scaleY:r.scaleX),a)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(r,a){super(),this.size=r,this.vertical=a}eq(r){return r.size==this.size&&r.vertical==this.vertical}toDOM(){let r=document.createElement("div");return this.vertical?r.style.height=this.size+"px":(r.style.width=this.size+"px",r.style.height="2px",r.style.display="inline-block"),r}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(r){this.state=r,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let a=r.facet(contentAttributes).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(a),this.stateDeco=r.facet(decorations).filter(s=>typeof s!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(r.doc),[new ChangedRange(0,0,0,r.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let r=[this.viewport],{main:a}=this.state.selection;for(let s=0;s<=1;s++){let o=s?a.head:a.anchor;if(!r.some(({from:u,to:c})=>o>=u&&o<=c)){let{from:u,to:c}=this.lineBlockAt(o);r.push(new Viewport(u,c))}}return this.viewports=r.sort((s,o)=>s.from-o.from),this.updateScaler()}updateScaler(){let r=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),r.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,r=>{this.viewportLines.push(scaleBlock(r,this.scaler))})}update(r,a=null){this.state=r.state;let s=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(ja=>typeof ja!="function");let o=r.changedRanges,u=ChangedRange.extendWithRanges(o,heightRelevantDecoChanges(s,this.stateDeco,r?r.changes:ChangeSet.empty(this.state.doc.length))),c=this.heightMap.height,p=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,r.startState.doc,this.heightOracle.setDoc(this.state.doc),u),(this.heightMap.height!=c||heightChangeFlag)&&(r.flags|=2),p?(this.scrollAnchorPos=r.changes.mapPos(p.from,-1),this.scrollAnchorHeight=p.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let d=u.length?this.mapViewport(this.viewport,r.changes):this.viewport;(a&&(a.range.head<d.from||a.range.head>d.to)||!this.viewportIsAppropriate(d))&&(d=this.getViewport(0,a));let _=d.from!=this.viewport.from||d.to!=this.viewport.to;this.viewport=d,r.flags|=this.updateForViewport(),(_||!r.changes.empty||r.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,r.changes))),r.flags|=this.computeVisibleRanges(),a&&(this.scrollTarget=a),!this.mustEnforceCursorAssoc&&r.selectionSet&&r.view.lineWrapping&&r.state.selection.main.empty&&r.state.selection.main.assoc&&!r.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(r){let a=r.contentDOM,s=window.getComputedStyle(a),o=this.heightOracle,u=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Direction.RTL:Direction.LTR;let c=this.heightOracle.mustRefreshForWrapping(u),p=a.getBoundingClientRect(),d=c||this.mustMeasureContent||this.contentDOMHeight!=p.height;this.contentDOMHeight=p.height,this.mustMeasureContent=!1;let _=0,ja=0;if(p.width&&p.height){let{scaleX:ah,scaleY:ih}=getScale(a,p);(ah>.005&&Math.abs(this.scaleX-ah)>.005||ih>.005&&Math.abs(this.scaleY-ih)>.005)&&(this.scaleX=ah,this.scaleY=ih,_|=8,c=d=!0)}let Ja=(parseInt(s.paddingTop)||0)*this.scaleY,ec=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=Ja||this.paddingBottom!=ec)&&(this.paddingTop=Ja,this.paddingBottom=ec,_|=10),this.editorWidth!=r.scrollDOM.clientWidth&&(o.lineWrapping&&(d=!0),this.editorWidth=r.scrollDOM.clientWidth,_|=8);let tc=r.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=tc&&(this.scrollAnchorHeight=-1,this.scrollTop=tc),this.scrolledToBottom=isScrolledToBottom(r.scrollDOM);let rc=(this.printing?fullPixelRange:visiblePixelRange)(a,this.paddingTop),nc=rc.top-this.pixelViewport.top,ic=rc.bottom-this.pixelViewport.bottom;this.pixelViewport=rc;let uc=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(uc!=this.inView&&(this.inView=uc,uc&&(d=!0)),!this.inView&&!this.scrollTarget)return 0;let eh=p.width;if((this.contentDOMWidth!=eh||this.editorHeight!=r.scrollDOM.clientHeight)&&(this.contentDOMWidth=p.width,this.editorHeight=r.scrollDOM.clientHeight,_|=8),d){let ah=r.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(ah)&&(c=!0),c||o.lineWrapping&&Math.abs(eh-this.contentDOMWidth)>o.charWidth){let{lineHeight:ih,charWidth:oh,textHeight:uh}=r.docView.measureTextSize();c=ih>0&&o.refresh(u,ih,oh,uh,eh/oh,ah),c&&(r.docView.minWidth=0,_|=8)}nc>0&&ic>0?ja=Math.max(nc,ic):nc<0&&ic<0&&(ja=Math.min(nc,ic)),clearHeightChangeFlag();for(let ih of this.viewports){let oh=ih.from==this.viewport.from?ah:r.docView.measureVisibleLineHeights(ih);this.heightMap=(c?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,r.state.doc.length)]):this.heightMap).updateHeight(o,0,c,new MeasuredHeights(ih.from,oh))}heightChangeFlag&&(_|=2)}let rh=!this.viewportIsAppropriate(this.viewport,ja)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return rh&&(_&2&&(_|=this.updateScaler()),this.viewport=this.getViewport(ja,this.scrollTarget),_|=this.updateForViewport()),(_&2||rh)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,r)),_|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,r.docView.enforceCursorAssoc()),_}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(r,a){let s=.5-Math.max(-.5,Math.min(.5,r/1e3/2)),o=this.heightMap,u=this.heightOracle,{visibleTop:c,visibleBottom:p}=this,d=new Viewport(o.lineAt(c-s*1e3,QueryType.ByHeight,u,0,0).from,o.lineAt(p+(1-s)*1e3,QueryType.ByHeight,u,0,0).to);if(a){let{head:_}=a.range;if(_<d.from||_>d.to){let ja=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),Ja=o.lineAt(_,QueryType.ByPos,u,0,0),ec;a.y=="center"?ec=(Ja.top+Ja.bottom)/2-ja/2:a.y=="start"||a.y=="nearest"&&_<d.from?ec=Ja.top:ec=Ja.bottom-ja,d=new Viewport(o.lineAt(ec-1e3/2,QueryType.ByHeight,u,0,0).from,o.lineAt(ec+ja+1e3/2,QueryType.ByHeight,u,0,0).to)}}return d}mapViewport(r,a){let s=a.mapPos(r.from,-1),o=a.mapPos(r.to,1);return new Viewport(this.heightMap.lineAt(s,QueryType.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,QueryType.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:r,to:a},s=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(r,QueryType.ByPos,this.heightOracle,0,0),{bottom:u}=this.heightMap.lineAt(a,QueryType.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:p}=this;return(r==0||o<=c-Math.max(10,Math.min(-s,250)))&&(a==this.state.doc.length||u>=p+Math.max(10,Math.min(s,250)))&&o>c-2*1e3&&u<p+2*1e3}mapLineGaps(r,a){if(!r.length||a.empty)return r;let s=[];for(let o of r)a.touchesRange(o.from,o.to)||s.push(new LineGap(a.mapPos(o.from),a.mapPos(o.to),o.size));return s}ensureLineGaps(r,a){let s=this.heightOracle.lineWrapping,o=s?1e4:2e3,u=o>>1,c=o<<1;if(this.defaultTextDirection!=Direction.LTR&&!s)return[];let p=[],d=(ja,Ja,ec,tc)=>{if(Ja-ja<u)return;let rc=this.state.selection.main,nc=[rc.from];rc.empty||nc.push(rc.to);for(let uc of nc)if(uc>ja&&uc<Ja){d(ja,uc-10,ec,tc),d(uc+10,Ja,ec,tc);return}let ic=find(r,uc=>uc.from>=ec.from&&uc.to<=ec.to&&Math.abs(uc.from-ja)<u&&Math.abs(uc.to-Ja)<u&&!nc.some(eh=>uc.from<eh&&uc.to>eh));if(!ic){if(Ja<ec.to&&a&&s&&a.visibleRanges.some(uc=>uc.from<=Ja&&uc.to>=Ja)){let uc=a.moveToLineBoundary(EditorSelection.cursor(Ja),!1,!0).head;uc>ja&&(Ja=uc)}ic=new LineGap(ja,Ja,this.gapSize(ec,ja,Ja,tc))}p.push(ic)},_=ja=>{if(ja.length<c||ja.type!=BlockType.Text)return;let Ja=lineStructure(ja.from,ja.to,this.stateDeco);if(Ja.total<c)return;let ec=this.scrollTarget?this.scrollTarget.range.head:null,tc,rc;if(s){let nc=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,ic,uc;if(ec!=null){let eh=findFraction(Ja,ec),rh=((this.visibleBottom-this.visibleTop)/2+nc)/ja.height;ic=eh-rh,uc=eh+rh}else ic=(this.visibleTop-ja.top-nc)/ja.height,uc=(this.visibleBottom-ja.top+nc)/ja.height;tc=findPosition(Ja,ic),rc=findPosition(Ja,uc)}else{let nc=Ja.total*this.heightOracle.charWidth,ic=o*this.heightOracle.charWidth,uc,eh;if(ec!=null){let rh=findFraction(Ja,ec),ah=((this.pixelViewport.right-this.pixelViewport.left)/2+ic)/nc;uc=rh-ah,eh=rh+ah}else uc=(this.pixelViewport.left-ic)/nc,eh=(this.pixelViewport.right+ic)/nc;tc=findPosition(Ja,uc),rc=findPosition(Ja,eh)}tc>ja.from&&d(ja.from,tc,ja,Ja),rc<ja.to&&d(rc,ja.to,ja,Ja)};for(let ja of this.viewportLines)Array.isArray(ja.type)?ja.type.forEach(_):_(ja);return p}gapSize(r,a,s,o){let u=findFraction(o,s)-findFraction(o,a);return this.heightOracle.lineWrapping?r.height*u:o.total*this.heightOracle.charWidth*u}updateLineGaps(r){LineGap.same(r,this.lineGaps)||(this.lineGaps=r,this.lineGapDeco=Decoration.set(r.map(a=>a.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let r=this.stateDeco;this.lineGaps.length&&(r=r.concat(this.lineGapDeco));let a=[];RangeSet.spans(r,this.viewport.from,this.viewport.to,{span(o,u){a.push({from:o,to:u})},point(){}},20);let s=a.length!=this.visibleRanges.length||this.visibleRanges.some((o,u)=>o.from!=a[u].from||o.to!=a[u].to);return this.visibleRanges=a,s?4:0}lineBlockAt(r){return r>=this.viewport.from&&r<=this.viewport.to&&this.viewportLines.find(a=>a.from<=r&&a.to>=r)||scaleBlock(this.heightMap.lineAt(r,QueryType.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(r){return r>=this.viewportLines[0].top&&r<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(a=>a.top<=r&&a.bottom>=r)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(r),QueryType.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(r){let a=this.lineBlockAtHeight(r+8);return a.from>=this.viewport.from||this.viewportLines[0].top-r>200?a:this.viewportLines[0]}elementAtHeight(r){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(r),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(r,a){this.from=r,this.to=a}}function lineStructure(n,r,a){let s=[],o=n,u=0;return RangeSet.spans(a,n,r,{span(){},point(c,p){c>o&&(s.push({from:o,to:c}),u+=c-o),o=p}},20),o<r&&(s.push({from:o,to:r}),u+=r-o),{total:u,ranges:s}}function findPosition({total:n,ranges:r},a){if(a<=0)return r[0].from;if(a>=1)return r[r.length-1].to;let s=Math.floor(n*a);for(let o=0;;o++){let{from:u,to:c}=r[o],p=c-u;if(s<=p)return u+s;s-=p}}function findFraction(n,r){let a=0;for(let{from:s,to:o}of n.ranges){if(r<=o){a+=r-s;break}a+=o-s}return a/n.total}function find(n,r){for(let a of n)if(r(a))return a}const IdScaler={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class BigScaler{constructor(r,a,s){let o=0,u=0,c=0;this.viewports=s.map(({from:p,to:d})=>{let _=a.lineAt(p,QueryType.ByPos,r,0,0).top,ja=a.lineAt(d,QueryType.ByPos,r,0,0).bottom;return o+=ja-_,{from:p,to:d,top:_,bottom:ja,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(a.height-o);for(let p of this.viewports)p.domTop=c+(p.top-u)*this.scale,c=p.domBottom=p.domTop+(p.bottom-p.top),u=p.bottom}toDOM(r){for(let a=0,s=0,o=0;;a++){let u=a<this.viewports.length?this.viewports[a]:null;if(!u||r<u.top)return o+(r-s)*this.scale;if(r<=u.bottom)return u.domTop+(r-u.top);s=u.bottom,o=u.domBottom}}fromDOM(r){for(let a=0,s=0,o=0;;a++){let u=a<this.viewports.length?this.viewports[a]:null;if(!u||r<u.domTop)return s+(r-o)/this.scale;if(r<=u.domBottom)return u.top+(r-u.domTop);s=u.bottom,o=u.domBottom}}eq(r){return r instanceof BigScaler?this.scale==r.scale&&this.viewports.length==r.viewports.length&&this.viewports.every((a,s)=>a.from==r.viewports[s].from&&a.to==r.viewports[s].to):!1}}function scaleBlock(n,r){if(r.scale==1)return n;let a=r.toDOM(n.top),s=r.toDOM(n.bottom);return new BlockInfo(n.from,n.length,a,s-a,Array.isArray(n._content)?n._content.map(o=>scaleBlock(o,r)):n._content)}const theme=Facet.define({combine:n=>n.join(" ")}),darkTheme=Facet.define({combine:n=>n.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(n,r,a){return new StyleModule(r,{finish(s){return/&/.test(s)?s.replace(/&\w*/,o=>{if(o=="&")return n;if(!a||!a[o])throw new RangeError(`Unsupported selector: ${o}`);return a[o]}):n+" "+s}})}const baseTheme$1=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),LineBreakPlaceholder="￿";class DOMReader{constructor(r,a){this.points=r,this.text="",this.lineSeparator=a.facet(EditorState.lineSeparator)}append(r){this.text+=r}lineBreak(){this.text+=LineBreakPlaceholder}readRange(r,a){if(!r)return this;let s=r.parentNode;for(let o=r;;){this.findPointBefore(s,o);let u=this.text.length;this.readNode(o);let c=o.nextSibling;if(c==a)break;let p=ContentView.get(o),d=ContentView.get(c);(p&&d?p.breakAfter:(p?p.breakAfter:isBlockElement(o))||isBlockElement(c)&&(o.nodeName!="BR"||o.cmIgnore)&&this.text.length>u)&&this.lineBreak(),o=c}return this.findPointBefore(s,a),this}readTextNode(r){let a=r.nodeValue;for(let s of this.points)s.node==r&&(s.pos=this.text.length+Math.min(s.offset,a.length));for(let s=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let u=-1,c=1,p;if(this.lineSeparator?(u=a.indexOf(this.lineSeparator,s),c=this.lineSeparator.length):(p=o.exec(a))&&(u=p.index,c=p[0].length),this.append(a.slice(s,u<0?a.length:u)),u<0)break;if(this.lineBreak(),c>1)for(let d of this.points)d.node==r&&d.pos>this.text.length&&(d.pos-=c-1);s=u+c}}readNode(r){if(r.cmIgnore)return;let a=ContentView.get(r),s=a&&a.overrideDOMText;if(s!=null){this.findPointInside(r,s.length);for(let o=s.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else r.nodeType==3?this.readTextNode(r):r.nodeName=="BR"?r.nextSibling&&this.lineBreak():r.nodeType==1&&this.readRange(r.firstChild,null)}findPointBefore(r,a){for(let s of this.points)s.node==r&&r.childNodes[s.offset]==a&&(s.pos=this.text.length)}findPointInside(r,a){for(let s of this.points)(r.nodeType==3?s.node==r:r.contains(s.node))&&(s.pos=this.text.length+(isAtEnd(r,s.node,s.offset)?a:0))}}function isAtEnd(n,r,a){for(;;){if(!r||a<maxOffset(r))return!1;if(r==n)return!0;a=domIndex(r)+1,r=r.parentNode}}class DOMPoint{constructor(r,a){this.node=r,this.offset=a,this.pos=-1}}class DOMChange{constructor(r,a,s,o){this.typeOver=o,this.bounds=null,this.text="",this.domChanged=a>-1;let{impreciseHead:u,impreciseAnchor:c}=r.docView;if(r.state.readOnly&&a>-1)this.newSel=null;else if(a>-1&&(this.bounds=r.docView.domBoundsAround(a,s,0))){let p=u||c?[]:selectionPoints(r),d=new DOMReader(p,r.state);d.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=d.text,this.newSel=selectionFromPoints(p,this.bounds.from)}else{let p=r.observer.selectionRange,d=u&&u.node==p.focusNode&&u.offset==p.focusOffset||!contains(r.contentDOM,p.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(p.focusNode,p.focusOffset),_=c&&c.node==p.anchorNode&&c.offset==p.anchorOffset||!contains(r.contentDOM,p.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(p.anchorNode,p.anchorOffset),ja=r.viewport;if((browser.ios||browser.chrome)&&r.state.selection.main.empty&&d!=_&&(ja.from>0||ja.to<r.state.doc.length)){let Ja=Math.min(d,_),ec=Math.max(d,_),tc=ja.from-Ja,rc=ja.to-ec;(tc==0||tc==1||Ja==0)&&(rc==0||rc==-1||ec==r.state.doc.length)&&(d=0,_=r.state.doc.length)}this.newSel=EditorSelection.single(_,d)}}}function applyDOMChange(n,r){let a,{newSel:s}=r,o=n.state.selection.main,u=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(r.bounds){let{from:c,to:p}=r.bounds,d=o.from,_=null;(u===8||browser.android&&r.text.length<p-c)&&(d=o.to,_="end");let ja=findDiff(n.state.doc.sliceString(c,p,LineBreakPlaceholder),r.text,d-c,_);ja&&(browser.chrome&&u==13&&ja.toB==ja.from+2&&r.text.slice(ja.from,ja.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&ja.toB--,a={from:c+ja.from,to:c+ja.toA,insert:Text.of(r.text.slice(ja.from,ja.toB).split(LineBreakPlaceholder))})}else s&&(!n.hasFocus&&n.state.facet(editable)||s.main.eq(o))&&(s=null);if(!a&&!s)return!1;if(!a&&r.typeOver&&!o.empty&&s&&s.main.empty?a={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,o.to)}:a&&a.from>=o.from&&a.to<=o.to&&(a.from!=o.from||a.to!=o.to)&&o.to-o.from-(a.to-a.from)<=4?a={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,a.from).append(a.insert).append(n.state.doc.slice(a.to,o.to))}:(browser.mac||browser.android)&&a&&a.from==a.to&&a.from==o.head-1&&/^\. ?$/.test(a.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(s&&a.insert.length==2&&(s=EditorSelection.single(s.main.anchor-1,s.main.head-1)),a={from:o.from,to:o.to,insert:Text.of([" "])}):browser.chrome&&a&&a.from==a.to&&a.from==o.head&&a.insert.toString()==`
 `&&n.lineWrapping&&(s&&(s=EditorSelection.single(s.main.anchor-1,s.main.head-1)),a={from:o.from,to:o.to,insert:Text.of([" "])}),a)return applyDOMChangeInner(n,a,s,u);if(s&&!s.main.eq(o)){let c=!1,p="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(c=!0),p=n.inputState.lastSelectionOrigin),n.dispatch({selection:s,scrollIntoView:c,userEvent:p}),!0}else return!1}function applyDOMChangeInner(n,r,a,s=-1){if(browser.ios&&n.inputState.flushIOSKey(r))return!0;let o=n.state.selection.main;if(browser.android&&(r.to==o.to&&(r.from==o.from||r.from==o.from-1&&n.state.sliceDoc(r.from,o.from)==" ")&&r.insert.length==1&&r.insert.lines==2&&dispatchKey(n.contentDOM,"Enter",13)||(r.from==o.from-1&&r.to==o.to&&r.insert.length==0||s==8&&r.insert.length<r.to-r.from&&r.to>o.head)&&dispatchKey(n.contentDOM,"Backspace",8)||r.from==o.from&&r.to==o.to+1&&r.insert.length==0&&dispatchKey(n.contentDOM,"Delete",46)))return!0;let u=r.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let c,p=()=>c||(c=applyDefaultInsert(n,r,a));return n.state.facet(inputHandler).some(d=>d(n,r.from,r.to,u,p))||n.dispatch(p()),!0}function applyDefaultInsert(n,r,a){let s,o=n.state,u=o.selection.main;if(r.from>=u.from&&r.to<=u.to&&r.to-r.from>=(u.to-u.from)/3&&(!a||a.main.empty&&a.main.from==r.from+r.insert.length)&&n.inputState.composing<0){let p=u.from<r.from?o.sliceDoc(u.from,r.from):"",d=u.to>r.to?o.sliceDoc(r.to,u.to):"";s=o.replaceSelection(n.state.toText(p+r.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let p=o.changes(r),d=a&&a.main.to<=p.newLength?a.main:void 0;if(o.selection.ranges.length>1&&n.inputState.composing>=0&&r.to<=u.to&&r.to>=u.to-10){let _=n.state.sliceDoc(r.from,r.to),ja,Ja=a&&findCompositionNode(n,a.main.head);if(Ja){let rc=r.insert.length-(r.to-r.from);ja={from:Ja.from,to:Ja.to-rc}}else ja=n.state.doc.lineAt(u.head);let ec=u.to-r.to,tc=u.to-u.from;s=o.changeByRange(rc=>{if(rc.from==u.from&&rc.to==u.to)return{changes:p,range:d||rc.map(p)};let nc=rc.to-ec,ic=nc-_.length;if(rc.to-rc.from!=tc||n.state.sliceDoc(ic,nc)!=_||rc.to>=ja.from&&rc.from<=ja.to)return{range:rc};let uc=o.changes({from:ic,to:nc,insert:r.insert}),eh=rc.to-u.to;return{changes:uc,range:d?EditorSelection.range(Math.max(0,d.anchor+eh),Math.max(0,d.head+eh)):rc.map(uc)}})}else s={changes:p,selection:d&&o.selection.replaceRange(d)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),o.update(s,{userEvent:c,scrollIntoView:!0})}function findDiff(n,r,a,s){let o=Math.min(n.length,r.length),u=0;for(;u<o&&n.charCodeAt(u)==r.charCodeAt(u);)u++;if(u==o&&n.length==r.length)return null;let c=n.length,p=r.length;for(;c>0&&p>0&&n.charCodeAt(c-1)==r.charCodeAt(p-1);)c--,p--;if(s=="end"){let d=Math.max(0,u-Math.min(c,p));a-=c+d-u}if(c<u&&n.length<r.length){let d=a<=u&&a>=c?u-a:0;u-=d,p=u+(p-c),c=u}else if(p<u){let d=a<=u&&a>=p?u-a:0;u-=d,c=u+(c-p),p=u}return{from:u,toA:c,toB:p}}function selectionPoints(n){let r=[];if(n.root.activeElement!=n.contentDOM)return r;let{anchorNode:a,anchorOffset:s,focusNode:o,focusOffset:u}=n.observer.selectionRange;return a&&(r.push(new DOMPoint(a,s)),(o!=a||u!=s)&&r.push(new DOMPoint(o,u))),r}function selectionFromPoints(n,r){if(n.length==0)return null;let a=n[0].pos,s=n.length==2?n[1].pos:a;return a>-1&&s>-1?EditorSelection.single(a+r,s+r):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(r){this.view=r,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=r.contentDOM,this.observer=new MutationObserver(a=>{for(let s of a)this.queue.push(s);(browser.ie&&browser.ie_version<=11||browser.ios&&r.composing)&&a.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&r.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(r),r.state.facet(editable)&&(r.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var a;((a=this.view.docView)===null||a===void 0?void 0:a.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(r.scrollDOM)),this.addWindowListeners(this.win=r.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(a=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),a.length>0&&a[a.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(a=>{a.length>0&&a[a.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(r){this.view.inputState.runHandlers("scroll",r),this.intersecting&&this.view.measure()}onScroll(r){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(r)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(r){(r.type=="change"||!r.type)&&!r.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(r){if(this.gapIntersection&&(r.length!=this.gaps.length||this.gaps.some((a,s)=>a!=r[s]))){this.gapIntersection.disconnect();for(let a of r)this.gapIntersection.observe(a);this.gaps=r}}onSelectionChange(r){let a=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,o=this.selectionRange;if(s.state.facet(editable)?s.root.activeElement!=this.dom:!hasSelection(s.dom,o))return;let u=o.anchorNode&&s.docView.nearest(o.anchorNode);if(u&&u.ignoreEvent(r)){a||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!s.state.selection.main.empty&&o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:r}=this,a=getSelection(r.root);if(!a)return!1;let s=browser.safari&&r.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view,a)||a;if(!s||this.selectionRange.eq(s))return!1;let o=hasSelection(this.dom,s);return o&&!this.selectionChanged&&r.inputState.lastFocusTime>Date.now()-200&&r.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,s)?(this.view.inputState.lastFocusTime=0,r.docView.updateSelection(),!1):(this.selectionRange.setRange(s),o&&(this.selectionChanged=!0),!0)}setSelectionRange(r,a){this.selectionRange.set(r.node,r.offset,a.node,a.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let r=0,a=null;for(let s=this.dom;s;)if(s.nodeType==1)!a&&r<this.scrollTargets.length&&this.scrollTargets[r]==s?r++:a||(a=this.scrollTargets.slice(0,r)),a&&a.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(r<this.scrollTargets.length&&!a&&(a=this.scrollTargets.slice(0,r)),a){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=a)s.addEventListener("scroll",this.onScroll)}}ignore(r){if(!this.active)return r();try{return this.stop(),r()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(r,a){var s;if(!this.delayedAndroidKey){let o=()=>{let u=this.delayedAndroidKey;u&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=u.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&u.force&&dispatchKey(this.dom,u.key,u.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||r=="Enter")&&(this.delayedAndroidKey={key:r,keyCode:a,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let r of this.observer.takeRecords())this.queue.push(r);return this.queue}processRecords(){let r=this.pendingRecords();r.length&&(this.queue=[]);let a=-1,s=-1,o=!1;for(let u of r){let c=this.readMutation(u);c&&(c.typeOver&&(o=!0),a==-1?{from:a,to:s}=c:(a=Math.min(c.from,a),s=Math.max(c.to,s)))}return{from:a,to:s,typeOver:o}}readChange(){let{from:r,to:a,typeOver:s}=this.processRecords(),o=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(r<0&&!o)return null;r>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let u=new DOMChange(this.view,r,a,s);return this.view.docView.domChanged={newSel:u.newSel?u.newSel.main:null},u}flush(r=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;r&&this.readSelectionRange();let a=this.readChange();if(!a)return this.view.requestMeasure(),!1;let s=this.view.state,o=applyDOMChange(this.view,a);return this.view.state==s&&(a.domChanged||a.newSel&&!a.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),o}readMutation(r){let a=this.view.docView.nearest(r.target);if(!a||a.ignoreMutation(r))return null;if(a.markDirty(r.type=="attributes"),r.type=="attributes"&&(a.flags|=4),r.type=="childList"){let s=findChild(a,r.previousSibling||r.target.previousSibling,-1),o=findChild(a,r.nextSibling||r.target.nextSibling,1);return{from:s?a.posAfter(s):a.posAtStart,to:o?a.posBefore(o):a.posAtEnd,typeOver:!1}}else return r.type=="characterData"?{from:a.posAtStart,to:a.posAtEnd,typeOver:r.target.nodeValue==r.oldValue}:null}setWindow(r){r!=this.win&&(this.removeWindowListeners(this.win),this.win=r,this.addWindowListeners(this.win))}addWindowListeners(r){r.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):r.addEventListener("beforeprint",this.onPrint),r.addEventListener("scroll",this.onScroll),r.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(r){r.removeEventListener("scroll",this.onScroll),r.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):r.removeEventListener("beforeprint",this.onPrint),r.document.removeEventListener("selectionchange",this.onSelectionChange)}update(r){this.editContext&&(this.editContext.update(r),r.startState.facet(editable)!=r.state.facet(editable)&&(r.view.contentDOM.editContext=r.state.facet(editable)?this.editContext.editContext:null))}destroy(){var r,a,s;this.stop(),(r=this.intersection)===null||r===void 0||r.disconnect(),(a=this.gapIntersection)===null||a===void 0||a.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(n,r,a){for(;r;){let s=ContentView.get(r);if(s&&s.parent==n)return s;let o=r.parentNode;r=o!=n.dom?o:a>0?r.nextSibling:r.previousSibling}return null}function buildSelectionRangeFromRange(n,r){let a=r.startContainer,s=r.startOffset,o=r.endContainer,u=r.endOffset,c=n.docView.domAtPos(n.state.selection.main.anchor);return isEquivalentPosition(c.node,c.offset,o,u)&&([a,s,o,u]=[o,u,a,s]),{anchorNode:a,anchorOffset:s,focusNode:o,focusOffset:u}}function safariSelectionRangeHack(n,r){if(r.getComposedRanges){let o=r.getComposedRanges(n.root)[0];if(o)return buildSelectionRangeFromRange(n,o)}let a=null;function s(o){o.preventDefault(),o.stopImmediatePropagation(),a=o.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",s,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",s,!0),a?buildSelectionRangeFromRange(n,a):null}class EditContextManager{constructor(r){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(r.state);let a=this.editContext=new window.EditContext({text:r.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,r.state.selection.main.anchor))),selectionEnd:this.toContextPos(r.state.selection.main.head)});this.handlers.textupdate=s=>{let{anchor:o}=r.state.selection.main,u={from:this.toEditorPos(s.updateRangeStart),to:this.toEditorPos(s.updateRangeEnd),insert:Text.of(s.text.split(`
`))};u.from==this.from&&o<this.from?u.from=o:u.to==this.to&&o>this.to&&(u.to=o),!(u.from==u.to&&!u.insert.length)&&(this.pendingContextChange=u,r.state.readOnly||applyDOMChangeInner(r,u,EditorSelection.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd))),this.pendingContextChange&&(this.revertPending(r.state),this.setSelection(r.state)))},this.handlers.characterboundsupdate=s=>{let o=[],u=null;for(let c=this.toEditorPos(s.rangeStart),p=this.toEditorPos(s.rangeEnd);c<p;c++){let d=r.coordsForChar(c);u=d&&new DOMRect(d.left,d.top,d.right-d.left,d.bottom-d.top)||u||new DOMRect,o.push(u)}a.updateCharacterBounds(s.rangeStart,o)},this.handlers.textformatupdate=s=>{let o=[];for(let u of s.getTextFormats()){let c=u.underlineStyle,p=u.underlineThickness;if(c!="None"&&p!="None"){let d=`text-decoration: underline ${c=="Dashed"?"dashed ":c=="Squiggle"?"wavy ":""}${p=="Thin"?1:2}px`;o.push(Decoration.mark({attributes:{style:d}}).range(this.toEditorPos(u.rangeStart),this.toEditorPos(u.rangeEnd)))}}r.dispatch({effects:setEditContextFormatting.of(Decoration.set(o))})},this.handlers.compositionstart=()=>{r.inputState.composing<0&&(r.inputState.composing=0,r.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{r.inputState.composing=-1,r.inputState.compositionFirstChange=null};for(let s in this.handlers)a.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let o=getSelection(s.root);o&&o.rangeCount&&this.editContext.updateSelectionBounds(o.getRangeAt(0).getBoundingClientRect())}}}applyEdits(r){let a=0,s=!1,o=this.pendingContextChange;return r.changes.iterChanges((u,c,p,d,_)=>{if(s)return;let ja=_.length-(c-u);if(o&&c>=o.to)if(o.from==u&&o.to==c&&o.insert.eq(_)){o=this.pendingContextChange=null,a+=ja,this.to+=ja;return}else o=null,this.revertPending(r.state);if(u+=a,c+=a,c<=this.from)this.from+=ja,this.to+=ja;else if(u<this.to){if(u<this.from||c>this.to||this.to-this.from+_.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(u),this.toContextPos(c),_.toString()),this.to+=ja}a+=ja}),o&&!s&&this.revertPending(r.state),!s}update(r){let a=this.pendingContextChange;!this.applyEdits(r)||!this.rangeIsValid(r.state)?(this.pendingContextChange=null,this.resetRange(r.state),this.editContext.updateText(0,this.editContext.text.length,r.state.doc.sliceString(this.from,this.to)),this.setSelection(r.state)):(r.docChanged||r.selectionSet||a)&&this.setSelection(r.state),(r.geometryChanged||r.docChanged||r.selectionSet)&&r.view.requestMeasure(this.measureReq)}resetRange(r){let{head:a}=r.selection.main;this.from=Math.max(0,a-1e4),this.to=Math.min(r.doc.length,a+1e4)}revertPending(r){let a=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(a.from),this.toContextPos(a.from+a.insert.length),r.doc.sliceString(a.from,a.to))}setSelection(r){let{main:a}=r.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,a.anchor))),o=this.toContextPos(a.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=o)&&this.editContext.updateSelection(s,o)}rangeIsValid(r){let{head:a}=r.selection.main;return!(this.from>0&&a-this.from<500||this.to<r.doc.length&&this.to-a<500||this.to-this.from>1e4*3)}toEditorPos(r){return r+this.from}toContextPos(r){return r-this.from}destroy(){for(let r in this.handlers)this.editContext.removeEventListener(r,this.handlers[r])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(r={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),r.parent&&r.parent.appendChild(this.dom);let{dispatch:a}=r;this.dispatchTransactions=r.dispatchTransactions||a&&(s=>s.forEach(o=>a(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=r.root||getRoot(r.parent)||document,this.viewState=new ViewState(r.state||EditorState.create(r)),r.scrollTo&&r.scrollTo.is(scrollIntoView)&&(this.viewState.scrollTarget=r.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(s=>new PluginInstance(s));for(let s of this.plugins)s.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...r){let a=r.length==1&&r[0]instanceof Transaction?r:r.length==1&&Array.isArray(r[0])?r[0]:[this.state.update(...r)];this.dispatchTransactions(a,this)}update(r){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let a=!1,s=!1,o,u=this.state;for(let ec of r){if(ec.startState!=u)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");u=ec.state}if(this.destroyed){this.viewState.state=u;return}let c=this.hasFocus,p=0,d=null;r.some(ec=>ec.annotation(isFocusChange))?(this.inputState.notifiedFocused=c,p=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,d=focusChangeTransaction(u,c),d||(p=1));let _=this.observer.delayedAndroidKey,ja=null;if(_?(this.observer.clearDelayedAndroidKey(),ja=this.observer.readChange(),(ja&&!this.state.doc.eq(u.doc)||!this.state.selection.eq(u.selection))&&(ja=null)):this.observer.clear(),u.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(u);o=ViewUpdate.create(this,u,r),o.flags|=p;let Ja=this.viewState.scrollTarget;try{this.updateState=2;for(let ec of r){if(Ja&&(Ja=Ja.map(ec.changes)),ec.scrollIntoView){let{main:tc}=ec.state.selection;Ja=new ScrollTarget(tc.empty?tc:EditorSelection.cursor(tc.head,tc.head>tc.anchor?-1:1))}for(let tc of ec.effects)tc.is(scrollIntoView)&&(Ja=tc.value.clip(this.state))}this.viewState.update(o,Ja),this.bidiCache=CachedOrder.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),a=this.docView.update(o),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(r),this.docView.updateSelection(a,r.some(ec=>ec.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(theme)!=o.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(a||s||Ja||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),a&&this.docViewUpdate(),!o.empty)for(let ec of this.state.facet(updateListener))try{ec(o)}catch(tc){logException(this.state,tc,"update listener")}(d||ja)&&Promise.resolve().then(()=>{d&&this.state==d.startState&&this.dispatch(d),ja&&!applyDOMChange(this,ja)&&_.force&&dispatchKey(this.contentDOM,_.key,_.keyCode)})}setState(r){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=r;return}this.updateState=2;let a=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new ViewState(r),this.plugins=r.facet(viewPlugin).map(s=>new PluginInstance(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}a&&this.focus(),this.requestMeasure()}updatePlugins(r){let a=r.startState.facet(viewPlugin),s=r.state.facet(viewPlugin);if(a!=s){let o=[];for(let u of s){let c=a.indexOf(u);if(c<0)o.push(new PluginInstance(u));else{let p=this.plugins[c];p.mustUpdate=r,o.push(p)}}for(let u of this.plugins)u.mustUpdate!=r&&u.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let o of this.plugins)o.mustUpdate=r;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this);a!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let r of this.plugins){let a=r.value;if(a&&a.docViewUpdate)try{a.docViewUpdate(this)}catch(s){logException(this.state,s,"doc view update listener")}}}measure(r=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,r&&this.observer.forceFlush();let a=null,s=this.scrollDOM,o=s.scrollTop*this.scaleY,{scrollAnchorPos:u,scrollAnchorHeight:c}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let p=0;;p++){if(c<0)if(isScrolledToBottom(s))u=-1,c=this.viewState.heightMap.height;else{let tc=this.viewState.scrollAnchorAt(o);u=tc.from,c=tc.top}this.updateState=1;let d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(p>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let _=[];d&4||([this.measureRequests,_]=[_,this.measureRequests]);let ja=_.map(tc=>{try{return tc.read(this)}catch(rc){return logException(this.state,rc),BadMeasure}}),Ja=ViewUpdate.create(this,this.state,[]),ec=!1;Ja.flags|=d,a?a.flags|=d:a=Ja,this.updateState=2,Ja.empty||(this.updatePlugins(Ja),this.inputState.update(Ja),this.updateAttrs(),ec=this.docView.update(Ja),ec&&this.docViewUpdate());for(let tc=0;tc<_.length;tc++)if(ja[tc]!=BadMeasure)try{let rc=_[tc];rc.write&&rc.write(ja[tc],this)}catch(rc){logException(this.state,rc)}if(ec&&this.docView.updateSelection(!0),!Ja.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,c=-1;continue}else{let rc=(u<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(u).top)-c;if(rc>1||rc<-1){o=o+rc,s.scrollTop=o/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(a&&!a.empty)for(let p of this.state.facet(updateListener))p(a)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let r=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),a={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(a["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,a);let s=this.observer.ignore(()=>{let o=updateAttrs(this.contentDOM,this.contentAttrs,a),u=updateAttrs(this.dom,this.editorAttrs,r);return o||u});return this.editorAttrs=r,this.contentAttrs=a,s}showAnnouncements(r){let a=!0;for(let s of r)for(let o of s.effects)if(o.is(EditorView.announce)){a&&(this.announceDOM.textContent=""),a=!1;let u=this.announceDOM.appendChild(document.createElement("div"));u.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let r=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1).reverse(),r?{nonce:r}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(r){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),r){if(this.measureRequests.indexOf(r)>-1)return;if(r.key!=null){for(let a=0;a<this.measureRequests.length;a++)if(this.measureRequests[a].key===r.key){this.measureRequests[a]=r;return}}this.measureRequests.push(r)}}plugin(r){let a=this.pluginMap.get(r);return(a===void 0||a&&a.spec!=r)&&this.pluginMap.set(r,a=this.plugins.find(s=>s.spec==r)||null),a&&a.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(r){return this.readMeasured(),this.viewState.elementAtHeight(r)}lineBlockAtHeight(r){return this.readMeasured(),this.viewState.lineBlockAtHeight(r)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(r){return this.viewState.lineBlockAt(r)}get contentHeight(){return this.viewState.contentHeight}moveByChar(r,a,s){return skipAtoms(this,r,moveByChar(this,r,a,s))}moveByGroup(r,a){return skipAtoms(this,r,moveByChar(this,r,a,s=>byGroup(this,r.head,s)))}visualLineSide(r,a){let s=this.bidiSpans(r),o=this.textDirectionAt(r.from),u=s[a?s.length-1:0];return EditorSelection.cursor(u.side(a,o)+r.from,u.forward(!a,o)?1:-1)}moveToLineBoundary(r,a,s=!0){return moveToLineBoundary(this,r,a,s)}moveVertically(r,a,s){return skipAtoms(this,r,moveVertically(this,r,a,s))}domAtPos(r){return this.docView.domAtPos(r)}posAtDOM(r,a=0){return this.docView.posFromDOM(r,a)}posAtCoords(r,a=!0){return this.readMeasured(),posAtCoords(this,r,a)}coordsAtPos(r,a=1){this.readMeasured();let s=this.docView.coordsAt(r,a);if(!s||s.left==s.right)return s;let o=this.state.doc.lineAt(r),u=this.bidiSpans(o),c=u[BidiSpan.find(u,r-o.from,-1,a)];return flattenRect(s,c.dir==Direction.LTR==a>0)}coordsForChar(r){return this.readMeasured(),this.docView.coordsForChar(r)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(r){return!this.state.facet(perLineTextDirection)||r<this.viewport.from||r>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(r))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(r){if(r.length>MaxBidiLine)return trivialOrder(r.length);let a=this.textDirectionAt(r.from),s;for(let u of this.bidiCache)if(u.from==r.from&&u.dir==a&&(u.fresh||isolatesEq(u.isolates,s=getIsolatedRanges(this,r))))return u.order;s||(s=getIsolatedRanges(this,r));let o=computeOrder(r.text,a,s);return this.bidiCache.push(new CachedOrder(r.from,r.to,a,s,!0,o)),o}get hasFocus(){var r;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((r=this.inputState)===null||r===void 0?void 0:r.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(r){this._root!=r&&(this._root=r,this.observer.setWindow((r.nodeType==9?r:r.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let r of this.plugins)r.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(r,a={}){return scrollIntoView.of(new ScrollTarget(typeof r=="number"?EditorSelection.cursor(r):r,a.y,a.x,a.yMargin,a.xMargin))}scrollSnapshot(){let{scrollTop:r,scrollLeft:a}=this.scrollDOM,s=this.viewState.scrollAnchorAt(r);return scrollIntoView.of(new ScrollTarget(EditorSelection.cursor(s.from),"start","start",s.top-r,a,!0))}setTabFocusMode(r){r==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof r=="boolean"?this.inputState.tabFocusMode=r?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+r)}static domEventHandlers(r){return ViewPlugin.define(()=>({}),{eventHandlers:r})}static domEventObservers(r){return ViewPlugin.define(()=>({}),{eventObservers:r})}static theme(r,a){let s=StyleModule.newName(),o=[theme.of(s),styleModule.of(buildTheme(`.${s}`,r))];return a&&a.dark&&o.push(darkTheme.of(!0)),o}static baseTheme(r){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,r,lightDarkIDs)))}static findFromDOM(r){var a;let s=r.querySelector(".cm-content"),o=s&&ContentView.get(s)||ContentView.get(r);return((a=o==null?void 0:o.rootView)===null||a===void 0?void 0:a.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:n=>n.length?n[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(r,a,s,o,u,c){this.from=r,this.to=a,this.dir=s,this.isolates=o,this.fresh=u,this.order=c}static update(r,a){if(a.empty&&!r.some(u=>u.fresh))return r;let s=[],o=r.length?r[r.length-1].dir:Direction.LTR;for(let u=Math.max(0,r.length-10);u<r.length;u++){let c=r[u];c.dir==o&&!a.touchesRange(c.from,c.to)&&s.push(new CachedOrder(a.mapPos(c.from,1),a.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return s}}function attrsFromFacet(n,r,a){for(let s=n.state.facet(r),o=s.length-1;o>=0;o--){let u=s[o],c=typeof u=="function"?u(n):u;c&&combineAttrs(c,a)}return a}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(n,r){const a=n.split(/-(?!$)/);let s=a[a.length-1];s=="Space"&&(s=" ");let o,u,c,p;for(let d=0;d<a.length-1;++d){const _=a[d];if(/^(cmd|meta|m)$/i.test(_))p=!0;else if(/^a(lt)?$/i.test(_))o=!0;else if(/^(c|ctrl|control)$/i.test(_))u=!0;else if(/^s(hift)?$/i.test(_))c=!0;else if(/^mod$/i.test(_))r=="mac"?p=!0:u=!0;else throw new Error("Unrecognized modifier name: "+_)}return o&&(s="Alt-"+s),u&&(s="Ctrl-"+s),p&&(s="Meta-"+s),c&&(s="Shift-"+s),s}function modifiers(n,r,a){return r.altKey&&(n="Alt-"+n),r.ctrlKey&&(n="Ctrl-"+n),r.metaKey&&(n="Meta-"+n),a!==!1&&r.shiftKey&&(n="Shift-"+n),n}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(n,r){return runHandlers(getKeymap(r.state),n,r,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(n){let r=n.facet(keymap),a=Keymaps.get(r);return a||Keymaps.set(r,a=buildKeymap(r.reduce((s,o)=>s.concat(o),[]))),a}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(n,r=currentPlatform){let a=Object.create(null),s=Object.create(null),o=(c,p)=>{let d=s[c];if(d==null)s[c]=p;else if(d!=p)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},u=(c,p,d,_,ja)=>{var Ja,ec;let tc=a[c]||(a[c]=Object.create(null)),rc=p.split(/ (?!$)/).map(uc=>normalizeKeyName(uc,r));for(let uc=1;uc<rc.length;uc++){let eh=rc.slice(0,uc).join(" ");o(eh,!0),tc[eh]||(tc[eh]={preventDefault:!0,stopPropagation:!1,run:[rh=>{let ah=storedPrefix={view:rh,prefix:eh,scope:c};return setTimeout(()=>{storedPrefix==ah&&(storedPrefix=null)},PrefixTimeout),!0}]})}let nc=rc.join(" ");o(nc,!1);let ic=tc[nc]||(tc[nc]={preventDefault:!1,stopPropagation:!1,run:((ec=(Ja=tc._any)===null||Ja===void 0?void 0:Ja.run)===null||ec===void 0?void 0:ec.slice())||[]});d&&ic.run.push(d),_&&(ic.preventDefault=!0),ja&&(ic.stopPropagation=!0)};for(let c of n){let p=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let _ of p){let ja=a[_]||(a[_]=Object.create(null));ja._any||(ja._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:Ja}=c;for(let ec in ja)ja[ec].run.push(tc=>Ja(tc,currentKeyEvent))}let d=c[r]||c.key;if(d)for(let _ of p)u(_,d,c.run,c.preventDefault,c.stopPropagation),c.shift&&u(_,"Shift-"+d,c.shift,c.preventDefault,c.stopPropagation)}return a}let currentKeyEvent=null;function runHandlers(n,r,a,s){currentKeyEvent=r;let o=keyName(r),u=codePointAt(o,0),c=codePointSize(u)==o.length&&o!=" ",p="",d=!1,_=!1,ja=!1;storedPrefix&&storedPrefix.view==a&&storedPrefix.scope==s&&(p=storedPrefix.prefix+" ",modifierCodes.indexOf(r.keyCode)<0&&(_=!0,storedPrefix=null));let Ja=new Set,ec=ic=>{if(ic){for(let uc of ic.run)if(!Ja.has(uc)&&(Ja.add(uc),uc(a)))return ic.stopPropagation&&(ja=!0),!0;ic.preventDefault&&(ic.stopPropagation&&(ja=!0),_=!0)}return!1},tc=n[s],rc,nc;return tc&&(ec(tc[p+modifiers(o,r,!c)])?d=!0:c&&(r.altKey||r.metaKey||r.ctrlKey)&&!(browser.windows&&r.ctrlKey&&r.altKey)&&(rc=base[r.keyCode])&&rc!=o?(ec(tc[p+modifiers(rc,r,!0)])||r.shiftKey&&(nc=shift[r.keyCode])!=o&&nc!=rc&&ec(tc[p+modifiers(nc,r,!1)]))&&(d=!0):c&&r.shiftKey&&ec(tc[p+modifiers(o,r,!0)])&&(d=!0),!d&&ec(tc._any)&&(d=!0)),_&&(d=!0),d&&ja&&r.stopPropagation(),currentKeyEvent=null,d}class RectangleMarker{constructor(r,a,s,o,u){this.className=r,this.left=a,this.top=s,this.width=o,this.height=u}draw(){let r=document.createElement("div");return r.className=this.className,this.adjust(r),r}update(r,a){return a.className!=this.className?!1:(this.adjust(r),!0)}adjust(r){r.style.left=this.left+"px",r.style.top=this.top+"px",this.width!=null&&(r.style.width=this.width+"px"),r.style.height=this.height+"px"}eq(r){return this.left==r.left&&this.top==r.top&&this.width==r.width&&this.height==r.height&&this.className==r.className}static forRange(r,a,s){if(s.empty){let o=r.coordsAtPos(s.head,s.assoc||1);if(!o)return[];let u=getBase(r);return[new RectangleMarker(a,o.left-u.left,o.top-u.top,null,o.bottom-o.top)]}else return rectanglesForRange(r,a,s)}}function getBase(n){let r=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Direction.LTR?r.left:r.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:r.top-n.scrollDOM.scrollTop*n.scaleY}}function wrappedLine(n,r,a,s){let o=n.coordsAtPos(r,a*2);if(!o)return s;let u=n.dom.getBoundingClientRect(),c=(o.top+o.bottom)/2,p=n.posAtCoords({x:u.left+1,y:c}),d=n.posAtCoords({x:u.right-1,y:c});return p==null||d==null?s:{from:Math.max(s.from,Math.min(p,d)),to:Math.min(s.to,Math.max(p,d))}}function rectanglesForRange(n,r,a){if(a.to<=n.viewport.from||a.from>=n.viewport.to)return[];let s=Math.max(a.from,n.viewport.from),o=Math.min(a.to,n.viewport.to),u=n.textDirection==Direction.LTR,c=n.contentDOM,p=c.getBoundingClientRect(),d=getBase(n),_=c.querySelector(".cm-line"),ja=_&&window.getComputedStyle(_),Ja=p.left+(ja?parseInt(ja.paddingLeft)+Math.min(0,parseInt(ja.textIndent)):0),ec=p.right-(ja?parseInt(ja.paddingRight):0),tc=blockAt(n,s),rc=blockAt(n,o),nc=tc.type==BlockType.Text?tc:null,ic=rc.type==BlockType.Text?rc:null;if(nc&&(n.lineWrapping||tc.widgetLineBreaks)&&(nc=wrappedLine(n,s,1,nc)),ic&&(n.lineWrapping||rc.widgetLineBreaks)&&(ic=wrappedLine(n,o,-1,ic)),nc&&ic&&nc.from==ic.from&&nc.to==ic.to)return eh(rh(a.from,a.to,nc));{let ih=nc?rh(a.from,null,nc):ah(tc,!1),oh=ic?rh(null,a.to,ic):ah(rc,!0),uh=[];return(nc||tc).to<(ic||rc).from-(nc&&ic?1:0)||tc.widgetLineBreaks>1&&ih.bottom+n.defaultLineHeight/2<oh.top?uh.push(uc(Ja,ih.bottom,ec,oh.top)):ih.bottom<oh.top&&n.elementAtHeight((ih.bottom+oh.top)/2).type==BlockType.Text&&(ih.bottom=oh.top=(ih.bottom+oh.top)/2),eh(ih).concat(uh).concat(eh(oh))}function uc(ih,oh,uh,ch){return new RectangleMarker(r,ih-d.left,oh-d.top-.01,uh-ih,ch-oh+.01)}function eh({top:ih,bottom:oh,horizontal:uh}){let ch=[];for(let hh=0;hh<uh.length;hh+=2)ch.push(uc(uh[hh],ih,uh[hh+1],oh));return ch}function rh(ih,oh,uh){let ch=1e9,hh=-1e9,dh=[];function gh(ph,yh,xh,_h,bh){let Dh=n.coordsAtPos(ph,ph==uh.to?-2:2),Th=n.coordsAtPos(xh,xh==uh.from?2:-2);!Dh||!Th||(ch=Math.min(Dh.top,Th.top,ch),hh=Math.max(Dh.bottom,Th.bottom,hh),bh==Direction.LTR?dh.push(u&&yh?Ja:Dh.left,u&&_h?ec:Th.right):dh.push(!u&&_h?Ja:Th.left,!u&&yh?ec:Dh.right))}let fh=ih??uh.from,vh=oh??uh.to;for(let ph of n.visibleRanges)if(ph.to>fh&&ph.from<vh)for(let yh=Math.max(ph.from,fh),xh=Math.min(ph.to,vh);;){let _h=n.state.doc.lineAt(yh);for(let bh of n.bidiSpans(_h)){let Dh=bh.from+_h.from,Th=bh.to+_h.from;if(Dh>=xh)break;Th>yh&&gh(Math.max(Dh,yh),ih==null&&Dh<=fh,Math.min(Th,xh),oh==null&&Th>=vh,bh.dir)}if(yh=_h.to+1,yh>=xh)break}return dh.length==0&&gh(fh,ih==null,vh,oh==null,n.textDirection),{top:ch,bottom:hh,horizontal:dh}}function ah(ih,oh){let uh=p.top+(oh?ih.top:ih.bottom);return{top:uh,bottom:uh,horizontal:[]}}}function sameMarker(n,r){return n.constructor==r.constructor&&n.eq(r)}class LayerView{constructor(r,a){this.view=r,this.layer=a,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=r.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),a.above&&this.dom.classList.add("cm-layer-above"),a.class&&this.dom.classList.add(a.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(r.state),r.requestMeasure(this.measureReq),a.mount&&a.mount(this.dom,r)}update(r){r.startState.facet(layerOrder)!=r.state.facet(layerOrder)&&this.setOrder(r.state),(this.layer.update(r,this.dom)||r.geometryChanged)&&(this.scale(),r.view.requestMeasure(this.measureReq))}docViewUpdate(r){this.layer.updateOnDocViewUpdate!==!1&&r.requestMeasure(this.measureReq)}setOrder(r){let a=0,s=r.facet(layerOrder);for(;a<s.length&&s[a]!=this.layer;)a++;this.dom.style.zIndex=String((this.layer.above?150:-1)-a)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:r,scaleY:a}=this.view;(r!=this.scaleX||a!=this.scaleY)&&(this.scaleX=r,this.scaleY=a,this.dom.style.transform=`scale(${1/r}, ${1/a})`)}draw(r){if(r.length!=this.drawn.length||r.some((a,s)=>!sameMarker(a,this.drawn[s]))){let a=this.dom.firstChild,s=0;for(let o of r)o.update&&a&&o.constructor&&this.drawn[s].constructor&&o.update(a,this.drawn[s])?(a=a.nextSibling,s++):this.dom.insertBefore(o.draw(),a);for(;a;){let o=a.nextSibling;a.remove(),a=o}this.drawn=r}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(n){return[ViewPlugin.define(r=>new LayerView(r,n)),layerOrder.of(n)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(n){return combineConfig(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(r,a)=>Math.min(r,a),drawRangeCursor:(r,a)=>r||a})}});function drawSelection(n={}){return[selectionConfig.of(n),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(n){return n.startState.facet(selectionConfig)!=n.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(n){let{state:r}=n,a=r.facet(selectionConfig),s=[];for(let o of r.selection.ranges){let u=o==r.selection.main;if(o.empty?!u||CanHidePrimary:a.drawRangeCursor){let c=u?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",p=o.empty?o:EditorSelection.cursor(o.head,o.head>o.anchor?-1:1);for(let d of RectangleMarker.forRange(n,c,p))s.push(d)}}return s},update(n,r){n.transactions.some(s=>s.selection)&&(r.style.animationName=r.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let a=configChanged(n);return a&&setBlinkRate(n.state,r),n.docChanged||n.selectionSet||a},mount(n,r){setBlinkRate(r.state,n)},class:"cm-cursorLayer"});function setBlinkRate(n,r){r.style.animationDuration=n.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(n){return n.state.selection.ranges.map(r=>r.empty?[]:RectangleMarker.forRange(n,"cm-selectionBackground",r)).reduce((r,a)=>r.concat(a))},update(n,r){return n.docChanged||n.selectionSet||n.viewportChanged||configChanged(n)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor=themeSpec[".cm-content"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function iterMatches(n,r,a,s,o){r.lastIndex=0;for(let u=n.iterRange(a,s),c=a,p;!u.next().done;c+=u.value.length)if(!u.lineBreak)for(;p=r.exec(u.value);)o(c+p.index,p)}function matchRanges(n,r){let a=n.visibleRanges;if(a.length==1&&a[0].from==n.viewport.from&&a[0].to==n.viewport.to)return a;let s=[];for(let{from:o,to:u}of a)o=Math.max(n.state.doc.lineAt(o).from,o-r),u=Math.min(n.state.doc.lineAt(u).to,u+r),s.length&&s[s.length-1].to>=o?s[s.length-1].to=u:s.push({from:o,to:u});return s}class MatchDecorator{constructor(r){const{regexp:a,decoration:s,decorate:o,boundary:u,maxLength:c=1e3}=r;if(!a.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=a,o)this.addMatch=(p,d,_,ja)=>o(ja,_,_+p[0].length,p,d);else if(typeof s=="function")this.addMatch=(p,d,_,ja)=>{let Ja=s(p,d,_);Ja&&ja(_,_+p[0].length,Ja)};else if(s)this.addMatch=(p,d,_,ja)=>ja(_,_+p[0].length,s);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=u,this.maxLength=c}createDeco(r){let a=new RangeSetBuilder,s=a.add.bind(a);for(let{from:o,to:u}of matchRanges(r,this.maxLength))iterMatches(r.state.doc,this.regexp,o,u,(c,p)=>this.addMatch(p,r,c,s));return a.finish()}updateDeco(r,a){let s=1e9,o=-1;return r.docChanged&&r.changes.iterChanges((u,c,p,d)=>{d>r.view.viewport.from&&p<r.view.viewport.to&&(s=Math.min(p,s),o=Math.max(d,o))}),r.viewportChanged||o-s>1e3?this.createDeco(r.view):o>-1?this.updateRange(r.view,a.map(r.changes),s,o):a}updateRange(r,a,s,o){for(let u of r.visibleRanges){let c=Math.max(u.from,s),p=Math.min(u.to,o);if(p>c){let d=r.state.doc.lineAt(c),_=d.to<p?r.state.doc.lineAt(p):d,ja=Math.max(u.from,d.from),Ja=Math.min(u.to,_.to);if(this.boundary){for(;c>d.from;c--)if(this.boundary.test(d.text[c-1-d.from])){ja=c;break}for(;p<_.to;p++)if(this.boundary.test(_.text[p-_.from])){Ja=p;break}}let ec=[],tc,rc=(nc,ic,uc)=>ec.push(uc.range(nc,ic));if(d==_)for(this.regexp.lastIndex=ja-d.from;(tc=this.regexp.exec(d.text))&&tc.index<Ja-d.from;)this.addMatch(tc,r,tc.index+d.from,rc);else iterMatches(r.state.doc,this.regexp,ja,Ja,(nc,ic)=>this.addMatch(ic,r,nc,rc));a=a.update({filterFrom:ja,filterTo:Ja,filter:(nc,ic)=>nc<ja||ic>Ja,add:ec})}}return a}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var n;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let r=document.body.style;_supportsTabSize=((n=r.tabSize)!==null&&n!==void 0?n:r.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(n){let r=combineConfig(n,{render:null,specialChars:Specials,addSpecialChars:null});return(r.replaceTabs=!supportsTabSize())&&(r.specialChars=new RegExp("	|"+r.specialChars.source,UnicodeRegexpSupport)),r.addSpecialChars&&(r.specialChars=new RegExp(r.specialChars.source+"|"+r.addSpecialChars.source,UnicodeRegexpSupport)),r}});function highlightSpecialChars(n={}){return[specialCharConfig.of(n),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new MatchDecorator({regexp:n.specialChars,decoration:(r,a,s)=>{let{doc:o}=a.state,u=codePointAt(r[0],0);if(u==9){let c=o.lineAt(s),p=a.state.tabSize,d=countColumn(c.text,p,s-c.from);return Decoration.replace({widget:new TabWidget((p-d%p)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[u]||(this.decorationCache[u]=Decoration.replace({widget:new SpecialCharWidget(n,u)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let r=n.state.facet(specialCharConfig);n.startState.facet(specialCharConfig)!=r?(this.decorator=this.makeDecorator(r),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const DefaultPlaceholder="•";function placeholder$1(n){return n>=32?DefaultPlaceholder:n==10?"␤":String.fromCharCode(9216+n)}class SpecialCharWidget extends WidgetType{constructor(r,a){super(),this.options=r,this.code=a}eq(r){return r.code==this.code}toDOM(r){let a=placeholder$1(this.code),s=r.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,s,a);if(o)return o;let u=document.createElement("span");return u.textContent=a,u.title=s,u.setAttribute("aria-label",s),u.className="cm-specialChar",u}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(r){super(),this.width=r}eq(r){return r.width==this.width}toDOM(){let r=document.createElement("span");return r.textContent="	",r.className="cm-tab",r.style.width=this.width+"px",r}ignoreEvent(){return!1}}class GutterMarker extends RangeValue{compare(r){return this==r||this.constructor==r.constructor&&this.eq(r)}eq(r){return!1}destroy(r){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(r,a){this.from=r,this.to=a}}class NodeProp{constructor(r={}){this.id=nextPropID++,this.perNode=!!r.perNode,this.deserialize=r.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(r){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof r!="function"&&(r=NodeType.match(r)),a=>{let s=r(a);return s===void 0?null:[this,s]}}}NodeProp.closedBy=new NodeProp({deserialize:n=>n.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:n=>n.split(" ")});NodeProp.group=new NodeProp({deserialize:n=>n.split(" ")});NodeProp.isolate=new NodeProp({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(r,a,s){this.tree=r,this.overlay=a,this.parser=s}static get(r){return r&&r.props&&r.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(r,a,s,o=0){this.name=r,this.props=a,this.id=s,this.flags=o}static define(r){let a=r.props&&r.props.length?Object.create(null):noProps,s=(r.top?1:0)|(r.skipped?2:0)|(r.error?4:0)|(r.name==null?8:0),o=new NodeType(r.name||"",a,r.id,s);if(r.props){for(let u of r.props)if(Array.isArray(u)||(u=u(o)),u){if(u[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");a[u[0].id]=u[1]}}return o}prop(r){return this.props[r.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(r){if(typeof r=="string"){if(this.name==r)return!0;let a=this.prop(NodeProp.group);return a?a.indexOf(r)>-1:!1}return this.id==r}static match(r){let a=Object.create(null);for(let s in r)for(let o of s.split(" "))a[o]=r[s];return s=>{for(let o=s.prop(NodeProp.group),u=-1;u<(o?o.length:0);u++){let c=a[u<0?s.name:o[u]];if(c)return c}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(r){this.types=r;for(let a=0;a<r.length;a++)if(r[a].id!=a)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...r){let a=[];for(let s of this.types){let o=null;for(let u of r){let c=u(s);c&&(o||(o=Object.assign({},s.props)),o[c[0].id]=c[1])}a.push(o?new NodeType(s.name,o,s.id,s.flags):s)}return new NodeSet(a)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(r,a,s,o,u){if(this.type=r,this.children=a,this.positions=s,this.length=o,this.props=null,u&&u.length){this.props=Object.create(null);for(let[c,p]of u)this.props[typeof c=="number"?c:c.id]=p}}toString(){let r=MountedTree.get(this);if(r&&!r.overlay)return r.tree.toString();let a="";for(let s of this.children){let o=s.toString();o&&(a&&(a+=","),a+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(a.length?"("+a+")":""):a}cursor(r=0){return new TreeCursor(this.topNode,r)}cursorAt(r,a=0,s=0){let o=CachedNode.get(this)||this.topNode,u=new TreeCursor(o);return u.moveTo(r,a),CachedNode.set(this,u._tree),u}get topNode(){return new TreeNode(this,0,0,null)}resolve(r,a=0){let s=resolveNode(CachedNode.get(this)||this.topNode,r,a,!1);return CachedNode.set(this,s),s}resolveInner(r,a=0){let s=resolveNode(CachedInnerNode.get(this)||this.topNode,r,a,!0);return CachedInnerNode.set(this,s),s}resolveStack(r,a=0){return stackIterator(this,r,a)}iterate(r){let{enter:a,leave:s,from:o=0,to:u=this.length}=r,c=r.mode||0,p=(c&IterMode.IncludeAnonymous)>0;for(let d=this.cursor(c|IterMode.IncludeAnonymous);;){let _=!1;if(d.from<=u&&d.to>=o&&(!p&&d.type.isAnonymous||a(d)!==!1)){if(d.firstChild())continue;_=!0}for(;_&&s&&(p||!d.type.isAnonymous)&&s(d),!d.nextSibling();){if(!d.parent())return;_=!0}}}prop(r){return r.perNode?this.props?this.props[r.id]:void 0:this.type.prop(r)}get propValues(){let r=[];if(this.props)for(let a in this.props)r.push([+a,this.props[a]]);return r}balance(r={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(a,s,o)=>new Tree(this.type,a,s,o,this.propValues),r.makeTree||((a,s,o)=>new Tree(NodeType.none,a,s,o)))}static build(r){return buildTree(r)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(r,a){this.buffer=r,this.index=a}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(r,a,s){this.buffer=r,this.length=a,this.set=s}get type(){return NodeType.none}toString(){let r=[];for(let a=0;a<this.buffer.length;)r.push(this.childString(a)),a=this.buffer[a+3];return r.join(",")}childString(r){let a=this.buffer[r],s=this.buffer[r+3],o=this.set.types[a],u=o.name;if(/\W/.test(u)&&!o.isError&&(u=JSON.stringify(u)),r+=4,s==r)return u;let c=[];for(;r<s;)c.push(this.childString(r)),r=this.buffer[r+3];return u+"("+c.join(",")+")"}findChild(r,a,s,o,u){let{buffer:c}=this,p=-1;for(let d=r;d!=a&&!(checkSide(u,o,c[d+1],c[d+2])&&(p=d,s>0));d=c[d+3]);return p}slice(r,a,s){let o=this.buffer,u=new Uint16Array(a-r),c=0;for(let p=r,d=0;p<a;){u[d++]=o[p++],u[d++]=o[p++]-s;let _=u[d++]=o[p++]-s;u[d++]=o[p++]-r,c=Math.max(c,_)}return new TreeBuffer(u,c,this.set)}}function checkSide(n,r,a,s){switch(n){case-2:return a<r;case-1:return s>=r&&a<r;case 0:return a<r&&s>r;case 1:return a<=r&&s>r;case 2:return s>r;case 4:return!0}}function resolveNode(n,r,a,s){for(var o;n.from==n.to||(a<1?n.from>=r:n.from>r)||(a>-1?n.to<=r:n.to<r);){let c=!s&&n instanceof TreeNode&&n.index<0?null:n.parent;if(!c)return n;n=c}let u=s?0:IterMode.IgnoreOverlays;if(s)for(let c=n,p=c.parent;p;c=p,p=c.parent)c instanceof TreeNode&&c.index<0&&((o=p.enter(r,a,u))===null||o===void 0?void 0:o.from)!=c.from&&(n=p);for(;;){let c=n.enter(r,a,u);if(!c)return n;n=c}}class BaseNode{cursor(r=0){return new TreeCursor(this,r)}getChild(r,a=null,s=null){let o=getChildren(this,r,a,s);return o.length?o[0]:null}getChildren(r,a=null,s=null){return getChildren(this,r,a,s)}resolve(r,a=0){return resolveNode(this,r,a,!1)}resolveInner(r,a=0){return resolveNode(this,r,a,!0)}matchContext(r){return matchNodeContext(this,r)}enterUnfinishedNodesBefore(r){let a=this.childBefore(r),s=this;for(;a;){let o=a.lastChild;if(!o||o.to!=a.to)break;o.type.isError&&o.from==o.to?(s=a,a=o.prevSibling):a=o}return s}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(r,a,s,o){super(),this._tree=r,this.from=a,this.index=s,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(r,a,s,o,u=0){for(let c=this;;){for(let{children:p,positions:d}=c._tree,_=a>0?p.length:-1;r!=_;r+=a){let ja=p[r],Ja=d[r]+c.from;if(checkSide(o,s,Ja,Ja+ja.length)){if(ja instanceof TreeBuffer){if(u&IterMode.ExcludeBuffers)continue;let ec=ja.findChild(0,ja.buffer.length,a,s-Ja,o);if(ec>-1)return new BufferNode(new BufferContext(c,ja,r,Ja),null,ec)}else if(u&IterMode.IncludeAnonymous||!ja.type.isAnonymous||hasChild(ja)){let ec;if(!(u&IterMode.IgnoreMounts)&&(ec=MountedTree.get(ja))&&!ec.overlay)return new TreeNode(ec.tree,Ja,r,c);let tc=new TreeNode(ja,Ja,r,c);return u&IterMode.IncludeAnonymous||!tc.type.isAnonymous?tc:tc.nextChild(a<0?ja.children.length-1:0,a,s,o)}}}if(u&IterMode.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?r=c.index+a:r=a<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(r){return this.nextChild(0,1,r,2)}childBefore(r){return this.nextChild(this._tree.children.length-1,-1,r,-2)}enter(r,a,s=0){let o;if(!(s&IterMode.IgnoreOverlays)&&(o=MountedTree.get(this._tree))&&o.overlay){let u=r-this.from;for(let{from:c,to:p}of o.overlay)if((a>0?c<=u:c<u)&&(a<0?p>=u:p>u))return new TreeNode(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,r,a,s)}nextSignificantParent(){let r=this;for(;r.type.isAnonymous&&r._parent;)r=r._parent;return r}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(n,r,a,s){let o=n.cursor(),u=[];if(!o.firstChild())return u;if(a!=null){for(let c=!1;!c;)if(c=o.type.is(a),!o.nextSibling())return u}for(;;){if(s!=null&&o.type.is(s))return u;if(o.type.is(r)&&u.push(o.node),!o.nextSibling())return s==null?u:[]}}function matchNodeContext(n,r,a=r.length-1){for(let s=n.parent;a>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(r[a]&&r[a]!=s.name)return!1;a--}}return!0}class BufferContext{constructor(r,a,s,o){this.parent=r,this.buffer=a,this.index=s,this.start=o}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(r,a,s){super(),this.context=r,this._parent=a,this.index=s,this.type=r.buffer.set.types[r.buffer.buffer[s]]}child(r,a,s){let{buffer:o}=this.context,u=o.findChild(this.index+4,o.buffer[this.index+3],r,a-this.context.start,s);return u<0?null:new BufferNode(this.context,this,u)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(r){return this.child(1,r,2)}childBefore(r){return this.child(-1,r,-2)}enter(r,a,s=0){if(s&IterMode.ExcludeBuffers)return null;let{buffer:o}=this.context,u=o.findChild(this.index+4,o.buffer[this.index+3],a>0?1:-1,r-this.context.start,a);return u<0?null:new BufferNode(this.context,this,u)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(r){return this._parent?null:this.context.parent.nextChild(this.context.index+r,r,0,4)}get nextSibling(){let{buffer:r}=this.context,a=r.buffer[this.index+3];return a<(this._parent?r.buffer[this._parent.index+3]:r.buffer.length)?new BufferNode(this.context,this._parent,a):this.externalSibling(1)}get prevSibling(){let{buffer:r}=this.context,a=this._parent?this._parent.index+4:0;return this.index==a?this.externalSibling(-1):new BufferNode(this.context,this._parent,r.findChild(a,this.index,-1,0,4))}get tree(){return null}toTree(){let r=[],a=[],{buffer:s}=this.context,o=this.index+4,u=s.buffer[this.index+3];if(u>o){let c=s.buffer[this.index+1];r.push(s.slice(o,u,c)),a.push(0)}return new Tree(this.type,r,a,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(n){if(!n.length)return null;let r=0,a=n[0];for(let u=1;u<n.length;u++){let c=n[u];(c.from>a.from||c.to<a.to)&&(a=c,r=u)}let s=a instanceof TreeNode&&a.index<0?null:a.parent,o=n.slice();return s?o[r]=s:o.splice(r,1),new StackIterator(o,a)}class StackIterator{constructor(r,a){this.heads=r,this.node=a}get next(){return iterStack(this.heads)}}function stackIterator(n,r,a){let s=n.resolveInner(r,a),o=null;for(let u=s instanceof TreeNode?s:s.context.parent;u;u=u.parent)if(u.index<0){let c=u.parent;(o||(o=[s])).push(c.resolve(r,a)),u=c}else{let c=MountedTree.get(u.tree);if(c&&c.overlay&&c.overlay[0].from<=r&&c.overlay[c.overlay.length-1].to>=r){let p=new TreeNode(c.tree,c.overlay[0].from+u.from,-1,u);(o||(o=[s])).push(resolveNode(p,r,a,!1))}}return o?iterStack(o):s}class TreeCursor{get name(){return this.type.name}constructor(r,a=0){if(this.mode=a,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,r instanceof TreeNode)this.yieldNode(r);else{this._tree=r.context.parent,this.buffer=r.context;for(let s=r._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=r,this.yieldBuf(r.index)}}yieldNode(r){return r?(this._tree=r,this.type=r.type,this.from=r.from,this.to=r.to,!0):!1}yieldBuf(r,a){this.index=r;let{start:s,buffer:o}=this.buffer;return this.type=a||o.set.types[o.buffer[r]],this.from=s+o.buffer[r+1],this.to=s+o.buffer[r+2],!0}yield(r){return r?r instanceof TreeNode?(this.buffer=null,this.yieldNode(r)):(this.buffer=r.context,this.yieldBuf(r.index,r.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(r,a,s){if(!this.buffer)return this.yield(this._tree.nextChild(r<0?this._tree._tree.children.length-1:0,r,a,s,this.mode));let{buffer:o}=this.buffer,u=o.findChild(this.index+4,o.buffer[this.index+3],r,a-this.buffer.start,s);return u<0?!1:(this.stack.push(this.index),this.yieldBuf(u))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(r){return this.enterChild(1,r,2)}childBefore(r){return this.enterChild(-1,r,-2)}enter(r,a,s=this.mode){return this.buffer?s&IterMode.ExcludeBuffers?!1:this.enterChild(1,r,a):this.yield(this._tree.enter(r,a,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let r=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(r)}sibling(r){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+r,r,0,4,this.mode)):!1;let{buffer:a}=this.buffer,s=this.stack.length-1;if(r<0){let o=s<0?0:this.stack[s]+4;if(this.index!=o)return this.yieldBuf(a.findChild(o,this.index,-1,0,4))}else{let o=a.buffer[this.index+3];if(o<(s<0?a.buffer.length:a.buffer[this.stack[s]+3]))return this.yieldBuf(o)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+r,r,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(r){let a,s,{buffer:o}=this;if(o){if(r>0){if(this.index<o.buffer.buffer.length)return!1}else for(let u=0;u<this.index;u++)if(o.buffer.buffer[u+3]<this.index)return!1;({index:a,parent:s}=o)}else({index:a,_parent:s}=this._tree);for(;s;{index:a,_parent:s}=s)if(a>-1)for(let u=a+r,c=r<0?-1:s._tree.children.length;u!=c;u+=r){let p=s._tree.children[u];if(this.mode&IterMode.IncludeAnonymous||p instanceof TreeBuffer||!p.type.isAnonymous||hasChild(p))return!1}return!0}move(r,a){if(a&&this.enterChild(r,0,4))return!0;for(;;){if(this.sibling(r))return!0;if(this.atLastNode(r)||!this.parent())return!1}}next(r=!0){return this.move(1,r)}prev(r=!0){return this.move(-1,r)}moveTo(r,a=0){for(;(this.from==this.to||(a<1?this.from>=r:this.from>r)||(a>-1?this.to<=r:this.to<r))&&this.parent(););for(;this.enterChild(1,r,a););return this}get node(){if(!this.buffer)return this._tree;let r=this.bufferNode,a=null,s=0;if(r&&r.context==this.buffer)e:for(let o=this.index,u=this.stack.length;u>=0;){for(let c=r;c;c=c._parent)if(c.index==o){if(o==this.index)return c;a=c,s=u+1;break e}o=this.stack[--u]}for(let o=s;o<this.stack.length;o++)a=new BufferNode(this.buffer,a,this.stack[o]);return this.bufferNode=new BufferNode(this.buffer,a,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(r,a){for(let s=0;;){let o=!1;if(this.type.isAnonymous||r(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(o=!0)}for(;o&&a&&a(this),o=this.type.isAnonymous,!this.nextSibling();){if(!s)return;this.parent(),s--,o=!0}}}matchContext(r){if(!this.buffer)return matchNodeContext(this.node,r);let{buffer:a}=this.buffer,{types:s}=a.set;for(let o=r.length-1,u=this.stack.length-1;o>=0;u--){if(u<0)return matchNodeContext(this.node,r,o);let c=s[a.buffer[this.stack[u]]];if(!c.isAnonymous){if(r[o]&&r[o]!=c.name)return!1;o--}}return!0}}function hasChild(n){return n.children.some(r=>r instanceof TreeBuffer||!r.type.isAnonymous||hasChild(r))}function buildTree(n){var r;let{buffer:a,nodeSet:s,maxBufferLength:o=DefaultBufferLength,reused:u=[],minRepeatType:c=s.types.length}=n,p=Array.isArray(a)?new FlatBufferCursor(a,a.length):a,d=s.types,_=0,ja=0;function Ja(ih,oh,uh,ch,hh,dh){let{id:gh,start:fh,end:vh,size:ph}=p,yh=ja;for(;ph<0;)if(p.next(),ph==-1){let Th=u[gh];uh.push(Th),ch.push(fh-ih);return}else if(ph==-3){_=gh;return}else if(ph==-4){ja=gh;return}else throw new RangeError(`Unrecognized record size: ${ph}`);let xh=d[gh],_h,bh,Dh=fh-ih;if(vh-fh<=o&&(bh=ic(p.pos-oh,hh))){let Th=new Uint16Array(bh.size-bh.skip),Ch=p.pos-bh.size,wh=Th.length;for(;p.pos>Ch;)wh=uc(bh.start,Th,wh);_h=new TreeBuffer(Th,vh-bh.start,s),Dh=bh.start-ih}else{let Th=p.pos-ph;p.next();let Ch=[],wh=[],Nh=gh>=c?gh:-1,Rh=0,kh=vh;for(;p.pos>Th;)Nh>=0&&p.id==Nh&&p.size>=0?(p.end<=kh-o&&(rc(Ch,wh,fh,Rh,p.end,kh,Nh,yh),Rh=Ch.length,kh=p.end),p.next()):dh>2500?ec(fh,Th,Ch,wh):Ja(fh,Th,Ch,wh,Nh,dh+1);if(Nh>=0&&Rh>0&&Rh<Ch.length&&rc(Ch,wh,fh,Rh,fh,kh,Nh,yh),Ch.reverse(),wh.reverse(),Nh>-1&&Rh>0){let Lh=tc(xh);_h=balanceRange(xh,Ch,wh,0,Ch.length,0,vh-fh,Lh,Lh)}else _h=nc(xh,Ch,wh,vh-fh,yh-vh)}uh.push(_h),ch.push(Dh)}function ec(ih,oh,uh,ch){let hh=[],dh=0,gh=-1;for(;p.pos>oh;){let{id:fh,start:vh,end:ph,size:yh}=p;if(yh>4)p.next();else{if(gh>-1&&vh<gh)break;gh<0&&(gh=ph-o),hh.push(fh,vh,ph),dh++,p.next()}}if(dh){let fh=new Uint16Array(dh*4),vh=hh[hh.length-2];for(let ph=hh.length-3,yh=0;ph>=0;ph-=3)fh[yh++]=hh[ph],fh[yh++]=hh[ph+1]-vh,fh[yh++]=hh[ph+2]-vh,fh[yh++]=yh;uh.push(new TreeBuffer(fh,hh[2]-vh,s)),ch.push(vh-ih)}}function tc(ih){return(oh,uh,ch)=>{let hh=0,dh=oh.length-1,gh,fh;if(dh>=0&&(gh=oh[dh])instanceof Tree){if(!dh&&gh.type==ih&&gh.length==ch)return gh;(fh=gh.prop(NodeProp.lookAhead))&&(hh=uh[dh]+gh.length+fh)}return nc(ih,oh,uh,ch,hh)}}function rc(ih,oh,uh,ch,hh,dh,gh,fh){let vh=[],ph=[];for(;ih.length>ch;)vh.push(ih.pop()),ph.push(oh.pop()+uh-hh);ih.push(nc(s.types[gh],vh,ph,dh-hh,fh-dh)),oh.push(hh-uh)}function nc(ih,oh,uh,ch,hh=0,dh){if(_){let gh=[NodeProp.contextHash,_];dh=dh?[gh].concat(dh):[gh]}if(hh>25){let gh=[NodeProp.lookAhead,hh];dh=dh?[gh].concat(dh):[gh]}return new Tree(ih,oh,uh,ch,dh)}function ic(ih,oh){let uh=p.fork(),ch=0,hh=0,dh=0,gh=uh.end-o,fh={size:0,start:0,skip:0};e:for(let vh=uh.pos-ih;uh.pos>vh;){let ph=uh.size;if(uh.id==oh&&ph>=0){fh.size=ch,fh.start=hh,fh.skip=dh,dh+=4,ch+=4,uh.next();continue}let yh=uh.pos-ph;if(ph<0||yh<vh||uh.start<gh)break;let xh=uh.id>=c?4:0,_h=uh.start;for(uh.next();uh.pos>yh;){if(uh.size<0)if(uh.size==-3)xh+=4;else break e;else uh.id>=c&&(xh+=4);uh.next()}hh=_h,ch+=ph,dh+=xh}return(oh<0||ch==ih)&&(fh.size=ch,fh.start=hh,fh.skip=dh),fh.size>4?fh:void 0}function uc(ih,oh,uh){let{id:ch,start:hh,end:dh,size:gh}=p;if(p.next(),gh>=0&&ch<c){let fh=uh;if(gh>4){let vh=p.pos-(gh-4);for(;p.pos>vh;)uh=uc(ih,oh,uh)}oh[--uh]=fh,oh[--uh]=dh-ih,oh[--uh]=hh-ih,oh[--uh]=ch}else gh==-3?_=ch:gh==-4&&(ja=ch);return uh}let eh=[],rh=[];for(;p.pos>0;)Ja(n.start||0,n.bufferStart||0,eh,rh,-1,0);let ah=(r=n.length)!==null&&r!==void 0?r:eh.length?rh[0]+eh[0].length:0;return new Tree(d[n.topID],eh.reverse(),rh.reverse(),ah)}const nodeSizeCache=new WeakMap;function nodeSize(n,r){if(!n.isAnonymous||r instanceof TreeBuffer||r.type!=n)return 1;let a=nodeSizeCache.get(r);if(a==null){a=1;for(let s of r.children){if(s.type!=n||!(s instanceof Tree)){a=1;break}a+=nodeSize(n,s)}nodeSizeCache.set(r,a)}return a}function balanceRange(n,r,a,s,o,u,c,p,d){let _=0;for(let rc=s;rc<o;rc++)_+=nodeSize(n,r[rc]);let ja=Math.ceil(_*1.5/8),Ja=[],ec=[];function tc(rc,nc,ic,uc,eh){for(let rh=ic;rh<uc;){let ah=rh,ih=nc[rh],oh=nodeSize(n,rc[rh]);for(rh++;rh<uc;rh++){let uh=nodeSize(n,rc[rh]);if(oh+uh>=ja)break;oh+=uh}if(rh==ah+1){if(oh>ja){let uh=rc[ah];tc(uh.children,uh.positions,0,uh.children.length,nc[ah]+eh);continue}Ja.push(rc[ah])}else{let uh=nc[rh-1]+rc[rh-1].length-ih;Ja.push(balanceRange(n,rc,nc,ah,rh,ih,uh,null,d))}ec.push(ih+eh-u)}}return tc(r,a,s,o,0),(p||d)(Ja,ec,c)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(r,a,s){let o=this.map.get(r);o||this.map.set(r,o=new Map),o.set(a,s)}getBuffer(r,a){let s=this.map.get(r);return s&&s.get(a)}set(r,a){r instanceof BufferNode?this.setBuffer(r.context.buffer,r.index,a):r instanceof TreeNode&&this.map.set(r.tree,a)}get(r){return r instanceof BufferNode?this.getBuffer(r.context.buffer,r.index):r instanceof TreeNode?this.map.get(r.tree):void 0}cursorSet(r,a){r.buffer?this.setBuffer(r.buffer.buffer,r.index,a):this.map.set(r.tree,a)}cursorGet(r){return r.buffer?this.getBuffer(r.buffer.buffer,r.index):this.map.get(r.tree)}}class TreeFragment{constructor(r,a,s,o,u=!1,c=!1){this.from=r,this.to=a,this.tree=s,this.offset=o,this.open=(u?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(r,a=[],s=!1){let o=[new TreeFragment(0,r.length,r,0,!1,s)];for(let u of a)u.to>r.length&&o.push(u);return o}static applyChanges(r,a,s=128){if(!a.length)return r;let o=[],u=1,c=r.length?r[0]:null;for(let p=0,d=0,_=0;;p++){let ja=p<a.length?a[p]:null,Ja=ja?ja.fromA:1e9;if(Ja-d>=s)for(;c&&c.from<Ja;){let ec=c;if(d>=ec.from||Ja<=ec.to||_){let tc=Math.max(ec.from,d)-_,rc=Math.min(ec.to,Ja)-_;ec=tc>=rc?null:new TreeFragment(tc,rc,ec.tree,ec.offset+_,p>0,!!ja)}if(ec&&o.push(ec),c.to>Ja)break;c=u<r.length?r[u++]:null}if(!ja)break;d=ja.toA,_=ja.toA-ja.toB}return o}}class Parser{startParse(r,a,s){return typeof r=="string"&&(r=new StringInput(r)),s=s?s.length?s.map(o=>new Range(o.from,o.to)):[new Range(0,0)]:[new Range(0,r.length)],this.createParse(r,a||[],s)}parse(r,a,s){let o=this.startParse(r,a,s);for(;;){let u=o.advance();if(u)return u}}}class StringInput{constructor(r){this.string=r}get length(){return this.string.length}chunk(r){return this.string.slice(r)}get lineChunks(){return!1}read(r,a){return this.string.slice(r,a)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(r,a,s){this.set=r,this.base=a,this.modified=s,this.id=nextTagID++}static define(r){if(r!=null&&r.base)throw new Error("Can not derive from a modified tag");let a=new Tag([],null,[]);if(a.set.push(a),r)for(let s of r.set)a.set.push(s);return a}static defineModifier(){let r=new Modifier;return a=>a.modified.indexOf(r)>-1?a:Modifier.get(a.base||a,a.modified.concat(r).sort((s,o)=>s.id-o.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(r,a){if(!a.length)return r;let s=a[0].instances.find(p=>p.base==r&&sameArray(a,p.modified));if(s)return s;let o=[],u=new Tag(o,r,a);for(let p of a)p.instances.push(u);let c=powerSet(a);for(let p of r.set)if(!p.modified.length)for(let d of c)o.push(Modifier.get(p,d));return u}}function sameArray(n,r){return n.length==r.length&&n.every((a,s)=>a==r[s])}function powerSet(n){let r=[[]];for(let a=0;a<n.length;a++)for(let s=0,o=r.length;s<o;s++)r.push(r[s].concat(n[a]));return r.sort((a,s)=>s.length-a.length)}function styleTags(n){let r=Object.create(null);for(let a in n){let s=n[a];Array.isArray(s)||(s=[s]);for(let o of a.split(" "))if(o){let u=[],c=2,p=o;for(let Ja=0;;){if(p=="..."&&Ja>0&&Ja+3==o.length){c=1;break}let ec=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(p);if(!ec)throw new RangeError("Invalid path: "+o);if(u.push(ec[0]=="*"?"":ec[0][0]=='"'?JSON.parse(ec[0]):ec[0]),Ja+=ec[0].length,Ja==o.length)break;let tc=o[Ja++];if(Ja==o.length&&tc=="!"){c=0;break}if(tc!="/")throw new RangeError("Invalid path: "+o);p=o.slice(Ja)}let d=u.length-1,_=u[d];if(!_)throw new RangeError("Invalid path: "+o);let ja=new Rule(s,c,d>0?u.slice(0,d):null);r[_]=ja.sort(r[_])}}return ruleNodeProp.add(r)}const ruleNodeProp=new NodeProp;class Rule{constructor(r,a,s,o){this.tags=r,this.mode=a,this.context=s,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(r){return!r||r.depth<this.depth?(this.next=r,this):(r.next=this.sort(r.next),r)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(n,r){let a=Object.create(null);for(let u of n)if(!Array.isArray(u.tag))a[u.tag.id]=u.class;else for(let c of u.tag)a[c.id]=u.class;let{scope:s,all:o=null}=r||{};return{style:u=>{let c=o;for(let p of u)for(let d of p.set){let _=a[d.id];if(_){c=c?c+" "+_:_;break}}return c},scope:s}}function highlightTags(n,r){let a=null;for(let s of n){let o=s.style(r);o&&(a=a?a+" "+o:o)}return a}function highlightTree(n,r,a,s=0,o=n.length){let u=new HighlightBuilder(s,Array.isArray(r)?r:[r],a);u.highlightRange(n.cursor(),s,o,"",u.highlighters),u.flush(o)}class HighlightBuilder{constructor(r,a,s){this.at=r,this.highlighters=a,this.span=s,this.class=""}startSpan(r,a){a!=this.class&&(this.flush(r),r>this.at&&(this.at=r),this.class=a)}flush(r){r>this.at&&this.class&&this.span(this.at,r,this.class)}highlightRange(r,a,s,o,u){let{type:c,from:p,to:d}=r;if(p>=s||d<=a)return;c.isTop&&(u=this.highlighters.filter(tc=>!tc.scope||tc.scope(c)));let _=o,ja=getStyleTags(r)||Rule.empty,Ja=highlightTags(u,ja.tags);if(Ja&&(_&&(_+=" "),_+=Ja,ja.mode==1&&(o+=(o?" ":"")+Ja)),this.startSpan(Math.max(a,p),_),ja.opaque)return;let ec=r.tree&&r.tree.prop(NodeProp.mounted);if(ec&&ec.overlay){let tc=r.node.enter(ec.overlay[0].from+p,1),rc=this.highlighters.filter(ic=>!ic.scope||ic.scope(ec.tree.type)),nc=r.firstChild();for(let ic=0,uc=p;;ic++){let eh=ic<ec.overlay.length?ec.overlay[ic]:null,rh=eh?eh.from+p:d,ah=Math.max(a,uc),ih=Math.min(s,rh);if(ah<ih&&nc)for(;r.from<ih&&(this.highlightRange(r,ah,ih,o,u),this.startSpan(Math.min(ih,r.to),_),!(r.to>=rh||!r.nextSibling())););if(!eh||rh>s)break;uc=eh.to+p,uc>a&&(this.highlightRange(tc.cursor(),Math.max(a,eh.from+p),Math.min(s,uc),"",rc),this.startSpan(Math.min(s,uc),_))}nc&&r.parent()}else if(r.firstChild()){ec&&(o="");do if(!(r.to<=a)){if(r.from>=s)break;this.highlightRange(r,a,s,o,u),this.startSpan(Math.min(s,r.to),_)}while(r.nextSibling());r.parent()}}}function getStyleTags(n){let r=n.type.prop(ruleNodeProp);for(;r&&r.context&&!n.matchContext(r.context);)r=r.next;return r||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a$3;const languageDataProp=new NodeProp;function defineLanguageFacet(n){return Facet.define({combine:n?r=>r.concat(n):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(r,a,s=[],o=""){this.data=r,this.name=o,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=a,this.extension=[language.of(this),EditorState.languageData.of((u,c,p)=>{let d=topNodeAt(u,c,p),_=d.type.prop(languageDataProp);if(!_)return[];let ja=u.facet(_),Ja=d.type.prop(sublanguageProp);if(Ja){let ec=d.resolve(c-d.from,p);for(let tc of Ja)if(tc.test(ec,u)){let rc=u.facet(tc.facet);return tc.type=="replace"?rc:rc.concat(ja)}}return ja})].concat(s)}isActiveAt(r,a,s=-1){return topNodeAt(r,a,s).type.prop(languageDataProp)==this.data}findRegions(r){let a=r.facet(language);if((a==null?void 0:a.data)==this.data)return[{from:0,to:r.doc.length}];if(!a||!a.allowsNesting)return[];let s=[],o=(u,c)=>{if(u.prop(languageDataProp)==this.data){s.push({from:c,to:c+u.length});return}let p=u.prop(NodeProp.mounted);if(p){if(p.tree.prop(languageDataProp)==this.data){if(p.overlay)for(let d of p.overlay)s.push({from:d.from+c,to:d.to+c});else s.push({from:c,to:c+u.length});return}else if(p.overlay){let d=s.length;if(o(p.tree,p.overlay[0].from+c),s.length>d)return}}for(let d=0;d<u.children.length;d++){let _=u.children[d];_ instanceof Tree&&o(_,u.positions[d]+c)}};return o(syntaxTree(r),0),s}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(n,r,a){let s=n.facet(language),o=syntaxTree(n).topNode;if(!s||s.allowsNesting)for(let u=o;u;u=u.enter(r,a,IterMode.ExcludeBuffers))u.type.isTop&&(o=u);return o}class LRLanguage extends Language{constructor(r,a,s){super(r,a,[],s),this.parser=a}static define(r){let a=defineLanguageFacet(r.languageData);return new LRLanguage(a,r.parser.configure({props:[languageDataProp.add(s=>s.isTop?a:void 0)]}),r.name)}configure(r,a){return new LRLanguage(this.data,this.parser.configure(r),a||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(n){let r=n.field(Language.state,!1);return r?r.tree:Tree.empty}class DocInput{constructor(r){this.doc=r,this.cursorPos=0,this.string="",this.cursor=r.iter()}get length(){return this.doc.length}syncTo(r){return this.string=this.cursor.next(r-this.cursorPos).value,this.cursorPos=r+this.string.length,this.cursorPos-this.string.length}chunk(r){return this.syncTo(r),this.string}get lineChunks(){return!0}read(r,a){let s=this.cursorPos-this.string.length;return r<s||a>=this.cursorPos?this.doc.sliceString(r,a):this.string.slice(r-s,a-s)}}let currentContext=null;class ParseContext{constructor(r,a,s=[],o,u,c,p,d){this.parser=r,this.state=a,this.fragments=s,this.tree=o,this.treeLen=u,this.viewport=c,this.skipped=p,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(r,a,s){return new ParseContext(r,a,[],Tree.empty,0,s,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(r,a){return a!=null&&a>=this.state.doc.length&&(a=void 0),this.tree!=Tree.empty&&this.isDone(a??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof r=="number"){let o=Date.now()+r;r=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),a!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>a)&&a<this.state.doc.length&&this.parse.stopAt(a);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(a??this.state.doc.length))this.parse=this.startParse();else return!0;if(r())return!1}})}takeTree(){let r,a;this.parse&&(r=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&this.parse.stopAt(r),this.withContext(()=>{for(;!(a=this.parse.advance()););}),this.treeLen=r,this.tree=a,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(r){let a=currentContext;currentContext=this;try{return r()}finally{currentContext=a}}withoutTempSkipped(r){for(let a;a=this.tempSkipped.pop();)r=cutFragments(r,a.from,a.to);return r}changes(r,a){let{fragments:s,tree:o,treeLen:u,viewport:c,skipped:p}=this;if(this.takeTree(),!r.empty){let d=[];if(r.iterChangedRanges((_,ja,Ja,ec)=>d.push({fromA:_,toA:ja,fromB:Ja,toB:ec})),s=TreeFragment.applyChanges(s,d),o=Tree.empty,u=0,c={from:r.mapPos(c.from,-1),to:r.mapPos(c.to,1)},this.skipped.length){p=[];for(let _ of this.skipped){let ja=r.mapPos(_.from,1),Ja=r.mapPos(_.to,-1);ja<Ja&&p.push({from:ja,to:Ja})}}}return new ParseContext(this.parser,a,s,o,u,c,p,this.scheduleOn)}updateViewport(r){if(this.viewport.from==r.from&&this.viewport.to==r.to)return!1;this.viewport=r;let a=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:o,to:u}=this.skipped[s];o<r.to&&u>r.from&&(this.fragments=cutFragments(this.fragments,o,u),this.skipped.splice(s--,1))}return this.skipped.length>=a?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(r,a){this.skipped.push({from:r,to:a})}static getSkippingParser(r){return new class extends Parser{createParse(a,s,o){let u=o[0].from,c=o[o.length-1].to;return{parsedPos:u,advance(){let d=currentContext;if(d){for(let _ of o)d.tempSkipped.push(_);r&&(d.scheduleOn=d.scheduleOn?Promise.all([d.scheduleOn,r]):r)}return this.parsedPos=c,new Tree(NodeType.none,[],[],c-u)},stoppedAt:null,stopAt(){}}}}}isDone(r){r=Math.min(r,this.state.doc.length);let a=this.fragments;return this.treeLen>=r&&a.length&&a[0].from==0&&a[0].to>=r}static get(){return currentContext}}function cutFragments(n,r,a){return TreeFragment.applyChanges(n,[{fromA:r,toA:a,fromB:r,toB:a}])}class LanguageState{constructor(r){this.context=r,this.tree=r.tree}apply(r){if(!r.docChanged&&this.tree==this.context.tree)return this;let a=this.context.changes(r.changes,r.state),s=this.context.treeLen==r.startState.doc.length?void 0:Math.max(r.changes.mapPos(this.context.treeLen),a.viewport.to);return a.work(20,s)||a.takeTree(),new LanguageState(a)}static init(r){let a=Math.min(3e3,r.doc.length),s=ParseContext.create(r.facet(language).parser,r,{from:0,to:a});return s.work(20,a)||s.takeTree(),new LanguageState(s)}}Language.state=StateField.define({create:LanguageState.init,update(n,r){for(let a of r.effects)if(a.is(Language.setState))return a.value;return r.startState.facet(language)!=r.state.facet(language)?LanguageState.init(r.state):n.apply(r)}});let requestIdle=n=>{let r=setTimeout(()=>n(),500);return()=>clearTimeout(r)};typeof requestIdleCallback<"u"&&(requestIdle=n=>{let r=-1,a=setTimeout(()=>{r=requestIdleCallback(n,{timeout:400})},100);return()=>r<0?clearTimeout(a):cancelIdleCallback(r)});const isInputPending=typeof navigator<"u"&&(!((_a$3=navigator.scheduling)===null||_a$3===void 0)&&_a$3.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(r){this.view=r,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(r){let a=this.view.state.field(Language.state).context;(a.updateViewport(r.view.viewport)||this.view.viewport.to>a.treeLen)&&this.scheduleWork(),(r.docChanged||r.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(a)}scheduleWork(){if(this.working)return;let{state:r}=this.view,a=r.field(Language.state);(a.tree!=a.context.tree||!a.context.isDone(r.doc.length))&&(this.working=requestIdle(this.work))}work(r){this.working=null;let a=Date.now();if(this.chunkEnd<a&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=a+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:o}}=this.view,u=s.field(Language.state);if(u.tree==u.context.tree&&u.context.isDone(o+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,r&&!isInputPending?Math.max(25,r.timeRemaining()-5):1e9),p=u.context.treeLen<o&&s.doc.length>o+1e3,d=u.context.work(()=>isInputPending&&isInputPending()||Date.now()>c,o+(p?0:1e5));this.chunkBudget-=Date.now()-a,(d||this.chunkBudget<=0)&&(u.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(u.context))})),this.chunkBudget>0&&!(d&&!p)&&this.scheduleWork(),this.checkAsyncSchedule(u.context)}checkAsyncSchedule(r){r.scheduleOn&&(this.workScheduled++,r.scheduleOn.then(()=>this.scheduleWork()).catch(a=>logException(this.view.state,a)).then(()=>this.workScheduled--),r.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(n){return n.length?n[0]:null},enables:n=>[Language.state,parseWorker,EditorView.contentAttributes.compute([n],r=>{let a=r.facet(n);return a&&a.name?{"data-language":a.name}:{}})]});class LanguageSupport{constructor(r,a=[]){this.language=r,this.support=a,this.extension=[r,a]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:n=>{if(!n.length)return"  ";let r=n[0];if(!r||/\S/.test(r)||Array.from(r).some(a=>a!=r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return r}});function getIndentUnit(n){let r=n.facet(indentUnit);return r.charCodeAt(0)==9?n.tabSize*r.length:r.length}function indentString(n,r){let a="",s=n.tabSize,o=n.facet(indentUnit)[0];if(o=="	"){for(;r>=s;)a+="	",r-=s;o=" "}for(let u=0;u<r;u++)a+=o;return a}function getIndentation(n,r){n instanceof EditorState&&(n=new IndentContext(n));for(let s of n.state.facet(indentService)){let o=s(n,r);if(o!==void 0)return o}let a=syntaxTree(n.state);return a.length>=r?syntaxIndentation(n,a,r):null}class IndentContext{constructor(r,a={}){this.state=r,this.options=a,this.unit=getIndentUnit(r)}lineAt(r,a=1){let s=this.state.doc.lineAt(r),{simulateBreak:o,simulateDoubleBreak:u}=this.options;return o!=null&&o>=s.from&&o<=s.to?u&&o==r?{text:"",from:r}:(a<0?o<r:o<=r)?{text:s.text.slice(o-s.from),from:o}:{text:s.text.slice(0,o-s.from),from:s.from}:s}textAfterPos(r,a=1){if(this.options.simulateDoubleBreak&&r==this.options.simulateBreak)return"";let{text:s,from:o}=this.lineAt(r,a);return s.slice(r-o,Math.min(s.length,r+100-o))}column(r,a=1){let{text:s,from:o}=this.lineAt(r,a),u=this.countColumn(s,r-o),c=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return c>-1&&(u+=c-this.countColumn(s,s.search(/\S|$/))),u}countColumn(r,a=r.length){return countColumn(r,this.state.tabSize,a)}lineIndent(r,a=1){let{text:s,from:o}=this.lineAt(r,a),u=this.options.overrideIndentation;if(u){let c=u(o);if(c>-1)return c}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(n,r,a){let s=r.resolveStack(a),o=s.node.enterUnfinishedNodesBefore(a);if(o!=s.node){let u=[];for(let c=o;c!=s.node;c=c.parent)u.push(c);for(let c=u.length-1;c>=0;c--)s={node:u[c],next:s}}return indentFor(s,n,a)}function indentFor(n,r,a){for(let s=n;s;s=s.next){let o=indentStrategy(s.node);if(o)return o(TreeIndentContext.create(r,a,s))}return 0}function ignoreClosed(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function indentStrategy(n){let r=n.type.prop(indentNodeProp);if(r)return r;let a=n.firstChild,s;if(a&&(s=a.type.prop(NodeProp.closedBy))){let o=n.lastChild,u=o&&s.indexOf(o.name)>-1;return c=>delimitedStrategy(c,!0,1,void 0,u&&!ignoreClosed(c)?o.from:void 0)}return n.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(r,a,s){super(r.state,r.options),this.base=r,this.pos=a,this.context=s}get node(){return this.context.node}static create(r,a,s){return new TreeIndentContext(r,a,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(r){let a=this.state.doc.lineAt(r.from);for(;;){let s=r.resolve(a.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(isParent(s,r))break;a=this.state.doc.lineAt(s.from)}return this.lineIndent(a.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(n,r){for(let a=r;a;a=a.parent)if(n==a)return!0;return!1}function bracketedAligned(n){let r=n.node,a=r.childAfter(r.from),s=r.lastChild;if(!a)return null;let o=n.options.simulateBreak,u=n.state.doc.lineAt(a.from),c=o==null||o<=u.from?u.to:Math.min(u.to,o);for(let p=a.to;;){let d=r.childAfter(p);if(!d||d==s)return null;if(!d.type.isSkipped)return d.from<c?a:null;p=d.to}}function delimitedIndent({closing:n,align:r=!0,units:a=1}){return s=>delimitedStrategy(s,r,a,n)}function delimitedStrategy(n,r,a,s,o){let u=n.textAfter,c=u.match(/^\s*/)[0].length,p=s&&u.slice(c,c+s.length)==s||o==n.pos+c,d=r?bracketedAligned(n):null;return d?p?n.column(d.from):n.column(d.to):n.baseIndent+(p?0:n.unit*a)}const flatIndent=n=>n.baseIndent;function continuedIndent({except:n,units:r=1}={}){return a=>{let s=n&&n.test(a.textAfter);return a.baseIndent+(s?0:r*a.unit)}}const foldNodeProp=new NodeProp;function foldInside(n){let r=n.firstChild,a=n.lastChild;return r&&r.to<a.from?{from:r.to,to:a.type.isError?n.to:a.from}:null}class HighlightStyle{constructor(r,a){this.specs=r;let s;function o(p){let d=StyleModule.newName();return(s||(s=Object.create(null)))["."+d]=p,d}const u=typeof a.all=="string"?a.all:a.all?o(a.all):void 0,c=a.scope;this.scope=c instanceof Language?p=>p.prop(languageDataProp)==c.data:c?p=>p==c:void 0,this.style=tagHighlighter(r.map(p=>({tag:p.tag,class:p.class||o(Object.assign({},p,{tag:null}))})),{all:u}).style,this.module=s?new StyleModule(s):null,this.themeType=a.themeType}static define(r,a){return new HighlightStyle(r,a||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(n){return n.length?[n[0]]:null}});function getHighlighters(n){let r=n.facet(highlighterFacet);return r.length?r:n.facet(fallbackHighlighter)}function syntaxHighlighting(n,r){let a=[treeHighlighter],s;return n instanceof HighlightStyle&&(n.module&&a.push(EditorView.styleModule.of(n.module)),s=n.themeType),r!=null&&r.fallback?a.push(fallbackHighlighter.of(n)):s?a.push(highlighterFacet.computeN([EditorView.darkTheme],o=>o.facet(EditorView.darkTheme)==(s=="dark")?[n]:[])):a.push(highlighterFacet.of(n)),a}class TreeHighlighter{constructor(r){this.markCache=Object.create(null),this.tree=syntaxTree(r.state),this.decorations=this.buildDeco(r,getHighlighters(r.state)),this.decoratedTo=r.viewport.to}update(r){let a=syntaxTree(r.state),s=getHighlighters(r.state),o=s!=getHighlighters(r.startState),{viewport:u}=r.view,c=r.changes.mapPos(this.decoratedTo,1);a.length<u.to&&!o&&a.type==this.tree.type&&c>=u.to?(this.decorations=this.decorations.map(r.changes),this.decoratedTo=c):(a!=this.tree||r.viewportChanged||o)&&(this.tree=a,this.decorations=this.buildDeco(r.view,s),this.decoratedTo=u.to)}buildDeco(r,a){if(!a||!this.tree.length)return Decoration.none;let s=new RangeSetBuilder;for(let{from:o,to:u}of r.visibleRanges)highlightTree(this.tree,a,(c,p,d)=>{s.add(c,p,this.markCache[d]||(this.markCache[d]=Decoration.mark({class:d})))},o,u);return s.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:n=>n.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingHandle=new NodeProp;function matchingNodes(n,r,a){let s=n.prop(r<0?NodeProp.openedBy:NodeProp.closedBy);if(s)return s;if(n.name.length==1){let o=a.indexOf(n.name);if(o>-1&&o%2==(r<0?1:0))return[a[o+r]]}return null}function findHandle(n){let r=n.type.prop(bracketMatchingHandle);return r?r(n.node):n}function matchBrackets(n,r,a,s={}){let o=s.maxScanDistance||DefaultScanDist,u=s.brackets||DefaultBrackets,c=syntaxTree(n),p=c.resolveInner(r,a);for(let d=p;d;d=d.parent){let _=matchingNodes(d.type,a,u);if(_&&d.from<d.to){let ja=findHandle(d);if(ja&&(a>0?r>=ja.from&&r<ja.to:r>ja.from&&r<=ja.to))return matchMarkedBrackets(n,r,a,d,ja,_,u)}}return matchPlainBrackets(n,r,a,c,p.type,o,u)}function matchMarkedBrackets(n,r,a,s,o,u,c){let p=s.parent,d={from:o.from,to:o.to},_=0,ja=p==null?void 0:p.cursor();if(ja&&(a<0?ja.childBefore(s.from):ja.childAfter(s.to)))do if(a<0?ja.to<=s.from:ja.from>=s.to){if(_==0&&u.indexOf(ja.type.name)>-1&&ja.from<ja.to){let Ja=findHandle(ja);return{start:d,end:Ja?{from:Ja.from,to:Ja.to}:void 0,matched:!0}}else if(matchingNodes(ja.type,a,c))_++;else if(matchingNodes(ja.type,-a,c)){if(_==0){let Ja=findHandle(ja);return{start:d,end:Ja&&Ja.from<Ja.to?{from:Ja.from,to:Ja.to}:void 0,matched:!1}}_--}}while(a<0?ja.prevSibling():ja.nextSibling());return{start:d,matched:!1}}function matchPlainBrackets(n,r,a,s,o,u,c){let p=a<0?n.sliceDoc(r-1,r):n.sliceDoc(r,r+1),d=c.indexOf(p);if(d<0||d%2==0!=a>0)return null;let _={from:a<0?r-1:r,to:a>0?r+1:r},ja=n.doc.iterRange(r,a>0?n.doc.length:0),Ja=0;for(let ec=0;!ja.next().done&&ec<=u;){let tc=ja.value;a<0&&(ec+=tc.length);let rc=r+ec*a;for(let nc=a>0?0:tc.length-1,ic=a>0?tc.length:-1;nc!=ic;nc+=a){let uc=c.indexOf(tc[nc]);if(!(uc<0||s.resolveInner(rc+nc,1).type!=o))if(uc%2==0==a>0)Ja++;else{if(Ja==1)return{start:_,end:{from:rc+nc,to:rc+nc+1},matched:uc>>1==d>>1};Ja--}}a>0&&(ec+=tc.length)}return ja.done?{start:_,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[n,r]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[n]=createTokenType(noTokens,r);function warnForPart(n,r){warned.indexOf(n)>-1||(warned.push(n),console.warn(r))}function createTokenType(n,r){let a=[];for(let p of r.split(" ")){let d=[];for(let _ of p.split(".")){let ja=n[_]||tags[_];ja?typeof ja=="function"?d.length?d=d.map(ja):warnForPart(_,`Modifier ${_} used at start of tag`):d.length?warnForPart(_,`Tag ${_} used as modifier`):d=Array.isArray(ja)?ja:[ja]:warnForPart(_,`Unknown highlighting tag ${_}`)}for(let _ of d)a.push(_)}if(!a.length)return 0;let s=r.replace(/ /g,"_"),o=s+" "+a.map(p=>p.id),u=byTag[o];if(u)return u.id;let c=byTag[o]=NodeType.define({id:typeArray.length,name:s,props:[styleTags({[s]:a})]});return typeArray.push(c),c.id}Direction.RTL,Direction.LTR;const toggleComment=n=>{let{state:r}=n,a=r.doc.lineAt(r.selection.main.from),s=getConfig(n.state,a.from);return s.line?toggleLineComment(n):s.block?toggleBlockCommentByLine(n):!1};function command(n,r){return({state:a,dispatch:s})=>{if(a.readOnly)return!1;let o=n(r,a);return o?(s(a.update(o)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((n,r)=>changeBlockComment(n,r,selectedLineRanges(r)),0);function getConfig(n,r){let a=n.languageDataAt("commentTokens",r);return a.length?a[0]:{}}const SearchMargin=50;function findBlockComment(n,{open:r,close:a},s,o){let u=n.sliceDoc(s-SearchMargin,s),c=n.sliceDoc(o,o+SearchMargin),p=/\s*$/.exec(u)[0].length,d=/^\s*/.exec(c)[0].length,_=u.length-p;if(u.slice(_-r.length,_)==r&&c.slice(d,d+a.length)==a)return{open:{pos:s-p,margin:p&&1},close:{pos:o+d,margin:d&&1}};let ja,Ja;o-s<=2*SearchMargin?ja=Ja=n.sliceDoc(s,o):(ja=n.sliceDoc(s,s+SearchMargin),Ja=n.sliceDoc(o-SearchMargin,o));let ec=/^\s*/.exec(ja)[0].length,tc=/\s*$/.exec(Ja)[0].length,rc=Ja.length-tc-a.length;return ja.slice(ec,ec+r.length)==r&&Ja.slice(rc,rc+a.length)==a?{open:{pos:s+ec+r.length,margin:/\s/.test(ja.charAt(ec+r.length))?1:0},close:{pos:o-tc-a.length,margin:/\s/.test(Ja.charAt(rc-1))?1:0}}:null}function selectedLineRanges(n){let r=[];for(let a of n.selection.ranges){let s=n.doc.lineAt(a.from),o=a.to<=s.to?s:n.doc.lineAt(a.to),u=r.length-1;u>=0&&r[u].to>s.from?r[u].to=o.to:r.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:o.to})}return r}function changeBlockComment(n,r,a=r.selection.ranges){let s=a.map(u=>getConfig(r,u.from).block);if(!s.every(u=>u))return null;let o=a.map((u,c)=>findBlockComment(r,s[c],u.from,u.to));if(n!=2&&!o.every(u=>u))return{changes:r.changes(a.map((u,c)=>o[c]?[]:[{from:u.from,insert:s[c].open+" "},{from:u.to,insert:" "+s[c].close}]))};if(n!=1&&o.some(u=>u)){let u=[];for(let c=0,p;c<o.length;c++)if(p=o[c]){let d=s[c],{open:_,close:ja}=p;u.push({from:_.pos-d.open.length,to:_.pos+_.margin},{from:ja.pos-ja.margin,to:ja.pos+d.close.length})}return{changes:u}}return null}function changeLineComment(n,r,a=r.selection.ranges){let s=[],o=-1;for(let{from:u,to:c}of a){let p=s.length,d=1e9,_=getConfig(r,u).line;if(_){for(let ja=u;ja<=c;){let Ja=r.doc.lineAt(ja);if(Ja.from>o&&(u==c||c>Ja.from)){o=Ja.from;let ec=/^\s*/.exec(Ja.text)[0].length,tc=ec==Ja.length,rc=Ja.text.slice(ec,ec+_.length)==_?ec:-1;ec<Ja.text.length&&ec<d&&(d=ec),s.push({line:Ja,comment:rc,token:_,indent:ec,empty:tc,single:!1})}ja=Ja.to+1}if(d<1e9)for(let ja=p;ja<s.length;ja++)s[ja].indent<s[ja].line.text.length&&(s[ja].indent=d);s.length==p+1&&(s[p].single=!0)}}if(n!=2&&s.some(u=>u.comment<0&&(!u.empty||u.single))){let u=[];for(let{line:p,token:d,indent:_,empty:ja,single:Ja}of s)(Ja||!ja)&&u.push({from:p.from+_,insert:d+" "});let c=r.changes(u);return{changes:c,selection:r.selection.map(c,1)}}else if(n!=1&&s.some(u=>u.comment>=0)){let u=[];for(let{line:c,comment:p,token:d}of s)if(p>=0){let _=c.from+p,ja=_+d.length;c.text[ja-c.from]==" "&&ja++,u.push({from:_,to:ja})}return{changes:u}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(n){return combineConfig(n,{minDepth:100,newGroupDelay:500,joinToEvent:(r,a)=>a},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(r,a)=>(s,o)=>r(s,o)||a(s,o)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(n,r){let a=r.state.facet(historyConfig),s=r.annotation(fromHistory);if(s){let d=HistEvent.fromTransaction(r,s.selection),_=s.side,ja=_==0?n.undone:n.done;return d?ja=updateBranch(ja,ja.length,a.minDepth,d):ja=addSelection(ja,r.startState.selection),new HistoryState(_==0?s.rest:ja,_==0?ja:s.rest)}let o=r.annotation(isolateHistory);if((o=="full"||o=="before")&&(n=n.isolate()),r.annotation(Transaction.addToHistory)===!1)return r.changes.empty?n:n.addMapping(r.changes.desc);let u=HistEvent.fromTransaction(r),c=r.annotation(Transaction.time),p=r.annotation(Transaction.userEvent);return u?n=n.addChanges(u,c,p,a,r):r.selection&&(n=n.addSelection(r.startState.selection,c,p,a.newGroupDelay)),(o=="full"||o=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(r=>r.toJSON()),undone:n.undone.map(r=>r.toJSON())}},fromJSON(n){return new HistoryState(n.done.map(HistEvent.fromJSON),n.undone.map(HistEvent.fromJSON))}});function history(n={}){return[historyField_,historyConfig.of(n),EditorView.domEventHandlers({beforeinput(r,a){let s=r.inputType=="historyUndo"?undo:r.inputType=="historyRedo"?redo:null;return s?(r.preventDefault(),s(a)):!1}})]}function cmd(n,r){return function({state:a,dispatch:s}){if(!r&&a.readOnly)return!1;let o=a.field(historyField_,!1);if(!o)return!1;let u=o.pop(n,a,r);return u?(s(u),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(r,a,s,o,u){this.changes=r,this.effects=a,this.mapped=s,this.startSelection=o,this.selectionsAfter=u}setSelAfter(r){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,r)}toJSON(){var r,a,s;return{changes:(r=this.changes)===null||r===void 0?void 0:r.toJSON(),mapped:(a=this.mapped)===null||a===void 0?void 0:a.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(r){return new HistEvent(r.changes&&ChangeSet.fromJSON(r.changes),[],r.mapped&&ChangeDesc.fromJSON(r.mapped),r.startSelection&&EditorSelection.fromJSON(r.startSelection),r.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(r,a){let s=none;for(let o of r.startState.facet(invertedEffects)){let u=o(r);u.length&&(s=s.concat(u))}return!s.length&&r.changes.empty?null:new HistEvent(r.changes.invert(r.startState.doc),s,void 0,a||r.startState.selection,none)}static selection(r){return new HistEvent(void 0,none,void 0,void 0,r)}}function updateBranch(n,r,a,s){let o=r+1>a+20?r-a-1:0,u=n.slice(o,r);return u.push(s),u}function isAdjacent(n,r){let a=[],s=!1;return n.iterChangedRanges((o,u)=>a.push(o,u)),r.iterChangedRanges((o,u,c,p)=>{for(let d=0;d<a.length;){let _=a[d++],ja=a[d++];p>=_&&c<=ja&&(s=!0)}}),s}function eqSelectionShape(n,r){return n.ranges.length==r.ranges.length&&n.ranges.filter((a,s)=>a.empty!=r.ranges[s].empty).length===0}function conc(n,r){return n.length?r.length?n.concat(r):n:r}const none=[],MaxSelectionsPerEvent=200;function addSelection(n,r){if(n.length){let a=n[n.length-1],s=a.selectionsAfter.slice(Math.max(0,a.selectionsAfter.length-MaxSelectionsPerEvent));return s.length&&s[s.length-1].eq(r)?n:(s.push(r),updateBranch(n,n.length-1,1e9,a.setSelAfter(s)))}else return[HistEvent.selection([r])]}function popSelection(n){let r=n[n.length-1],a=n.slice();return a[n.length-1]=r.setSelAfter(r.selectionsAfter.slice(0,r.selectionsAfter.length-1)),a}function addMappingToBranch(n,r){if(!n.length)return n;let a=n.length,s=none;for(;a;){let o=mapEvent(n[a-1],r,s);if(o.changes&&!o.changes.empty||o.effects.length){let u=n.slice(0,a);return u[a-1]=o,u}else r=o.mapped,a--,s=o.selectionsAfter}return s.length?[HistEvent.selection(s)]:none}function mapEvent(n,r,a){let s=conc(n.selectionsAfter.length?n.selectionsAfter.map(p=>p.map(r)):none,a);if(!n.changes)return HistEvent.selection(s);let o=n.changes.map(r),u=r.mapDesc(n.changes,!0),c=n.mapped?n.mapped.composeDesc(u):u;return new HistEvent(o,StateEffect.mapEffects(n.effects,r),c,n.startSelection.map(u),s)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(r,a,s=0,o=void 0){this.done=r,this.undone=a,this.prevTime=s,this.prevUserEvent=o}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(r,a,s,o,u){let c=this.done,p=c[c.length-1];return p&&p.changes&&!p.changes.empty&&r.changes&&(!s||joinableUserEvent.test(s))&&(!p.selectionsAfter.length&&a-this.prevTime<o.newGroupDelay&&o.joinToEvent(u,isAdjacent(p.changes,r.changes))||s=="input.type.compose")?c=updateBranch(c,c.length-1,o.minDepth,new HistEvent(r.changes.compose(p.changes),conc(r.effects,p.effects),p.mapped,p.startSelection,none)):c=updateBranch(c,c.length,o.minDepth,r),new HistoryState(c,none,a,s)}addSelection(r,a,s,o){let u=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return u.length>0&&a-this.prevTime<o&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&eqSelectionShape(u[u.length-1],r)?this:new HistoryState(addSelection(this.done,r),this.undone,a,s)}addMapping(r){return new HistoryState(addMappingToBranch(this.done,r),addMappingToBranch(this.undone,r),this.prevTime,this.prevUserEvent)}pop(r,a,s){let o=r==0?this.done:this.undone;if(o.length==0)return null;let u=o[o.length-1],c=u.selectionsAfter[0]||a.selection;if(s&&u.selectionsAfter.length)return a.update({selection:u.selectionsAfter[u.selectionsAfter.length-1],annotations:fromHistory.of({side:r,rest:popSelection(o),selection:c}),userEvent:r==0?"select.undo":"select.redo",scrollIntoView:!0});if(u.changes){let p=o.length==1?none:o.slice(0,o.length-1);return u.mapped&&(p=addMappingToBranch(p,u.mapped)),a.update({changes:u.changes,selection:u.startSelection,effects:u.effects,annotations:fromHistory.of({side:r,rest:p,selection:c}),filter:!1,userEvent:r==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(n,r){return EditorSelection.create(n.ranges.map(r),n.mainIndex)}function setSel(n,r){return n.update({selection:r,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:n,dispatch:r},a){let s=updateSel(n.selection,a);return s.eq(n.selection,!0)?!1:(r(setSel(n,s)),!0)}function rangeEnd(n,r){return EditorSelection.cursor(r?n.to:n.from)}function cursorByChar(n,r){return moveSel(n,a=>a.empty?n.moveByChar(a,r):rangeEnd(a,r))}function ltrAtCursor(n){return n.textDirectionAt(n.state.selection.main.head)==Direction.LTR}const cursorCharLeft=n=>cursorByChar(n,!ltrAtCursor(n)),cursorCharRight=n=>cursorByChar(n,ltrAtCursor(n));function cursorByGroup(n,r){return moveSel(n,a=>a.empty?n.moveByGroup(a,r):rangeEnd(a,r))}const cursorGroupLeft=n=>cursorByGroup(n,!ltrAtCursor(n)),cursorGroupRight=n=>cursorByGroup(n,ltrAtCursor(n));function interestingNode(n,r,a){if(r.type.prop(a))return!0;let s=r.to-r.from;return s&&(s>2||/[^\s,.;:]/.test(n.sliceDoc(r.from,r.to)))||r.firstChild}function moveBySyntax(n,r,a){let s=syntaxTree(n).resolveInner(r.head),o=a?NodeProp.closedBy:NodeProp.openedBy;for(let d=r.head;;){let _=a?s.childAfter(d):s.childBefore(d);if(!_)break;interestingNode(n,_,o)?s=_:d=a?_.to:_.from}let u=s.type.prop(o),c,p;return u&&(c=a?matchBrackets(n,s.from,1):matchBrackets(n,s.to,-1))&&c.matched?p=a?c.end.to:c.end.from:p=a?s.to:s.from,EditorSelection.cursor(p,a?-1:1)}const cursorSyntaxLeft=n=>moveSel(n,r=>moveBySyntax(n.state,r,!ltrAtCursor(n))),cursorSyntaxRight=n=>moveSel(n,r=>moveBySyntax(n.state,r,ltrAtCursor(n)));function cursorByLine(n,r){return moveSel(n,a=>{if(!a.empty)return rangeEnd(a,r);let s=n.moveVertically(a,r);return s.head!=a.head?s:n.moveToLineBoundary(a,r)})}const cursorLineUp=n=>cursorByLine(n,!1),cursorLineDown=n=>cursorByLine(n,!0);function pageInfo(n){let r=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,a=0,s=0,o;if(r){for(let u of n.state.facet(EditorView.scrollMargins)){let c=u(n);c!=null&&c.top&&(a=Math.max(c==null?void 0:c.top,a)),c!=null&&c.bottom&&(s=Math.max(c==null?void 0:c.bottom,s))}o=n.scrollDOM.clientHeight-a-s}else o=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:a,marginBottom:s,selfScroll:r,height:Math.max(n.defaultLineHeight,o-5)}}function cursorByPage(n,r){let a=pageInfo(n),{state:s}=n,o=updateSel(s.selection,c=>c.empty?n.moveVertically(c,r,a.height):rangeEnd(c,r));if(o.eq(s.selection))return!1;let u;if(a.selfScroll){let c=n.coordsAtPos(s.selection.main.head),p=n.scrollDOM.getBoundingClientRect(),d=p.top+a.marginTop,_=p.bottom-a.marginBottom;c&&c.top>d&&c.bottom<_&&(u=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:c.top-d}))}return n.dispatch(setSel(s,o),{effects:u}),!0}const cursorPageUp=n=>cursorByPage(n,!1),cursorPageDown=n=>cursorByPage(n,!0);function moveByLineBoundary(n,r,a){let s=n.lineBlockAt(r.head),o=n.moveToLineBoundary(r,a);if(o.head==r.head&&o.head!=(a?s.to:s.from)&&(o=n.moveToLineBoundary(r,a,!1)),!a&&o.head==s.from&&s.length){let u=/^\s*/.exec(n.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;u&&r.head!=s.from+u&&(o=EditorSelection.cursor(s.from+u))}return o}const cursorLineBoundaryForward=n=>moveSel(n,r=>moveByLineBoundary(n,r,!0)),cursorLineBoundaryBackward=n=>moveSel(n,r=>moveByLineBoundary(n,r,!1)),cursorLineBoundaryLeft=n=>moveSel(n,r=>moveByLineBoundary(n,r,!ltrAtCursor(n))),cursorLineBoundaryRight=n=>moveSel(n,r=>moveByLineBoundary(n,r,ltrAtCursor(n))),cursorLineStart=n=>moveSel(n,r=>EditorSelection.cursor(n.lineBlockAt(r.head).from,1)),cursorLineEnd=n=>moveSel(n,r=>EditorSelection.cursor(n.lineBlockAt(r.head).to,-1));function toMatchingBracket(n,r,a){let s=!1,o=updateSel(n.selection,u=>{let c=matchBrackets(n,u.head,-1)||matchBrackets(n,u.head,1)||u.head>0&&matchBrackets(n,u.head-1,1)||u.head<n.doc.length&&matchBrackets(n,u.head+1,-1);if(!c||!c.end)return u;s=!0;let p=c.start.from==u.head?c.end.to:c.end.from;return EditorSelection.cursor(p)});return s?(r(setSel(n,o)),!0):!1}const cursorMatchingBracket=({state:n,dispatch:r})=>toMatchingBracket(n,r);function extendSel(n,r){let a=updateSel(n.state.selection,s=>{let o=r(s);return EditorSelection.range(s.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return a.eq(n.state.selection)?!1:(n.dispatch(setSel(n.state,a)),!0)}function selectByChar(n,r){return extendSel(n,a=>n.moveByChar(a,r))}const selectCharLeft=n=>selectByChar(n,!ltrAtCursor(n)),selectCharRight=n=>selectByChar(n,ltrAtCursor(n));function selectByGroup(n,r){return extendSel(n,a=>n.moveByGroup(a,r))}const selectGroupLeft=n=>selectByGroup(n,!ltrAtCursor(n)),selectGroupRight=n=>selectByGroup(n,ltrAtCursor(n)),selectSyntaxLeft=n=>extendSel(n,r=>moveBySyntax(n.state,r,!ltrAtCursor(n))),selectSyntaxRight=n=>extendSel(n,r=>moveBySyntax(n.state,r,ltrAtCursor(n)));function selectByLine(n,r){return extendSel(n,a=>n.moveVertically(a,r))}const selectLineUp=n=>selectByLine(n,!1),selectLineDown=n=>selectByLine(n,!0);function selectByPage(n,r){return extendSel(n,a=>n.moveVertically(a,r,pageInfo(n).height))}const selectPageUp=n=>selectByPage(n,!1),selectPageDown=n=>selectByPage(n,!0),selectLineBoundaryForward=n=>extendSel(n,r=>moveByLineBoundary(n,r,!0)),selectLineBoundaryBackward=n=>extendSel(n,r=>moveByLineBoundary(n,r,!1)),selectLineBoundaryLeft=n=>extendSel(n,r=>moveByLineBoundary(n,r,!ltrAtCursor(n))),selectLineBoundaryRight=n=>extendSel(n,r=>moveByLineBoundary(n,r,ltrAtCursor(n))),selectLineStart=n=>extendSel(n,r=>EditorSelection.cursor(n.lineBlockAt(r.head).from)),selectLineEnd=n=>extendSel(n,r=>EditorSelection.cursor(n.lineBlockAt(r.head).to)),cursorDocStart=({state:n,dispatch:r})=>(r(setSel(n,{anchor:0})),!0),cursorDocEnd=({state:n,dispatch:r})=>(r(setSel(n,{anchor:n.doc.length})),!0),selectDocStart=({state:n,dispatch:r})=>(r(setSel(n,{anchor:n.selection.main.anchor,head:0})),!0),selectDocEnd=({state:n,dispatch:r})=>(r(setSel(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),selectAll=({state:n,dispatch:r})=>(r(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),selectLine=({state:n,dispatch:r})=>{let a=selectedLineBlocks(n).map(({from:s,to:o})=>EditorSelection.range(s,Math.min(o+1,n.doc.length)));return r(n.update({selection:EditorSelection.create(a),userEvent:"select"})),!0},selectParentSyntax=({state:n,dispatch:r})=>{let a=updateSel(n.selection,s=>{var o;let u=syntaxTree(n).resolveStack(s.from,1);for(let c=u;c;c=c.next){let{node:p}=c;if((p.from<s.from&&p.to>=s.to||p.to>s.to&&p.from<=s.from)&&(!((o=p.parent)===null||o===void 0)&&o.parent))return EditorSelection.range(p.to,p.from)}return s});return r(setSel(n,a)),!0},simplifySelection=({state:n,dispatch:r})=>{let a=n.selection,s=null;return a.ranges.length>1?s=EditorSelection.create([a.main]):a.main.empty||(s=EditorSelection.create([EditorSelection.cursor(a.main.head)])),s?(r(setSel(n,s)),!0):!1};function deleteBy(n,r){if(n.state.readOnly)return!1;let a="delete.selection",{state:s}=n,o=s.changeByRange(u=>{let{from:c,to:p}=u;if(c==p){let d=r(u);d<c?(a="delete.backward",d=skipAtomic(n,d,!1)):d>c&&(a="delete.forward",d=skipAtomic(n,d,!0)),c=Math.min(c,d),p=Math.max(p,d)}else c=skipAtomic(n,c,!1),p=skipAtomic(n,p,!0);return c==p?{range:u}:{changes:{from:c,to:p},range:EditorSelection.cursor(c,c<u.head?-1:1)}});return o.changes.empty?!1:(n.dispatch(s.update(o,{scrollIntoView:!0,userEvent:a,effects:a=="delete.selection"?EditorView.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(n,r,a){if(n instanceof EditorView)for(let s of n.state.facet(EditorView.atomicRanges).map(o=>o(n)))s.between(r,r,(o,u)=>{o<r&&u>r&&(r=a?u:o)});return r}const deleteByChar=(n,r,a)=>deleteBy(n,s=>{let o=s.from,{state:u}=n,c=u.doc.lineAt(o),p,d;if(a&&!r&&o>c.from&&o<c.from+200&&!/[^ \t]/.test(p=c.text.slice(0,o-c.from))){if(p[p.length-1]=="	")return o-1;let _=countColumn(p,u.tabSize),ja=_%getIndentUnit(u)||getIndentUnit(u);for(let Ja=0;Ja<ja&&p[p.length-1-Ja]==" ";Ja++)o--;d=o}else d=findClusterBreak(c.text,o-c.from,r,r)+c.from,d==o&&c.number!=(r?u.doc.lines:1)?d+=r?1:-1:!r&&/[\ufe00-\ufe0f]/.test(c.text.slice(d-c.from,o-c.from))&&(d=findClusterBreak(c.text,d-c.from,!1,!1)+c.from);return d}),deleteCharBackward=n=>deleteByChar(n,!1,!0),deleteCharForward=n=>deleteByChar(n,!0,!1),deleteByGroup=(n,r)=>deleteBy(n,a=>{let s=a.head,{state:o}=n,u=o.doc.lineAt(s),c=o.charCategorizer(s);for(let p=null;;){if(s==(r?u.to:u.from)){s==a.head&&u.number!=(r?o.doc.lines:1)&&(s+=r?1:-1);break}let d=findClusterBreak(u.text,s-u.from,r)+u.from,_=u.text.slice(Math.min(s,d)-u.from,Math.max(s,d)-u.from),ja=c(_);if(p!=null&&ja!=p)break;(_!=" "||s!=a.head)&&(p=ja),s=d}return s}),deleteGroupBackward=n=>deleteByGroup(n,!1),deleteGroupForward=n=>deleteByGroup(n,!0),deleteToLineEnd=n=>deleteBy(n,r=>{let a=n.lineBlockAt(r.head).to;return r.head<a?a:Math.min(n.state.doc.length,r.head+1)}),deleteLineBoundaryBackward=n=>deleteBy(n,r=>{let a=n.moveToLineBoundary(r,!1).head;return r.head>a?a:Math.max(0,r.head-1)}),deleteLineBoundaryForward=n=>deleteBy(n,r=>{let a=n.moveToLineBoundary(r,!0).head;return r.head<a?a:Math.min(n.state.doc.length,r.head+1)}),splitLine=({state:n,dispatch:r})=>{if(n.readOnly)return!1;let a=n.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:Text.of(["",""])},range:EditorSelection.cursor(s.from)}));return r(n.update(a,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:n,dispatch:r})=>{if(n.readOnly)return!1;let a=n.changeByRange(s=>{if(!s.empty||s.from==0||s.from==n.doc.length)return{range:s};let o=s.from,u=n.doc.lineAt(o),c=o==u.from?o-1:findClusterBreak(u.text,o-u.from,!1)+u.from,p=o==u.to?o+1:findClusterBreak(u.text,o-u.from,!0)+u.from;return{changes:{from:c,to:p,insert:n.doc.slice(o,p).append(n.doc.slice(c,o))},range:EditorSelection.cursor(p)}});return a.changes.empty?!1:(r(n.update(a,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(n){let r=[],a=-1;for(let s of n.selection.ranges){let o=n.doc.lineAt(s.from),u=n.doc.lineAt(s.to);if(!s.empty&&s.to==u.from&&(u=n.doc.lineAt(s.to-1)),a>=o.number){let c=r[r.length-1];c.to=u.to,c.ranges.push(s)}else r.push({from:o.from,to:u.to,ranges:[s]});a=u.number+1}return r}function moveLine(n,r,a){if(n.readOnly)return!1;let s=[],o=[];for(let u of selectedLineBlocks(n)){if(a?u.to==n.doc.length:u.from==0)continue;let c=n.doc.lineAt(a?u.to+1:u.from-1),p=c.length+1;if(a){s.push({from:u.to,to:c.to},{from:u.from,insert:c.text+n.lineBreak});for(let d of u.ranges)o.push(EditorSelection.range(Math.min(n.doc.length,d.anchor+p),Math.min(n.doc.length,d.head+p)))}else{s.push({from:c.from,to:u.from},{from:u.to,insert:n.lineBreak+c.text});for(let d of u.ranges)o.push(EditorSelection.range(d.anchor-p,d.head-p))}}return s.length?(r(n.update({changes:s,scrollIntoView:!0,selection:EditorSelection.create(o,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:n,dispatch:r})=>moveLine(n,r,!1),moveLineDown=({state:n,dispatch:r})=>moveLine(n,r,!0);function copyLine(n,r,a){if(n.readOnly)return!1;let s=[];for(let o of selectedLineBlocks(n))a?s.push({from:o.from,insert:n.doc.slice(o.from,o.to)+n.lineBreak}):s.push({from:o.to,insert:n.lineBreak+n.doc.slice(o.from,o.to)});return r(n.update({changes:s,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:n,dispatch:r})=>copyLine(n,r,!1),copyLineDown=({state:n,dispatch:r})=>copyLine(n,r,!0),deleteLine=n=>{if(n.state.readOnly)return!1;let{state:r}=n,a=r.changes(selectedLineBlocks(r).map(({from:o,to:u})=>(o>0?o--:u<r.doc.length&&u++,{from:o,to:u}))),s=updateSel(r.selection,o=>{let u;if(n.lineWrapping){let c=n.lineBlockAt(o.head),p=n.coordsAtPos(o.head,o.assoc||1);p&&(u=c.bottom+n.documentTop-p.bottom+n.defaultLineHeight/2)}return n.moveVertically(o,!0,u)}).map(a);return n.dispatch({changes:a,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(n,r){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(r-1,r+1)))return{from:r,to:r};let a=syntaxTree(n).resolveInner(r),s=a.childBefore(r),o=a.childAfter(r),u;return s&&o&&s.to<=r&&o.from>=r&&(u=s.type.prop(NodeProp.closedBy))&&u.indexOf(o.name)>-1&&n.doc.lineAt(s.to).from==n.doc.lineAt(o.from).from&&!/\S/.test(n.sliceDoc(s.to,o.from))?{from:s.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(n){return({state:r,dispatch:a})=>{if(r.readOnly)return!1;let s=r.changeByRange(o=>{let{from:u,to:c}=o,p=r.doc.lineAt(u),d=!n&&u==c&&isBetweenBrackets(r,u);n&&(u=c=(c<=p.to?p:r.doc.lineAt(c)).to);let _=new IndentContext(r,{simulateBreak:u,simulateDoubleBreak:!!d}),ja=getIndentation(_,u);for(ja==null&&(ja=countColumn(/^\s*/.exec(r.doc.lineAt(u).text)[0],r.tabSize));c<p.to&&/\s/.test(p.text[c-p.from]);)c++;d?{from:u,to:c}=d:u>p.from&&u<p.from+100&&!/\S/.test(p.text.slice(0,u))&&(u=p.from);let Ja=["",indentString(r,ja)];return d&&Ja.push(indentString(r,_.lineIndent(p.from,-1))),{changes:{from:u,to:c,insert:Text.of(Ja)},range:EditorSelection.cursor(u+1+Ja[1].length)}});return a(r.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(n,r){let a=-1;return n.changeByRange(s=>{let o=[];for(let c=s.from;c<=s.to;){let p=n.doc.lineAt(c);p.number>a&&(s.empty||s.to>p.from)&&(r(p,o,s),a=p.number),c=p.to+1}let u=n.changes(o);return{changes:o,range:EditorSelection.range(u.mapPos(s.anchor,1),u.mapPos(s.head,1))}})}const indentSelection=({state:n,dispatch:r})=>{if(n.readOnly)return!1;let a=Object.create(null),s=new IndentContext(n,{overrideIndentation:u=>{let c=a[u];return c??-1}}),o=changeBySelectedLine(n,(u,c,p)=>{let d=getIndentation(s,u.from);if(d==null)return;/\S/.test(u.text)||(d=0);let _=/^\s*/.exec(u.text)[0],ja=indentString(n,d);(_!=ja||p.from<u.from+_.length)&&(a[u.from]=d,c.push({from:u.from,to:u.from+_.length,insert:ja}))});return o.changes.empty||r(n.update(o,{userEvent:"indent"})),!0},indentMore=({state:n,dispatch:r})=>n.readOnly?!1:(r(n.update(changeBySelectedLine(n,(a,s)=>{s.push({from:a.from,insert:n.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:n,dispatch:r})=>n.readOnly?!1:(r(n.update(changeBySelectedLine(n,(a,s)=>{let o=/^\s*/.exec(a.text)[0];if(!o)return;let u=countColumn(o,n.tabSize),c=0,p=indentString(n,Math.max(0,u-getIndentUnit(n)));for(;c<o.length&&c<p.length&&o.charCodeAt(c)==p.charCodeAt(c);)c++;s.push({from:a.from+c,to:a.from+o.length,insert:p.slice(c)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=n=>(n.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap);function toSet(n){let r=Object.keys(n).join(""),a=/\w/.test(r);return a&&(r=r.replace(/\w/g,"")),`[${a?"\\w":""}${r.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(n){let r=Object.create(null),a=Object.create(null);for(let{label:o}of n){r[o[0]]=!0;for(let u=1;u<o.length;u++)a[o[u]]=!0}let s=toSet(r)+toSet(a)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function completeFromList(n){let r=n.map(o=>typeof o=="string"?{label:o}:o),[a,s]=r.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:prefixMatch(r);return o=>{let u=o.matchBefore(s);return u||o.explicit?{from:u?u.from:o.pos,options:r,validFor:a}:null}}function ifNotIn(n,r){return a=>{for(let s=syntaxTree(a.state).resolveInner(a.pos,-1);s;s=s.parent){if(n.indexOf(s.name)>-1)return null;if(s.type.isTop)break}return r(a)}}const pickedCompletion=Annotation.define(),baseTheme=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(r,a,s,o){this.field=r,this.line=a,this.from=s,this.to=o}}class FieldRange{constructor(r,a,s){this.field=r,this.from=a,this.to=s}map(r){let a=r.mapPos(this.from,-1,MapMode.TrackDel),s=r.mapPos(this.to,1,MapMode.TrackDel);return a==null||s==null?null:new FieldRange(this.field,a,s)}}class Snippet{constructor(r,a){this.lines=r,this.fieldPositions=a}instantiate(r,a){let s=[],o=[a],u=r.doc.lineAt(a),c=/^\s*/.exec(u.text)[0];for(let d of this.lines){if(s.length){let _=c,ja=/^\t*/.exec(d)[0].length;for(let Ja=0;Ja<ja;Ja++)_+=r.facet(indentUnit);o.push(a+_.length-ja),d=_+d.slice(ja)}s.push(d),a+=d.length+1}let p=this.fieldPositions.map(d=>new FieldRange(d.field,o[d.line]+d.from,o[d.line]+d.to));return{text:s,ranges:p}}static parse(r){let a=[],s=[],o=[],u;for(let c of r.split(/\r\n?|\n/)){for(;u=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(c);){let p=u[1]?+u[1]:null,d=u[2]||u[3]||"",_=-1,ja=d.replace(/\\[{}]/g,Ja=>Ja[1]);for(let Ja=0;Ja<a.length;Ja++)(p!=null?a[Ja].seq==p:ja&&a[Ja].name==ja)&&(_=Ja);if(_<0){let Ja=0;for(;Ja<a.length&&(p==null||a[Ja].seq!=null&&a[Ja].seq<p);)Ja++;a.splice(Ja,0,{seq:p,name:ja}),_=Ja;for(let ec of o)ec.field>=_&&ec.field++}o.push(new FieldPos(_,s.length,u.index,u.index+ja.length)),c=c.slice(0,u.index)+d+c.slice(u.index+u[0].length)}c=c.replace(/\\([{}])/g,(p,d,_)=>{for(let ja of o)ja.line==s.length&&ja.from>_&&(ja.from--,ja.to--);return d}),s.push(c)}return new Snippet(s,o)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(r,a){this.ranges=r,this.active=a,this.deco=Decoration.set(r.map(s=>(s.from==s.to?fieldMarker:fieldRange).range(s.from,s.to)))}map(r){let a=[];for(let s of this.ranges){let o=s.map(r);if(!o)return null;a.push(o)}return new ActiveSnippet(a,this.active)}selectionInsideField(r){return r.ranges.every(a=>this.ranges.some(s=>s.field==this.active&&s.from<=a.from&&s.to>=a.to))}}const setActive=StateEffect.define({map(n,r){return n&&n.map(r)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(n,r){for(let a of r.effects){if(a.is(setActive))return a.value;if(a.is(moveToField)&&n)return new ActiveSnippet(n.ranges,a.value)}return n&&r.docChanged&&(n=n.map(r.changes)),n&&r.selection&&!n.selectionInsideField(r.selection)&&(n=null),n},provide:n=>EditorView.decorations.from(n,r=>r?r.deco:Decoration.none)});function fieldSelection(n,r){return EditorSelection.create(n.filter(a=>a.field==r).map(a=>EditorSelection.range(a.from,a.to)))}function snippet(n){let r=Snippet.parse(n);return(a,s,o,u)=>{let{text:c,ranges:p}=r.instantiate(a.state,o),d={changes:{from:o,to:u,insert:Text.of(c)},scrollIntoView:!0,annotations:s?[pickedCompletion.of(s),Transaction.userEvent.of("input.complete")]:void 0};if(p.length&&(d.selection=fieldSelection(p,0)),p.some(_=>_.field>0)){let _=new ActiveSnippet(p,0),ja=d.effects=[setActive.of(_)];a.state.field(snippetState,!1)===void 0&&ja.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme]))}a.dispatch(a.state.update(d))}}function moveField(n){return({state:r,dispatch:a})=>{let s=r.field(snippetState,!1);if(!s||n<0&&s.active==0)return!1;let o=s.active+n,u=n>0&&!s.ranges.some(c=>c.field==o+n);return a(r.update({selection:fieldSelection(s.ranges,o),effects:setActive.of(u?null:new ActiveSnippet(s.ranges,o)),scrollIntoView:!0})),!0}}const clearSnippet=({state:n,dispatch:r})=>n.field(snippetState,!1)?(r(n.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(n){return n.length?n[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],n=>n.facet(snippetKeymap)));function snippetCompletion(n,r){return Object.assign(Object.assign({},r),{apply:snippet(n)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(n,r){let a=r.state.field(snippetState,!1),s;if(!a||(s=r.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let o=a.ranges.find(u=>u.from<=s&&u.to>=s);return!o||o.field==a.active?!1:(r.dispatch({selection:fieldSelection(a.ranges,o.field),effects:setActive.of(a.ranges.some(u=>u.field>o.field)?new ActiveSnippet(a.ranges,o.field):null),scrollIntoView:!0}),!0)}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const minimalSetup=[highlightSpecialChars(),history(),drawSelection(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),keymap.of([...defaultKeymap,...historyKeymap])];var define_process_env_default={};class Stack{constructor(r,a,s,o,u,c,p,d,_,ja=0,Ja){this.p=r,this.stack=a,this.state=s,this.reducePos=o,this.pos=u,this.score=c,this.buffer=p,this.bufferBase=d,this.curContext=_,this.lookAhead=ja,this.parent=Ja}toString(){return`[${this.stack.filter((r,a)=>a%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(r,a,s=0){let o=r.parser.context;return new Stack(r,[],a,s,s,0,[],0,o?new StackContext(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(r,a){this.stack.push(this.state,a,this.bufferBase+this.buffer.length),this.state=r}reduce(r){var a;let s=r>>19,o=r&65535,{parser:u}=this.p,c=this.reducePos<this.pos-25;c&&this.setLookAhead(this.pos);let p=u.dynamicPrecedence(o);if(p&&(this.score+=p),s==0){this.pushState(u.getGoto(this.state,o,!0),this.reducePos),o<u.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,c?8:4,!0),this.reduceContext(o,this.reducePos);return}let d=this.stack.length-(s-1)*3-(r&262144?6:0),_=d?this.stack[d-2]:this.p.ranges[0].from,ja=this.reducePos-_;ja>=2e3&&!(!((a=this.p.parser.nodeSet.types[o])===null||a===void 0)&&a.isAnonymous)&&(_==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=ja):this.p.lastBigReductionSize<ja&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=_,this.p.lastBigReductionSize=ja));let Ja=d?this.stack[d-1]:0,ec=this.bufferBase+this.buffer.length-Ja;if(o<u.minRepeatTerm||r&131072){let tc=u.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,_,tc,ec+4,!0)}if(r&262144)this.state=this.stack[d];else{let tc=this.stack[d-3];this.state=u.getGoto(tc,o,!0)}for(;this.stack.length>d;)this.stack.pop();this.reduceContext(o,_)}storeNode(r,a,s,o=4,u=!1){if(r==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let c=this,p=this.buffer.length;if(p==0&&c.parent&&(p=c.bufferBase-c.parent.bufferBase,c=c.parent),p>0&&c.buffer[p-4]==0&&c.buffer[p-1]>-1){if(a==s)return;if(c.buffer[p-2]>=a){c.buffer[p-2]=s;return}}}if(!u||this.pos==s)this.buffer.push(r,a,s,o);else{let c=this.buffer.length;if(c>0&&this.buffer[c-4]!=0){let p=!1;for(let d=c;d>0&&this.buffer[d-2]>s;d-=4)if(this.buffer[d-1]>=0){p=!0;break}if(p)for(;c>0&&this.buffer[c-2]>s;)this.buffer[c]=this.buffer[c-4],this.buffer[c+1]=this.buffer[c-3],this.buffer[c+2]=this.buffer[c-2],this.buffer[c+3]=this.buffer[c-1],c-=4,o>4&&(o-=4)}this.buffer[c]=r,this.buffer[c+1]=a,this.buffer[c+2]=s,this.buffer[c+3]=o}}shift(r,a,s,o){if(r&131072)this.pushState(r&65535,this.pos);else if(r&262144)this.pos=o,this.shiftContext(a,s),a<=this.p.parser.maxNode&&this.buffer.push(a,s,o,4);else{let u=r,{parser:c}=this.p;(o>this.pos||a<=c.maxNode)&&(this.pos=o,c.stateFlag(u,1)||(this.reducePos=o)),this.pushState(u,s),this.shiftContext(a,s),a<=c.maxNode&&this.buffer.push(a,s,o,4)}}apply(r,a,s,o){r&65536?this.reduce(r):this.shift(r,a,s,o)}useNode(r,a){let s=this.p.reused.length-1;(s<0||this.p.reused[s]!=r)&&(this.p.reused.push(r),s++);let o=this.pos;this.reducePos=this.pos=o+r.length,this.pushState(a,o),this.buffer.push(s,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,r,this,this.p.stream.reset(this.pos-r.length)))}split(){let r=this,a=r.buffer.length;for(;a>0&&r.buffer[a-2]>r.reducePos;)a-=4;let s=r.buffer.slice(a),o=r.bufferBase+a;for(;r&&o==r.bufferBase;)r=r.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,s,o,this.curContext,this.lookAhead,r)}recoverByDelete(r,a){let s=r<=this.p.parser.maxNode;s&&this.storeNode(r,this.pos,a,4),this.storeNode(0,this.pos,a,s?8:4),this.pos=this.reducePos=a,this.score-=190}canShift(r){for(let a=new SimulatedStack(this);;){let s=this.p.parser.stateSlot(a.state,4)||this.p.parser.hasAction(a.state,r);if(s==0)return!1;if(!(s&65536))return!0;a.reduce(s)}}recoverByInsert(r){if(this.stack.length>=300)return[];let a=this.p.parser.nextStates(this.state);if(a.length>8||this.stack.length>=120){let o=[];for(let u=0,c;u<a.length;u+=2)(c=a[u+1])!=this.state&&this.p.parser.hasAction(c,r)&&o.push(a[u],c);if(this.stack.length<120)for(let u=0;o.length<8&&u<a.length;u+=2){let c=a[u+1];o.some((p,d)=>d&1&&p==c)||o.push(a[u],c)}a=o}let s=[];for(let o=0;o<a.length&&s.length<4;o+=2){let u=a[o+1];if(u==this.state)continue;let c=this.split();c.pushState(u,this.pos),c.storeNode(0,c.pos,c.pos,4,!0),c.shiftContext(a[o],this.pos),c.reducePos=this.pos,c.score-=200,s.push(c)}return s}forceReduce(){let{parser:r}=this.p,a=r.stateSlot(this.state,5);if(!(a&65536))return!1;if(!r.validAction(this.state,a)){let s=a>>19,o=a&65535,u=this.stack.length-s*3;if(u<0||r.getGoto(this.stack[u],o,!1)<0){let c=this.findForcedReduction();if(c==null)return!1;a=c}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(a),!0}findForcedReduction(){let{parser:r}=this.p,a=[],s=(o,u)=>{if(!a.includes(o))return a.push(o),r.allActions(o,c=>{if(!(c&393216))if(c&65536){let p=(c>>19)-u;if(p>1){let d=c&65535,_=this.stack.length-p*3;if(_>=0&&r.getGoto(this.stack[_],d,!1)>=0)return p<<19|65536|d}}else{let p=s(c,u+1);if(p!=null)return p}})};return s(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:r}=this.p;return r.data[r.stateSlot(this.state,1)]==65535&&!r.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(r){if(this.state!=r.state||this.stack.length!=r.stack.length)return!1;for(let a=0;a<this.stack.length;a+=3)if(this.stack[a]!=r.stack[a])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(r){return this.p.parser.dialect.flags[r]}shiftContext(r,a){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,r,this,this.p.stream.reset(a)))}reduceContext(r,a){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,r,this,this.p.stream.reset(a)))}emitContext(){let r=this.buffer.length-1;(r<0||this.buffer[r]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let r=this.buffer.length-1;(r<0||this.buffer[r]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(r){if(r!=this.curContext.context){let a=new StackContext(this.curContext.tracker,r);a.hash!=this.curContext.hash&&this.emitContext(),this.curContext=a}}setLookAhead(r){r>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=r)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(r,a){this.tracker=r,this.context=a,this.hash=r.strict?r.hash(a):0}}class SimulatedStack{constructor(r){this.start=r,this.state=r.state,this.stack=r.stack,this.base=this.stack.length}reduce(r){let a=r&65535,s=r>>19;s==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(s-1)*3;let o=this.start.p.parser.getGoto(this.stack[this.base-3],a,!0);this.state=o}}class StackBufferCursor{constructor(r,a,s){this.stack=r,this.pos=a,this.index=s,this.buffer=r.buffer,this.index==0&&this.maybeNext()}static create(r,a=r.bufferBase+r.buffer.length){return new StackBufferCursor(r,a,a-r.bufferBase)}maybeNext(){let r=this.stack.parent;r!=null&&(this.index=this.stack.bufferBase-r.bufferBase,this.stack=r,this.buffer=r.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(n,r=Uint16Array){if(typeof n!="string")return n;let a=null;for(let s=0,o=0;s<n.length;){let u=0;for(;;){let c=n.charCodeAt(s++),p=!1;if(c==126){u=65535;break}c>=92&&c--,c>=34&&c--;let d=c-32;if(d>=46&&(d-=46,p=!0),u+=d,p)break;u*=46}a?a[o++]=u:a=new r(u)}return a}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(r,a){this.input=r,this.ranges=a,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=a[0].from,this.range=a[0],this.end=a[a.length-1].to,this.readNext()}resolveOffset(r,a){let s=this.range,o=this.rangeIndex,u=this.pos+r;for(;u<s.from;){if(!o)return null;let c=this.ranges[--o];u-=s.from-c.to,s=c}for(;a<0?u>s.to:u>=s.to;){if(o==this.ranges.length-1)return null;let c=this.ranges[++o];u+=c.from-s.to,s=c}return u}clipPos(r){if(r>=this.range.from&&r<this.range.to)return r;for(let a of this.ranges)if(a.to>r)return Math.max(r,a.from);return this.end}peek(r){let a=this.chunkOff+r,s,o;if(a>=0&&a<this.chunk.length)s=this.pos+r,o=this.chunk.charCodeAt(a);else{let u=this.resolveOffset(r,1);if(u==null)return-1;if(s=u,s>=this.chunk2Pos&&s<this.chunk2Pos+this.chunk2.length)o=this.chunk2.charCodeAt(s-this.chunk2Pos);else{let c=this.rangeIndex,p=this.range;for(;p.to<=s;)p=this.ranges[++c];this.chunk2=this.input.chunk(this.chunk2Pos=s),s+this.chunk2.length>p.to&&(this.chunk2=this.chunk2.slice(0,p.to-s)),o=this.chunk2.charCodeAt(0)}}return s>=this.token.lookAhead&&(this.token.lookAhead=s+1),o}acceptToken(r,a=0){let s=a?this.resolveOffset(a,-1):this.pos;if(s==null||s<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=r,this.token.end=s}acceptTokenTo(r,a){this.token.value=r,this.token.end=a}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:r,chunkPos:a}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=r,this.chunk2Pos=a,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let r=this.input.chunk(this.pos),a=this.pos+r.length;this.chunk=a>this.range.to?r.slice(0,this.range.to-this.pos):r,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(r=1){for(this.chunkOff+=r;this.pos+r>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();r-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=r,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(r,a){if(a?(this.token=a,a.start=r,a.lookAhead=r+1,a.value=a.extended=-1):this.token=nullToken,this.pos!=r){if(this.pos=r,r==this.end)return this.setDone(),this;for(;r<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;r>=this.range.to;)this.range=this.ranges[++this.rangeIndex];r>=this.chunkPos&&r<this.chunkPos+this.chunk.length?this.chunkOff=r-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(r,a){if(r>=this.chunkPos&&a<=this.chunkPos+this.chunk.length)return this.chunk.slice(r-this.chunkPos,a-this.chunkPos);if(r>=this.chunk2Pos&&a<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(r-this.chunk2Pos,a-this.chunk2Pos);if(r>=this.range.from&&a<=this.range.to)return this.input.read(r,a);let s="";for(let o of this.ranges){if(o.from>=a)break;o.to>r&&(s+=this.input.read(Math.max(o.from,r),Math.min(o.to,a)))}return s}}class TokenGroup{constructor(r,a){this.data=r,this.id=a}token(r,a){let{parser:s}=a.p;readToken(this.data,r,a,this.id,s.data,s.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(r,a,s){this.precTable=a,this.elseToken=s,this.data=typeof r=="string"?decodeArray(r):r}token(r,a){let s=r.pos,o=0;for(;;){let u=r.next<0,c=r.resolveOffset(1,1);if(readToken(this.data,r,a,0,this.data,this.precTable),r.token.value>-1)break;if(this.elseToken==null)return;if(u||o++,c==null)break;r.reset(c,r.token)}o&&(r.reset(s,r.token),r.acceptToken(this.elseToken,o))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(r,a={}){this.token=r,this.contextual=!!a.contextual,this.fallback=!!a.fallback,this.extend=!!a.extend}}function readToken(n,r,a,s,o,u){let c=0,p=1<<s,{dialect:d}=a.p.parser;e:for(;p&n[c];){let _=n[c+1];for(let tc=c+3;tc<_;tc+=2)if((n[tc+1]&p)>0){let rc=n[tc];if(d.allows(rc)&&(r.token.value==-1||r.token.value==rc||overrides(rc,r.token.value,o,u))){r.acceptToken(rc);break}}let ja=r.next,Ja=0,ec=n[c+2];if(r.next<0&&ec>Ja&&n[_+ec*3-3]==65535){c=n[_+ec*3-1];continue e}for(;Ja<ec;){let tc=Ja+ec>>1,rc=_+tc+(tc<<1),nc=n[rc],ic=n[rc+1]||65536;if(ja<nc)ec=tc;else if(ja>=ic)Ja=tc+1;else{c=n[rc+2],r.advance();continue e}}break}}function findOffset(n,r,a){for(let s=r,o;(o=n[s])!=65535;s++)if(o==a)return s-r;return-1}function overrides(n,r,a,s){let o=findOffset(a,s,r);return o<0||findOffset(a,s,n)<o}const verbose=typeof process<"u"&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(n,r,a){let s=n.cursor(IterMode.IncludeAnonymous);for(s.moveTo(r);;)if(!(a<0?s.childBefore(r):s.childAfter(r)))for(;;){if((a<0?s.to<r:s.from>r)&&!s.type.isError)return a<0?Math.max(0,Math.min(s.to-1,r-25)):Math.min(n.length,Math.max(s.from+1,r+25));if(a<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return a<0?0:n.length}}class FragmentCursor{constructor(r,a){this.fragments=r,this.nodeSet=a,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let r=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(r){for(this.safeFrom=r.openStart?cutAt(r.tree,r.from+r.offset,1)-r.offset:r.from,this.safeTo=r.openEnd?cutAt(r.tree,r.to+r.offset,-1)-r.offset:r.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(r.tree),this.start.push(-r.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(r){if(r<this.nextStart)return null;for(;this.fragment&&this.safeTo<=r;)this.nextFragment();if(!this.fragment)return null;for(;;){let a=this.trees.length-1;if(a<0)return this.nextFragment(),null;let s=this.trees[a],o=this.index[a];if(o==s.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let u=s.children[o],c=this.start[a]+s.positions[o];if(c>r)return this.nextStart=c,null;if(u instanceof Tree){if(c==r){if(c<this.safeFrom)return null;let p=c+u.length;if(p<=this.safeTo){let d=u.prop(NodeProp.lookAhead);if(!d||p+d<this.fragment.to)return u}}this.index[a]++,c+u.length>=Math.max(this.safeFrom,r)&&(this.trees.push(u),this.start.push(c),this.index.push(0))}else this.index[a]++,this.nextStart=c+u.length}}}class TokenCache{constructor(r,a){this.stream=a,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=r.tokenizers.map(s=>new CachedToken)}getActions(r){let a=0,s=null,{parser:o}=r.p,{tokenizers:u}=o,c=o.stateSlot(r.state,3),p=r.curContext?r.curContext.hash:0,d=0;for(let _=0;_<u.length;_++){if(!(1<<_&c))continue;let ja=u[_],Ja=this.tokens[_];if(!(s&&!ja.fallback)&&((ja.contextual||Ja.start!=r.pos||Ja.mask!=c||Ja.context!=p)&&(this.updateCachedToken(Ja,ja,r),Ja.mask=c,Ja.context=p),Ja.lookAhead>Ja.end+25&&(d=Math.max(Ja.lookAhead,d)),Ja.value!=0)){let ec=a;if(Ja.extended>-1&&(a=this.addActions(r,Ja.extended,Ja.end,a)),a=this.addActions(r,Ja.value,Ja.end,a),!ja.extend&&(s=Ja,a>ec))break}}for(;this.actions.length>a;)this.actions.pop();return d&&r.setLookAhead(d),!s&&r.pos==this.stream.end&&(s=new CachedToken,s.value=r.p.parser.eofTerm,s.start=s.end=r.pos,a=this.addActions(r,s.value,s.end,a)),this.mainToken=s,this.actions}getMainToken(r){if(this.mainToken)return this.mainToken;let a=new CachedToken,{pos:s,p:o}=r;return a.start=s,a.end=Math.min(s+1,o.stream.end),a.value=s==o.stream.end?o.parser.eofTerm:0,a}updateCachedToken(r,a,s){let o=this.stream.clipPos(s.pos);if(a.token(this.stream.reset(o,r),s),r.value>-1){let{parser:u}=s.p;for(let c=0;c<u.specialized.length;c++)if(u.specialized[c]==r.value){let p=u.specializers[c](this.stream.read(r.start,r.end),s);if(p>=0&&s.p.parser.dialect.allows(p>>1)){p&1?r.extended=p>>1:r.value=p>>1;break}}}else r.value=0,r.end=this.stream.clipPos(o+1)}putAction(r,a,s,o){for(let u=0;u<o;u+=3)if(this.actions[u]==r)return o;return this.actions[o++]=r,this.actions[o++]=a,this.actions[o++]=s,o}addActions(r,a,s,o){let{state:u}=r,{parser:c}=r.p,{data:p}=c;for(let d=0;d<2;d++)for(let _=c.stateSlot(u,d?2:1);;_+=3){if(p[_]==65535)if(p[_+1]==1)_=pair(p,_+2);else{o==0&&p[_+1]==2&&(o=this.putAction(pair(p,_+2),a,s,o));break}p[_]==a&&(o=this.putAction(pair(p,_+1),a,s,o))}return o}}class Parse{constructor(r,a,s,o){this.parser=r,this.input=a,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(a,o),this.tokens=new TokenCache(r,this.stream),this.topTerm=r.top[1];let{from:u}=o[0];this.stacks=[Stack.start(this,r.top[0],u)],this.fragments=s.length&&this.stream.end-u>r.bufferLength*4?new FragmentCursor(s,r.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let r=this.stacks,a=this.minStackPos,s=this.stacks=[],o,u;if(this.bigReductionCount>300&&r.length==1){let[c]=r;for(;c.forceReduce()&&c.stack.length&&c.stack[c.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let c=0;c<r.length;c++){let p=r[c];for(;;){if(this.tokens.mainToken=null,p.pos>a)s.push(p);else{if(this.advanceStack(p,s,r))continue;{o||(o=[],u=[]),o.push(p);let d=this.tokens.getMainToken(p);u.push(d.value,d.end)}}break}}if(!s.length){let c=o&&findFinished(o);if(c)return verbose&&console.log("Finish with "+this.stackID(c)),this.stackToTree(c);if(this.parser.strict)throw verbose&&o&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+a);this.recovering||(this.recovering=5)}if(this.recovering&&o){let c=this.stoppedAt!=null&&o[0].pos>this.stoppedAt?o[0]:this.runRecovery(o,u,s);if(c)return verbose&&console.log("Force-finish "+this.stackID(c)),this.stackToTree(c.forceAll())}if(this.recovering){let c=this.recovering==1?1:this.recovering*3;if(s.length>c)for(s.sort((p,d)=>d.score-p.score);s.length>c;)s.pop();s.some(p=>p.reducePos>a)&&this.recovering--}else if(s.length>1){e:for(let c=0;c<s.length-1;c++){let p=s[c];for(let d=c+1;d<s.length;d++){let _=s[d];if(p.sameState(_)||p.buffer.length>500&&_.buffer.length>500)if((p.score-_.score||p.buffer.length-_.buffer.length)>0)s.splice(d--,1);else{s.splice(c--,1);continue e}}}s.length>12&&s.splice(12,s.length-12)}this.minStackPos=s[0].pos;for(let c=1;c<s.length;c++)s[c].pos<this.minStackPos&&(this.minStackPos=s[c].pos);return null}stopAt(r){if(this.stoppedAt!=null&&this.stoppedAt<r)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=r}advanceStack(r,a,s){let o=r.pos,{parser:u}=this,c=verbose?this.stackID(r)+" -> ":"";if(this.stoppedAt!=null&&o>this.stoppedAt)return r.forceReduce()?r:null;if(this.fragments){let _=r.curContext&&r.curContext.tracker.strict,ja=_?r.curContext.hash:0;for(let Ja=this.fragments.nodeAt(o);Ja;){let ec=this.parser.nodeSet.types[Ja.type.id]==Ja.type?u.getGoto(r.state,Ja.type.id):-1;if(ec>-1&&Ja.length&&(!_||(Ja.prop(NodeProp.contextHash)||0)==ja))return r.useNode(Ja,ec),verbose&&console.log(c+this.stackID(r)+` (via reuse of ${u.getName(Ja.type.id)})`),!0;if(!(Ja instanceof Tree)||Ja.children.length==0||Ja.positions[0]>0)break;let tc=Ja.children[0];if(tc instanceof Tree&&Ja.positions[0]==0)Ja=tc;else break}}let p=u.stateSlot(r.state,4);if(p>0)return r.reduce(p),verbose&&console.log(c+this.stackID(r)+` (via always-reduce ${u.getName(p&65535)})`),!0;if(r.stack.length>=8400)for(;r.stack.length>6e3&&r.forceReduce(););let d=this.tokens.getActions(r);for(let _=0;_<d.length;){let ja=d[_++],Ja=d[_++],ec=d[_++],tc=_==d.length||!s,rc=tc?r:r.split(),nc=this.tokens.mainToken;if(rc.apply(ja,Ja,nc?nc.start:rc.pos,ec),verbose&&console.log(c+this.stackID(rc)+` (via ${ja&65536?`reduce of ${u.getName(ja&65535)}`:"shift"} for ${u.getName(Ja)} @ ${o}${rc==r?"":", split"})`),tc)return!0;rc.pos>o?a.push(rc):s.push(rc)}return!1}advanceFully(r,a){let s=r.pos;for(;;){if(!this.advanceStack(r,null,null))return!1;if(r.pos>s)return pushStackDedup(r,a),!0}}runRecovery(r,a,s){let o=null,u=!1;for(let c=0;c<r.length;c++){let p=r[c],d=a[c<<1],_=a[(c<<1)+1],ja=verbose?this.stackID(p)+" -> ":"";if(p.deadEnd&&(u||(u=!0,p.restart(),verbose&&console.log(ja+this.stackID(p)+" (restarted)"),this.advanceFully(p,s))))continue;let Ja=p.split(),ec=ja;for(let tc=0;Ja.forceReduce()&&tc<10&&(verbose&&console.log(ec+this.stackID(Ja)+" (via force-reduce)"),!this.advanceFully(Ja,s));tc++)verbose&&(ec=this.stackID(Ja)+" -> ");for(let tc of p.recoverByInsert(d))verbose&&console.log(ja+this.stackID(tc)+" (via recover-insert)"),this.advanceFully(tc,s);this.stream.end>p.pos?(_==p.pos&&(_++,d=0),p.recoverByDelete(d,_),verbose&&console.log(ja+this.stackID(p)+` (via recover-delete ${this.parser.getName(d)})`),pushStackDedup(p,s)):(!o||o.score<p.score)&&(o=p)}return o}stackToTree(r){return r.close(),Tree.build({buffer:StackBufferCursor.create(r),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:r.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(r){let a=(stackIDs||(stackIDs=new WeakMap)).get(r);return a||stackIDs.set(r,a=String.fromCodePoint(this.nextStackID++)),a+r}}function pushStackDedup(n,r){for(let a=0;a<r.length;a++){let s=r[a];if(s.pos==n.pos&&s.sameState(n)){r[a].score<n.score&&(r[a]=n);return}}r.push(n)}class Dialect{constructor(r,a,s){this.source=r,this.flags=a,this.disabled=s}allows(r){return!this.disabled||this.disabled[r]==0}}const id=n=>n;class ContextTracker{constructor(r){this.start=r.start,this.shift=r.shift||id,this.reduce=r.reduce||id,this.reuse=r.reuse||id,this.hash=r.hash||(()=>0),this.strict=r.strict!==!1}}class LRParser extends Parser{constructor(r){if(super(),this.wrappers=[],r.version!=14)throw new RangeError(`Parser version (${r.version}) doesn't match runtime version (14)`);let a=r.nodeNames.split(" ");this.minRepeatTerm=a.length;for(let p=0;p<r.repeatNodeCount;p++)a.push("");let s=Object.keys(r.topRules).map(p=>r.topRules[p][1]),o=[];for(let p=0;p<a.length;p++)o.push([]);function u(p,d,_){o[p].push([d,d.deserialize(String(_))])}if(r.nodeProps)for(let p of r.nodeProps){let d=p[0];typeof d=="string"&&(d=NodeProp[d]);for(let _=1;_<p.length;){let ja=p[_++];if(ja>=0)u(ja,d,p[_++]);else{let Ja=p[_+-ja];for(let ec=-ja;ec>0;ec--)u(p[_++],d,Ja);_++}}}this.nodeSet=new NodeSet(a.map((p,d)=>NodeType.define({name:d>=this.minRepeatTerm?void 0:p,id:d,props:o[d],top:s.indexOf(d)>-1,error:d==0,skipped:r.skippedNodes&&r.skippedNodes.indexOf(d)>-1}))),r.propSources&&(this.nodeSet=this.nodeSet.extend(...r.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let c=decodeArray(r.tokenData);this.context=r.context,this.specializerSpecs=r.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let p=0;p<this.specializerSpecs.length;p++)this.specialized[p]=this.specializerSpecs[p].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(r.states,Uint32Array),this.data=decodeArray(r.stateData),this.goto=decodeArray(r.goto),this.maxTerm=r.maxTerm,this.tokenizers=r.tokenizers.map(p=>typeof p=="number"?new TokenGroup(c,p):p),this.topRules=r.topRules,this.dialects=r.dialects||{},this.dynamicPrecedences=r.dynamicPrecedences||null,this.tokenPrecTable=r.tokenPrec,this.termNames=r.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(r,a,s){let o=new Parse(this,r,a,s);for(let u of this.wrappers)o=u(o,r,a,s);return o}getGoto(r,a,s=!1){let o=this.goto;if(a>=o[0])return-1;for(let u=o[a+1];;){let c=o[u++],p=c&1,d=o[u++];if(p&&s)return d;for(let _=u+(c>>1);u<_;u++)if(o[u]==r)return d;if(p)return-1}}hasAction(r,a){let s=this.data;for(let o=0;o<2;o++)for(let u=this.stateSlot(r,o?2:1),c;;u+=3){if((c=s[u])==65535)if(s[u+1]==1)c=s[u=pair(s,u+2)];else{if(s[u+1]==2)return pair(s,u+2);break}if(c==a||c==0)return pair(s,u+1)}return 0}stateSlot(r,a){return this.states[r*6+a]}stateFlag(r,a){return(this.stateSlot(r,0)&a)>0}validAction(r,a){return!!this.allActions(r,s=>s==a?!0:null)}allActions(r,a){let s=this.stateSlot(r,4),o=s?a(s):void 0;for(let u=this.stateSlot(r,1);o==null;u+=3){if(this.data[u]==65535)if(this.data[u+1]==1)u=pair(this.data,u+2);else break;o=a(pair(this.data,u+1))}return o}nextStates(r){let a=[];for(let s=this.stateSlot(r,1);;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=pair(this.data,s+2);else break;if(!(this.data[s+2]&1)){let o=this.data[s+1];a.some((u,c)=>c&1&&u==o)||a.push(this.data[s],o)}}return a}configure(r){let a=Object.assign(Object.create(LRParser.prototype),this);if(r.props&&(a.nodeSet=this.nodeSet.extend(...r.props)),r.top){let s=this.topRules[r.top];if(!s)throw new RangeError(`Invalid top rule name ${r.top}`);a.top=s}return r.tokenizers&&(a.tokenizers=this.tokenizers.map(s=>{let o=r.tokenizers.find(u=>u.from==s);return o?o.to:s})),r.specializers&&(a.specializers=this.specializers.slice(),a.specializerSpecs=this.specializerSpecs.map((s,o)=>{let u=r.specializers.find(p=>p.from==s.external);if(!u)return s;let c=Object.assign(Object.assign({},s),{external:u.to});return a.specializers[o]=getSpecializer(c),c})),r.contextTracker&&(a.context=r.contextTracker),r.dialect&&(a.dialect=this.parseDialect(r.dialect)),r.strict!=null&&(a.strict=r.strict),r.wrap&&(a.wrappers=a.wrappers.concat(r.wrap)),r.bufferLength!=null&&(a.bufferLength=r.bufferLength),a}hasWrappers(){return this.wrappers.length>0}getName(r){return this.termNames?this.termNames[r]:String(r<=this.maxNode&&this.nodeSet.types[r].name||r)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(r){let a=this.dynamicPrecedences;return a==null?0:a[r]||0}parseDialect(r){let a=Object.keys(this.dialects),s=a.map(()=>!1);if(r)for(let u of r.split(" ")){let c=a.indexOf(u);c>=0&&(s[c]=!0)}let o=null;for(let u=0;u<a.length;u++)if(!s[u])for(let c=this.dialects[a[u]],p;(p=this.data[c++])!=65535;)(o||(o=new Uint8Array(this.maxTerm+1)))[p]=1;return new Dialect(r,s,o)}static deserialize(r){return new LRParser(r)}}function pair(n,r){return n[r]|n[r+1]<<16}function findFinished(n){let r=null;for(let a of n){let s=a.p.stoppedAt;(a.pos==a.p.stream.end||s!=null&&a.pos>s)&&a.p.parser.stateFlag(a.state,2)&&(!r||r.score<a.score)&&(r=a)}return r}function getSpecializer(n){if(n.external){let r=n.extend?1:0;return(a,s)=>n.external(a,s)<<1|r}return n.get}const noSemi=312,incdec=1,incdecPrefix=2,questionDot=3,JSXStartTag=4,insertSemi=313,spaces=315,newline=316,LineComment=5,BlockComment=6,Dialect_jsx=0,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,lt$3=60,comma=44,question=63,dot=46,trackNewline=new ContextTracker({start:!1,shift(n,r){return r==LineComment||r==BlockComment||r==spaces?n:r==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((n,r)=>{let{next:a}=n;(a==braceR||a==-1||r.context)&&n.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((n,r)=>{let{next:a}=n,s;space.indexOf(a)>-1||a==slash&&((s=n.peek(1))==slash||s==star)||a!=braceR&&a!=semicolon&&a!=-1&&!r.context&&n.acceptToken(noSemi)},{contextual:!0}),operatorToken=new ExternalTokenizer((n,r)=>{let{next:a}=n;if(a==plus||a==minus){if(n.advance(),a==n.next){n.advance();let s=!r.context&&r.canShift(incdec);n.acceptToken(s?incdec:incdecPrefix)}}else a==question&&n.peek(1)==dot&&(n.advance(),n.advance(),(n.next<48||n.next>57)&&n.acceptToken(questionDot))},{contextual:!0});function identifierChar(n,r){return n>=65&&n<=90||n>=97&&n<=122||n==95||n>=192||!r&&n>=48&&n<=57}const jsx=new ExternalTokenizer((n,r)=>{if(n.next!=lt$3||!r.dialectEnabled(Dialect_jsx)||(n.advance(),n.next==slash))return;let a=0;for(;space.indexOf(n.next)>-1;)n.advance(),a++;if(identifierChar(n.next,!0)){for(n.advance(),a++;identifierChar(n.next,!1);)n.advance(),a++;for(;space.indexOf(n.next)>-1;)n.advance(),a++;if(n.next==comma)return;for(let s=0;;s++){if(s==7){if(!identifierChar(n.next,!0))return;break}if(n.next!="extends".charCodeAt(s))break;n.advance(),a++}}n.acceptToken(JSXStartTag,-a)}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const using function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,"LineComment Hashbang":tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,extends:54,this:58,true:66,false:66,null:78,void:82,typeof:86,super:102,new:136,delete:148,yield:157,await:161,class:166,public:229,private:229,protected:229,readonly:231,instanceof:250,satisfies:253,in:254,const:256,import:290,keyof:345,unique:349,infer:355,is:391,abstract:411,implements:413,type:415,let:418,var:420,using:423,interface:429,enum:433,namespace:439,module:441,declare:445,global:449,for:468,of:477,while:480,with:484,do:488,if:492,else:494,switch:498,case:504,try:510,catch:514,finally:518,return:522,throw:526,break:530,continue:534,debugger:538},spec_word={__proto__:null,async:123,get:125,set:127,declare:189,public:191,private:191,protected:191,static:193,abstract:195,override:197,readonly:203,accessor:205,new:395},spec_LessThan={__proto__:null,"<":187},parser=LRParser.deserialize({version:14,states:"$@QO%TQ^OOO%[Q^OOO'_Q`OOP(lOWOOO*zQ?NdO'#CiO+RO!bO'#CjO+aO#tO'#CjO+oO!0LbO'#D^O.QQ^O'#DdO.bQ^O'#DoO%[Q^O'#DwO0fQ^O'#EPOOQ?Mr'#EX'#EXO1PQWO'#EUOOQO'#Em'#EmOOQO'#Ih'#IhO1XQWO'#GpO1dQWO'#ElO1iQWO'#ElO3hQ?NdO'#JmO6[Q?NdO'#JnO6uQWO'#F[O6zQ&jO'#FsOOQ?Mr'#Fe'#FeO7VO,YO'#FeO7eQ7[O'#FzO9RQWO'#FyOOQ?Mr'#Jn'#JnOOQ?Mp'#Jm'#JmO9WQWO'#GtOOQU'#KZ'#KZO9cQWO'#IUO9hQ?MxO'#IVOOQU'#JZ'#JZOOQU'#IZ'#IZQ`Q^OOO`Q^OOO9pQMnO'#DsO9wQ^O'#D{O:OQ^O'#D}O9^QWO'#GpO:VQ7[O'#CoO:eQWO'#EkO:pQWO'#EvO:uQ7[O'#FdO;dQWO'#GpOOQO'#K['#K[O;iQWO'#K[O;wQWO'#GxO;wQWO'#GyO;wQWO'#G{O9^QWO'#HOO<nQWO'#HRO>VQWO'#CeO>gQWO'#H_O>oQWO'#HeO>oQWO'#HgO`Q^O'#HiO>oQWO'#HkO>oQWO'#HnO>tQWO'#HtO>yQ?MyO'#HzO%[Q^O'#H|O?UQ?MyO'#IOO?aQ?MyO'#IQO9hQ?MxO'#ISO?lQ?NdO'#CiO@nQ`O'#DiQOQWOOO%[Q^O'#D}OAUQWO'#EQO:VQ7[O'#EkOAaQWO'#EkOAlQpO'#FdOOQU'#Cg'#CgOOQ?Mp'#Dn'#DnOOQ?Mp'#Jq'#JqO%[Q^O'#JqOOQO'#Jt'#JtOOQO'#Id'#IdOBlQ`O'#EdOOQ?Mp'#Ec'#EcOOQ?Mp'#Jx'#JxOChQ?NQO'#EdOCrQ`O'#ETOOQO'#Js'#JsODWQ`O'#JtOEeQ`O'#ETOCrQ`O'#EdPErO#@ItO'#CbPOOO)CDx)CDxOOOO'#I['#I[OE}O!bO,59UOOQ?Mr,59U,59UOOOO'#I]'#I]OF]O#tO,59UO%[Q^O'#D`OOOO'#I_'#I_OFkO!0LbO,59xOOQ?Mr,59x,59xOFyQ^O'#I`OG^QWO'#JoOI]QrO'#JoO+}Q^O'#JoOIdQWO,5:OOIzQWO'#EmOJXQWO'#KOOJdQWO'#J}OJdQWO'#J}OJlQWO,5;ZOJqQWO'#J|OOQ?Mv,5:Z,5:ZOJxQ^O,5:ZOLvQ?NdO,5:cOMgQWO,5:kONQQ?MxO'#J{ONXQWO'#JzO9WQWO'#JzONmQWO'#JzONuQWO,5;YONzQWO'#JzO!#PQrO'#JnOOQ?Mr'#Ci'#CiO%[Q^O'#EPO!#oQrO,5:pOOQQ'#Ju'#JuOOQO-E<f-E<fO9^QWO,5=[O!$VQWO,5=[O!$[Q^O,5;WO!&_Q7[O'#EhO!'xQWO,5;WO!'}Q^O'#DvO!(XQ`O,5;aO!(aQ`O,5;aO%[Q^O,5;aOOQU'#FS'#FSOOQU'#FU'#FUO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bO%[Q^O,5;bOOQU'#FY'#FYO!(oQ^O,5;sOOQ?Mr,5;x,5;xOOQ?Mr,5;y,5;yOOQ?Mr,5;{,5;{O%[Q^O'#IlO!*rQ?MxO,5<gO%[Q^O,5;bO!&_Q7[O,5;bO!+aQ7[O,5;bO!-RQ7[O'#EZO%[Q^O,5;vOOQ?Mr,5;z,5;zO!-YQ&jO'#FiO!.VQ&jO'#KSO!-qQ&jO'#KSO!.^Q&jO'#KSOOQO'#KS'#KSO!.rQ&jO,5<ROOOS,5<_,5<_O!/TQ^O'#FuOOOS'#Ik'#IkO7VO,YO,5<PO!/[Q&jO'#FwOOQ?Mr,5<P,5<PO!/{Q!LQO'#CvOOQ?Mr'#Cz'#CzO!0`O!0LbO'#DOO!0|Q7[O,5<dO!1TQWO,5<fO!2pQ$ISO'#GVO!2}QWO'#GWO!3SQWO'#GWO!4rQ$ISO'#G[O!5nQ`O'#G`OOQO'#Gk'#GkO!+hQ7[O'#GjOOQO'#Gm'#GmO!+hQ7[O'#GlO!6aQ!LQO'#JgOOQ?Mr'#Jg'#JgO!6kQWO'#JfO!6yQWO'#JeO!7RQWO'#CuOOQ?Mr'#Cx'#CxO!7ZQWO'#CzOOQ?Mr'#DS'#DSOOQ?Mr'#DU'#DUO1SQWO'#DWO!+hQ7[O'#F}O!+hQ7[O'#GPO!7`QWO'#GRO!7eQWO'#GSO!3SQWO'#GYO!+hQ7[O'#G_O!7jQWO'#EnO!8XQWO,5<eOOQ?Mp'#Cr'#CrO!8aQWO'#EoO!9ZQ`O'#EpOOQ?Mp'#J|'#J|O!9bQ?MxO'#K]O9hQ?MxO,5=`O`Q^O,5>pOOQU'#Jc'#JcOOQU,5>q,5>qOOQU-E<X-E<XO!;aQ?NdO,5:_O!9UQ`O,5:]O!=zQ?NdO,5:gO%[Q^O,5:gO!@bQ?NdO,5:iOOQO,5@v,5@vO!ARQ7[O,5=[O!AaQ?MxO'#JdO9RQWO'#JdO!ArQ?MxO,59ZO!A}Q`O,59ZO!BVQ7[O,59ZO:VQ7[O,59ZO!BbQWO,5;WO!BjQWO'#H^O!COQWO'#K`O%[Q^O,5;|O!9UQ`O,5<OO!CWQWO,5=wO!C]QWO,5=wO!CbQWO,5=wO9hQ?MxO,5=wO;wQWO,5=gOOQO'#Cv'#CvO!CpQ`O,5=dO!CxQ7[O,5=eO!DTQWO,5=gO!DYQpO,5=jO!DbQWO'#K[O>tQWO'#HTO9^QWO'#HVO!DgQWO'#HVO:VQ7[O'#HXO!DlQWO'#HXOOQU,5=m,5=mO!DqQWO'#HYO!ESQWO'#CoO!EXQWO,59PO!EcQWO,59PO!GhQ^O,59POOQU,59P,59PO!GxQ?MxO,59PO%[Q^O,59PO!JTQ^O'#HaOOQU'#Hb'#HbOOQU'#Hc'#HcO`Q^O,5=yO!JkQWO,5=yO`Q^O,5>PO`Q^O,5>RO!JpQWO,5>TO`Q^O,5>VO!JuQWO,5>YO!JzQ^O,5>`OOQU,5>f,5>fO%[Q^O,5>fO9hQ?MxO,5>hOOQU,5>j,5>jO# UQWO,5>jOOQU,5>l,5>lO# UQWO,5>lOOQU,5>n,5>nO# rQ`O'#D[O%[Q^O'#JqO# |Q`O'#JqO#!kQ`O'#DjO#!|Q`O'#DjO#%_Q^O'#DjO#%fQWO'#JpO#%nQWO,5:TO#%sQWO'#EqO#&RQWO'#KPO#&ZQWO,5;[O#&`Q`O'#DjO#&mQ`O'#ESOOQ?Mr,5:l,5:lO%[Q^O,5:lO#&tQWO,5:lO>tQWO,5;VO!A}Q`O,5;VO!BVQ7[O,5;VO:VQ7[O,5;VO#&|QWO,5@]O#'RQ(CYO,5:pOOQO-E<b-E<bO#(XQ?NQO,5;OOCrQ`O,5:oO#(cQ`O,5:oOCrQ`O,5;OO!ArQ?MxO,5:oOOQ?Mp'#Eg'#EgOOQO,5;O,5;OO%[Q^O,5;OO#(pQ?MxO,5;OO#({Q?MxO,5;OO!A}Q`O,5:oOOQO,5;U,5;UO#)ZQ?MxO,5;OPOOO'#IY'#IYP#)oO#@ItO,58|POOO,58|,58|OOOO-E<Y-E<YOOQ?Mr1G.p1G.pOOOO-E<Z-E<ZO#)zQpO,59zOOOO-E<]-E<]OOQ?Mr1G/d1G/dO#*PQrO,5>zO+}Q^O,5>zOOQO,5?Q,5?QO#*ZQ^O'#I`OOQO-E<^-E<^O#*hQWO,5@ZO#*pQrO,5@ZO#*wQWO,5@iOOQ?Mr1G/j1G/jO%[Q^O,5@jO#+PQWO'#IfOOQO-E<d-E<dO#*wQWO,5@iOOQ?Mp1G0u1G0uOOQ?Mv1G/u1G/uOOQ?Mv1G0V1G0VO%[Q^O,5@gO#+eQ?MxO,5@gO#+vQ?MxO,5@gO#+}QWO,5@fO9WQWO,5@fO#,VQWO,5@fO#,eQWO'#IiO#+}QWO,5@fOOQ?Mp1G0t1G0tO!(XQ`O,5:rO!(dQ`O,5:rOOQQ,5:t,5:tO#-VQYO,5:tO#-_Q7[O1G2vO9^QWO1G2vOOQ?Mr1G0r1G0rO#-mQ?NdO1G0rO#.rQ?NbO,5;SOOQ?Mr'#GU'#GUO#/`Q?NdO'#JgO!$[Q^O1G0rO#1hQrO'#JrO%[Q^O'#JrO#1rQWO,5:bOOQ?Mr'#D['#D[OOQ?Mr1G0{1G0{O%[Q^O1G0{OOQ?Mr1G1e1G1eO#1wQWO1G0{O#4]Q?NdO1G0|O#4dQ?NdO1G0|O#6zQ?NdO1G0|O#7RQ?NdO1G0|O#9iQ?NdO1G0|O#<PQ?NdO1G0|O#<WQ?NdO1G0|O#<_Q?NdO1G0|O#>uQ?NdO1G0|O#>|Q?NdO1G0|O#AZQ07bO'#CiO#CUQ07bO1G1_O#C]Q07bO'#JnO#CpQ?NdO,5?WOOQ?Mp-E<j-E<jO#E}Q?NdO1G0|O#FzQ?NdO1G0|OOQ?Mr1G0|1G0|O#GzQ7[O'#JwO#HUQWO,5:uO#HZQ?NdO1G1bO#H}Q&jO,5<VO#IVQ&jO,5<WO#I_Q&jO'#FnO#IvQWO'#FmOOQO'#KT'#KTOOQO'#Ij'#IjO#I{Q&jO1G1mOOQ?Mr1G1m1G1mOOOS1G1x1G1xO#J^Q07bO'#JmO#JhQWO,5<aO!(oQ^O,5<aOOOS-E<i-E<iOOQ?Mr1G1k1G1kO#JmQ`O'#KSOOQ?Mr,5<c,5<cO#JuQ`O,5<cO!&_Q7[O'#DQOOOO'#I^'#I^O#JzO!0LbO,59jOOQ?Mr,59j,59jO%[Q^O1G2OO!7eQWO'#InO#KVQ7[O,5<xOOQ?Mr,5<u,5<uO!+hQ7[O'#IqO#KuQ7[O,5=UO!+hQ7[O'#IsO#LhQ7[O,5=WO!&_Q7[O,5=YOOQO1G2Q1G2QO#LrQpO'#CrO#MVQ$ISO'#EoO#NUQ`O'#G`O#NrQpO,5<qO#NyQWO'#KWO9WQWO'#KWO$ XQWO,5<sO!+hQ7[O,5<rO$ ^QWO'#GXO$ oQWO,5<rO$ tQpO'#GUO$!RQpO'#KXO$!]QWO'#KXO!&_Q7[O'#KXO$!bQWO,5<vO$!gQ`O'#GaO!5iQ`O'#GaO$!xQWO'#GcO$!}QWO'#GeO!3SQWO'#GhO$#SQ?MxO'#IpO$#_Q`O,5<zOOQ?Mv,5<z,5<zO$#fQ`O'#GaO$#tQ`O'#GbO$#|Q`O'#GbO$$RQ7[O,5=UO$$cQ7[O,5=WOOQ?Mr,5=Z,5=ZO!+hQ7[O,5@QO!+hQ7[O,5@QO$$sQWO'#IuO$%OQWO,5@PO$%WQWO,59aOOQ?Mr,59f,59fO$%zQ!LSO,59rOOQ?Mr'#Jk'#JkO$&mQ7[O,5<iO$'`Q7[O,5<kO@fQWO,5<mOOQ?Mr,5<n,5<nO$'jQWO,5<tO$'oQ7[O,5<yO$(PQWO'#JzO!$[Q^O1G2PO$(UQWO1G2PO9WQWO'#J}O9WQWO'#EqO%[Q^O'#EqO9WQWO'#IwO$(ZQ?MxO,5@wOOQU1G2z1G2zOOQU1G4[1G4[OOQ?Mr1G/y1G/yOOQ?Mr1G/w1G/wO$*]Q?NdO1G0ROOQU1G2v1G2vO!&_Q7[O1G2vO%[Q^O1G2vO#-bQWO1G2vO$,aQ7[O'#EhOOQ?Mp,5@O,5@OO$,kQ?MxO,5@OOOQU1G.u1G.uO!ArQ?MxO1G.uO!A}Q`O1G.uO!BVQ7[O1G.uO$,|QWO1G0rO$-RQWO'#CiO$-^QWO'#KaO$-fQWO,5=xO$-kQWO'#KaO$-pQWO'#KaO$.OQWO'#I}O$.^QWO,5@zO$.fQrO1G1hOOQ?Mr1G1j1G1jO9^QWO1G3cO@fQWO1G3cO$.mQWO1G3cO$.rQWO1G3cOOQU1G3c1G3cO!DTQWO1G3RO!&_Q7[O1G3OO$.wQWO1G3OOOQU1G3P1G3PO!&_Q7[O1G3PO$.|QWO1G3PO$/UQ`O'#G}OOQU1G3R1G3RO!5iQ`O'#IyO!DYQpO1G3UOOQU1G3U1G3UOOQU,5=o,5=oO$/^Q7[O,5=qO9^QWO,5=qO$!}QWO,5=sO9RQWO,5=sO!A}Q`O,5=sO!BVQ7[O,5=sO:VQ7[O,5=sO$/lQWO'#K_O$/wQWO,5=tOOQU1G.k1G.kO$/|Q?MxO1G.kO@fQWO1G.kO$0XQWO1G.kO9hQ?MxO1G.kO$2aQrO,5@|O$2nQWO,5@|O9WQWO,5@|O$2yQ^O,5={O$3QQWO,5={OOQU1G3e1G3eO`Q^O1G3eOOQU1G3k1G3kOOQU1G3m1G3mO>oQWO1G3oO$3VQ^O1G3qO$7ZQ^O'#HpOOQU1G3t1G3tO$7hQWO'#HvO>tQWO'#HxOOQU1G3z1G3zO$7pQ^O1G3zO9hQ?MxO1G4QOOQU1G4S1G4SOOQ?Mp'#G]'#G]O9hQ?MxO1G4UO9hQ?MxO1G4WO$;wQWO,5@]O!(oQ^O,5;]O9WQWO,5;]O>tQWO,5:UO!(oQ^O,5:UO!A}Q`O,5:UO$;|Q07bO,5:UOOQO,5;],5;]O$<WQ`O'#IaO$<nQWO,5@[OOQ?Mr1G/o1G/oO$<vQ`O'#IgO$=QQWO,5@kOOQ?Mp1G0v1G0vO#!|Q`O,5:UOOQO'#Ic'#IcO$=YQ`O,5:nOOQ?Mv,5:n,5:nO#&wQWO1G0WOOQ?Mr1G0W1G0WO%[Q^O1G0WOOQ?Mr1G0q1G0qO>tQWO1G0qO!A}Q`O1G0qO!BVQ7[O1G0qOOQ?Mp1G5w1G5wO!ArQ?MxO1G0ZOOQO1G0j1G0jO%[Q^O1G0jO$=aQ?MxO1G0jO$=lQ?MxO1G0jO!A}Q`O1G0ZOCrQ`O1G0ZO$=zQ?MxO1G0jOOQO1G0Z1G0ZO$>`Q?NdO1G0jPOOO-E<W-E<WPOOO1G.h1G.hOOOO1G/f1G/fO$>jQpO,5<gO$>rQrO1G4fOOQO1G4l1G4lO%[Q^O,5>zO$>|QWO1G5uO$?UQWO1G6TO$?^QrO1G6UO9WQWO,5?QO$?hQ?NdO1G6RO%[Q^O1G6RO$?xQ?MxO1G6RO$@ZQWO1G6QO$@ZQWO1G6QO9WQWO1G6QO$@cQWO,5?TO9WQWO,5?TOOQO,5?T,5?TO$@wQWO,5?TO$(PQWO,5?TOOQO-E<g-E<gOOQQ1G0^1G0^OOQQ1G0`1G0`O#-YQWO1G0`OOQU7+(b7+(bO!&_Q7[O7+(bO%[Q^O7+(bO$AVQWO7+(bO$AbQ7[O7+(bO$ApQ?NdO,5=UO$CxQ?NdO,5=WO$FQQ?NdO,5=UO$H`Q?NdO,5=WO$JnQ?NdO,59rO$LsQ?NdO,5<iO$N{Q?NdO,5<kO%#TQ?NdO,5<yOOQ?Mr7+&^7+&^O%%cQ?NdO7+&^O%&VQ^O'#IbO%&dQWO,5@^O%&lQrO,5@^OOQ?Mr1G/|1G/|O%&vQWO7+&gOOQ?Mr7+&g7+&gO%&{Q07bO,5:cO%[Q^O7+&yO%'VQ07bO,5:_O%'dQ07bO,5:gO%'nQ07bO,5:iO%'xQ7[O'#IeO%(SQWO,5@cOOQ?Mr1G0a1G0aOOQO1G1q1G1qOOQO1G1r1G1rO%([QtO,5<YO!(oQ^O,5<XOOQO-E<h-E<hOOQ?Mr7+'X7+'XOOOS7+'d7+'dOOOS1G1{1G1{O%(gQWO1G1{OOQ?Mr1G1}1G1}O%(lQpO,59lOOOO-E<[-E<[OOQ?Mr1G/U1G/UO%(sQ?NdO7+'jOOQ?Mr,5?Y,5?YO%)gQpO,5?YOOQ?Mr1G2d1G2dP!&_Q7[O'#InPOQ?Mr-E<l-E<lO%*VQ7[O,5?]OOQ?Mr-E<o-E<oO%*xQ7[O,5?_OOQ?Mr-E<q-E<qO%+SQpO1G2tO%+ZQpO'#CrO%+qQ7[O'#J}O%+xQ^O'#EqOOQ?Mr1G2]1G2]O%,SQWO'#ImO%,hQWO,5@rO%,hQWO,5@rO%,pQWO,5@rO%,{QWO,5@rOOQO1G2_1G2_O%-ZQ7[O1G2^O!+hQ7[O1G2^O%-kQ$ISO'#IoO%-xQWO,5@sO!&_Q7[O,5@sO%.QQpO,5@sOOQ?Mr1G2b1G2bOOQ?Mp,5<{,5<{OOQ?Mp,5<|,5<|O$(PQWO,5<|OCcQWO,5<|O!A}Q`O,5<{OOQO'#Gd'#GdO%.[QWO,5<}OOQ?Mp,5=P,5=PO$(PQWO,5=SOOQO,5?[,5?[OOQO-E<n-E<nOOQ?Mv1G2f1G2fO!5iQ`O,5<{O%.dQWO,5<|O$!xQWO,5<}O%.oQ`O,5<|O!+hQ7[O'#IqO%/`Q7[O1G2pO!+hQ7[O'#IsO%0RQ7[O1G2rO%0]Q7[O1G5lO%0gQ7[O1G5lOOQO,5?a,5?aOOQO-E<s-E<sOOQO1G.{1G.{O!9UQ`O,59tO%[Q^O,59tOOQ?Mr,5<h,5<hO%0tQWO1G2XO!+hQ7[O1G2`O%0yQ?NdO7+'kOOQ?Mr7+'k7+'kO!$[Q^O7+'kO%1mQWO,5;]OOQ?Mp,5?c,5?cOOQ?Mp-E<u-E<uO%1rQpO'#KYO#&wQWO7+(bO4UQrO7+(bO$AYQWO7+(bO%1|Q?NbO'#CiO%2aQ?NbO,5=QO%3RQWO,5=QOOQ?Mp1G5j1G5jOOQU7+$a7+$aO!ArQ?MxO7+$aO!A}Q`O7+$aO!$[Q^O7+&^O%3WQWO'#I|O%3oQWO,5@{OOQO1G3d1G3dO9^QWO,5@{O%3oQWO,5@{O%3wQWO,5@{OOQO,5?i,5?iOOQO-E<{-E<{OOQ?Mr7+'S7+'SO%3|QWO7+(}O9hQ?MxO7+(}O9^QWO7+(}O@fQWO7+(}OOQU7+(m7+(mO%4RQ?NbO7+(jO!&_Q7[O7+(jO%4]QpO7+(kOOQU7+(k7+(kO!&_Q7[O7+(kO%4dQWO'#K^O%4oQWO,5=iOOQO,5?e,5?eOOQO-E<w-E<wOOQU7+(p7+(pO%6RQ`O'#HWOOQU1G3]1G3]O!&_Q7[O1G3]O%[Q^O1G3]O%6YQWO1G3]O%6eQ7[O1G3]O9hQ?MxO1G3_O$!}QWO1G3_O9RQWO1G3_O!A}Q`O1G3_O!BVQ7[O1G3_O%6sQWO'#I{O%7XQWO,5@yO%7aQ`O,5@yOOQ?Mp1G3`1G3`OOQU7+$V7+$VO@fQWO7+$VO9hQ?MxO7+$VO%7lQWO7+$VO%[Q^O1G6hO%[Q^O1G6iO%7qQ?MxO1G6hO%7{Q^O1G3gO%8SQWO1G3gO%8XQ^O1G3gOOQU7+)P7+)PO9hQ?MxO7+)ZO`Q^O7+)]OOQU'#Kd'#KdOOQU'#JO'#JOO%8`Q^O,5>[OOQU,5>[,5>[O%[Q^O'#HqO%8mQWO'#HsOOQU,5>b,5>bO9WQWO,5>bOOQU,5>d,5>dOOQU7+)f7+)fOOQU7+)l7+)lOOQU7+)p7+)pOOQU7+)r7+)rO%8rQ`O1G5wO%9WQ07bO1G0wO%9bQWO1G0wOOQO1G/p1G/pO%9mQ07bO1G/pO>tQWO1G/pO!(oQ^O'#DjOOQO,5>{,5>{OOQO-E<_-E<_OOQO,5?R,5?ROOQO-E<e-E<eO!A}Q`O1G/pOOQO-E<a-E<aOOQ?Mv1G0Y1G0YOOQ?Mr7+%r7+%rO#&wQWO7+%rOOQ?Mr7+&]7+&]O>tQWO7+&]O!A}Q`O7+&]OOQO7+%u7+%uO$>`Q?NdO7+&UOOQO7+&U7+&UO%[Q^O7+&UO%9wQ?MxO7+&UO!ArQ?MxO7+%uO!A}Q`O7+%uO%:SQ?MxO7+&UO%:bQ?NdO7++mO%[Q^O7++mO%:rQWO7++lO%:rQWO7++lOOQO1G4o1G4oO9WQWO1G4oO%:zQWO1G4oOOQQ7+%z7+%zO#&wQWO<<K|O4UQrO<<K|O%;YQWO<<K|OOQU<<K|<<K|O!&_Q7[O<<K|O%[Q^O<<K|O%;bQWO<<K|O%;mQ?NdO,5?]O%=uQ?NdO,5?_O%?}Q?NdO1G2^O%B]Q?NdO1G2pO%DeQ?NdO1G2rO%FmQrO,5>|O%[Q^O,5>|OOQO-E<`-E<`O%FwQWO1G5xOOQ?Mr<<JR<<JRO%GPQ07bO1G0rO%IWQ07bO1G0|O%I_Q07bO1G0|O%K`Q07bO1G0|O%KgQ07bO1G0|O%MhQ07bO1G0|O& iQ07bO1G0|O& pQ07bO1G0|O& wQ07bO1G0|O&#xQ07bO1G0|O&$PQ07bO1G0|O&$WQ?NdO<<JeO&&OQ07bO1G0|O&&{Q07bO1G0|O&'{Q07bO'#JgO&*OQ07bO1G1bO&*]Q07bO1G0RO&*gQ7[O,5?POOQO-E<c-E<cO!(oQ^O'#FpOOQO'#KU'#KUOOQO1G1t1G1tO&*qQWO1G1sO&*vQ07bO,5?WOOOS7+'g7+'gOOOO1G/W1G/WOOQ?Mr1G4t1G4tO!+hQ7[O7+(`O&-WQrO'#CiO&-bQWO,5?XO9WQWO,5?XOOQO-E<k-E<kO&-pQWO1G6^O&-pQWO1G6^O&-xQWO1G6^O&.TQ7[O7+'xO&.eQpO,5?ZO&.oQWO,5?ZO!&_Q7[O,5?ZOOQO-E<m-E<mO&.tQpO1G6_O&/OQWO1G6_OOQ?Mp1G2h1G2hO$(PQWO1G2hOOQ?Mp1G2g1G2gO&/WQWO1G2iO!&_Q7[O1G2iOOQ?Mp1G2n1G2nO!A}Q`O1G2gOCcQWO1G2hO&/]QWO1G2iO&/eQWO1G2hO$!xQWO1G2iO&0XQ7[O,5?]OOQ?Mr-E<p-E<pO&0zQ7[O,5?_OOQ?Mr-E<r-E<rO!+hQ7[O7++WOOQ?Mr1G/`1G/`O&1UQWO1G/`OOQ?Mr7+'s7+'sO&1ZQ7[O7+'zO&1kQ?NdO<<KVOOQ?Mr<<KV<<KVO&2_QWO1G0wO!&_Q7[O'#IvO&2dQWO,5@tO&4fQrO<<K|O!&_Q7[O1G2lOOQU<<G{<<G{O!ArQ?MxO<<G{O&4mQ?NdO<<IxOOQ?Mr<<Ix<<IxOOQO,5?h,5?hO&5aQWO,5?hO&5fQWO,5?hOOQO-E<z-E<zO&5tQWO1G6gO&5tQWO1G6gO9^QWO1G6gO@fQWO<<LiOOQU<<Li<<LiO&5|QWO<<LiO9hQ?MxO<<LiOOQU<<LU<<LUO%4RQ?NbO<<LUOOQU<<LV<<LVO%4]QpO<<LVO&6RQ`O'#IxO&6^QWO,5@xO!(oQ^O,5@xOOQU1G3T1G3TO%+xQ^O'#JqOOQO'#Iz'#IzO9hQ?MxO'#IzO&6fQ`O,5=rOOQU,5=r,5=rO&6mQ`O'#EdO&7RQ`O'#GcO&7WQWO7+(wO&7]QWO7+(wOOQU7+(w7+(wO!&_Q7[O7+(wO%[Q^O7+(wO&7eQWO7+(wOOQU7+(y7+(yO9hQ?MxO7+(yO$!}QWO7+(yO9RQWO7+(yO!A}Q`O7+(yO&7pQWO,5?gOOQO-E<y-E<yOOQO'#HZ'#HZO&7{QWO1G6eO9hQ?MxO<<GqOOQU<<Gq<<GqO@fQWO<<GqO&8TQWO7+,SO&8YQWO7+,TO%[Q^O7+,SO%[Q^O7+,TOOQU7+)R7+)RO&8_QWO7+)RO&8dQ^O7+)RO&8kQWO7+)ROOQU<<Lu<<LuOOQU<<Lw<<LwOOQU-E<|-E<|OOQU1G3v1G3vO&8pQWO,5>]OOQU,5>_,5>_O&8uQWO1G3|O9WQWO7+&cO!(oQ^O7+&cOOQO7+%[7+%[O&8zQ07bO1G6UO>tQWO7+%[OOQ?Mr<<I^<<I^OOQ?Mr<<Iw<<IwO>tQWO<<IwOOQO<<Ip<<IpO$>`Q?NdO<<IpO%[Q^O<<IpOOQO<<Ia<<IaO!ArQ?MxO<<IaO&9UQ?MxO<<IpO&9aQ?NdO<= XO&9qQWO<= WOOQO7+*Z7+*ZO9WQWO7+*ZOOQUANAhANAhO&9yQrOANAhO!&_Q7[OANAhO#&wQWOANAhO4UQrOANAhO&:QQWOANAhO%[Q^OANAhO&:YQ?NdO7+'xO&<hQ?NdO,5?]O&>pQ?NdO,5?_O&@xQ?NdO7+'zO&CWQrO1G4hO&CbQ07bO7+&^O&EcQ07bO,5=UO&GgQ07bO,5=WO&GwQ07bO,5=UO&HXQ07bO,5=WO&HiQ07bO,59rO&JlQ07bO,5<iO&LlQ07bO,5<kO&N}Q07bO,5<yO'!pQ07bO7+'jO'!}Q07bO7+'kO'#[QWO,5<[OOQO7+'_7+'_O'#aQ7[O<<KzOOQO1G4s1G4sO'#hQWO1G4sO'#sQWO1G4sO'$RQWO7++xO'$RQWO7++xO!&_Q7[O1G4uO'$ZQpO1G4uO'$eQWO7++yOOQ?Mp7+(S7+(SO'$mQWO7+(TO'$xQpO7+(TOOQ?Mp7+(R7+(RO$(PQWO7+(SO'%PQWO7+(TO!&_Q7[O7+(TOCcQWO7+(SO'%UQWO7+(TO'%^Q7[O<<NrOOQ?Mr7+$z7+$zO'%hQpO,5?bOOQO-E<t-E<tO'%rQ?NbO7+(WOOQUAN=gAN=gO9^QWO1G5SOOQO1G5S1G5SO'&SQWO1G5SO'&XQWO7+,RO'&XQWO7+,RO9hQ?MxOANBTO@fQWOANBTOOQUANBTANBTOOQUANApANApOOQUANAqANAqO'&aQWO,5?dOOQO-E<v-E<vO'&lQ07bO1G6dOOQO,5?f,5?fOOQO-E<x-E<xOOQU1G3^1G3^O%+xQ^O,5<}O'&vQWO,5<}OOQU<<Lc<<LcO!&_Q7[O<<LcO&7WQWO<<LcO'&{QWO<<LcO%[Q^O<<LcOOQU<<Le<<LeO9hQ?MxO<<LeO$!}QWO<<LeO9RQWO<<LeO''TQ`O1G5RO''`QWO7+,POOQUAN=]AN=]O9hQ?MxOAN=]OOQU<= n<= nOOQU<= o<= oO''hQWO<= nO''mQWO<= oOOQU<<Lm<<LmO''rQWO<<LmO''wQ^O<<LmOOQU1G3w1G3wO>tQWO7+)hO'(OQWO<<I}O'(ZQ07bO<<I}OOQO<<Hv<<HvOOQ?MrAN?cAN?cOOQOAN?[AN?[O$>`Q?NdOAN?[OOQOAN>{AN>{O%[Q^OAN?[OOQO<<Mu<<MuOOQUG27SG27SO!&_Q7[OG27SO#&wQWOG27SO'(eQrOG27SO4UQrOG27SO'(lQWOG27SO'(tQ07bO<<JeO')RQ07bO1G2^O'*tQ07bO,5?]O',tQ07bO,5?_O'.tQ07bO1G2pO'0tQ07bO1G2rO'2tQ07bO<<KVO'3RQ07bO<<IxOOQO1G1v1G1vO!+hQ7[OANAfOOQO7+*_7+*_O'3`QWO7+*_O'3kQWO<= dO'3sQpO7+*aOOQ?Mp<<Ko<<KoO$(PQWO<<KoOCcQWO<<KoO'3}QWO<<KoOOQ?Mp<<Kn<<KnO'4YQpO<<KoO$(PQWO<<KnO'4aQWO<<KoO!&_Q7[O<<KoOOQO7+*n7+*nO9^QWO7+*nO'4fQWO<= mOOQUG27oG27oO9hQ?MxOG27oO!(oQ^O1G5OO'4nQWO7+,OO&7WQWOANA}OOQUANA}ANA}O!&_Q7[OANA}O'4vQWOANA}OOQUANBPANBPO9hQ?MxOANBPO$!}QWOANBPOOQO'#H['#H[OOQO7+*m7+*mOOQUG22wG22wOOQUANEYANEYOOQUANEZANEZOOQUANBXANBXO'5OQWOANBXOOQU<<MS<<MSO!(oQ^OAN?iOOQOG24vG24vO$>`Q?NdOG24vO#&wQWOLD,nOOQULD,nLD,nO!&_Q7[OLD,nO'5TQrOLD,nO'5[Q07bO7+'xO'6}Q07bO,5?]O'8}Q07bO,5?_O':}Q07bO7+'zO'<pQ7[OG27QOOQO<<My<<MyOOQ?MpANAZANAZO$(PQWOANAZOCcQWOANAZO'=QQWOANAZOOQ?MpANAYANAYO'=]QpOANAZOOQO<<NY<<NYOOQULD-ZLD-ZO'=dQ07bO7+*jOOQUG27iG27iO&7WQWOG27iO!&_Q7[OG27iOOQUG27kG27kO9hQ?MxOG27kOOQUG27sG27sO'=nQ07bOG25TOOQOLD*bLD*bOOQU!$(!Y!$(!YO#&wQWO!$(!YO!&_Q7[O!$(!YO'=xQ?NdOG27QOOQ?MpG26uG26uO$(PQWOG26uOCcQWOG26uO'@WQWOG26uOOQULD-TLD-TO&7WQWOLD-TOOQULD-VLD-VOOQU!)9Et!)9EtO#&wQWO!)9EtOOQ?MpLD,aLD,aO$(PQWOLD,aOCcQWOLD,aOOQU!$(!o!$(!oOOQU!.K;`!.K;`O'@cQ07bOG27QOOQ?Mp!$( {!$( {O$(PQWO!$( {OOQ?Mp!)9Eg!)9EgO!(oQ^O'#DwO1PQWO'#EUO'BUQrO'#JmO'B]QMnO'#DsO'BdQ^O'#D{O'BkQrO'#CiO'ERQrO'#CiO!(oQ^O'#D}O'EcQ^O,5;WO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O,5;bO!(oQ^O'#IlO'GfQWO,5<gO!(oQ^O,5;bO'GnQ7[O,5;bO'IXQ7[O,5;bO!(oQ^O,5;vO!&_Q7[O'#GjO'GnQ7[O'#GjO!&_Q7[O'#GlO'GnQ7[O'#GlO1SQWO'#DWO1SQWO'#DWO!&_Q7[O'#F}O'GnQ7[O'#F}O!&_Q7[O'#GPO'GnQ7[O'#GPO!&_Q7[O'#G_O'GnQ7[O'#G_O!(oQ^O,5:gO'I`Q`O'#D[O!(oQ^O,5@jO'EcQ^O1G0rO'IjQ07bO'#CiO!(oQ^O1G2OO!&_Q7[O'#IqO'GnQ7[O'#IqO!&_Q7[O'#IsO'GnQ7[O'#IsO'ItQpO'#CrO!&_Q7[O,5<rO'GnQ7[O,5<rO'EcQ^O1G2PO!(oQ^O7+&yO!&_Q7[O1G2^O'GnQ7[O1G2^O!&_Q7[O'#IqO'GnQ7[O'#IqO!&_Q7[O'#IsO'GnQ7[O'#IsO!&_Q7[O1G2`O'GnQ7[O1G2`O'EcQ^O7+'kO'EcQ^O7+&^O!&_Q7[OANAfO'GnQ7[OANAfO'JXQWO'#ElO'J^QWO'#ElO'JfQWO'#F[O'JkQWO'#EvO'JpQWO'#KOO'J{QWO'#J|O'KWQWO,5;WO'K]Q7[O,5<dO'KdQWO'#GWO'KiQWO'#GWO'KnQWO,5<eO'KvQWO,5;WO'LOQ07bO1G1_O'LVQWO,5<rO'L[QWO,5<rO'LaQWO,5<tO'LfQWO,5<tO'LkQWO1G2PO'LpQWO1G0rO'LuQ7[O<<KzO'L|Q7[O<<KzO7eQ7[O'#FzO9RQWO'#FyOAaQWO'#EkO!(oQ^O,5;sO!3SQWO'#GWO!3SQWO'#GWO!3SQWO'#GYO!3SQWO'#GYO!+hQ7[O7+(`O!+hQ7[O7+(`O%+SQpO1G2tO%+SQpO1G2tO!&_Q7[O,5=YO!&_Q7[O,5=Y",stateData:"'NQ~O'wOS'xOSTOS'yRQ~OPYOQYOSfOY!VOaqOdzOeyOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![XO!fuO!iZO!lYO!mYO!nYO!pvO!rwO!uxO!y]O#t!PO$V|O%e}O%g!QO%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO%v!UO&S!WO&Y!XO&[!YO&^!ZO&`![O&c!]O&i!^O&o!_O&q!`O&s!aO&u!bO&w!cO(OSO(QTO(TUO([VO(j[O(yiO~OWtO~P`OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oa!wOp!nO!P!oO!_!yO!`!vO!a!vO!y;QO#Q!pO#R!pO#S!xO#T!pO#U!pO#X!zO#Y!zO(P!lO(QTO(TUO(`!mO(j!sO~O'y!{O~OP]XR]X[]Xa]Xo]X}]X!P]X!Y]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X'u]X([]X(m]X(t]X(u]X~O!d%PX~P(qO_!}O(Q#PO(R!}O(S#PO~O_#QO(S#PO(T#PO(U#QO~Ou#SO!R#TO(]#TO(^#VO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O;UO(QTO(TUO([VO(j[O(yiO~O!X#ZO!Y#WO!V(cP!V(qP~P+}O!Z#cO~P`OPYOQYOSfOd!jOe!iOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(QTO(TUO([VO(j[O(yiO~Om#mO!X#iO!y]O#f#lO#g#iO(O;VO!h(nP~P.iO!i#oO(O#nO~O!u#sO!y]O%e#tO~O#h#uO~O!d#vO#h#uO~OP$[OR#zO[$cOo$aO}#yO!P#{O!Y$_O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO([VO(m$YO(t#|O(u#}O~Oa(aX'u(aX's(aX!h(aX!V(aX![(aX%f(aX!d(aX~P1qO#P$dO#]$eO$P$eOP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#s(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX![(bX%f(bX~Oa(bX'u(bX's(bX!V(bX!h(bXs(bX!d(bX~P4UO#]$eO~O$[$hO$^$gO$e$mO~OSfO![$nO$h$oO$j$qO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{%[O!P${O![$|O!f%aO!i$xO#g%bO$V%_O$r%]O$t%^O$w%`O(O$sO(QTO(TUO([$uO(t$}O(u%POg(XP~O!i%cO~O!P%fO![%gO(O%eO~O!d%kO~Oa%lO'u%lO~O}%pO~P%[O(P!lO~P%[O%k%tO~P%[Oh%VO!i%cO(O%eO(P!lO~Oe%{O!i%cO(O%eO~O#s$RO~O}&QO![%}O!i&PO%g&TO(O%eO(P!lO(QTO(TUO`)SP~O!u#sO~O%p&VO!P)OX![)OX(O)OX~O(O&WO~O!r&]O#t!PO%g!QO%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO~Od&bOe&aO!u&_O%e&`O%x&^O~P;|Od&eOeyO![&dO!r&]O!uxO!y]O#t!PO%e}O%i!OO%j!OO%k!OO%n!RO%p!SO%s!TO%t!TO%v!UO~Ob&hO#]&kO%g&fO(P!lO~P=RO!i&lO!r&pO~O!i#oO~O![XO~Oa%lO't&xO'u%lO~Oa%lO't&{O'u%lO~Oa%lO't&}O'u%lO~O's]X!V]Xs]X!h]X&W]X![]X%f]X!d]X~P(qO!_'[O!`'TO!a'TO(P!lO(QTO(TUO~Op'RO!P'QO!X'UO(`'PO!Z(dP!Z(sP~P@YOk'_O![']O(O%eO~Oe'dO!i%cO(O%eO~O}&QO!i&PO~Op!nO!P!oO!y;QO#Q!pO#R!pO#T!pO#U!pO(P!lO(QTO(TUO(`!mO(j!sO~O!_'jO!`'iO!a'iO#S!pO#X'kO#Y'kO~PAtOa%lOh%VO!d#vO!i%cO'u%lO(m'mO~O!m'qO#]'oO~PCSOp!nO!P!oO(QTO(TUO(`!mO(j!sO~O![XOp(hX!P(hX!_(hX!`(hX!a(hX!y(hX#Q(hX#R(hX#S(hX#T(hX#U(hX#X(hX#Y(hX(P(hX(Q(hX(T(hX(`(hX(j(hX~O!`'iO!a'iO(P!lO~PCrO'z'uO'{'uO'|'wO~O_!}O(Q'yO(R!}O(S'yO~O_#QO(S'yO(T'yO(U#QO~Ou#SO!R#TO(]#TO(^'}O~O!X(PO!V'SX!V'YX!Y'SX!Y'YX~P+}O!Y(RO!V(cX~OP$[OR#zO[$cOo$aO}#yO!P#{O!Y(RO!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO([VO(m$YO(t#|O(u#}O~O!V(cX~PGfO!V(WO~O!V(pX!Y(pX!d(pX!h(pX(m(pX~O#](pX#h#aX!Z(pX~PIiO#](XO!V(rX!Y(rX~O!Y(YO!V(qX~O!V(]O~O#]$eO~PIiO!Z(^O~P`OR#zO}#yO!P#{O!i#xO([VOP!ka[!kao!ka!Y!ka!m!ka#O!ka#k!ka#l!ka#m!ka#n!ka#o!ka#p!ka#q!ka#r!ka#s!ka#u!ka#w!ka#y!ka#z!ka(m!ka(t!ka(u!ka~Oa!ka'u!ka's!ka!V!ka!h!kas!ka![!ka%f!ka!d!ka~PKPO!h(_O~O!d#vO#](`O(m'mO!Y(oXa(oX'u(oX~O!h(oX~PMlO!P%fO![%gO!y]O#f(eO#g(dO(O%eO~O!Y(fO!h(nX~O!h(hO~O!P%fO![%gO#g(dO(O%eO~OP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#s(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX~O!d#vO!h(bX~P! YOR(jO}(iO!i#xO#P$dO!y!xa!P!xa~O!u!xa%e!xa![!xa#f!xa#g!xa(O!xa~P!#ZO!u(nO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![XO!fuO!iZO!lYO!mYO!nYO!pvO!r!gO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{;nO!P${O![$|O!f=OO!i$xO#g;tO$V%_O$r;pO$t;rO$w%`O(O(rO(QTO(TUO([$uO(t$}O(u%PO~O#h(tO~O!X(vO!h(fP~P%[O(`(xO(j[O~O!P(zO!i#xO(`(xO(j[O~OP;POQ;POSfOd<zOe!iOmkOo;POpkOqkOwkOy;PO{;PO!PWO!TkO!UkO![!eO!f;SO!iZO!l;PO!m;PO!n;PO!p;TO!r;WO!u!hO$V!kO(O)XO(QTO(TUO([VO(j[O(y<xO~O!Y$_Oa$oa'u$oa's$oa!h$oa!V$oa![$oa%f$oa!d$oa~O#t)`O~P!&_Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{%[O!P${O![$|O!f%aO!i$xO#g%bO$V%_O$r%]O$t%^O$w%`O(O(rO(QTO(TUO([$uO(t$}O(u%PO~Og(kP~P!+hO})eO!d)dO![$]X$Y$]X$[$]X$^$]X$e$]X~O!d)dO![(vX$Y(vX$[(vX$^(vX$e(vX~O})eO~P!-qO})eO![(vX$Y(vX$[(vX$^(vX$e(vX~O![)gO$Y)kO$[)fO$^)fO$e)lO~O!X)oO~P!(oO$[$hO$^$gO$e)sO~Ok$xX}$xX!P$xX#P$xX(t$xX(u$xX~OgjXg$xXkjX!YjX#]jX~P!/gOu)uO(])vO(^)xO~Ok*RO})zO!P){O(t$}O(u%PO~Og)yO~P!0kOg*SO~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{;nO!P*UO![*VO!f=OO!i$xO#g;tO$V%_O$r;pO$t;rO$w%`O(QTO(TUO([$uO(t$}O(u%PO~O!X*YO(O*TO!h(zP~P!1YO#h*[O~O!i*]O~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{;nO!P${O![$|O!f=OO!i$xO#g;tO$V%_O$r;pO$t;rO$w%`O(O*_O(QTO(TUO([$uO(t$}O(u%PO~O!X*bO!V({P~P!3XOo*nO!P*fO!_*lO!`*eO!a*eO!i*]O#X*mO%]*hO(P!lO(`!mO~O!Z*kO~P!4|O#P$dOk(ZX}(ZX!P(ZX(t(ZX(u(ZX!Y(ZX#](ZX~Og(ZX#}(ZX~P!5uOk*sO#]*rOg(YX!Y(YX~O!Y*tOg(XX~O(O&WOg(XP~Op*wO~O!i*|O~O(O(rO~Om+QO!P%fO!X#iO![%gO!y]O#f#lO#g#iO(O%eO!h(nP~O!d#vO#h+RO~O!P%fO!X+TO!Y(YO![%gO(O%eO!V(qP~Op'XO!P+VO!X+UO(QTO(TUO(`(xO~O!Z(sP~P!8uO!Y+WOa)PX'u)PX~OP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO#y$WO#z$XO([VO(m$YO(t#|O(u#}O~Oa!ga!Y!ga'u!ga's!ga!V!ga!h!gas!ga![!ga%f!ga!d!ga~P!9mOR#zO}#yO!P#{O!i#xO([VOP!oa[!oao!oa!Y!oa!m!oa#O!oa#k!oa#l!oa#m!oa#n!oa#o!oa#p!oa#q!oa#r!oa#s!oa#u!oa#w!oa#y!oa#z!oa(m!oa(t!oa(u!oa~Oa!oa'u!oa's!oa!V!oa!h!oas!oa![!oa%f!oa!d!oa~P!<TOR#zO}#yO!P#{O!i#xO([VOP!qa[!qao!qa!Y!qa!m!qa#O!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#q!qa#r!qa#s!qa#u!qa#w!qa#y!qa#z!qa(m!qa(t!qa(u!qa~Oa!qa'u!qa's!qa!V!qa!h!qas!qa![!qa%f!qa!d!qa~P!>kOh%VOk+aO![']O%f+`O~O!d+cOa(WX![(WX'u(WX!Y(WX~Oa%lO![XO'u%lO~Oh%VO!i%cO~Oh%VO!i%cO(O%eO~O!d#vO#h(tO~Ob+nO%g+oO(O+kO(QTO(TUO!Z)TP~O!Y+pO`)SX~O[+tO~O`+uO~O![%}O(O%eO(P!lO`)SP~Oh%VO#]+zO~Oh%VOk+}O![$|O~O![,PO~O},RO![XO~O%k%tO~O!u,WO~Oe,]O~Ob,^O(O#nO(QTO(TUO!Z)RP~Oe%{O~O%g!QO(O&WO~P=RO[,cO`,bO~OPYOQYOSfOdzOeyOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO!fuO!iZO!lYO!mYO!nYO!pvO!uxO!y]O%e}O(QTO(TUO([VO(j[O(yiO~O![!eO!r!gO$V!kO(O!dO~P!EkO`,bOa%lO'u%lO~OPYOQYOSfOd!jOe!iOmkOoYOpkOqkOwkOyYO{YO!PWO!TkO!UkO![!eO!fuO!iZO!lYO!mYO!nYO!pvO!u!hO$V!kO(O!dO(QTO(TUO([VO(j[O(yiO~Oa,hO!rwO#t!OO%i!OO%j!OO%k!OO~P!HTO!i&lO~O&Y,nO~O![,pO~O&k,rO&m,sOP&haQ&haS&haY&haa&had&hae&ham&hao&hap&haq&haw&hay&ha{&ha!P&ha!T&ha!U&ha![&ha!f&ha!i&ha!l&ha!m&ha!n&ha!p&ha!r&ha!u&ha!y&ha#t&ha$V&ha%e&ha%g&ha%i&ha%j&ha%k&ha%n&ha%p&ha%s&ha%t&ha%v&ha&S&ha&Y&ha&[&ha&^&ha&`&ha&c&ha&i&ha&o&ha&q&ha&s&ha&u&ha&w&ha's&ha(O&ha(Q&ha(T&ha([&ha(j&ha(y&ha!Z&ha&a&hab&ha&f&ha~O(O,xO~Oh!bX!Y!OX!Z!OX!d!OX!d!bX!i!bX#]!OX~O!Y!bX!Z!bX~P# ZO!d,}O#],|Oh(eX!Y#eX!Y(eX!Z#eX!Z(eX!d(eX!i(eX~Oh%VO!d-PO!i%cO!Y!^X!Z!^X~Op!nO!P!oO(QTO(TUO(`!mO~OP;POQ;POSfOd<zOe!iOmkOo;POpkOqkOwkOy;PO{;PO!PWO!TkO!UkO![!eO!f;SO!iZO!l;PO!m;PO!n;PO!p;TO!r;WO!u!hO$V!kO(QTO(TUO([VO(j[O(y<xO~O(O;zO~P##_O!Y-TO!Z(dX~O!Z-VO~O!d,}O#],|O!Y#eX!Z#eX~O!Y-WO!Z(sX~O!Z-YO~O!`-ZO!a-ZO(P!lO~P#!|O!Z-^O~P'_Ok-aO![']O~O!V-fO~Op!xa!_!xa!`!xa!a!xa#Q!xa#R!xa#S!xa#T!xa#U!xa#X!xa#Y!xa(P!xa(Q!xa(T!xa(`!xa(j!xa~P!#ZO!m-kO#]-iO~PCSO!`-mO!a-mO(P!lO~PCrOa%lO#]-iO'u%lO~Oa%lO!d#vO#]-iO'u%lO~Oa%lO!d#vO!m-kO#]-iO'u%lO(m'mO~O'z'uO'{'uO'|-rO~Os-sO~O!V'Sa!Y'Sa~P!9mO!X-wO!V'SX!Y'SX~P%[O!Y(RO!V(ca~O!V(ca~PGfO!Y(YO!V(qa~O!P%fO!X-{O![%gO(O%eO!V'YX!Y'YX~O#]-}O!Y(oa!h(oaa(oa'u(oa~O!d#vO~P#+eO!Y(fO!h(na~O!P%fO![%gO#g.RO(O%eO~Om.WO!P%fO!X.TO![%gO!y]O#f.VO#g.TO(O%eO!Y']X!h']X~OR.[O!i#xO~Oh%VOk._O![']O%f.^O~Oa#`i!Y#`i'u#`i's#`i!V#`i!h#`is#`i![#`i%f#`i!d#`i~P!9mOk=UO})zO!P){O(t$}O(u%PO~O#h#[aa#[a#]#[a'u#[a!Y#[a!h#[a![#[a!V#[a~P#.aO#h(ZXP(ZXR(ZX[(ZXa(ZXo(ZX!i(ZX!m(ZX#O(ZX#k(ZX#l(ZX#m(ZX#n(ZX#o(ZX#p(ZX#q(ZX#r(ZX#s(ZX#u(ZX#w(ZX#y(ZX#z(ZX'u(ZX([(ZX(m(ZX!h(ZX!V(ZX's(ZXs(ZX![(ZX%f(ZX!d(ZX~P!5uO!Y.lO!h(fX~P!9mO!h.oO~O!V.qO~OP$[OR#zO}#yO!P#{O!i#xO!m$[O([VO[#jia#jio#ji!Y#ji#O#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#k#ji~P#1|O#k$OO~P#1|OP$[OR#zOo$aO}#yO!P#{O!i#xO!m$[O#k$OO#l$PO#m$PO#n$PO([VO[#jia#ji!Y#ji#O#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#o#ji~P#4kO#o$QO~P#4kOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO([VOa#ji!Y#ji#w#ji#y#ji#z#ji'u#ji(m#ji(t#ji(u#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#u#ji~P#7YOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO([VO(u#}Oa#ji!Y#ji#y#ji#z#ji'u#ji(m#ji(t#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#w$UO~P#9pO#w#ji~P#9pO#u$SO~P#7YOP$[OR#zO[$cOo$aO}#yO!P#{O!i#xO!m$[O#O$RO#k$OO#l$PO#m$PO#n$PO#o$QO#p$RO#q$RO#r$bO#s$RO#u$SO#w$UO([VO(t#|O(u#}Oa#ji!Y#ji#z#ji'u#ji(m#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~O#y#ji~P#<fO#y$WO~P#<fOP]XR]X[]Xo]X}]X!P]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X!Y]X!Z]X~O#}]X~P#?TOP$[OR#zO[;hOo;fO}#yO!P#{O!i#xO!m$[O#O;]O#k;YO#l;ZO#m;ZO#n;ZO#o;[O#p;]O#q;]O#r;gO#s;]O#u;^O#w;`O#y;bO#z;cO([VO(m$YO(t#|O(u#}O~O#}.sO~P#AbO#P$dO#];iO$P;iO#}(bX!Z(bX~P! YOa'`a!Y'`a'u'`a's'`a!h'`a!V'`as'`a!['`a%f'`a!d'`a~P!9mO[#jia#jio#ji!Y#ji#O#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'u#ji(m#ji's#ji!V#ji!h#jis#ji![#ji%f#ji!d#ji~OP$[OR#zO}#yO!P#{O!i#xO!m$[O#k$OO#l$PO#m$PO#n$PO([VO(t#ji(u#ji~P#DdOk=UO})zO!P){O(t$}O(u%POP#jiR#ji!i#ji!m#ji#k#ji#l#ji#m#ji#n#ji([#ji~P#DdO!Y.wOg(kX~P!0kOg.yO~Oa$Oi!Y$Oi'u$Oi's$Oi!V$Oi!h$Ois$Oi![$Oi%f$Oi!d$Oi~P!9mO$[.zO$^.zO~O$[.{O$^.{O~O!d)dO#].|O![$bX$Y$bX$[$bX$^$bX$e$bX~O!X.}O~O![)gO$Y/PO$[)fO$^)fO$e/QO~O!Y;dO!Z(aX~P#AbO!Z/RO~O!d)dO$e(vX~O$e/TO~Ou)uO(])vO(^/WO~O!V/[O~P!&_O(t$}Ok%^a}%^a!P%^a(u%^a!Y%^a#]%^a~Og%^a#}%^a~P#K^O(u%POk%`a}%`a!P%`a(t%`a!Y%`a#]%`a~Og%`a#}%`a~P#LPO!YfX!dfX!hfX!h$xX(mfX~P!/gO!X/eO!Y(YO(O/dO!V(qP!V({P~P!1YOo*nO!_*lO!`*eO!a*eO!i*]O#X*mO%]*hO(P!lO~Op'XO!P/fO!X+UO!Z*kO(QTO(TUO(`;wO!Z(sP~P#MjO!h/gO~P#.aO!Y/hO!d#vO(m'mO!h(zX~O!h/mO~O!P%fO!X*YO![%gO(O%eO!h(zP~O#h/oO~O!V$xX!Y$xX!d%PX~P!/gO!Y/pO!V({X~P#.aO!d/rO~O!V/tO~Oh%VOo/xO!d#vO!i%cO(m'mO~O(O/zO~O!d+cO~Oa%lO!Y0OO'u%lO~O!Z0QO~P!4|O!`0RO!a0RO(P!lO(`!mO~O!P0TO(`!mO~O#X0UO~Og%^a!Y%^a#]%^a#}%^a~P!0kOg%`a!Y%`a#]%`a#}%`a~P!0kO(O&WOg'iX!Y'iX~O!Y*tOg(Xa~Og0_O~OR0`O}0`O!P0aO#P$dOkza(tza(uza!Yza#]za~Ogza#}za~P$%]O})zO!P){Ok$qa(t$qa(u$qa!Y$qa#]$qa~Og$qa#}$qa~P$&UO})zO!P){Ok$sa(t$sa(u$sa!Y$sa#]$sa~Og$sa#}$sa~P$&wO#h0dO~Og%Ra!Y%Ra#]%Ra#}%Ra~P!0kO!d#vO~O#h0gO~O!Y+WOa)Pa'u)Pa~OR#zO}#yO!P#{O!i#xO([VOP!oi[!oio!oi!Y!oi!m!oi#O!oi#k!oi#l!oi#m!oi#n!oi#o!oi#p!oi#q!oi#r!oi#s!oi#u!oi#w!oi#y!oi#z!oi(m!oi(t!oi(u!oi~Oa!oi'u!oi's!oi!V!oi!h!ois!oi![!oi%f!oi!d!oi~P$(fOh%VOo%XOp$tOq$tOw%YOy%ZO{;nO!P${O![$|O!f=OO!i$xO#g;tO$V%_O$r;pO$t;rO$w%`O(QTO(TUO([$uO(t$}O(u%PO~Om0pO(O0oO~P$*|O!d+cOa(Wa![(Wa'u(Wa!Y(Wa~O#h0vO~O[]X!YfX!ZfX~O!Y0wO!Z)TX~O!Z0yO~O[0zO~Ob0|O(O+kO(QTO(TUO~O![%}O(O%eO`'qX!Y'qX~O!Y+pO`)Sa~O!h1PO~P!9mO[1SO~O`1TO~O#]1WO~Ok1ZO![$|O~O(`(xO!Z)QP~Oh%VOk1dO![1aO%f1cO~O[1nO!Y1lO!Z)RX~O!Z1oO~O`1qOa%lO'u%lO~O(O#nO(QTO(TUO~O#P$dO#]$eO$P$eOP(bXR(bX[(bXo(bX}(bX!P(bX!Y(bX!i(bX!m(bX#O(bX#k(bX#l(bX#m(bX#n(bX#o(bX#p(bX#q(bX#r(bX#u(bX#w(bX#y(bX#z(bX([(bX(m(bX(t(bX(u(bX~O#s1tO&W1uOa(bX~P$0dO#]$eO#s1tO&W1uO~Oa1wO~P%[Oa1yO~O&a1|OP&_iQ&_iS&_iY&_ia&_id&_ie&_im&_io&_ip&_iq&_iw&_iy&_i{&_i!P&_i!T&_i!U&_i![&_i!f&_i!i&_i!l&_i!m&_i!n&_i!p&_i!r&_i!u&_i!y&_i#t&_i$V&_i%e&_i%g&_i%i&_i%j&_i%k&_i%n&_i%p&_i%s&_i%t&_i%v&_i&S&_i&Y&_i&[&_i&^&_i&`&_i&c&_i&i&_i&o&_i&q&_i&s&_i&u&_i&w&_i's&_i(O&_i(Q&_i(T&_i([&_i(j&_i(y&_i!Z&_ib&_i&f&_i~Ob2SO!Z2QO&f2RO~P`O![XO!i2UO~O&m,sOP&hiQ&hiS&hiY&hia&hid&hie&him&hio&hip&hiq&hiw&hiy&hi{&hi!P&hi!T&hi!U&hi![&hi!f&hi!i&hi!l&hi!m&hi!n&hi!p&hi!r&hi!u&hi!y&hi#t&hi$V&hi%e&hi%g&hi%i&hi%j&hi%k&hi%n&hi%p&hi%s&hi%t&hi%v&hi&S&hi&Y&hi&[&hi&^&hi&`&hi&c&hi&i&hi&o&hi&q&hi&s&hi&u&hi&w&hi's&hi(O&hi(Q&hi(T&hi([&hi(j&hi(y&hi!Z&hi&a&hib&hi&f&hi~O!V2[O~O!Y!^a!Z!^a~P#AbOp!nO!P!oO!X2bO(`!mO!Y'TX!Z'TX~P@YO!Y-TO!Z(da~O!Y'ZX!Z'ZX~P!8uO!Y-WO!Z(sa~O!Z2iO~P'_Oa%lO#]2rO'u%lO~Oa%lO!d#vO#]2rO'u%lO~Oa%lO!d#vO!m2vO#]2rO'u%lO(m'mO~Oa%lO'u%lO~P!9mO!Y$_Os$oa~O!V'Si!Y'Si~P!9mO!Y(RO!V(ci~O!Y(YO!V(qi~O!V(ri!Y(ri~P!9mO!Y(oi!h(oia(oi'u(oi~P!9mO#]2xO!Y(oi!h(oia(oi'u(oi~O!Y(fO!h(ni~O!P%fO![%gO!y]O#f2}O#g2|O(O%eO~O!P%fO![%gO#g2|O(O%eO~Ok3UO![']O%f3TO~Oh%VOk3UO![']O%f3TO~O#h%^aP%^aR%^a[%^aa%^ao%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a'u%^a([%^a(m%^a!h%^a!V%^a's%^as%^a![%^a%f%^a!d%^a~P#K^O#h%`aP%`aR%`a[%`aa%`ao%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a'u%`a([%`a(m%`a!h%`a!V%`a's%`as%`a![%`a%f%`a!d%`a~P#LPO#h%^aP%^aR%^a[%^aa%^ao%^a!Y%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a'u%^a([%^a(m%^a!h%^a!V%^a's%^a#]%^as%^a![%^a%f%^a!d%^a~P#.aO#h%`aP%`aR%`a[%`aa%`ao%`a!Y%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a'u%`a([%`a(m%`a!h%`a!V%`a's%`a#]%`as%`a![%`a%f%`a!d%`a~P#.aO#hzaPza[zaazaoza!iza!mza#Oza#kza#lza#mza#nza#oza#pza#qza#rza#sza#uza#wza#yza#zza'uza([za(mza!hza!Vza'szasza![za%fza!dza~P$%]O#h$qaP$qaR$qa[$qaa$qao$qa!i$qa!m$qa#O$qa#k$qa#l$qa#m$qa#n$qa#o$qa#p$qa#q$qa#r$qa#s$qa#u$qa#w$qa#y$qa#z$qa'u$qa([$qa(m$qa!h$qa!V$qa's$qas$qa![$qa%f$qa!d$qa~P$&UO#h$saP$saR$sa[$saa$sao$sa!i$sa!m$sa#O$sa#k$sa#l$sa#m$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#u$sa#w$sa#y$sa#z$sa'u$sa([$sa(m$sa!h$sa!V$sa's$sas$sa![$sa%f$sa!d$sa~P$&wO#h%RaP%RaR%Ra[%Raa%Rao%Ra!Y%Ra!i%Ra!m%Ra#O%Ra#k%Ra#l%Ra#m%Ra#n%Ra#o%Ra#p%Ra#q%Ra#r%Ra#s%Ra#u%Ra#w%Ra#y%Ra#z%Ra'u%Ra([%Ra(m%Ra!h%Ra!V%Ra's%Ra#]%Ras%Ra![%Ra%f%Ra!d%Ra~P#.aOa#`q!Y#`q'u#`q's#`q!V#`q!h#`qs#`q![#`q%f#`q!d#`q~P!9mO!X3^O!Y'UX!h'UX~P%[O!Y.lO!h(fa~O!Y.lO!h(fa~P!9mO!V3aO~O#}!ka!Z!ka~PKPO#}!ga!Y!ga!Z!ga~P#AbO#}!oa!Z!oa~P!<TO#}!qa!Z!qa~P!>kOg'XX!Y'XX~P!+hO!Y.wOg(ka~OSfO![3uO$c3vO~O!Z3zO~Os3{O~P#.aOa$lq!Y$lq'u$lq's$lq!V$lq!h$lqs$lq![$lq%f$lq!d$lq~P!9mO!V3|O~P#.aO})zO!P){O(u%POk'ea(t'ea!Y'ea#]'ea~Og'ea#}'ea~P%)nO})zO!P){Ok'ga(t'ga(u'ga!Y'ga#]'ga~Og'ga#}'ga~P%*aO(m$YO~P#.aO!VfX!V$xX!YfX!Y$xX!d%PX#]fX~P!/gO(O<QO~P!1YOmkO(O4OO~P.iO!P%fO!X4QO![%gO(O%eO!Y'aX!h'aX~O!Y/hO!h(za~O!Y/hO!d#vO!h(za~O!Y/hO!d#vO(m'mO!h(za~Og$zi!Y$zi#]$zi#}$zi~P!0kO!X4YO!V'cX!Y'cX~P!3XO!Y/pO!V({a~O!Y/pO!V({a~P#.aO!d#vO#s4bO~Oo4eO!d#vO(m'mO~O!P4hO(`!mO~O(t$}Ok%^i}%^i!P%^i(u%^i!Y%^i#]%^i~Og%^i#}%^i~P%.wO(u%POk%`i}%`i!P%`i(t%`i!Y%`i#]%`i~Og%`i#}%`i~P%/jOg(Yi!Y(Yi~P!0kO#]4mOg(Yi!Y(Yi~P!0kO!h4pO~Oa$mq!Y$mq'u$mq's$mq!V$mq!h$mqs$mq![$mq%f$mq!d$mq~P!9mO!V4tO~O!Y4uO![(|X~P#.aOa$xX![$xX%Z]X'u$xX!Y$xX~P!/gO%Z4xOalXklX}lX!PlX![lX'ulX(tlX(ulX!YlX~O%Z4xO~Ob5OO%g5PO(O+kO(QTO(TUO!Y'pX!Z'pX~O!Y0wO!Z)Ta~O[5TO~O`5UO~Oa%lO'u%lO~P#.aO![$|O~P#.aO!Y5^O#]5`O!Z)QX~O!Z5aO~Oo5hOp!nO!P5bO!_!yO!`!vO!a!vO!y;QO#Q!pO#R!pO#S!pO#T!pO#U!pO#X5gO#Y!zO(P!lO(QTO(TUO(`!mO(j!sO~O!Z5fO~P%4tOk5mO![1aO%f5lO~Oh%VOk5mO![1aO%f5lO~Ob5tO(O#nO(QTO(TUO!Y'oX!Z'oX~O!Y1lO!Z)Ra~O(QTO(TUO(`5vO~O`5zO~O#s5}O&W6OO~PMlO!h6PO~P%[Oa6RO~Oa6RO~P%[Ob2SO!Z6WO&f2RO~P`O!d6YO~O!d6[Oh(ei!Y(ei!Z(ei!d(ei!i(ei~O!Y#ei!Z#ei~P#AbO#]6]O!Y#ei!Z#ei~O!Y!^i!Z!^i~P#AbOa%lO#]6fO'u%lO~Oa%lO!d#vO#]6fO'u%lO~O!Y(oq!h(oqa(oq'u(oq~P!9mO!Y(fO!h(nq~O!P%fO![%gO#g6mO(O%eO~O![']O%f6pO~Ok6tO![']O%f6pO~O#h'eaP'eaR'ea['eaa'eao'ea!i'ea!m'ea#O'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#s'ea#u'ea#w'ea#y'ea#z'ea'u'ea(['ea(m'ea!h'ea!V'ea's'eas'ea!['ea%f'ea!d'ea~P%)nO#h'gaP'gaR'ga['gaa'gao'ga!i'ga!m'ga#O'ga#k'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#u'ga#w'ga#y'ga#z'ga'u'ga(['ga(m'ga!h'ga!V'ga's'gas'ga!['ga%f'ga!d'ga~P%*aO#h$ziP$ziR$zi[$zia$zio$zi!Y$zi!i$zi!m$zi#O$zi#k$zi#l$zi#m$zi#n$zi#o$zi#p$zi#q$zi#r$zi#s$zi#u$zi#w$zi#y$zi#z$zi'u$zi([$zi(m$zi!h$zi!V$zi's$zi#]$zis$zi![$zi%f$zi!d$zi~P#.aO#h%^iP%^iR%^i[%^ia%^io%^i!i%^i!m%^i#O%^i#k%^i#l%^i#m%^i#n%^i#o%^i#p%^i#q%^i#r%^i#s%^i#u%^i#w%^i#y%^i#z%^i'u%^i([%^i(m%^i!h%^i!V%^i's%^is%^i![%^i%f%^i!d%^i~P%.wO#h%`iP%`iR%`i[%`ia%`io%`i!i%`i!m%`i#O%`i#k%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#u%`i#w%`i#y%`i#z%`i'u%`i([%`i(m%`i!h%`i!V%`i's%`is%`i![%`i%f%`i!d%`i~P%/jO!Y'Ua!h'Ua~P!9mO!Y.lO!h(fi~O#}#`i!Y#`i!Z#`i~P#AbOP$[OR#zO}#yO!P#{O!i#xO!m$[O([VO[#jio#ji#O#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~O#k#ji~P%G^O#k;YO~P%G^OP$[OR#zOo;fO}#yO!P#{O!i#xO!m$[O#k;YO#l;ZO#m;ZO#n;ZO([VO[#ji#O#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~O#o#ji~P%IfO#o;[O~P%IfOP$[OR#zO[;hOo;fO}#yO!P#{O!i#xO!m$[O#O;]O#k;YO#l;ZO#m;ZO#n;ZO#o;[O#p;]O#q;]O#r;gO#s;]O([VO#w#ji#y#ji#z#ji#}#ji(m#ji(t#ji(u#ji!Y#ji!Z#ji~O#u#ji~P%KnOP$[OR#zO[;hOo;fO}#yO!P#{O!i#xO!m$[O#O;]O#k;YO#l;ZO#m;ZO#n;ZO#o;[O#p;]O#q;]O#r;gO#s;]O#u;^O([VO(u#}O#y#ji#z#ji#}#ji(m#ji(t#ji!Y#ji!Z#ji~O#w;`O~P%MoO#w#ji~P%MoO#u;^O~P%KnOP$[OR#zO[;hOo;fO}#yO!P#{O!i#xO!m$[O#O;]O#k;YO#l;ZO#m;ZO#n;ZO#o;[O#p;]O#q;]O#r;gO#s;]O#u;^O#w;`O([VO(t#|O(u#}O#z#ji#}#ji(m#ji!Y#ji!Z#ji~O#y#ji~P&!OO#y;bO~P&!OOa#{y!Y#{y'u#{y's#{y!V#{y!h#{ys#{y![#{y%f#{y!d#{y~P!9mO[#jio#ji#O#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(m#ji!Y#ji!Z#ji~OP$[OR#zO}#yO!P#{O!i#xO!m$[O#k;YO#l;ZO#m;ZO#n;ZO([VO(t#ji(u#ji~P&$zOk=VO})zO!P){O(t$}O(u%POP#jiR#ji!i#ji!m#ji#k#ji#l#ji#m#ji#n#ji([#ji~P&$zO#P$dOP(ZXR(ZX[(ZXk(ZXo(ZX}(ZX!P(ZX!i(ZX!m(ZX#O(ZX#k(ZX#l(ZX#m(ZX#n(ZX#o(ZX#p(ZX#q(ZX#r(ZX#s(ZX#u(ZX#w(ZX#y(ZX#z(ZX#}(ZX([(ZX(m(ZX(t(ZX(u(ZX!Y(ZX!Z(ZX~O#}$Oi!Y$Oi!Z$Oi~P#AbO#}!oi!Z!oi~P$(fOg'Xa!Y'Xa~P!0kO!Z7WO~O!Y'`a!Z'`a~P#AbOP]XR]X[]Xo]X}]X!P]X!V]X!Y]X!i]X!m]X#O]X#P]X#]]X#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X~O!d%WX#s%WX~P&+QO!d#vO(m'mO!Y'aa!h'aa~O!Y/hO!h(zi~O!Y/hO!d#vO!h(zi~Og$zq!Y$zq#]$zq#}$zq~P!0kO!V'ca!Y'ca~P#.aO!d7_O~O!Y/pO!V({i~P#.aO!Y/pO!V({i~O!V7cO~O!d#vO#s7hO~Oo7iO!d#vO(m'mO~O})zO!P){O(u%POk'fa(t'fa!Y'fa#]'fa~Og'fa#}'fa~P&/pO})zO!P){Ok'ha(t'ha(u'ha!Y'ha#]'ha~Og'ha#}'ha~P&0cO!V7lO~Og$|q!Y$|q#]$|q#}$|q~P!0kOa$my!Y$my'u$my's$my!V$my!h$mys$my![$my%f$my!d$my~P!9mO!d6[O~O!Y4uO![(|a~O![']OP$SaR$Sa[$Sao$Sa}$Sa!P$Sa!Y$Sa!i$Sa!m$Sa#O$Sa#k$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#u$Sa#w$Sa#y$Sa#z$Sa([$Sa(m$Sa(t$Sa(u$Sa~O%f6pO~P&2lOa#`y!Y#`y'u#`y's#`y!V#`y!h#`ys#`y![#`y%f#`y!d#`y~P!9mO[7qO~Ob7sO(O+kO(QTO(TUO~O!Y0wO!Z)Ti~O`7wO~O(`(xO!Y'lX!Z'lX~O!Y5^O!Z)Qa~O!Z8QO~P%4tOp!nO!P8RO(QTO(TUO(`!mO(j!sO~O#X8SO~O![1aO~O![1aO%f8UO~Ok8XO![1aO%f8UO~O[8^O!Y'oa!Z'oa~O!Y1lO!Z)Ri~O!h8bO~O!h8cO~O!h8fO~O!h8fO~P%[Oa8hO~O!d8iO~O!h8jO~O!Y(ri!Z(ri~P#AbOa%lO#]8rO'u%lO~O!Y(oy!h(oya(oy'u(oy~P!9mO!Y(fO!h(ny~O%f8uO~P&2lO![']O%f8uO~O#h$zqP$zqR$zq[$zqa$zqo$zq!Y$zq!i$zq!m$zq#O$zq#k$zq#l$zq#m$zq#n$zq#o$zq#p$zq#q$zq#r$zq#s$zq#u$zq#w$zq#y$zq#z$zq'u$zq([$zq(m$zq!h$zq!V$zq's$zq#]$zqs$zq![$zq%f$zq!d$zq~P#.aO#h'faP'faR'fa['faa'fao'fa!i'fa!m'fa#O'fa#k'fa#l'fa#m'fa#n'fa#o'fa#p'fa#q'fa#r'fa#s'fa#u'fa#w'fa#y'fa#z'fa'u'fa(['fa(m'fa!h'fa!V'fa's'fas'fa!['fa%f'fa!d'fa~P&/pO#h'haP'haR'ha['haa'hao'ha!i'ha!m'ha#O'ha#k'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#u'ha#w'ha#y'ha#z'ha'u'ha(['ha(m'ha!h'ha!V'ha's'has'ha!['ha%f'ha!d'ha~P&0cO#h$|qP$|qR$|q[$|qa$|qo$|q!Y$|q!i$|q!m$|q#O$|q#k$|q#l$|q#m$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#u$|q#w$|q#y$|q#z$|q'u$|q([$|q(m$|q!h$|q!V$|q's$|q#]$|qs$|q![$|q%f$|q!d$|q~P#.aO!Y'Ui!h'Ui~P!9mO#}#`q!Y#`q!Z#`q~P#AbO(t$}OP%^aR%^a[%^ao%^a!i%^a!m%^a#O%^a#k%^a#l%^a#m%^a#n%^a#o%^a#p%^a#q%^a#r%^a#s%^a#u%^a#w%^a#y%^a#z%^a#}%^a([%^a(m%^a!Y%^a!Z%^a~Ok%^a}%^a!P%^a(u%^a~P&CoO(u%POP%`aR%`a[%`ao%`a!i%`a!m%`a#O%`a#k%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#u%`a#w%`a#y%`a#z%`a#}%`a([%`a(m%`a!Y%`a!Z%`a~Ok%`a}%`a!P%`a(t%`a~P&EsOk=VO})zO!P){O(u%PO~P&CoOk=VO})zO!P){O(t$}O~P&EsOR0`O}0`O!P0aO#P$dOPza[zakzaoza!iza!mza#Oza#kza#lza#mza#nza#oza#pza#qza#rza#sza#uza#wza#yza#zza#}za([za(mza(tza(uza!Yza!Zza~O})zO!P){OP$qaR$qa[$qak$qao$qa!i$qa!m$qa#O$qa#k$qa#l$qa#m$qa#n$qa#o$qa#p$qa#q$qa#r$qa#s$qa#u$qa#w$qa#y$qa#z$qa#}$qa([$qa(m$qa(t$qa(u$qa!Y$qa!Z$qa~O})zO!P){OP$saR$sa[$sak$sao$sa!i$sa!m$sa#O$sa#k$sa#l$sa#m$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#u$sa#w$sa#y$sa#z$sa#}$sa([$sa(m$sa(t$sa(u$sa!Y$sa!Z$sa~Ok=VO})zO!P){O(t$}O(u%PO~OP%RaR%Ra[%Rao%Ra!i%Ra!m%Ra#O%Ra#k%Ra#l%Ra#m%Ra#n%Ra#o%Ra#p%Ra#q%Ra#r%Ra#s%Ra#u%Ra#w%Ra#y%Ra#z%Ra#}%Ra([%Ra(m%Ra!Y%Ra!Z%Ra~P&NlO#}$lq!Y$lq!Z$lq~P#AbO#}$mq!Y$mq!Z$mq~P#AbO!Z9SO~O#}9TO~P!0kO!d#vO!Y'ai!h'ai~O!d#vO(m'mO!Y'ai!h'ai~O!Y/hO!h(zq~O!V'ci!Y'ci~P#.aO!Y/pO!V({q~Oo9[O!d#vO(m'mO~O!V9]O~P#.aO!V9]O~O!d#vO#s9bO~Og(Yy!Y(Yy~P!0kO!Y'ja!['ja~P#.aOa%Yq![%Yq'u%Yq!Y%Yq~P#.aO[9dO~O!Y0wO!Z)Tq~O#]9hO!Y'la!Z'la~O!Y5^O!Z)Qi~P#AbO!P4hO~O![1aO%f9lO~O(QTO(TUO(`9qO~O!Y1lO!Z)Rq~O!h9tO~O!h9uO~O!h9vO~O!h9vO~P%[O#]9yO!Y#ey!Z#ey~O!Y#ey!Z#ey~P#AbO%f:OO~P&2lO![']O%f:OO~O#}#{y!Y#{y!Z#{y~P#AbOP$ziR$zi[$zio$zi!i$zi!m$zi#O$zi#k$zi#l$zi#m$zi#n$zi#o$zi#p$zi#q$zi#r$zi#s$zi#u$zi#w$zi#y$zi#z$zi#}$zi([$zi(m$zi!Y$zi!Z$zi~P&NlO})zO!P){O(u%POP'eaR'ea['eak'eao'ea!i'ea!m'ea#O'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#s'ea#u'ea#w'ea#y'ea#z'ea#}'ea(['ea(m'ea(t'ea!Y'ea!Z'ea~O})zO!P){OP'gaR'ga['gak'gao'ga!i'ga!m'ga#O'ga#k'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#u'ga#w'ga#y'ga#z'ga#}'ga(['ga(m'ga(t'ga(u'ga!Y'ga!Z'ga~O(t$}OP%^iR%^i[%^ik%^io%^i}%^i!P%^i!i%^i!m%^i#O%^i#k%^i#l%^i#m%^i#n%^i#o%^i#p%^i#q%^i#r%^i#s%^i#u%^i#w%^i#y%^i#z%^i#}%^i([%^i(m%^i(u%^i!Y%^i!Z%^i~O(u%POP%`iR%`i[%`ik%`io%`i}%`i!P%`i!i%`i!m%`i#O%`i#k%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#u%`i#w%`i#y%`i#z%`i#}%`i([%`i(m%`i(t%`i!Y%`i!Z%`i~O#}$my!Y$my!Z$my~P#AbO#}#`y!Y#`y!Z#`y~P#AbO!d#vO!Y'aq!h'aq~O!Y/hO!h(zy~O!V'cq!Y'cq~P#.aOo:YO!d#vO(m'mO~O!V:ZO~P#.aO!V:ZO~O!Y0wO!Z)Ty~O!Y5^O!Z)Qq~O![1aO%f:cO~O!h:fO~O%f:kO~P&2lOP$zqR$zq[$zqo$zq!i$zq!m$zq#O$zq#k$zq#l$zq#m$zq#n$zq#o$zq#p$zq#q$zq#r$zq#s$zq#u$zq#w$zq#y$zq#z$zq#}$zq([$zq(m$zq!Y$zq!Z$zq~P&NlO})zO!P){O(u%POP'faR'fa['fak'fao'fa!i'fa!m'fa#O'fa#k'fa#l'fa#m'fa#n'fa#o'fa#p'fa#q'fa#r'fa#s'fa#u'fa#w'fa#y'fa#z'fa#}'fa(['fa(m'fa(t'fa!Y'fa!Z'fa~O})zO!P){OP'haR'ha['hak'hao'ha!i'ha!m'ha#O'ha#k'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#u'ha#w'ha#y'ha#z'ha#}'ha(['ha(m'ha(t'ha(u'ha!Y'ha!Z'ha~OP$|qR$|q[$|qo$|q!i$|q!m$|q#O$|q#k$|q#l$|q#m$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#u$|q#w$|q#y$|q#z$|q#}$|q([$|q(m$|q!Y$|q!Z$|q~P&NlOg%b!Z!Y%b!Z#]%b!Z#}%b!Z~P!0kOo:oO!d#vO(m'mO~O!V:pO~P#.aO!Y'lq!Z'lq~P#AbO!Y#e!Z!Z#e!Z~P#AbO#h%b!ZP%b!ZR%b!Z[%b!Za%b!Zo%b!Z!Y%b!Z!i%b!Z!m%b!Z#O%b!Z#k%b!Z#l%b!Z#m%b!Z#n%b!Z#o%b!Z#p%b!Z#q%b!Z#r%b!Z#s%b!Z#u%b!Z#w%b!Z#y%b!Z#z%b!Z'u%b!Z([%b!Z(m%b!Z!h%b!Z!V%b!Z's%b!Z#]%b!Zs%b!Z![%b!Z%f%b!Z!d%b!Z~P#.aOo:xO!d#vO(m'mO~OP%b!ZR%b!Z[%b!Zo%b!Z!i%b!Z!m%b!Z#O%b!Z#k%b!Z#l%b!Z#m%b!Z#n%b!Z#o%b!Z#p%b!Z#q%b!Z#r%b!Z#s%b!Z#u%b!Z#w%b!Z#y%b!Z#z%b!Z#}%b!Z([%b!Z(m%b!Z!Y%b!Z!Z%b!Z~P&NlOs(aX~P1qO}%pO~P!(oO(P!lO~P!(oO!VfX!YfX#]fX~P&+QOP]XR]X[]Xo]X}]X!P]X!Y]X!YfX!i]X!m]X#O]X#P]X#]]X#]fX#hfX#k]X#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#u]X#w]X#y]X#z]X$P]X([]X(m]X(t]X(u]X~O!dfX!h]X!hfX(mfX~P'BxOP;POQ;POSfOd<zOe!iOmkOo;POpkOqkOwkOy;PO{;PO!PWO!TkO!UkO![XO!f;SO!iZO!l;PO!m;PO!n;PO!p;TO!r;WO!u!hO$V!kO(O)XO(QTO(TUO([VO(j[O(y<xO~O!Y;dO!Z$oa~Oh%VOm%WOo%XOp$tOq$tOw%YOy%ZO{;oO!P${O![$|O!f=PO!i$xO#g;uO$V%_O$r;qO$t;sO$w%`O(O(rO(QTO(TUO([$uO(t$}O(u%PO~O#t)`O~P'GnOo!bX(m!bX~P# ZO!Z]X!ZfX~P'BxO!VfX!V$xX!YfX!Y$xX#]fX~P!/gO#h;XO~O!d#vO#h;XO~O#];iO~O#s;]O~O#];xO!Y(rX!Z(rX~O#];iO!Y(pX!Z(pX~O#h;yO~Og;{O~P!0kO#h<RO~O#h<SO~O!d#vO#h<TO~O!d#vO#h;yO~O#}<UO~P#AbO#h<VO~O#h<WO~O#h<]O~O#h<^O~O#h<_O~O#h<`O~O#}<aO~P!0kO#}<bO~P!0kO#P#Q#R#T#U#X#f#g#r(y$r$t$w%Z%e%f%g%n%p%s%t%v%x~'yT#l!U'w(P#mp#k#no}'x$['x(O$^(`~",goto:"$4Q)XPPPPPP)YPP)]P)nP+O/PPPPP5xPP6`PP<V?mP@QP@QPPP@QPBRP@QP@QP@QPBVPB[PByPGrPPPGvPPPPGvJxPPPKOKzPGvPGvPPNYGvPPPGvPGvP!!aGvP!%v!&{!'UP!'x!'|!'x!+YPPPPPPP!+y!&{PP!,Z!-gP!0jGvGv!0o!3z!8b!8b!<`PPP!<hGvPPPPPPPPPPP!?vP!ATPPGv!BfPGvPGvGvGvGvGvPGv!CxP!GRP!JWP!J[!Jf!Jj!JjP!GOP!Jn!JnP!MsP!MwGvGv!M}##RBV@QP@QP@Q@QP#$_@Q@Q#&j@Q#)Z@Q#+`@Q@Q#,O#.]#.]#.b#.k#.]#.wP#.]P@Q#/a@Q#3S@Q@Q5xPPP#6{PPP#7f#7fP#7fP#7|#7fPP#8SP#7yP#7y#8g#7y#9R#9X5u)]#9[)]P#9c#9c#9cP)]P)]P)]P)]PP)]P#9i#9lP#9l)]P#9pP#9sP)]P)]P)]P)]P)]P)])]PP#9y#:P#:[#:b#:h#:n#:t#;S#;Y#;d#;j#;t#;z#<[#<b#=S#=f#=l#=r#>Q#>g#@V#@e#@l#BR#Ba#C|#D[#Db#Dh#Dn#Dx#EO#EU#E`#Er#ExPPPPPPPPPP#FOPPPPPPP#Fs#Iz#KZ#Kb#KjPPP$!sP$!|$%t$,^$,a$,d$-P$-S$-Z$-cP$-i$-lP$.Y$.^$/U$0d$0i$1PPP$1U$1[$1`P$1c$1g$1k$2a$2x$3a$3e$3h$3k$3q$3t$3x$3|R!|RoqOXst!Z#d%k&o&q&r&t,k,p1|2PY!vQ']-]1a5eQ%rvQ%zyQ&R|Q&g!VS'T!e-TQ'c!iS'i!r!yU*e$|*V*jQ+i%{Q+v&TQ,[&aQ-Z'[Q-e'dQ-m'jQ0R*lQ1k,]R;v;T%QdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V,h,k,p-a-i-w-}.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3^5b5m5}6O6R6f8R8X8h8rS#q];Q!r)Z$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{U*y%[;n;oQ+n%}Q,^&dQ,e&lQ0m+aQ0q+cQ0|+oQ1s,cQ3Q._Q5O0wQ5t1lQ6r3UQ7s5PR8x6t'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{t!nQ!r!v!y!z'T'[']'i'j'k-T-Z-]-m1a5e5g$|$ti#v$b$c$d$x${%O%Q%]%^%b)u){)}*P*R*U*[*b*r*s+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4m4u4x5l6p7_7h8U8u9T9b9l:O:c:k;g;h;j;k;l;m;p;q;r;s;t;u;|;}<O<P<R<S<V<W<X<Y<Z<[<]<^<a<b<x=Q=R=U=VQ&U|Q'R!eU'X%g*V-WQ+n%}Q,^&dQ0c*|Q0|+oQ1R+uQ1r,bQ1s,cQ5O0wQ5X1TQ5t1lQ5w1nQ5x1qQ7s5PQ7v5UQ8a5zQ9g7wR9r8^rnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PR,`&h&x^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<z<{[#]WZ#W#Z'U(P!b%hm#h#i#l$x%c%f(Y(d(e(f*U*Y*]+T+U+W,g,}-{.R.S.T.V/e/h2U2|2}4Q6[6mQ%uxQ%yyS&O|&TQ&[!TQ'`!hQ'b!iQ(m#sS+h%z%{Q+l%}Q,V&_Q,Z&aS-d'c'dQ.a(nQ0u+iQ0{+oQ0}+pQ1Q+tQ1f,WS1j,[,]Q2n-eQ4}0wQ5R0zQ5W1SQ5s1kQ7r5PQ7u5TQ9c7qR:^9d!O$zi$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=R!S%wy!i!u%y%z%{'S'b'c'd'h'r*d+h+i-Q-d-e-l/y0u2g2n2u4dQ+b%uQ+{&XQ,O&YQ,Y&aQ.`(mQ1e,VU1i,Z,[,]Q3V.aQ5n1fS5r1j1kQ8]5s#^<|#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vo<};g;h;k;m;q;s;u;}<P<S<W<Y<[<^<bW%Ti%V*t<xS&X!Q&fQ&Y!RQ&Z!SR+y&V$}%Si#v$b$c$d$x${%O%Q%]%^%b)u){)}*P*R*U*[*b*r*s+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4m4u4x5l6p7_7h8U8u9T9b9l:O:c:k;g;h;j;k;l;m;p;q;r;s;t;u;|;}<O<P<R<S<V<W<X<Y<Z<[<]<^<a<b<x=Q=R=U=VT)v$u)wV*y%[;n;oW'X!e%g*V-WS(y#y#zQ+]%pQ+s&QS.Y(i(jQ1[,PQ4n0`R7{5^'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{$i$^c#Y#e%o%q%s(O(U(p(u(})O)P)Q)R)S)T)U)V)W)Y)[)^)c)m+^+r-R-p-u-z-|.k.n.r.t.u.v/X0e2]2`2p2w3]3b3c3d3e3f3g3h3i3j3k3l3m3n3q3r3y4r4{6_6e6j6y6z7T7U7}8l8p8z9Q9R9{:`:g;R<oT#TV#U'PkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{Q'V!eR2c-Tv!nQ!e!r!v!y!z'T'[']'i'j'k-T-Z-]-m1a5e5gU*d$|*V*jS/y*e*lQ0S*mQ1^,RQ4d0RR4g0UnqOXst!Z#d%k&o&q&r&t,k,p1|2PQ&v!^Q's!xS(o#u;XQ+f%xQ,T&[Q,U&^Q-b'aQ-o'lS.j(t;yS0f+R<TQ0s+gQ1`,SQ2T,rQ2V,sQ2_-OQ2l-cQ2o-gS4s0g<_Q4y0tS4|0v<`Q6^2aQ6b2mQ6g2tQ7p4zQ8m6`Q8n6cQ8q6hR9x8j$d$]c#Y#e%q%s(O(U(p(u(})O)P)Q)R)S)T)U)V)W)Y)[)^)c)m+^+r-R-p-u-z-|.k.n.r.u.v/X0e2]2`2p2w3]3b3c3d3e3f3g3h3i3j3k3l3m3n3q3r3y4r4{6_6e6j6y6z7T7U7}8l8p8z9Q9R9{:`:g;R<oS(k#p'fQ({#zS+[%o.tS.Z(j(lR3O.['OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{S#q];QQ&q!XQ&r!YQ&t![Q&u!]R1{,nQ'^!hQ+_%uQ-`'`S.](m+bQ2j-_W3S.`.a0l0nQ6a2kW6n3P3R3V4wU8t6o6q6sU9}8v8w8yS:i9|:PQ:t:jR:z:uU!wQ']-]T5c1a5e!Q_OXZ`st!V!Z#d#h%c%k&f&h&o&q&r&t(f,k,p.S1|2P]!pQ!r']-]1a5eT#q];Q%[{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8rS(y#y#zS.Y(i(j!s<f$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{U$fd)Z,eS(l#p'fU*q%R(s3pU0b*x.f7PQ4w0mQ6o3QQ8w6rR:P8xm!tQ!r!v!y!z']'i'j'k-]-m1a5e5gQ'q!uS(b#g1vS-k'h'tQ/k*XQ/w*dQ2v-nQ4U/lS4_/x0SQ7Z4PS7f4e4gQ9V7[Q9Z7cQ9`7iS:X9[9]S:n:Y:ZS:w:o:pR:}:xQ#wbQ'p!uS(a#g1vS(c#m+QQ+S%dQ+d%vQ+j%|U-j'h'q'tQ.O(bQ/j*XQ/v*dQ/|*gQ0r+eQ1g,XS2s-k-nQ2{.WS4T/k/lS4^/w0SQ4a/{Q4c/}Q5p1hQ6i2vQ7Y4PQ7^4US7b4_4gQ7g4fQ8Z5qS9U7Z7[Q9Y7cQ9^7fQ9a7jQ9o8[Q:V9VS:W9Z9]Q:[9`Q:e9pS:m:X:ZS:v:n:pQ:|:wQ;O:}Q<i<dQ<t<mR<u<nV!wQ']-]%[aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8rS#wz!j!r<c$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{R<i<z%[bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8rQ%dj!S%vy!i!u%y%z%{'S'b'c'd'h'r*d+h+i-Q-d-e-l/y0u2g2n2u4dS%|z!jQ+e%wQ,X&aW1h,Y,Z,[,]U5q1i1j1kS8[5r5sQ9p8]!r<d$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{Q<m<yR<n<z%OeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8rY#bWZ#W#Z(P!b%hm#h#i#l$x%c%f(Y(d(e(f*U*Y*]+T+U+W,g,}-{.R.S.T.V/e/h2U2|2}4Q6[6mQ,f&l!p<e$Z$n)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{R<h'UU'Y!e%g*VR2e-W%QdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V,h,k,p-a-i-w-}.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3^5b5m5}6O6R6f8R8X8h8r!r)Z$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{Q,e&lQ0m+aQ3Q._Q6r3UR8x6t!b$Tc#Y%o(O(U(p(u)V)W)[)c+r-p-u-z-|.k.n/X0e2p2w3]3m4r4{6e6j6y8p9{;R!P;_)Y)m-R.t2]2`3b3k3l3q3y6_6z7T7U7}8l8z9Q9R:`:g<o!f$Vc#Y%o(O(U(p(u)S)T)V)W)[)c+r-p-u-z-|.k.n/X0e2p2w3]3m4r4{6e6j6y8p9{;R!T;a)Y)m-R.t2]2`3b3h3i3k3l3q3y6_6z7T7U7}8l8z9Q9R:`:g<o!^$Zc#Y%o(O(U(p(u)[)c+r-p-u-z-|.k.n/X0e2p2w3]3m4r4{6e6j6y8p9{;RQ3}/cz<{)Y)m-R.t2]2`3b3q3y6_6z7T7U7}8l8z9Q9R:`:g<oQ=Q=SR=R=T'OkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{S$oh$pR3v.|'VgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.|.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{T$kf$qQ$ifS)f$l)jR)r$qT$jf$qT)h$l)j'VhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%k%r&P&h&k&l&o&q&r&t&x'Q'U'_'o(P(R(X(`(t(v(z)o)y+R+V+a,h,k,p,|-P-a-i-w-}._.l.s.|.}/f0a0g0v1d1t1u1w1y1|2P2R2b2r2x3U3^3u5`5b5m5}6O6R6]6f6t8R8X8h8r9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{T$oh$pQ$rhR)q$p%[jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%k%r&P&h&k&l&o&q&r&t&x'Q'_'o(P(R(X(`(t(v(z)y+R+V+a,h,k,p-a-i-w-}._.l.s/f0a0g0v1d1t1u1w1y1|2P2R2r2x3U3^5b5m5}6O6R6f6t8R8X8h8r!s<y$Z$n'U)o,|-P.}2b3u5`6]9h9y;P;S;T;W;X;Y;Z;[;];^;_;`;a;b;c;d;f;i;v;x;y;{<T<U<_<`<{#elOPXZst!Z!`!o#S#d#o#{$n%k&h&k&l&o&q&r&t&x'Q'_(z)o+V+a,h,k,p-a._.}/f0a1d1t1u1w1y1|2P2R3U3u5b5m5}6O6R6t8R8X8h!O%Ri$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=R#^(s#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=VQ*}%`Q/Y)zo3p;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<b!O$yi$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=RQ*^$zU*g$|*V*jQ+O%aQ/}*h#^<k#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vn<l;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<bQ<p<|Q<q<}Q<r=OR<s=P!O%Ri$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=R#^(s#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vo3p;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<bnoOXst!Z#d%k&o&q&r&t,k,p1|2PS*a${*UQ,y&{Q,z&}R4X/p$|%Si#v$b$c$d$x${%O%Q%]%^%b)u){)}*P*R*U*[*b*r*s+`+c+z+}.^.w/]/e/o/p/r0V0X0d1W1Z1c3T3}4Y4b4m4u4x5l6p7_7h8U8u9T9b9l:O:c:k;g;h;j;k;l;m;p;q;r;s;t;u;|;}<O<P<R<S<V<W<X<Y<Z<[<]<^<a<b<x=Q=R=U=VQ+|&YQ1Y,OQ5[1XR7z5]V*i$|*V*jU*i$|*V*jT5d1a5eU/{*f/f5bS4f0T8RR7j4hQ+d%vQ/|*gQ0r+eQ1g,XQ5p1hQ8Z5qQ9o8[R:e9p!O%Oi$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=Rr)}$v)a*O*p+P/n0Z0[3s4V4q7X7k:U<j<v<wS0V*o0W#^;j#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vn;k;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<b!`;|(q)_*W*`.b.e.i/U/Z/c/s0k1V1X3Y4W4[5Z5]6u6x7`7d7m7o9X9_:]:l=S=T`;}3o6{7O7S8{:Q:T:{S<X.d3ZT<Y6}9O!O%Qi$d%O%Q%]%^%b)}*P*[*r*s.w/o0V0X0d3}4m9T<x=Q=Rv*P$v)a*Q*o+P/_/n0Z0[3s4V4i4q7X7k:U<j<v<wS0X*p0Y#^;l#v$b$c$x${)u){*R*U*b+`+c+z+}.^/]/e/p/r1W1Z1c3T4Y4b4u4x5l6p7_7h8U8u9b9l:O:c:k;j;l;p;r;t;|<O<R<V<X<Z<]<a=U=Vn;m;g;h;k;m;q;s;u;}<P<S<W<Y<[<^<b!d<O(q)_*W*`.c.d.i/U/Z/c/s0k1V1X3W3Y4W4[5Z5]6u6v6x7`7d7m7o9X9_:]:l=S=Td<P3o6|6}7S8{8|:Q:R:T:{S<Z.e3[T<[7O9PrnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PQ&c!UR,h&lrnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PR&c!UQ,Q&ZR1U+ysnOXst!V!Z#d%k&f&o&q&r&t,k,p1|2PQ1b,VS5k1e1fU8T5i5j5nS9k8V8WS:a9j9mQ:q:bR:y:rQ&j!VR,a&fR5w1nS&O|&TR0}+pQ&o!WR,k&pR,q&uT1},p2PR,u&vQ,t&vR2W,uQ'v!{R-q'vSsOtQ#dXT%ns#dQ#OTR'x#OQ#RUR'z#RQ)w$uR/V)wQ#UVR'|#UQ#XWU(S#X(T-xQ(T#YR-x(UQ-U'VR2d-UQ.m(uS3_.m3`R3`.nQ-]']R2h-]Y!rQ']-]1a5eR'g!rQ.x)aR3t.xU#_W%f*UU(Z#_([-yQ([#`R-y(VQ-X'YR2f-Xt`OXst!V!Z#d%k&f&h&o&q&r&t,k,p1|2PS#hZ%cU#r`#h.SR.S(fQ(g#jQ.P(cW.X(g.P2y6kQ2y.QR6k2zQ)j$lR/O)jQ$phR)p$pQ$`cU)]$`-t;eQ-t;RR;e)mQ/i*XW4R/i4S7]9WU4S/j/k/lS7]4T4UR9W7^$Z)|$v(q)_)a*W*`*o*p*z*{+P.d.e.g.h.i/U/Z/_/a/c/n/s0Z0[0k1V1X3W3X3Y3o3s4V4W4[4i4k4q5Z5]6u6v6w6x6}7O7Q7R7S7X7`7d7k7m7o8{8|8}9X9_:Q:R:S:T:U:]:l:{<j<v<w=S=TQ/q*`U4Z/q4]7aQ4]/sR7a4[S*j$|*VR0P*jr*O$v)a*o*p+P/n0Z0[3s4V4q7X7k:U<j<v<w!`.b(q)_*W*`.d.e.i/U/Z/c/s0k1V1X3Y4W4[5Z5]6u6x7`7d7m7o9X9_:]:l=S=TU/`*O.b6{a6{3o6}7O7S8{:Q:T:{Q0W*oQ3Z.dU4j0W3Z9OR9O6}v*Q$v)a*o*p+P/_/n0Z0[3s4V4i4q7X7k:U<j<v<w!d.c(q)_*W*`.d.e.i/U/Z/c/s0k1V1X3W3Y4W4[5Z5]6u6v6x7`7d7m7o9X9_:]:l=S=TU/b*Q.c6|e6|3o6}7O7S8{8|:Q:R:T:{Q0Y*pQ3[.eU4l0Y3[9PR9P7OQ*u%UR0^*uQ4v0kR7n4vQ+X%iR0j+XQ5_1[S7|5_9iR9i7}Q,S&[R1_,SQ5e1aR8P5eQ1m,^S5u1m8_R8_5wQ0x+lW5Q0x5S7t9eQ5S0{Q7t5RR9e7uQ+q&OR1O+qQ2P,pR6V2PYrOXst#dQ&s!ZQ+Z%kQ,j&oQ,l&qQ,m&rQ,o&tQ1z,kS1},p2PR6U1|Q%mpQ&w!_Q&z!aQ&|!bQ'O!cQ'n!uQ+Y%jQ+f%xQ+x&UQ,`&jQ,w&yW-h'h'p'q'tQ-o'lQ0O*iQ0s+gS1p,a,dQ2X,vQ2Y,yQ2Z,zQ2o-gW2q-j-k-n-pQ4y0tQ5V1RQ5Y1VQ5o1gQ5y1rQ6T1{U6d2p2s2vQ6g2tQ7p4zQ7x5XQ7y5ZQ8O5dQ8Y5pQ8`5xS8o6e6iQ8q6hQ9f7vQ9n8ZQ9s8aQ9z8pQ:_9gQ:d9oQ:h9{R:s:eQ%xyQ'a!iQ'l!uU+g%y%z%{Q-O'SU-c'b'c'dS-g'h'rQ/u*dS0t+h+iQ2a-QS2m-d-eQ2t-lQ4`/yQ4z0uQ6`2gQ6c2nQ6h2uR7e4dS$wi<xR*v%VU%Ui%V<xR0]*tQ$viS(q#v+cS)_$b$cQ)a$dQ*W$xS*`${*UQ*o%OQ*p%QQ*z%]Q*{%^Q+P%bQ.d;jQ.e;lQ.g;pQ.h;rQ.i;tQ/U)uS/Z){/]Q/_)}Q/a*PQ/c*RQ/n*[S/s*b/eQ0Z*rQ0[*sh0k+`.^1c3T5l6p8U8u9l:O:c:kQ1V+zQ1X+}Q3W;|Q3X<OQ3Y<RS3o;g;hQ3s.wQ4V/oQ4W/pQ4[/rQ4i0VQ4k0XQ4q0dQ5Z1WQ5]1ZQ6u<VQ6v<XQ6w<ZQ6x<]Q6};kQ7O;mQ7Q;qQ7R;sQ7S;uQ7X3}Q7`4YQ7d4bQ7k4mQ7m4uQ7o4xQ8{<SQ8|;}Q8}<PQ9X7_Q9_7hQ:Q<WQ:R<YQ:S<[Q:T<^Q:U9TQ:]9bQ:l<aQ:{<bQ<j<xQ<v=QQ<w=RQ=S=UR=T=VQ*x%[Q.f;nR7P;onpOXst!Z#d%k&o&q&r&t,k,p1|2PQ!fPS#fZ#oQ&y!`U'e!o5b8RQ'{#SQ(|#{Q)n$nS,d&h&kQ,i&lQ,v&xQ,{'QQ-_'_Q.p(zQ/S)oS0h+V/fQ0n+aQ1x,hQ2k-aQ3R._Q3x.}Q4o0aQ5j1dQ5{1tQ5|1uQ6Q1wQ6S1yQ6X2RQ6s3UQ7V3uQ8W5mQ8d5}Q8e6OQ8g6RQ8y6tQ9m8XR9w8h#YcOPXZst!Z!`!o#d#o#{%k&h&k&l&o&q&r&t&x'Q'_(z+V+a,h,k,p-a._/f0a1d1t1u1w1y1|2P2R3U5b5m5}6O6R6t8R8X8hQ#YWQ#eYQ%ouQ%qvS%sw!gS(O#W(RQ(U#ZQ(p#uQ(u#xQ(}$OQ)O$PQ)P$QQ)Q$RQ)R$SQ)S$TQ)T$UQ)U$VQ)V$WQ)W$XQ)Y$ZQ)[$_Q)^$aQ)c$eW)m$n)o.}3uQ+^%rQ+r&PS-R'U2bQ-p'oS-u(P-wQ-z(XQ-|(`Q.k(tQ.n(vQ.r;PQ.t;SQ.u;TQ.v;WQ/X)yQ0e+RQ2],|Q2`-PQ2p-iQ2w-}Q3].lQ3b;XQ3c;YQ3d;ZQ3e;[Q3f;]Q3g;^Q3h;_Q3i;`Q3j;aQ3k;bQ3l;cQ3m.sQ3n;fQ3q;iQ3r;vQ3y;dQ4r0gQ4{0vQ6_;xQ6e2rQ6j2xQ6y3^Q6z;yQ7T;{Q7U<TQ7}5`Q8l6]Q8p6fQ8z<UQ9Q<_Q9R<`Q9{8rQ:`9hQ:g9yQ;R#SR<o<{R#[WR'W!el!tQ!r!v!y!z']'i'j'k-]-m1a5e5gS'S!e-TS-Q'T'[R2g-ZR(w#xQ!fQT-[']-]]!qQ!r']-]1a5eQ#p]R'f;QR)b$dY!uQ']-]1a5eQ'h!rS'r!v!yS't!z5gS-l'i'jQ-n'kR2u-mT#kZ%cS#jZ%cS%im,gU(c#h#i#lS.Q(d(eQ.U(fQ0i+WQ2z.RU2{.S.T.VS6l2|2}R8s6md#^W#W#Z%f(P(Y*U+T-{/er#gZm#h#i#l%c(d(e(f+W.R.S.T.V2|2}6mS*X$x*]Q/l*YQ1v,gQ2^,}Q4P/hQ6Z2UQ7[4QQ8k6[T<g'U+UV#aW%f*UU#`W%f*US(Q#W(YU(V#Z+T/eS-S'U+UT-v(P-{V'Z!e%g*VQ$lfR)t$qT)i$l)jR3w.|T*Z$x*]T*c${*UQ0l+`Q3P.^Q5i1cQ6q3TQ8V5lQ8v6pQ9j8UQ9|8uQ:b9lQ:j:OQ:r:cR:u:knqOXst!Z#d%k&o&q&r&t,k,p1|2PQ&i!VR,`&ftmOXst!U!V!Z#d%k&f&o&q&r&t,k,p1|2PR,g&lT%jm,gR1],PR,_&dQ&S|R+w&TR+m%}T&m!W&pT&n!W&pT2O,p2P",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:376,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,34,36,48,50,52,""],["group",-26,9,17,19,65,204,208,212,213,215,218,221,231,233,239,241,243,245,248,254,260,262,264,266,268,270,271,"Statement",-34,13,14,29,32,33,39,48,51,52,54,59,67,69,73,77,79,81,82,107,108,117,118,135,138,140,141,142,143,144,146,147,166,167,169,"Expression",-23,28,30,34,38,40,42,171,173,175,176,178,179,180,182,183,184,186,187,188,198,200,202,203,"Type",-3,85,100,106,"ClassItem"],["openedBy",23,"<",35,"InterpolationStart",53,"[",57,"{",70,"(",159,"JSXStartCloseTag"],["closedBy",24,">",37,"InterpolationEnd",47,"]",58,"}",71,")",164,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,274],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(U!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(U!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(RpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(RpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Rp(U!b'w0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(S#S$h&j'x0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Rp(U!b'x0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!m),Q(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(Q':f$h&j(U!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(U!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(U!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(U!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(U!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Rp(U!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Rp(U!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(U!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(U!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(RpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(RpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Rp(U!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(j%1l(Rp(U!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Rp(U!b$[#t(O,2j(`$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Rp(U!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Rp(U!b#m(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(u+JY$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(T';W$h&j(RpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(RpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(RpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(RpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(RpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!i/.^$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!h!Lf$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Rp(U!b(P%&f#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Rp(U!b#k(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Rp(U!bo+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Y+Jf$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Rp(U!b}.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!X!L^$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Rp(U!b#l(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(U!b!U7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!U7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!U7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!U7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!U7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(U!b!U7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(U!b!U7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(U!b!U7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(U!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(U!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Rp!U7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Rp!U7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Rp!U7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Rp!U7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(RpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(RpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Rp(U!b!U7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Rp(U!b!U7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Rp(U!b!U7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Rp(U!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Rp(U!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Rp(U!b'y0/l!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Rp(U!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(U!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(U!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(RpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(RpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Rp(U!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Rp(U!b!U7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Rp(U!bp'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!d$b$h&j#})Lv(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#O-<U(Rp(U!b(y7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#o(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#p(Ch(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#]*!Y$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#h(Cl$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#p(Ch$e#|$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#p(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#o(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#o(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(m(Ct$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!y$Ip$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!P0,v$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!V#)l$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Rp(U!b([+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Rp(U!b(O,2j$^#t(`$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Rp(U!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X![#Hb(Rp(U!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(t+JY$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z(Kd$?V_!Z(Cds`$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!n7`$h&j(Rp(U!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Rp(U!b'w0/l$[#t(O,2j(`$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Rp(U!b'x0/l$[#t(O,2j(`$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOu~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!R~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(^~~",141,335),new LocalTokenGroup("j~RQYZXz{^~^O'{~~aP!P!Qd~iO'|~~",25,318)],topRules:{Script:[0,7],SingleExpression:[1,272],SingleClassItem:[2,273]},dialects:{jsx:0,ts:14725},dynamicPrecedences:{77:1,79:1,91:1,167:1,196:1},specialized:[{term:322,get:n=>spec_identifier[n]||-1},{term:338,get:n=>spec_word[n]||-1},{term:92,get:n=>spec_LessThan[n]||-1}],tokenPrec:14749}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(n){return(r,a)=>{let s=r.node.getChild("VariableDefinition");return s&&a(s,n),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(n,r){n.matchContext(functionContext)||r(n,"variable")},TypeDefinition(n,r){r(n,"type")},__proto__:null};function getScope(n,r){let a=cache.get(r);if(a)return a;let s=[],o=!0;function u(c,p){let d=n.sliceString(c.from,c.to);s.push({label:d,type:p})}return r.cursor(IterMode.IncludeAnonymous).iterate(c=>{if(o)o=!1;else if(c.name){let p=gatherCompletions[c.name];if(p&&p(c,u)||ScopeNodes.has(c.name))return!1}else if(c.to-c.from>8192){for(let p of getScope(n,c.node))s.push(p);return!1}}),cache.set(r,s),s}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(n){let r=syntaxTree(n.state).resolveInner(n.pos,-1);if(dontComplete.indexOf(r.name)>-1)return null;let a=r.name=="VariableName"||r.to-r.from<20&&Identifier.test(n.state.sliceDoc(r.from,r.to));if(!a&&!n.explicit)return null;let s=[];for(let o=r;o;o=o.parent)ScopeNodes.has(o.name)&&(s=s.concat(getScope(n.state.doc,o)));return{options:s,from:a?r.from:n.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:n=>{let r=n.textAfter,a=/^\s*\}/.test(r),s=/^\s*(case|default)\b/.test(r);return n.baseIndent+(a?0:s?1:2)*n.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(n){let r=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(r?0:n.unit)},JSXEscape(n){let r=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(r?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:n=>/^JSX/.test(n.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(n=>n.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(n=>n.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=n=>({label:n,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(n={}){let r=n.jsx?n.typescript?tsxLanguage:jsxLanguage:n.typescript?typescriptLanguage:javascriptLanguage,a=n.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(r,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(a))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),n.jsx?autoCloseTags:[]])}function findOpenTag(n){for(;;){if(n.name=="JSXOpenTag"||n.name=="JSXSelfClosingTag"||n.name=="JSXFragmentTag")return n;if(n.name=="JSXEscape"||!n.parent)return null;n=n.parent}}function elementName(n,r,a=n.length){for(let s=r==null?void 0:r.firstChild;s;s=s.nextSibling)if(s.name=="JSXIdentifier"||s.name=="JSXBuiltin"||s.name=="JSXNamespacedName"||s.name=="JSXMemberExpression")return n.sliceString(s.from,Math.min(s.to,a));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((n,r,a,s,o)=>{if((android?n.composing:n.compositionStarted)||n.state.readOnly||r!=a||s!=">"&&s!="/"||!javascriptLanguage.isActiveAt(n.state,r,-1))return!1;let u=o(),{state:c}=u,p=c.changeByRange(d=>{var _;let{head:ja}=d,Ja=syntaxTree(c).resolveInner(ja-1,-1),ec;if(Ja.name=="JSXStartTag"&&(Ja=Ja.parent),!(c.doc.sliceString(ja-1,ja)!=s||Ja.name=="JSXAttributeValue"&&Ja.to>ja)){if(s==">"&&Ja.name=="JSXFragmentTag")return{range:d,changes:{from:ja,insert:"</>"}};if(s=="/"&&Ja.name=="JSXStartCloseTag"){let tc=Ja.parent,rc=tc.parent;if(rc&&tc.from==ja-2&&((ec=elementName(c.doc,rc.firstChild,ja))||((_=rc.firstChild)===null||_===void 0?void 0:_.name)=="JSXFragmentTag")){let nc=`${ec}>`;return{range:EditorSelection.cursor(ja+nc.length,-1),changes:{from:ja,insert:nc}}}}else if(s==">"){let tc=findOpenTag(Ja);if(tc&&tc.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(c.doc.sliceString(ja,ja+2))&&(ec=elementName(c.doc,tc,ja)))return{range:d,changes:{from:ja,insert:`</${ec}>`}}}}return{range:d}});return p.changes.empty?!1:(n.dispatch([u,c.update(p,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)],_sfc_main$b=defineComponent({__name:"CodeEditor",props:{modelValue:{type:String}},emits:["update:modelValue"],setup(n,{emit:r}){const a=ref(),s=n,o=r;let u;watch(()=>s.modelValue,p=>{u&&p!==u.state.doc.toString()&&u.dispatch({changes:{from:0,to:u.state.doc.length,insert:s.modelValue}})});let c=EditorView.updateListener.of(p=>{p.docChanged&&o("update:modelValue",p.state.doc.toString())});return onMounted(()=>{u=new EditorView({doc:s.modelValue,extensions:[minimalSetup,oneDark,javascript(),c],parent:a.value})}),(p,d)=>(openBlock(),createElementBlock("div",{ref_key:"codeEditorRef",ref:a,class:"code-editor"},null,512))}}),CodeEditor=_export_sfc$1(_sfc_main$b,[["__scopeId","data-v-b912e44b"]]);function _isSlot$6(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!isVNode(n)}class NBarChart extends ItemNode{constructor(node){super(node);Zp(this,"isNBarChart",!0);Zp(this,"isChartNode",!0);if(this.watchStateOptions.push({value:"initData",label:"刷新数据"}),!node){this.path="./components/NBarChart/NBarChart.tsx",this.name="柱状图";const r=this.props.style;this.props.style={...r,width:"300px",height:"200px",flexShrink:"0"},this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [{
    product: String,
    default1: Number, 
    default2: Number
  }]
}`,this.props.autoAction=!1,this.props.pOption={type:"cube",color:["hsla(210, 100%, 67%, 1)","hsla(30, 100%, 67%, 1)"],colorLinear:!1,barWidth:null,axisLabelColor:"#333",legendTextStyleColor:"#333",yAxisName:"",datasetDimensions:["default1","default2"],datasetSourceProduct:"product",stack:!1}}const pComponent=this.component;this.component=markRaw(defineComponent(props=>{const data=ref([{product:"defaultA",default1:2,default2:1},{product:"defaultB",default1:5,default2:3},{product:"defaultC",default1:4,default2:2},{product:"defaultD",default1:6,default2:4}]),initData=async()=>{this.props.dataUrl&&(data.value=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(data.value=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(_sfc_main$c,{pOption:this.props.pOption,data:data.value,autoAction:this.props.autoAction},null)]})},{name:"NBarChart"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.35, 0.3)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>{const r=ref(),a=ref(!1),s=ref();return()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":o=>this.props.dataUrl=o||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":o=>this.props.dataFn=o||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("系列名字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.pOption.datasetDimensions.map(o=>createVNode$1(ElTag,{key:o,closable:!0,type:"primary",effect:"dark",size:"small",onClose:()=>{const u=this.props.pOption.datasetDimensions;u.splice(u.indexOf(o),1)}},_isSlot$6(o)?o:{default:()=>[o]})),a.value?createVNode$1(ElInput,{ref:r,modelValue:s.value,"onUpdate:modelValue":o=>s.value=o,size:"small",style:{width:"80px"},onBlur:()=>{s.value&&this.props.pOption.datasetDimensions.push(s.value),s.value="",a.value=!1}},null):createVNode$1(ElButton,{onClick:()=>{a.value=!0,nextTick(()=>{r.value.input.focus()})},type:"warning",size:"small",circle:!0,icon:plus$1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("柱状图类型")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.pOption.type,"onUpdate:modelValue":o=>this.props.pOption.type=o,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"bar",label:"普通",size:"small"},null),createVNode$1(ElRadioButton,{value:"cube",label:"立方",size:"small"},null),createVNode$1(ElRadioButton,{value:"cylinder",label:"圆柱",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("柱条宽度")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.pOption.barWidth,"onUpdate:modelValue":o=>this.props.pOption.barWidth=o,min:1,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("x坐标轴字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.datasetSourceProduct,"onUpdate:modelValue":o=>this.props.pOption.datasetSourceProduct=o||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("y坐标轴名")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.yAxisName,"onUpdate:modelValue":o=>this.props.pOption.yAxisName=o||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("坐标轴字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.pOption.axisLabelColor,"onUpdate:modelValue":o=>this.props.pOption.axisLabelColor=o||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("图例字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.pOption.legendTextStyleColor,"onUpdate:modelValue":o=>this.props.pOption.legendTextStyleColor=o||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("调色盘")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.pOption.color.map((o,u)=>createVNode$1(ElColorPicker,{modelValue:this.props.pOption.color[u],"onUpdate:modelValue":c=>this.props.pOption.color[u]=c||"","color-format":"hsl","show-alpha":!0,size:"small",teleported:!1},null)),createVNode$1(ElButton,{type:"primary",icon:plus$1,circle:!0,onClick:()=>this.props.pOption.color.push("#5af"),size:"small"},null),createVNode$1(ElButton,{type:"danger",icon:minus$1,circle:!0,onClick:()=>this.props.pOption.color.pop(),size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("线性渐变"),createVNode$1(_sfc_main$d,{content:"索引位置调色盘为开始颜色，索引+1调色盘为结束颜色"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.colorLinear,"onUpdate:modelValue":o=>this.props.pOption.colorLinear=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("堆叠"),createVNode$1(_sfc_main$d,{content:"普通柱状图才可堆叠"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.stack,"onUpdate:modelValue":o=>this.props.pOption.stack=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("轮流选择")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.autoAction,"onUpdate:modelValue":o=>this.props.autoAction=o,size:"small"},null)])])]})}))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_pOption`,c=`${a}_${s}_data`,p=`${a}_${s}_initData`,d=JSON.stringify(this.props.pOption);return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"./imports/BarChart.vue":{default:"BarChart"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"BarChart.vue":BarChartRaw,"barRenderItem.js":barRenderItemRaw$1,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref(${d})
const ${c} = ref([])
const ${p} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${p}()
${this.props.watchState.length>0?`
${this.props.watchState.map(_=>{if(_.type=="initData")return`watch(() => state.${_.stateProperty}, ${p})`}).join(`
`)}
    `:""}
      `,r.template=r.template.replace("<slot></slot>",`<BarChart :pOption="${u}" :data="${c}" :autoAction="${this.props.autoAction}"></BarChart>`),r}}class NCard extends ContainerNode{constructor(a){super(a);Zp(this,"isNCard",!0);Zp(this,"isDataNode",!0);a||(this.path="./components/NCard/NCard.tsx",this.name="卡片容器",this.props.header=null,this.props.footer=null,this.props.shadow="always",this.props.style.borderColor="transparent");const s=this.component;this.component=markRaw(defineComponent((c,{slots:p})=>()=>createVNode$1(s,null,{default:()=>[createVNode$1(ElCard,{style:"box-sizing: border-box; width: 100%; height: 100%;","body-style":{boxSizing:"border-box",width:"100%",height:"100%"},shadow:this.props.shadow},{header:this.props.header?()=>this.props.header:null,footer:this.props.footer?()=>this.props.footer:null,default:()=>this.children.map(d=>h$1(d.component,{key:d.uuid}))})]}),{name:"NCard"}));const o=this.view;this.view=markRaw(defineComponent(c=>(nextTick(()=>this.props.style.borderColor="transparent"),()=>createVNode$1(o,null,null))));const u=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(u,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标题")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.header,"onUpdate:modelValue":c=>this.props.header=c,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("页脚")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.footer,"onUpdate:modelValue":c=>this.props.footer=c,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("阴影显示时机")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.shadow,"onUpdate:modelValue":c=>this.props.shadow=c,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{label:"一直显示",value:"always"},null),createVNode$1(ElRadioButton,{label:"不显示",value:"never"},null),createVNode$1(ElRadioButton,{label:"hover",value:"悬停显示"},null)]})])])]})))}toVue(){const a=super.toVue();return a.imports={...a.imports,"element-plus":{ElCard:"ElCard"}},a.template=a.template.replace("<slot></slot>",`
  <ElCard
    style="box-sizing: border-box; width: 100%; height: 100%;"
    :body-style="{ boxSizing: 'border-box', width: '100%', height: '100%' }"
    shadow="${this.props.shadow}"
  >
    ${this.props.header?`<template #header>${this.props.header}</template>`:""}
    ${this.props.footer?`<template #header>${this.props.footer}</template>`:""}
    ${this.children.map(s=>s.uuid).join(`
  `)}
  </ElCard>
  `),a}}class NCarousel extends ContainerNode{constructor(a){super(a);Zp(this,"isNCarousel",!0);Zp(this,"isDataNode",!0);a||(this.path="./components/NCarousel/NCarousel.tsx",this.name="走马灯容器",this.props.type="",this.props.autoplay=!1,this.props.interval=3e3,this.props.loop=!1);const s=this.component;this.component=markRaw(defineComponent(c=>()=>createVNode$1(s,null,{default:()=>[createVNode$1(ElCarousel,{height:this.props.style.height,type:this.props.type,autoplay:this.props.autoplay,interval:this.props.interval,loop:this.props.loop},{default:()=>this.children.map((p,d)=>h$1(ElCarouselItem,null,()=>h$1(p.component)))})]}),{name:"NCarousel"}));const o=this.view;this.view=markRaw(defineComponent(c=>(this.props.style.height="100%",()=>createVNode$1(o,null,null))));const u=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(u,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("类型")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.type,"onUpdate:modelValue":c=>this.props.type=c,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"",label:"默认",size:"small"},null),createVNode$1(ElRadioButton,{value:"card",label:"卡片",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("自动切换")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.autoplay,"onUpdate:modelValue":c=>this.props.autoplay=c},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("自动切换间隔")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.interval,"onUpdate:modelValue":c=>this.props.interval=c,min:1e3,step:500,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("自动切换循环"),createVNode$1(_sfc_main$d,{content:"编辑的时候必须为false"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.loop,"onUpdate:modelValue":c=>this.props.loop=c},null)])])]})))}toVue(){const a=super.toVue();return a.imports={...a.imports,"element-plus":{ElCarousel:"ElCarousel",ElCarouselItem:"ElCarouselItem"}},a.template=a.template.replace("<slot></slot>",`
  <ElCarousel
    height="${this.props.style.height}"
    type="${this.props.type}"
    :autoplay="${this.props.autoplay}"
    :interval="${this.props.interval}"
    :loop="${this.props.loop}"
  >
    ${this.children.map((s,o)=>`<ElCarouselItem>
      ${s.uuid}
    </ElCarouselItem>`).join(`
  `)}
  </ElCarousel>
      `),a}}function cubeRenderItem(n,r,a){var ic;const{seriesIndex:s}=n,o=r.currentSeriesIndices(),u=r.barLayout({barGap:"30%",barCategoryGap:"20%",count:o.length}),c=r.coord([r.value(0),r.value(s+1)]),p=c[1],d=c[0]+(((ic=u[s])==null?void 0:ic.offsetCenter)??0),_=r.coord([r.value(0),0])[1],ja=extendShape({buildPath(uc,eh){const{topBasicsYAxis:rh,bottomYAxis:ah,basicsXAxis:ih}=eh,oh=a,uh=a/2-1,ch=[ih-oh,rh+uh],hh=[ih-oh,ah+uh],dh=[ih,ah+uh],gh=[ih,rh+uh];uc.moveTo(ch[0],ch[1]),uc.lineTo(hh[0],hh[1]),uc.lineTo(dh[0],dh[1]),uc.lineTo(gh[0],gh[1])}}),Ja=extendShape({buildPath(uc,eh){const{topBasicsYAxis:rh,bottomYAxis:ah,basicsXAxis:ih}=eh,oh=a/2,uh=a/2-1,ch=[ih,rh+uh],hh=[ih,ah+uh],dh=[ih+oh,ah],gh=[ih+oh,rh];uc.moveTo(ch[0],ch[1]),uc.lineTo(hh[0],hh[1]),uc.lineTo(dh[0],dh[1]),uc.lineTo(gh[0],gh[1])}}),ec=extendShape({buildPath(uc,eh){const{topBasicsYAxis:rh,basicsXAxis:ah}=eh,ih=a,oh=a/2,uh=a/2-1,ch=[ah,rh+uh],hh=[ah+oh,rh],dh=[ah+oh-ih,rh],gh=[ah-ih,rh+uh];uc.moveTo(ch[0],ch[1]),uc.lineTo(hh[0],hh[1]),uc.lineTo(dh[0],dh[1]),uc.lineTo(gh[0],gh[1])}});registerShape("leftShape",ja),registerShape("rightShape",Ja),registerShape("topShape",ec);let tc=r.visual("color"),rc=!1,nc=tc;return(tc==null?void 0:tc.type)=="linear"&&(rc=!0,nc=tc.colorStops[1].color,tc=tc.colorStops[0].color),{type:"group",children:[{type:"leftShape",shape:{topBasicsYAxis:p,basicsXAxis:d,bottomYAxis:_},style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:tc},{offset:1,color:rc?nc:tc.replaceAll(/(\d+)(?=%)/g,(uc,eh)=>eh/2)}],global:!1}}},{type:"rightShape",shape:{topBasicsYAxis:p,basicsXAxis:d,bottomYAxis:_},style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:tc.replaceAll(/(\d+)(?=%)/g,(uc,eh)=>eh/1.5)},{offset:1,color:rc?nc:tc.replaceAll(/(\d+)(?=%)/g,(uc,eh)=>eh/2)}],global:!1}}},{type:"topShape",shape:{topBasicsYAxis:p,basicsXAxis:d,bottomYAxis:_},style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:tc},{offset:1,color:tc.replaceAll(/(\d+)(?=%)/g,(uc,eh)=>eh/1.2)}],global:!1}}}]}}function cylinderRenderItem(n,r,a){var rc;const{seriesIndex:s}=n,o=r.currentSeriesIndices(),u=r.barLayout({barGap:"30%",barCategoryGap:"20%",count:o.length}),c=r.value(s+1),p=r.coord([r.value(0),c]),d=p[1],_=p[0]+(((rc=u[s])==null?void 0:rc.offsetCenter)??0),ja=r.coord([r.value(0),0])[1];let Ja=r.visual("color"),ec=!1,tc=Ja;return(Ja==null?void 0:Ja.type)=="linear"&&(ec=!0,tc=Ja.colorStops[1].color,Ja=Ja.colorStops[0].color),{type:"group",children:[{type:"circle",shape:{cx:_,cy:ja,r:a/2},scaleY:.5,originX:_,originY:ja,style:{fill:ec?tc:Ja.replaceAll(/(\d+)(?=%)/g,(nc,ic)=>ic/2)}},{type:"rect",shape:{x:_-a/2,y:d,width:a,height:r.size([0,c])[1]},style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:Ja.replaceAll(/(\d+)(?=%)/g,(nc,ic)=>ic/1.5)},{offset:1,color:ec?tc:Ja.replaceAll(/(\d+)(?=%)/g,(nc,ic)=>ic/2)}],global:!1}}},{type:"circle",shape:{cx:_,cy:d,r:a/2},scaleY:.5,originX:_,originY:d,style:{fill:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:Ja.replaceAll(/(\d+)(?=%)/g,(nc,ic)=>ic/1.5)},{offset:1,color:Ja}],global:!1}}}]}}const _sfc_main$a=defineComponent({__name:"CartesianChart",props:{pOption:{type:Object,default:()=>({})},data:{type:Array,default:()=>[]},autoAction:{type:Boolean,default:!1}},setup(n){const r=n,a=ref();let s=null;const o=()=>{const{series:tc,color:rc,colorLinear:nc,barWidth:ic,smooth:uc,yAxis:eh,axisLabelColor:rh,legendTextStyleColor:ah,datasetSourceProduct:ih}=r.pOption,oh={color:rc??["hsla(210, 100%, 67%, 1)","hsla(30, 100%, 67%, 1)"],title:{show:!1},tooltip:{trigger:"axis",textStyle:{color:"var(--ec-text-color)"},backgroundColor:"var(--ec-background-color)",borderColor:"var(--ec-border-color)",formatter:uh=>uh.reduce((ch,hh)=>{const{data:dh,seriesName:gh,name:fh,color:vh}=hh;return ch+`
              <span style="color: ${vh}">${gh}</span>
              &nbsp;&nbsp;&nbsp;
              <b>${dh[gh]}</b>
              <br />
            `},`<small>${uh[0].name}</small><br/>`)},dataset:{dimensions:["product",...tc.map(uh=>uh.name)],source:r.data.map(uh=>(uh.product=uh[ih],uh))},legend:{textStyle:{color:ah??"#aaa"},itemWidth:20,itemHeight:10,icon:"roundRect"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category"}],yAxis:eh.map(uh=>({type:"value",name:uh.name??"",nameTextStyle:{color:rh},splitLine:{lineStyle:{type:"dashed",opacity:.2}}})),axisLabel:{color:rh??"#333"},series:[]};return nc&&(oh.color=rc.map((uh,ch)=>({type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:uh},{offset:1,color:rc[ch+1]??"transparent"}],global:!1}))),oh.series=tc.map(uh=>{const{name:ch,type:hh,yAxisIndex:dh}=uh;let gh={};return hh=="cube"?gh={type:"custom",yAxisIndex:dh,name:ch,tooltip:{formatter:fh=>{const{data:vh,seriesName:ph,name:yh,color:xh}=fh;return`
              <small style="color: ${xh}">${ph}</small>
              <br/>
              <span>${yh}</span>
              &nbsp;&nbsp;&nbsp;
              <b>${vh[ph]}</b>
            `}},renderItem:(fh,vh)=>cubeRenderItem(fh,vh,ic??18)}:hh=="cylinder"?gh={type:"custom",yAxisIndex:dh,name:ch,renderItem:(fh,vh)=>cylinderRenderItem(fh,vh,ic??18)}:hh=="bar"?gh={type:"bar",yAxisIndex:dh,name:ch,barWidth:ic,encode:{x:"product",y:ch}}:hh=="line"&&(gh={type:"line",yAxisIndex:dh,name:ch,smooth:uc,encode:{x:"product",y:ch}}),gh}),oh};watch(r,()=>{s&&(s.clear(),s.setOption(o(),{notMerge:!0}))},{deep:!0});let u=-1,c=null,p=1e3,d=ref(!0);const _=function(){if(!d.value||!s)return;let tc=r.data.length;s.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:u});const rc=(u+1)%tc;u=Number.isNaN(rc)?-1:rc,s.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:u}),s.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:u})};watch(()=>r.autoAction,tc=>{c&&clearInterval(c),tc&&(c=setInterval(_,p))},{immediate:!0});const ja=()=>{nextTick(()=>{s=init$1(a.value),s.setOption(o())})};let Ja;const ec=()=>{Ja=new window.ResizeObserver(tc=>s==null?void 0:s.resize()),Ja.observe(a.value)};return onMounted(()=>{ja(),ec()}),onUnmounted(()=>{s.dispose(),s=null,Ja&&Ja.disconnect()}),(tc,rc)=>(openBlock(),createElementBlock("div",{ref_key:"chartDomRef",ref:a,style:{width:"100%",height:"100%"},onMouseover:rc[0]||(rc[0]=nc=>isRef(d)?d.value=!1:d=!1),onMouseout:rc[1]||(rc[1]=nc=>isRef(d)?d.value=!0:d=!0)},null,544))}}),CartesianChartRaw=`<script setup lang="ts">\r
import { nextTick, onMounted, onUnmounted, ref, watch } from 'vue'\r
import * as echarts from 'echarts'\r
import { cubeRenderItem, cylinderRenderItem } from './barRenderItem.js'\r
\r
const props = defineProps({\r
  pOption: {\r
    type: Object,\r
    default: () => ({})\r
  },\r
  data: {\r
    type: Array,\r
    default: () => []\r
  },\r
  autoAction: {\r
    type: Boolean,\r
    default: false\r
  }\r
})\r
\r
const chartDomRef = ref()\r
let chartInstance = null\r
\r
const generateOption = () => {\r
  const {\r
    series,\r
    color,\r
    colorLinear,\r
    barWidth,\r
    smooth,\r
    yAxis,\r
    axisLabelColor,\r
    legendTextStyleColor,\r
    datasetSourceProduct\r
  } = props.pOption\r
\r
  const opt: any = {\r
    color: color ?? ['hsla(210, 100%, 67%, 1)', 'hsla(30, 100%, 67%, 1)'],\r
    title: {\r
      show: false\r
    },\r
    tooltip: {\r
      trigger: 'axis',\r
      textStyle: {\r
        color: 'var(--ec-text-color)'\r
      },\r
      backgroundColor: 'var(--ec-background-color)',\r
      borderColor: 'var(--ec-border-color)',\r
      formatter: (paramsArr) => {\r
        return paramsArr.reduce((accumulator, currentValue) => {\r
          const { data, seriesName, name, color } = currentValue\r
\r
          return (\r
            accumulator +\r
            \`\r
              <span style="color: \${color}">\${seriesName}</span>\r
              &nbsp;&nbsp;&nbsp;\r
              <b>\${data[seriesName]}</b>\r
              <br />\r
            \`\r
          )\r
        }, \`<small>\${paramsArr[0].name}</small><br/>\`)\r
      }\r
    },\r
    dataset: {\r
      dimensions: ['product', ...series.map((item) => item.name)],\r
      source: props.data.map((data: any) => {\r
        data.product = data[datasetSourceProduct]\r
        return data\r
      })\r
    },\r
    legend: {\r
      textStyle: {\r
        color: legendTextStyleColor ?? '#aaa'\r
      },\r
      itemWidth: 20,\r
      itemHeight: 10,\r
      icon: 'roundRect'\r
    },\r
    grid: {\r
      left: '3%',\r
      right: '4%',\r
      bottom: '3%',\r
      containLabel: true\r
    },\r
    xAxis: [\r
      {\r
        type: 'category'\r
      }\r
    ],\r
    yAxis: yAxis.map((y) => {\r
      return {\r
        type: 'value',\r
        name: y.name ?? '',\r
        nameTextStyle: {\r
          color: axisLabelColor\r
        },\r
        splitLine: {\r
          lineStyle: {\r
            type: 'dashed',\r
            opacity: 0.2\r
          }\r
        }\r
      }\r
    }),\r
    axisLabel: {\r
      color: axisLabelColor ?? '#333'\r
    },\r
    series: []\r
  }\r
\r
  if (colorLinear) {\r
    opt.color = color.map((c, i) => ({\r
      type: 'linear',\r
      x: 0,\r
      y: 0,\r
      x2: 0,\r
      y2: 1,\r
      colorStops: [\r
        {\r
          offset: 0,\r
          color: c\r
        },\r
        {\r
          offset: 1,\r
          color: color[i + 1] ?? 'transparent'\r
        }\r
      ],\r
      global: false\r
    }))\r
  }\r
\r
  opt.series = series.map((seriesItem) => {\r
    const { name, type, yAxisIndex } = seriesItem\r
\r
    let item = {}\r
    // 自定义和常规系列共用需指定encode，不然data会出bug\r
    if (type == 'cube') {\r
      item = {\r
        type: 'custom',\r
        yAxisIndex,\r
        name,\r
        tooltip: {\r
          formatter: (params) => {\r
            const { data, seriesName, name, color } = params\r
\r
            return \`\r
              <small style="color: \${color}">\${seriesName}</small>\r
              <br/>\r
              <span>\${name}</span>\r
              &nbsp;&nbsp;&nbsp;\r
              <b>\${data[seriesName]}</b>\r
            \`\r
          }\r
        },\r
        renderItem: (params, api) => cubeRenderItem(params, api, barWidth ?? 18)\r
      }\r
    } else if (type == 'cylinder') {\r
      item = {\r
        type: 'custom',\r
        yAxisIndex,\r
        name,\r
        renderItem: (params, api) => cylinderRenderItem(params, api, barWidth ?? 18)\r
      }\r
    } else if (type == 'bar') {\r
      item = {\r
        type: 'bar',\r
        yAxisIndex,\r
        name,\r
        barWidth,\r
        encode: {\r
          x: 'product',\r
          y: name\r
        }\r
      }\r
    } else if (type == 'line') {\r
      item = {\r
        type: 'line',\r
        yAxisIndex,\r
        name,\r
        smooth,\r
        encode: {\r
          x: 'product',\r
          y: name\r
        }\r
      }\r
    }\r
\r
    return item\r
  })\r
\r
  return opt\r
}\r
\r
watch(\r
  props,\r
  () => {\r
    if (chartInstance) {\r
      chartInstance.clear()\r
      chartInstance.setOption(generateOption(), { notMerge: true })\r
    }\r
  },\r
  { deep: true }\r
)\r
// 轮流选择\r
let currentIndex = -1\r
let intervalAction = null\r
let actionDelay = 1000\r
let actionable = ref(true)\r
\r
const action = function () {\r
  if (!actionable.value || !chartInstance) return\r
\r
  let dataLen = props.data.length\r
\r
  chartInstance.dispatchAction({\r
    type: 'downplay',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
\r
  const index = (currentIndex + 1) % dataLen\r
  currentIndex = Number.isNaN(index) ? -1 : index\r
\r
  chartInstance.dispatchAction({\r
    type: 'highlight',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
  chartInstance.dispatchAction({\r
    type: 'showTip',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
}\r
\r
watch(\r
  () => props.autoAction,\r
  (newVal) => {\r
    if (intervalAction) clearInterval(intervalAction)\r
\r
    if (newVal) intervalAction = setInterval(action, actionDelay)\r
  },\r
  {\r
    immediate: true\r
  }\r
)\r
// 初始化\r
const initChart = () => {\r
  nextTick(() => {\r
    chartInstance = echarts.init(chartDomRef.value)\r
    chartInstance.setOption(generateOption())\r
  })\r
}\r
\r
let resizeObserver\r
const chartResizeObserver = () => {\r
  resizeObserver = new window.ResizeObserver((entries) => chartInstance?.resize())\r
  resizeObserver.observe(chartDomRef.value)\r
}\r
\r
onMounted(() => {\r
  initChart()\r
  chartResizeObserver()\r
})\r
\r
onUnmounted(() => {\r
  chartInstance.dispose()\r
  chartInstance = null\r
  if (resizeObserver) resizeObserver.disconnect()\r
})\r
<\/script>\r
\r
<template>\r
  <div\r
    ref="chartDomRef"\r
    :style="{ width: '100%', height: '100%' }"\r
    @mouseover="actionable = false"\r
    @mouseout="actionable = true"\r
  ></div>\r
</template>\r
\r
<style scoped></style>\r
`,barRenderItemRaw=`import * as echarts from 'echarts'\r
\r
export function cubeRenderItem(params, api, barWidth) {\r
  const { seriesIndex } = params\r
  const currentSeriesIndices = api.currentSeriesIndices()\r
  const barLayout = api.barLayout({\r
    barGap: '30%',\r
    barCategoryGap: '20%',\r
    count: currentSeriesIndices.length\r
  })\r
  // 基础坐标\r
  const basicsCoord = api.coord([api.value(0), api.value(seriesIndex + 1)])\r
  // 顶部基础y轴\r
  const topBasicsYAxis = basicsCoord[1]\r
  // 基础x轴 + 偏移\r
  const basicsXAxis = basicsCoord[0] + (barLayout[seriesIndex]?.offsetCenter ?? 0)\r
  // 底部基础y轴\r
  const bottomYAxis = api.coord([api.value(0), 0])[1]\r
\r
  // 绘制柱状体三个面的图形并注册\r
  const leftShape = echarts.graphic.extendShape({\r
    buildPath(ctx, shape) {\r
      const { topBasicsYAxis, bottomYAxis, basicsXAxis } = shape\r
      // 侧面宽度\r
      const WIDTH = barWidth\r
      // 斜角高度\r
      const OBLIQUE_ANGLE_HEIGHT = barWidth / 2 - 1\r
      const p1 = [basicsXAxis - WIDTH, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 左上角坐标\r
      const p2 = [basicsXAxis - WIDTH, bottomYAxis + OBLIQUE_ANGLE_HEIGHT] // 左下角坐标\r
      const p3 = [basicsXAxis, bottomYAxis + OBLIQUE_ANGLE_HEIGHT] // 右下角坐标\r
      const p4 = [basicsXAxis, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 右上角坐标\r
      ctx.moveTo(p1[0], p1[1])\r
      ctx.lineTo(p2[0], p2[1])\r
      ctx.lineTo(p3[0], p3[1])\r
      ctx.lineTo(p4[0], p4[1])\r
    }\r
  })\r
  const rightShape = echarts.graphic.extendShape({\r
    buildPath(ctx, shape) {\r
      const { topBasicsYAxis, bottomYAxis, basicsXAxis } = shape\r
      // 侧面宽度\r
      const WIDTH = barWidth / 2\r
      // 斜角高度\r
      const OBLIQUE_ANGLE_HEIGHT = barWidth / 2 - 1\r
      const p1 = [basicsXAxis, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 左上角坐标\r
      const p2 = [basicsXAxis, bottomYAxis + OBLIQUE_ANGLE_HEIGHT] // 左下角坐标\r
      const p3 = [basicsXAxis + WIDTH, bottomYAxis] // 右下角坐标\r
      const p4 = [basicsXAxis + WIDTH, topBasicsYAxis] // 右上角坐标\r
      ctx.moveTo(p1[0], p1[1])\r
      ctx.lineTo(p2[0], p2[1])\r
      ctx.lineTo(p3[0], p3[1])\r
      ctx.lineTo(p4[0], p4[1])\r
    }\r
  })\r
  const topShape = echarts.graphic.extendShape({\r
    buildPath(ctx, shape) {\r
      const { topBasicsYAxis, basicsXAxis } = shape\r
      // 侧面宽度\r
      const LEFT_WIDTH = barWidth\r
      const RIGHT_WIDTH = barWidth / 2\r
      // 斜角高度\r
      const OBLIQUE_ANGLE_HEIGHT = barWidth / 2 - 1\r
      const p1 = [basicsXAxis, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 右下角坐标\r
      const p2 = [basicsXAxis + RIGHT_WIDTH, topBasicsYAxis] // 右上角坐标\r
      const p3 = [basicsXAxis + RIGHT_WIDTH - LEFT_WIDTH, topBasicsYAxis] // 左上角坐标\r
      const p4 = [basicsXAxis - LEFT_WIDTH, topBasicsYAxis + OBLIQUE_ANGLE_HEIGHT] // 左下角坐标\r
      ctx.moveTo(p1[0], p1[1])\r
      ctx.lineTo(p2[0], p2[1])\r
      ctx.lineTo(p3[0], p3[1])\r
      ctx.lineTo(p4[0], p4[1])\r
    }\r
  })\r
  echarts.graphic.registerShape('leftShape', leftShape)\r
  echarts.graphic.registerShape('rightShape', rightShape)\r
  echarts.graphic.registerShape('topShape', topShape)\r
\r
  let color = api.visual('color')\r
  let colorLinear = false\r
  let colorEnd = color\r
\r
  if (color?.type == 'linear') {\r
    colorLinear = true\r
    colorEnd = color.colorStops[1].color\r
    color = color.colorStops[0].color\r
  }\r
\r
  return {\r
    type: 'group',\r
    children: [\r
      {\r
        type: 'leftShape',\r
        shape: {\r
          topBasicsYAxis,\r
          basicsXAxis,\r
          bottomYAxis\r
        },\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color\r
              },\r
              {\r
                offset: 1,\r
                color: colorLinear ? colorEnd : color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 2)\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      },\r
      {\r
        type: 'rightShape',\r
        shape: {\r
          topBasicsYAxis,\r
          basicsXAxis,\r
          bottomYAxis\r
        },\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 1.5)\r
              },\r
              {\r
                offset: 1,\r
                color: colorLinear ? colorEnd : color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 2)\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      },\r
      {\r
        type: 'topShape',\r
        shape: {\r
          topBasicsYAxis,\r
          basicsXAxis,\r
          bottomYAxis\r
        },\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color\r
              },\r
              {\r
                offset: 1,\r
                color: color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 1.2)\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      }\r
    ]\r
  }\r
}\r
\r
export function cylinderRenderItem(params, api, barWidth) {\r
  const { seriesIndex } = params\r
  const currentSeriesIndices = api.currentSeriesIndices()\r
  const barLayout = api.barLayout({\r
    barGap: '30%',\r
    barCategoryGap: '20%',\r
    count: currentSeriesIndices.length\r
  })\r
  const yValue = api.value(seriesIndex + 1)\r
  // 基础坐标\r
  const basicsCoord = api.coord([api.value(0), yValue])\r
  // 顶部基础y轴\r
  const topBasicsYAxis = basicsCoord[1]\r
  // 基础x轴 + 偏移\r
  const basicsXAxis = basicsCoord[0] + (barLayout[seriesIndex]?.offsetCenter ?? 0)\r
  // 底部基础y轴\r
  const bottomYAxis = api.coord([api.value(0), 0])[1]\r
\r
  let color = api.visual('color')\r
  let colorLinear = false\r
  let colorEnd = color\r
\r
  if (color?.type == 'linear') {\r
    colorLinear = true\r
    colorEnd = color.colorStops[1].color\r
    color = color.colorStops[0].color\r
  }\r
\r
  return {\r
    type: 'group',\r
    children: [\r
      {\r
        type: 'circle',\r
        shape: {\r
          cx: basicsXAxis,\r
          cy: bottomYAxis,\r
          r: barWidth / 2\r
        },\r
        scaleY: 0.5,\r
        originX: basicsXAxis,\r
        originY: bottomYAxis,\r
        style: {\r
          fill: colorLinear ? colorEnd : color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 2)\r
        }\r
      },\r
      {\r
        type: 'rect',\r
        shape: {\r
          x: basicsXAxis - barWidth / 2,\r
          y: topBasicsYAxis,\r
          width: barWidth,\r
          height: api.size([0, yValue])[1]\r
        },\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 1.5)\r
              },\r
              {\r
                offset: 1,\r
                color: colorLinear ? colorEnd : color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 2)\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      },\r
      {\r
        type: 'circle',\r
        shape: {\r
          cx: basicsXAxis,\r
          cy: topBasicsYAxis,\r
          r: barWidth / 2\r
        },\r
        scaleY: 0.5,\r
        originX: basicsXAxis,\r
        originY: topBasicsYAxis,\r
        style: {\r
          fill: {\r
            type: 'linear',\r
            x: 0,\r
            y: 0,\r
            x2: 0,\r
            y2: 1,\r
            colorStops: [\r
              {\r
                offset: 0,\r
                color: color.replaceAll(/(\\d+)(?=%)/g, (arg, p1) => p1 / 1.5)\r
              },\r
              {\r
                offset: 1,\r
                color: color\r
              }\r
            ],\r
            global: false\r
          }\r
        }\r
      }\r
    ]\r
  }\r
}\r
`;class NCartesianChart extends ItemNode{constructor(node){super(node);Zp(this,"isNCartesianChart",!0);Zp(this,"isChartNode",!0);if(this.watchStateOptions.push({value:"initData",label:"刷新数据"}),!node){this.path="./components/NCartesianChart/NCartesianChart.tsx",this.name="直角坐标图";const r=this.props.style;this.props.style={...r,width:"300px",height:"200px",flexShrink:"0"},this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [{
    product: String,
    default1: Number, 
    default2: Number
  }]
}`,this.props.autoAction=!1,this.props.pOption={color:["hsla(210, 100%, 67%, 1)","hsla(30, 100%, 67%, 1)"],colorLinear:!1,barWidth:null,smooth:!1,axisLabelColor:"#333",legendTextStyleColor:"#333",yAxis:[{name:""}],datasetSourceProduct:"product",series:[{name:"default1",type:"bar",yAxisIndex:0},{name:"default2",type:"line",yAxisIndex:0}]}}const pComponent=this.component;this.component=markRaw(defineComponent(props=>{const data=ref([{product:"defaultA",default1:2,default2:4},{product:"defaultB",default1:5,default2:2},{product:"defaultC",default1:4,default2:3},{product:"defaultD",default1:6,default2:1}]),initData=async()=>{this.props.dataUrl&&(data.value=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(data.value=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(_sfc_main$a,{pOption:this.props.pOption,data:data.value,autoAction:this.props.autoAction},null)]})},{name:"NCartesianChart"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.35, 0.3)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>{const r=ref(),a=ref(!1),s=ref();return()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":o=>this.props.dataUrl=o||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":o=>this.props.dataFn=o||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("x坐标轴字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.datasetSourceProduct,"onUpdate:modelValue":o=>this.props.pOption.datasetSourceProduct=o||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("y坐标轴名")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.pOption.yAxis.map((o,u)=>createVNode$1(ElTag,{key:u,closable:this.props.pOption.yAxis.length!==1,type:"primary",size:"small",onClose:()=>this.props.pOption.yAxis.splice(u,1)},{default:()=>createVNode$1("span",{style:{flex:"1",display:"flex",justifyContent:"space-between"}},[createVNode$1("span",null,[createTextVNode("索引："),u,createTextVNode("，名："),o.name]),createVNode$1("span",null,[createVNode$1(ElPopover,{width:200,trigger:"click",teleported:!1,placement:"top"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-primary)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>{const c=ref(o.name);return createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"60px"},{default:()=>[createVNode$1(ElFormItem,{label:"坐标轴名"},{default:()=>[createVNode$1(ElInput,{modelValue:c.value,"onUpdate:modelValue":p=>c.value=p,size:"small",onChange:p=>o.name=p},null)]})]})])}})])])})),a.value?createVNode$1(ElInput,{ref:r,modelValue:s.value,"onUpdate:modelValue":o=>s.value=o,size:"small",style:{width:"80px"},onBlur:()=>{this.props.pOption.yAxis.push({name:s.value}),s.value="",a.value=!1}},null):createVNode$1(ElButton,{onClick:()=>{a.value=!0,nextTick(()=>{r.value.input.focus()})},type:"warning",size:"small",circle:!0,icon:plus$1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("系列名字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{const o={name:"defaultName",type:"bar",yAxisIndex:0};this.props.pOption.series.push(o)}},{default:()=>[createTextVNode("+ 添加系列")]}),createVNode$1("br",null,null),this.props.pOption.series.map((o,u)=>createVNode$1(ElTag,{key:o.name,closable:!0,type:"primary",onClose:()=>this.props.pOption.series.splice(u,1)},{default:()=>createVNode$1("span",{style:{flex:"1",display:"flex",justifyContent:"space-between"}},[createVNode$1("span",null,[o.name]),createVNode$1("span",null,[createVNode$1(ElPopover,{width:200,trigger:"click",teleported:!1,placement:"top"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-primary)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>{const c=ref(o.name);return createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"60px"},{default:()=>[createVNode$1(ElFormItem,{label:"系列名"},{default:()=>[createVNode$1(ElInput,{modelValue:c.value,"onUpdate:modelValue":p=>c.value=p,size:"small",onChange:p=>o.name=p},null)]}),createVNode$1(ElFormItem,{label:"y轴索引"},{default:()=>[createVNode$1(ElInputNumber,{modelValue:o.yAxisIndex,"onUpdate:modelValue":p=>o.yAxisIndex=p,min:0,max:this.props.pOption.yAxis.length-1,size:"small"},null)]}),createVNode$1(ElFormItem,{label:"类型"},{default:()=>[createVNode$1(ElRadioGroup,{modelValue:o.type,"onUpdate:modelValue":p=>o.type=p,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"line",label:"折线",size:"small"},null),createVNode$1(ElRadioButton,{value:"bar",label:"柱状",size:"small"},null),createVNode$1(ElRadioButton,{value:"cube",label:"立方",size:"small"},null),createVNode$1(ElRadioButton,{value:"cylinder",label:"圆柱",size:"small"},null)]})]})]})])}})])])}))])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("柱条宽度")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.pOption.barWidth,"onUpdate:modelValue":o=>this.props.pOption.barWidth=o,min:1,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("平滑")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.smooth,"onUpdate:modelValue":o=>this.props.pOption.smooth=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("坐标轴字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.pOption.axisLabelColor,"onUpdate:modelValue":o=>this.props.pOption.axisLabelColor=o||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("图例字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.pOption.legendTextStyleColor,"onUpdate:modelValue":o=>this.props.pOption.legendTextStyleColor=o||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("调色盘")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.pOption.color.map((o,u)=>createVNode$1(ElColorPicker,{modelValue:this.props.pOption.color[u],"onUpdate:modelValue":c=>this.props.pOption.color[u]=c||"","color-format":"hsl","show-alpha":!0,size:"small",teleported:!1},null)),createVNode$1(ElButton,{type:"primary",icon:plus$1,circle:!0,onClick:()=>this.props.pOption.color.push("#5af"),size:"small"},null),createVNode$1(ElButton,{type:"danger",icon:minus$1,circle:!0,onClick:()=>this.props.pOption.color.pop(),size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("线性渐变"),createVNode$1(_sfc_main$d,{content:"索引位置调色盘为开始颜色，索引+1调色盘为结束颜色"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.colorLinear,"onUpdate:modelValue":o=>this.props.pOption.colorLinear=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("轮流选择")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.autoAction,"onUpdate:modelValue":o=>this.props.autoAction=o,size:"small"},null)])])]})}))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_pOption`,c=`${a}_${s}_data`,p=`${a}_${s}_initData`,d=JSON.stringify(this.props.pOption);return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"./imports/CartesianChart.vue":{default:"CartesianChart"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"CartesianChart.vue":CartesianChartRaw,"barRenderItem.js":barRenderItemRaw,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref(${d})
const ${c} = ref([])
const ${p} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${p}()
${this.props.watchState.length>0?`
${this.props.watchState.map(_=>{if(_.type=="initData")return`watch(() => state.${_.stateProperty}, ${p})`}).join(`
`)}
    `:""}
    `,r.template=r.template.replace("<slot></slot>",`<CartesianChart :pOption="${u}" :data="${c}" :autoAction="${this.props.autoAction}"></CartesianChart>`),r}}function _isSlot$5(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!isVNode(n)}class NCheckbox extends ItemNode{constructor(node){super(node);Zp(this,"isNCheckbox",!0);Zp(this,"isFormNode",!0);this.watchStateOptions.push({value:"initData",label:"刷新数据"}),node||(this.path="./components/NCheckbox/NCheckbox.tsx",this.name="多选框",this.props.field=`${NCheckbox.name.replace(/^N(\w)/,(r,a)=>a.toLowerCase())}_${this.uuid.split("-").at(0)}`,this.props.value=[],this.props.options=[{id:Math.random(),label:"默认选项1",value:1},{id:Math.random(),label:"默认选项2",value:2}],this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [
    {
      id: String,
      label: String,
      value: String
    }
  ]
}`,this.props.label="",this.props.ruleMessage="请正确输入",this.props.ruleType="none",this.props.changeFn=`function (value) {
  value
}`);const rulesOptions=reactive([{label:"无验证",value:"none"},{label:"默认验证",value:"default"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const rule=computed(()=>generateRule(this.props.ruleType,this.props.ruleMessage)),initData=async()=>{this.props.dataUrl&&(this.props.options=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(this.props.options=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0});const onChange=value=>{eval(`(${this.props.changeFn})`)(value)};return onChange(this.props.value),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>{let r;return createVNode$1(pComponent,null,{default:()=>[createVNode$1(ElFormItem,{label:this.props.label,prop:this.props.field,rules:rule.value},{default:()=>[createVNode$1(ElCheckboxGroup,{modelValue:this.props.value,"onUpdate:modelValue":a=>this.props.value=a,onChange},_isSlot$5(r=this.props.options.map(a=>createVNode$1(ElCheckbox,{key:a.id,label:a.label,value:a.value},null)))?r:{default:()=>[r]})]})]})}},{name:"NCheckbox"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.7)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.field,"onUpdate:modelValue":r=>this.props.field=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.label,"onUpdate:modelValue":r=>this.props.label=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{const r={id:Math.random(),label:"新选项",value:"值"};this.props.options.push(r)}},{default:()=>[createTextVNode("+ 添加选项")]}),createVNode$1(ElTree,{data:this.props.options,"node-key":"id","default-expand-all":!0,"expand-on-click-node":!1},{default:({node:r,data:a})=>createVNode$1("span",{style:{flex:"1",display:"flex",justifyContent:"space-between"}},[createVNode$1("span",null,[a.label]),createVNode$1("span",null,[createVNode$1(ElPopover,{width:180,trigger:"click",teleported:!1,placement:"left"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-primary)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"50px"},{default:()=>[createVNode$1(ElFormItem,{label:"标签"},{default:()=>[createVNode$1(ElInput,{modelValue:a.label,"onUpdate:modelValue":s=>a.label=s},null)]}),createVNode$1(ElFormItem,{label:"值"},{default:()=>[createVNode$1(ElInput,{modelValue:a.value,"onUpdate:modelValue":s=>a.value=s},null)]})]})])}),h$1(ElIcon,{color:"var(--el-color-danger)",onClick:()=>{const s=r.parent,o=s.data.children||s.data,u=o.findIndex(c=>c.value===a.value);o.splice(u,1)}},{default:()=>createVNode$1(_delete,null,null)})])])})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":r=>this.props.dataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证规则")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.ruleType,"onUpdate:modelValue":r=>this.props.ruleType=r,size:"small",teleported:!1},{default:()=>rulesOptions.map(r=>createVNode$1(ElOption,{key:r.value,label:r.label,value:r.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证消息")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.ruleMessage,"onUpdate:modelValue":r=>this.props.ruleMessage=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值变化处理函数"),createVNode$1(_sfc_main$d,{content:"值变化后调用；可访问全局状态变量state，value：组件的值"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.changeFn,"onUpdate:modelValue":r=>this.props.changeFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_value`,c=`${a}_${s}_options`,p=`${a}_${s}_rule`,d=`${a}_${s}_initData`,_=`${a}_${s}_onChange`,ja=JSON.stringify(this.props.options),Ja=JSON.stringify(generateRule(this.props.ruleType,this.props.ruleMessage));return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"element-plus":{ElCheckboxGroup:"ElCheckboxGroup",ElRadioGroup:"ElRadioGroup",ElCheckbox:"ElCheckbox"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref([])
const ${c} = ref(${ja})
const ${p} = ref(${Ja})

${this.props.dataUrl?`const ${d} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${d}()`:""}
${this.props.watchState.length>0?`
${this.props.watchState.map(ec=>{if(ec.type=="initData")return`watch(() => state.${ec.stateProperty}, ${d})`}).join(`
`)}
    `:""}
const ${_} = (value) => {
  (${this.props.changeFn})(value)
}
${_}(${typeof this.props.value=="string"?`'${this.props.value}'`:this.props.value})
      `,r.template=r.template.replace("<slot></slot>",`
  <ElFormItem label="${this.props.label}" prop="${this.props.field}" :rules="${p}">
    <ElCheckboxGroup
      v-model="${u}"
      @change="${_}"
    >
      <ElCheckbox
        v-for="option of ${c}"
        :key="option.id"
        :label="option.label"
        :value="option.value"
      ></ElCheckbox>
    </ElCheckboxGroup>
  </ElFormItem>
      `),r}}class NDatePicker extends ItemNode{constructor(node){super(node);Zp(this,"isNDatePicker",!0);Zp(this,"isFormNode",!0);node||(this.path="./components/NDatePicker/NDatePicker.tsx",this.name="日期时间选择器",this.props.field=`${NDatePicker.name.replace(/^N(\w)/,(r,a)=>a.toLowerCase())}_${this.uuid.split("-").at(0)}`,this.props.type="datetime",this.props.value="",this.props.label="",this.props.placeholder="请选择",this.props.ruleMessage="请正确选择",this.props.ruleType="none",this.props.changeFn=`function (value) {
  value
}`);const rulesOptions=reactive([{label:"无验证",value:"none"},{label:"默认验证",value:"default"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const rule=computed(()=>generateRule(this.props.ruleType,this.props.ruleMessage)),onChange=value=>{eval(`(${this.props.changeFn})`)(value)};return onChange(this.props.value),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(ElFormItem,{label:this.props.label,prop:this.props.field,rules:rule.value},{default:()=>h$1(ElDatePicker,{type:this.props.type,placeholder:this.props.placeholder,teleported:!1,modelValue:this.props.value,"onUpdate:modelValue":r=>this.props.value=r,onChange})})]})},{name:"NDatePicker"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.4)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.field,"onUpdate:modelValue":r=>this.props.field=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("类型")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{size:"small",modelValue:this.props.type,"onUpdate:modelValue":r=>{this.props.value=r==="datetimerange"||r==="daterange"?[]:"",this.props.type=r}},{default:()=>[createVNode$1(ElRadioButton,{value:"year",label:"年"},null),createVNode$1(ElRadioButton,{value:"month",label:"月"},null),createVNode$1(ElRadioButton,{value:"date",label:"日期"},null),createVNode$1(ElRadioButton,{value:"datetime",label:"日期时间"},null),createVNode$1(ElRadioButton,{value:"week",label:"周"},null),createVNode$1(ElRadioButton,{value:"datetimerange",label:"日期时间范围"},null),createVNode$1(ElRadioButton,{value:"daterange",label:"日期范围"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.label,"onUpdate:modelValue":r=>this.props.label=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("占位文本")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.placeholder,"onUpdate:modelValue":r=>this.props.placeholder=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证规则")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.ruleType,"onUpdate:modelValue":r=>this.props.ruleType=r,size:"small",teleported:!1},{default:()=>rulesOptions.map(r=>createVNode$1(ElOption,{key:r.value,label:r.label,value:r.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证消息")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.ruleMessage,"onUpdate:modelValue":r=>this.props.ruleMessage=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值变化处理函数"),createVNode$1(_sfc_main$d,{content:"值变化后调用；可访问全局状态变量state，value：组件的值"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.changeFn,"onUpdate:modelValue":r=>this.props.changeFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_value`,c=`${a}_${s}_rule`,p=`${a}_${s}_onChange`,d=JSON.stringify(generateRule(this.props.ruleType,this.props.ruleMessage));return r.imports={...r.imports,vue:{ref:"ref"},"element-plus":{ElFormItem:"ElFormItem",ElDatePicker:"ElDatePicker"}},r.script=`
${r.script}
const ${u} = ref()
const ${c} = ref(${d})
const ${p} = (value) => {
  (${this.props.changeFn})(value)
}
${p}(${typeof this.props.value=="string"?`'${this.props.value}'`:this.props.value})
      `,r.template=r.template.replace("<slot></slot>",`
  <ElFormItem label="${this.props.label}" prop="${this.props.field}" :rules="${c}">
    <ElDatePicker
      type="${this.props.type}"
      :teleported="false"
      placeholder="${this.props.placeholder}"
      v-model="${u}"
      @change="${p}"
    ></ElDatePicker>
  </ElFormItem>
      `),r}}class NDivider extends ItemNode{constructor(a){super(a);Zp(this,"isNDivider",!0);Zp(this,"isDataNode",!0);if(!a){this.path="./components/NDivider/NDivider.tsx",this.name="分割线";const p=this.props.style;this.props.style={...p,width:"100%"},this.props.direction="horizontal",this.props.borderColor="#dcdfe6",this.props.borderWidth="1px"}const s=()=>{this.props.style.width=this.props.direction=="horizontal"?"100%":"0px",this.props.style.height=this.props.direction=="horizontal"?"0px":"100%"},o=this.component;this.component=markRaw(defineComponent(p=>()=>createVNode$1(o,null,{default:()=>[createVNode$1(ElDivider,{direction:this.props.direction,style:{"--el-border-color":this.props.borderColor,borderWidth:this.props.borderWidth,width:this.props.style.width,height:this.props.style.height,margin:"0px"}},null)]}),{name:"NDivider"}));const u=this.view;this.view=markRaw(defineComponent(p=>()=>createVNode$1(u,null,{default:()=>[createVNode$1(this.component,{style:{width:"100px"}},null)]})));const c=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(c,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("方向")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.direction,"onUpdate:modelValue":p=>this.props.direction=p,onChange:s},{default:()=>[createVNode$1(ElRadioButton,{value:"horizontal",label:"横向",size:"small"},null),createVNode$1(ElRadioButton,{value:"vertical",label:"纵向",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("线宽")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.borderWidth,"onUpdate:modelValue":p=>this.props.borderWidth=p,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("边框色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.borderColor,"onUpdate:modelValue":p=>this.props.borderColor=p||"","show-alpha":!0,size:"small",teleported:!1},null)])])]})))}toVue(){const a=super.toVue();return a.imports={...a.imports,"element-plus":{ElDivider:"ElDivider"}},a.template=a.template.replace("<slot></slot>",`
  <ElDivider
    direction="${this.props.direction}"
    style="--el-border-color: ${this.props.borderColor??"unset"}; border-width: ${this.props.borderWidth??"unset"}; width: ${this.props.style.width??"unset"}; height: ${this.props.style.height??"unset"}; margin: 0px;"
  >
  </ElDivider>
      `),a}}const _hoisted_1$3={ref:"elRef",class:"border",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2=["stroke"],_sfc_main$9=defineComponent({__name:"Border",props:{color:{type:String,default:"#07f"}},setup(n){return(r,a)=>(openBlock(),createElementBlock("svg",_hoisted_1$3,[createBaseVNode("rect",{x:"1",y:"1",style:{width:"calc(100% - 2px)",height:"calc(100% - 2px)"},fill:"none","stroke-width":"1",stroke:n.color},null,8,_hoisted_2$2)],512))}}),__vite_glob_0_0=_export_sfc$1(_sfc_main$9,[["__scopeId","data-v-e3e3ff64"]]),_withScopeId$1=n=>(pushScopeId("data-v-bcbceee0"),n=n(),popScopeId(),n),_hoisted_1$2=["id"],_hoisted_2$1=_withScopeId$1(()=>createBaseVNode("feComponentTransfer",{in:"SourceAlpha"},[createBaseVNode("feFuncA",{type:"table",tableValues:"1 0"})],-1)),_hoisted_3$1=_withScopeId$1(()=>createBaseVNode("feGaussianBlur",{stdDeviation:"8"},null,-1)),_hoisted_4$1=_withScopeId$1(()=>createBaseVNode("feOffset",{dx:"0",dy:"0",result:"offsetblur"},null,-1)),_hoisted_5$1=["flood-color"],_hoisted_6$1=_withScopeId$1(()=>createBaseVNode("feComposite",{in2:"offsetblur",operator:"in"},null,-1)),_hoisted_7$1=_withScopeId$1(()=>createBaseVNode("feComposite",{in2:"SourceAlpha",operator:"in"},null,-1)),_hoisted_8$1=["stroke"],_hoisted_9$1=["d","stroke"],_hoisted_10$1=["d","fill"],_hoisted_11$1=_withScopeId$1(()=>createBaseVNode("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"1s",repeatCount:"indefinite"},null,-1)),_hoisted_12$1=[_hoisted_11$1],_hoisted_13$1=["d","fill"],_hoisted_14$1=_withScopeId$1(()=>createBaseVNode("animate",{attributeName:"opacity",begin:"0.5s",values:"0.5;1;0.5",dur:"1s",repeatCount:"indefinite"},null,-1)),_hoisted_15$1=[_hoisted_14$1],_hoisted_16$1=["filter","d"],_sfc_main$8=defineComponent({__name:"Border2",props:{color:{type:String,default:"#07f"}},setup(n){const r=Math.random().toString().replace(".","");let a=ref(0),s=ref(0),o=ref(0),u=ref(0),c=ref(0),p=ref(0),d,_=ref();const ja=()=>{if(_.value){let Ja=getComputedStyle(_.value);a.value=parseInt(Ja.getPropertyValue("width")),s.value=parseInt(Ja.getPropertyValue("height")),o.value=Math.max(a.value-50-10-4,0),u.value=Math.max(s.value-10-20-4,0),c.value=Math.max(a.value-10-50-10-4,0),p.value=Math.max(s.value-20-10-4,0)}};return onMounted(()=>{d=new window.ResizeObserver(Ja=>ja()),d.observe(_.value)}),(Ja,ec)=>(openBlock(),createElementBlock("svg",{ref_key:"elRef",ref:_,class:"border",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("defs",null,[createBaseVNode("filter",{id:`f1-${unref(r)}`,x:"-10%",y:"-10%",width:"120%",height:"120%"},[_hoisted_2$1,_hoisted_3$1,_hoisted_4$1,createBaseVNode("feFlood",{"flood-color":n.color,result:"color"},null,8,_hoisted_5$1),_hoisted_6$1,_hoisted_7$1],8,_hoisted_1$2)]),createBaseVNode("path",{d:"M1 20 V10 L10 1 H50",fill:"none","stroke-width":"2",stroke:n.color},null,8,_hoisted_8$1),createBaseVNode("path",{d:`M${unref(a)-1} ${unref(s)-20} v10 l-10 10 h-50`,fill:"none","stroke-width":"2",stroke:n.color},null,8,_hoisted_9$1),createBaseVNode("path",{d:`M${unref(a)} 0 v10 l-10 -10`,fill:n.color,stroke:"none"},_hoisted_12$1,8,_hoisted_10$1),createBaseVNode("path",{d:`M0 ${unref(s)} v-10 l10 10`,fill:n.color,stroke:"none"},_hoisted_15$1,8,_hoisted_13$1),createBaseVNode("path",{fill:"#000",filter:`url(#f1-${unref(r)})`,d:`M50 1 h${unref(o)} L${unref(a)-1} 14 v${unref(u)} v10 l-10 10 h-50 h-${unref(c)} l-12 -12 v-${unref(p)} v-10 l10 -10 z`},null,8,_hoisted_16$1)],512))}}),__vite_glob_0_1=_export_sfc$1(_sfc_main$8,[["__scopeId","data-v-bcbceee0"]]),_withScopeId=n=>(pushScopeId("data-v-947e8f93"),n=n(),popScopeId(),n),_hoisted_1$1=["id","d"],_hoisted_2=["id"],_hoisted_3=_withScopeId(()=>createBaseVNode("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"1"},null,-1)),_hoisted_4=_withScopeId(()=>createBaseVNode("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"},null,-1)),_hoisted_5=[_hoisted_3,_hoisted_4],_hoisted_6=["id"],_hoisted_7=["fill"],_hoisted_8=["path"],_hoisted_9=["id"],_hoisted_10=_withScopeId(()=>createBaseVNode("stop",{offset:"0","stop-color":"white","stop-opacity":"0.5"},null,-1)),_hoisted_11=_withScopeId(()=>createBaseVNode("stop",{offset:"0.5","stop-color":"white","stop-opacity":"1"},null,-1)),_hoisted_12=_withScopeId(()=>createBaseVNode("stop",{offset:"1","stop-color":"white","stop-opacity":"0.5"},null,-1)),_hoisted_13=[_hoisted_10,_hoisted_11,_hoisted_12],_hoisted_14=["id"],_hoisted_15=["width","height","fill"],_hoisted_16=["id"],_hoisted_17=_withScopeId(()=>createBaseVNode("feDropShadow",{dx:"0",dy:"0",stdDeviation:"5","flood-color":"rgba(4, 175, 247, 0.5)"},null,-1)),_hoisted_18=[_hoisted_17],_hoisted_19=["id"],_hoisted_20=_withScopeId(()=>createBaseVNode("feDropShadow",{dx:"0",dy:"0",stdDeviation:"50","flood-color":"red"},null,-1)),_hoisted_21=[_hoisted_20],_hoisted_22=["id"],_hoisted_23=_withScopeId(()=>createBaseVNode("stop",{offset:"0","stop-color":"RGBA(0, 175, 246, 1)","stop-opacity":"0"},null,-1)),_hoisted_24=_withScopeId(()=>createBaseVNode("stop",{offset:"0.5","stop-color":"RGBA(0, 175, 246, 1)","stop-opacity":"1"},null,-1)),_hoisted_25=_withScopeId(()=>createBaseVNode("stop",{offset:"1","stop-color":"RGBA(0, 175, 246, 1)","stop-opacity":"0"},null,-1)),_hoisted_26=[_hoisted_23,_hoisted_24,_hoisted_25],_hoisted_27=["href","stroke","mask"],_hoisted_28=["href","mask"],_sfc_main$7=defineComponent({__name:"Border3",props:{color:{type:String,default:"#07f"}},setup(n){const r=Math.random().toString().replace(".","");let a=ref(0),s=ref(0),o,u=ref();const c=()=>{if(u.value){let p=getComputedStyle(u.value);a.value=parseInt(p.getPropertyValue("width")),s.value=parseInt(p.getPropertyValue("height"))}};return onMounted(()=>{o=new window.ResizeObserver(p=>c()),o.observe(u.value)}),(p,d)=>(openBlock(),createElementBlock("svg",{ref_key:"elRef",ref:u,class:"border",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("defs",null,[createBaseVNode("path",{id:`border-path-${unref(r)}`,fill:"transparent",d:`M0 0 h${unref(a)} v${unref(s)} h-${unref(a)} z`},null,8,_hoisted_1$1),createBaseVNode("radialGradient",{id:`border-gradient-${unref(r)}`,cx:"50%",cy:"50%",r:"50%"},_hoisted_5,8,_hoisted_2),createBaseVNode("mask",{id:`border-mask-${unref(r)}`},[createBaseVNode("circle",{cx:"0",cy:"0",r:"50",fill:`url(#border-gradient-${unref(r)})`},[createBaseVNode("animateMotion",{dur:"5s",repeatCount:"indefinite",path:`M0 0 h${unref(a)} v${unref(s)} h-${unref(a)} z`,rotate:"auto"},null,8,_hoisted_8)],8,_hoisted_7)],8,_hoisted_6),createBaseVNode("linearGradient",{id:`Gradient-${unref(r)}`},_hoisted_13,8,_hoisted_9),createBaseVNode("mask",{id:`Mask-${unref(r)}`},[createBaseVNode("rect",{x:"0",y:"0",width:unref(a),height:unref(s),fill:`url(#Gradient-${unref(r)})`},null,8,_hoisted_15)],8,_hoisted_14),createBaseVNode("filter",{id:`shadow-${unref(r)}`},_hoisted_18,8,_hoisted_16),createBaseVNode("filter",{id:`shadow-2-${unref(r)}`},_hoisted_21,8,_hoisted_19),createBaseVNode("linearGradient",{id:`Gradient-2-${unref(r)}`},_hoisted_26,8,_hoisted_22)]),createBaseVNode("use",{"stroke-width":"2",href:`#border-path-${unref(r)}`,stroke:n.color,mask:`url(#Mask-${unref(r)})`,style:normalizeStyle$1(`filter: url(#shadow-${unref(r)})`)},null,12,_hoisted_27),createBaseVNode("use",{"stroke-width":"2",href:`#border-path-${unref(r)}`,mask:`url(#border-mask-${unref(r)})`,stroke:"#fff",style:normalizeStyle$1(`filter: url(#shadow-2-${unref(r)})`)},null,12,_hoisted_28)],512))}}),__vite_glob_0_2=_export_sfc$1(_sfc_main$7,[["__scopeId","data-v-947e8f93"]]),__vite_glob_1_0=`<script setup lang="ts">\r
const props = defineProps({\r
  color: {\r
    type: String,\r
    default: '#07f'\r
  }\r
})\r
<\/script>\r
\r
<template>\r
  <svg ref="elRef" class="border" xmlns="http://www.w3.org/2000/svg">\r
    <!-- 宽度铺满显示有问题 -->\r
    <rect\r
      x="1"\r
      y="1"\r
      style="width: calc(100% - 2px); height: calc(100% - 2px)"\r
      fill="none"\r
      stroke-width="1"\r
      :stroke="color"\r
    ></rect>\r
  </svg>\r
</template>\r
\r
<style scoped>\r
.border {\r
  width: 100%;\r
  height: 100%;\r
  pointer-events: none;\r
  position: absolute;\r
  inset: 0;\r
  z-index: 0;\r
}\r
</style>\r
`,__vite_glob_1_1=`<script setup lang="ts">\r
import { onMounted, ref } from 'vue'\r
\r
const props = defineProps({\r
  color: {\r
    type: String,\r
    default: '#07f'\r
  }\r
})\r
\r
// 避免重复id造成渲染错误\r
const id = Math.random().toString().replace('.', '')\r
\r
let width = ref(0)\r
let height = ref(0)\r
let top = ref(0) // 可伸缩上部分\r
let right = ref(0) // 可伸缩右部分\r
let bottom = ref(0) // 可伸缩下部分\r
let left = ref(0) // 可伸缩左部分\r
\r
let resizeObserver\r
let elRef = ref()\r
\r
const resize = () => {\r
  if (elRef.value) {\r
    let style = getComputedStyle(elRef.value)\r
    width.value = parseInt(style.getPropertyValue('width'))\r
    height.value = parseInt(style.getPropertyValue('height'))\r
    top.value = Math.max(width.value - 50 - 10 - 4, 0)\r
    right.value = Math.max(height.value - 10 - 20 - 4, 0)\r
    bottom.value = Math.max(width.value - 10 - 50 - 10 - 4, 0)\r
    left.value = Math.max(height.value - 20 - 10 - 4, 0)\r
  }\r
}\r
\r
onMounted(() => {\r
  resizeObserver = new window.ResizeObserver((entries) => resize())\r
  resizeObserver.observe(elRef.value)\r
})\r
<\/script>\r
\r
<template>\r
  <svg ref="elRef" class="border" xmlns="http://www.w3.org/2000/svg">\r
    <defs>\r
      <filter :id="\`f1-\${id}\`" x="-10%" y="-10%" width="120%" height="120%">\r
        <feComponentTransfer in="SourceAlpha">\r
          <!-- tableValues透明度映射，反向 -->\r
          <feFuncA type="table" tableValues="1 0" />\r
        </feComponentTransfer>\r
        <feGaussianBlur stdDeviation="8" />\r
        <feOffset dx="0" dy="0" result="offsetblur" />\r
        <feFlood :flood-color="color" result="color" />\r
        <feComposite in2="offsetblur" operator="in" />\r
        <feComposite in2="SourceAlpha" operator="in" />\r
        <!-- <feMerge>\r
          <feMergeNode in="SourceGraphic" />\r
          <feMergeNode></feMergeNode>\r
        </feMerge> -->\r
      </filter>\r
    </defs>\r
    <path :d="\`M1 20 V10 L10 1 H50\`" fill="none" stroke-width="2" :stroke="color"></path>\r
    <path\r
      :d="\`M\${width - 1} \${height - 20} v10 l-10 10 h-50\`"\r
      fill="none"\r
      stroke-width="2"\r
      :stroke="color"\r
    ></path>\r
    <path :d="\`M\${width} 0 v10 l-10 -10\`" :fill="color" stroke="none">\r
      <animate\r
        attributeName="opacity"\r
        values="0.5;1;0.5"\r
        dur="1s"\r
        repeatCount="indefinite"\r
      ></animate>\r
    </path>\r
    <path :d="\`M0 \${height} v-10 l10 10\`" :fill="color" stroke="none">\r
      <animate\r
        attributeName="opacity"\r
        begin="0.5s"\r
        values="0.5;1;0.5"\r
        dur="1s"\r
        repeatCount="indefinite"\r
      ></animate>\r
    </path>\r
    <path\r
      fill="#000"\r
      :filter="\`url(#f1-\${id})\`"\r
      :d="\`M50 1 h\${top} L\${width - 1} 14 v\${right} v10 l-10 10 h-50 h-\${bottom} l-12 -12 v-\${left} v-10 l10 -10 z\`"\r
    ></path>\r
  </svg>\r
</template>\r
\r
<style scoped>\r
.border {\r
  pointer-events: none;\r
  width: 100%;\r
  height: 100%;\r
  position: absolute;\r
  inset: 0;\r
  z-index: 0;\r
}\r
</style>\r
`,__vite_glob_1_2=`<script setup lang="ts">\r
import { onMounted, ref } from 'vue'\r
\r
const props = defineProps({\r
  color: {\r
    type: String,\r
    default: '#07f'\r
  }\r
})\r
\r
const id = Math.random().toString().replace('.', '')\r
\r
let width = ref(0)\r
let height = ref(0)\r
\r
let resizeObserver\r
let elRef = ref()\r
\r
const resize = () => {\r
  if (elRef.value) {\r
    let style = getComputedStyle(elRef.value)\r
    width.value = parseInt(style.getPropertyValue('width'))\r
    height.value = parseInt(style.getPropertyValue('height'))\r
  }\r
}\r
\r
onMounted(() => {\r
  resizeObserver = new window.ResizeObserver((entries) => resize())\r
  resizeObserver.observe(elRef.value)\r
})\r
<\/script>\r
\r
<template>\r
  <svg ref="elRef" class="border" xmlns="http://www.w3.org/2000/svg">\r
    <defs>\r
      <path\r
        :id="\`border-path-\${id}\`"\r
        fill="transparent"\r
        :d="\`M0 0 h\${width} v\${height} h-\${width} z\`"\r
      ></path>\r
      <radialGradient :id="\`border-gradient-\${id}\`" cx="50%" cy="50%" r="50%">\r
        <stop offset="0%" stop-color="#fff" stop-opacity="1"></stop>\r
        <stop offset="100%" stop-color="#fff" stop-opacity="0"></stop>\r
      </radialGradient>\r
      <mask :id="\`border-mask-\${id}\`">\r
        <circle cx="0" cy="0" r="50" :fill="\`url(#border-gradient-\${id})\`">\r
          <animateMotion\r
            dur="5s"\r
            repeatCount="indefinite"\r
            :path="\`M0 0 h\${width} v\${height} h-\${width} z\`"\r
            rotate="auto"\r
          ></animateMotion>\r
        </circle>\r
      </mask>\r
      <linearGradient :id="\`Gradient-\${id}\`">\r
        <stop offset="0" stop-color="white" stop-opacity="0.5" />\r
        <stop offset="0.5" stop-color="white" stop-opacity="1" />\r
        <stop offset="1" stop-color="white" stop-opacity="0.5" />\r
      </linearGradient>\r
      <mask :id="\`Mask-\${id}\`">\r
        <rect x="0" y="0" :width="width" :height="height" :fill="\`url(#Gradient-\${id})\`" />\r
      </mask>\r
      <filter :id="\`shadow-\${id}\`">\r
        <feDropShadow dx="0" dy="0" stdDeviation="5" flood-color="rgba(4, 175, 247, 0.5)" />\r
      </filter>\r
      <filter :id="\`shadow-2-\${id}\`">\r
        <feDropShadow dx="0" dy="0" stdDeviation="50" flood-color="red" />\r
      </filter>\r
      <linearGradient :id="\`Gradient-2-\${id}\`">\r
        <stop offset="0" stop-color="RGBA(0, 175, 246, 1)" stop-opacity="0" />\r
        <stop offset="0.5" stop-color="RGBA(0, 175, 246, 1)" stop-opacity="1" />\r
        <stop offset="1" stop-color="RGBA(0, 175, 246, 1)" stop-opacity="0" />\r
      </linearGradient>\r
    </defs>\r
    <use\r
      stroke-width="2"\r
      :href="\`#border-path-\${id}\`"\r
      :stroke="color"\r
      :mask="\`url(#Mask-\${id})\`"\r
      :style="\`filter: url(#shadow-\${id})\`"\r
    ></use>\r
    <use\r
      stroke-width="2"\r
      :href="\`#border-path-\${id}\`"\r
      :mask="\`url(#border-mask-\${id})\`"\r
      stroke="#fff"\r
      :style="\`filter: url(#shadow-2-\${id})\`"\r
    ></use>\r
  </svg>\r
</template>\r
\r
<style scoped>\r
.border {\r
  pointer-events: none;\r
  width: 100%;\r
  height: 100%;\r
  position: absolute;\r
  inset: 0;\r
  z-index: 0;\r
}\r
</style>\r
`,classesNFlex={"params-border-box":"_params-border-box_ofimk_1","params-border-item":"_params-border-item_ofimk_17"},borders=Object.assign({"./borders/Border.vue":__vite_glob_0_0,"./borders/Border2.vue":__vite_glob_0_1,"./borders/Border3.vue":__vite_glob_0_2}),borderRaws=Object.assign({"./borders/Border.vue":__vite_glob_1_0,"./borders/Border2.vue":__vite_glob_1_1,"./borders/Border3.vue":__vite_glob_1_2});class NFlex extends ContainerNode{constructor(a){super(a);Zp(this,"isNFlex",!0);Zp(this,"isLayoutNode",!0);Zp(this,"styleDisplay","flex");if(!a){this.path="./components/NFlex/NFlex.tsx",this.name="flex容器";const c=this.props.style;this.props.style={...c,display:this.styleDisplay,flexWrap:"nowrap",flexDirection:"row",justifyContent:"start",alignItems:"start",rowGap:"0px",columnGap:"0px",borderWidth:"0"},this.props.border="./borders/Border.vue"}const s=this.component;this.component=markRaw(defineComponent(c=>()=>createVNode$1(s,null,{default:()=>[h$1(borders[this.props.border],{color:this.props.style.borderColor}),createVNode$1(TransitionGroup,{name:"list"},{default:()=>this.children.map((p,d)=>h$1(p.component,{key:p.uuid}))})]}),{name:"NFlex"}));const o=this.view;this.view=markRaw(defineComponent(c=>()=>createVNode$1(o,null,null)));const u=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(u,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("换行")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.style.flexWrap,"onUpdate:modelValue":c=>this.props.style.flexWrap=c},{default:()=>[createVNode$1(ElRadioButton,{value:"wrap",label:"换行",size:"small"},null),createVNode$1(ElRadioButton,{value:"nowrap",label:"不换行",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("主轴方向")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.style.flexDirection,"onUpdate:modelValue":c=>this.props.style.flexDirection=c},{default:()=>[createVNode$1(ElRadioButton,{value:"row",label:"文本方向/横向",size:"small"},null),createVNode$1(ElRadioButton,{value:"row-reverse",label:"反横向",size:"small"},null),createVNode$1(ElRadioButton,{value:"column",label:"块方向/纵向",size:"small"},null),createVNode$1(ElRadioButton,{value:"column-reverse",label:"反纵向",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("主轴对齐")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.style.justifyContent,"onUpdate:modelValue":c=>this.props.style.justifyContent=c},{default:()=>[createVNode$1(ElRadioButton,{value:"start",label:"起",size:"small"},null),createVNode$1(ElRadioButton,{value:"center",label:"中",size:"small"},null),createVNode$1(ElRadioButton,{value:"end",label:"止",size:"small"},null),createVNode$1(ElRadioButton,{value:"space-around",label:"半均分",size:"small"},null),createVNode$1(ElRadioButton,{value:"space-evenly",label:"均分",size:"small"},null),createVNode$1(ElRadioButton,{value:"space-between",label:"两端对齐",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("交叉轴对齐")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.style.alignItems,"onUpdate:modelValue":c=>this.props.style.alignItems=c},{default:()=>[createVNode$1(ElRadioButton,{value:"start",label:"起",size:"small"},null),createVNode$1(ElRadioButton,{value:"center",label:"中",size:"small"},null),createVNode$1(ElRadioButton,{value:"end",label:"止",size:"small"},null),createVNode$1(ElRadioButton,{value:"stretch",label:"填满",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("行间距")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.style.rowGap,"onUpdate:modelValue":c=>this.props.style.rowGap=c,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("列间距")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.style.columnGap,"onUpdate:modelValue":c=>this.props.style.columnGap=c,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("边框")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElPopover,{trigger:"click",teleported:!1,placement:"bottom",width:"unset"},{reference:()=>createVNode$1(ElButton,{type:"primary",size:"small"},{default:()=>[createTextVNode("选择")]}),default:()=>h$1("div",{class:classesNFlex["params-border-box"]},Object.keys(borders).map(c=>h$1("div",{class:classesNFlex["params-border-item"],onClick:()=>this.props.border=c},h$1(borders[c]))))})])])]})))}toVue(){const a=super.toVue(),s={},o={},u=this.props.border.match(/\.\/borders\/(\w+)\.vue/)[1];s[`./imports/${u}.vue`]={default:u};for(let c in borderRaws)o[c.replace("./borders/","")]=borderRaws[c];return a.imports={...a.imports,...s},a.importFiles={...a.importFiles,...o},a.template=a.template.replace("<slot></slot>",`
  <${u} color="${this.props.style.borderColor}"></${u}>
  ${this.children.map(c=>c.uuid).join(`
  `)}
      `),a}}class NForm extends ContainerNode{constructor(a){super(a);Zp(this,"isNForm",!0);Zp(this,"isFormNode",!0);if(!a){this.path="./components/NForm/NForm.tsx",this.name="表单容器";const c=this.props.style;this.props.style={...c,borderRadius:"5px"},this.props.submitUrl=""}const s=this.component;this.component=markRaw(defineComponent(c=>{const p=ref(),d=computed(()=>{const ja={};return this.traverse(Ja=>{Ja===this||!Ja.isFormNode||(ja[Ja.props.field]=Ja.props.value)}),ja}),_=ja=>{ja&&ja.validate(Ja=>{Ja&&request$1({url:this.props.submitUrl,method:"POST",data:d.value})})};return()=>createVNode$1(s,null,{default:()=>[createVNode$1(ElForm,{ref:p,model:d.value,"label-width":"auto"},{default:()=>[createVNode$1(TransitionGroup,{name:"list"},{default:()=>this.children.map((ja,Ja)=>h$1(ja.component,{key:ja.uuid}))}),createVNode$1(ElFormItem,{label:" "},{default:()=>[createVNode$1(ElButton,{type:"primary",onClick:()=>_(p.value)},{default:()=>[createTextVNode("提交")]})]})]})]})},{name:"NForm"}));const o=this.view;this.view=markRaw(defineComponent(c=>()=>createVNode$1(o,null,null)));const u=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(u,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("提交地址")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.submitUrl,"onUpdate:modelValue":c=>this.props.submitUrl=c,size:"small"},null)])])]})))}checkChild(a){let s=!0;return super.checkChild(a)||(s=!1),a.traverse(o=>{o.isNForm&&(s=!1)}),s}toVue(){const a=super.toVue(),s=a.name,[o,u]=this.uuid.split("-"),c=`${s}_${o}_ref`,p=`${s}_${o}_model`,d=`${s}_${o}_submit`;let _={};return this.traverse(ja=>{if(ja===this||!ja.isFormNode)return;let Ja=ja.constructor.name.replace(/^N(\w)/,(ec,tc)=>tc.toLowerCase());_[ja.props.field]=`${Ja}_${ja.uuid.split("-").at(0)}_value.value`}),_=JSON.stringify(_).replaceAll('"',""),a.imports={...a.imports,vue:{computed:"computed"},"element-plus":{ElForm:"ElForm",ElFormItem:"ElFormItem",ElInput:"ElInput",ElButton:"ElButton"},"./imports/request.js":{default:"request"}},a.importFiles={...a.importFiles,"request.js":requestRaw},a.script=`
${a.script}
const ${c} = ref()
const ${p} = computed(() => {
  return ${_}
})
const ${d} = (formEl) => {
  if (!formEl) return
  formEl.validate((valid) => {
    if (valid) {
      request({
        url: '${this.props.submitUrl}',
        method: 'POST',
        data: ${p}.value
      })
    }
  })
}
      `,a.template=a.template.replace("<slot></slot>",`
  <ElForm ref="${c}" :model="${p}" label-width="auto">
    ${this.children.map(ja=>ja.uuid).join(`
    `)}
    <ElFormItem label=" ">
      <ElButton type="primary" @click="${d}(${c})">
        提交
      </ElButton>
    </ElFormItem>
  </ElForm>
      `),a}}const _sfc_main$6=defineComponent({__name:"FunnelChart",props:{pOption:{type:Object,default:()=>({})},data:{type:Array,default:()=>[]},autoAction:{type:Boolean,default:!1}},setup(n){const r=n,a=ref();let s=null;const o=()=>{const{color:tc,datasetDimensions:rc,datasetSourceProduct:nc,leftRight:ic,topBottom:uc,sort:eh,labelPosition:rh}=r.pOption,ah={color:tc??["#5af","#fa5"],tooltip:{trigger:"item",textStyle:{color:"var(--ec-text-color)"},backgroundColor:"var(--ec-background-color)",borderColor:"var(--ec-border-color)",formatter:oh=>`${oh.name} ${oh.data[rc[0]]}`},dataset:{dimensions:["product",...rc],source:r.data.map(oh=>(oh.product=oh[nc],oh))},series:[]},ih={type:"funnel",sort:eh,left:`${ic[0]}%`,right:`${100-ic[1]}%`,top:`${100-uc[1]}%`,bottom:`${uc[0]}%`,minSize:"0%",maxSize:"100%",gap:3,itemStyle:{borderWidth:0},label:{show:rh!="none",position:rh,formatter:oh=>`${oh.name} ${oh.data[rc[0]]}`,textBorderColor:"transparent",textBorderWidth:0},emphasis:{label:{fontSize:15}}};return ah.series=new Array(rc.length).fill(ih),ah};watch(r,()=>{s&&(s.clear(),s.setOption(o(),{notMerge:!0}))},{deep:!0});let u=-1,c=null,p=1e3,d=ref(!0);const _=function(){if(!d.value||!s)return;let tc=r.data.length;s.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:u});const rc=(u+1)%tc;u=Number.isNaN(rc)?-1:rc,s.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:u}),s.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:u})};watch(()=>r.autoAction,tc=>{c&&clearInterval(c),tc&&(c=setInterval(_,p))},{immediate:!0});const ja=()=>{nextTick(()=>{s=init$1(a.value),s.setOption(o())})};let Ja;const ec=()=>{Ja=new window.ResizeObserver(tc=>s==null?void 0:s.resize()),Ja.observe(a.value)};return onMounted(()=>{ja(),ec()}),onUnmounted(()=>{s.dispose(),s=null,Ja&&Ja.disconnect()}),(tc,rc)=>(openBlock(),createElementBlock("div",{ref_key:"chartDomRef",ref:a,style:{width:"100%",height:"100%"},onMouseover:rc[0]||(rc[0]=nc=>isRef(d)?d.value=!1:d=!1),onMouseout:rc[1]||(rc[1]=nc=>isRef(d)?d.value=!0:d=!0)},null,544))}}),FunnelChartRaw=`<script setup lang="ts">\r
import { nextTick, onMounted, onUnmounted, ref, watch } from 'vue'\r
import * as echarts from 'echarts'\r
\r
const props = defineProps({\r
  pOption: {\r
    type: Object,\r
    default: () => ({})\r
  },\r
  data: {\r
    type: Array,\r
    default: () => []\r
  },\r
  autoAction: {\r
    type: Boolean,\r
    default: false\r
  }\r
})\r
const chartDomRef = ref()\r
let chartInstance = null\r
\r
const generateOption = () => {\r
  const {\r
    color,\r
    datasetDimensions,\r
    datasetSourceProduct,\r
    leftRight,\r
    topBottom,\r
    sort,\r
    labelPosition\r
  } = props.pOption\r
\r
  const opt: any = {\r
    color: color ?? ['#5af', '#fa5'],\r
    tooltip: {\r
      trigger: 'item',\r
      textStyle: {\r
        color: 'var(--ec-text-color)'\r
      },\r
      backgroundColor: 'var(--ec-background-color)',\r
      borderColor: 'var(--ec-border-color)',\r
      formatter: (params) => \`\${params.name} \${params.data[datasetDimensions[0]]}\`\r
    },\r
    dataset: {\r
      dimensions: ['product', ...datasetDimensions],\r
      source: props.data.map((data: any) => {\r
        data.product = data[datasetSourceProduct]\r
        return data\r
      })\r
    },\r
    series: []\r
  }\r
\r
  const item: any = {\r
    type: 'funnel',\r
    sort: sort,\r
    left: \`\${leftRight[0]}%\`,\r
    right: \`\${100 - leftRight[1]}%\`,\r
    top: \`\${100 - topBottom[1]}%\`,\r
    bottom: \`\${topBottom[0]}%\`,\r
    minSize: '0%',\r
    maxSize: '100%',\r
    gap: 3,\r
    itemStyle: {\r
      borderWidth: 0\r
    },\r
    label: {\r
      show: labelPosition == 'none' ? false : true,\r
      position: labelPosition,\r
      formatter: (params) => \`\${params.name} \${params.data[datasetDimensions[0]]}\`,\r
      textBorderColor: 'transparent',\r
      textBorderWidth: 0\r
    },\r
    emphasis: {\r
      label: {\r
        fontSize: 15\r
      }\r
    }\r
  }\r
\r
  opt.series = new Array(datasetDimensions.length).fill(item)\r
\r
  return opt\r
}\r
\r
watch(\r
  props,\r
  () => {\r
    if (chartInstance) {\r
      chartInstance.clear()\r
      chartInstance.setOption(generateOption(), { notMerge: true })\r
    }\r
  },\r
  { deep: true }\r
)\r
// 轮流选择\r
let currentIndex = -1\r
let intervalAction = null\r
let actionDelay = 1000\r
let actionable = ref(true)\r
\r
const action = function () {\r
  if (!actionable.value || !chartInstance) return\r
\r
  let dataLen = props.data.length\r
\r
  chartInstance.dispatchAction({\r
    type: 'downplay',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
\r
  const index = (currentIndex + 1) % dataLen\r
  currentIndex = Number.isNaN(index) ? -1 : index\r
\r
  chartInstance.dispatchAction({\r
    type: 'highlight',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
  chartInstance.dispatchAction({\r
    type: 'showTip',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
}\r
\r
watch(\r
  () => props.autoAction,\r
  (newVal) => {\r
    if (intervalAction) clearInterval(intervalAction)\r
\r
    if (newVal) intervalAction = setInterval(action, actionDelay)\r
  },\r
  {\r
    immediate: true\r
  }\r
)\r
// 初始化\r
const initChart = () => {\r
  nextTick(() => {\r
    chartInstance = echarts.init(chartDomRef.value)\r
    chartInstance.setOption(generateOption())\r
  })\r
}\r
\r
let resizeObserver\r
const chartResizeObserver = () => {\r
  resizeObserver = new window.ResizeObserver((entries) => chartInstance?.resize())\r
  resizeObserver.observe(chartDomRef.value)\r
}\r
\r
onMounted(() => {\r
  initChart()\r
  chartResizeObserver()\r
})\r
\r
onUnmounted(() => {\r
  chartInstance.dispose()\r
  chartInstance = null\r
  if (resizeObserver) resizeObserver.disconnect()\r
})\r
<\/script>\r
\r
<template>\r
  <div\r
    ref="chartDomRef"\r
    :style="{ width: '100%', height: '100%' }"\r
    @mouseover="actionable = false"\r
    @mouseout="actionable = true"\r
  ></div>\r
</template>\r
\r
<style scoped></style>\r
`;class NFunnelChart extends ItemNode{constructor(node){super(node);Zp(this,"isNFunnelChart",!0);Zp(this,"isChartNode",!0);if(this.watchStateOptions.push({value:"initData",label:"刷新数据"}),!node){this.path="./components/NFunnelChart/NFunnelChart.tsx",this.name="漏斗图";const r=this.props.style;this.props.style={...r,width:"300px",height:"200px",flexShrink:"0"},this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [{
    product: String,
    default1: Number
  }]
}`,this.props.autoAction=!1,this.props.pOption={color:["#5af","#5fa","#fa5"],datasetDimensions:["default1"],datasetSourceProduct:"product",sort:"descending",labelPosition:"right",leftRight:[10,90],topBottom:[10,90]}}const pComponent=this.component;this.component=markRaw(defineComponent(props=>{const data=ref([{product:"defaultA",default1:1},{product:"defaultB",default1:2},{product:"defaultC",default1:3}]),initData=async()=>{this.props.dataUrl&&(data.value=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(data.value=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(_sfc_main$6,{pOption:this.props.pOption,data:data.value,autoAction:this.props.autoAction},null)]})},{name:"NFunnelChart"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.35, 0.3)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":r=>this.props.dataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数据字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.datasetDimensions[0],"onUpdate:modelValue":r=>this.props.pOption.datasetDimensions[0]=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标题字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.datasetSourceProduct,"onUpdate:modelValue":r=>this.props.pOption.datasetSourceProduct=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("调色盘")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.pOption.color.map((r,a)=>createVNode$1(ElColorPicker,{modelValue:this.props.pOption.color[a],"onUpdate:modelValue":s=>this.props.pOption.color[a]=s||"","show-alpha":!0,size:"small",teleported:!1},null)),createVNode$1(ElButton,{type:"primary",icon:plus$1,circle:!0,onClick:()=>this.props.pOption.color.push("#5af"),size:"small"},null),createVNode$1(ElButton,{type:"danger",icon:minus$1,circle:!0,onClick:()=>this.props.pOption.color.pop(),size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数据排序")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.pOption.sort,"onUpdate:modelValue":r=>this.props.pOption.sort=r,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"descending",label:"降序",size:"small"},null),createVNode$1(ElRadioButton,{value:"ascending",label:"升序",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("组件范围")]}),createVNode$1("div",{class:`${classes["params-item-content"]}`},[createVNode$1(ElSlider,{style:{display:"inline-block",height:"100px"},modelValue:this.props.pOption.topBottom,"onUpdate:modelValue":r=>this.props.pOption.topBottom=r,range:!0,vertical:!0,size:"small"},null),createVNode$1(ElSlider,{style:{display:"inline-block",width:"100px"},modelValue:this.props.pOption.leftRight,"onUpdate:modelValue":r=>this.props.pOption.leftRight=r,range:!0,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标题位置")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.pOption.labelPosition,"onUpdate:modelValue":r=>this.props.pOption.labelPosition=r,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"none",label:"无",size:"small"},null),createVNode$1(ElRadioButton,{value:"left",label:"左",size:"small"},null),createVNode$1(ElRadioButton,{value:"inside",label:"中",size:"small"},null),createVNode$1(ElRadioButton,{value:"right",label:"右",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("轮流选择")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.autoAction,"onUpdate:modelValue":r=>this.props.autoAction=r,size:"small"},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_pOption`,c=`${a}_${s}_data`,p=`${a}_${s}_initData`,d=JSON.stringify(this.props.pOption);return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"./imports/FunnelChart.vue":{default:"FunnelChart"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"FunnelChart.vue":FunnelChartRaw,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref(${d})
const ${c} = ref([])
const ${p} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${p}()
${this.props.watchState.length>0?`
${this.props.watchState.map(_=>{if(_.type=="initData")return`watch(() => state.${_.stateProperty}, ${p})`}).join(`
`)}
    `:""}
      `,r.template=r.template.replace("<slot></slot>",`<FunnelChart :pOption="${u}" :data="${c}" :autoAction="${this.props.autoAction}"></FunnelChart>`),r}}class NImage extends ItemNode{constructor(a){super(a);Zp(this,"isNImage",!0);Zp(this,"isDataNode",!0);Zp(this,"styleDisplay","inline-block");a||(this.path="./components/NImage/NImage.tsx",this.name="图片",this.props.style={...this.props.style,display:this.styleDisplay,maxWidth:"100%",minWidth:"10px",minHeight:"10px"},this.props.src="",this.props.fit="fill",this.props.lazy=!0,this.props.preview=!1);const s=reactive([{label:"等比包含",value:"contain"},{label:"等比裁剪",value:"cover"},{label:"填充",value:"fill"},{label:"无",value:"none"}]),o=this.component;this.component=markRaw(defineComponent(p=>()=>createVNode$1(o,null,{default:()=>[createVNode$1(ElImage,{style:{width:"100%",height:"100%",minWidth:"30px",minHeight:"30px"},src:this.props.src,fit:this.props.fit,lazy:this.props.lazy,previewSrcList:this.props.preview?[this.props.src]:null},{error:()=>createVNode$1("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}},[createVNode$1(ElIcon,{size:30,color:"var(--el-text-color-regular)"},{default:()=>[createVNode$1(picture,null,null)]})])})]}),{name:"NImage"}));const u=this.view;this.view=markRaw(defineComponent(p=>()=>createVNode$1(u,null,{default:()=>[createVNode$1(this.component,{style:{width:"100px",transform:"scale(0.8)"}},null)]})));const c=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(c,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("图片地址")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.src,"onUpdate:modelValue":p=>this.props.src=p,size:"small",clearable:!0},null),createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{uploadFile(p=>{file2Base64(p).then(d=>this.props.src=d)})}},{default:()=>[createTextVNode("选择背景图")]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("图片适应")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.fit,"onUpdate:modelValue":p=>this.props.fit=p,size:"small"},{default:()=>s.map(p=>createVNode$1(ElRadioButton,{key:p.value,label:p.label,value:p.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("懒加载")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.lazy,"onUpdate:modelValue":p=>this.props.lazy=p,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("图片预览")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.preview,"onUpdate:modelValue":p=>this.props.preview=p,size:"small"},null)])])]})))}toVue(){const a=super.toVue();return a.imports={...a.imports,"element-plus":{ElImage:"ElImage",ElIcon:"ElIcon"},"@element-plus/icons-vue":{Picture:"Picture"}},a.template=a.template.replace("<slot></slot>",`
  <ElImage
    :style="{
      width: '100%',
      height: '100%',
      minWidth: '30px',
      minHeight: '30px'
    }"
    src="${this.props.src}"
    fit="${this.props.fit}"
    :lazy="${this.props.lazy}"
    :previewSrcList="${this.props.preview?`['${this.props.src}']`:null}"
  >
    <template #error>
      <ElIcon :size="30" color="var(--el-text-color-regular)">
        <Picture />
      </ElIcon>
    </template>
  </ElImage>
      `),a}}class NInput extends ItemNode{constructor(node){super(node);Zp(this,"isNInput",!0);Zp(this,"isFormNode",!0);node||(this.path="./components/NInput/NInput.tsx",this.name="输入框",this.props.field=`${NInput.name.replace(/^N(\w)/,(r,a)=>a.toLowerCase())}_${this.uuid.split("-").at(0)}`,this.props.type="text",this.props.value="",this.props.label="",this.props.placeholder="请输入",this.props.ruleMessage="请正确输入",this.props.ruleType="none",this.props.changeFn=`function (value) {
  value
}`);const rulesOptions=reactive([{label:"无验证",value:"none"},{label:"默认验证",value:"default"},{label:"手机号",value:"phone"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const rule=computed(()=>generateRule(this.props.ruleType,this.props.ruleMessage)),onChange=value=>{eval(`(${this.props.changeFn})`)(value)};return onChange(this.props.value),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(ElFormItem,{label:this.props.label,prop:this.props.field,rules:rule.value},{default:()=>[createVNode$1(ElInput,{type:this.props.type,placeholder:this.props.placeholder,modelValue:this.props.value,"onUpdate:modelValue":r=>this.props.value=r,onChange},null)]})]})},{name:"NInput"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.8)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.field,"onUpdate:modelValue":r=>this.props.field=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("类型")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.type,"onUpdate:modelValue":r=>this.props.type=r},{default:()=>[createVNode$1(ElRadioButton,{value:"text",label:"文本",size:"small"},null),createVNode$1(ElRadioButton,{value:"textarea",label:"文本域",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.label,"onUpdate:modelValue":r=>this.props.label=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("占位文本")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.placeholder,"onUpdate:modelValue":r=>this.props.placeholder=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证规则")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.ruleType,"onUpdate:modelValue":r=>this.props.ruleType=r,size:"small",teleported:!1},{default:()=>rulesOptions.map(r=>createVNode$1(ElOption,{key:r.value,label:r.label,value:r.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证消息")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.ruleMessage,"onUpdate:modelValue":r=>this.props.ruleMessage=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值变化处理函数"),createVNode$1(_sfc_main$d,{content:"值变化后调用；可访问全局状态变量state，value：组件的值"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.changeFn,"onUpdate:modelValue":r=>this.props.changeFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_value`,c=`${a}_${s}_rule`,p=`${a}_${s}_onChange`,d=JSON.stringify(generateRule(this.props.ruleType,this.props.ruleMessage),(_,ja)=>_==="validator"?ja.toString():ja).replaceAll('"',"'").replaceAll("\\\\","\\").replaceAll("\\n",`
`).replaceAll("anonymous","").replaceAll(/'(?=function)/g,"").replaceAll(new RegExp("(?<=function.+\\})'(?=\\,)","gms"),"");return r.imports={...r.imports,vue:{ref:"ref"},"element-plus":{ElFormItem:"ElFormItem",ElInput:"ElInput"}},r.script=`
${r.script}
const ${u} = ref()
const ${c} = ref(${d})
const ${p} = (value) => {
  (${this.props.changeFn})(value)
}
${p}(${typeof this.props.value=="string"?`'${this.props.value}'`:this.props.value})
      `,r.template=r.template.replace("<slot></slot>",`
  <ElFormItem label="${this.props.label}" prop="${this.props.field}" :rules="${c}">
    <ElInput
      placeholder="${this.props.placeholder}"
      v-model="${u}"
      @change="${p}"
    ></ElInput>
  </ElFormItem>
      `),r}}class NInputNumber extends ItemNode{constructor(node){super(node);Zp(this,"isNInputNumber",!0);Zp(this,"isFormNode",!0);node||(this.path="./components/NInputNumber/NInputNumber.tsx",this.name="数字输入框",this.props.field=`${NInputNumber.name.replace(/^N(\w)/,(r,a)=>a.toLowerCase())}_${this.uuid.split("-").at(0)}`,this.props.value=null,this.props.label="",this.props.placeholder="请输入",this.props.ruleMessage="请正确输入",this.props.ruleType="none",this.props.min=null,this.props.max=null,this.props.step=1,this.props.changeFn=`function (value) {
  value
}`);const rulesOptions=reactive([{label:"无验证",value:"none"},{label:"默认验证",value:"default"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const rule=computed(()=>generateRule(this.props.ruleType,this.props.ruleMessage)),onChange=value=>{eval(`(${this.props.changeFn})`)(value)};return onChange(this.props.value),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(ElFormItem,{label:this.props.label,prop:this.props.field,rules:rule.value},{default:()=>[createVNode$1(ElInputNumber,{min:this.props.min??-1/0,max:this.props.max??1/0,step:this.props.step,"step-strictly":!0,placeholder:this.props.placeholder,modelValue:this.props.value,"onUpdate:modelValue":r=>this.props.value=r,onChange},null)]})]})},{name:"NInputNumber"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.55, 0.6)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.field,"onUpdate:modelValue":r=>this.props.field=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("最小值")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.min,"onUpdate:modelValue":r=>this.props.min=r,"controls-position":"right",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("最大值")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.max,"onUpdate:modelValue":r=>this.props.max=r,"controls-position":"right",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("步进")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:Number(this.props.step)||1,"onUpdate:modelValue":r=>this.props.step=r||1,"controls-position":"right",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.label,"onUpdate:modelValue":r=>this.props.label=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("占位文本")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.placeholder,"onUpdate:modelValue":r=>this.props.placeholder=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证规则")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.ruleType,"onUpdate:modelValue":r=>this.props.ruleType=r,size:"small",teleported:!1},{default:()=>rulesOptions.map(r=>createVNode$1(ElOption,{key:r.value,label:r.label,value:r.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证消息")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.ruleMessage,"onUpdate:modelValue":r=>this.props.ruleMessage=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值变化处理函数"),createVNode$1(_sfc_main$d,{content:"值变化后调用；可访问全局状态变量state，value：组件的值"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.changeFn,"onUpdate:modelValue":r=>this.props.changeFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_value`,c=`${a}_${s}_rule`,p=`${a}_${s}_onChange`,d=JSON.stringify(generateRule(this.props.ruleType,this.props.ruleMessage));return r.imports={...r.imports,vue:{ref:"ref"},"element-plus":{ElFormItem:"ElFormItem",ElInputNumber:"ElInputNumber"}},r.script=`
${r.script}
const ${u} = ref()
const ${c} = ref(${d})
const ${p} = (value) => {
  (${this.props.changeFn})(value)
}
${p}(${typeof this.props.value=="string"?`'${this.props.value}'`:this.props.value})
      `,r.template=r.template.replace("<slot></slot>",`
  <ElFormItem label="${this.props.label}" prop="${this.props.field}" :rules="${c}">
    <ElInputNumber
      :min="${this.props.min??"-Infinity"}"
      :max="${this.props.max??"Infinity"}"
      :step="${this.props.step}"
      step-strictly
      placeholder="${this.props.placeholder}"
      v-model="${u}"
      @change="${p}"
    ></ElInputNumber>
  </ElFormItem>
      `),r}}const _sfc_main$5=defineComponent({__name:"LineChart",props:{pOption:{type:Object,default:()=>({})},data:{type:Array,default:()=>[]},autoAction:{type:Boolean,default:!1}},setup(n){const r=n,a=ref();let s=null;const o=()=>{const{color:tc,colorLinear:rc,areaStyle:nc,smooth:ic,showSymbol:uc,yAxisName:eh,axisLabelColor:rh,legendTextStyleColor:ah,datasetDimensions:ih,datasetSourceProduct:oh}=r.pOption,uh={color:tc??["#5af","#fa5"],title:{show:!1},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},textStyle:{color:"var(--ec-text-color)"},backgroundColor:"var(--ec-background-color)",borderColor:"var(--ec-border-color)"},dataset:{dimensions:["product",...ih],source:r.data.map(hh=>(hh.product=hh[oh],hh))},legend:{textStyle:{color:ah??"#aaa"},itemWidth:20,itemHeight:10,icon:"roundRect"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value",name:eh??"",nameTextStyle:{color:rh},splitLine:{lineStyle:{type:"dashed",opacity:.2}}}],axisLabel:{color:rh??"#333"},series:[]};rc&&(uh.color=tc.map(hh=>({type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:hh},{offset:1,color:"transparent"}],global:!1})));const ch={type:"line",smooth:ic,showSymbol:uc,emphasis:{focus:"series"}};return nc&&(ch.areaStyle={}),uh.series=new Array(ih.length).fill(ch),uh};watch(r,()=>{s&&(s.clear(),s.setOption(o(),{notMerge:!0}))},{deep:!0});let u=-1,c=null,p=1e3,d=ref(!0);const _=function(){if(!d.value||!s)return;let tc=r.data.length;s.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:u});const rc=(u+1)%tc;u=Number.isNaN(rc)?-1:rc,s.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:u}),s.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:u})};watch(()=>r.autoAction,tc=>{c&&clearInterval(c),tc&&(c=setInterval(_,p))},{immediate:!0});const ja=()=>{nextTick(()=>{s=init$1(a.value),s.setOption(o())})};let Ja;const ec=()=>{Ja=new window.ResizeObserver(tc=>s==null?void 0:s.resize()),Ja.observe(a.value)};return onMounted(()=>{ja(),ec()}),onUnmounted(()=>{s.dispose(),s=null,Ja&&Ja.disconnect()}),(tc,rc)=>(openBlock(),createElementBlock("div",{ref_key:"chartDomRef",ref:a,style:{width:"100%",height:"100%"},onMouseover:rc[0]||(rc[0]=nc=>isRef(d)?d.value=!1:d=!1),onMouseout:rc[1]||(rc[1]=nc=>isRef(d)?d.value=!0:d=!0)},null,544))}}),LineChartRaw=`<script setup lang="ts">\r
import { nextTick, onMounted, onUnmounted, ref, watch } from 'vue'\r
import * as echarts from 'echarts'\r
\r
const props = defineProps({\r
  pOption: {\r
    type: Object,\r
    default: () => ({})\r
  },\r
  data: {\r
    type: Array,\r
    default: () => []\r
  },\r
  autoAction: {\r
    type: Boolean,\r
    default: false\r
  }\r
})\r
const chartDomRef = ref()\r
let chartInstance = null\r
\r
const generateOption = () => {\r
  const {\r
    color,\r
    colorLinear,\r
    areaStyle,\r
    smooth,\r
    showSymbol,\r
    yAxisName,\r
    axisLabelColor,\r
    legendTextStyleColor,\r
    datasetDimensions,\r
    datasetSourceProduct\r
  } = props.pOption\r
\r
  const opt: any = {\r
    color: color ?? ['#5af', '#fa5'],\r
    title: {\r
      show: false\r
    },\r
    tooltip: {\r
      trigger: 'axis',\r
      axisPointer: {\r
        type: 'cross',\r
        label: {\r
          backgroundColor: '#6a7985'\r
        }\r
      },\r
      textStyle: {\r
        color: 'var(--ec-text-color)'\r
      },\r
      backgroundColor: 'var(--ec-background-color)',\r
      borderColor: 'var(--ec-border-color)'\r
    },\r
    dataset: {\r
      dimensions: ['product', ...datasetDimensions],\r
      source: props.data.map((data: any) => {\r
        data.product = data[datasetSourceProduct]\r
        return data\r
      })\r
    },\r
    legend: {\r
      textStyle: {\r
        color: legendTextStyleColor ?? '#aaa'\r
      },\r
      itemWidth: 20,\r
      itemHeight: 10,\r
      icon: 'roundRect'\r
    },\r
    grid: {\r
      left: '3%',\r
      right: '4%',\r
      bottom: '3%',\r
      containLabel: true\r
    },\r
    xAxis: [\r
      {\r
        type: 'category',\r
        boundaryGap: false\r
      }\r
    ],\r
    yAxis: [\r
      {\r
        type: 'value',\r
        name: yAxisName ?? '',\r
        nameTextStyle: {\r
          color: axisLabelColor\r
        },\r
        splitLine: {\r
          lineStyle: {\r
            type: 'dashed',\r
            opacity: 0.2\r
          }\r
        }\r
      }\r
    ],\r
    axisLabel: {\r
      color: axisLabelColor ?? '#333'\r
    },\r
    series: []\r
  }\r
\r
  if (colorLinear) {\r
    opt.color = color.map((c) => ({\r
      type: 'linear',\r
      x: 0,\r
      y: 0,\r
      x2: 0,\r
      y2: 1,\r
      colorStops: [\r
        {\r
          offset: 0,\r
          color: c\r
        },\r
        {\r
          offset: 1,\r
          color: 'transparent'\r
        }\r
      ],\r
      global: false\r
    }))\r
  }\r
\r
  const item: any = {\r
    type: 'line',\r
    // stack: 'Total',\r
    smooth,\r
    showSymbol,\r
    emphasis: {\r
      focus: 'series'\r
    }\r
  }\r
  if (areaStyle) item.areaStyle = {}\r
  opt.series = new Array(datasetDimensions.length).fill(item)\r
\r
  return opt\r
}\r
\r
watch(\r
  props,\r
  () => {\r
    if (chartInstance) {\r
      chartInstance.clear()\r
      chartInstance.setOption(generateOption(), { notMerge: true })\r
    }\r
  },\r
  { deep: true }\r
)\r
// 轮流选择\r
let currentIndex = -1\r
let intervalAction = null\r
let actionDelay = 1000\r
let actionable = ref(true)\r
\r
const action = function () {\r
  if (!actionable.value || !chartInstance) return\r
\r
  let dataLen = props.data.length\r
\r
  chartInstance.dispatchAction({\r
    type: 'downplay',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
\r
  const index = (currentIndex + 1) % dataLen\r
  currentIndex = Number.isNaN(index) ? -1 : index\r
\r
  chartInstance.dispatchAction({\r
    type: 'highlight',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
  chartInstance.dispatchAction({\r
    type: 'showTip',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
}\r
\r
watch(\r
  () => props.autoAction,\r
  (newVal) => {\r
    if (intervalAction) clearInterval(intervalAction)\r
\r
    if (newVal) intervalAction = setInterval(action, actionDelay)\r
  },\r
  {\r
    immediate: true\r
  }\r
)\r
// 初始化\r
const initChart = () => {\r
  nextTick(() => {\r
    chartInstance = echarts.init(chartDomRef.value)\r
    chartInstance.setOption(generateOption())\r
  })\r
}\r
\r
let resizeObserver\r
const chartResizeObserver = () => {\r
  resizeObserver = new window.ResizeObserver((entries) => chartInstance?.resize())\r
  resizeObserver.observe(chartDomRef.value)\r
}\r
\r
onMounted(() => {\r
  initChart()\r
  chartResizeObserver()\r
})\r
\r
onUnmounted(() => {\r
  chartInstance.dispose()\r
  chartInstance = null\r
  if (resizeObserver) resizeObserver.disconnect()\r
})\r
<\/script>\r
\r
<template>\r
  <div\r
    ref="chartDomRef"\r
    :style="{ width: '100%', height: '100%' }"\r
    @mouseover="actionable = false"\r
    @mouseout="actionable = true"\r
  ></div>\r
</template>\r
\r
<style scoped></style>\r
`;function _isSlot$4(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!isVNode(n)}class NLineChart extends ItemNode{constructor(node){super(node);Zp(this,"isNLineChart",!0);Zp(this,"isChartNode",!0);if(this.watchStateOptions.push({value:"initData",label:"刷新数据"}),!node){this.path="./components/NLineChart/NLineChart.tsx",this.name="折线图";const r=this.props.style;this.props.style={...r,width:"300px",height:"200px",flexShrink:"0"},this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [{
    product: String,
    default1: Number, 
    default2: Number
  }]
}`,this.props.autoAction=!1,this.props.pOption={color:["#5af","#fa5"],colorLinear:!1,areaStyle:!1,smooth:!1,showSymbol:!0,axisLabelColor:"#333",legendTextStyleColor:"#333",seriesLabelShow:!1,seriesLabelColor:"#333",yAxisName:"",datasetDimensions:["default1","default2"],datasetSourceProduct:"product"}}const pComponent=this.component;this.component=markRaw(defineComponent(props=>{const data=ref([{product:"defaultA",default1:2,default2:1},{product:"defaultB",default1:5,default2:3},{product:"defaultC",default1:4,default2:2},{product:"defaultD",default1:6,default2:4}]),initData=async()=>{this.props.dataUrl&&(data.value=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(data.value=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(_sfc_main$5,{pOption:this.props.pOption,data:data.value,autoAction:this.props.autoAction},null)]})},{name:"NLineChart"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.35, 0.3)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>{const r=ref(),a=ref(!1),s=ref();return()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":o=>this.props.dataUrl=o||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":o=>this.props.dataFn=o||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("系列名字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.pOption.datasetDimensions.map(o=>createVNode$1(ElTag,{key:o,closable:!0,type:"primary",effect:"dark",size:"small",onClose:()=>{const u=this.props.pOption.datasetDimensions;u.splice(u.indexOf(o),1)}},_isSlot$4(o)?o:{default:()=>[o]})),a.value?createVNode$1(ElInput,{ref:r,modelValue:s.value,"onUpdate:modelValue":o=>s.value=o,size:"small",style:{width:"80px"},onBlur:()=>{s.value&&this.props.pOption.datasetDimensions.push(s.value),s.value="",a.value=!1}},null):createVNode$1(ElButton,{onClick:()=>{a.value=!0,nextTick(()=>{r.value.input.focus()})},type:"warning",size:"small",circle:!0,icon:plus$1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("x坐标轴字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.datasetSourceProduct,"onUpdate:modelValue":o=>this.props.pOption.datasetSourceProduct=o||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("y坐标轴名")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.yAxisName,"onUpdate:modelValue":o=>this.props.pOption.yAxisName=o||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("坐标轴字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.pOption.axisLabelColor,"onUpdate:modelValue":o=>this.props.pOption.axisLabelColor=o||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("图例字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.pOption.legendTextStyleColor,"onUpdate:modelValue":o=>this.props.pOption.legendTextStyleColor=o||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("调色盘")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.pOption.color.map((o,u)=>createVNode$1(ElColorPicker,{modelValue:this.props.pOption.color[u],"onUpdate:modelValue":c=>this.props.pOption.color[u]=c||"","show-alpha":!0,size:"small",teleported:!1},null)),createVNode$1(ElButton,{type:"primary",icon:plus$1,circle:!0,onClick:()=>this.props.pOption.color.push("#5af"),size:"small"},null),createVNode$1(ElButton,{type:"danger",icon:minus$1,circle:!0,onClick:()=>this.props.pOption.color.pop(),size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("调色盘线性渐变")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.colorLinear,"onUpdate:modelValue":o=>this.props.pOption.colorLinear=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("区域填充")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.areaStyle,"onUpdate:modelValue":o=>this.props.pOption.areaStyle=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("平滑")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.smooth,"onUpdate:modelValue":o=>this.props.pOption.smooth=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("显示圆标")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.showSymbol,"onUpdate:modelValue":o=>this.props.pOption.showSymbol=o,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("轮流选择")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.autoAction,"onUpdate:modelValue":o=>this.props.autoAction=o,size:"small"},null)])])]})}))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_pOption`,c=`${a}_${s}_data`,p=`${a}_${s}_initData`,d=JSON.stringify(this.props.pOption);return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"./imports/LineChart.vue":{default:"LineChart"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"LineChart.vue":LineChartRaw,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref(${d})
const ${c} = ref([])
const ${p} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${p}()
${this.props.watchState.length>0?`
${this.props.watchState.map(_=>{if(_.type=="initData")return`watch(() => state.${_.stateProperty}, ${p})`}).join(`
`)}
    `:""}
      `,r.template=r.template.replace("<slot></slot>",`
  <LineChart :pOption="${u}" :data="${c}" :autoAction="${this.props.autoAction}"></LineChart>
      `),r}}var dist={exports:{}};(function(n,r){(function(a,s){n.exports=s()})(commonjsGlobal,function(){function a(Ja){var ec=[];return Ja.AMapUI&&ec.push(s(Ja.AMapUI)),Ja.Loca&&ec.push(o(Ja.Loca)),Promise.all(ec)}function s(Ja){return new Promise(function(ec,tc){var rc=[];if(Ja.plugins)for(var nc=0;nc<Ja.plugins.length;nc+=1)c.AMapUI.plugins.indexOf(Ja.plugins[nc])==-1&&rc.push(Ja.plugins[nc]);if(p.AMapUI===u.failed)tc("前次请求 AMapUI 失败");else if(p.AMapUI===u.notload){p.AMapUI=u.loading,c.AMapUI.version=Ja.version||c.AMapUI.version,nc=c.AMapUI.version;var ic=document.body||document.head,uc=document.createElement("script");uc.type="text/javascript",uc.src="https://webapi.amap.com/ui/"+nc+"/main.js",uc.onerror=function(eh){p.AMapUI=u.failed,tc("请求 AMapUI 失败")},uc.onload=function(){if(p.AMapUI=u.loaded,rc.length)window.AMapUI.loadUI(rc,function(){for(var eh=0,rh=rc.length;eh<rh;eh++){var ah=rc[eh].split("/").slice(-1)[0];window.AMapUI[ah]=arguments[eh]}for(ec();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()});else for(ec();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()},ic.appendChild(uc)}else p.AMapUI===u.loaded?Ja.version&&Ja.version!==c.AMapUI.version?tc("不允许多个版本 AMapUI 混用"):rc.length?window.AMapUI.loadUI(rc,function(){for(var eh=0,rh=rc.length;eh<rh;eh++){var ah=rc[eh].split("/").slice(-1)[0];window.AMapUI[ah]=arguments[eh]}ec()}):ec():Ja.version&&Ja.version!==c.AMapUI.version?tc("不允许多个版本 AMapUI 混用"):d.AMapUI.push(function(eh){eh?tc(eh):rc.length?window.AMapUI.loadUI(rc,function(){for(var rh=0,ah=rc.length;rh<ah;rh++){var ih=rc[rh].split("/").slice(-1)[0];window.AMapUI[ih]=arguments[rh]}ec()}):ec()})})}function o(Ja){return new Promise(function(ec,tc){if(p.Loca===u.failed)tc("前次请求 Loca 失败");else if(p.Loca===u.notload){p.Loca=u.loading,c.Loca.version=Ja.version||c.Loca.version;var rc=c.Loca.version,nc=c.AMap.version.startsWith("2"),ic=rc.startsWith("2");if(nc&&!ic||!nc&&ic)tc("JSAPI 与 Loca 版本不对应！！");else{nc=c.key,ic=document.body||document.head;var uc=document.createElement("script");uc.type="text/javascript",uc.src="https://webapi.amap.com/loca?v="+rc+"&key="+nc,uc.onerror=function(eh){p.Loca=u.failed,tc("请求 AMapUI 失败")},uc.onload=function(){for(p.Loca=u.loaded,ec();d.Loca.length;)d.Loca.splice(0,1)[0]()},ic.appendChild(uc)}}else p.Loca===u.loaded?Ja.version&&Ja.version!==c.Loca.version?tc("不允许多个版本 Loca 混用"):ec():Ja.version&&Ja.version!==c.Loca.version?tc("不允许多个版本 Loca 混用"):d.Loca.push(function(eh){eh?tc(eh):tc()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var u;(function(Ja){Ja.notload="notload",Ja.loading="loading",Ja.loaded="loaded",Ja.failed="failed"})(u||(u={}));var c={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},p={AMap:u.notload,AMapUI:u.notload,Loca:u.notload},d={AMap:[],AMapUI:[],Loca:[]},_=[],ja=function(Ja){typeof Ja=="function"&&(p.AMap===u.loaded?Ja(window.AMap):_.push(Ja))};return{load:function(Ja){return new Promise(function(ec,tc){if(p.AMap==u.failed)tc("");else if(p.AMap==u.notload){var rc=Ja.key,nc=Ja.version,ic=Ja.plugins;rc?(window.AMap&&location.host!=="lbs.amap.com"&&tc("禁止多种API加载方式混用"),c.key=rc,c.AMap.version=nc||c.AMap.version,c.AMap.plugins=ic||c.AMap.plugins,p.AMap=u.loading,nc=document.body||document.head,window.___onAPILoaded=function(eh){if(delete window.___onAPILoaded,eh)p.AMap=u.failed,tc(eh);else for(p.AMap=u.loaded,a(Ja).then(function(){ec(window.AMap)}).catch(tc);_.length;)_.splice(0,1)[0]()},ic=document.createElement("script"),ic.type="text/javascript",ic.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+c.AMap.version+"&key="+rc+"&plugin="+c.AMap.plugins.join(","),ic.onerror=function(eh){p.AMap=u.failed,tc(eh)},nc.appendChild(ic)):tc("请填写key")}else if(p.AMap==u.loaded)if(Ja.key&&Ja.key!==c.key)tc("多个不一致的 key");else if(Ja.version&&Ja.version!==c.AMap.version)tc("不允许多个版本 JSAPI 混用");else{if(rc=[],Ja.plugins)for(nc=0;nc<Ja.plugins.length;nc+=1)c.AMap.plugins.indexOf(Ja.plugins[nc])==-1&&rc.push(Ja.plugins[nc]);rc.length?window.AMap.plugin(rc,function(){a(Ja).then(function(){ec(window.AMap)}).catch(tc)}):a(Ja).then(function(){ec(window.AMap)}).catch(tc)}else if(Ja.key&&Ja.key!==c.key)tc("多个不一致的 key");else if(Ja.version&&Ja.version!==c.AMap.version)tc("不允许多个版本 JSAPI 混用");else{var uc=[];if(Ja.plugins)for(nc=0;nc<Ja.plugins.length;nc+=1)c.AMap.plugins.indexOf(Ja.plugins[nc])==-1&&uc.push(Ja.plugins[nc]);ja(function(){uc.length?window.AMap.plugin(uc,function(){a(Ja).then(function(){ec(window.AMap)}).catch(tc)}):a(Ja).then(function(){ec(window.AMap)}).catch(tc)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,c={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},p={AMap:u.notload,AMapUI:u.notload,Loca:u.notload},d={AMap:[],AMapUI:[],Loca:[]}}}})})(dist);var distExports=dist.exports;const AMapLoader=getDefaultExportFromCjs(distExports),_sfc_main$4=defineComponent({__name:"Map",props:{option:{default:()=>({})},markersData:{default:()=>[]}},setup(n){const r=n;let a=null,s=null,o=null;const u=ref(),c=async()=>{window._AMapSecurityConfig={securityJsCode:"28e8061333fac3079ee854fef632196e"},await AMapLoader.load({key:"63cb2b48301b336ee761198b2b661410",version:"2.0",plugins:["AMap.Scale"]}).then(Ja=>{a=Ja,s=new a.Map(u.value,{viewMode:"3D",...r.option}),o=new a.LabelsLayer({zooms:[3,20],zIndex:1e3,collision:!1}),s.add(o)}).catch(Ja=>{console.log(Ja)})};let p=[],d,_={type:"image",image:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",size:[19,31],anchor:"bottom-center"};const ja=()=>{if(!o)return;o.remove(p),p=[],d||(d=new a.Marker({anchor:"bottom-center",offset:[0,-40]})),JSON.parse(JSON.stringify(r.markersData)).forEach(ec=>{const tc=new a.LabelMarker({extData:ec.extData,position:ec.position,icon:_});tc.on("mouseover",function(rc){let{position:nc}=rc.data.data;if(nc){const ic=rc.target.getExtData();d.setContent('<div class="amap-info-window">'+ic.content+'<div class="amap-info-sharp"></div></div>'),d.setPosition(nc),s.add(d)}}),tc.on("mouseout",function(){s.remove(d)}),p.push(tc)}),o.add(p)};return watch([()=>r.option],()=>{c().then(Ja=>{ja()})},{deep:!0}),watch([()=>r.markersData],()=>{ja()},{deep:!0}),onMounted(()=>{c().then(Ja=>{ja()})}),onUnmounted(()=>{s==null||s.destroy()}),(Ja,ec)=>(openBlock(),createElementBlock("div",{ref_key:"containerRef",ref:u,class:"map-container"},null,512))}}),Map$1=_export_sfc$1(_sfc_main$4,[["__scopeId","data-v-b8b30ee5"]]),MapRaw=`<script setup lang="ts">\r
import { ref, onMounted, onUnmounted, watch } from 'vue'\r
import AMapLoader from '@amap/amap-jsapi-loader'\r
\r
interface MarkerItem {\r
  position: [number, number]\r
  title: string\r
  [key: string]: any\r
}\r
\r
interface Props {\r
  option: Record<string, any>\r
  markersData: MarkerItem[]\r
}\r
\r
const props = withDefaults(defineProps<Props>(), {\r
  option: () => ({}),\r
  markersData: () => []\r
})\r
\r
let AMap = null\r
let map = null\r
let layer = null\r
const containerRef = ref()\r
\r
const initMap = async () => {\r
  ;(window as any)._AMapSecurityConfig = {\r
    securityJsCode: '28e8061333fac3079ee854fef632196e'\r
  }\r
  await AMapLoader.load({\r
    key: '63cb2b48301b336ee761198b2b661410',\r
    version: '2.0',\r
    plugins: ['AMap.Scale']\r
  })\r
    .then((res) => {\r
      AMap = res\r
\r
      map = new AMap.Map(containerRef.value, {\r
        viewMode: '3D', // 是否为3D地图模式\r
        ...props.option\r
      })\r
\r
      layer = new AMap.LabelsLayer({\r
        zooms: [3, 20],\r
        zIndex: 1000,\r
        collision: false\r
      })\r
\r
      map.add(layer)\r
    })\r
    .catch((e) => {\r
      console.log(e)\r
    })\r
}\r
\r
let markers = []\r
let normalMarker\r
let icon = {\r
  type: 'image',\r
  image: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png',\r
  size: [19, 31],\r
  anchor: 'bottom-center'\r
}\r
\r
const initMarkersData = () => {\r
  if (!layer) return\r
\r
  layer.remove(markers)\r
  markers = []\r
\r
  if (!normalMarker) normalMarker = new AMap.Marker({ anchor: 'bottom-center', offset: [0, -40] })\r
\r
  const markersData: any = JSON.parse(JSON.stringify(props.markersData))\r
\r
  markersData.forEach((item) => {\r
    const labelMarker = new AMap.LabelMarker({\r
      extData: item.extData,\r
      position: item.position,\r
      icon\r
    })\r
\r
    labelMarker.on('mouseover', function (e) {\r
      let { position } = e.data.data\r
\r
      if (position) {\r
        const extData = e.target.getExtData()\r
\r
        normalMarker.setContent(\r
          '<div class="amap-info-window">' +\r
            extData.content +\r
            '<div class="amap-info-sharp"></div>' +\r
            '</div>'\r
        )\r
        normalMarker.setPosition(position)\r
        map.add(normalMarker)\r
      }\r
    })\r
\r
    labelMarker.on('mouseout', function () {\r
      map.remove(normalMarker)\r
    })\r
\r
    markers.push(labelMarker)\r
  })\r
\r
  layer.add(markers)\r
}\r
\r
watch(\r
  [() => props.option],\r
  () => {\r
    initMap().then((res) => {\r
      initMarkersData()\r
    })\r
  },\r
  { deep: true }\r
)\r
\r
// watchEffect由于if (!AMap) return追踪initMarkersData失败\r
\r
watch(\r
  [() => props.markersData],\r
  () => {\r
    initMarkersData()\r
  },\r
  { deep: true }\r
)\r
\r
onMounted(() => {\r
  initMap().then((res) => {\r
    initMarkersData()\r
  })\r
})\r
\r
onUnmounted(() => {\r
  map?.destroy()\r
})\r
<\/script>\r
\r
<template>\r
  <div ref="containerRef" class="map-container"></div>\r
</template>\r
\r
<style scoped>\r
.map-container {\r
  width: 100%;\r
  height: 100%;\r
}\r
\r
.map-container :deep(.amap-logo),\r
.map-container :deep(.amap-copyright) {\r
  display: none !important;\r
}\r
\r
:deep(.amap-info-window) {\r
  width: 150px;\r
  color: #999;\r
  background: #fff;\r
  border-radius: 3px;\r
  padding: 3px 7px;\r
  box-shadow: 0 2px 6px 0 rgba(114, 124, 245, 0.5);\r
  position: relative;\r
}\r
:deep(.amap-info-sharp) {\r
  position: absolute;\r
  bottom: 0;\r
  left: 50%;\r
  margin-left: -8px;\r
  margin-bottom: -8px;\r
  border-left: 8px solid transparent;\r
  border-right: 8px solid transparent;\r
  border-top: 8px solid #fff;\r
}\r
</style>\r
`,utilsRaw=`// document.elementsFromPoint(x, y)\r
\r
// 防抖\r
export function debounce(fn, wait) {\r
  let timer = null\r
  return function (...args) {\r
    let context = this\r
\r
    if (timer) clearTimeout(timer)\r
    timer = setTimeout(() => {\r
      fn.apply(context, args)\r
      timer = null\r
    }, wait)\r
  }\r
}\r
// 节流\r
export function throttle(fn, delay) {\r
  let timer = null\r
\r
  return function (...args) {\r
    let context = this\r
\r
    if (!timer) {\r
      fn.apply(context, args)\r
      timer = setTimeout(() => (timer = null), delay)\r
    }\r
  }\r
}\r
// 生成验证规则\r
export function generateRule(ruleType, ruleMessage) {\r
  const rulesObject = {\r
    none: { required: false },\r
    default: { required: true, message: ruleMessage, trigger: 'change' },\r
    phone: {\r
      required: true,\r
      validator: new Function(\r
        'rule',\r
        'value',\r
        'callback',\r
        \`if (value === '') {\r
          callback(new Error('\${ruleMessage}'))\r
        } else {\r
          if (!/^1[3-9]\\\\d{9}$/.test(value)) {\r
            callback(new Error('\${ruleMessage}'))\r
          }\r
          callback()\r
        }\`\r
      ),\r
      trigger: 'blur'\r
    }\r
  }\r
  return rulesObject[ruleType]\r
}\r
// 操作历史\r
export class UndoHistory {\r
  history = []\r
  maxLength = 10\r
  index = -1\r
\r
  constructor() {}\r
\r
  push(state) {\r
    let history = this.history.slice(0, this.index + 1)\r
    history.push(state)\r
    this.index = history.length - 1\r
\r
    if (history.length > this.maxLength) history.shift()\r
\r
    this.history = history\r
  }\r
  // 撤销 fn: (state) => void\r
  undo(fn) {\r
    const { index, history } = this\r
\r
    if (index < 0) return\r
\r
    const state = index === 0 ? history[0] : history[--this.index]\r
\r
    fn(state)\r
  }\r
\r
  redo(fn) {\r
    const { index, history } = this\r
    const length = history.length\r
\r
    if (index > length - 1) return\r
\r
    const state = index === length - 1 ? history[length - 1] : history[++this.index]\r
\r
    fn(state)\r
  }\r
}\r
// 短横线转小驼峰\r
export function kebab2Camel(property) {\r
  if (property.includes('--')) return property\r
\r
  return property.replaceAll(/-(\\w)/g, (str, arg) => \`\${arg.toUpperCase()}\`)\r
}\r
// 小驼峰转短横线\r
export function camel2Kebab(property) {\r
  return property.replaceAll(/[A-Z]/g, (str) => \`-\${str.toLowerCase()}\`)\r
}\r
// 对象转样式\r
export function obj2Style(obj) {\r
  const propertysArr = []\r
\r
  for (const [key, value] of Object.entries(obj)) {\r
    propertysArr.push(\r
      \`\${camel2Kebab(key)}: \${value === '' ? 'unset' : value.toString().replaceAll('"', '')}\`\r
    )\r
  }\r
\r
  return \`{\r
  \${propertysArr.join(';\\n  ')};\r
}\r
\`\r
}\r
// 从全局坐标设置局部位置\r
export function setElStylePos(el, targetNum, pos /*'left' | 'top'*/, scaleEl) {\r
  let { [pos]: posNum } = el.getBoundingClientRect()\r
\r
  // 祖先元素缩放过\r
  const scale = () => {\r
    if (!scaleEl) return 1\r
\r
    const style = window.getComputedStyle(scaleEl)\r
    const transform = style.getPropertyValue('transform')\r
    const match = transform.match(\r
      /matrix\\(([-\\d\\.]+), ([-\\d\\.]+), ([-\\d\\.]+), ([-\\d\\.]+), ([-\\d\\.]+), ([-\\d\\.]+)\\)/\r
    )\r
    let scaleX = +match?.[1] || 1\r
\r
    return scaleX\r
  }\r
\r
  let styleNum = window.getComputedStyle(el).getPropertyValue(pos)\r
  styleNum = Number.parseFloat(styleNum) || 0\r
\r
  el.style[pos] = \`\${(targetNum - posNum) / scale() + styleNum}px\`\r
}\r
\r
export function isComponent(component) {\r
  if (component?.render || component?.setup) return true\r
  return false\r
}\r
\r
export async function text2Img(text) {\r
  const img = new Image()\r
\r
  const canvas = document.createElement('canvas')\r
  const ctx = canvas.getContext('2d')\r
\r
  const height = 15\r
  ctx.font = \`\${height}px math\`\r
  const width = ctx.measureText(text).width\r
  const padding = 10\r
  const doublePadding = padding * 2\r
\r
  ctx.strokeStyle = 'rgb(0 100 200 / 1)'\r
  ctx.strokeRect(0, 0, width + doublePadding, height + doublePadding)\r
  ctx.fillStyle = 'rgb(0 100 200 / 0.5)'\r
  ctx.fillRect(0, 0, width + doublePadding, height + doublePadding)\r
  ctx.fillStyle = '#fff'\r
  ctx.textBaseline = 'top'\r
  ctx.fillText(text, padding, padding)\r
\r
  img.src = canvas.toDataURL()\r
\r
  await new Promise((resolve) => {\r
    img.onload = resolve\r
  })\r
\r
  return img\r
}\r
// 文件转base64\r
export async function file2Base64(file) {\r
  const reader = new FileReader()\r
\r
  const result = new Promise((resolve) => {\r
    reader.addEventListener('load', () => resolve(reader.result))\r
  })\r
\r
  reader.readAsDataURL(file)\r
\r
  return result\r
}\r
// 上传文件\r
export function uploadFile(fn) {\r
  const input = document.createElement('input')\r
  input.setAttribute('type', 'file')\r
  input.click()\r
  input.onchange = function () {\r
    fn?.(input.files[0])\r
  }\r
}\r
// 下载文件\r
export function downloadFile(fileBits, name = '') {\r
  const file = new File([fileBits], name)\r
  const url = URL.createObjectURL(file)\r
  const a = document.createElement('A')\r
  a.download = name\r
  a.href = url\r
  a.click()\r
  URL.revokeObjectURL(url)\r
}\r
// gps坐标转高德坐标\r
export function gps2Amap([longitude, latitude]) {\r
  //纬度转换\r
  function transformLatitude(x, y) {\r
    let num = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x))\r
    num += ((20.0 * Math.sin(6.0 * x * Math.PI) + 20.0 * Math.sin(2.0 * x * Math.PI)) * 2.0) / 3.0\r
    num += ((20.0 * Math.sin(y * Math.PI) + 40.0 * Math.sin((y / 3.0) * Math.PI)) * 2.0) / 3.0\r
    num +=\r
      ((160.0 * Math.sin((y / 12.0) * Math.PI) + 320 * Math.sin((y * Math.PI) / 30.0)) * 2.0) / 3.0\r
    return num\r
  }\r
  //经度转换\r
  function transformLongitude(x, y) {\r
    let num = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x))\r
    num += ((20.0 * Math.sin(6.0 * x * Math.PI) + 20.0 * Math.sin(2.0 * x * Math.PI)) * 2.0) / 3.0\r
    num += ((20.0 * Math.sin(x * Math.PI) + 40.0 * Math.sin((x / 3.0) * Math.PI)) * 2.0) / 3.0\r
    num +=\r
      ((150.0 * Math.sin((x / 12.0) * Math.PI) + 300.0 * Math.sin((x / 30.0) * Math.PI)) * 2.0) /\r
      3.0\r
    return num\r
  }\r
  // 坐标转换\r
  function calculation(longitude, latitude) {\r
    let a = 6378245.0 // 卫星椭球坐标投影到平面地图坐标系的投影因子。\r
    // eslint-disable-next-line @typescript-eslint/no-loss-of-precision\r
    let ee = 0.00669342162296594323 // 椭球的偏心率。\r
    let lat = transformLatitude(longitude - 105.0, latitude - 35.0)\r
    let lng = transformLongitude(longitude - 105.0, latitude - 35.0)\r
    let radLat = (latitude / 180.0) * Math.PI\r
    let magic = Math.sin(radLat)\r
    magic = 1 - ee * magic * magic\r
    let sqrtMagic = Math.sqrt(magic)\r
    lat = (lat * 180.0) / (((a * (1 - ee)) / (magic * sqrtMagic)) * Math.PI)\r
    lng = (lng * 180.0) / ((a / sqrtMagic) * Math.cos(radLat) * Math.PI)\r
    return {\r
      longitude: lng,\r
      latitude: lat\r
    }\r
  }\r
  // 判断是否为国外坐标\r
  function isOutOfChina(longitude, latitude) {\r
    if (longitude < 72.004 || longitude > 137.8347) {\r
      return true\r
    }\r
    if (latitude < 0.8293 || latitude > 55.8271) {\r
      return true\r
    }\r
    return false\r
  }\r
  // GPS坐标 转 高德坐标\r
  function getCoordinate(longitude, latitude) {\r
    let lng = Number(longitude)\r
    let lat = Number(latitude)\r
    if (isOutOfChina(longitude, lat)) {\r
      //国外\r
      return [lng, lat]\r
    } else {\r
      //国内\r
      let obj = calculation(lng, lat)\r
      return [lng + obj.longitude, lat + obj.latitude]\r
    }\r
  }\r
\r
  return getCoordinate(longitude, latitude)\r
}\r
// 百度坐标转高德坐标\r
export function baidu2Amap([lng, lat]) {\r
  let x_pi = (Math.PI * 3000.0) / 180.0\r
  let x = lng - 0.0065\r
  let y = lat - 0.006\r
  let z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_pi)\r
  let theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_pi)\r
  let lngs = z * Math.cos(theta)\r
  let lats = z * Math.sin(theta)\r
\r
  return [lngs, lats]\r
}\r
// 获取祖先元素的可见框\r
export function getVisibleRect(el) {\r
  const parent = el.offsetParent\r
  const style = window.getComputedStyle(parent)\r
\r
  if (style.getPropertyValue('overflow') !== 'visible' || parent.tagName === 'BODY')\r
    return parent.getBoundingClientRect()\r
  else return getVisibleRect(parent)\r
}\r
\r
export function generateUUID() {\r
  if (window.crypto?.randomUUID) return crypto.randomUUID()\r
\r
  const _lut = [\r
    '00',\r
    '01',\r
    '02',\r
    '03',\r
    '04',\r
    '05',\r
    '06',\r
    '07',\r
    '08',\r
    '09',\r
    '0a',\r
    '0b',\r
    '0c',\r
    '0d',\r
    '0e',\r
    '0f',\r
    '10',\r
    '11',\r
    '12',\r
    '13',\r
    '14',\r
    '15',\r
    '16',\r
    '17',\r
    '18',\r
    '19',\r
    '1a',\r
    '1b',\r
    '1c',\r
    '1d',\r
    '1e',\r
    '1f',\r
    '20',\r
    '21',\r
    '22',\r
    '23',\r
    '24',\r
    '25',\r
    '26',\r
    '27',\r
    '28',\r
    '29',\r
    '2a',\r
    '2b',\r
    '2c',\r
    '2d',\r
    '2e',\r
    '2f',\r
    '30',\r
    '31',\r
    '32',\r
    '33',\r
    '34',\r
    '35',\r
    '36',\r
    '37',\r
    '38',\r
    '39',\r
    '3a',\r
    '3b',\r
    '3c',\r
    '3d',\r
    '3e',\r
    '3f',\r
    '40',\r
    '41',\r
    '42',\r
    '43',\r
    '44',\r
    '45',\r
    '46',\r
    '47',\r
    '48',\r
    '49',\r
    '4a',\r
    '4b',\r
    '4c',\r
    '4d',\r
    '4e',\r
    '4f',\r
    '50',\r
    '51',\r
    '52',\r
    '53',\r
    '54',\r
    '55',\r
    '56',\r
    '57',\r
    '58',\r
    '59',\r
    '5a',\r
    '5b',\r
    '5c',\r
    '5d',\r
    '5e',\r
    '5f',\r
    '60',\r
    '61',\r
    '62',\r
    '63',\r
    '64',\r
    '65',\r
    '66',\r
    '67',\r
    '68',\r
    '69',\r
    '6a',\r
    '6b',\r
    '6c',\r
    '6d',\r
    '6e',\r
    '6f',\r
    '70',\r
    '71',\r
    '72',\r
    '73',\r
    '74',\r
    '75',\r
    '76',\r
    '77',\r
    '78',\r
    '79',\r
    '7a',\r
    '7b',\r
    '7c',\r
    '7d',\r
    '7e',\r
    '7f',\r
    '80',\r
    '81',\r
    '82',\r
    '83',\r
    '84',\r
    '85',\r
    '86',\r
    '87',\r
    '88',\r
    '89',\r
    '8a',\r
    '8b',\r
    '8c',\r
    '8d',\r
    '8e',\r
    '8f',\r
    '90',\r
    '91',\r
    '92',\r
    '93',\r
    '94',\r
    '95',\r
    '96',\r
    '97',\r
    '98',\r
    '99',\r
    '9a',\r
    '9b',\r
    '9c',\r
    '9d',\r
    '9e',\r
    '9f',\r
    'a0',\r
    'a1',\r
    'a2',\r
    'a3',\r
    'a4',\r
    'a5',\r
    'a6',\r
    'a7',\r
    'a8',\r
    'a9',\r
    'aa',\r
    'ab',\r
    'ac',\r
    'ad',\r
    'ae',\r
    'af',\r
    'b0',\r
    'b1',\r
    'b2',\r
    'b3',\r
    'b4',\r
    'b5',\r
    'b6',\r
    'b7',\r
    'b8',\r
    'b9',\r
    'ba',\r
    'bb',\r
    'bc',\r
    'bd',\r
    'be',\r
    'bf',\r
    'c0',\r
    'c1',\r
    'c2',\r
    'c3',\r
    'c4',\r
    'c5',\r
    'c6',\r
    'c7',\r
    'c8',\r
    'c9',\r
    'ca',\r
    'cb',\r
    'cc',\r
    'cd',\r
    'ce',\r
    'cf',\r
    'd0',\r
    'd1',\r
    'd2',\r
    'd3',\r
    'd4',\r
    'd5',\r
    'd6',\r
    'd7',\r
    'd8',\r
    'd9',\r
    'da',\r
    'db',\r
    'dc',\r
    'dd',\r
    'de',\r
    'df',\r
    'e0',\r
    'e1',\r
    'e2',\r
    'e3',\r
    'e4',\r
    'e5',\r
    'e6',\r
    'e7',\r
    'e8',\r
    'e9',\r
    'ea',\r
    'eb',\r
    'ec',\r
    'ed',\r
    'ee',\r
    'ef',\r
    'f0',\r
    'f1',\r
    'f2',\r
    'f3',\r
    'f4',\r
    'f5',\r
    'f6',\r
    'f7',\r
    'f8',\r
    'f9',\r
    'fa',\r
    'fb',\r
    'fc',\r
    'fd',\r
    'fe',\r
    'ff'\r
  ]\r
  const d0 = (Math.random() * 0xffffffff) | 0\r
  const d1 = (Math.random() * 0xffffffff) | 0\r
  const d2 = (Math.random() * 0xffffffff) | 0\r
  const d3 = (Math.random() * 0xffffffff) | 0\r
  const uuid =\r
    _lut[d0 & 0xff] +\r
    _lut[(d0 >> 8) & 0xff] +\r
    _lut[(d0 >> 16) & 0xff] +\r
    _lut[(d0 >> 24) & 0xff] +\r
    '-' +\r
    _lut[d1 & 0xff] +\r
    _lut[(d1 >> 8) & 0xff] +\r
    '-' +\r
    _lut[((d1 >> 16) & 0x0f) | 0x40] +\r
    _lut[(d1 >> 24) & 0xff] +\r
    '-' +\r
    _lut[(d2 & 0x3f) | 0x80] +\r
    _lut[(d2 >> 8) & 0xff] +\r
    '-' +\r
    _lut[(d2 >> 16) & 0xff] +\r
    _lut[(d2 >> 24) & 0xff] +\r
    _lut[d3 & 0xff] +\r
    _lut[(d3 >> 8) & 0xff] +\r
    _lut[(d3 >> 16) & 0xff] +\r
    _lut[(d3 >> 24) & 0xff]\r
\r
  // .toLowerCase() here flattens concatenated strings to save heap memory space.\r
  return uuid.toLowerCase()\r
}\r
`;class NMap extends ItemNode{constructor(node){super(node);Zp(this,"isNMap",!0);Zp(this,"isChartNode",!0);if(this.watchStateOptions.push({value:"initMarkersData",label:"刷新点标记数据"}),!node){this.path="./components/NMap/NMap.tsx",this.name="地图";const r=this.props.style;this.props.style={...r,width:"300px",height:"200px",flexShrink:"0"},this.props.markersDataUrl="",this.props.markersDataFn=`function (res) {
  return [{
    position: [
      Number,
      Number
    ],
    extData: {
      content: String 
    }
  }]
}`,this.props.option={center:[113.658097,34.745795],zoom:11,mapStyle:"amap://styles/normal"},this.props.coordType="amap"}const pComponent=this.component;this.component=markRaw(defineComponent(props=>{const markersData=ref([]),initMarkersData=async()=>{this.props.markersDataUrl&&await request$1({url:this.props.markersDataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.markersDataFn)try{const resData=eval(`(${this.props.markersDataFn})`)(res);resData.forEach(r=>{r.position=r.position.map(a=>Number(a)),this.props.coordType=="gps"&&(r.position=gps2Amap(r.position)),this.props.coordType=="baidu"&&(r.position=baidu2Amap(r.position))}),markersData.value=resData}catch(r){}})},initData=async()=>{initMarkersData()},initDataDebounce=debounce(()=>{markersData.value=[],initData()},1e3);watch([()=>this.props.markersDataUrl,()=>this.props.markersDataFn,()=>this.props.coordType],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initMarkersData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initMarkersData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(Map$1,{option:this.props.option,markersData:markersData.value},null)]})},{name:"NMap"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.32, 0.3)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("地图样式")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.option.mapStyle,"onUpdate:modelValue":r=>this.props.option.mapStyle=r},{default:()=>[createVNode$1(ElRadioButton,{value:"amap://styles/normal",label:"标准",size:"small"},null),createVNode$1(ElRadioButton,{value:"amap://styles/darkblue",label:"黑蓝",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("地图缩放级别")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:Number(this.props.option.zoom)||0,"onUpdate:modelValue":r=>this.props.option.zoom=r,min:0,"controls-position":"right",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("地图中心")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:Number(this.props.option.center[0])||0,"onUpdate:modelValue":r=>this.props.option.center[0]=r,min:0,controls:!1,size:"small"},null),createVNode$1(ElInputNumber,{modelValue:Number(this.props.option.center[1])||0,"onUpdate:modelValue":r=>this.props.option.center[1]=r,min:0,controls:!1,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("原坐标系")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.coordType,"onUpdate:modelValue":r=>this.props.coordType=r},{default:()=>[createVNode$1(ElRadioButton,{value:"amap",label:"高德",size:"small"},null),createVNode$1(ElRadioButton,{value:"gps",label:"gps",size:"small"},null),createVNode$1(ElRadioButton,{value:"baidu",label:"百度",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("点标记数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.markersDataUrl,"onUpdate:modelValue":r=>this.props.markersDataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.markersDataFn,"onUpdate:modelValue":r=>this.props.markersDataFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_option`,c=`${a}_${s}_markersData`,p=`${a}_${s}_initMarkersData`,d=`${a}_${s}_initData`,_=JSON.stringify(this.props.option);return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"./imports/Map.vue":{default:"Map"},"./imports/request.js":{default:"request"},"./imports/utils.js":{gps2Amap:"gps2Amap",baidu2Amap:"baidu2Amap"}},r.importFiles={...r.importFiles,"Map.vue":MapRaw,"request.js":requestRaw,"utils.js":utilsRaw},r.script=`
${r.script}
const ${u} = ref(${_})
const ${c} = ref([])
const ${p} = async () => {
  await request({
    url: '${this.props.markersDataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    const resData = (${this.props.markersDataFn||"() => []"})(res)
    resData.forEach((item) => {
      ${this.props.coordType=="gps"?"item.position = gps2Amap(item.position)":""}
      ${this.props.coordType=="baidu"?"item.position = baidu2Amap(item.position)":""}
    })
    ${c}.value = resData
  })
}

const ${d} = async () => {
  ${p}()
}

${d}()
${this.props.watchState.length>0?`
${this.props.watchState.map(ja=>{if(ja.type=="initMarkersDataVar")return`watch(() => state.${ja.stateProperty}, ${p})`}).join(`
`)}
    `:""}
    `,r.template=r.template.replace("<slot></slot>",`
  <Map :option="${u}" :markersData="${c}"></Map>
      `),r}}use([install$15,install$g]);use(installLabelLayout);function derive(n,r,a){typeof r=="object"&&(a=r,r=null);var s=this,o;if(!(n instanceof Function)){o=[];for(var u in n)n.hasOwnProperty(u)&&o.push(u)}var c=function(d){if(s.apply(this,arguments),n instanceof Function?extend(this,n.call(this,d)):extendWithPropList(this,n,o),this.constructor===c)for(var _=c.__initializers__,ja=0;ja<_.length;ja++)_[ja].apply(this,arguments)};c.__super__=s,s.__initializers__?c.__initializers__=s.__initializers__.slice():c.__initializers__=[],r&&c.__initializers__.push(r);var p=function(){};return p.prototype=s.prototype,c.prototype=new p,c.prototype.constructor=c,extend(c.prototype,a),c.extend=s.extend,c.derive=s.extend,c}function extend(n,r){if(r)for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])}function extendWithPropList(n,r,a){for(var s=0;s<a.length;s++){var o=a[s];n[o]=r[o]}}const extendMixin={extend:derive,derive};function Handler(n,r){this.action=n,this.context=r}var notifier={trigger:function(n){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(n)){var r=this.__handlers__[n],a=r.length,s=-1,o=arguments;switch(o.length){case 1:for(;++s<a;)r[s].action.call(r[s].context);return;case 2:for(;++s<a;)r[s].action.call(r[s].context,o[1]);return;case 3:for(;++s<a;)r[s].action.call(r[s].context,o[1],o[2]);return;case 4:for(;++s<a;)r[s].action.call(r[s].context,o[1],o[2],o[3]);return;case 5:for(;++s<a;)r[s].action.call(r[s].context,o[1],o[2],o[3],o[4]);return;default:for(;++s<a;)r[s].action.apply(r[s].context,Array.prototype.slice.call(o,1));return}}},on:function(n,r,a){if(!(!n||!r)){var s=this.__handlers__||(this.__handlers__={});if(!s[n])s[n]=[];else if(this.has(n,r))return;var o=new Handler(r,a||this);return s[n].push(o),this}},once:function(n,r,a){if(!n||!r)return;var s=this;function o(){s.off(n,o),r.apply(this,arguments)}return this.on(n,o,a)},before:function(n,r,a){if(!(!n||!r))return n="before"+n,this.on(n,r,a)},after:function(n,r,a){if(!(!n||!r))return n="after"+n,this.on(n,r,a)},success:function(n,r){return this.once("success",n,r)},error:function(n,r){return this.once("error",n,r)},off:function(n,r){var a=this.__handlers__||(this.__handlers__={});if(!r){a[n]=[];return}if(a[n]){for(var s=a[n],o=[],u=0;u<s.length;u++)r&&s[u].action!==r&&o.push(s[u]);a[n]=o}return this},has:function(n,r){var a=this.__handlers__;if(!a||!a[n])return!1;for(var s=a[n],o=0;o<s.length;o++)if(s[o].action===r)return!0}},guid=0,ArrayProto=Array.prototype,nativeForEach=ArrayProto.forEach,util={genGUID:function(){return++guid},relative2absolute:function(n,r){if(!r||n.match(/^\//))return n;for(var a=n.split("/"),s=r.split("/"),o=a[0];o==="."||o==="..";)o===".."&&s.pop(),a.shift(),o=a[0];return s.join("/")+"/"+a.join("/")},extend:function(n,r){if(r)for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a]);return n},defaults:function(n,r){if(r)for(var a in r)n[a]===void 0&&(n[a]=r[a]);return n},extendWithPropList:function(n,r,a){if(r)for(var s=0;s<a.length;s++){var o=a[s];n[o]=r[o]}return n},defaultsWithPropList:function(n,r,a){if(r)for(var s=0;s<a.length;s++){var o=a[s];n[o]==null&&(n[o]=r[o])}return n},each:function(n,r,a){if(n&&r)if(n.forEach&&n.forEach===nativeForEach)n.forEach(r,a);else if(n.length===+n.length)for(var s=0,o=n.length;s<o;s++)r.call(a,n[s],s,n);else for(var u in n)n.hasOwnProperty(u)&&r.call(a,n[u],u,n)},isObject:function(n){return n===Object(n)},isArray:function(n){return Array.isArray(n)},isArrayLike:function(n){return n?n.length===+n.length:!1},clone:function(n){if(util.isObject(n)){if(util.isArray(n))return n.slice();if(util.isArrayLike(n)){for(var r=new n.constructor(n.length),a=0;a<n.length;a++)r[a]=n[a];return r}else return util.extend({},n)}else return n}},Base=function(){this.__uid__=util.genGUID()};Base.__initializers__=[function(n){util.extend(this,n)}];util.extend(Base,extendMixin);util.extend(Base.prototype,notifier);var EXTENSION_LIST=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],PARAMETER_NAMES=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function GLInfo(n){for(var r={},a={},s=0;s<EXTENSION_LIST.length;s++){var o=EXTENSION_LIST[s];c(o)}for(var s=0;s<PARAMETER_NAMES.length;s++){var u=PARAMETER_NAMES[s];a[u]=n.getParameter(n[u])}this.getExtension=function(p){return p in r||c(p),r[p]},this.getParameter=function(p){return a[p]};function c(p){if(n.getExtension){var d=n.getExtension(p);d||(d=n.getExtension("MOZ_"+p)),d||(d=n.getExtension("WEBKIT_"+p)),r[p]=d}}}const glenum={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444};function get(n){var r=new XMLHttpRequest;r.open("get",n.url),r.responseType=n.responseType||"text",n.onprogress&&(r.onprogress=function(a){if(a.lengthComputable){var s=a.loaded/a.total;n.onprogress(s,a.loaded,a.total)}else n.onprogress(null)}),r.onload=function(a){r.status>=400?n.onerror&&n.onerror():n.onload&&n.onload(r.response)},n.onerror&&(r.onerror=n.onerror),r.send(null)}const request={get};var supportWebGL,vendor={};vendor.supportWebGL=function(){if(supportWebGL==null)try{var n=document.createElement("canvas"),r=n.getContext("webgl")||n.getContext("experimental-webgl");if(!r)throw new Error}catch{supportWebGL=!1}return supportWebGL};vendor.Int8Array=typeof Int8Array>"u"?Array:Int8Array;vendor.Uint8Array=typeof Uint8Array>"u"?Array:Uint8Array;vendor.Uint16Array=typeof Uint16Array>"u"?Array:Uint16Array;vendor.Uint32Array=typeof Uint32Array>"u"?Array:Uint32Array;vendor.Int16Array=typeof Int16Array>"u"?Array:Int16Array;vendor.Float32Array=typeof Float32Array>"u"?Array:Float32Array;vendor.Float64Array=typeof Float64Array>"u"?Array:Float64Array;var g$1={};typeof window<"u"?g$1=window:typeof global<"u"&&(g$1=global);vendor.requestAnimationFrame=g$1.requestAnimationFrame||g$1.msRequestAnimationFrame||g$1.mozRequestAnimationFrame||g$1.webkitRequestAnimationFrame||function(n){setTimeout(n,16)};vendor.createCanvas=function(){return document.createElement("canvas")};vendor.createImage=function(){return new g$1.Image};vendor.request={get:request.get};vendor.addEventListener=function(n,r,a,s){n.addEventListener(r,a,s)};vendor.removeEventListener=function(n,r,a){n.removeEventListener(r,a)};var LinkedList=function(){this.head=null,this.tail=null,this._length=0};LinkedList.prototype.insert=function(n){var r=new LinkedList.Entry(n);return this.insertEntry(r),r};LinkedList.prototype.insertAt=function(n,r){if(!(n<0)){for(var a=this.head,s=0;a&&s!=n;)a=a.next,s++;if(a){var o=new LinkedList.Entry(r),u=a.prev;u?(u.next=o,o.prev=u):this.head=o,o.next=a,a.prev=o}else this.insert(r)}};LinkedList.prototype.insertBeforeEntry=function(n,r){var a=new LinkedList.Entry(n),s=r.prev;s?(s.next=a,a.prev=s):this.head=a,a.next=r,r.prev=a,this._length++};LinkedList.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,this.tail=n):this.head=this.tail=n,this._length++};LinkedList.prototype.remove=function(n){var r=n.prev,a=n.next;r?r.next=a:this.head=a,a?a.prev=r:this.tail=r,n.next=n.prev=null,this._length--};LinkedList.prototype.removeAt=function(n){if(!(n<0)){for(var r=this.head,a=0;r&&a!=n;)r=r.next,a++;if(r)return this.remove(r),r.value}};LinkedList.prototype.getHead=function(){if(this.head)return this.head.value};LinkedList.prototype.getTail=function(){if(this.tail)return this.tail.value};LinkedList.prototype.getAt=function(n){if(!(n<0)){for(var r=this.head,a=0;r&&a!=n;)r=r.next,a++;return r.value}};LinkedList.prototype.indexOf=function(n){for(var r=this.head,a=0;r;){if(r.value===n)return a;r=r.next,a++}};LinkedList.prototype.length=function(){return this._length};LinkedList.prototype.isEmpty=function(){return this._length===0};LinkedList.prototype.forEach=function(n,r){for(var a=this.head,s=0,o=typeof r<"u";a;)o?n.call(r,a.value,s):n(a.value,s),a=a.next,s++};LinkedList.prototype.clear=function(){this.tail=this.head=null,this._length=0};LinkedList.Entry=function(n){this.value=n,this.next=null,this.prev=null};var LRU=function(n){this._list=new LinkedList,this._map={},this._maxSize=n||10};LRU.prototype.setMaxSize=function(n){this._maxSize=n};LRU.prototype.put=function(n,r){if(!this._map.hasOwnProperty(n)){var a=this._list.length();if(a>=this._maxSize&&a>0){var s=this._list.head;this._list.remove(s),delete this._map[s.key]}var o=this._list.insert(r);o.key=n,this._map[n]=o}};LRU.prototype.get=function(n){var r=this._map[n];if(this._map.hasOwnProperty(n))return r!==this._list.tail&&(this._list.remove(r),this._list.insertEntry(r)),r.value};LRU.prototype.remove=function(n){var r=this._map[n];typeof r<"u"&&(delete this._map[n],this._list.remove(r))};LRU.prototype.clear=function(){this._list.clear(),this._map={}};var colorUtil={},kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(n){return n=Math.round(n),n<0?0:n>255?255:n}function clampCssAngle(n){return n=Math.round(n),n<0?0:n>360?360:n}function clampCssFloat(n){return n<0?0:n>1?1:n}function parseCssInt(n){return n.length&&n.charAt(n.length-1)==="%"?clampCssByte(parseFloat(n)/100*255):clampCssByte(parseInt(n,10))}function parseCssFloat(n){return n.length&&n.charAt(n.length-1)==="%"?clampCssFloat(parseFloat(n)/100):clampCssFloat(parseFloat(n))}function cssHueToRgb(n,r,a){return a<0?a+=1:a>1&&(a-=1),a*6<1?n+(r-n)*a*6:a*2<1?r:a*3<2?n+(r-n)*(2/3-a)*6:n}function lerpNumber(n,r,a){return n+(r-n)*a}function setRgba(n,r,a,s,o){return n[0]=r,n[1]=a,n[2]=s,n[3]=o,n}function copyRgba(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(n,r){lastRemovedArr&&copyRgba(lastRemovedArr,r),lastRemovedArr=colorCache.put(n,lastRemovedArr||r.slice())}colorUtil.parse=function(n,r){if(n){r=r||[];var a=colorCache.get(n);if(a)return copyRgba(r,a);n=n+"";var s=n.replace(/ /g,"").toLowerCase();if(s in kCSSColorTable)return copyRgba(r,kCSSColorTable[s]),putToCache(n,r),r;if(s.charAt(0)==="#"){if(s.length===4){var o=parseInt(s.substr(1),16);if(!(o>=0&&o<=4095)){setRgba(r,0,0,0,1);return}return setRgba(r,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,1),putToCache(n,r),r}else if(s.length===7){var o=parseInt(s.substr(1),16);if(!(o>=0&&o<=16777215)){setRgba(r,0,0,0,1);return}return setRgba(r,(o&16711680)>>16,(o&65280)>>8,o&255,1),putToCache(n,r),r}return}var u=s.indexOf("("),c=s.indexOf(")");if(u!==-1&&c+1===s.length){var p=s.substr(0,u),d=s.substr(u+1,c-(u+1)).split(","),_=1;switch(p){case"rgba":if(d.length!==4){setRgba(r,0,0,0,1);return}_=parseCssFloat(d.pop());case"rgb":if(d.length!==3){setRgba(r,0,0,0,1);return}return setRgba(r,parseCssInt(d[0]),parseCssInt(d[1]),parseCssInt(d[2]),_),putToCache(n,r),r;case"hsla":if(d.length!==4){setRgba(r,0,0,0,1);return}return d[3]=parseCssFloat(d[3]),hsla2rgba(d,r),putToCache(n,r),r;case"hsl":if(d.length!==3){setRgba(r,0,0,0,1);return}return hsla2rgba(d,r),putToCache(n,r),r;default:return}}setRgba(r,0,0,0,1)}};colorUtil.parseToFloat=function(n,r){if(r=colorUtil.parse(n,r),!!r)return r[0]/=255,r[1]/=255,r[2]/=255,r};function hsla2rgba(n,r){var a=(parseFloat(n[0])%360+360)%360/360,s=parseCssFloat(n[1]),o=parseCssFloat(n[2]),u=o<=.5?o*(s+1):o+s-o*s,c=o*2-u;return r=r||[],setRgba(r,clampCssByte(cssHueToRgb(c,u,a+1/3)*255),clampCssByte(cssHueToRgb(c,u,a)*255),clampCssByte(cssHueToRgb(c,u,a-1/3)*255),1),n.length===4&&(r[3]=n[3]),r}function rgba2hsla(n){if(n){var r=n[0]/255,a=n[1]/255,s=n[2]/255,o=Math.min(r,a,s),u=Math.max(r,a,s),c=u-o,p=(u+o)/2,d,_;if(c===0)d=0,_=0;else{p<.5?_=c/(u+o):_=c/(2-u-o);var ja=((u-r)/6+c/2)/c,Ja=((u-a)/6+c/2)/c,ec=((u-s)/6+c/2)/c;r===u?d=ec-Ja:a===u?d=1/3+ja-ec:s===u&&(d=2/3+Ja-ja),d<0&&(d+=1),d>1&&(d-=1)}var tc=[d*360,_,p];return n[3]!=null&&tc.push(n[3]),tc}}colorUtil.lift=function(n,r){var a=colorUtil.parse(n);if(a){for(var s=0;s<3;s++)r<0?a[s]=a[s]*(1-r)|0:a[s]=(255-a[s])*r+a[s]|0;return colorUtil.stringify(a,a.length===4?"rgba":"rgb")}};colorUtil.toHex=function(n){var r=colorUtil.parse(n);if(r)return((1<<24)+(r[0]<<16)+(r[1]<<8)+ +r[2]).toString(16).slice(1)};colorUtil.fastLerp=function(n,r,a){if(!(!(r&&r.length)||!(n>=0&&n<=1))){a=a||[];var s=n*(r.length-1),o=Math.floor(s),u=Math.ceil(s),c=r[o],p=r[u],d=s-o;return a[0]=clampCssByte(lerpNumber(c[0],p[0],d)),a[1]=clampCssByte(lerpNumber(c[1],p[1],d)),a[2]=clampCssByte(lerpNumber(c[2],p[2],d)),a[3]=clampCssFloat(lerpNumber(c[3],p[3],d)),a}};colorUtil.fastMapToColor=colorUtil.fastLerp;colorUtil.lerp=function(n,r,a){if(!(!(r&&r.length)||!(n>=0&&n<=1))){var s=n*(r.length-1),o=Math.floor(s),u=Math.ceil(s),c=colorUtil.parse(r[o]),p=colorUtil.parse(r[u]),d=s-o,_=colorUtil.stringify([clampCssByte(lerpNumber(c[0],p[0],d)),clampCssByte(lerpNumber(c[1],p[1],d)),clampCssByte(lerpNumber(c[2],p[2],d)),clampCssFloat(lerpNumber(c[3],p[3],d))],"rgba");return a?{color:_,leftIndex:o,rightIndex:u,value:s}:_}};colorUtil.mapToColor=colorUtil.lerp;colorUtil.modifyHSL=function(n,r,a,s){if(n=colorUtil.parse(n),n)return n=rgba2hsla(n),r!=null&&(n[0]=clampCssAngle(r)),a!=null&&(n[1]=parseCssFloat(a)),s!=null&&(n[2]=parseCssFloat(s)),colorUtil.stringify(hsla2rgba(n),"rgba")};colorUtil.modifyAlpha=function(n,r){if(n=colorUtil.parse(n),n&&r!=null)return n[3]=clampCssFloat(r),colorUtil.stringify(n,"rgba")};colorUtil.stringify=function(n,r){if(!(!n||!n.length)){var a=n[0]+","+n[1]+","+n[2];return(r==="rgba"||r==="hsva"||r==="hsla")&&(a+=","+n[3]),r+"("+a+")"}};var parseColor=colorUtil.parseToFloat,programKeyCache$1={};function getDefineCode$1(n){var r=Object.keys(n);r.sort();for(var a=[],s=0;s<r.length;s++){var o=r[s],u=n[o];u===null?a.push(o):a.push(o+" "+u.toString())}return a.join(`
`)}function getProgramKey$1(n,r,a){a.sort();for(var s=[],o=0;o<a.length;o++){var u=a[o];s.push(u)}var c=getDefineCode$1(n)+`
`+getDefineCode$1(r)+`
`+s.join(`
`);if(programKeyCache$1[c])return programKeyCache$1[c];var p=util.genGUID();return programKeyCache$1[c]=p,p}var Material=Base.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(n,r){r===void 0&&console.warn('Uniform value "'+n+'" is undefined');var a=this.uniforms[n];a&&(typeof r=="string"&&(r=parseColor(r)||r),a.value=r,this.autoUpdateTextureStatus&&a.type==="t"&&(r?this.enableTexture(n):this.disableTexture(n)))},setUniforms:function(n){for(var r in n){var a=n[r];this.setUniform(r,a)}},isUniformEnabled:function(n){return this._enabledUniforms.indexOf(n)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(n,r){if(typeof n=="object")for(var a in n){var s=n[a];this.setUniform(a,s)}else this.setUniform(n,r)},get:function(n){var r=this.uniforms[n];if(r)return r.value},attachShader:function(n,r){var a=this.uniforms;this.uniforms=n.createUniforms(),this.shader=n;var s=this.uniforms;this._enabledUniforms=Object.keys(s),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(_){var ja=this.uniforms[_].type;return ja==="t"||ja==="tv"},this);var o=this.vertexDefines,u=this.fragmentDefines;if(this.vertexDefines=util.clone(n.vertexDefines),this.fragmentDefines=util.clone(n.fragmentDefines),r){for(var c in a)s[c]&&(s[c].value=a[c].value);util.defaults(this.vertexDefines,o),util.defaults(this.fragmentDefines,u)}var p={};for(var d in n.textures)p[d]={shaderType:n.textures[d].shaderType,type:n.textures[d].type,enabled:r&&this._textureStatus[d]?this._textureStatus[d].enabled:!1};this._textureStatus=p,this._programKey=""},clone:function(){var n=new this.constructor({name:this.name,shader:this.shader});for(var r in this.uniforms)n.uniforms[r].value=this.uniforms[r].value;return n.depthTest=this.depthTest,n.depthMask=this.depthMask,n.transparent=this.transparent,n.blend=this.blend,n.vertexDefines=util.clone(this.vertexDefines),n.fragmentDefines=util.clone(this.fragmentDefines),n.enableTexture(this.getEnabledTextures()),n.precision=this.precision,n},define:function(n,r,a){var s=this.vertexDefines,o=this.fragmentDefines;n!=="vertex"&&n!=="fragment"&&n!=="both"&&arguments.length<3&&(a=r,r=n,n="both"),a=a??null,(n==="vertex"||n==="both")&&s[r]!==a&&(s[r]=a,this._programKey=""),(n==="fragment"||n==="both")&&o[r]!==a&&(o[r]=a,n!=="both"&&(this._programKey=""))},undefine:function(n,r){n!=="vertex"&&n!=="fragment"&&n!=="both"&&arguments.length<2&&(r=n,n="both"),(n==="vertex"||n==="both")&&this.isDefined("vertex",r)&&(delete this.vertexDefines[r],this._programKey=""),(n==="fragment"||n==="both")&&this.isDefined("fragment",r)&&(delete this.fragmentDefines[r],n!=="both"&&(this._programKey=""))},isDefined:function(n,r){switch(n){case"vertex":return this.vertexDefines[r]!==void 0;case"fragment":return this.fragmentDefines[r]!==void 0}},getDefine:function(n,r){switch(n){case"vertex":return this.vertexDefines[r];case"fragment":return this.fragmentDefines[r]}},enableTexture:function(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)this.enableTexture(n[r]);return}var a=this._textureStatus[n];if(a){var s=a.enabled;s||(a.enabled=!0,this._programKey="")}},enableTexturesAll:function(){var n=this._textureStatus;for(var r in n)n[r].enabled=!0;this._programKey=""},disableTexture:function(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)this.disableTexture(n[r]);return}var a=this._textureStatus[n];if(a){var s=!a.enabled;s||(a.enabled=!1,this._programKey="")}},disableTexturesAll:function(){var n=this._textureStatus;for(var r in n)n[r].enabled=!1;this._programKey=""},isTextureEnabled:function(n){var r=this._textureStatus;return!!r[n]&&r[n].enabled},getEnabledTextures:function(){var n=[],r=this._textureStatus;for(var a in r)r[a].enabled&&n.push(a);return n},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=getProgramKey$1(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}}),GLMAT_EPSILON=1e-6,GLMAT_ARRAY_TYPE=Array,GLMAT_RANDOM$1=Math.random,vec2$3={};vec2$3.create=function(){var n=new GLMAT_ARRAY_TYPE(2);return n[0]=0,n[1]=0,n};vec2$3.clone=function(n){var r=new GLMAT_ARRAY_TYPE(2);return r[0]=n[0],r[1]=n[1],r};vec2$3.fromValues=function(n,r){var a=new GLMAT_ARRAY_TYPE(2);return a[0]=n,a[1]=r,a};vec2$3.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n};vec2$3.set=function(n,r,a){return n[0]=r,n[1]=a,n};vec2$3.add=function(n,r,a){return n[0]=r[0]+a[0],n[1]=r[1]+a[1],n};vec2$3.subtract=function(n,r,a){return n[0]=r[0]-a[0],n[1]=r[1]-a[1],n};vec2$3.sub=vec2$3.subtract;vec2$3.multiply=function(n,r,a){return n[0]=r[0]*a[0],n[1]=r[1]*a[1],n};vec2$3.mul=vec2$3.multiply;vec2$3.divide=function(n,r,a){return n[0]=r[0]/a[0],n[1]=r[1]/a[1],n};vec2$3.div=vec2$3.divide;vec2$3.min=function(n,r,a){return n[0]=Math.min(r[0],a[0]),n[1]=Math.min(r[1],a[1]),n};vec2$3.max=function(n,r,a){return n[0]=Math.max(r[0],a[0]),n[1]=Math.max(r[1],a[1]),n};vec2$3.scale=function(n,r,a){return n[0]=r[0]*a,n[1]=r[1]*a,n};vec2$3.scaleAndAdd=function(n,r,a,s){return n[0]=r[0]+a[0]*s,n[1]=r[1]+a[1]*s,n};vec2$3.distance=function(n,r){var a=r[0]-n[0],s=r[1]-n[1];return Math.sqrt(a*a+s*s)};vec2$3.dist=vec2$3.distance;vec2$3.squaredDistance=function(n,r){var a=r[0]-n[0],s=r[1]-n[1];return a*a+s*s};vec2$3.sqrDist=vec2$3.squaredDistance;vec2$3.length=function(n){var r=n[0],a=n[1];return Math.sqrt(r*r+a*a)};vec2$3.len=vec2$3.length;vec2$3.squaredLength=function(n){var r=n[0],a=n[1];return r*r+a*a};vec2$3.sqrLen=vec2$3.squaredLength;vec2$3.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n};vec2$3.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n};vec2$3.normalize=function(n,r){var a=r[0],s=r[1],o=a*a+s*s;return o>0&&(o=1/Math.sqrt(o),n[0]=r[0]*o,n[1]=r[1]*o),n};vec2$3.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]};vec2$3.cross=function(n,r,a){var s=r[0]*a[1]-r[1]*a[0];return n[0]=n[1]=0,n[2]=s,n};vec2$3.lerp=function(n,r,a,s){var o=r[0],u=r[1];return n[0]=o+s*(a[0]-o),n[1]=u+s*(a[1]-u),n};vec2$3.random=function(n,r){r=r||1;var a=GLMAT_RANDOM()*2*Math.PI;return n[0]=Math.cos(a)*r,n[1]=Math.sin(a)*r,n};vec2$3.transformMat2=function(n,r,a){var s=r[0],o=r[1];return n[0]=a[0]*s+a[2]*o,n[1]=a[1]*s+a[3]*o,n};vec2$3.transformMat2d=function(n,r,a){var s=r[0],o=r[1];return n[0]=a[0]*s+a[2]*o+a[4],n[1]=a[1]*s+a[3]*o+a[5],n};vec2$3.transformMat3=function(n,r,a){var s=r[0],o=r[1];return n[0]=a[0]*s+a[3]*o+a[6],n[1]=a[1]*s+a[4]*o+a[7],n};vec2$3.transformMat4=function(n,r,a){var s=r[0],o=r[1];return n[0]=a[0]*s+a[4]*o+a[12],n[1]=a[1]*s+a[5]*o+a[13],n};vec2$3.forEach=function(){var n=vec2$3.create();return function(r,a,s,o,u,c){var p,d;for(a||(a=2),s||(s=0),o?d=Math.min(o*a+s,r.length):d=r.length,p=s;p<d;p+=a)n[0]=r[p],n[1]=r[p+1],u(n,n,c),r[p]=n[0],r[p+1]=n[1];return r}}();var Vector2=function(n,r){n=n||0,r=r||0,this.array=vec2$3.fromValues(n,r),this._dirty=!0};Vector2.prototype={constructor:Vector2,add:function(n){return vec2$3.add(this.array,this.array,n.array),this._dirty=!0,this},set:function(n,r){return this.array[0]=n,this.array[1]=r,this._dirty=!0,this},setArray:function(n){return this.array[0]=n[0],this.array[1]=n[1],this._dirty=!0,this},clone:function(){return new Vector2(this.x,this.y)},copy:function(n){return vec2$3.copy(this.array,n.array),this._dirty=!0,this},cross:function(n,r){return vec2$3.cross(n.array,this.array,r.array),n._dirty=!0,this},dist:function(n){return vec2$3.dist(this.array,n.array)},distance:function(n){return vec2$3.distance(this.array,n.array)},div:function(n){return vec2$3.div(this.array,this.array,n.array),this._dirty=!0,this},divide:function(n){return vec2$3.divide(this.array,this.array,n.array),this._dirty=!0,this},dot:function(n){return vec2$3.dot(this.array,n.array)},len:function(){return vec2$3.len(this.array)},length:function(){return vec2$3.length(this.array)},lerp:function(n,r,a){return vec2$3.lerp(this.array,n.array,r.array,a),this._dirty=!0,this},min:function(n){return vec2$3.min(this.array,this.array,n.array),this._dirty=!0,this},max:function(n){return vec2$3.max(this.array,this.array,n.array),this._dirty=!0,this},mul:function(n){return vec2$3.mul(this.array,this.array,n.array),this._dirty=!0,this},multiply:function(n){return vec2$3.multiply(this.array,this.array,n.array),this._dirty=!0,this},negate:function(){return vec2$3.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return vec2$3.normalize(this.array,this.array),this._dirty=!0,this},random:function(n){return vec2$3.random(this.array,n),this._dirty=!0,this},scale:function(n){return vec2$3.scale(this.array,this.array,n),this._dirty=!0,this},scaleAndAdd:function(n,r){return vec2$3.scaleAndAdd(this.array,this.array,n.array,r),this._dirty=!0,this},sqrDist:function(n){return vec2$3.sqrDist(this.array,n.array)},squaredDistance:function(n){return vec2$3.squaredDistance(this.array,n.array)},sqrLen:function(){return vec2$3.sqrLen(this.array)},squaredLength:function(){return vec2$3.squaredLength(this.array)},sub:function(n){return vec2$3.sub(this.array,this.array,n.array),this._dirty=!0,this},subtract:function(n){return vec2$3.subtract(this.array,this.array,n.array),this._dirty=!0,this},transformMat2:function(n){return vec2$3.transformMat2(this.array,this.array,n.array),this._dirty=!0,this},transformMat2d:function(n){return vec2$3.transformMat2d(this.array,this.array,n.array),this._dirty=!0,this},transformMat3:function(n){return vec2$3.transformMat3(this.array,this.array,n.array),this._dirty=!0,this},transformMat4:function(n){return vec2$3.transformMat4(this.array,this.array,n.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};if(Object.defineProperty){var proto$4=Vector2.prototype;Object.defineProperty(proto$4,"x",{get:function(){return this.array[0]},set:function(n){this.array[0]=n,this._dirty=!0}}),Object.defineProperty(proto$4,"y",{get:function(){return this.array[1]},set:function(n){this.array[1]=n,this._dirty=!0}})}Vector2.add=function(n,r,a){return vec2$3.add(n.array,r.array,a.array),n._dirty=!0,n};Vector2.set=function(n,r,a){return vec2$3.set(n.array,r,a),n._dirty=!0,n};Vector2.copy=function(n,r){return vec2$3.copy(n.array,r.array),n._dirty=!0,n};Vector2.cross=function(n,r,a){return vec2$3.cross(n.array,r.array,a.array),n._dirty=!0,n};Vector2.dist=function(n,r){return vec2$3.distance(n.array,r.array)};Vector2.distance=Vector2.dist;Vector2.div=function(n,r,a){return vec2$3.divide(n.array,r.array,a.array),n._dirty=!0,n};Vector2.divide=Vector2.div;Vector2.dot=function(n,r){return vec2$3.dot(n.array,r.array)};Vector2.len=function(n){return vec2$3.length(n.array)};Vector2.lerp=function(n,r,a,s){return vec2$3.lerp(n.array,r.array,a.array,s),n._dirty=!0,n};Vector2.min=function(n,r,a){return vec2$3.min(n.array,r.array,a.array),n._dirty=!0,n};Vector2.max=function(n,r,a){return vec2$3.max(n.array,r.array,a.array),n._dirty=!0,n};Vector2.mul=function(n,r,a){return vec2$3.multiply(n.array,r.array,a.array),n._dirty=!0,n};Vector2.multiply=Vector2.mul;Vector2.negate=function(n,r){return vec2$3.negate(n.array,r.array),n._dirty=!0,n};Vector2.normalize=function(n,r){return vec2$3.normalize(n.array,r.array),n._dirty=!0,n};Vector2.random=function(n,r){return vec2$3.random(n.array,r),n._dirty=!0,n};Vector2.scale=function(n,r,a){return vec2$3.scale(n.array,r.array,a),n._dirty=!0,n};Vector2.scaleAndAdd=function(n,r,a,s){return vec2$3.scaleAndAdd(n.array,r.array,a.array,s),n._dirty=!0,n};Vector2.sqrDist=function(n,r){return vec2$3.sqrDist(n.array,r.array)};Vector2.squaredDistance=Vector2.sqrDist;Vector2.sqrLen=function(n){return vec2$3.sqrLen(n.array)};Vector2.squaredLength=Vector2.sqrLen;Vector2.sub=function(n,r,a){return vec2$3.subtract(n.array,r.array,a.array),n._dirty=!0,n};Vector2.subtract=Vector2.sub;Vector2.transformMat2=function(n,r,a){return vec2$3.transformMat2(n.array,r.array,a.array),n._dirty=!0,n};Vector2.transformMat2d=function(n,r,a){return vec2$3.transformMat2d(n.array,r.array,a.array),n._dirty=!0,n};Vector2.transformMat3=function(n,r,a){return vec2$3.transformMat3(n.array,r.array,a.array),n._dirty=!0,n};Vector2.transformMat4=function(n,r,a){return vec2$3.transformMat4(n.array,r.array,a.array),n._dirty=!0,n};var SHADER_STATE_TO_ENABLE=1,SHADER_STATE_KEEP_ENABLE=2,SHADER_STATE_PENDING=3,enabledAttributeList={};function addLineNumbers(n){for(var r=n.split(`
`),a=0,s=r.length;a<s;a++)r[a]=a+1+": "+r[a];return r.join(`
`)}function checkShaderErrorMsg(n,r,a){if(!n.getShaderParameter(r,n.COMPILE_STATUS))return[n.getShaderInfoLog(r),addLineNumbers(a)].join(`
`)}var tmpFloat32Array16=new vendor.Float32Array(16),GLProgram=Base.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(n){this._textureSlot=0,n.gl.useProgram(this._program)},hasUniform:function(n){var r=this._locations[n];return r!=null},useTextureSlot:function(n,r,a){r&&(n.gl.activeTexture(n.gl.TEXTURE0+a),r.isRenderable()?r.bind(n):r.unbind(n))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(n){this._textureSlot=n||0},takeCurrentTextureSlot:function(n,r){var a=this._textureSlot;return this.useTextureSlot(n,r,a),this._textureSlot++,a},setUniform:function(n,r,a,s){var o=this._locations,u=o[a];if(u==null)return!1;switch(r){case"m4":if(!(s instanceof Float32Array)){for(var c=0;c<s.length;c++)tmpFloat32Array16[c]=s[c];s=tmpFloat32Array16}n.uniformMatrix4fv(u,!1,s);break;case"2i":n.uniform2i(u,s[0],s[1]);break;case"2f":n.uniform2f(u,s[0],s[1]);break;case"3i":n.uniform3i(u,s[0],s[1],s[2]);break;case"3f":n.uniform3f(u,s[0],s[1],s[2]);break;case"4i":n.uniform4i(u,s[0],s[1],s[2],s[3]);break;case"4f":n.uniform4f(u,s[0],s[1],s[2],s[3]);break;case"1i":n.uniform1i(u,s);break;case"1f":n.uniform1f(u,s);break;case"1fv":n.uniform1fv(u,s);break;case"1iv":n.uniform1iv(u,s);break;case"2iv":n.uniform2iv(u,s);break;case"2fv":n.uniform2fv(u,s);break;case"3iv":n.uniform3iv(u,s);break;case"3fv":n.uniform3fv(u,s);break;case"4iv":n.uniform4iv(u,s);break;case"4fv":n.uniform4fv(u,s);break;case"m2":case"m2v":n.uniformMatrix2fv(u,!1,s);break;case"m3":case"m3v":n.uniformMatrix3fv(u,!1,s);break;case"m4v":if(Array.isArray(s)&&Array.isArray(s[0])){for(var p=new vendor.Float32Array(s.length*16),d=0,c=0;c<s.length;c++)for(var _=s[c],ja=0;ja<16;ja++)p[d++]=_[ja];n.uniformMatrix4fv(u,!1,p)}else n.uniformMatrix4fv(u,!1,s);break}return!0},setUniformOfSemantic:function(n,r,a){var s=this.uniformSemantics[r];return s?this.setUniform(n,s.type,s.symbol,a):!1},enableAttributes:function(n,r,a){var s=n.gl,o=this._program,u=this._locations,c;a?c=a.__enabledAttributeList:c=enabledAttributeList[n.__uid__],c||(a?c=a.__enabledAttributeList=[]:c=enabledAttributeList[n.__uid__]=[]);for(var p=[],d=0;d<r.length;d++){var _=r[d];if(!this.attributes[_]){p[d]=-1;continue}var ja=u[_];if(ja==null){if(ja=s.getAttribLocation(o,_),ja===-1){p[d]=-1;continue}u[_]=ja}p[d]=ja,c[ja]?c[ja]=SHADER_STATE_KEEP_ENABLE:c[ja]=SHADER_STATE_TO_ENABLE}for(var d=0;d<c.length;d++)switch(c[d]){case SHADER_STATE_TO_ENABLE:s.enableVertexAttribArray(d),c[d]=SHADER_STATE_PENDING;break;case SHADER_STATE_KEEP_ENABLE:c[d]=SHADER_STATE_PENDING;break;case SHADER_STATE_PENDING:s.disableVertexAttribArray(d),c[d]=0;break}return p},getAttribLocation:function(n,r){var a=this._locations,s=a[r];return s==null&&(s=n.getAttribLocation(this._program,r),a[r]=s),s},buildProgram:function(n,r,a,s){var o=n.createShader(n.VERTEX_SHADER),u=n.createProgram();n.shaderSource(o,a),n.compileShader(o);var c=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(c,s),n.compileShader(c);var p=checkShaderErrorMsg(n,o,a);if(p||(p=checkShaderErrorMsg(n,c,s),p))return p;if(n.attachShader(u,o),n.attachShader(u,c),r.attributeSemantics.POSITION)n.bindAttribLocation(u,0,r.attributeSemantics.POSITION.symbol);else{var d=Object.keys(this.attributes);n.bindAttribLocation(u,0,d[0])}if(n.linkProgram(u),n.deleteShader(o),n.deleteShader(c),this._program=u,this.vertexCode=a,this.fragmentCode=s,!n.getProgramParameter(u,n.LINK_STATUS))return`Could not link program
`+n.getProgramInfoLog(u);for(var _=0;_<r.uniforms.length;_++){var ja=r.uniforms[_];this._locations[ja]=n.getUniformLocation(u,ja)}}}),loopRegex=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function unrollLoop(n,r,a){function s(c,p,d,_){var ja="";isNaN(p)&&(p in r?p=r[p]:p=o[p]),isNaN(d)&&(d in r?d=r[d]:d=o[d]);for(var Ja=parseInt(p);Ja<parseInt(d);Ja++)ja+="{"+_.replace(/float\s*\(\s*_idx_\s*\)/g,Ja.toFixed(1)).replace(/_idx_/g,Ja)+"}";return ja}var o={};for(var u in a)o[u+"_COUNT"]=a[u];return n.replace(loopRegex,s)}function getDefineCode(n,r,a){var s=[];if(r)for(var o in r){var u=r[o];u>0&&s.push("#define "+o.toUpperCase()+"_COUNT "+u)}if(a)for(var c=0;c<a.length;c++){var p=a[c];s.push("#define "+p.toUpperCase()+"_ENABLED")}for(var p in n){var d=n[p];d===null?s.push("#define "+p):s.push("#define "+p+" "+d.toString())}return s.join(`
`)}function getExtensionCode(n){for(var r=[],a=0;a<n.length;a++)r.push("#extension GL_"+n[a]+" : enable");return r.join(`
`)}function getPrecisionCode(n){return["precision",n,"float"].join(" ")+`;
`+["precision",n,"int"].join(" ")+`;
`+["precision",n,"sampler2D"].join(" ")+`;
`}function ProgramManager(n){this._renderer=n,this._cache={}}ProgramManager.prototype.getProgram=function(n,r,a){var s=this._cache,o=n.isSkinnedMesh&&n.isSkinnedMesh(),u=n.isInstancedMesh&&n.isInstancedMesh(),c="s"+r.shader.shaderID+"m"+r.getProgramKey();a&&(c+="se"+a.getProgramKey(n.lightGroup)),o&&(c+=",sk"+n.joints.length),u&&(c+=",is");var ah=s[c];if(ah)return ah;var p=a?a.getLightsNumbers(n.lightGroup):{},d=this._renderer,_=d.gl,ja=r.getEnabledTextures(),Ja="";if(o){var ec={SKINNING:null,JOINT_COUNT:n.joints.length};n.joints.length>d.getMaxJointNumber()&&(ec.USE_SKIN_MATRICES_TEXTURE=null),Ja+=`
`+getDefineCode(ec)+`
`}u&&(Ja+=`
#define INSTANCING
`);var tc=Ja+getDefineCode(r.vertexDefines,p,ja),rc=Ja+getDefineCode(r.fragmentDefines,p,ja),nc=tc+`
`+r.shader.vertex,ic=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(oh){return d.getGLExtension(oh)!=null});ic.indexOf("EXT_shader_texture_lod")>=0&&(rc+=`
#define SUPPORT_TEXTURE_LOD`),ic.indexOf("OES_standard_derivatives")>=0&&(rc+=`
#define SUPPORT_STANDARD_DERIVATIVES`);var uc=getExtensionCode(ic)+`
`+getPrecisionCode(r.precision)+`
`+rc+`
`+r.shader.fragment,eh=unrollLoop(nc,r.vertexDefines,p),rh=unrollLoop(uc,r.fragmentDefines,p),ah=new GLProgram;ah.uniformSemantics=r.shader.uniformSemantics,ah.attributes=r.shader.attributes;var ih=ah.buildProgram(_,r.shader,eh,rh);return ah.__error=ih,s[c]=ah,ah};var uniformRegex=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,attributeRegex=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,defineRegex=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,uniformTypeMap={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function createZeroArray(n){for(var r=[],a=0;a<n;a++)r[a]=0;return r}var uniformValueConstructor={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return createZeroArray(2)},vec3:function(){return createZeroArray(3)},vec4:function(){return createZeroArray(4)},ivec2:function(){return createZeroArray(2)},ivec3:function(){return createZeroArray(3)},ivec4:function(){return createZeroArray(4)},mat2:function(){return createZeroArray(4)},mat3:function(){return createZeroArray(9)},mat4:function(){return createZeroArray(16)},array:function(){return[]}},attributeSemantics=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],uniformSemantics=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],matrixSemantics=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],attributeSizeMap={vec4:4,vec3:3,vec2:2,float:1},shaderIDCache={},shaderCodeCache={};function getShaderID(n,r){var a="vertex:"+n+"fragment:"+r;if(shaderIDCache[a])return shaderIDCache[a];var s=util.genGUID();return shaderIDCache[a]=s,shaderCodeCache[s]={vertex:n,fragment:r},s}function removeComment(n){return n.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function logSyntaxError(){console.error("Wrong uniform/attributes syntax")}function parseDeclarations(n,r){for(var a=/[,=\(\):]/,s=r.replace(/:\s*\[\s*(.*)\s*\]/g,"="+n+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),o=[],u=0;u<s.length;u++)s[u].match(a)?o.push(s[u].charAt(0),s[u].slice(1)):o.push(s[u]);s=o;var c=0,p=1,d=2,_=3,ja=4,Ja=5,ec=c,tc={},rc=null,nc;ic(s[0]);function ic(rh){rh||logSyntaxError();var ah=rh.match(/\[(.*?)\]/);nc=rh.replace(/\[(.*?)\]/,""),tc[nc]={},ah&&(tc[nc].isArray=!0,tc[nc].arraySize=ah[1])}for(var u=1;u<s.length;u++){var uc=s[u];if(uc){if(uc==="="){if(ec!==c&&ec!==_){logSyntaxError();break}ec=p;continue}else if(uc===":"){ec=ja;continue}else if(uc===","){if(ec===d){if(!(rc instanceof Array)){logSyntaxError();break}rc.push(+s[++u])}else ec=Ja;continue}else if(uc===")"){tc[nc].value=new vendor.Float32Array(rc),rc=null,ec=Ja;continue}else if(uc==="("){if(ec!==d){logSyntaxError();break}if(!(rc instanceof Array)){logSyntaxError();break}rc.push(+s[++u]);continue}else if(uc.indexOf("vec")>=0){if(ec!==p&&ec!==ja){logSyntaxError();break}ec=d,rc=[];continue}else if(ec===p){n==="bool"?tc[nc].value=uc==="true":tc[nc].value=parseFloat(uc),rc=null;continue}else if(ec===ja){var eh=uc;attributeSemantics.indexOf(eh)>=0||uniformSemantics.indexOf(eh)>=0||matrixSemantics.indexOf(eh)>=0?tc[nc].semantic=eh:eh==="ignore"||eh==="unconfigurable"?tc[nc].ignore=!0:n==="bool"?tc[nc].value=eh==="true":tc[nc].value=parseFloat(eh);continue}ic(uc),ec=c}}return tc}function Shader(n,r){typeof n=="object"&&(r=n.fragment,n=n.vertex),n=removeComment(n),r=removeComment(r),this._shaderID=getShaderID(n,r),this._vertexCode=Shader.parseImport(n),this._fragmentCode=Shader.parseImport(r),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}Shader.prototype={constructor:Shader,createUniforms:function(){var n={};for(var r in this.uniformTemplates){var a=this.uniformTemplates[r];n[r]={type:a.type,value:a.value()}}return n},_parseImport:function(){this._vertexCode=Shader.parseImport(this.vertex),this._fragmentCode=Shader.parseImport(this.fragment)},_addSemanticUniform:function(n,r,a){if(attributeSemantics.indexOf(a)>=0)this.attributeSemantics[a]={symbol:n,type:r};else if(matrixSemantics.indexOf(a)>=0){var s=!1,o=a;a.match(/TRANSPOSE$/)&&(s=!0,o=a.slice(0,-9)),this.matrixSemantics[a]={symbol:n,type:r,isTranspose:s,semanticNoTranspose:o}}else uniformSemantics.indexOf(a)>=0&&(this.uniformSemantics[a]={symbol:n,type:r})},_addMaterialUniform:function(n,r,a,s,o,u){u[n]={type:a,value:o?uniformValueConstructor.array:s||uniformValueConstructor[r],semantic:null}},_parseUniforms:function(){var n={},r=this,a="vertex";this._uniformList=[],this._vertexCode=this._vertexCode.replace(uniformRegex,o),a="fragment",this._fragmentCode=this._fragmentCode.replace(uniformRegex,o),r.matrixSemanticKeys=Object.keys(this.matrixSemantics);function s(u){return u!=null?function(){return u}:null}function o(u,c,p){var d=parseDeclarations(c,p),_=[];for(var ja in d){var Ja=d[ja],ec=Ja.semantic,tc=ja,rc=uniformTypeMap[c],nc=s(d[ja].value);d[ja].isArray&&(tc+="["+d[ja].arraySize+"]",rc+="v"),_.push(tc),r._uniformList.push(ja),Ja.ignore||((c==="sampler2D"||c==="samplerCube")&&(r.textures[ja]={shaderType:a,type:c}),ec?r._addSemanticUniform(ja,rc,ec):r._addMaterialUniform(ja,c,rc,nc,d[ja].isArray,n))}return _.length>0?"uniform "+c+" "+_.join(",")+`;
`:""}this.uniformTemplates=n},_parseAttributes:function(){var n={},r=this;this._vertexCode=this._vertexCode.replace(attributeRegex,a);function a(s,o,u){var c=parseDeclarations(o,u),p=attributeSizeMap[o]||1,d=[];for(var _ in c){var ja=c[_].semantic;if(n[_]={type:"float",size:p,semantic:ja||null},ja){if(attributeSemantics.indexOf(ja)<0)throw new Error('Unkown semantic "'+ja+'"');r.attributeSemantics[ja]={symbol:_,type:o}}d.push(_)}return"attribute "+o+" "+d.join(",")+`;
`}this.attributes=n},_parseDefines:function(){var n=this,r="vertex";this._vertexCode=this._vertexCode.replace(defineRegex,a),r="fragment",this._fragmentCode=this._fragmentCode.replace(defineRegex,a);function a(s,o,u){var c=r==="vertex"?n.vertexDefines:n.fragmentDefines;return c[o]||(u==="false"?c[o]=!1:u==="true"?c[o]=!0:c[o]=u?isNaN(parseFloat(u))?u.trim():parseFloat(u):null),""}},clone:function(){var n=shaderCodeCache[this._shaderID],r=new Shader(n.vertex,n.fragment);return r}};Object.defineProperty&&(Object.defineProperty(Shader.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(Shader.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(Shader.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(Shader.prototype,"uniforms",{get:function(){return this._uniformList}}));var importRegex=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;Shader.parseImport=function(n){return n=n.replace(importRegex,function(o,a,s){var o=Shader.source(s);return o?Shader.parseImport(o):(console.error('Shader chunk "'+s+'" not existed in library'),"")}),n};var exportRegex=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;Shader.import=function(n){n.replace(exportRegex,function(r,a,s,u){var u=u.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(u){for(var c=s.split("."),p=Shader.codes,d=0,_;d<c.length-1;)_=c[d++],p[_]||(p[_]={}),p=p[_];_=c[d],p[_]=u}return u})};Shader.codes={};Shader.source=function(n){for(var r=n.split("."),a=Shader.codes,s=0;a&&s<r.length;){var o=r[s++];a=a[o]}return typeof a!="string"?(console.error('Shader "'+n+'" not existed in library'),""):a};const prezGLSL=`@export clay.prez.vertex
uniform mat4 WVP : WORLDVIEWPROJECTION;
attribute vec3 pos : POSITION;
attribute vec2 uv : TEXCOORD_0;
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec2 v_Texcoord;
void main()
{
 vec4 P = vec4(pos, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = WVP * P;
 v_Texcoord = uv * uvRepeat + uvOffset;
}
@end
@export clay.prez.fragment
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
varying vec2 v_Texcoord;
void main()
{
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
 gl_FragColor = vec4(0.0,0.0,0.0,1.0);
}
@end`;var mat4$2={};mat4$2.create=function(){var n=new GLMAT_ARRAY_TYPE(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};mat4$2.clone=function(n){var r=new GLMAT_ARRAY_TYPE(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r};mat4$2.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n};mat4$2.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};mat4$2.transpose=function(n,r){if(n===r){var a=r[1],s=r[2],o=r[3],u=r[6],c=r[7],p=r[11];n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=a,n[6]=r[9],n[7]=r[13],n[8]=s,n[9]=u,n[11]=r[14],n[12]=o,n[13]=c,n[14]=p}else n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15];return n};mat4$2.invert=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=r[4],p=r[5],d=r[6],_=r[7],ja=r[8],Ja=r[9],ec=r[10],tc=r[11],rc=r[12],nc=r[13],ic=r[14],uc=r[15],eh=a*p-s*c,rh=a*d-o*c,ah=a*_-u*c,ih=s*d-o*p,oh=s*_-u*p,uh=o*_-u*d,ch=ja*nc-Ja*rc,hh=ja*ic-ec*rc,dh=ja*uc-tc*rc,gh=Ja*ic-ec*nc,fh=Ja*uc-tc*nc,vh=ec*uc-tc*ic,ph=eh*vh-rh*fh+ah*gh+ih*dh-oh*hh+uh*ch;return ph?(ph=1/ph,n[0]=(p*vh-d*fh+_*gh)*ph,n[1]=(o*fh-s*vh-u*gh)*ph,n[2]=(nc*uh-ic*oh+uc*ih)*ph,n[3]=(ec*oh-Ja*uh-tc*ih)*ph,n[4]=(d*dh-c*vh-_*hh)*ph,n[5]=(a*vh-o*dh+u*hh)*ph,n[6]=(ic*ah-rc*uh-uc*rh)*ph,n[7]=(ja*uh-ec*ah+tc*rh)*ph,n[8]=(c*fh-p*dh+_*ch)*ph,n[9]=(s*dh-a*fh-u*ch)*ph,n[10]=(rc*oh-nc*ah+uc*eh)*ph,n[11]=(Ja*ah-ja*oh-tc*eh)*ph,n[12]=(p*hh-c*gh-d*ch)*ph,n[13]=(a*gh-s*hh+o*ch)*ph,n[14]=(nc*rh-rc*ih-ic*eh)*ph,n[15]=(ja*ih-Ja*rh+ec*eh)*ph,n):null};mat4$2.adjoint=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=r[4],p=r[5],d=r[6],_=r[7],ja=r[8],Ja=r[9],ec=r[10],tc=r[11],rc=r[12],nc=r[13],ic=r[14],uc=r[15];return n[0]=p*(ec*uc-tc*ic)-Ja*(d*uc-_*ic)+nc*(d*tc-_*ec),n[1]=-(s*(ec*uc-tc*ic)-Ja*(o*uc-u*ic)+nc*(o*tc-u*ec)),n[2]=s*(d*uc-_*ic)-p*(o*uc-u*ic)+nc*(o*_-u*d),n[3]=-(s*(d*tc-_*ec)-p*(o*tc-u*ec)+Ja*(o*_-u*d)),n[4]=-(c*(ec*uc-tc*ic)-ja*(d*uc-_*ic)+rc*(d*tc-_*ec)),n[5]=a*(ec*uc-tc*ic)-ja*(o*uc-u*ic)+rc*(o*tc-u*ec),n[6]=-(a*(d*uc-_*ic)-c*(o*uc-u*ic)+rc*(o*_-u*d)),n[7]=a*(d*tc-_*ec)-c*(o*tc-u*ec)+ja*(o*_-u*d),n[8]=c*(Ja*uc-tc*nc)-ja*(p*uc-_*nc)+rc*(p*tc-_*Ja),n[9]=-(a*(Ja*uc-tc*nc)-ja*(s*uc-u*nc)+rc*(s*tc-u*Ja)),n[10]=a*(p*uc-_*nc)-c*(s*uc-u*nc)+rc*(s*_-u*p),n[11]=-(a*(p*tc-_*Ja)-c*(s*tc-u*Ja)+ja*(s*_-u*p)),n[12]=-(c*(Ja*ic-ec*nc)-ja*(p*ic-d*nc)+rc*(p*ec-d*Ja)),n[13]=a*(Ja*ic-ec*nc)-ja*(s*ic-o*nc)+rc*(s*ec-o*Ja),n[14]=-(a*(p*ic-d*nc)-c*(s*ic-o*nc)+rc*(s*d-o*p)),n[15]=a*(p*ec-d*Ja)-c*(s*ec-o*Ja)+ja*(s*d-o*p),n};mat4$2.determinant=function(n){var r=n[0],a=n[1],s=n[2],o=n[3],u=n[4],c=n[5],p=n[6],d=n[7],_=n[8],ja=n[9],Ja=n[10],ec=n[11],tc=n[12],rc=n[13],nc=n[14],ic=n[15],uc=r*c-a*u,eh=r*p-s*u,rh=r*d-o*u,ah=a*p-s*c,ih=a*d-o*c,oh=s*d-o*p,uh=_*rc-ja*tc,ch=_*nc-Ja*tc,hh=_*ic-ec*tc,dh=ja*nc-Ja*rc,gh=ja*ic-ec*rc,fh=Ja*ic-ec*nc;return uc*fh-eh*gh+rh*dh+ah*hh-ih*ch+oh*uh};mat4$2.multiply=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=r[4],d=r[5],_=r[6],ja=r[7],Ja=r[8],ec=r[9],tc=r[10],rc=r[11],nc=r[12],ic=r[13],uc=r[14],eh=r[15],rh=a[0],ah=a[1],ih=a[2],oh=a[3];return n[0]=rh*s+ah*p+ih*Ja+oh*nc,n[1]=rh*o+ah*d+ih*ec+oh*ic,n[2]=rh*u+ah*_+ih*tc+oh*uc,n[3]=rh*c+ah*ja+ih*rc+oh*eh,rh=a[4],ah=a[5],ih=a[6],oh=a[7],n[4]=rh*s+ah*p+ih*Ja+oh*nc,n[5]=rh*o+ah*d+ih*ec+oh*ic,n[6]=rh*u+ah*_+ih*tc+oh*uc,n[7]=rh*c+ah*ja+ih*rc+oh*eh,rh=a[8],ah=a[9],ih=a[10],oh=a[11],n[8]=rh*s+ah*p+ih*Ja+oh*nc,n[9]=rh*o+ah*d+ih*ec+oh*ic,n[10]=rh*u+ah*_+ih*tc+oh*uc,n[11]=rh*c+ah*ja+ih*rc+oh*eh,rh=a[12],ah=a[13],ih=a[14],oh=a[15],n[12]=rh*s+ah*p+ih*Ja+oh*nc,n[13]=rh*o+ah*d+ih*ec+oh*ic,n[14]=rh*u+ah*_+ih*tc+oh*uc,n[15]=rh*c+ah*ja+ih*rc+oh*eh,n};mat4$2.multiplyAffine=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[4],p=r[5],d=r[6],_=r[8],ja=r[9],Ja=r[10],ec=r[12],tc=r[13],rc=r[14],nc=a[0],ic=a[1],uc=a[2];return n[0]=nc*s+ic*c+uc*_,n[1]=nc*o+ic*p+uc*ja,n[2]=nc*u+ic*d+uc*Ja,nc=a[4],ic=a[5],uc=a[6],n[4]=nc*s+ic*c+uc*_,n[5]=nc*o+ic*p+uc*ja,n[6]=nc*u+ic*d+uc*Ja,nc=a[8],ic=a[9],uc=a[10],n[8]=nc*s+ic*c+uc*_,n[9]=nc*o+ic*p+uc*ja,n[10]=nc*u+ic*d+uc*Ja,nc=a[12],ic=a[13],uc=a[14],n[12]=nc*s+ic*c+uc*_+ec,n[13]=nc*o+ic*p+uc*ja+tc,n[14]=nc*u+ic*d+uc*Ja+rc,n};mat4$2.mul=mat4$2.multiply;mat4$2.mulAffine=mat4$2.multiplyAffine;mat4$2.translate=function(n,r,a){var s=a[0],o=a[1],u=a[2],c,p,d,_,ja,Ja,ec,tc,rc,nc,ic,uc;return r===n?(n[12]=r[0]*s+r[4]*o+r[8]*u+r[12],n[13]=r[1]*s+r[5]*o+r[9]*u+r[13],n[14]=r[2]*s+r[6]*o+r[10]*u+r[14],n[15]=r[3]*s+r[7]*o+r[11]*u+r[15]):(c=r[0],p=r[1],d=r[2],_=r[3],ja=r[4],Ja=r[5],ec=r[6],tc=r[7],rc=r[8],nc=r[9],ic=r[10],uc=r[11],n[0]=c,n[1]=p,n[2]=d,n[3]=_,n[4]=ja,n[5]=Ja,n[6]=ec,n[7]=tc,n[8]=rc,n[9]=nc,n[10]=ic,n[11]=uc,n[12]=c*s+ja*o+rc*u+r[12],n[13]=p*s+Ja*o+nc*u+r[13],n[14]=d*s+ec*o+ic*u+r[14],n[15]=_*s+tc*o+uc*u+r[15]),n};mat4$2.scale=function(n,r,a){var s=a[0],o=a[1],u=a[2];return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=r[3]*s,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=r[7]*o,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,n[11]=r[11]*u,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n};mat4$2.rotate=function(n,r,a,s){var o=s[0],u=s[1],c=s[2],p=Math.sqrt(o*o+u*u+c*c),d,_,ja,Ja,ec,tc,rc,nc,ic,uc,eh,rh,ah,ih,oh,uh,ch,hh,dh,gh,fh,vh,ph,yh;return Math.abs(p)<GLMAT_EPSILON?null:(p=1/p,o*=p,u*=p,c*=p,d=Math.sin(a),_=Math.cos(a),ja=1-_,Ja=r[0],ec=r[1],tc=r[2],rc=r[3],nc=r[4],ic=r[5],uc=r[6],eh=r[7],rh=r[8],ah=r[9],ih=r[10],oh=r[11],uh=o*o*ja+_,ch=u*o*ja+c*d,hh=c*o*ja-u*d,dh=o*u*ja-c*d,gh=u*u*ja+_,fh=c*u*ja+o*d,vh=o*c*ja+u*d,ph=u*c*ja-o*d,yh=c*c*ja+_,n[0]=Ja*uh+nc*ch+rh*hh,n[1]=ec*uh+ic*ch+ah*hh,n[2]=tc*uh+uc*ch+ih*hh,n[3]=rc*uh+eh*ch+oh*hh,n[4]=Ja*dh+nc*gh+rh*fh,n[5]=ec*dh+ic*gh+ah*fh,n[6]=tc*dh+uc*gh+ih*fh,n[7]=rc*dh+eh*gh+oh*fh,n[8]=Ja*vh+nc*ph+rh*yh,n[9]=ec*vh+ic*ph+ah*yh,n[10]=tc*vh+uc*ph+ih*yh,n[11]=rc*vh+eh*ph+oh*yh,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n)};mat4$2.rotateX=function(n,r,a){var s=Math.sin(a),o=Math.cos(a),u=r[4],c=r[5],p=r[6],d=r[7],_=r[8],ja=r[9],Ja=r[10],ec=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=u*o+_*s,n[5]=c*o+ja*s,n[6]=p*o+Ja*s,n[7]=d*o+ec*s,n[8]=_*o-u*s,n[9]=ja*o-c*s,n[10]=Ja*o-p*s,n[11]=ec*o-d*s,n};mat4$2.rotateY=function(n,r,a){var s=Math.sin(a),o=Math.cos(a),u=r[0],c=r[1],p=r[2],d=r[3],_=r[8],ja=r[9],Ja=r[10],ec=r[11];return r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=u*o-_*s,n[1]=c*o-ja*s,n[2]=p*o-Ja*s,n[3]=d*o-ec*s,n[8]=u*s+_*o,n[9]=c*s+ja*o,n[10]=p*s+Ja*o,n[11]=d*s+ec*o,n};mat4$2.rotateZ=function(n,r,a){var s=Math.sin(a),o=Math.cos(a),u=r[0],c=r[1],p=r[2],d=r[3],_=r[4],ja=r[5],Ja=r[6],ec=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=u*o+_*s,n[1]=c*o+ja*s,n[2]=p*o+Ja*s,n[3]=d*o+ec*s,n[4]=_*o-u*s,n[5]=ja*o-c*s,n[6]=Ja*o-p*s,n[7]=ec*o-d*s,n};mat4$2.fromRotationTranslation=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=s+s,d=o+o,_=u+u,ja=s*p,Ja=s*d,ec=s*_,tc=o*d,rc=o*_,nc=u*_,ic=c*p,uc=c*d,eh=c*_;return n[0]=1-(tc+nc),n[1]=Ja+eh,n[2]=ec-uc,n[3]=0,n[4]=Ja-eh,n[5]=1-(ja+nc),n[6]=rc+ic,n[7]=0,n[8]=ec+uc,n[9]=rc-ic,n[10]=1-(ja+tc),n[11]=0,n[12]=a[0],n[13]=a[1],n[14]=a[2],n[15]=1,n};mat4$2.fromQuat=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=a+a,p=s+s,d=o+o,_=a*c,ja=s*c,Ja=s*p,ec=o*c,tc=o*p,rc=o*d,nc=u*c,ic=u*p,uc=u*d;return n[0]=1-Ja-rc,n[1]=ja+uc,n[2]=ec-ic,n[3]=0,n[4]=ja-uc,n[5]=1-_-rc,n[6]=tc+nc,n[7]=0,n[8]=ec+ic,n[9]=tc-nc,n[10]=1-_-Ja,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};mat4$2.frustum=function(n,r,a,s,o,u,c){var p=1/(a-r),d=1/(o-s),_=1/(u-c);return n[0]=u*2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u*2*d,n[6]=0,n[7]=0,n[8]=(a+r)*p,n[9]=(o+s)*d,n[10]=(c+u)*_,n[11]=-1,n[12]=0,n[13]=0,n[14]=c*u*2*_,n[15]=0,n};mat4$2.perspective=function(n,r,a,s,o){var u=1/Math.tan(r/2),c=1/(s-o);return n[0]=u/a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(o+s)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*o*s*c,n[15]=0,n};mat4$2.ortho=function(n,r,a,s,o,u,c){var p=1/(r-a),d=1/(s-o),_=1/(u-c);return n[0]=-2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*d,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*_,n[11]=0,n[12]=(r+a)*p,n[13]=(o+s)*d,n[14]=(c+u)*_,n[15]=1,n};mat4$2.lookAt=function(n,r,a,s){var o,u,c,p,d,_,ja,Ja,ec,tc,rc=r[0],nc=r[1],ic=r[2],uc=s[0],eh=s[1],rh=s[2],ah=a[0],ih=a[1],oh=a[2];return Math.abs(rc-ah)<GLMAT_EPSILON&&Math.abs(nc-ih)<GLMAT_EPSILON&&Math.abs(ic-oh)<GLMAT_EPSILON?mat4$2.identity(n):(ja=rc-ah,Ja=nc-ih,ec=ic-oh,tc=1/Math.sqrt(ja*ja+Ja*Ja+ec*ec),ja*=tc,Ja*=tc,ec*=tc,o=eh*ec-rh*Ja,u=rh*ja-uc*ec,c=uc*Ja-eh*ja,tc=Math.sqrt(o*o+u*u+c*c),tc?(tc=1/tc,o*=tc,u*=tc,c*=tc):(o=0,u=0,c=0),p=Ja*c-ec*u,d=ec*o-ja*c,_=ja*u-Ja*o,tc=Math.sqrt(p*p+d*d+_*_),tc?(tc=1/tc,p*=tc,d*=tc,_*=tc):(p=0,d=0,_=0),n[0]=o,n[1]=p,n[2]=ja,n[3]=0,n[4]=u,n[5]=d,n[6]=Ja,n[7]=0,n[8]=c,n[9]=_,n[10]=ec,n[11]=0,n[12]=-(o*rc+u*nc+c*ic),n[13]=-(p*rc+d*nc+_*ic),n[14]=-(ja*rc+Ja*nc+ec*ic),n[15]=1,n)};mat4$2.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2)+Math.pow(n[9],2)+Math.pow(n[10],2)+Math.pow(n[11],2)+Math.pow(n[12],2)+Math.pow(n[13],2)+Math.pow(n[14],2)+Math.pow(n[15],2))};var vec3$f={};vec3$f.create=function(){var n=new GLMAT_ARRAY_TYPE(3);return n[0]=0,n[1]=0,n[2]=0,n};vec3$f.clone=function(n){var r=new GLMAT_ARRAY_TYPE(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r};vec3$f.fromValues=function(n,r,a){var s=new GLMAT_ARRAY_TYPE(3);return s[0]=n,s[1]=r,s[2]=a,s};vec3$f.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n};vec3$f.set=function(n,r,a,s){return n[0]=r,n[1]=a,n[2]=s,n};vec3$f.add=function(n,r,a){return n[0]=r[0]+a[0],n[1]=r[1]+a[1],n[2]=r[2]+a[2],n};vec3$f.subtract=function(n,r,a){return n[0]=r[0]-a[0],n[1]=r[1]-a[1],n[2]=r[2]-a[2],n};vec3$f.sub=vec3$f.subtract;vec3$f.multiply=function(n,r,a){return n[0]=r[0]*a[0],n[1]=r[1]*a[1],n[2]=r[2]*a[2],n};vec3$f.mul=vec3$f.multiply;vec3$f.divide=function(n,r,a){return n[0]=r[0]/a[0],n[1]=r[1]/a[1],n[2]=r[2]/a[2],n};vec3$f.div=vec3$f.divide;vec3$f.min=function(n,r,a){return n[0]=Math.min(r[0],a[0]),n[1]=Math.min(r[1],a[1]),n[2]=Math.min(r[2],a[2]),n};vec3$f.max=function(n,r,a){return n[0]=Math.max(r[0],a[0]),n[1]=Math.max(r[1],a[1]),n[2]=Math.max(r[2],a[2]),n};vec3$f.scale=function(n,r,a){return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n};vec3$f.scaleAndAdd=function(n,r,a,s){return n[0]=r[0]+a[0]*s,n[1]=r[1]+a[1]*s,n[2]=r[2]+a[2]*s,n};vec3$f.distance=function(n,r){var a=r[0]-n[0],s=r[1]-n[1],o=r[2]-n[2];return Math.sqrt(a*a+s*s+o*o)};vec3$f.dist=vec3$f.distance;vec3$f.squaredDistance=function(n,r){var a=r[0]-n[0],s=r[1]-n[1],o=r[2]-n[2];return a*a+s*s+o*o};vec3$f.sqrDist=vec3$f.squaredDistance;vec3$f.length=function(n){var r=n[0],a=n[1],s=n[2];return Math.sqrt(r*r+a*a+s*s)};vec3$f.len=vec3$f.length;vec3$f.squaredLength=function(n){var r=n[0],a=n[1],s=n[2];return r*r+a*a+s*s};vec3$f.sqrLen=vec3$f.squaredLength;vec3$f.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n};vec3$f.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n};vec3$f.normalize=function(n,r){var a=r[0],s=r[1],o=r[2],u=a*a+s*s+o*o;return u>0&&(u=1/Math.sqrt(u),n[0]=r[0]*u,n[1]=r[1]*u,n[2]=r[2]*u),n};vec3$f.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]};vec3$f.cross=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=a[0],p=a[1],d=a[2];return n[0]=o*d-u*p,n[1]=u*c-s*d,n[2]=s*p-o*c,n};vec3$f.lerp=function(n,r,a,s){var o=r[0],u=r[1],c=r[2];return n[0]=o+s*(a[0]-o),n[1]=u+s*(a[1]-u),n[2]=c+s*(a[2]-c),n};vec3$f.random=function(n,r){r=r||1;var a=GLMAT_RANDOM$1()*2*Math.PI,s=GLMAT_RANDOM$1()*2-1,o=Math.sqrt(1-s*s)*r;return n[0]=Math.cos(a)*o,n[1]=Math.sin(a)*o,n[2]=s*r,n};vec3$f.transformMat4=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=a[3]*s+a[7]*o+a[11]*u+a[15];return c=c||1,n[0]=(a[0]*s+a[4]*o+a[8]*u+a[12])/c,n[1]=(a[1]*s+a[5]*o+a[9]*u+a[13])/c,n[2]=(a[2]*s+a[6]*o+a[10]*u+a[14])/c,n};vec3$f.transformMat3=function(n,r,a){var s=r[0],o=r[1],u=r[2];return n[0]=s*a[0]+o*a[3]+u*a[6],n[1]=s*a[1]+o*a[4]+u*a[7],n[2]=s*a[2]+o*a[5]+u*a[8],n};vec3$f.transformQuat=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=a[0],p=a[1],d=a[2],_=a[3],ja=_*s+p*u-d*o,Ja=_*o+d*s-c*u,ec=_*u+c*o-p*s,tc=-c*s-p*o-d*u;return n[0]=ja*_+tc*-c+Ja*-d-ec*-p,n[1]=Ja*_+tc*-p+ec*-c-ja*-d,n[2]=ec*_+tc*-d+ja*-p-Ja*-c,n};vec3$f.rotateX=function(n,r,a,s){var o=[],u=[];return o[0]=r[0]-a[0],o[1]=r[1]-a[1],o[2]=r[2]-a[2],u[0]=o[0],u[1]=o[1]*Math.cos(s)-o[2]*Math.sin(s),u[2]=o[1]*Math.sin(s)+o[2]*Math.cos(s),n[0]=u[0]+a[0],n[1]=u[1]+a[1],n[2]=u[2]+a[2],n};vec3$f.rotateY=function(n,r,a,s){var o=[],u=[];return o[0]=r[0]-a[0],o[1]=r[1]-a[1],o[2]=r[2]-a[2],u[0]=o[2]*Math.sin(s)+o[0]*Math.cos(s),u[1]=o[1],u[2]=o[2]*Math.cos(s)-o[0]*Math.sin(s),n[0]=u[0]+a[0],n[1]=u[1]+a[1],n[2]=u[2]+a[2],n};vec3$f.rotateZ=function(n,r,a,s){var o=[],u=[];return o[0]=r[0]-a[0],o[1]=r[1]-a[1],o[2]=r[2]-a[2],u[0]=o[0]*Math.cos(s)-o[1]*Math.sin(s),u[1]=o[0]*Math.sin(s)+o[1]*Math.cos(s),u[2]=o[2],n[0]=u[0]+a[0],n[1]=u[1]+a[1],n[2]=u[2]+a[2],n};vec3$f.forEach=function(){var n=vec3$f.create();return function(r,a,s,o,u,c){var p,d;for(a||(a=3),s||(s=0),o?d=Math.min(o*a+s,r.length):d=r.length,p=s;p<d;p+=a)n[0]=r[p],n[1]=r[p+1],n[2]=r[p+2],u(n,n,c),r[p]=n[0],r[p+1]=n[1],r[p+2]=n[2];return r}}();vec3$f.angle=function(n,r){var a=vec3$f.fromValues(n[0],n[1],n[2]),s=vec3$f.fromValues(r[0],r[1],r[2]);vec3$f.normalize(a,a),vec3$f.normalize(s,s);var o=vec3$f.dot(a,s);return o>1?0:Math.acos(o)};Shader.import(prezGLSL);var mat4Create=mat4$2.create,errorShader={};function defaultGetMaterial(n){return n.material}function defaultGetUniform(n,r,a){return r.uniforms[a].value}function defaultIsMaterialChanged(n,r,a,s){return a!==s}function defaultIfRender(n){return!0}function noop(){}var attributeBufferTypeMap={float:glenum.FLOAT,byte:glenum.BYTE,ubyte:glenum.UNSIGNED_BYTE,short:glenum.SHORT,ushort:glenum.UNSIGNED_SHORT};function VertexArrayObject(n,r,a){this.availableAttributes=n,this.availableAttributeSymbols=r,this.indicesBuffer=a,this.vao=null}function PlaceHolderTexture(n){var r,a;this.bind=function(s){r||(r=vendor.createCanvas(),r.width=r.height=1,r.getContext("2d"));var o=s.gl,u=!a;u&&(a=o.createTexture()),o.bindTexture(o.TEXTURE_2D,a),u&&o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,r)},this.unbind=function(s){s.gl.bindTexture(s.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var Renderer=Base.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=vendor.createCanvas());var n=this.canvas;try{var r={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=n.getContext("webgl",r)||n.getContext("experimental-webgl",r),!this.gl)throw new Error;this._glinfo=new GLInfo(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(a){throw"Error creating WebGL Context "+a}this._programMgr=new ProgramManager(this),this._placeholderTexture=new PlaceHolderTexture},{resize:function(n,r){var a=this.canvas,s=this.devicePixelRatio;n!=null?(a.style&&(a.style.width=n+"px",a.style.height=r+"px"),a.width=n*s,a.height=r*s,this._width=n,this._height=r):(this._width=a.width/s,this._height=a.height/s),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var n=this.viewport;return n.width/n.height},setDevicePixelRatio:function(n){this.devicePixelRatio=n,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(n){return this._glinfo.getExtension(n)},getGLParameter:function(n){return this._glinfo.getParameter(n)},setViewport:function(n,r,a,s,o){if(typeof n=="object"){var u=n;n=u.x,r=u.y,a=u.width,s=u.height,o=u.devicePixelRatio}o=o||this.devicePixelRatio,this.gl.viewport(n*o,r*o,a*o,s*o),this.viewport={x:n,y:r,width:a,height:s,devicePixelRatio:o}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var n=this._clearStack.pop();this.clearColor=n.clearColor,this.clearBit=n.clearBit}},bindSceneRendering:function(n){this._sceneRendering=n},render:function(n,r,a,s){var o=this.gl,u=this.clearColor;if(this.clearBit){o.colorMask(!0,!0,!0,!0),o.depthMask(!0);var c=this.viewport,p=!1,d=c.devicePixelRatio;(c.width!==this._width||c.height!==this._height||d&&d!==this.devicePixelRatio||c.x||c.y)&&(p=!0,o.enable(o.SCISSOR_TEST),o.scissor(c.x*d,c.y*d,c.width*d,c.height*d)),o.clearColor(u[0],u[1],u[2],u[3]),o.clear(this.clearBit),p&&o.disable(o.SCISSOR_TEST)}if(a||n.update(!1),n.updateLights(),r=r||n.getMainCamera(),!r){console.error("Can't find camera in the scene.");return}r.update();var _=n.updateRenderList(r,!0);this._sceneRendering=n;var ja=_.opaque,Ja=_.transparent,ec=n.material;n.trigger("beforerender",this,n,r,_),s?(this.renderPreZ(ja,n,r),o.depthFunc(o.LEQUAL)):o.depthFunc(o.LESS);for(var tc=mat4Create(),rc=vec3$f.create(),nc=0;nc<Ja.length;nc++){var ic=Ja[nc];mat4$2.multiplyAffine(tc,r.viewMatrix.array,ic.worldTransform.array),vec3$f.transformMat4(rc,ic.position.array,tc),ic.__depth=rc[2]}this.renderPass(ja,r,{getMaterial:function(uc){return ec||uc.material},sortCompare:this.opaqueSortCompare}),this.renderPass(Ja,r,{getMaterial:function(uc){return ec||uc.material},sortCompare:this.transparentSortCompare}),n.trigger("afterrender",this,n,r,_),this._sceneRendering=null},getProgram:function(n,r,a){return r=r||n.material,this._programMgr.getProgram(n,r,a)},validateProgram:function(n){if(n.__error){var r=n.__error;if(errorShader[n.__uid__])return;if(errorShader[n.__uid__]=!0,this.throwError)throw new Error(r);this.trigger("error",r)}},updatePrograms:function(n,r,a){var s=a&&a.getMaterial||defaultGetMaterial;r=r||null;for(var o=0;o<n.length;o++){var u=n[o],c=s.call(this,u);if(o>0){var p=n[o-1],d=p.joints?p.joints.length:0,_=u.joints?u.joints.length:0;if(_===d&&u.material===p.material&&u.lightGroup===p.lightGroup){u.__program=p.__program;continue}}var ja=this._programMgr.getProgram(u,c,r);this.validateProgram(ja),u.__program=ja}},renderPass:function(n,r,a){this.trigger("beforerenderpass",this,n,r,a),a=a||{},a.getMaterial=a.getMaterial||defaultGetMaterial,a.getUniform=a.getUniform||defaultGetUniform,a.isMaterialChanged=a.isMaterialChanged||defaultIsMaterialChanged,a.beforeRender=a.beforeRender||noop,a.afterRender=a.afterRender||noop;var s=a.ifRender||defaultIfRender;this.updatePrograms(n,this._sceneRendering,a),a.sortCompare&&n.sort(a.sortCompare);var o=this.viewport,u=o.devicePixelRatio,c=[o.x*u,o.y*u,o.width*u,o.height*u],p=this.devicePixelRatio,d=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*p,this._height*p],_=[c[2],c[3]],ja=Date.now();r?(mat4$2.copy(matrices.VIEW,r.viewMatrix.array),mat4$2.copy(matrices.PROJECTION,r.projectionMatrix.array),mat4$2.copy(matrices.VIEWINVERSE,r.worldTransform.array)):(mat4$2.identity(matrices.VIEW),mat4$2.identity(matrices.PROJECTION),mat4$2.identity(matrices.VIEWINVERSE)),mat4$2.multiply(matrices.VIEWPROJECTION,matrices.PROJECTION,matrices.VIEW),mat4$2.invert(matrices.PROJECTIONINVERSE,matrices.PROJECTION),mat4$2.invert(matrices.VIEWPROJECTIONINVERSE,matrices.VIEWPROJECTION);for(var Ja=this.gl,ec=this._sceneRendering,tc,rc,nc,ic,uc,eh,rh,ah,ih,oh,uh,ch,hh=null,dh=0;dh<n.length;dh++){var gh=n[dh],fh=gh.worldTransform!=null,vh;if(s(gh)){fh&&(vh=gh.isSkinnedMesh&&gh.isSkinnedMesh()?gh.offsetMatrix?gh.offsetMatrix.array:matrices.IDENTITY:gh.worldTransform.array);var ph=gh.geometry,yh=a.getMaterial.call(this,gh),xh=gh.__program,_h=yh.shader,bh=ph.__uid__+"-"+xh.__uid__,Dh=bh!==oh;oh=bh,Dh&&hh&&hh.bindVertexArrayOES(null),fh&&(mat4$2.copy(matrices.WORLD,vh),mat4$2.multiply(matrices.WORLDVIEWPROJECTION,matrices.VIEWPROJECTION,vh),mat4$2.multiplyAffine(matrices.WORLDVIEW,matrices.VIEW,vh),(_h.matrixSemantics.WORLDINVERSE||_h.matrixSemantics.WORLDINVERSETRANSPOSE)&&mat4$2.invert(matrices.WORLDINVERSE,vh),(_h.matrixSemantics.WORLDVIEWINVERSE||_h.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&mat4$2.invert(matrices.WORLDVIEWINVERSE,matrices.WORLDVIEW),(_h.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||_h.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&mat4$2.invert(matrices.WORLDVIEWPROJECTIONINVERSE,matrices.WORLDVIEWPROJECTION)),gh.beforeRender&&gh.beforeRender(this),a.beforeRender.call(this,gh,yh,tc);var Th=xh!==rc;Th?(xh.bind(this),xh.setUniformOfSemantic(Ja,"VIEWPORT",c),xh.setUniformOfSemantic(Ja,"WINDOW_SIZE",d),r&&(xh.setUniformOfSemantic(Ja,"NEAR",r.near),xh.setUniformOfSemantic(Ja,"FAR",r.far)),xh.setUniformOfSemantic(Ja,"DEVICEPIXELRATIO",u),xh.setUniformOfSemantic(Ja,"TIME",ja),xh.setUniformOfSemantic(Ja,"VIEWPORT_SIZE",_),ec&&ec.setLightUniforms(xh,gh.lightGroup,this)):xh=rc,(Th||a.isMaterialChanged(gh,nc,yh,tc))&&(yh.depthTest!==ic&&(yh.depthTest?Ja.enable(Ja.DEPTH_TEST):Ja.disable(Ja.DEPTH_TEST),ic=yh.depthTest),yh.depthMask!==uc&&(Ja.depthMask(yh.depthMask),uc=yh.depthMask),yh.transparent!==ih&&(yh.transparent?Ja.enable(Ja.BLEND):Ja.disable(Ja.BLEND),ih=yh.transparent),yh.transparent&&(yh.blend?yh.blend(Ja):(Ja.blendEquationSeparate(Ja.FUNC_ADD,Ja.FUNC_ADD),Ja.blendFuncSeparate(Ja.SRC_ALPHA,Ja.ONE_MINUS_SRC_ALPHA,Ja.ONE,Ja.ONE_MINUS_SRC_ALPHA))),ch=this._bindMaterial(gh,yh,xh,nc||null,tc||null,rc||null,a.getUniform),tc=yh);var Ch=_h.matrixSemanticKeys;if(fh)for(var wh=0;wh<Ch.length;wh++){var Nh=Ch[wh],Rh=_h.matrixSemantics[Nh],kh=matrices[Nh];if(Rh.isTranspose){var Lh=matrices[Rh.semanticNoTranspose];mat4$2.transpose(kh,Lh)}xh.setUniform(Ja,Rh.type,Rh.symbol,kh)}gh.cullFace!==rh&&(rh=gh.cullFace,Ja.cullFace(rh)),gh.frontFace!==ah&&(ah=gh.frontFace,Ja.frontFace(ah)),gh.culling!==eh&&(eh=gh.culling,eh?Ja.enable(Ja.CULL_FACE):Ja.disable(Ja.CULL_FACE)),this._updateSkeleton(gh,xh,ch),Dh&&(uh=this._bindVAO(hh,_h,ph,xh)),this._renderObject(gh,uh,xh),a.afterRender(this,gh),gh.afterRender&&gh.afterRender(this),rc=xh,nc=gh}}this.trigger("afterrenderpass",this,n,r,a)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(n,r,a){var s=this.gl,o=n.skeleton;if(o)if(o.update(),n.joints.length>this.getMaxJointNumber()){var u=o.getSubSkinMatricesTexture(n.__uid__,n.joints);r.useTextureSlot(this,u,a),r.setUniform(s,"1i","skinMatricesTexture",a),r.setUniform(s,"1f","skinMatricesTextureSize",u.width)}else{var c=o.getSubSkinMatrices(n.__uid__,n.joints);r.setUniformOfSemantic(s,"SKIN_MATRIX",c)}},_renderObject:function(n,r,a){var s=this.gl,o=n.geometry,u=n.mode;u==null&&(u=4);var c=null,p=n.isInstancedMesh&&n.isInstancedMesh();if(p&&(c=this.getGLExtension("ANGLE_instanced_arrays"),!c)){console.warn("Device not support ANGLE_instanced_arrays extension");return}var d;if(p&&(d=this._bindInstancedAttributes(n,a,c)),r.indicesBuffer){var _=this.getGLExtension("OES_element_index_uint"),ja=_&&o.indices instanceof Uint32Array,Ja=ja?s.UNSIGNED_INT:s.UNSIGNED_SHORT;p?c.drawElementsInstancedANGLE(u,r.indicesBuffer.count,Ja,0,n.getInstanceCount()):s.drawElements(u,r.indicesBuffer.count,Ja,0)}else p?c.drawArraysInstancedANGLE(u,0,o.vertexCount,n.getInstanceCount()):s.drawArrays(u,0,o.vertexCount);if(p)for(var ec=0;ec<d.length;ec++)s.disableVertexAttribArray(d[ec])},_bindInstancedAttributes:function(n,r,a){for(var s=this.gl,o=n.getInstancedAttributesBuffers(this),u=[],c=0;c<o.length;c++){var p=o[c],d=r.getAttribLocation(s,p.symbol);if(!(d<0)){var _=attributeBufferTypeMap[p.type]||s.FLOAT;s.enableVertexAttribArray(d),s.bindBuffer(s.ARRAY_BUFFER,p.buffer),s.vertexAttribPointer(d,p.size,_,!1,0,0),a.vertexAttribDivisorANGLE(d,p.divisor),u.push(d)}}return u},_bindMaterial:function(n,r,a,s,o,u,c){for(var p=this.gl,d=u===a,_=a.currentTextureSlot(),ja=r.getEnabledUniforms(),Ja=r.getTextureUniforms(),ec=this._placeholderTexture,tc=0;tc<Ja.length;tc++){var rc=Ja[tc],nc=c(n,r,rc),ic=r.uniforms[rc].type;if(ic==="t"&&nc)nc.__slot=-1;else if(ic==="tv")for(var uc=0;uc<nc.length;uc++)nc[uc]&&(nc[uc].__slot=-1)}ec.__slot=-1;for(var tc=0;tc<ja.length;tc++){var rc=ja[tc],eh=r.uniforms[rc],nc=c(n,r,rc),ic=eh.type,rh=ic==="t";if(rh&&(!nc||!nc.isRenderable())&&(nc=ec),o&&d){var ah=c(s,o,rc);if(rh&&(!ah||!ah.isRenderable())&&(ah=ec),ah===nc){if(rh)a.takeCurrentTextureSlot(this,null);else if(ic==="tv"&&nc)for(var uc=0;uc<nc.length;uc++)a.takeCurrentTextureSlot(this,null);continue}}if(nc!=null)if(rh)if(nc.__slot<0){var ih=a.currentTextureSlot(),oh=a.setUniform(p,"1i",rc,ih);oh&&(a.takeCurrentTextureSlot(this,nc),nc.__slot=ih)}else a.setUniform(p,"1i",rc,nc.__slot);else if(Array.isArray(nc)){if(nc.length===0)continue;if(ic==="tv"){if(!a.hasUniform(rc))continue;for(var uh=[],uc=0;uc<nc.length;uc++){var ch=nc[uc];if(ch.__slot<0){var ih=a.currentTextureSlot();uh.push(ih),a.takeCurrentTextureSlot(this,ch),ch.__slot=ih}else uh.push(ch.__slot)}a.setUniform(p,"1iv",rc,uh)}else a.setUniform(p,eh.type,rc,nc)}else a.setUniform(p,eh.type,rc,nc)}var hh=a.currentTextureSlot();return a.resetTextureSlot(_),hh},_bindVAO:function(n,r,a,s){var o=!a.dynamic,u=this.gl,c=this.__uid__+"-"+s.__uid__,p=a.__vaoCache[c];if(!p){var d=a.getBufferChunks(this);if(!d||!d.length)return;for(var _=d[0],ja=_.attributeBuffers,ah=_.indicesBuffer,rh=[],Ja=[],ec=0;ec<ja.length;ec++){var tc=ja[ec],rc=tc.name,nc=tc.semantic,ic;if(nc){var uc=r.attributeSemantics[nc];ic=uc&&uc.symbol}else ic=rc;ic&&s.attributes[ic]&&(rh.push(tc),Ja.push(ic))}p=new VertexArrayObject(rh,Ja,ah),o&&(a.__vaoCache[c]=p)}var eh=!0;n&&o&&(p.vao==null?p.vao=n.createVertexArrayOES():eh=!1,n.bindVertexArrayOES(p.vao));var rh=p.availableAttributes,ah=p.indicesBuffer;if(eh){for(var ih=s.enableAttributes(this,p.availableAttributeSymbols,n&&o&&p),ec=0;ec<rh.length;ec++){var oh=ih[ec];if(oh!==-1){var tc=rh[ec],uh=tc.buffer,ch=tc.size,hh=attributeBufferTypeMap[tc.type]||u.FLOAT;u.bindBuffer(u.ARRAY_BUFFER,uh),u.vertexAttribPointer(oh,ch,hh,!1,0,0)}}a.isUseIndices()&&u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,ah.buffer)}return p},renderPreZ:function(n,r,a){var s=this.gl,o=this._prezMaterial||new Material({shader:new Shader(Shader.source("clay.prez.vertex"),Shader.source("clay.prez.fragment"))});this._prezMaterial=o,s.colorMask(!1,!1,!1,!1),s.depthMask(!0),this.renderPass(n,a,{ifRender:function(u){return!u.ignorePreZ},isMaterialChanged:function(u,c){var p=u.material,d=c.material;return p.get("diffuseMap")!==d.get("diffuseMap")||(p.get("alphaCutoff")||0)!==(d.get("alphaCutoff")||0)},getUniform:function(u,c,p){if(p==="alphaMap")return u.material.get("diffuseMap");if(p==="alphaCutoff"){if(u.material.isDefined("fragment","ALPHA_TEST")&&u.material.get("diffuseMap")){var d=u.material.get("alphaCutoff");return d||0}return 0}else return p==="uvRepeat"?u.material.get("uvRepeat"):p==="uvOffset"?u.material.get("uvOffset"):c.get(p)},getMaterial:function(){return o},sort:this.opaqueSortCompare}),s.colorMask(!0,!0,!0,!0),s.depthMask(!0)},disposeScene:function(n){this.disposeNode(n,!0,!0),n.dispose()},disposeNode:function(n,r,a){n.getParent()&&n.getParent().remove(n);var s={};n.traverse(function(o){var u=o.material;if(o.geometry&&r&&o.geometry.dispose(this),a&&u&&!s[u.__uid__]){for(var c=u.getTextureUniforms(),p=0;p<c.length;p++){var d=c[p],_=u.uniforms[d].value,ja=u.uniforms[d].type;if(_){if(ja==="t")_.dispose&&_.dispose(this);else if(ja==="tv")for(var Ja=0;Ja<_.length;Ja++)_[Ja]&&_[Ja].dispose&&_[Ja].dispose(this)}}s[u.__uid__]=!0}o.dispose&&o.dispose(this)},this)},disposeGeometry:function(n){n.dispose(this)},disposeTexture:function(n){n.dispose(this)},disposeFrameBuffer:function(n){n.dispose(this)},dispose:function(){},screenToNDC:function(n,r,a){a||(a=new Vector2),r=this._height-r;var s=this.viewport,o=a.array;return o[0]=(n-s.x)/s.width,o[0]=o[0]*2-1,o[1]=(r-s.y)/s.height,o[1]=o[1]*2-1,a}});Renderer.opaqueSortCompare=Renderer.prototype.opaqueSortCompare=function(n,r){return n.renderOrder===r.renderOrder?n.__program===r.__program?n.material===r.material?n.geometry.__uid__-r.geometry.__uid__:n.material.__uid__-r.material.__uid__:n.__program&&r.__program?n.__program.__uid__-r.__program.__uid__:0:n.renderOrder-r.renderOrder};Renderer.transparentSortCompare=Renderer.prototype.transparentSortCompare=function(n,r){return n.renderOrder===r.renderOrder?n.__depth===r.__depth?n.__program===r.__program?n.material===r.material?n.geometry.__uid__-r.geometry.__uid__:n.material.__uid__-r.material.__uid__:n.__program&&r.__program?n.__program.__uid__-r.__program.__uid__:0:n.__depth-r.__depth:n.renderOrder-r.renderOrder};var matrices={IDENTITY:mat4Create(),WORLD:mat4Create(),VIEW:mat4Create(),PROJECTION:mat4Create(),WORLDVIEW:mat4Create(),VIEWPROJECTION:mat4Create(),WORLDVIEWPROJECTION:mat4Create(),WORLDINVERSE:mat4Create(),VIEWINVERSE:mat4Create(),PROJECTIONINVERSE:mat4Create(),WORLDVIEWINVERSE:mat4Create(),VIEWPROJECTIONINVERSE:mat4Create(),WORLDVIEWPROJECTIONINVERSE:mat4Create(),WORLDTRANSPOSE:mat4Create(),VIEWTRANSPOSE:mat4Create(),PROJECTIONTRANSPOSE:mat4Create(),WORLDVIEWTRANSPOSE:mat4Create(),VIEWPROJECTIONTRANSPOSE:mat4Create(),WORLDVIEWPROJECTIONTRANSPOSE:mat4Create(),WORLDINVERSETRANSPOSE:mat4Create(),VIEWINVERSETRANSPOSE:mat4Create(),PROJECTIONINVERSETRANSPOSE:mat4Create(),WORLDVIEWINVERSETRANSPOSE:mat4Create(),VIEWPROJECTIONINVERSETRANSPOSE:mat4Create(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:mat4Create()};Renderer.COLOR_BUFFER_BIT=glenum.COLOR_BUFFER_BIT;Renderer.DEPTH_BUFFER_BIT=glenum.DEPTH_BUFFER_BIT;Renderer.STENCIL_BUFFER_BIT=glenum.STENCIL_BUFFER_BIT;var Vector3=function(n,r,a){n=n||0,r=r||0,a=a||0,this.array=vec3$f.fromValues(n,r,a),this._dirty=!0};Vector3.prototype={constructor:Vector3,add:function(n){return vec3$f.add(this.array,this.array,n.array),this._dirty=!0,this},set:function(n,r,a){return this.array[0]=n,this.array[1]=r,this.array[2]=a,this._dirty=!0,this},setArray:function(n){return this.array[0]=n[0],this.array[1]=n[1],this.array[2]=n[2],this._dirty=!0,this},clone:function(){return new Vector3(this.x,this.y,this.z)},copy:function(n){return vec3$f.copy(this.array,n.array),this._dirty=!0,this},cross:function(n,r){return vec3$f.cross(this.array,n.array,r.array),this._dirty=!0,this},dist:function(n){return vec3$f.dist(this.array,n.array)},distance:function(n){return vec3$f.distance(this.array,n.array)},div:function(n){return vec3$f.div(this.array,this.array,n.array),this._dirty=!0,this},divide:function(n){return vec3$f.divide(this.array,this.array,n.array),this._dirty=!0,this},dot:function(n){return vec3$f.dot(this.array,n.array)},len:function(){return vec3$f.len(this.array)},length:function(){return vec3$f.length(this.array)},lerp:function(n,r,a){return vec3$f.lerp(this.array,n.array,r.array,a),this._dirty=!0,this},min:function(n){return vec3$f.min(this.array,this.array,n.array),this._dirty=!0,this},max:function(n){return vec3$f.max(this.array,this.array,n.array),this._dirty=!0,this},mul:function(n){return vec3$f.mul(this.array,this.array,n.array),this._dirty=!0,this},multiply:function(n){return vec3$f.multiply(this.array,this.array,n.array),this._dirty=!0,this},negate:function(){return vec3$f.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return vec3$f.normalize(this.array,this.array),this._dirty=!0,this},random:function(n){return vec3$f.random(this.array,n),this._dirty=!0,this},scale:function(n){return vec3$f.scale(this.array,this.array,n),this._dirty=!0,this},scaleAndAdd:function(n,r){return vec3$f.scaleAndAdd(this.array,this.array,n.array,r),this._dirty=!0,this},sqrDist:function(n){return vec3$f.sqrDist(this.array,n.array)},squaredDistance:function(n){return vec3$f.squaredDistance(this.array,n.array)},sqrLen:function(){return vec3$f.sqrLen(this.array)},squaredLength:function(){return vec3$f.squaredLength(this.array)},sub:function(n){return vec3$f.sub(this.array,this.array,n.array),this._dirty=!0,this},subtract:function(n){return vec3$f.subtract(this.array,this.array,n.array),this._dirty=!0,this},transformMat3:function(n){return vec3$f.transformMat3(this.array,this.array,n.array),this._dirty=!0,this},transformMat4:function(n){return vec3$f.transformMat4(this.array,this.array,n.array),this._dirty=!0,this},transformQuat:function(n){return vec3$f.transformQuat(this.array,this.array,n.array),this._dirty=!0,this},applyProjection:function(n){var r=this.array;if(n=n.array,n[15]===0){var a=-1/r[2];r[0]=n[0]*r[0]*a,r[1]=n[5]*r[1]*a,r[2]=(n[10]*r[2]+n[14])*a}else r[0]=n[0]*r[0]+n[12],r[1]=n[5]*r[1]+n[13],r[2]=n[10]*r[2]+n[14];return this._dirty=!0,this},eulerFromQuat:function(n,r){Vector3.eulerFromQuat(this,n,r)},eulerFromMat3:function(n,r){Vector3.eulerFromMat3(this,n,r)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var defineProperty$3=Object.defineProperty;if(defineProperty$3){var proto$3=Vector3.prototype;defineProperty$3(proto$3,"x",{get:function(){return this.array[0]},set:function(n){this.array[0]=n,this._dirty=!0}}),defineProperty$3(proto$3,"y",{get:function(){return this.array[1]},set:function(n){this.array[1]=n,this._dirty=!0}}),defineProperty$3(proto$3,"z",{get:function(){return this.array[2]},set:function(n){this.array[2]=n,this._dirty=!0}})}Vector3.add=function(n,r,a){return vec3$f.add(n.array,r.array,a.array),n._dirty=!0,n};Vector3.set=function(n,r,a,s){vec3$f.set(n.array,r,a,s),n._dirty=!0};Vector3.copy=function(n,r){return vec3$f.copy(n.array,r.array),n._dirty=!0,n};Vector3.cross=function(n,r,a){return vec3$f.cross(n.array,r.array,a.array),n._dirty=!0,n};Vector3.dist=function(n,r){return vec3$f.distance(n.array,r.array)};Vector3.distance=Vector3.dist;Vector3.div=function(n,r,a){return vec3$f.divide(n.array,r.array,a.array),n._dirty=!0,n};Vector3.divide=Vector3.div;Vector3.dot=function(n,r){return vec3$f.dot(n.array,r.array)};Vector3.len=function(n){return vec3$f.length(n.array)};Vector3.lerp=function(n,r,a,s){return vec3$f.lerp(n.array,r.array,a.array,s),n._dirty=!0,n};Vector3.min=function(n,r,a){return vec3$f.min(n.array,r.array,a.array),n._dirty=!0,n};Vector3.max=function(n,r,a){return vec3$f.max(n.array,r.array,a.array),n._dirty=!0,n};Vector3.mul=function(n,r,a){return vec3$f.multiply(n.array,r.array,a.array),n._dirty=!0,n};Vector3.multiply=Vector3.mul;Vector3.negate=function(n,r){return vec3$f.negate(n.array,r.array),n._dirty=!0,n};Vector3.normalize=function(n,r){return vec3$f.normalize(n.array,r.array),n._dirty=!0,n};Vector3.random=function(n,r){return vec3$f.random(n.array,r),n._dirty=!0,n};Vector3.scale=function(n,r,a){return vec3$f.scale(n.array,r.array,a),n._dirty=!0,n};Vector3.scaleAndAdd=function(n,r,a,s){return vec3$f.scaleAndAdd(n.array,r.array,a.array,s),n._dirty=!0,n};Vector3.sqrDist=function(n,r){return vec3$f.sqrDist(n.array,r.array)};Vector3.squaredDistance=Vector3.sqrDist;Vector3.sqrLen=function(n){return vec3$f.sqrLen(n.array)};Vector3.squaredLength=Vector3.sqrLen;Vector3.sub=function(n,r,a){return vec3$f.subtract(n.array,r.array,a.array),n._dirty=!0,n};Vector3.subtract=Vector3.sub;Vector3.transformMat3=function(n,r,a){return vec3$f.transformMat3(n.array,r.array,a.array),n._dirty=!0,n};Vector3.transformMat4=function(n,r,a){return vec3$f.transformMat4(n.array,r.array,a.array),n._dirty=!0,n};Vector3.transformQuat=function(n,r,a){return vec3$f.transformQuat(n.array,r.array,a.array),n._dirty=!0,n};function clamp(n,r,a){return n<r?r:n>a?a:n}var atan2=Math.atan2,asin$1=Math.asin,abs=Math.abs;Vector3.eulerFromQuat=function(n,r,ec){n._dirty=!0,r=r.array;var s=n.array,o=r[0],u=r[1],c=r[2],p=r[3],d=o*o,_=u*u,ja=c*c,Ja=p*p,ec=(ec||"XYZ").toUpperCase();switch(ec){case"XYZ":s[0]=atan2(2*(o*p-u*c),Ja-d-_+ja),s[1]=asin$1(clamp(2*(o*c+u*p),-1,1)),s[2]=atan2(2*(c*p-o*u),Ja+d-_-ja);break;case"YXZ":s[0]=asin$1(clamp(2*(o*p-u*c),-1,1)),s[1]=atan2(2*(o*c+u*p),Ja-d-_+ja),s[2]=atan2(2*(o*u+c*p),Ja-d+_-ja);break;case"ZXY":s[0]=asin$1(clamp(2*(o*p+u*c),-1,1)),s[1]=atan2(2*(u*p-c*o),Ja-d-_+ja),s[2]=atan2(2*(c*p-o*u),Ja-d+_-ja);break;case"ZYX":s[0]=atan2(2*(o*p+c*u),Ja-d-_+ja),s[1]=asin$1(clamp(2*(u*p-o*c),-1,1)),s[2]=atan2(2*(o*u+c*p),Ja+d-_-ja);break;case"YZX":s[0]=atan2(2*(o*p-c*u),Ja-d+_-ja),s[1]=atan2(2*(u*p-o*c),Ja+d-_-ja),s[2]=asin$1(clamp(2*(o*u+c*p),-1,1));break;case"XZY":s[0]=atan2(2*(o*p+u*c),Ja-d+_-ja),s[1]=atan2(2*(o*c+u*p),Ja+d-_-ja),s[2]=asin$1(clamp(2*(c*p-o*u),-1,1));break;default:console.warn("Unkown order: "+ec)}return n};Vector3.eulerFromMat3=function(n,r,rc){var s=r.array,o=s[0],u=s[3],c=s[6],p=s[1],d=s[4],_=s[7],ja=s[2],Ja=s[5],ec=s[8],tc=n.array,rc=(rc||"XYZ").toUpperCase();switch(rc){case"XYZ":tc[1]=asin$1(clamp(c,-1,1)),abs(c)<.99999?(tc[0]=atan2(-_,ec),tc[2]=atan2(-u,o)):(tc[0]=atan2(Ja,d),tc[2]=0);break;case"YXZ":tc[0]=asin$1(-clamp(_,-1,1)),abs(_)<.99999?(tc[1]=atan2(c,ec),tc[2]=atan2(p,d)):(tc[1]=atan2(-ja,o),tc[2]=0);break;case"ZXY":tc[0]=asin$1(clamp(Ja,-1,1)),abs(Ja)<.99999?(tc[1]=atan2(-ja,ec),tc[2]=atan2(-u,d)):(tc[1]=0,tc[2]=atan2(p,o));break;case"ZYX":tc[1]=asin$1(-clamp(ja,-1,1)),abs(ja)<.99999?(tc[0]=atan2(Ja,ec),tc[2]=atan2(p,o)):(tc[0]=0,tc[2]=atan2(-u,d));break;case"YZX":tc[2]=asin$1(clamp(p,-1,1)),abs(p)<.99999?(tc[0]=atan2(-_,d),tc[1]=atan2(-ja,o)):(tc[0]=0,tc[1]=atan2(c,ec));break;case"XZY":tc[2]=asin$1(-clamp(u,-1,1)),abs(u)<.99999?(tc[0]=atan2(Ja,d),tc[1]=atan2(c,o)):(tc[0]=atan2(-_,ec),tc[1]=0);break;default:console.warn("Unkown order: "+rc)}return n._dirty=!0,n};Object.defineProperties(Vector3,{POSITIVE_X:{get:function(){return new Vector3(1,0,0)}},NEGATIVE_X:{get:function(){return new Vector3(-1,0,0)}},POSITIVE_Y:{get:function(){return new Vector3(0,1,0)}},NEGATIVE_Y:{get:function(){return new Vector3(0,-1,0)}},POSITIVE_Z:{get:function(){return new Vector3(0,0,1)}},NEGATIVE_Z:{get:function(){return new Vector3(0,0,-1)}},UP:{get:function(){return new Vector3(0,1,0)}},ZERO:{get:function(){return new Vector3}}});var EPSILON=1e-5,Ray=function(n,r){this.origin=n||new Vector3,this.direction=r||new Vector3};Ray.prototype={constructor:Ray,intersectPlane:function(n,r){var a=n.normal.array,s=n.distance,o=this.origin.array,u=this.direction.array,c=vec3$f.dot(a,u);if(c===0)return null;r||(r=new Vector3);var p=(vec3$f.dot(a,o)-s)/c;return vec3$f.scaleAndAdd(r.array,o,u,-p),r._dirty=!0,r},mirrorAgainstPlane:function(n){var r=vec3$f.dot(n.normal.array,this.direction.array);vec3$f.scaleAndAdd(this.direction.array,this.direction.array,n.normal.array,-r*2),this.direction._dirty=!0},distanceToPoint:function(){var n=vec3$f.create();return function(r){vec3$f.sub(n,r,this.origin.array);var a=vec3$f.dot(n,this.direction.array);if(a<0)return vec3$f.distance(this.origin.array,r);var s=vec3$f.lenSquared(n);return Math.sqrt(s-a*a)}}(),intersectSphere:function(){var n=vec3$f.create();return function(r,a,s){var o=this.origin.array,u=this.direction.array;r=r.array,vec3$f.sub(n,r,o);var c=vec3$f.dot(n,u),p=vec3$f.squaredLength(n),d=p-c*c,_=a*a;if(!(d>_)){var ja=Math.sqrt(_-d),Ja=c-ja,ec=c+ja;return s||(s=new Vector3),Ja<0?ec<0?null:(vec3$f.scaleAndAdd(s.array,o,u,ec),s):(vec3$f.scaleAndAdd(s.array,o,u,Ja),s)}}}(),intersectBoundingBox:function(n,r){var a=this.direction.array,s=this.origin.array,o=n.min.array,u=n.max.array,c=1/a[0],p=1/a[1],d=1/a[2],_,ja,Ja,ec,tc,rc;if(c>=0?(_=(o[0]-s[0])*c,ja=(u[0]-s[0])*c):(ja=(o[0]-s[0])*c,_=(u[0]-s[0])*c),p>=0?(Ja=(o[1]-s[1])*p,ec=(u[1]-s[1])*p):(ec=(o[1]-s[1])*p,Ja=(u[1]-s[1])*p),_>ec||Ja>ja||((Ja>_||_!==_)&&(_=Ja),(ec<ja||ja!==ja)&&(ja=ec),d>=0?(tc=(o[2]-s[2])*d,rc=(u[2]-s[2])*d):(rc=(o[2]-s[2])*d,tc=(u[2]-s[2])*d),_>rc||tc>ja)||((tc>_||_!==_)&&(_=tc),(rc<ja||ja!==ja)&&(ja=rc),ja<0))return null;var nc=_>=0?_:ja;return r||(r=new Vector3),vec3$f.scaleAndAdd(r.array,s,a,nc),r},intersectTriangle:function(){var n=vec3$f.create(),r=vec3$f.create(),a=vec3$f.create(),s=vec3$f.create();return function(o,u,c,p,d,_){var ja=this.direction.array,Ja=this.origin.array;o=o.array,u=u.array,c=c.array,vec3$f.sub(n,u,o),vec3$f.sub(r,c,o),vec3$f.cross(s,r,ja);var ec=vec3$f.dot(n,s);if(p){if(ec>-EPSILON)return null}else if(ec>-EPSILON&&ec<EPSILON)return null;vec3$f.sub(a,Ja,o);var tc=vec3$f.dot(s,a)/ec;if(tc<0||tc>1)return null;vec3$f.cross(s,n,a);var rc=vec3$f.dot(ja,s)/ec;if(rc<0||rc>1||tc+rc>1)return null;vec3$f.cross(s,n,r);var nc=-vec3$f.dot(a,s)/ec;return nc<0?null:(d||(d=new Vector3),_&&Vector3.set(_,1-tc-rc,tc,rc),vec3$f.scaleAndAdd(d.array,Ja,ja,nc),d)}}(),applyTransform:function(n){Vector3.add(this.direction,this.direction,this.origin),Vector3.transformMat4(this.origin,this.origin,n),Vector3.transformMat4(this.direction,this.direction,n),Vector3.sub(this.direction,this.direction,this.origin),Vector3.normalize(this.direction,this.direction)},copy:function(n){Vector3.copy(this.origin,n.origin),Vector3.copy(this.direction,n.direction)},clone:function(){var n=new Ray;return n.copy(this),n}};var vec4$1={};vec4$1.create=function(){var n=new GLMAT_ARRAY_TYPE(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n};vec4$1.clone=function(n){var r=new GLMAT_ARRAY_TYPE(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r};vec4$1.fromValues=function(n,r,a,s){var o=new GLMAT_ARRAY_TYPE(4);return o[0]=n,o[1]=r,o[2]=a,o[3]=s,o};vec4$1.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n};vec4$1.set=function(n,r,a,s,o){return n[0]=r,n[1]=a,n[2]=s,n[3]=o,n};vec4$1.add=function(n,r,a){return n[0]=r[0]+a[0],n[1]=r[1]+a[1],n[2]=r[2]+a[2],n[3]=r[3]+a[3],n};vec4$1.subtract=function(n,r,a){return n[0]=r[0]-a[0],n[1]=r[1]-a[1],n[2]=r[2]-a[2],n[3]=r[3]-a[3],n};vec4$1.sub=vec4$1.subtract;vec4$1.multiply=function(n,r,a){return n[0]=r[0]*a[0],n[1]=r[1]*a[1],n[2]=r[2]*a[2],n[3]=r[3]*a[3],n};vec4$1.mul=vec4$1.multiply;vec4$1.divide=function(n,r,a){return n[0]=r[0]/a[0],n[1]=r[1]/a[1],n[2]=r[2]/a[2],n[3]=r[3]/a[3],n};vec4$1.div=vec4$1.divide;vec4$1.min=function(n,r,a){return n[0]=Math.min(r[0],a[0]),n[1]=Math.min(r[1],a[1]),n[2]=Math.min(r[2],a[2]),n[3]=Math.min(r[3],a[3]),n};vec4$1.max=function(n,r,a){return n[0]=Math.max(r[0],a[0]),n[1]=Math.max(r[1],a[1]),n[2]=Math.max(r[2],a[2]),n[3]=Math.max(r[3],a[3]),n};vec4$1.scale=function(n,r,a){return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n[3]=r[3]*a,n};vec4$1.scaleAndAdd=function(n,r,a,s){return n[0]=r[0]+a[0]*s,n[1]=r[1]+a[1]*s,n[2]=r[2]+a[2]*s,n[3]=r[3]+a[3]*s,n};vec4$1.distance=function(n,r){var a=r[0]-n[0],s=r[1]-n[1],o=r[2]-n[2],u=r[3]-n[3];return Math.sqrt(a*a+s*s+o*o+u*u)};vec4$1.dist=vec4$1.distance;vec4$1.squaredDistance=function(n,r){var a=r[0]-n[0],s=r[1]-n[1],o=r[2]-n[2],u=r[3]-n[3];return a*a+s*s+o*o+u*u};vec4$1.sqrDist=vec4$1.squaredDistance;vec4$1.length=function(n){var r=n[0],a=n[1],s=n[2],o=n[3];return Math.sqrt(r*r+a*a+s*s+o*o)};vec4$1.len=vec4$1.length;vec4$1.squaredLength=function(n){var r=n[0],a=n[1],s=n[2],o=n[3];return r*r+a*a+s*s+o*o};vec4$1.sqrLen=vec4$1.squaredLength;vec4$1.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=-r[3],n};vec4$1.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n[3]=1/r[3],n};vec4$1.normalize=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=a*a+s*s+o*o+u*u;return c>0&&(c=1/Math.sqrt(c),n[0]=r[0]*c,n[1]=r[1]*c,n[2]=r[2]*c,n[3]=r[3]*c),n};vec4$1.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]};vec4$1.lerp=function(n,r,a,s){var o=r[0],u=r[1],c=r[2],p=r[3];return n[0]=o+s*(a[0]-o),n[1]=u+s*(a[1]-u),n[2]=c+s*(a[2]-c),n[3]=p+s*(a[3]-p),n};vec4$1.random=function(n,r){return r=r||1,n[0]=GLMAT_RANDOM$1(),n[1]=GLMAT_RANDOM$1(),n[2]=GLMAT_RANDOM$1(),n[3]=GLMAT_RANDOM$1(),vec4$1.normalize(n,n),vec4$1.scale(n,n,r),n};vec4$1.transformMat4=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3];return n[0]=a[0]*s+a[4]*o+a[8]*u+a[12]*c,n[1]=a[1]*s+a[5]*o+a[9]*u+a[13]*c,n[2]=a[2]*s+a[6]*o+a[10]*u+a[14]*c,n[3]=a[3]*s+a[7]*o+a[11]*u+a[15]*c,n};vec4$1.transformQuat=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=a[0],p=a[1],d=a[2],_=a[3],ja=_*s+p*u-d*o,Ja=_*o+d*s-c*u,ec=_*u+c*o-p*s,tc=-c*s-p*o-d*u;return n[0]=ja*_+tc*-c+Ja*-d-ec*-p,n[1]=Ja*_+tc*-p+ec*-c-ja*-d,n[2]=ec*_+tc*-d+ja*-p-Ja*-c,n};vec4$1.forEach=function(){var n=vec4$1.create();return function(r,a,s,o,u,c){var p,d;for(a||(a=4),s||(s=0),o?d=Math.min(o*a+s,r.length):d=r.length,p=s;p<d;p+=a)n[0]=r[p],n[1]=r[p+1],n[2]=r[p+2],n[3]=r[p+3],u(n,n,c),r[p]=n[0],r[p+1]=n[1],r[p+2]=n[2],r[p+3]=n[3];return r}}();var mat3$1={};mat3$1.create=function(){var n=new GLMAT_ARRAY_TYPE(9);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};mat3$1.fromMat4=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[4],n[4]=r[5],n[5]=r[6],n[6]=r[8],n[7]=r[9],n[8]=r[10],n};mat3$1.clone=function(n){var r=new GLMAT_ARRAY_TYPE(9);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r};mat3$1.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n};mat3$1.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};mat3$1.transpose=function(n,r){if(n===r){var a=r[1],s=r[2],o=r[5];n[1]=r[3],n[2]=r[6],n[3]=a,n[5]=r[7],n[6]=s,n[7]=o}else n[0]=r[0],n[1]=r[3],n[2]=r[6],n[3]=r[1],n[4]=r[4],n[5]=r[7],n[6]=r[2],n[7]=r[5],n[8]=r[8];return n};mat3$1.invert=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=r[4],p=r[5],d=r[6],_=r[7],ja=r[8],Ja=ja*c-p*_,ec=-ja*u+p*d,tc=_*u-c*d,rc=a*Ja+s*ec+o*tc;return rc?(rc=1/rc,n[0]=Ja*rc,n[1]=(-ja*s+o*_)*rc,n[2]=(p*s-o*c)*rc,n[3]=ec*rc,n[4]=(ja*a-o*d)*rc,n[5]=(-p*a+o*u)*rc,n[6]=tc*rc,n[7]=(-_*a+s*d)*rc,n[8]=(c*a-s*u)*rc,n):null};mat3$1.adjoint=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=r[4],p=r[5],d=r[6],_=r[7],ja=r[8];return n[0]=c*ja-p*_,n[1]=o*_-s*ja,n[2]=s*p-o*c,n[3]=p*d-u*ja,n[4]=a*ja-o*d,n[5]=o*u-a*p,n[6]=u*_-c*d,n[7]=s*d-a*_,n[8]=a*c-s*u,n};mat3$1.determinant=function(n){var r=n[0],a=n[1],s=n[2],o=n[3],u=n[4],c=n[5],p=n[6],d=n[7],_=n[8];return r*(_*u-c*d)+a*(-_*o+c*p)+s*(d*o-u*p)};mat3$1.multiply=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=r[4],d=r[5],_=r[6],ja=r[7],Ja=r[8],ec=a[0],tc=a[1],rc=a[2],nc=a[3],ic=a[4],uc=a[5],eh=a[6],rh=a[7],ah=a[8];return n[0]=ec*s+tc*c+rc*_,n[1]=ec*o+tc*p+rc*ja,n[2]=ec*u+tc*d+rc*Ja,n[3]=nc*s+ic*c+uc*_,n[4]=nc*o+ic*p+uc*ja,n[5]=nc*u+ic*d+uc*Ja,n[6]=eh*s+rh*c+ah*_,n[7]=eh*o+rh*p+ah*ja,n[8]=eh*u+rh*d+ah*Ja,n};mat3$1.mul=mat3$1.multiply;mat3$1.translate=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=r[4],d=r[5],_=r[6],ja=r[7],Ja=r[8],ec=a[0],tc=a[1];return n[0]=s,n[1]=o,n[2]=u,n[3]=c,n[4]=p,n[5]=d,n[6]=ec*s+tc*c+_,n[7]=ec*o+tc*p+ja,n[8]=ec*u+tc*d+Ja,n};mat3$1.rotate=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=r[4],d=r[5],_=r[6],ja=r[7],Ja=r[8],ec=Math.sin(a),tc=Math.cos(a);return n[0]=tc*s+ec*c,n[1]=tc*o+ec*p,n[2]=tc*u+ec*d,n[3]=tc*c-ec*s,n[4]=tc*p-ec*o,n[5]=tc*d-ec*u,n[6]=_,n[7]=ja,n[8]=Ja,n};mat3$1.scale=function(n,r,a){var s=a[0],o=a[1];return n[0]=s*r[0],n[1]=s*r[1],n[2]=s*r[2],n[3]=o*r[3],n[4]=o*r[4],n[5]=o*r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n};mat3$1.fromMat2d=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=0,n[3]=r[2],n[4]=r[3],n[5]=0,n[6]=r[4],n[7]=r[5],n[8]=1,n};mat3$1.fromQuat=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=a+a,p=s+s,d=o+o,_=a*c,ja=s*c,Ja=s*p,ec=o*c,tc=o*p,rc=o*d,nc=u*c,ic=u*p,uc=u*d;return n[0]=1-Ja-rc,n[3]=ja-uc,n[6]=ec+ic,n[1]=ja+uc,n[4]=1-_-rc,n[7]=tc-nc,n[2]=ec-ic,n[5]=tc+nc,n[8]=1-_-Ja,n};mat3$1.normalFromMat4=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=r[4],p=r[5],d=r[6],_=r[7],ja=r[8],Ja=r[9],ec=r[10],tc=r[11],rc=r[12],nc=r[13],ic=r[14],uc=r[15],eh=a*p-s*c,rh=a*d-o*c,ah=a*_-u*c,ih=s*d-o*p,oh=s*_-u*p,uh=o*_-u*d,ch=ja*nc-Ja*rc,hh=ja*ic-ec*rc,dh=ja*uc-tc*rc,gh=Ja*ic-ec*nc,fh=Ja*uc-tc*nc,vh=ec*uc-tc*ic,ph=eh*vh-rh*fh+ah*gh+ih*dh-oh*hh+uh*ch;return ph?(ph=1/ph,n[0]=(p*vh-d*fh+_*gh)*ph,n[1]=(d*dh-c*vh-_*hh)*ph,n[2]=(c*fh-p*dh+_*ch)*ph,n[3]=(o*fh-s*vh-u*gh)*ph,n[4]=(a*vh-o*dh+u*hh)*ph,n[5]=(s*dh-a*fh-u*ch)*ph,n[6]=(nc*uh-ic*oh+uc*ih)*ph,n[7]=(ic*ah-rc*uh-uc*rh)*ph,n[8]=(rc*oh-nc*ah+uc*eh)*ph,n):null};mat3$1.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2))};var quat={};quat.create=function(){var n=new GLMAT_ARRAY_TYPE(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n};quat.rotationTo=function(){var n=vec3$f.create(),r=vec3$f.fromValues(1,0,0),a=vec3$f.fromValues(0,1,0);return function(s,o,u){var c=vec3$f.dot(o,u);return c<-.999999?(vec3$f.cross(n,r,o),vec3$f.length(n)<1e-6&&vec3$f.cross(n,a,o),vec3$f.normalize(n,n),quat.setAxisAngle(s,n,Math.PI),s):c>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(vec3$f.cross(n,o,u),s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=1+c,quat.normalize(s,s))}}();quat.setAxes=function(){var n=mat3$1.create();return function(r,a,s,o){return n[0]=s[0],n[3]=s[1],n[6]=s[2],n[1]=o[0],n[4]=o[1],n[7]=o[2],n[2]=-a[0],n[5]=-a[1],n[8]=-a[2],quat.normalize(r,quat.fromMat3(r,n))}}();quat.clone=vec4$1.clone;quat.fromValues=vec4$1.fromValues;quat.copy=vec4$1.copy;quat.set=vec4$1.set;quat.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n};quat.setAxisAngle=function(n,r,a){a=a*.5;var s=Math.sin(a);return n[0]=s*r[0],n[1]=s*r[1],n[2]=s*r[2],n[3]=Math.cos(a),n};quat.add=vec4$1.add;quat.multiply=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=a[0],d=a[1],_=a[2],ja=a[3];return n[0]=s*ja+c*p+o*_-u*d,n[1]=o*ja+c*d+u*p-s*_,n[2]=u*ja+c*_+s*d-o*p,n[3]=c*ja-s*p-o*d-u*_,n};quat.mul=quat.multiply;quat.scale=vec4$1.scale;quat.rotateX=function(n,r,a){a*=.5;var s=r[0],o=r[1],u=r[2],c=r[3],p=Math.sin(a),d=Math.cos(a);return n[0]=s*d+c*p,n[1]=o*d+u*p,n[2]=u*d-o*p,n[3]=c*d-s*p,n};quat.rotateY=function(n,r,a){a*=.5;var s=r[0],o=r[1],u=r[2],c=r[3],p=Math.sin(a),d=Math.cos(a);return n[0]=s*d-u*p,n[1]=o*d+c*p,n[2]=u*d+s*p,n[3]=c*d-o*p,n};quat.rotateZ=function(n,r,a){a*=.5;var s=r[0],o=r[1],u=r[2],c=r[3],p=Math.sin(a),d=Math.cos(a);return n[0]=s*d+o*p,n[1]=o*d-s*p,n[2]=u*d+c*p,n[3]=c*d-u*p,n};quat.calculateW=function(n,r){var a=r[0],s=r[1],o=r[2];return n[0]=a,n[1]=s,n[2]=o,n[3]=Math.sqrt(Math.abs(1-a*a-s*s-o*o)),n};quat.dot=vec4$1.dot;quat.lerp=vec4$1.lerp;quat.slerp=function(n,r,a,s){var o=r[0],u=r[1],c=r[2],p=r[3],d=a[0],_=a[1],ja=a[2],Ja=a[3],ec,tc,rc,nc,ic;return tc=o*d+u*_+c*ja+p*Ja,tc<0&&(tc=-tc,d=-d,_=-_,ja=-ja,Ja=-Ja),1-tc>1e-6?(ec=Math.acos(tc),rc=Math.sin(ec),nc=Math.sin((1-s)*ec)/rc,ic=Math.sin(s*ec)/rc):(nc=1-s,ic=s),n[0]=nc*o+ic*d,n[1]=nc*u+ic*_,n[2]=nc*c+ic*ja,n[3]=nc*p+ic*Ja,n};quat.invert=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=a*a+s*s+o*o+u*u,p=c?1/c:0;return n[0]=-a*p,n[1]=-s*p,n[2]=-o*p,n[3]=u*p,n};quat.conjugate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=r[3],n};quat.length=vec4$1.length;quat.len=quat.length;quat.squaredLength=vec4$1.squaredLength;quat.sqrLen=quat.squaredLength;quat.normalize=vec4$1.normalize;quat.fromMat3=function(n,r){var a=r[0]+r[4]+r[8],s;if(a>0)s=Math.sqrt(a+1),n[3]=.5*s,s=.5/s,n[0]=(r[5]-r[7])*s,n[1]=(r[6]-r[2])*s,n[2]=(r[1]-r[3])*s;else{var o=0;r[4]>r[0]&&(o=1),r[8]>r[o*3+o]&&(o=2);var u=(o+1)%3,c=(o+2)%3;s=Math.sqrt(r[o*3+o]-r[u*3+u]-r[c*3+c]+1),n[o]=.5*s,s=.5/s,n[3]=(r[u*3+c]-r[c*3+u])*s,n[u]=(r[u*3+o]+r[o*3+u])*s,n[c]=(r[c*3+o]+r[o*3+c])*s}return n};var Matrix4=function(){this._axisX=new Vector3,this._axisY=new Vector3,this._axisZ=new Vector3,this.array=mat4$2.create(),this._dirty=!0};Matrix4.prototype={constructor:Matrix4,setArray:function(n){for(var r=0;r<this.array.length;r++)this.array[r]=n[r];return this._dirty=!0,this},adjoint:function(){return mat4$2.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new Matrix4().copy(this)},copy:function(n){return mat4$2.copy(this.array,n.array),this._dirty=!0,this},determinant:function(){return mat4$2.determinant(this.array)},fromQuat:function(n){return mat4$2.fromQuat(this.array,n.array),this._dirty=!0,this},fromRotationTranslation:function(n,r){return mat4$2.fromRotationTranslation(this.array,n.array,r.array),this._dirty=!0,this},fromMat2d:function(n){return Matrix4.fromMat2d(this,n),this},frustum:function(n,r,a,s,o,u){return mat4$2.frustum(this.array,n,r,a,s,o,u),this._dirty=!0,this},identity:function(){return mat4$2.identity(this.array),this._dirty=!0,this},invert:function(){return mat4$2.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(n,r,a){return mat4$2.lookAt(this.array,n.array,r.array,a.array),this._dirty=!0,this},mul:function(n){return mat4$2.mul(this.array,this.array,n.array),this._dirty=!0,this},mulLeft:function(n){return mat4$2.mul(this.array,n.array,this.array),this._dirty=!0,this},multiply:function(n){return mat4$2.multiply(this.array,this.array,n.array),this._dirty=!0,this},multiplyLeft:function(n){return mat4$2.multiply(this.array,n.array,this.array),this._dirty=!0,this},ortho:function(n,r,a,s,o,u){return mat4$2.ortho(this.array,n,r,a,s,o,u),this._dirty=!0,this},perspective:function(n,r,a,s){return mat4$2.perspective(this.array,n,r,a,s),this._dirty=!0,this},rotate:function(n,r){return mat4$2.rotate(this.array,this.array,n,r.array),this._dirty=!0,this},rotateX:function(n){return mat4$2.rotateX(this.array,this.array,n),this._dirty=!0,this},rotateY:function(n){return mat4$2.rotateY(this.array,this.array,n),this._dirty=!0,this},rotateZ:function(n){return mat4$2.rotateZ(this.array,this.array,n),this._dirty=!0,this},scale:function(n){return mat4$2.scale(this.array,this.array,n.array),this._dirty=!0,this},translate:function(n){return mat4$2.translate(this.array,this.array,n.array),this._dirty=!0,this},transpose:function(){return mat4$2.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var n=vec3$f.create(),r=vec3$f.create(),a=vec3$f.create(),s=mat3$1.create();return function(o,u,c){var p=this.array;vec3$f.set(n,p[0],p[1],p[2]),vec3$f.set(r,p[4],p[5],p[6]),vec3$f.set(a,p[8],p[9],p[10]);var d=vec3$f.length(n),_=vec3$f.length(r),ja=vec3$f.length(a),Ja=this.determinant();Ja<0&&(d=-d),o&&o.set(d,_,ja),c.set(p[12],p[13],p[14]),mat3$1.fromMat4(s,p),s[0]/=d,s[1]/=d,s[2]/=d,s[3]/=_,s[4]/=_,s[5]/=_,s[6]/=ja,s[7]/=ja,s[8]/=ja,quat.fromMat3(u.array,s),quat.normalize(u.array,u.array),u._dirty=!0,c._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var defineProperty$2=Object.defineProperty;if(defineProperty$2){var proto$2=Matrix4.prototype;defineProperty$2(proto$2,"z",{get:function(){var n=this.array;return this._axisZ.set(n[8],n[9],n[10]),this._axisZ},set:function(n){var r=this.array;n=n.array,r[8]=n[0],r[9]=n[1],r[10]=n[2],this._dirty=!0}}),defineProperty$2(proto$2,"y",{get:function(){var n=this.array;return this._axisY.set(n[4],n[5],n[6]),this._axisY},set:function(n){var r=this.array;n=n.array,r[4]=n[0],r[5]=n[1],r[6]=n[2],this._dirty=!0}}),defineProperty$2(proto$2,"x",{get:function(){var n=this.array;return this._axisX.set(n[0],n[1],n[2]),this._axisX},set:function(n){var r=this.array;n=n.array,r[0]=n[0],r[1]=n[1],r[2]=n[2],this._dirty=!0}})}Matrix4.adjoint=function(n,r){return mat4$2.adjoint(n.array,r.array),n._dirty=!0,n};Matrix4.copy=function(n,r){return mat4$2.copy(n.array,r.array),n._dirty=!0,n};Matrix4.determinant=function(n){return mat4$2.determinant(n.array)};Matrix4.identity=function(n){return mat4$2.identity(n.array),n._dirty=!0,n};Matrix4.ortho=function(n,r,a,s,o,u,c){return mat4$2.ortho(n.array,r,a,s,o,u,c),n._dirty=!0,n};Matrix4.perspective=function(n,r,a,s,o){return mat4$2.perspective(n.array,r,a,s,o),n._dirty=!0,n};Matrix4.lookAt=function(n,r,a,s){return mat4$2.lookAt(n.array,r.array,a.array,s.array),n._dirty=!0,n};Matrix4.invert=function(n,r){return mat4$2.invert(n.array,r.array),n._dirty=!0,n};Matrix4.mul=function(n,r,a){return mat4$2.mul(n.array,r.array,a.array),n._dirty=!0,n};Matrix4.multiply=Matrix4.mul;Matrix4.fromQuat=function(n,r){return mat4$2.fromQuat(n.array,r.array),n._dirty=!0,n};Matrix4.fromRotationTranslation=function(n,r,a){return mat4$2.fromRotationTranslation(n.array,r.array,a.array),n._dirty=!0,n};Matrix4.fromMat2d=function(s,a){s._dirty=!0;var a=a.array,s=s.array;return s[0]=a[0],s[4]=a[2],s[12]=a[4],s[1]=a[1],s[5]=a[3],s[13]=a[5],s};Matrix4.rotate=function(n,r,a,s){return mat4$2.rotate(n.array,r.array,a,s.array),n._dirty=!0,n};Matrix4.rotateX=function(n,r,a){return mat4$2.rotateX(n.array,r.array,a),n._dirty=!0,n};Matrix4.rotateY=function(n,r,a){return mat4$2.rotateY(n.array,r.array,a),n._dirty=!0,n};Matrix4.rotateZ=function(n,r,a){return mat4$2.rotateZ(n.array,r.array,a),n._dirty=!0,n};Matrix4.scale=function(n,r,a){return mat4$2.scale(n.array,r.array,a.array),n._dirty=!0,n};Matrix4.transpose=function(n,r){return mat4$2.transpose(n.array,r.array),n._dirty=!0,n};Matrix4.translate=function(n,r,a){return mat4$2.translate(n.array,r.array,a.array),n._dirty=!0,n};var Quaternion=function(n,r,a,s){n=n||0,r=r||0,a=a||0,s=s===void 0?1:s,this.array=quat.fromValues(n,r,a,s),this._dirty=!0};Quaternion.prototype={constructor:Quaternion,add:function(n){return quat.add(this.array,this.array,n.array),this._dirty=!0,this},calculateW:function(){return quat.calculateW(this.array,this.array),this._dirty=!0,this},set:function(n,r,a,s){return this.array[0]=n,this.array[1]=r,this.array[2]=a,this.array[3]=s,this._dirty=!0,this},setArray:function(n){return this.array[0]=n[0],this.array[1]=n[1],this.array[2]=n[2],this.array[3]=n[3],this._dirty=!0,this},clone:function(){return new Quaternion(this.x,this.y,this.z,this.w)},conjugate:function(){return quat.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(n){return quat.copy(this.array,n.array),this._dirty=!0,this},dot:function(n){return quat.dot(this.array,n.array)},fromMat3:function(n){return quat.fromMat3(this.array,n.array),this._dirty=!0,this},fromMat4:function(){var n=mat3$1.create();return function(r){return mat3$1.fromMat4(n,r.array),mat3$1.transpose(n,n),quat.fromMat3(this.array,n),this._dirty=!0,this}}(),identity:function(){return quat.identity(this.array),this._dirty=!0,this},invert:function(){return quat.invert(this.array,this.array),this._dirty=!0,this},len:function(){return quat.len(this.array)},length:function(){return quat.length(this.array)},lerp:function(n,r,a){return quat.lerp(this.array,n.array,r.array,a),this._dirty=!0,this},mul:function(n){return quat.mul(this.array,this.array,n.array),this._dirty=!0,this},mulLeft:function(n){return quat.multiply(this.array,n.array,this.array),this._dirty=!0,this},multiply:function(n){return quat.multiply(this.array,this.array,n.array),this._dirty=!0,this},multiplyLeft:function(n){return quat.multiply(this.array,n.array,this.array),this._dirty=!0,this},normalize:function(){return quat.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(n){return quat.rotateX(this.array,this.array,n),this._dirty=!0,this},rotateY:function(n){return quat.rotateY(this.array,this.array,n),this._dirty=!0,this},rotateZ:function(n){return quat.rotateZ(this.array,this.array,n),this._dirty=!0,this},rotationTo:function(n,r){return quat.rotationTo(this.array,n.array,r.array),this._dirty=!0,this},setAxes:function(n,r,a){return quat.setAxes(this.array,n.array,r.array,a.array),this._dirty=!0,this},setAxisAngle:function(n,r){return quat.setAxisAngle(this.array,n.array,r),this._dirty=!0,this},slerp:function(n,r,a){return quat.slerp(this.array,n.array,r.array,a),this._dirty=!0,this},sqrLen:function(){return quat.sqrLen(this.array)},squaredLength:function(){return quat.squaredLength(this.array)},fromEuler:function(n,r){return Quaternion.fromEuler(this,n,r)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var defineProperty$1=Object.defineProperty;if(defineProperty$1){var proto$1=Quaternion.prototype;defineProperty$1(proto$1,"x",{get:function(){return this.array[0]},set:function(n){this.array[0]=n,this._dirty=!0}}),defineProperty$1(proto$1,"y",{get:function(){return this.array[1]},set:function(n){this.array[1]=n,this._dirty=!0}}),defineProperty$1(proto$1,"z",{get:function(){return this.array[2]},set:function(n){this.array[2]=n,this._dirty=!0}}),defineProperty$1(proto$1,"w",{get:function(){return this.array[3]},set:function(n){this.array[3]=n,this._dirty=!0}})}Quaternion.add=function(n,r,a){return quat.add(n.array,r.array,a.array),n._dirty=!0,n};Quaternion.set=function(n,r,a,s,o){quat.set(n.array,r,a,s,o),n._dirty=!0};Quaternion.copy=function(n,r){return quat.copy(n.array,r.array),n._dirty=!0,n};Quaternion.calculateW=function(n,r){return quat.calculateW(n.array,r.array),n._dirty=!0,n};Quaternion.conjugate=function(n,r){return quat.conjugate(n.array,r.array),n._dirty=!0,n};Quaternion.identity=function(n){return quat.identity(n.array),n._dirty=!0,n};Quaternion.invert=function(n,r){return quat.invert(n.array,r.array),n._dirty=!0,n};Quaternion.dot=function(n,r){return quat.dot(n.array,r.array)};Quaternion.len=function(n){return quat.length(n.array)};Quaternion.lerp=function(n,r,a,s){return quat.lerp(n.array,r.array,a.array,s),n._dirty=!0,n};Quaternion.slerp=function(n,r,a,s){return quat.slerp(n.array,r.array,a.array,s),n._dirty=!0,n};Quaternion.mul=function(n,r,a){return quat.multiply(n.array,r.array,a.array),n._dirty=!0,n};Quaternion.multiply=Quaternion.mul;Quaternion.rotateX=function(n,r,a){return quat.rotateX(n.array,r.array,a),n._dirty=!0,n};Quaternion.rotateY=function(n,r,a){return quat.rotateY(n.array,r.array,a),n._dirty=!0,n};Quaternion.rotateZ=function(n,r,a){return quat.rotateZ(n.array,r.array,a),n._dirty=!0,n};Quaternion.setAxisAngle=function(n,r,a){return quat.setAxisAngle(n.array,r.array,a),n._dirty=!0,n};Quaternion.normalize=function(n,r){return quat.normalize(n.array,r.array),n._dirty=!0,n};Quaternion.sqrLen=function(n){return quat.sqrLen(n.array)};Quaternion.squaredLength=Quaternion.sqrLen;Quaternion.fromMat3=function(n,r){return quat.fromMat3(n.array,r.array),n._dirty=!0,n};Quaternion.setAxes=function(n,r,a,s){return quat.setAxes(n.array,r.array,a.array,s.array),n._dirty=!0,n};Quaternion.rotationTo=function(n,r,a){return quat.rotationTo(n.array,r.array,a.array),n._dirty=!0,n};Quaternion.fromEuler=function(n,r,ja){n._dirty=!0,r=r.array;var s=n.array,o=Math.cos(r[0]/2),u=Math.cos(r[1]/2),c=Math.cos(r[2]/2),p=Math.sin(r[0]/2),d=Math.sin(r[1]/2),_=Math.sin(r[2]/2),ja=(ja||"XYZ").toUpperCase();switch(ja){case"XYZ":s[0]=p*u*c+o*d*_,s[1]=o*d*c-p*u*_,s[2]=o*u*_+p*d*c,s[3]=o*u*c-p*d*_;break;case"YXZ":s[0]=p*u*c+o*d*_,s[1]=o*d*c-p*u*_,s[2]=o*u*_-p*d*c,s[3]=o*u*c+p*d*_;break;case"ZXY":s[0]=p*u*c-o*d*_,s[1]=o*d*c+p*u*_,s[2]=o*u*_+p*d*c,s[3]=o*u*c-p*d*_;break;case"ZYX":s[0]=p*u*c-o*d*_,s[1]=o*d*c+p*u*_,s[2]=o*u*_-p*d*c,s[3]=o*u*c+p*d*_;break;case"YZX":s[0]=p*u*c+o*d*_,s[1]=o*d*c+p*u*_,s[2]=o*u*_-p*d*c,s[3]=o*u*c-p*d*_;break;case"XZY":s[0]=p*u*c-o*d*_,s[1]=o*d*c-p*u*_,s[2]=o*u*_+p*d*c,s[3]=o*u*c+p*d*_;break}};var vec3Set$2=vec3$f.set,vec3Copy$1=vec3$f.copy,BoundingBox=function(n,r){this.min=n||new Vector3(1/0,1/0,1/0),this.max=r||new Vector3(-1/0,-1/0,-1/0),this.vertices=null};BoundingBox.prototype={constructor:BoundingBox,updateFromVertices:function(n){if(n.length>0){var r=this.min,a=this.max,s=r.array,o=a.array;vec3Copy$1(s,n[0]),vec3Copy$1(o,n[0]);for(var u=1;u<n.length;u++){var c=n[u];c[0]<s[0]&&(s[0]=c[0]),c[1]<s[1]&&(s[1]=c[1]),c[2]<s[2]&&(s[2]=c[2]),c[0]>o[0]&&(o[0]=c[0]),c[1]>o[1]&&(o[1]=c[1]),c[2]>o[2]&&(o[2]=c[2])}r._dirty=!0,a._dirty=!0}},union:function(n){var r=this.min,a=this.max;return vec3$f.min(r.array,r.array,n.min.array),vec3$f.max(a.array,a.array,n.max.array),r._dirty=!0,a._dirty=!0,this},intersection:function(n){var r=this.min,a=this.max;return vec3$f.max(r.array,r.array,n.min.array),vec3$f.min(a.array,a.array,n.max.array),r._dirty=!0,a._dirty=!0,this},intersectBoundingBox:function(n){var r=this.min.array,a=this.max.array,s=n.min.array,o=n.max.array;return!(r[0]>o[0]||r[1]>o[1]||r[2]>o[2]||a[0]<s[0]||a[1]<s[1]||a[2]<s[2])},containBoundingBox:function(n){var r=this.min.array,a=this.max.array,s=n.min.array,o=n.max.array;return r[0]<=s[0]&&r[1]<=s[1]&&r[2]<=s[2]&&a[0]>=o[0]&&a[1]>=o[1]&&a[2]>=o[2]},containPoint:function(n){var r=this.min.array,a=this.max.array,s=n.array;return r[0]<=s[0]&&r[1]<=s[1]&&r[2]<=s[2]&&a[0]>=s[0]&&a[1]>=s[1]&&a[2]>=s[2]},isFinite:function(){var n=this.min.array,r=this.max.array;return isFinite(n[0])&&isFinite(n[1])&&isFinite(n[2])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(r[2])},applyTransform:function(n){this.transformFrom(this,n)},transformFrom:function(){var n=vec3$f.create(),r=vec3$f.create(),a=vec3$f.create(),s=vec3$f.create(),o=vec3$f.create(),u=vec3$f.create();return function(c,p){var d=c.min.array,_=c.max.array,ja=p.array;return n[0]=ja[0]*d[0],n[1]=ja[1]*d[0],n[2]=ja[2]*d[0],r[0]=ja[0]*_[0],r[1]=ja[1]*_[0],r[2]=ja[2]*_[0],a[0]=ja[4]*d[1],a[1]=ja[5]*d[1],a[2]=ja[6]*d[1],s[0]=ja[4]*_[1],s[1]=ja[5]*_[1],s[2]=ja[6]*_[1],o[0]=ja[8]*d[2],o[1]=ja[9]*d[2],o[2]=ja[10]*d[2],u[0]=ja[8]*_[2],u[1]=ja[9]*_[2],u[2]=ja[10]*_[2],d=this.min.array,_=this.max.array,d[0]=Math.min(n[0],r[0])+Math.min(a[0],s[0])+Math.min(o[0],u[0])+ja[12],d[1]=Math.min(n[1],r[1])+Math.min(a[1],s[1])+Math.min(o[1],u[1])+ja[13],d[2]=Math.min(n[2],r[2])+Math.min(a[2],s[2])+Math.min(o[2],u[2])+ja[14],_[0]=Math.max(n[0],r[0])+Math.max(a[0],s[0])+Math.max(o[0],u[0])+ja[12],_[1]=Math.max(n[1],r[1])+Math.max(a[1],s[1])+Math.max(o[1],u[1])+ja[13],_[2]=Math.max(n[2],r[2])+Math.max(a[2],s[2])+Math.max(o[2],u[2])+ja[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(n){var r=this.min.array,a=this.max.array,s=n.array,o=r[0],u=r[1],c=r[2],p=a[0],d=a[1],_=r[2],ja=a[0],Ja=a[1],ec=a[2];if(s[15]===1)r[0]=s[0]*o+s[12],r[1]=s[5]*u+s[13],a[2]=s[10]*c+s[14],a[0]=s[0]*ja+s[12],a[1]=s[5]*Ja+s[13],r[2]=s[10]*ec+s[14];else{var tc=-1/c;r[0]=s[0]*o*tc,r[1]=s[5]*u*tc,a[2]=(s[10]*c+s[14])*tc,tc=-1/_,a[0]=s[0]*p*tc,a[1]=s[5]*d*tc,tc=-1/ec,r[2]=(s[10]*ec+s[14])*tc}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var n=this.vertices;if(!n){n=[];for(var r=0;r<8;r++)n[r]=vec3$f.fromValues(0,0,0);this.vertices=n}var a=this.min.array,s=this.max.array;return vec3Set$2(n[0],a[0],a[1],a[2]),vec3Set$2(n[1],a[0],s[1],a[2]),vec3Set$2(n[2],s[0],a[1],a[2]),vec3Set$2(n[3],s[0],s[1],a[2]),vec3Set$2(n[4],a[0],a[1],s[2]),vec3Set$2(n[5],a[0],s[1],s[2]),vec3Set$2(n[6],s[0],a[1],s[2]),vec3Set$2(n[7],s[0],s[1],s[2]),this},copy:function(n){var r=this.min,a=this.max;return vec3Copy$1(r.array,n.min.array),vec3Copy$1(a.array,n.max.array),r._dirty=!0,a._dirty=!0,this},clone:function(){var n=new BoundingBox;return n.copy(this),n}};var nameId=0,Node$1=Base.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+nameId++),this.position||(this.position=new Vector3),this.rotation||(this.rotation=new Quaternion),this.scale||(this.scale=new Vector3(1,1,1)),this.worldTransform=new Matrix4,this.localTransform=new Matrix4,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(n){var r=this._scene;if(r){var a=r._nodeRepository;delete a[this.name],a[n]=this}this.name=n},add:function(n){var r=n._parent;if(r!==this){r&&r.remove(n),n._parent=this,this._children.push(n);var a=this._scene;a&&a!==n.scene&&n.traverse(this._addSelfToScene,this),n._needsUpdateWorldTransform=!0}},remove:function(n){var r=this._children,a=r.indexOf(n);a<0||(r.splice(a,1),n._parent=null,this._scene&&n.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var n=this._children,r=0;r<n.length;r++)n[r]._parent=null,this._scene&&n[r].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(n){n._scene.removeFromScene(n),n._scene=null},_addSelfToScene:function(n){this._scene.addToScene(n),n._scene=this._scene},isAncestor:function(n){for(var r=n._parent;r;){if(r===this)return!0;r=r._parent}return!1},children:function(){return this._children.slice()},childAt:function(n){return this._children[n]},getChildByName:function(n){for(var r=this._children,a=0;a<r.length;a++)if(r[a].name===n)return r[a]},getDescendantByName:function(n){for(var r=this._children,a=0;a<r.length;a++){var s=r[a];if(s.name===n)return s;var o=s.getDescendantByName(n);if(o)return o}},queryNode:function(n){if(n){for(var r=n.split("/"),a=this,s=0;s<r.length;s++){var o=r[s];if(o){for(var u=!1,c=a._children,p=0;p<c.length;p++){var d=c[p];if(d.name===o){a=d,u=!0;break}}if(!u)return}}return a}},getPath:function(n){if(!this._parent)return"/";for(var r=this._parent,a=this.name;r._parent&&(a=r.name+"/"+a,r._parent!=n);)r=r._parent;return!r._parent&&n?null:a},traverse:function(n,r){n.call(r,this);for(var a=this._children,s=0,o=a.length;s<o;s++)a[s].traverse(n,r)},eachChild:function(n,r){for(var a=this._children,s=0,o=a.length;s<o;s++){var u=a[s];n.call(r,u,s)}},setLocalTransform:function(n){mat4$2.copy(this.localTransform.array,n.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(n){var r=n?null:this.scale;this.localTransform.decomposeMatrix(r,this.rotation,this.position)},setWorldTransform:function(n){mat4$2.copy(this.worldTransform.array,n.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var n=mat4$2.create();return function(r){var a=this.localTransform,s=this.worldTransform;this._parent?(mat4$2.invert(n,this._parent.worldTransform.array),mat4$2.multiply(a.array,n,s.array)):mat4$2.copy(a.array,s.array);var o=r?null:this.scale;a.decomposeMatrix(o,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var n=this.position,r=this.rotation,a=this.scale;if(this.transformNeedsUpdate()){var s=this.localTransform.array;mat4$2.fromRotationTranslation(s,r.array,n.array),mat4$2.scale(s,s,a.array),r._dirty=!1,a._dirty=!1,n._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var n=this.localTransform.array,r=this.worldTransform.array;this._parent?mat4$2.multiplyAffine(r,this._parent.worldTransform.array,n):mat4$2.copy(r,n)},updateWorldTransform:function(){for(var n=this;n&&n.getParent()&&n.getParent().transformNeedsUpdate();)n=n.getParent();n.update()},update:function(n){this.autoUpdateLocalTransform?this.updateLocalTransform():n=!0,(n||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),n=!0,this._needsUpdateWorldTransform=!1);for(var r=this._children,a=0,s=r.length;a<s;a++)r[a].update(n)},getBoundingBox:function(){function n(o){return!o.invisible&&o.geometry}var r=new BoundingBox,a=new Matrix4,s=new Matrix4;return function(o,u){return u=u||new BoundingBox,this._parent?Matrix4.invert(s,this._parent.worldTransform):Matrix4.identity(s),this.traverse(function(c){c.geometry&&c.geometry.boundingBox&&(r.copy(c.geometry.boundingBox),Matrix4.multiply(a,s,c.worldTransform),r.applyTransform(a),u.union(r))},this,n),u}}(),getWorldPosition:function(n){this.transformNeedsUpdate()&&this.updateWorldTransform();var r=this.worldTransform.array;if(n){var a=n.array;return a[0]=r[12],a[1]=r[13],a[2]=r[14],n}else return new Vector3(r[12],r[13],r[14])},clone:function(){var n=new this.constructor,r=this._children;n.setName(this.name),n.position.copy(this.position),n.rotation.copy(this.rotation),n.scale.copy(this.scale);for(var a=0;a<r.length;a++)n.add(r[a].clone());return n},rotateAround:function(){var n=new Vector3,r=new Matrix4;return function(a,s,o){n.copy(this.position).subtract(a);var u=this.localTransform;u.identity(),u.translate(a),u.rotate(o,s),r.fromRotationTranslation(this.rotation,n),u.multiply(r),u.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var n=new Matrix4;return function(r,a){n.lookAt(this.position,r,a||this.localTransform.y).invert(),this.setLocalTransform(n),this.target=r}}()}),Renderable=Node$1.extend({material:null,geometry:null,mode:glenum.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:glenum.BACK,frontFace:glenum.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(n){},afterRender:function(n,r){},getBoundingBox:function(n,r){return r=Node$1.prototype.getBoundingBox.call(this,n,r),this.geometry&&this.geometry.boundingBox&&r.union(this.geometry.boundingBox),r},clone:function(){var n=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var r=Node$1.prototype.clone.call(this);r.geometry=this.geometry,r.material=this.material;for(var a=0;a<n.length;a++){var s=n[a];r[s]!==this[s]&&(r[s]=this[s])}return r}}()});Renderable.POINTS=glenum.POINTS;Renderable.LINES=glenum.LINES;Renderable.LINE_LOOP=glenum.LINE_LOOP;Renderable.LINE_STRIP=glenum.LINE_STRIP;Renderable.TRIANGLES=glenum.TRIANGLES;Renderable.TRIANGLE_STRIP=glenum.TRIANGLE_STRIP;Renderable.TRIANGLE_FAN=glenum.TRIANGLE_FAN;Renderable.BACK=glenum.BACK;Renderable.FRONT=glenum.FRONT;Renderable.FRONT_AND_BACK=glenum.FRONT_AND_BACK;Renderable.CW=glenum.CW;Renderable.CCW=glenum.CCW;var RayPicking=Base.extend({scene:null,camera:null,renderer:null},function(){this._ray=new Ray,this._ndc=new Vector2},{pick:function(n,r,a){var s=this.pickAll(n,r,[],a);return s[0]||null},pickAll:function(n,r,a,s){return this.renderer.screenToNDC(n,r,this._ndc),this.camera.castRay(this._ndc,this._ray),a=a||[],this._intersectNode(this.scene,a,s||!1),a.sort(this._intersectionCompareFunc),a},_intersectNode:function(n,r,a){n instanceof Renderable&&n.isRenderable()&&(!n.ignorePicking||a)&&(n.mode===glenum.TRIANGLES&&n.geometry.isUseIndices()||n.geometry.pickByRay||n.geometry.pick)&&this._intersectRenderable(n,r);for(var s=0;s<n._children.length;s++)this._intersectNode(n._children[s],r,a)},_intersectRenderable:function(){var n=new Vector3,r=new Vector3,a=new Vector3,s=new Ray,o=new Matrix4;return function(u,c){var p=u.isSkinnedMesh();s.copy(this._ray),Matrix4.invert(o,u.worldTransform),p||s.applyTransform(o);var d=u.geometry,_=p?u.skeleton.boundingBox:d.boundingBox;if(!(_&&!s.intersectBoundingBox(_))){if(d.pick){d.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,u,c);return}else if(d.pickByRay){d.pickByRay(s,u,c);return}var ja=u.cullFace===glenum.BACK&&u.frontFace===glenum.CCW||u.cullFace===glenum.FRONT&&u.frontFace===glenum.CW,Ja,ec=d.indices,tc=d.attributes.position,rc=d.attributes.weight,nc=d.attributes.joint,ic,uc=[];if(!(!tc||!tc.value||!ec)){if(p){ic=u.skeleton.getSubSkinMatrices(u.__uid__,u.joints);for(var eh=0;eh<u.joints.length;eh++){uc[eh]=uc[eh]||[];for(var rh=0;rh<16;rh++)uc[eh][rh]=ic[eh*16+rh]}var ah=[],ih=[],oh=[],uh=[],ch=[],hh=d.attributes.skinnedPosition;(!hh||!hh.value)&&(d.createAttribute("skinnedPosition","f",3),hh=d.attributes.skinnedPosition,hh.init(d.vertexCount));for(var eh=0;eh<d.vertexCount;eh++){tc.get(eh,ah),rc.get(eh,ih),nc.get(eh,oh),ih[3]=1-ih[0]-ih[1]-ih[2],vec3$f.set(uh,0,0,0);for(var rh=0;rh<4;rh++)oh[rh]>=0&&ih[rh]>1e-4&&(vec3$f.transformMat4(ch,ah,uc[oh[rh]]),vec3$f.scaleAndAdd(uh,uh,ch,ih[rh]));hh.set(eh,uh)}}for(var eh=0;eh<ec.length;eh+=3){var dh=ec[eh],gh=ec[eh+1],fh=ec[eh+2],vh=p?d.attributes.skinnedPosition:tc;if(vh.get(dh,n.array),vh.get(gh,r.array),vh.get(fh,a.array),ja?Ja=s.intersectTriangle(n,r,a,u.culling):Ja=s.intersectTriangle(n,a,r,u.culling),Ja){var ph=new Vector3;p?Vector3.copy(ph,Ja):Vector3.transformMat4(ph,Ja,u.worldTransform),c.push(new RayPicking.Intersection(Ja,ph,u,[dh,gh,fh],eh/3,Vector3.dist(ph,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(n,r){return n.distance-r.distance}});RayPicking.Intersection=function(n,r,a,s,o,u){this.point=n,this.pointWorld=r,this.target=a,this.triangle=s,this.triangleIndex=o,this.distance=u};var DIRTY_PREFIX="__dt__",Cache=function(){this._contextId=0,this._caches=[],this._context={}};Cache.prototype={use:function(n,r){var a=this._caches;a[n]||(a[n]={},r&&(a[n]=r())),this._contextId=n,this._context=a[n]},put:function(n,r){this._context[n]=r},get:function(n){return this._context[n]},dirty:function(n){n=n||"";var r=DIRTY_PREFIX+n;this.put(r,!0)},dirtyAll:function(n){n=n||"";for(var r=DIRTY_PREFIX+n,a=this._caches,s=0;s<a.length;s++)a[s]&&(a[s][r]=!0)},fresh:function(n){n=n||"";var r=DIRTY_PREFIX+n;this.put(r,!1)},freshAll:function(n){n=n||"";for(var r=DIRTY_PREFIX+n,a=this._caches,s=0;s<a.length;s++)a[s]&&(a[s][r]=!1)},isDirty:function(n){n=n||"";var r=DIRTY_PREFIX+n,a=this._context;return!a.hasOwnProperty(r)||a[r]===!0},deleteContext:function(n){delete this._caches[n],this._context={}},delete:function(n){delete this._context[n]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(n,r){var a=Object.keys(this._caches);a.forEach(function(s){n&&n.call(r,s)})},miss:function(n){return!this._context.hasOwnProperty(n)}};Cache.prototype.constructor=Cache;var Texture=Base.extend({width:512,height:512,type:glenum.UNSIGNED_BYTE,format:glenum.RGBA,wrapS:glenum.REPEAT,wrapT:glenum.REPEAT,minFilter:glenum.LINEAR_MIPMAP_LINEAR,magFilter:glenum.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new Cache},{getWebGLTexture:function(n){var r=n.gl,a=this._cache;return a.use(n.__uid__),a.miss("webgl_texture")&&a.put("webgl_texture",r.createTexture()),this.dynamic?this.update(n):a.isDirty()&&(this.update(n),a.fresh()),a.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(n){},updateCommon:function(n){var r=n.gl;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===glenum.DEPTH_COMPONENT&&(this.useMipmap=!1);var a=n.getGLExtension("EXT_sRGB");this.format===Texture.SRGB&&!a&&(this.format=Texture.RGB),this.format===Texture.SRGB_ALPHA&&!a&&(this.format=Texture.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?glenum.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?glenum.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var n=this.minFilter;return this.NPOT||!this.useMipmap?n===glenum.NEAREST_MIPMAP_NEAREST||n===glenum.NEAREST_MIPMAP_LINEAR?glenum.NEAREST:n===glenum.LINEAR_MIPMAP_LINEAR||n===glenum.LINEAR_MIPMAP_NEAREST?glenum.LINEAR:n:n},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(n){--n;for(var r=1;r<32;r<<=1)n=n|n>>r;return n+1},dispose:function(n){var r=this._cache;r.use(n.__uid__);var a=r.get("webgl_texture");a&&n.gl.deleteTexture(a),r.deleteContext(n.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(Texture.prototype,"width",{get:function(){return this._width},set:function(n){this._width=n}});Object.defineProperty(Texture.prototype,"height",{get:function(){return this._height},set:function(n){this._height=n}});Texture.BYTE=glenum.BYTE;Texture.UNSIGNED_BYTE=glenum.UNSIGNED_BYTE;Texture.SHORT=glenum.SHORT;Texture.UNSIGNED_SHORT=glenum.UNSIGNED_SHORT;Texture.INT=glenum.INT;Texture.UNSIGNED_INT=glenum.UNSIGNED_INT;Texture.FLOAT=glenum.FLOAT;Texture.HALF_FLOAT=36193;Texture.UNSIGNED_INT_24_8_WEBGL=34042;Texture.DEPTH_COMPONENT=glenum.DEPTH_COMPONENT;Texture.DEPTH_STENCIL=glenum.DEPTH_STENCIL;Texture.ALPHA=glenum.ALPHA;Texture.RGB=glenum.RGB;Texture.RGBA=glenum.RGBA;Texture.LUMINANCE=glenum.LUMINANCE;Texture.LUMINANCE_ALPHA=glenum.LUMINANCE_ALPHA;Texture.SRGB=35904;Texture.SRGB_ALPHA=35906;Texture.COMPRESSED_RGB_S3TC_DXT1_EXT=33776;Texture.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777;Texture.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778;Texture.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779;Texture.NEAREST=glenum.NEAREST;Texture.LINEAR=glenum.LINEAR;Texture.NEAREST_MIPMAP_NEAREST=glenum.NEAREST_MIPMAP_NEAREST;Texture.LINEAR_MIPMAP_NEAREST=glenum.LINEAR_MIPMAP_NEAREST;Texture.NEAREST_MIPMAP_LINEAR=glenum.NEAREST_MIPMAP_LINEAR;Texture.LINEAR_MIPMAP_LINEAR=glenum.LINEAR_MIPMAP_LINEAR;Texture.REPEAT=glenum.REPEAT;Texture.CLAMP_TO_EDGE=glenum.CLAMP_TO_EDGE;Texture.MIRRORED_REPEAT=glenum.MIRRORED_REPEAT;var Mesh=Renderable.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var n=Renderable.prototype.clone.call(this);return n.skeleton=this.skeleton,this.joints&&(n.joints=this.joints.slice()),n}});Mesh.POINTS=glenum.POINTS;Mesh.LINES=glenum.LINES;Mesh.LINE_LOOP=glenum.LINE_LOOP;Mesh.LINE_STRIP=glenum.LINE_STRIP;Mesh.TRIANGLES=glenum.TRIANGLES;Mesh.TRIANGLE_STRIP=glenum.TRIANGLE_STRIP;Mesh.TRIANGLE_FAN=glenum.TRIANGLE_FAN;Mesh.BACK=glenum.BACK;Mesh.FRONT=glenum.FRONT;Mesh.FRONT_AND_BACK=glenum.FRONT_AND_BACK;Mesh.CW=glenum.CW;Mesh.CCW=glenum.CCW;var mathUtil={};mathUtil.isPowerOfTwo=function(n){return(n&n-1)===0};mathUtil.nextPowerOfTwo=function(n){return n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n++,n};mathUtil.nearestPowerOfTwo=function(n){return Math.pow(2,Math.round(Math.log(n)/Math.LN2))};var isPowerOfTwo$2=mathUtil.isPowerOfTwo;function nearestPowerOfTwo$1(n){return Math.pow(2,Math.round(Math.log(n)/Math.LN2))}function convertTextureToPowerOfTwo$1(n,r){var a=nearestPowerOfTwo$1(n.width),s=nearestPowerOfTwo$1(n.height);r=r||document.createElement("canvas"),r.width=a,r.height=s;var o=r.getContext("2d");return o.drawImage(n.image,0,0,a,s),r}var Texture2D=Texture.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(n){var r=n.gl;r.bindTexture(r.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(n);var a=this.format,s=this.type,o=!!(this.convertToPOT&&!this.mipmaps.length&&this.image&&(this.wrapS===Texture.REPEAT||this.wrapT===Texture.REPEAT)&&this.NPOT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,o?this.wrapS:this.getAvailableWrapS()),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,o?this.wrapT:this.getAvailableWrapT()),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,o?this.magFilter:this.getAvailableMagFilter()),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,o?this.minFilter:this.getAvailableMinFilter());var u=n.getGLExtension("EXT_texture_filter_anisotropic");if(u&&this.anisotropic>1&&r.texParameterf(r.TEXTURE_2D,u.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),s===36193){var c=n.getGLExtension("OES_texture_half_float");c||(s=glenum.FLOAT)}if(this.mipmaps.length)for(var p=this.width,d=this.height,_=0;_<this.mipmaps.length;_++){var ja=this.mipmaps[_];this._updateTextureData(r,ja,_,p,d,a,s,!1),p/=2,d/=2}else this._updateTextureData(r,this,0,this.width,this.height,a,s,o),this.useMipmap&&(!this.NPOT||o)&&r.generateMipmap(r.TEXTURE_2D);r.bindTexture(r.TEXTURE_2D,null)},_updateTextureData:function(n,r,a,s,o,u,c,p){if(r.image){var d=r.image;p&&(this._potCanvas=convertTextureToPowerOfTwo$1(this,this._potCanvas),d=this._potCanvas),n.texImage2D(n.TEXTURE_2D,a,u,u,c,d)}else u<=Texture.COMPRESSED_RGBA_S3TC_DXT5_EXT&&u>=Texture.COMPRESSED_RGB_S3TC_DXT1_EXT?n.compressedTexImage2D(n.TEXTURE_2D,a,u,s,o,0,r.pixels):n.texImage2D(n.TEXTURE_2D,a,u,s,o,0,u,c,r.pixels)},generateMipmap:function(n){var r=n.gl;this.useMipmap&&!this.NPOT&&(r.bindTexture(r.TEXTURE_2D,this._cache.get("webgl_texture")),r.generateMipmap(r.TEXTURE_2D))},isPowerOfTwo:function(){return isPowerOfTwo$2(this.width)&&isPowerOfTwo$2(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!!(this.width&&this.height)},bind:function(n){n.gl.bindTexture(n.gl.TEXTURE_2D,this.getWebGLTexture(n))},unbind:function(n){n.gl.bindTexture(n.gl.TEXTURE_2D,null)},load:function(n,r){var a=vendor.createImage();r&&(a.crossOrigin=r);var s=this;return a.onload=function(){s.dirty(),s.trigger("success",s)},a.onerror=function(){s.trigger("error",s)},a.src=n,this.image=a,this}});Object.defineProperty(Texture2D.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(n){this.image?console.warn("Texture from image can't set width"):(this._width!==n&&this.dirty(),this._width=n)}});Object.defineProperty(Texture2D.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(n){this.image?console.warn("Texture from image can't set height"):(this._height!==n&&this.dirty(),this._height=n)}});function getArrayCtorByType(n){return{byte:vendor.Int8Array,ubyte:vendor.Uint8Array,short:vendor.Int16Array,ushort:vendor.Uint16Array}[n]||vendor.Float32Array}function makeAttrKey(n){return"attr_"+n}function Attribute$1(n,r,a,s){switch(this.name=n,this.type=r,this.size=a,this.semantic=s||"",this.value=null,a){case 1:this.get=function(o){return this.value[o]},this.set=function(o,u){this.value[o]=u},this.copy=function(o,u){this.value[o]=this.value[o]};break;case 2:this.get=function(o,u){var c=this.value;return u[0]=c[o*2],u[1]=c[o*2+1],u},this.set=function(o,u){var c=this.value;c[o*2]=u[0],c[o*2+1]=u[1]},this.copy=function(o,u){var c=this.value;u*=2,o*=2,c[o]=c[u],c[o+1]=c[u+1]};break;case 3:this.get=function(o,u){var c=o*3,p=this.value;return u[0]=p[c],u[1]=p[c+1],u[2]=p[c+2],u},this.set=function(o,u){var c=o*3,p=this.value;p[c]=u[0],p[c+1]=u[1],p[c+2]=u[2]},this.copy=function(o,u){var c=this.value;u*=3,o*=3,c[o]=c[u],c[o+1]=c[u+1],c[o+2]=c[u+2]};break;case 4:this.get=function(o,u){var c=this.value,p=o*4;return u[0]=c[p],u[1]=c[p+1],u[2]=c[p+2],u[3]=c[p+3],u},this.set=function(o,u){var c=this.value,p=o*4;c[p]=u[0],c[p+1]=u[1],c[p+2]=u[2],c[p+3]=u[3]},this.copy=function(o,u){var c=this.value;u*=4,o*=4,c[o]=c[u],c[o+1]=c[u+1],c[o+2]=c[u+2],c[o+3]=c[u+3]}}}Attribute$1.prototype.init=function(n){if(!this.value||this.value.length!==n*this.size){var r=getArrayCtorByType(this.type);this.value=new r(n*this.size)}};Attribute$1.prototype.fromArray=function(n){var r=getArrayCtorByType(this.type),a;if(n[0]&&n[0].length){var s=0,o=this.size;a=new r(n.length*o);for(var u=0;u<n.length;u++)for(var c=0;c<o;c++)a[s++]=n[u][c]}else a=new r(n);this.value=a};Attribute$1.prototype.clone=function(n){var r=new Attribute$1(this.name,this.type,this.size,this.semantic);return n&&console.warn("todo"),r};function AttributeBuffer(n,r,a,s,o){this.name=n,this.type=r,this.buffer=a,this.size=s,this.semantic=o,this.symbol="",this.needsRemove=!1}function IndicesBuffer(n){this.buffer=n,this.count=0}var GeometryBase=Base.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new Cache,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var n=this.getEnabledAttributes(),r=0;r<n.length;r++)this.dirtyAttribute(n[r]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(n){this._cache.dirtyAll(makeAttrKey(n)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(n,r){if(n<this.triangleCount&&n>=0){r||(r=[]);var a=this.indices;return r[0]=a[n*3],r[1]=a[n*3+1],r[2]=a[n*3+2],r}},setTriangleIndices:function(n,r){var a=this.indices;a[n*3]=r[0],a[n*3+1]=r[1],a[n*3+2]=r[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(n){var r,a=this.vertexCount>65535?vendor.Uint32Array:vendor.Uint16Array;if(n[0]&&n[0].length){var s=0,o=3;r=new a(n.length*o);for(var u=0;u<n.length;u++)for(var c=0;c<o;c++)r[s++]=n[u][c]}else r=new a(n);this.indices=r},createAttribute:function(n,r,a,s){var o=new Attribute$1(n,r,a,s);return this.attributes[n]&&this.removeAttribute(n),this.attributes[n]=o,this._attributeList.push(n),o},removeAttribute:function(n){var r=this._attributeList,a=r.indexOf(n);return a>=0?(r.splice(a,1),delete this.attributes[n],!0):!1},getAttribute:function(n){return this.attributes[n]},getEnabledAttributes:function(){var n=this._enabledAttributes,r=this._attributeList;if(n)return n;for(var a=[],s=this.vertexCount,o=0;o<r.length;o++){var u=r[o],c=this.attributes[u];c.value&&c.value.length===s*c.size&&a.push(u)}return this._enabledAttributes=a,a},getBufferChunks:function(n){var r=this._cache;r.use(n.__uid__);var a=r.isDirty("attributes"),s=r.isDirty("indices");if(a||s){this._updateBuffer(n.gl,a,s);for(var o=this.getEnabledAttributes(),u=0;u<o.length;u++)r.fresh(makeAttrKey(o[u]));r.fresh("attributes"),r.fresh("indices")}return r.fresh("any"),r.get("chunks")},_updateBuffer:function(n,r,a){var s=this._cache,o=s.get("chunks"),u=!1;o||(o=[],o[0]={attributeBuffers:[],indicesBuffer:null},s.put("chunks",o),u=!0);var c=o[0],p=c.attributeBuffers,d=c.indicesBuffer;if(r||u){var _=this.getEnabledAttributes(),ja={};if(!u)for(var Ja=0;Ja<p.length;Ja++)ja[p[Ja].name]=p[Ja];for(var ec=0;ec<_.length;ec++){var tc=_[ec],rc=this.attributes[tc],nc;u||(nc=ja[tc]);var ic;nc?ic=nc.buffer:ic=n.createBuffer(),s.isDirty(makeAttrKey(tc))&&(n.bindBuffer(n.ARRAY_BUFFER,ic),n.bufferData(n.ARRAY_BUFFER,rc.value,this.dynamic?n.DYNAMIC_DRAW:n.STATIC_DRAW)),p[ec]=new AttributeBuffer(tc,rc.type,ic,rc.size,rc.semantic)}for(var Ja=ec;Ja<p.length;Ja++)n.deleteBuffer(p[Ja].buffer);p.length=ec}this.isUseIndices()&&(a||u)&&(d||(d=new IndicesBuffer(n.createBuffer()),c.indicesBuffer=d),d.count=this.indices.length,n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,d.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?n.DYNAMIC_DRAW:n.STATIC_DRAW))},dispose:function(n){var r=this._cache;r.use(n.__uid__);var a=r.get("chunks");if(a)for(var s=0;s<a.length;s++){for(var o=a[s],u=0;u<o.attributeBuffers.length;u++){var c=o.attributeBuffers[u];n.gl.deleteBuffer(c.buffer)}o.indicesBuffer&&n.gl.deleteBuffer(o.indicesBuffer.buffer)}if(this.__vaoCache){var p=n.getGLExtension("OES_vertex_array_object");for(var d in this.__vaoCache){var _=this.__vaoCache[d].vao;_&&p.deleteVertexArrayOES(_)}}this.__vaoCache={},r.deleteContext(n.__uid__)}});Object.defineProperty&&(Object.defineProperty(GeometryBase.prototype,"vertexCount",{enumerable:!1,get:function(){var n=this.attributes[this.mainAttribute];return n||(n=this.attributes[this._attributeList[0]]),!n||!n.value?0:n.value.length/n.size}}),Object.defineProperty(GeometryBase.prototype,"triangleCount",{enumerable:!1,get:function(){var n=this.indices;return n?n.length/3:0}}));GeometryBase.STATIC_DRAW=glenum.STATIC_DRAW;GeometryBase.DYNAMIC_DRAW=glenum.DYNAMIC_DRAW;GeometryBase.STREAM_DRAW=glenum.STREAM_DRAW;GeometryBase.AttributeBuffer=AttributeBuffer;GeometryBase.IndicesBuffer=IndicesBuffer;GeometryBase.Attribute=Attribute$1;var vec3Create=vec3$f.create,vec3Add=vec3$f.add,vec3Set$1=vec3$f.set,Attribute=GeometryBase.Attribute,Geometry=GeometryBase.extend(function(){return{attributes:{position:new Attribute("position","float",3,"POSITION"),texcoord0:new Attribute("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new Attribute("texcoord1","float",2,"TEXCOORD_1"),normal:new Attribute("normal","float",3,"NORMAL"),tangent:new Attribute("tangent","float",4,"TANGENT"),color:new Attribute("color","float",4,"COLOR"),weight:new Attribute("weight","float",3,"WEIGHT"),joint:new Attribute("joint","float",4,"JOINT"),barycentric:new Attribute("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var n=this.boundingBox;n||(n=this.boundingBox=new BoundingBox);var r=this.attributes.position.value;if(r&&r.length){var a=n.min,s=n.max,o=a.array,u=s.array;vec3$f.set(o,r[0],r[1],r[2]),vec3$f.set(u,r[0],r[1],r[2]);for(var c=3;c<r.length;){var p=r[c++],d=r[c++],_=r[c++];p<o[0]&&(o[0]=p),d<o[1]&&(o[1]=d),_<o[2]&&(o[2]=_),p>u[0]&&(u[0]=p),d>u[1]&&(u[1]=d),_>u[2]&&(u[2]=_)}a._dirty=!0,s._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var n=this.indices,r=this.attributes,a=r.position.value,s=r.normal.value;if(!s||s.length!==a.length)s=r.normal.value=new vendor.Float32Array(a.length);else for(var o=0;o<s.length;o++)s[o]=0;for(var u=vec3Create(),c=vec3Create(),p=vec3Create(),d=vec3Create(),_=vec3Create(),ja=vec3Create(),Ja=n?n.length:this.vertexCount,ec,tc,rc,nc=0;nc<Ja;){n?(ec=n[nc++],tc=n[nc++],rc=n[nc++]):(ec=nc++,tc=nc++,rc=nc++),vec3Set$1(u,a[ec*3],a[ec*3+1],a[ec*3+2]),vec3Set$1(c,a[tc*3],a[tc*3+1],a[tc*3+2]),vec3Set$1(p,a[rc*3],a[rc*3+1],a[rc*3+2]),vec3$f.sub(d,u,c),vec3$f.sub(_,c,p),vec3$f.cross(ja,d,_);for(var o=0;o<3;o++)s[ec*3+o]=s[ec*3+o]+ja[o],s[tc*3+o]=s[tc*3+o]+ja[o],s[rc*3+o]=s[rc*3+o]+ja[o]}for(var o=0;o<s.length;)vec3Set$1(ja,s[o],s[o+1],s[o+2]),vec3$f.normalize(ja,ja),s[o++]=ja[0],s[o++]=ja[1],s[o++]=ja[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var n=this.indices,r=this.attributes,a=r.position.value,s=r.normal.value,o=vec3Create(),u=vec3Create(),c=vec3Create(),p=vec3Create(),d=vec3Create(),_=vec3Create();s||(s=r.normal.value=new Float32Array(a.length));for(var ja=n?n.length:this.vertexCount,Ja,ec,tc,rc=0;rc<ja;){n?(Ja=n[rc++],ec=n[rc++],tc=n[rc++]):(Ja=rc++,ec=rc++,tc=rc++),vec3Set$1(o,a[Ja*3],a[Ja*3+1],a[Ja*3+2]),vec3Set$1(u,a[ec*3],a[ec*3+1],a[ec*3+2]),vec3Set$1(c,a[tc*3],a[tc*3+1],a[tc*3+2]),vec3$f.sub(p,o,u),vec3$f.sub(d,u,c),vec3$f.cross(_,p,d),vec3$f.normalize(_,_);for(var nc=0;nc<3;nc++)s[Ja*3+nc]=_[nc],s[ec*3+nc]=_[nc],s[tc*3+nc]=_[nc]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var n=this.vertexCount,r=this.attributes;r.tangent.value||(r.tangent.value=new Float32Array(n*4));var a=r.texcoord0.value,s=r.position.value,o=r.tangent.value,u=r.normal.value;if(!a){console.warn("Geometry without texcoords can't generate tangents.");return}for(var c=[],p=[],d=0;d<n;d++)c[d]=[0,0,0],p[d]=[0,0,0];for(var _=[0,0,0],ja=[0,0,0],Ja=this.indices,ec=Ja?Ja.length:this.vertexCount,tc,rc,nc,d=0;d<ec;){Ja?(tc=Ja[d++],rc=Ja[d++],nc=Ja[d++]):(tc=d++,rc=d++,nc=d++);var ic=a[tc*2],uc=a[rc*2],eh=a[nc*2],rh=a[tc*2+1],ah=a[rc*2+1],ih=a[nc*2+1],oh=s[tc*3],uh=s[rc*3],ch=s[nc*3],hh=s[tc*3+1],dh=s[rc*3+1],gh=s[nc*3+1],fh=s[tc*3+2],vh=s[rc*3+2],ph=s[nc*3+2],yh=uh-oh,xh=ch-oh,_h=dh-hh,bh=gh-hh,Dh=vh-fh,Th=ph-fh,Ch=uc-ic,wh=eh-ic,Nh=ah-rh,Rh=ih-rh,kh=1/(Ch*Rh-Nh*wh);_[0]=(Rh*yh-Nh*xh)*kh,_[1]=(Rh*_h-Nh*bh)*kh,_[2]=(Rh*Dh-Nh*Th)*kh,ja[0]=(Ch*xh-wh*yh)*kh,ja[1]=(Ch*bh-wh*_h)*kh,ja[2]=(Ch*Th-wh*Dh)*kh,vec3Add(c[tc],c[tc],_),vec3Add(c[rc],c[rc],_),vec3Add(c[nc],c[nc],_),vec3Add(p[tc],p[tc],ja),vec3Add(p[rc],p[rc],ja),vec3Add(p[nc],p[nc],ja)}for(var Lh=vec3Create(),Fh=vec3Create(),Wh=vec3Create(),d=0;d<n;d++){Wh[0]=u[d*3],Wh[1]=u[d*3+1],Wh[2]=u[d*3+2];var Qh=c[d];vec3$f.scale(Lh,Wh,vec3$f.dot(Wh,Qh)),vec3$f.sub(Lh,Qh,Lh),vec3$f.normalize(Lh,Lh),vec3$f.cross(Fh,Wh,Qh),o[d*4]=Lh[0],o[d*4+1]=Lh[1],o[d*4+2]=Lh[2],o[d*4+3]=vec3$f.dot(Fh,p[d])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return this.isUseIndices()?this.vertexCount===this.indices.length:!0},generateUniqueVertex:function(){if(!(!this.vertexCount||!this.indices)){this.indices.length>65535&&(this.indices=new vendor.Uint32Array(this.indices));for(var n=this.attributes,r=this.indices,a=this.getEnabledAttributes(),s={},o=0;o<a.length;o++){var u=a[o];s[u]=n[u].value,n[u].init(this.indices.length)}for(var c=0,p=0;p<r.length;p++){for(var d=r[p],o=0;o<a.length;o++)for(var u=a[o],_=n[u].value,ja=n[u].size,Ja=0;Ja<ja;Ja++)_[c*ja+Ja]=s[u][d*ja+Ja];r[p]=c,c++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var n=this.attributes,r=n.barycentric.value,a=this.indices;if(!(r&&r.length===a.length*3)){r=n.barycentric.value=new Float32Array(a.length*3);for(var s=0;s<(a?a.length:this.vertexCount/3);)for(var o=0;o<3;o++){var u=a?a[s++]:s*3+o;r[u*3+o]=1}this.dirty()}}},applyTransform:function(n){var r=this.attributes,a=r.position.value,s=r.normal.value,o=r.tangent.value;n=n.array;var u=mat4$2.create();mat4$2.invert(u,n),mat4$2.transpose(u,u);var c=vec3$f.transformMat4,p=vec3$f.forEach;p(a,3,0,null,c,n),s&&p(s,3,0,null,c,u),o&&p(o,4,0,null,c,u),this.boundingBox&&this.updateBoundingBox()},dispose:function(n){var r=this._cache;r.use(n.__uid__);var a=r.get("chunks");if(a)for(var s=0;s<a.length;s++){for(var o=a[s],u=0;u<o.attributeBuffers.length;u++){var c=o.attributeBuffers[u];n.gl.deleteBuffer(c.buffer)}o.indicesBuffer&&n.gl.deleteBuffer(o.indicesBuffer.buffer)}if(this.__vaoCache){var p=n.getGLExtension("OES_vertex_array_object");for(var d in this.__vaoCache){var _=this.__vaoCache[d].vao;_&&p.deleteVertexArrayOES(_)}}this.__vaoCache={},r.deleteContext(n.__uid__)}});Geometry.STATIC_DRAW=GeometryBase.STATIC_DRAW;Geometry.DYNAMIC_DRAW=GeometryBase.DYNAMIC_DRAW;Geometry.STREAM_DRAW=GeometryBase.STREAM_DRAW;Geometry.AttributeBuffer=GeometryBase.AttributeBuffer;Geometry.IndicesBuffer=GeometryBase.IndicesBuffer;Geometry.Attribute=Attribute;const calcAmbientSHLightEssl=`vec3 calcAmbientSHLight(int idx, vec3 N) {
 int offset = 9 * idx;
 return ambientSHLightCoefficients[0]
 + ambientSHLightCoefficients[1] * N.x
 + ambientSHLightCoefficients[2] * N.y
 + ambientSHLightCoefficients[3] * N.z
 + ambientSHLightCoefficients[4] * N.x * N.z
 + ambientSHLightCoefficients[5] * N.z * N.y
 + ambientSHLightCoefficients[6] * N.y * N.x
 + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)
 + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);
}`;var uniformVec3Prefix="uniform vec3 ",uniformFloatPrefix="uniform float ",exportHeaderPrefix="@export clay.header.",exportEnd="@end",unconfigurable=":unconfigurable;";const lightShader=[exportHeaderPrefix+"directional_light",uniformVec3Prefix+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+unconfigurable,uniformVec3Prefix+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+unconfigurable,exportEnd,exportHeaderPrefix+"ambient_light",uniformVec3Prefix+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+unconfigurable,exportEnd,exportHeaderPrefix+"ambient_sh_light",uniformVec3Prefix+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+unconfigurable,uniformVec3Prefix+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+unconfigurable,calcAmbientSHLightEssl,exportEnd,exportHeaderPrefix+"ambient_cubemap_light",uniformVec3Prefix+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+unconfigurable,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+unconfigurable,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+unconfigurable,exportEnd,exportHeaderPrefix+"point_light",uniformVec3Prefix+"pointLightPosition[POINT_LIGHT_COUNT]"+unconfigurable,uniformFloatPrefix+"pointLightRange[POINT_LIGHT_COUNT]"+unconfigurable,uniformVec3Prefix+"pointLightColor[POINT_LIGHT_COUNT]"+unconfigurable,exportEnd,exportHeaderPrefix+"spot_light",uniformVec3Prefix+"spotLightPosition[SPOT_LIGHT_COUNT]"+unconfigurable,uniformVec3Prefix+"spotLightDirection[SPOT_LIGHT_COUNT]"+unconfigurable,uniformFloatPrefix+"spotLightRange[SPOT_LIGHT_COUNT]"+unconfigurable,uniformFloatPrefix+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+unconfigurable,uniformFloatPrefix+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+unconfigurable,uniformFloatPrefix+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+unconfigurable,uniformVec3Prefix+"spotLightColor[SPOT_LIGHT_COUNT]"+unconfigurable,exportEnd].join(`
`);Shader.import(lightShader);var Light=Node$1.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var n=Node$1.prototype.clone.call(this);return n.color=Array.prototype.slice.call(this.color),n.intensity=this.intensity,n.castShadow=this.castShadow,n.shadowResolution=this.shadowResolution,n}}),Plane$1=function(n,r){this.normal=n||new Vector3(0,1,0),this.distance=r||0};Plane$1.prototype={constructor:Plane$1,distanceToPoint:function(n){return vec3$f.dot(n.array,this.normal.array)-this.distance},projectPoint:function(n,r){r||(r=new Vector3);var a=this.distanceToPoint(n);return vec3$f.scaleAndAdd(r.array,n.array,this.normal.array,-a),r._dirty=!0,r},normalize:function(){var n=1/vec3$f.len(this.normal.array);vec3$f.scale(this.normal.array,n),this.distance*=n},intersectFrustum:function(n){for(var r=n.vertices,a=this.normal.array,s=vec3$f.dot(r[0].array,a)>this.distance,o=1;o<8;o++)if(vec3$f.dot(r[o].array,a)>this.distance!=s)return!0},intersectLine:function(){var n=vec3$f.create();return function(r,a,s){var o=this.distanceToPoint(r),u=this.distanceToPoint(a);if(o>0&&u>0||o<0&&u<0)return null;var c=this.normal.array,p=this.distance,d=r.array;vec3$f.sub(n,a.array,r.array),vec3$f.normalize(n,n);var _=vec3$f.dot(c,n);if(_===0)return null;s||(s=new Vector3);var ja=(vec3$f.dot(c,d)-p)/_;return vec3$f.scaleAndAdd(s.array,d,n,-ja),s._dirty=!0,s}}(),applyTransform:function(){var n=mat4$2.create(),r=vec4$1.create(),a=vec4$1.create();return a[3]=1,function(s){s=s.array,vec3$f.scale(a,this.normal.array,this.distance),vec4$1.transformMat4(a,a,s),this.distance=vec3$f.dot(a,this.normal.array),mat4$2.invert(n,s),mat4$2.transpose(n,n),r[3]=0,vec3$f.copy(r,this.normal.array),vec4$1.transformMat4(r,r,n),vec3$f.copy(this.normal.array,r)}}(),copy:function(n){vec3$f.copy(this.normal.array,n.normal.array),this.normal._dirty=!0,this.distance=n.distance},clone:function(){var n=new Plane$1;return n.copy(this),n}};var vec3Set=vec3$f.set,vec3Copy=vec3$f.copy,vec3TranformMat4=vec3$f.transformMat4,mathMin=Math.min,mathMax=Math.max,Frustum=function(){this.planes=[];for(var n=0;n<6;n++)this.planes.push(new Plane$1);this.boundingBox=new BoundingBox,this.vertices=[];for(var n=0;n<8;n++)this.vertices[n]=vec3$f.fromValues(0,0,0)};Frustum.prototype={setFromProjection:function(n){var r=this.planes,a=n.array,s=a[0],o=a[1],u=a[2],c=a[3],p=a[4],d=a[5],_=a[6],ja=a[7],Ja=a[8],ec=a[9],tc=a[10],rc=a[11],nc=a[12],ic=a[13],uc=a[14],eh=a[15];vec3Set(r[0].normal.array,c-s,ja-p,rc-Ja),r[0].distance=-(eh-nc),r[0].normalize(),vec3Set(r[1].normal.array,c+s,ja+p,rc+Ja),r[1].distance=-(eh+nc),r[1].normalize(),vec3Set(r[2].normal.array,c+o,ja+d,rc+ec),r[2].distance=-(eh+ic),r[2].normalize(),vec3Set(r[3].normal.array,c-o,ja-d,rc-ec),r[3].distance=-(eh-ic),r[3].normalize(),vec3Set(r[4].normal.array,c-u,ja-_,rc-tc),r[4].distance=-(eh-uc),r[4].normalize(),vec3Set(r[5].normal.array,c+u,ja+_,rc+tc),r[5].distance=-(eh+uc),r[5].normalize();var rh=this.boundingBox,ah=this.vertices;if(eh===0){var ih=d/s,oh=-uc/(tc-1),uh=-uc/(tc+1),ch=-uh/d,hh=-oh/d;rh.min.set(-ch*ih,-ch,uh),rh.max.set(ch*ih,ch,oh),vec3Set(ah[0],-ch*ih,-ch,uh),vec3Set(ah[1],-ch*ih,ch,uh),vec3Set(ah[2],ch*ih,-ch,uh),vec3Set(ah[3],ch*ih,ch,uh),vec3Set(ah[4],-hh*ih,-hh,oh),vec3Set(ah[5],-hh*ih,hh,oh),vec3Set(ah[6],hh*ih,-hh,oh),vec3Set(ah[7],hh*ih,hh,oh)}else{var dh=(-1-nc)/s,gh=(1-nc)/s,fh=(1-ic)/d,vh=(-1-ic)/d,ph=(-1-uc)/tc,yh=(1-uc)/tc;rh.min.set(Math.min(dh,gh),Math.min(vh,fh),Math.min(yh,ph)),rh.max.set(Math.max(gh,dh),Math.max(fh,vh),Math.max(ph,yh));var xh=rh.min.array,_h=rh.max.array;vec3Set(ah[0],xh[0],xh[1],xh[2]),vec3Set(ah[1],xh[0],_h[1],xh[2]),vec3Set(ah[2],_h[0],xh[1],xh[2]),vec3Set(ah[3],_h[0],_h[1],xh[2]),vec3Set(ah[4],xh[0],xh[1],_h[2]),vec3Set(ah[5],xh[0],_h[1],_h[2]),vec3Set(ah[6],_h[0],xh[1],_h[2]),vec3Set(ah[7],_h[0],_h[1],_h[2])}},getTransformedBoundingBox:function(){var n=vec3$f.create();return function(r,a){var s=this.vertices,o=a.array,u=r.min,c=r.max,p=u.array,d=c.array,_=s[0];vec3TranformMat4(n,_,o),vec3Copy(p,n),vec3Copy(d,n);for(var ja=1;ja<8;ja++)_=s[ja],vec3TranformMat4(n,_,o),p[0]=mathMin(n[0],p[0]),p[1]=mathMin(n[1],p[1]),p[2]=mathMin(n[2],p[2]),d[0]=mathMax(n[0],d[0]),d[1]=mathMax(n[1],d[1]),d[2]=mathMax(n[2],d[2]);return u._dirty=!0,c._dirty=!0,r}}()};var Camera=Node$1.extend(function(){return{projectionMatrix:new Matrix4,invProjectionMatrix:new Matrix4,viewMatrix:new Matrix4,frustum:new Frustum}},function(){this.update(!0)},{update:function(n){Node$1.prototype.update.call(this,n),Matrix4.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),Matrix4.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(n){Matrix4.copy(this.viewMatrix,n),Matrix4.invert(this.worldTransform,n),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(n){Matrix4.copy(this.projectionMatrix,n),Matrix4.invert(this.invProjectionMatrix,n),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var n=vec4$1.create();return function(r,a){var s=a!==void 0?a:new Ray,o=r.array[0],u=r.array[1];return vec4$1.set(n,o,u,-1,1),vec4$1.transformMat4(n,n,this.invProjectionMatrix.array),vec4$1.transformMat4(n,n,this.worldTransform.array),vec3$f.scale(s.origin.array,n,1/n[3]),vec4$1.set(n,o,u,1,1),vec4$1.transformMat4(n,n,this.invProjectionMatrix.array),vec4$1.transformMat4(n,n,this.worldTransform.array),vec3$f.scale(n,n,1/n[3]),vec3$f.sub(s.direction.array,n,s.origin.array),vec3$f.normalize(s.direction.array,s.direction.array),s.direction._dirty=!0,s.origin._dirty=!0,s}}()}),IDENTITY=mat4$2.create(),WORLDVIEW=mat4$2.create(),programKeyCache={};function getProgramKey(n){var r=[],a=Object.keys(n);a.sort();for(var s=0;s<a.length;s++){var o=a[s];r.push(o+" "+n[o])}var u=r.join(`
`);if(programKeyCache[u])return programKeyCache[u];var c=util.genGUID();return programKeyCache[u]=c,c}function RenderList(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}RenderList.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0};RenderList.prototype.add=function(n,r){r?this.transparent[this._transparentCount++]=n:this.opaque[this._opaqueCount++]=n};RenderList.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var Scene=Node$1.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new BoundingBox,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new LRU(20)}},function(){this._scene=this},{addToScene:function(n){n instanceof Camera?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(n)):n instanceof Light&&this.lights.push(n),n.name&&(this._nodeRepository[n.name]=n)},removeFromScene:function(n){var r;n instanceof Camera?(r=this._cameraList.indexOf(n),r>=0&&this._cameraList.splice(r,1)):n instanceof Light&&(r=this.lights.indexOf(n),r>=0&&this.lights.splice(r,1)),n.name&&delete this._nodeRepository[n.name]},getNode:function(n){return this._nodeRepository[n]},setMainCamera:function(n){var r=this._cameraList.indexOf(n);r>=0&&this._cameraList.splice(r,1),this._cameraList.unshift(n)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var n=this.lights;this._previousLightNumber=this._lightNumber;for(var r={},a=0;a<n.length;a++){var s=n[a];if(!s.invisible){var o=s.group;r[o]||(r[o]={}),r[o][s.type]=r[o][s.type]||0,r[o][s.type]++}}this._lightNumber=r;for(var u in r)this._lightProgramKeys[u]=getProgramKey(r[u]);this._updateLightUniforms()},cloneNode:function(n){var r=n.clone(),a={};function s(o,u){a[o.__uid__]=u;for(var c=0;c<o._children.length;c++){var p=o._children[c],d=u._children[c];s(p,d)}}return s(n,r),r.traverse(function(o){o.skeleton&&(o.skeleton=o.skeleton.clone(a)),o.material&&(o.material=o.material.clone())}),r},updateRenderList:function(n,r){var a=n.__uid__,s=this._renderLists.get(a);s||(s=new RenderList,this._renderLists.put(a,s)),s.startCount(),r&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0));var o=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,n,o,s,r),s.endCount(),s},getRenderList:function(n){return this._renderLists.get(n.__uid__)},_doUpdateRenderList:function(n,r,a,s,o){if(!n.invisible)for(var u=0;u<n._children.length;u++){var c=n._children[u];if(c.isRenderable()){var p=c.isSkinnedMesh()?IDENTITY:c.worldTransform.array,d=c.geometry;mat4$2.multiplyAffine(WORLDVIEW,r.viewMatrix.array,p),(o&&!d.boundingBox||!this.isFrustumCulled(c,r,WORLDVIEW))&&s.add(c,c.material.transparent||a)}c._children.length>0&&this._doUpdateRenderList(c,r,a,s,o)}},isFrustumCulled:function(){var n=new BoundingBox,r=new Matrix4;return function(a,s,o){var u=a.boundingBox;if(u||(a.skeleton&&a.skeleton.boundingBox?u=a.skeleton.boundingBox:u=a.geometry.boundingBox),!u)return!1;if(r.array=o,n.transformFrom(u,r),a.castShadow&&this.viewBoundingBoxLastFrame.union(n),a.frustumCulling){if(!n.intersectBoundingBox(s.frustum.boundingBox))return!0;r.array=s.projectionMatrix.array,n.max.array[2]>0&&n.min.array[2]<0&&(n.max.array[2]=-1e-20),n.applyProjection(r);var c=n.min.array,p=n.max.array;if(p[0]<-1||c[0]>1||p[1]<-1||c[1]>1||p[2]<-1||c[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var n=this.lights;n.sort(lightSortFunc);var r=this._lightUniforms;for(var a in r)for(var s in r[a])r[a][s].value.length=0;for(var o=0;o<n.length;o++){var u=n[o];if(!u.invisible){var a=u.group;for(var s in u.uniformTemplates){var c=u.uniformTemplates[s],p=c.value(u);if(p!=null){r[a]||(r[a]={}),r[a][s]||(r[a][s]={type:"",value:[]});var d=r[a][s];switch(d.type=c.type+"v",c.type){case"1i":case"1f":case"t":d.value.push(p);break;case"2f":case"3f":case"4f":for(var _=0;_<p.length;_++)d.value.push(p[_]);break;default:console.error("Unkown light uniform type "+c.type)}}}}}},getLightGroups:function(){var n=[];for(var r in this._lightNumber)n.push(r);return n},getNumberChangedLightGroups:function(){var n=[];for(var r in this._lightNumber)this.isLightNumberChanged(r)&&n.push(r);return n},isLightNumberChanged:function(n){var r=this._previousLightNumber,a=this._lightNumber;for(var s in a[n])if(!r[n]||a[n][s]!==r[n][s])return!0;for(var s in r[n])if(!a[n]||a[n][s]!==r[n][s])return!0;return!1},getLightsNumbers:function(n){return this._lightNumber[n]},getProgramKey:function(n){return this._lightProgramKeys[n]},setLightUniforms:function(){function n(r,a,s){for(var o in r){var u=r[o];if(u.type==="tv"){if(!a.hasUniform(o))continue;for(var c=[],p=0;p<u.value.length;p++){var d=u.value[p],_=a.takeCurrentTextureSlot(s,d);c.push(_)}a.setUniform(s.gl,"1iv",o,c)}else a.setUniform(s.gl,u.type,o,u.value)}}return function(r,a,s){n(this._lightUniforms[a],r,s),n(this.shadowUniforms,r,s)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function lightSortFunc(n,r){if(r.castShadow&&!n.castShadow)return!0}var isPowerOfTwo$1=mathUtil.isPowerOfTwo,targetList=["px","nx","py","ny","pz","nz"],TextureCube=Texture.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(n){var r=n.gl;r.bindTexture(r.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(n);var a=this.format,s=this.type;r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,this.getAvailableWrapS()),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,this.getAvailableWrapT()),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var o=n.getGLExtension("EXT_texture_filter_anisotropic");if(o&&this.anisotropic>1&&r.texParameterf(r.TEXTURE_CUBE_MAP,o.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),s===36193){var u=n.getGLExtension("OES_texture_half_float");u||(s=glenum.FLOAT)}if(this.mipmaps.length)for(var c=this.width,p=this.height,d=0;d<this.mipmaps.length;d++){var _=this.mipmaps[d];this._updateTextureData(r,_,d,c,p,a,s),c/=2,p/=2}else this._updateTextureData(r,this,0,this.width,this.height,a,s),!this.NPOT&&this.useMipmap&&r.generateMipmap(r.TEXTURE_CUBE_MAP);r.bindTexture(r.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(n,r,a,s,o,u,c){for(var p=0;p<6;p++){var d=targetList[p],_=r.image&&r.image[d];_?n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+p,a,u,u,c,_):n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+p,a,u,s,o,0,u,c,r.pixels&&r.pixels[d])}},generateMipmap:function(n){var r=n.gl;this.useMipmap&&!this.NPOT&&(r.bindTexture(r.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),r.generateMipmap(r.TEXTURE_CUBE_MAP))},bind:function(n){n.gl.bindTexture(n.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(n))},unbind:function(n){n.gl.bindTexture(n.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?isPowerOfTwo$1(this.image.px.width)&&isPowerOfTwo$1(this.image.px.height):isPowerOfTwo$1(this.width)&&isPowerOfTwo$1(this.height)},isRenderable:function(){return this.image.px?isImageRenderable(this.image.px)&&isImageRenderable(this.image.nx)&&isImageRenderable(this.image.py)&&isImageRenderable(this.image.ny)&&isImageRenderable(this.image.pz)&&isImageRenderable(this.image.nz):!!(this.width&&this.height)},load:function(n,r){var a=0,s=this;return util.each(n,function(o,u){var c=vendor.createImage();r&&(c.crossOrigin=r),c.onload=function(){a--,a===0&&(s.dirty(),s.trigger("success",s))},c.onerror=function(){a--},a++,c.src=o,s.image[u]=c}),this}});Object.defineProperty(TextureCube.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(n){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==n&&this.dirty(),this._width=n)}});Object.defineProperty(TextureCube.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(n){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==n&&this.dirty(),this._height=n)}});function isImageRenderable(n){return n.width>0&&n.height>0}var Perspective=Camera.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var n=this.fov/180*Math.PI;this.projectionMatrix.perspective(n,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var n=this.projectionMatrix.array,r=Math.atan(1/n[5])*2;this.fov=r/Math.PI*180,this.aspect=n[5]/n[0],this.near=n[14]/(n[10]-1),this.far=n[14]/(n[10]+1)},clone:function(){var n=Camera.prototype.clone.call(this);return n.fov=this.fov,n.aspect=this.aspect,n.near=this.near,n.far=this.far,n}}),KEY_FRAMEBUFFER="framebuffer",KEY_RENDERBUFFER="renderbuffer",KEY_RENDERBUFFER_WIDTH=KEY_RENDERBUFFER+"_width",KEY_RENDERBUFFER_HEIGHT=KEY_RENDERBUFFER+"_height",KEY_RENDERBUFFER_ATTACHED=KEY_RENDERBUFFER+"_attached",KEY_DEPTHTEXTURE_ATTACHED="depthtexture_attached",GL_FRAMEBUFFER=glenum.FRAMEBUFFER,GL_RENDERBUFFER=glenum.RENDERBUFFER,GL_DEPTH_ATTACHMENT=glenum.DEPTH_ATTACHMENT,GL_COLOR_ATTACHMENT0=glenum.COLOR_ATTACHMENT0,FrameBuffer=Base.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new Cache,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(n){if(n.__currentFrameBuffer){if(n.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}n.__currentFrameBuffer=this;var r=n.gl;r.bindFramebuffer(GL_FRAMEBUFFER,this._getFrameBufferGL(n)),this._boundRenderer=n;var a=this._cache;a.put("viewport",n.viewport);var s=!1,o,u;for(var c in this._textures){s=!0;var p=this._textures[c];p&&(o=p.texture.width,u=p.texture.height,this._doAttach(n,p.texture,c,p.target))}this._width=o,this._height=u,!s&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?n.setViewport(this.viewport):n.setViewport(0,0,o,u,1);var d=a.get("attached_textures");if(d){for(var c in d)if(!this._textures[c]){var _=d[c];this._doDetach(r,c,_)}}if(!a.get(KEY_DEPTHTEXTURE_ATTACHED)&&this.depthBuffer){a.miss(KEY_RENDERBUFFER)&&a.put(KEY_RENDERBUFFER,r.createRenderbuffer());var ja=a.get(KEY_RENDERBUFFER);(o!==a.get(KEY_RENDERBUFFER_WIDTH)||u!==a.get(KEY_RENDERBUFFER_HEIGHT))&&(r.bindRenderbuffer(GL_RENDERBUFFER,ja),r.renderbufferStorage(GL_RENDERBUFFER,r.DEPTH_COMPONENT16,o,u),a.put(KEY_RENDERBUFFER_WIDTH,o),a.put(KEY_RENDERBUFFER_HEIGHT,u),r.bindRenderbuffer(GL_RENDERBUFFER,null)),a.get(KEY_RENDERBUFFER_ATTACHED)||(r.framebufferRenderbuffer(GL_FRAMEBUFFER,GL_DEPTH_ATTACHMENT,GL_RENDERBUFFER,ja),a.put(KEY_RENDERBUFFER_ATTACHED,!0))}},unbind:function(n){n.__currentFrameBuffer=null;var r=n.gl;r.bindFramebuffer(GL_FRAMEBUFFER,null),this._boundRenderer=null,this._cache.use(n.__uid__);var a=this._cache.get("viewport");a&&n.setViewport(a),this.updateMipmap(n)},updateMipmap:function(n){var r=n.gl;for(var a in this._textures){var s=this._textures[a];if(s){var o=s.texture;if(!o.NPOT&&o.useMipmap&&o.minFilter===Texture.LINEAR_MIPMAP_LINEAR){var u=o.textureType==="textureCube"?glenum.TEXTURE_CUBE_MAP:glenum.TEXTURE_2D;r.bindTexture(u,o.getWebGLTexture(n)),r.generateMipmap(u),r.bindTexture(u,null)}}}},checkStatus:function(n){return n.checkFramebufferStatus(GL_FRAMEBUFFER)},_getFrameBufferGL:function(n){var r=this._cache;return r.use(n.__uid__),r.miss(KEY_FRAMEBUFFER)&&r.put(KEY_FRAMEBUFFER,n.gl.createFramebuffer()),r.get(KEY_FRAMEBUFFER)},attach:function(n,r,a){if(!n.width)throw new Error("The texture attached to color buffer is not a valid.");r=r||GL_COLOR_ATTACHMENT0,a=a||glenum.TEXTURE_2D;var s=this._boundRenderer,o=s&&s.gl,u;if(o){var c=this._cache;c.use(s.__uid__),u=c.get("attached_textures")}var p=this._textures[r];if(!(p&&p.target===a&&p.texture===n&&u&&u[r]!=null)){var d=!0;s&&(d=this._doAttach(s,n,r,a),this.viewport||s.setViewport(0,0,n.width,n.height,1)),d&&(this._textures[r]=this._textures[r]||{},this._textures[r].texture=n,this._textures[r].target=a)}},_doAttach:function(n,r,a,s){var o=n.gl,u=r.getWebGLTexture(n),c=this._cache.get("attached_textures");if(c&&c[a]){var p=c[a];if(p.texture===r&&p.target===s)return}a=+a;var d=!0;if(a===GL_DEPTH_ATTACHMENT||a===glenum.DEPTH_STENCIL_ATTACHMENT){var _=n.getGLExtension("WEBGL_depth_texture");if(_||(console.error("Depth texture is not supported by the browser"),d=!1),r.format!==glenum.DEPTH_COMPONENT&&r.format!==glenum.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),d=!1),d){var ja=this._cache.get(KEY_RENDERBUFFER);ja&&(o.framebufferRenderbuffer(GL_FRAMEBUFFER,GL_DEPTH_ATTACHMENT,GL_RENDERBUFFER,null),o.deleteRenderbuffer(ja),this._cache.put(KEY_RENDERBUFFER,!1)),this._cache.put(KEY_RENDERBUFFER_ATTACHED,!1),this._cache.put(KEY_DEPTHTEXTURE_ATTACHED,!0)}}return o.framebufferTexture2D(GL_FRAMEBUFFER,a,s,u,0),c||(c={},this._cache.put("attached_textures",c)),c[a]=c[a]||{},c[a].texture=r,c[a].target=s,d},_doDetach:function(n,r,a){n.framebufferTexture2D(GL_FRAMEBUFFER,r,a,null,0);var s=this._cache.get("attached_textures");s&&s[r]&&(s[r]=null),(r===GL_DEPTH_ATTACHMENT||r===glenum.DEPTH_STENCIL_ATTACHMENT)&&this._cache.put(KEY_DEPTHTEXTURE_ATTACHED,!1)},detach:function(n,r){if(this._textures[n]=null,this._boundRenderer){var a=this._cache;a.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,n,r)}},dispose:function(n){var r=n.gl,a=this._cache;a.use(n.__uid__);var s=a.get(KEY_RENDERBUFFER);s&&r.deleteRenderbuffer(s);var o=a.get(KEY_FRAMEBUFFER);o&&r.deleteFramebuffer(o),a.deleteContext(n.__uid__),this._textures={}}});FrameBuffer.DEPTH_ATTACHMENT=GL_DEPTH_ATTACHMENT;FrameBuffer.COLOR_ATTACHMENT0=GL_COLOR_ATTACHMENT0;FrameBuffer.STENCIL_ATTACHMENT=glenum.STENCIL_ATTACHMENT;FrameBuffer.DEPTH_STENCIL_ATTACHMENT=glenum.DEPTH_STENCIL_ATTACHMENT;var targets$3=["px","nx","py","ny","pz","nz"],EnvironmentMapPass=Base.extend(function(){var n={position:new Vector3,far:1e3,near:.1,texture:null,shadowMapPass:null},r=n._cameras={px:new Perspective({fov:90}),nx:new Perspective({fov:90}),py:new Perspective({fov:90}),ny:new Perspective({fov:90}),pz:new Perspective({fov:90}),nz:new Perspective({fov:90})};return r.px.lookAt(Vector3.POSITIVE_X,Vector3.NEGATIVE_Y),r.nx.lookAt(Vector3.NEGATIVE_X,Vector3.NEGATIVE_Y),r.py.lookAt(Vector3.POSITIVE_Y,Vector3.POSITIVE_Z),r.ny.lookAt(Vector3.NEGATIVE_Y,Vector3.NEGATIVE_Z),r.pz.lookAt(Vector3.POSITIVE_Z,Vector3.NEGATIVE_Y),r.nz.lookAt(Vector3.NEGATIVE_Z,Vector3.NEGATIVE_Y),n._frameBuffer=new FrameBuffer,n},{getCamera:function(n){return this._cameras[n]},render:function(n,r,a){var s=n.gl;a||r.update();for(var o=this.texture.width,u=2*Math.atan(o/(o-.5))/Math.PI*180,c=0;c<6;c++){var p=targets$3[c],d=this._cameras[p];if(Vector3.copy(d.position,this.position),d.far=this.far,d.near=this.near,d.fov=u,this.shadowMapPass){d.update();var _=r.getBoundingBox();_.applyTransform(d.viewMatrix),r.viewBoundingBoxLastFrame.copy(_),this.shadowMapPass.render(n,r,d,!0)}this._frameBuffer.attach(this.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+c),this._frameBuffer.bind(n),n.render(r,d,!0),this._frameBuffer.unbind(n)}},dispose:function(n){this._frameBuffer.dispose(n)}}),Plane=Geometry.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var n=this.heightSegments,r=this.widthSegments,a=this.attributes,s=[],o=[],u=[],c=[],p=0;p<=n;p++)for(var d=p/n,_=0;_<=r;_++){var ja=_/r;if(s.push([2*ja-1,2*d-1,0]),o&&o.push([ja,d]),u&&u.push([0,0,1]),_<r&&p<n){var Ja=_+p*(r+1);c.push([Ja,Ja+1,Ja+r+1]),c.push([Ja+r+1,Ja+1,Ja+r+2])}}a.position.fromArray(s),a.texcoord0.fromArray(o),a.normal.fromArray(u),this.initIndicesFromArray(c),this.boundingBox=new BoundingBox,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}}),planeMatrix=new Matrix4,Cube=Geometry.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var n={px:createPlane("px",this.depthSegments,this.heightSegments),nx:createPlane("nx",this.depthSegments,this.heightSegments),py:createPlane("py",this.widthSegments,this.depthSegments),ny:createPlane("ny",this.widthSegments,this.depthSegments),pz:createPlane("pz",this.widthSegments,this.heightSegments),nz:createPlane("nz",this.widthSegments,this.heightSegments)},r=["position","texcoord0","normal"],a=0,s=0;for(var o in n)a+=n[o].vertexCount,s+=n[o].indices.length;for(var u=0;u<r.length;u++)this.attributes[r[u]].init(a);this.indices=new vendor.Uint16Array(s);var c=0,p=0;for(var o in n){for(var d=n[o],u=0;u<r.length;u++)for(var _=r[u],ja=d.attributes[_].value,Ja=d.attributes[_].size,ec=_==="normal",tc=0;tc<ja.length;tc++){var rc=ja[tc];this.inside&&ec&&(rc=-rc),this.attributes[_].value[tc+Ja*p]=rc}for(var nc=d.indices.length,tc=0;tc<d.indices.length;tc++)this.indices[tc+c]=p+d.indices[this.inside?nc-tc-1:tc];c+=d.indices.length,p+=d.vertexCount}this.boundingBox=new BoundingBox,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function createPlane(n,r,a){planeMatrix.identity();var s=new Plane({widthSegments:r,heightSegments:a});switch(n){case"px":Matrix4.translate(planeMatrix,planeMatrix,Vector3.POSITIVE_X),Matrix4.rotateY(planeMatrix,planeMatrix,Math.PI/2);break;case"nx":Matrix4.translate(planeMatrix,planeMatrix,Vector3.NEGATIVE_X),Matrix4.rotateY(planeMatrix,planeMatrix,-Math.PI/2);break;case"py":Matrix4.translate(planeMatrix,planeMatrix,Vector3.POSITIVE_Y),Matrix4.rotateX(planeMatrix,planeMatrix,-Math.PI/2);break;case"ny":Matrix4.translate(planeMatrix,planeMatrix,Vector3.NEGATIVE_Y),Matrix4.rotateX(planeMatrix,planeMatrix,Math.PI/2);break;case"pz":Matrix4.translate(planeMatrix,planeMatrix,Vector3.POSITIVE_Z);break;case"nz":Matrix4.translate(planeMatrix,planeMatrix,Vector3.NEGATIVE_Z),Matrix4.rotateY(planeMatrix,planeMatrix,Math.PI);break}return s.applyTransform(planeMatrix),s}const skyboxEssl=`@export clay.skybox.vertex
#define SHADER_NAME skybox
uniform mat4 world : WORLD;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
varying vec3 v_WorldPosition;
void main()
{
 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end
@export clay.skybox.fragment
#define PI 3.1415926
uniform mat4 viewInverse : VIEWINVERSE;
#ifdef EQUIRECTANGULAR
uniform sampler2D environmentMap;
#else
uniform samplerCube environmentMap;
#endif
uniform float lod: 0.0;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
@import clay.util.srgb
@import clay.util.ACES
void main()
{
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
#ifdef EQUIRECTANGULAR
 float phi = acos(V.y);
 float theta = atan(-V.x, V.z) + PI * 0.5;
 vec2 uv = vec2(theta / 2.0 / PI, phi / PI);
 vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));
#else
 #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)
 vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));
 #else
 vec4 texel = decodeHDR(textureCube(environmentMap, V));
 #endif
#endif
#ifdef SRGB_DECODE
 texel = sRGBToLinear(texel);
#endif
#ifdef TONEMAPPING
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
#ifdef SRGB_ENCODE
 texel = linearTosRGB(texel);
#endif
 gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));
}
@end`;Shader.import(skyboxEssl);var Skybox=Mesh.extend(function(){var n=new Shader({vertex:Shader.source("clay.skybox.vertex"),fragment:Shader.source("clay.skybox.fragment")}),r=new Material({shader:n,depthMask:!1});return{scene:null,geometry:new Cube,material:r,environmentMap:null,culling:!1,_dummyCamera:new Perspective}},function(){var n=this.scene;n&&this.attachScene(n),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(n){this.scene&&this.detachScene(),n.skybox=this,this.scene=n,n.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(n){this.detachScene(),this.geometry.dispose(n)},setEnvironmentMap:function(n){n.textureType==="texture2D"?(this.material.define("EQUIRECTANGULAR"),n.minFilter=Texture.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",n)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(n,r,a){this.renderSkybox(n,a)},renderSkybox:function(n,r){var a=this._dummyCamera;a.aspect=n.getViewportAspect(),a.fov=r.fov||50,a.updateProjectionMatrix(),Matrix4.invert(a.invProjectionMatrix,a.projectionMatrix),a.worldTransform.copy(r.worldTransform),a.viewMatrix.copy(r.viewMatrix),this.position.copy(r.getWorldPosition()),this.update(),n.gl.disable(n.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),n.renderPass([this],a)}}),DDS_MAGIC=542327876,DDSD_MIPMAPCOUNT=131072,DDSCAPS2_CUBEMAP=512,DDPF_FOURCC=4;function fourCCToInt32(n){return n.charCodeAt(0)+(n.charCodeAt(1)<<8)+(n.charCodeAt(2)<<16)+(n.charCodeAt(3)<<24)}var headerLengthInt=31,FOURCC_DXT1=fourCCToInt32("DXT1"),FOURCC_DXT3=fourCCToInt32("DXT3"),FOURCC_DXT5=fourCCToInt32("DXT5"),off_magic=0,off_size=1,off_flags=2,off_height=3,off_width=4,off_mipmapCount=7,off_pfFlags=20,off_pfFourCC=21,off_caps2=28,ret$1={parse:function(n,r){var a=new Int32Array(n,0,headerLengthInt);if(a[off_magic]!==DDS_MAGIC||!a(off_pfFlags)&DDPF_FOURCC)return null;var s=a(off_pfFourCC),o=a[off_width],u=a[off_height],c=a[off_caps2]&DDSCAPS2_CUBEMAP,p=a[off_flags]&DDSD_MIPMAPCOUNT,d,_;switch(s){case FOURCC_DXT1:d=8,_=Texture.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case FOURCC_DXT3:d=16,_=Texture.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case FOURCC_DXT5:d=16,_=Texture.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var ja=a[off_size]+4,Ja=c?6:1,ec=1;p&&(ec=Math.max(1,a[off_mipmapCount]));for(var tc=[],rc=0;rc<Ja;rc++){var nc=o,ic=u;tc[rc]=new Texture2D({width:nc,height:ic,format:_});for(var uc=[],eh=0;eh<ec;eh++){var rh=Math.max(4,nc)/4*Math.max(4,ic)/4*d,ah=new Uint8Array(n,ja,rh);ja+=rh,nc*=.5,ic*=.5,uc[eh]=ah}tc[rc].pixels=uc[0],p&&(tc[rc].mipmaps=uc)}if(r)r.width=tc[0].width,r.height=tc[0].height,r.format=tc[0].format,r.pixels=tc[0].pixels,r.mipmaps=tc[0].mipmaps;else return tc[0]}},toChar=String.fromCharCode,MINELEN=8,MAXELEN=32767;function rgbe2float(n,r,a,s){if(n[3]>0){var o=Math.pow(2,n[3]-128-8+s);r[a+0]=n[0]*o,r[a+1]=n[1]*o,r[a+2]=n[2]*o}else r[a+0]=0,r[a+1]=0,r[a+2]=0;return r[a+3]=1,r}function uint82string(n,r,a){for(var s="",o=r;o<a;o++)s+=toChar(n[o]);return s}function copyrgbe(n,r){r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3]}function oldReadColors(n,r,a,s){for(var o=0,u=0,c=s;c>0;)if(n[u][0]=r[a++],n[u][1]=r[a++],n[u][2]=r[a++],n[u][3]=r[a++],n[u][0]===1&&n[u][1]===1&&n[u][2]===1){for(var p=n[u][3]<<o>>>0;p>0;p--)copyrgbe(n[u-1],n[u]),u++,c--;o+=8}else u++,c--,o=0;return a}function readColors(n,r,a,s){if(s<MINELEN|s>MAXELEN)return oldReadColors(n,r,a,s);var o=r[a++];if(o!=2)return oldReadColors(n,r,a-1,s);if(n[0][1]=r[a++],n[0][2]=r[a++],o=r[a++],(n[0][2]<<8>>>0|o)>>>0!==s)return null;for(var o=0;o<4;o++)for(var u=0;u<s;){var c=r[a++];if(c>128){c=(c&127)>>>0;for(var p=r[a++];c--;)n[u++][o]=p}else for(;c--;)n[u++][o]=r[a++]}return a}var ret={parseRGBE:function(n,r,a){a==null&&(a=0);var s=new Uint8Array(n),o=s.length;if(uint82string(s,0,2)==="#?"){for(var u=2;u<o&&!(toChar(s[u])===`
`&&toChar(s[u+1])===`
`);u++);if(!(u>=o)){u+=2;for(var c="";u<o;u++){var p=toChar(s[u]);if(p===`
`)break;c+=p}var d=c.split(" "),_=parseInt(d[1]),ja=parseInt(d[3]);if(!(!ja||!_)){for(var Ja=u+1,ec=[],tc=0;tc<ja;tc++){ec[tc]=[];for(var rc=0;rc<4;rc++)ec[tc][rc]=0}for(var nc=new Float32Array(ja*_*4),ic=0,uc=0;uc<_;uc++){var Ja=readColors(ec,s,Ja,ja);if(!Ja)return null;for(var tc=0;tc<ja;tc++)rgbe2float(ec[tc],nc,ic,a),ic+=4}return r||(r=new Texture2D),r.width=ja,r.height=_,r.pixels=nc,r.type=Texture.FLOAT,r}}}},parseRGBEFromPNG:function(n){}},textureUtil={loadTexture:function(n,r,a,s){var o;if(typeof r=="function"?(a=r,s=a,r={}):r=r||{},typeof n=="string"){if(n.match(/.hdr$/)||r.fileType==="hdr")return o=new Texture2D({width:0,height:0,sRGB:!1}),textureUtil._fetchTexture(n,function(u){ret.parseRGBE(u,o,r.exposure),o.dirty(),a&&a(o)},s),o;n.match(/.dds$/)||r.fileType==="dds"?(o=new Texture2D({width:0,height:0}),textureUtil._fetchTexture(n,function(u){ret$1.parse(u,o),o.dirty(),a&&a(o)},s)):(o=new Texture2D,o.load(n),o.success(a),o.error(s))}else typeof n=="object"&&typeof n.px<"u"&&(o=new TextureCube,o.load(n),o.success(a),o.error(s));return o},loadPanorama:function(n,r,a,s,o,u){var c=this;typeof s=="function"?(o=s,u=o,s={}):s=s||{},textureUtil.loadTexture(r,s,function(p){p.flipY=s.flipY||!1,c.panoramaToCubeMap(n,p,a,s),p.dispose(n),o&&o(a)},u)},panoramaToCubeMap:function(n,r,a,s){var o=new EnvironmentMapPass,u=new Skybox({scene:new Scene});return u.setEnvironmentMap(r),s=s||{},s.encodeRGBM&&u.material.define("fragment","RGBM_ENCODE"),a.sRGB=r.sRGB,o.texture=a,o.render(n,u.scene),o.texture=null,o.dispose(n),a},heightToNormal:function(n,r){var a=document.createElement("canvas"),s=a.width=n.width,o=a.height=n.height,u=a.getContext("2d");u.drawImage(n,0,0,s,o),r=r||!1;for(var c=u.getImageData(0,0,s,o),p=u.createImageData(s,o),d=0;d<c.data.length;d+=4){if(r){var _=c.data[d],ja=c.data[d+1],Ja=c.data[d+2],ec=Math.abs(_-ja)+Math.abs(ja-Ja);if(ec>20)return console.warn("Given image is not a height map"),n}var tc,rc,nc,ic;d%(s*4)===0?(tc=c.data[d],nc=c.data[d+4]):d%(s*4)===(s-1)*4?(tc=c.data[d-4],nc=c.data[d]):(tc=c.data[d-4],nc=c.data[d+4]),d<s*4?(rc=c.data[d],ic=c.data[d+s*4]):d>s*(o-1)*4?(rc=c.data[d-s*4],ic=c.data[d]):(rc=c.data[d-s*4],ic=c.data[d+s*4]),p.data[d]=tc-nc+127,p.data[d+1]=rc-ic+127,p.data[d+2]=255,p.data[d+3]=255}return u.putImageData(p,0,0),a},isHeightImage:function(n,r,a){if(!n||!n.width||!n.height)return!1;var s=document.createElement("canvas"),o=s.getContext("2d"),u=r||32;a=a||20,s.width=s.height=u,o.drawImage(n,0,0,u,u);for(var c=o.getImageData(0,0,u,u),p=0;p<c.data.length;p+=4){var d=c.data[p],_=c.data[p+1],ja=c.data[p+2],Ja=Math.abs(d-_)+Math.abs(_-ja);if(Ja>a)return!1}return!0},_fetchTexture:function(n,r,a){vendor.request.get({url:n,responseType:"arraybuffer",onload:r,onerror:a})},createChessboard:function(n,r,a,s){n=n||512,r=r||64,a=a||"black",s=s||"white";var o=Math.ceil(n/r),u=document.createElement("canvas");u.width=n,u.height=n;var c=u.getContext("2d");c.fillStyle=s,c.fillRect(0,0,n,n),c.fillStyle=a;for(var p=0;p<o;p++)for(var d=0;d<o;d++){var _=d%2?p%2:p%2-1;_&&c.fillRect(p*r,d*r,r,r)}var ja=new Texture2D({image:u,anisotropic:8});return ja},createBlank:function(n){var r=document.createElement("canvas");r.width=1,r.height=1;var a=r.getContext("2d");a.fillStyle=n,a.fillRect(0,0,1,1);var s=new Texture2D({image:r});return s}},events=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function makeHandlerName(n){return"_on"+n}var EChartsSurface=function(n){var r=this;this._texture=new Texture2D({anisotropic:32,flipY:!1,surface:this,dispose:function(a){r.dispose(),Texture2D.prototype.dispose.call(this,a)}}),events.forEach(function(a){this[makeHandlerName(a)]=function(s){s.triangle&&this._meshes.forEach(function(o){this.dispatchEvent(a,o,s.triangle,s.point)},this)}},this),this._meshes=[],n&&this.setECharts(n),this.onupdate=null};EChartsSurface.prototype={constructor:EChartsSurface,getTexture:function(){return this._texture},setECharts:function(n){this._chart=n;var r=n.getDom();if(!(r instanceof HTMLCanvasElement))console.error("ECharts must init on canvas if it is used as texture."),r=document.createElement("canvas");else{var a=this,s=n.getZr(),o=s.__oldRefreshImmediately||s.refreshImmediately;s.refreshImmediately=function(){o.call(this),a._texture.dirty(),a.onupdate&&a.onupdate()},s.__oldRefreshImmediately=o}this._texture.image=r,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var n=new Vector3,r=new Vector3,a=new Vector3,s=new Vector2,o=new Vector2,u=new Vector2,c=new Vector2,p=new Vector3;return function(d,_,ja,Ja){var ec=_.geometry,tc=ec.attributes.position,rc=ec.attributes.texcoord0,nc=Vector3.dot,ic=Vector3.cross;tc.get(ja[0],n.array),tc.get(ja[1],r.array),tc.get(ja[2],a.array),rc.get(ja[0],s.array),rc.get(ja[1],o.array),rc.get(ja[2],u.array),ic(p,r,a);var uc=nc(n,p),eh=nc(Ja,p)/uc;ic(p,a,n);var rh=nc(Ja,p)/uc;ic(p,n,r);var ah=nc(Ja,p)/uc;Vector2.scale(c,s,eh),Vector2.scaleAndAdd(c,c,o,rh),Vector2.scaleAndAdd(c,c,u,ah);var ih=c.x*this._chart.getWidth(),oh=c.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(d,{zrX:ih,zrY:oh})}}(),attachToMesh:function(n){this._meshes.indexOf(n)>=0||(events.forEach(function(r){n.on(r,this[makeHandlerName(r)],this)},this),this._meshes.push(n))},detachFromMesh:function(n){var r=this._meshes.indexOf(n);r>=0&&this._meshes.splice(r,1),events.forEach(function(a){n.off(a,this[makeHandlerName(a)])},this)},dispose:function(){this._meshes.forEach(function(n){this.detachFromMesh(n)},this)}};var Orthographic=Camera.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var n=this.projectionMatrix.array;this.left=(-1-n[12])/n[0],this.right=(1-n[12])/n[0],this.top=(1-n[13])/n[5],this.bottom=(-1-n[13])/n[5],this.near=-(-1-n[14])/n[10],this.far=-(1-n[14])/n[10]},clone:function(){var n=Camera.prototype.clone.call(this);return n.left=this.left,n.right=this.right,n.near=this.near,n.far=this.far,n.top=this.top,n.bottom=this.bottom,n}});const vertexGlsl=`
@export clay.compositor.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
varying vec2 v_Texcoord;
void main()
{
 v_Texcoord = texcoord;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end`;Shader.import(vertexGlsl);var planeGeo=new Plane,mesh=new Mesh({geometry:planeGeo,frustumCulling:!1}),camera=new Orthographic,Pass=Base.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var n=new Shader(Shader.source("clay.compositor.vertex"),this.fragment),r=new Material({shader:n});r.enableTexturesAll(),this.material=r},{setUniform:function(n,r){this.material.setUniform(n,r)},getUniform:function(n){var r=this.material.uniforms[n];if(r)return r.value},attachOutput:function(n,r){this.outputs||(this.outputs={}),r=r||glenum.COLOR_ATTACHMENT0,this.outputs[r]=n},detachOutput:function(n){for(var r in this.outputs)this.outputs[r]===n&&(this.outputs[r]=null)},bind:function(n,r){if(this.outputs)for(var a in this.outputs){var s=this.outputs[a];s&&r.attach(s,a)}r&&r.bind(n)},unbind:function(n,r){r.unbind(n)},render:function(n,r){var a=n.gl;if(r){this.bind(n,r);var s=n.getGLExtension("EXT_draw_buffers");if(s&&this.outputs){var o=[];for(var u in this.outputs)u=+u,u>=a.COLOR_ATTACHMENT0&&u<=a.COLOR_ATTACHMENT0+8&&o.push(u);s.drawBuffersEXT(o)}}this.trigger("beforerender",this,n);var c=this.clearDepth?a.DEPTH_BUFFER_BIT:0;if(a.depthMask(!0),this.clearColor){c=c|a.COLOR_BUFFER_BIT,a.colorMask(!0,!0,!0,!0);var p=this.clearColor;Array.isArray(p)&&a.clearColor(p[0],p[1],p[2],p[3])}a.clear(c),this.blendWithPrevious?(a.enable(a.BLEND),this.material.transparent=!0):(a.disable(a.BLEND),this.material.transparent=!1),this.renderQuad(n),this.trigger("afterrender",this,n),r&&this.unbind(n,r)},renderQuad:function(n){mesh.material=this.material,n.renderPass([mesh],camera)},dispose:function(n){}});const integrateBRDFShaderCode=`#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform sampler2D normalDistribution;
uniform vec2 viewportSize : [512, 256];
const vec3 N = vec3(0.0, 0.0, 1.0);
const float fSampleNumber = float(SAMPLE_NUMBER);
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
float G_Smith(float roughness, float NoV, float NoL) {
 float k = roughness * roughness / 2.0;
 float G1V = NoV / (NoV * (1.0 - k) + k);
 float G1L = NoL / (NoL * (1.0 - k) + k);
 return G1L * G1V;
}
void main() {
 vec2 uv = gl_FragCoord.xy / viewportSize;
 float NoV = uv.x;
 float roughness = uv.y;
 vec3 V;
 V.x = sqrt(1.0 - NoV * NoV);
 V.y = 0.0;
 V.z = NoV;
 float A = 0.0;
 float B = 0.0;
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(L.z, 0.0, 1.0);
 float NoH = clamp(H.z, 0.0, 1.0);
 float VoH = clamp(dot(V, H), 0.0, 1.0);
 if (NoL > 0.0) {
 float G = G_Smith(roughness, NoV, NoL);
 float G_Vis = G * VoH / (NoH * NoV);
 float Fc = pow(1.0 - VoH, 5.0);
 A += (1.0 - Fc) * G_Vis;
 B += Fc * G_Vis;
 }
 }
 gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);
}
`,prefilterFragCode=`#define SHADER_NAME prefilter
#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform mat4 viewInverse : VIEWINVERSE;
uniform samplerCube environmentMap;
uniform sampler2D normalDistribution;
uniform float roughness : 0.5;
varying vec2 v_Texcoord;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
void main() {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
 vec3 N = V;
 vec3 prefilteredColor = vec3(0.0);
 float totalWeight = 0.0;
 float fMaxSampleNumber = float(SAMPLE_NUMBER);
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(dot(N, L), 0.0, 1.0);
 if (NoL > 0.0) {
 prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;
 totalWeight += NoL;
 }
 }
 gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));
}
`;var cubemapUtil={},targets$2=["px","nx","py","ny","pz","nz"];cubemapUtil.prefilterEnvironmentMap=function(n,r,a,s,o){(!o||!s)&&(s=cubemapUtil.generateNormalDistribution(),o=cubemapUtil.integrateBRDF(n,s)),a=a||{};var u=a.width||64,c=a.height||64,p=a.type||r.type,d=new TextureCube({width:u,height:c,type:p,flipY:!1,mipmaps:[]});d.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var _=Math.min(u,c),ja=Math.log(_)/Math.log(2)+1,Ja=new Material({shader:new Shader({vertex:Shader.source("clay.skybox.vertex"),fragment:prefilterFragCode})});Ja.set("normalDistribution",s),a.encodeRGBM&&Ja.define("fragment","RGBM_ENCODE"),a.decodeRGBM&&Ja.define("fragment","RGBM_DECODE");var ec=new Scene,tc;if(r.textureType==="texture2D"){var rc=new TextureCube({width:u,height:c,type:p===Texture.FLOAT?Texture.HALF_FLOAT:p});textureUtil.panoramaToCubeMap(n,r,rc,{encodeRGBM:a.decodeRGBM}),r=rc}tc=new Skybox({scene:ec,material:Ja}),tc.material.set("environmentMap",r);var nc=new EnvironmentMapPass({texture:d});a.encodeRGBM&&(p=d.type=Texture.UNSIGNED_BYTE);for(var ic=new Texture2D({width:u,height:c,type:p}),uc=new FrameBuffer({depthBuffer:!1}),eh=vendor[p===Texture.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],rh=0;rh<ja;rh++){d.mipmaps[rh]={pixels:{}},tc.material.set("roughness",rh/(ja-1));for(var ah=ic.width,ih=2*Math.atan(ah/(ah-.5))/Math.PI*180,oh=0;oh<targets$2.length;oh++){var uh=new eh(ic.width*ic.height*4);uc.attach(ic),uc.bind(n);var ch=nc.getCamera(targets$2[oh]);ch.fov=ih,n.render(ec,ch),n.gl.readPixels(0,0,ic.width,ic.height,Texture.RGBA,p,uh),uc.unbind(n),d.mipmaps[rh].pixels[targets$2[oh]]=uh}ic.width/=2,ic.height/=2,ic.dirty()}return uc.dispose(n),ic.dispose(n),tc.dispose(n),s.dispose(n),{environmentMap:d,brdfLookup:o,normalDistribution:s,maxMipmapLevel:ja}};cubemapUtil.integrateBRDF=function(n,r){r=r||cubemapUtil.generateNormalDistribution();var a=new FrameBuffer({depthBuffer:!1}),s=new Pass({fragment:integrateBRDFShaderCode}),o=new Texture2D({width:512,height:256,type:Texture.HALF_FLOAT,wrapS:Texture.CLAMP_TO_EDGE,wrapT:Texture.CLAMP_TO_EDGE,minFilter:Texture.NEAREST,magFilter:Texture.NEAREST,useMipmap:!1});return s.setUniform("normalDistribution",r),s.setUniform("viewportSize",[512,256]),s.attachOutput(o),s.render(n,a),a.dispose(n),o};cubemapUtil.generateNormalDistribution=function(a,s){for(var a=a||256,s=s||1024,o=new Texture2D({width:a,height:s,type:Texture.FLOAT,minFilter:Texture.NEAREST,magFilter:Texture.NEAREST,wrapS:Texture.CLAMP_TO_EDGE,wrapT:Texture.CLAMP_TO_EDGE,useMipmap:!1}),u=new Float32Array(s*a*4),c=[],p=0;p<a;p++){for(var d=p/a,_=d*d,ja=0;ja<s;ja++){var Ja=(ja<<16|ja>>>16)>>>0;Ja=((Ja&1431655765)<<1|(Ja&2863311530)>>>1)>>>0,Ja=((Ja&858993459)<<2|(Ja&3435973836)>>>2)>>>0,Ja=((Ja&252645135)<<4|(Ja&4042322160)>>>4)>>>0,Ja=(((Ja&16711935)<<8|(Ja&4278255360)>>>8)>>>0)/4294967296;var ec=Math.sqrt((1-Ja)/(1+(_*_-1)*Ja));c[ja]=ec}for(var ja=0;ja<s;ja++){var tc=(ja*a+p)*4,ec=c[ja],rc=Math.sqrt(1-ec*ec),nc=ja/s,ic=2*Math.PI*nc;u[tc]=rc*Math.cos(ic),u[tc+1]=ec,u[tc+2]=rc*Math.sin(ic),u[tc+3]=1}}return o.pixels=u,o};var AmbientCubemapLight=Light.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(n,r){if(!n.getGLExtension("EXT_shader_texture_lod")){console.warn("Device not support textureCubeLodEXT");return}this._brdfLookup||(this._normalDistribution=cubemapUtil.generateNormalDistribution(),this._brdfLookup=cubemapUtil.integrateBRDF(n,this._normalDistribution));var a=this.cubemap;if(!a.__prefiltered){var s=cubemapUtil.prefilterEnvironmentMap(n,a,{encodeRGBM:!0,width:r,height:r},this._normalDistribution,this._brdfLookup);this.cubemap=s.environmentMap,this.cubemap.__prefiltered=!0,a.dispose(n)}},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(n){var r=n.color,a=n.intensity;return[r[0]*a,r[1]*a,r[2]*a]}},ambientCubemapLightCubemap:{type:"t",value:function(n){return n.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(n){return n._brdfLookup}}}}),AmbientSHLight=Light.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new vendor.Float32Array(9*3)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(n){var r=n.color,a=n.intensity;return[r[0]*a,r[1]*a,r[2]*a]}},ambientSHLightCoefficients:{type:"3f",value:function(n){for(var r=n._coefficientsTmpArr,a=0;a<n.coefficients.length;a++)r[a]=n.coefficients[a];return r}}}}),sh={},targets$1=["px","nx","py","ny","pz","nz"];function harmonics(n,r){var a=n[0],s=n[1],o=n[2];return r===0?1:r===1?a:r===2?s:r===3?o:r===4?a*o:r===5?s*o:r===6?a*s:r===7?3*o*o-1:a*a-s*s}var normalTransform={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};function projectEnvironmentMapCPU(n,r,a,s){for(var o=new vendor.Float32Array(27),u=vec3$f.create(),c=vec3$f.create(),p=vec3$f.create(),d=0;d<9;d++){for(var _=vec3$f.create(),ja=0;ja<targets$1.length;ja++){for(var Ja=r[targets$1[ja]],ec=vec3$f.create(),tc=0,rc=0,nc=normalTransform[targets$1[ja]],ic=0;ic<s;ic++)for(var uc=0;uc<a;uc++){u[0]=uc/(a-1)*2-1,u[1]=ic/(s-1)*2-1,u[2]=-1,vec3$f.normalize(u,u),p[0]=u[nc[0]]*nc[3],p[1]=u[nc[1]]*nc[4],p[2]=u[nc[2]]*nc[5],c[0]=Ja[rc++]/255,c[1]=Ja[rc++]/255,c[2]=Ja[rc++]/255;var eh=Ja[rc++]/255*8.12;c[0]*=eh,c[1]*=eh,c[2]*=eh,vec3$f.scaleAndAdd(ec,ec,c,harmonics(p,d)*-u[2]),tc+=-u[2]}vec3$f.scaleAndAdd(_,_,ec,1/tc)}o[d*3]=_[0]/6,o[d*3+1]=_[1]/6,o[d*3+2]=_[2]/6}return o}sh.projectEnvironmentMap=function(n,r,a){a=a||{},a.lod=a.lod||0;var s,o=new Scene,u=64;r.textureType==="texture2D"?s=new Skybox({scene:o,environmentMap:r}):(u=r.image&&r.image.px?r.image.px.width:r.width,s=new Skybox({scene:o,environmentMap:r}));var c=Math.ceil(u/Math.pow(2,a.lod)),p=Math.ceil(u/Math.pow(2,a.lod)),d=new Texture2D({width:c,height:p}),_=new FrameBuffer;s.material.define("fragment","RGBM_ENCODE"),a.decodeRGBM&&s.material.define("fragment","RGBM_DECODE"),s.material.set("lod",a.lod);for(var ja=new EnvironmentMapPass({texture:d}),Ja={},ec=0;ec<targets$1.length;ec++){Ja[targets$1[ec]]=new Uint8Array(c*p*4);var tc=ja.getCamera(targets$1[ec]);tc.fov=90,_.attach(d),_.bind(n),n.render(o,tc),n.gl.readPixels(0,0,c,p,Texture.RGBA,Texture.UNSIGNED_BYTE,Ja[targets$1[ec]]),_.unbind(n)}return s.dispose(n),_.dispose(n),d.dispose(n),projectEnvironmentMapCPU(n,Ja,c,p)};var retrieve={firstNotNull:function(){for(var n=0,r=arguments.length;n<r;n++)if(arguments[n]!=null)return arguments[n]},queryDataIndex:function(n,r){if(r.dataIndexInside!=null)return r.dataIndexInside;if(r.dataIndex!=null)return isArray$1(r.dataIndex)?map$1(r.dataIndex,function(a){return n.indexOfRawIndex(a)}):n.indexOfRawIndex(r.dataIndex);if(r.name!=null)return isArray$1(r.name)?map$1(r.name,function(a){return n.indexOfName(a)}):n.indexOfName(r.name)}},Sphere=Geometry.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:Math.PI*2,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var n=this.heightSegments,r=this.widthSegments,a=this.attributes.position,s=this.attributes.texcoord0,o=this.attributes.normal,u=(r+1)*(n+1);a.init(u),s.init(u),o.init(u);var c=u>65535?Uint32Array:Uint16Array,p=this.indices=new c(r*n*6),d,_,ja,Ja,ec,tc,rc,rh=this.radius,nc=this.phiStart,ic=this.phiLength,uc=this.thetaStart,eh=this.thetaLength,rh=this.radius,ah=[],ih=[],oh=0,uh=1/rh;for(rc=0;rc<=n;rc++)for(tc=0;tc<=r;tc++)Ja=tc/r,ec=rc/n,d=-rh*Math.cos(nc+Ja*ic)*Math.sin(uc+ec*eh),_=rh*Math.cos(uc+ec*eh),ja=rh*Math.sin(nc+Ja*ic)*Math.sin(uc+ec*eh),ah[0]=d,ah[1]=_,ah[2]=ja,ih[0]=Ja,ih[1]=ec,a.set(oh,ah),s.set(oh,ih),ah[0]*=uh,ah[1]*=uh,ah[2]*=uh,o.set(oh,ah),oh++;var ch,hh,dh,gh,fh=r+1,vh=0;for(rc=0;rc<n;rc++)for(tc=0;tc<r;tc++)hh=rc*fh+tc,ch=rc*fh+tc+1,gh=(rc+1)*fh+tc+1,dh=(rc+1)*fh+tc,p[vh++]=ch,p[vh++]=hh,p[vh++]=gh,p[vh++]=hh,p[vh++]=dh,p[vh++]=gh;this.boundingBox=new BoundingBox,this.boundingBox.max.set(rh,rh,rh),this.boundingBox.min.set(-rh,-rh,-rh)}}),AmbientLight=Light.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(n){var r=n.color,a=n.intensity;return[r[0]*a,r[1]*a,r[2]*a]}}}}),DirectionalLight=Light.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(n){return n.__dir=n.__dir||new Vector3,n.__dir.copy(n.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(n){var r=n.color,a=n.intensity;return[r[0]*a,r[1]*a,r[2]*a]}}},clone:function(){var n=Light.prototype.clone.call(this);return n.shadowBias=this.shadowBias,n.shadowSlopeScale=this.shadowSlopeScale,n}}),PointLight=Light.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(n){return n.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(n){return n.range}},pointLightColor:{type:"3f",value:function(n){var r=n.color,a=n.intensity;return[r[0]*a,r[1]*a,r[2]*a]}}},clone:function(){var n=Light.prototype.clone.call(this);return n.range=this.range,n}}),SpotLight=Light.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(n){return n.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(n){return n.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(n){return Math.cos(n.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(n){return Math.cos(n.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(n){return n.falloffFactor}},spotLightDirection:{type:"3f",value:function(n){return n.__dir=n.__dir||new Vector3,n.__dir.copy(n.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(n){var r=n.color,a=n.intensity;return[r[0]*a,r[1]*a,r[2]*a]}}},clone:function(){var n=Light.prototype.clone.call(this);return n.range=this.range,n.umbraAngle=this.umbraAngle,n.penumbraAngle=this.penumbraAngle,n.falloffFactor=this.falloffFactor,n.shadowBias=this.shadowBias,n.shadowSlopeScale=this.shadowSlopeScale,n}}),Vector4=function(n,r,a,s){n=n||0,r=r||0,a=a||0,s=s||0,this.array=vec4$1.fromValues(n,r,a,s),this._dirty=!0};Vector4.prototype={constructor:Vector4,add:function(n){return vec4$1.add(this.array,this.array,n.array),this._dirty=!0,this},set:function(n,r,a,s){return this.array[0]=n,this.array[1]=r,this.array[2]=a,this.array[3]=s,this._dirty=!0,this},setArray:function(n){return this.array[0]=n[0],this.array[1]=n[1],this.array[2]=n[2],this.array[3]=n[3],this._dirty=!0,this},clone:function(){return new Vector4(this.x,this.y,this.z,this.w)},copy:function(n){return vec4$1.copy(this.array,n.array),this._dirty=!0,this},dist:function(n){return vec4$1.dist(this.array,n.array)},distance:function(n){return vec4$1.distance(this.array,n.array)},div:function(n){return vec4$1.div(this.array,this.array,n.array),this._dirty=!0,this},divide:function(n){return vec4$1.divide(this.array,this.array,n.array),this._dirty=!0,this},dot:function(n){return vec4$1.dot(this.array,n.array)},len:function(){return vec4$1.len(this.array)},length:function(){return vec4$1.length(this.array)},lerp:function(n,r,a){return vec4$1.lerp(this.array,n.array,r.array,a),this._dirty=!0,this},min:function(n){return vec4$1.min(this.array,this.array,n.array),this._dirty=!0,this},max:function(n){return vec4$1.max(this.array,this.array,n.array),this._dirty=!0,this},mul:function(n){return vec4$1.mul(this.array,this.array,n.array),this._dirty=!0,this},multiply:function(n){return vec4$1.multiply(this.array,this.array,n.array),this._dirty=!0,this},negate:function(){return vec4$1.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return vec4$1.normalize(this.array,this.array),this._dirty=!0,this},random:function(n){return vec4$1.random(this.array,n),this._dirty=!0,this},scale:function(n){return vec4$1.scale(this.array,this.array,n),this._dirty=!0,this},scaleAndAdd:function(n,r){return vec4$1.scaleAndAdd(this.array,this.array,n.array,r),this._dirty=!0,this},sqrDist:function(n){return vec4$1.sqrDist(this.array,n.array)},squaredDistance:function(n){return vec4$1.squaredDistance(this.array,n.array)},sqrLen:function(){return vec4$1.sqrLen(this.array)},squaredLength:function(){return vec4$1.squaredLength(this.array)},sub:function(n){return vec4$1.sub(this.array,this.array,n.array),this._dirty=!0,this},subtract:function(n){return vec4$1.subtract(this.array,this.array,n.array),this._dirty=!0,this},transformMat4:function(n){return vec4$1.transformMat4(this.array,this.array,n.array),this._dirty=!0,this},transformQuat:function(n){return vec4$1.transformQuat(this.array,this.array,n.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var defineProperty=Object.defineProperty;if(defineProperty){var proto=Vector4.prototype;defineProperty(proto,"x",{get:function(){return this.array[0]},set:function(n){this.array[0]=n,this._dirty=!0}}),defineProperty(proto,"y",{get:function(){return this.array[1]},set:function(n){this.array[1]=n,this._dirty=!0}}),defineProperty(proto,"z",{get:function(){return this.array[2]},set:function(n){this.array[2]=n,this._dirty=!0}}),defineProperty(proto,"w",{get:function(){return this.array[3]},set:function(n){this.array[3]=n,this._dirty=!0}})}Vector4.add=function(n,r,a){return vec4$1.add(n.array,r.array,a.array),n._dirty=!0,n};Vector4.set=function(n,r,a,s,o){vec4$1.set(n.array,r,a,s,o),n._dirty=!0};Vector4.copy=function(n,r){return vec4$1.copy(n.array,r.array),n._dirty=!0,n};Vector4.dist=function(n,r){return vec4$1.distance(n.array,r.array)};Vector4.distance=Vector4.dist;Vector4.div=function(n,r,a){return vec4$1.divide(n.array,r.array,a.array),n._dirty=!0,n};Vector4.divide=Vector4.div;Vector4.dot=function(n,r){return vec4$1.dot(n.array,r.array)};Vector4.len=function(n){return vec4$1.length(n.array)};Vector4.lerp=function(n,r,a,s){return vec4$1.lerp(n.array,r.array,a.array,s),n._dirty=!0,n};Vector4.min=function(n,r,a){return vec4$1.min(n.array,r.array,a.array),n._dirty=!0,n};Vector4.max=function(n,r,a){return vec4$1.max(n.array,r.array,a.array),n._dirty=!0,n};Vector4.mul=function(n,r,a){return vec4$1.multiply(n.array,r.array,a.array),n._dirty=!0,n};Vector4.multiply=Vector4.mul;Vector4.negate=function(n,r){return vec4$1.negate(n.array,r.array),n._dirty=!0,n};Vector4.normalize=function(n,r){return vec4$1.normalize(n.array,r.array),n._dirty=!0,n};Vector4.random=function(n,r){return vec4$1.random(n.array,r),n._dirty=!0,n};Vector4.scale=function(n,r,a){return vec4$1.scale(n.array,r.array,a),n._dirty=!0,n};Vector4.scaleAndAdd=function(n,r,a,s){return vec4$1.scaleAndAdd(n.array,r.array,a.array,s),n._dirty=!0,n};Vector4.sqrDist=function(n,r){return vec4$1.sqrDist(n.array,r.array)};Vector4.squaredDistance=Vector4.sqrDist;Vector4.sqrLen=function(n){return vec4$1.sqrLen(n.array)};Vector4.squaredLength=Vector4.sqrLen;Vector4.sub=function(n,r,a){return vec4$1.subtract(n.array,r.array,a.array),n._dirty=!0,n};Vector4.subtract=Vector4.sub;Vector4.transformMat4=function(n,r,a){return vec4$1.transformMat4(n.array,r.array,a.array),n._dirty=!0,n};Vector4.transformQuat=function(n,r,a){return vec4$1.transformQuat(n.array,r.array,a.array),n._dirty=!0,n};var mat2={};mat2.create=function(){var n=new GLMAT_ARRAY_TYPE(4);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n};mat2.clone=function(n){var r=new GLMAT_ARRAY_TYPE(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r};mat2.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n};mat2.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n};mat2.transpose=function(n,r){if(n===r){var a=r[1];n[1]=r[2],n[2]=a}else n[0]=r[0],n[1]=r[2],n[2]=r[1],n[3]=r[3];return n};mat2.invert=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=a*u-o*s;return c?(c=1/c,n[0]=u*c,n[1]=-s*c,n[2]=-o*c,n[3]=a*c,n):null};mat2.adjoint=function(n,r){var a=r[0];return n[0]=r[3],n[1]=-r[1],n[2]=-r[2],n[3]=a,n};mat2.determinant=function(n){return n[0]*n[3]-n[2]*n[1]};mat2.multiply=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=a[0],d=a[1],_=a[2],ja=a[3];return n[0]=s*p+u*d,n[1]=o*p+c*d,n[2]=s*_+u*ja,n[3]=o*_+c*ja,n};mat2.mul=mat2.multiply;mat2.rotate=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=Math.sin(a),d=Math.cos(a);return n[0]=s*d+u*p,n[1]=o*d+c*p,n[2]=s*-p+u*d,n[3]=o*-p+c*d,n};mat2.scale=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=a[0],d=a[1];return n[0]=s*p,n[1]=o*p,n[2]=u*d,n[3]=c*d,n};mat2.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2))};mat2.LDU=function(n,r,a,s){return n[2]=s[2]/s[0],a[0]=s[0],a[1]=s[1],a[3]=s[3]-n[2]*a[1],[n,r,a]};var Matrix2=function(){this.array=mat2.create(),this._dirty=!0};Matrix2.prototype={constructor:Matrix2,setArray:function(n){for(var r=0;r<this.array.length;r++)this.array[r]=n[r];return this._dirty=!0,this},clone:function(){return new Matrix2().copy(this)},copy:function(n){return mat2.copy(this.array,n.array),this._dirty=!0,this},adjoint:function(){return mat2.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return mat2.determinant(this.array)},identity:function(){return mat2.identity(this.array),this._dirty=!0,this},invert:function(){return mat2.invert(this.array,this.array),this._dirty=!0,this},mul:function(n){return mat2.mul(this.array,this.array,n.array),this._dirty=!0,this},mulLeft:function(n){return mat2.mul(this.array,n.array,this.array),this._dirty=!0,this},multiply:function(n){return mat2.multiply(this.array,this.array,n.array),this._dirty=!0,this},multiplyLeft:function(n){return mat2.multiply(this.array,n.array,this.array),this._dirty=!0,this},rotate:function(n){return mat2.rotate(this.array,this.array,n),this._dirty=!0,this},scale:function(n){return mat2.scale(this.array,this.array,n.array),this._dirty=!0,this},transpose:function(){return mat2.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};Matrix2.adjoint=function(n,r){return mat2.adjoint(n.array,r.array),n._dirty=!0,n};Matrix2.copy=function(n,r){return mat2.copy(n.array,r.array),n._dirty=!0,n};Matrix2.determinant=function(n){return mat2.determinant(n.array)};Matrix2.identity=function(n){return mat2.identity(n.array),n._dirty=!0,n};Matrix2.invert=function(n,r){return mat2.invert(n.array,r.array),n._dirty=!0,n};Matrix2.mul=function(n,r,a){return mat2.mul(n.array,r.array,a.array),n._dirty=!0,n};Matrix2.multiply=Matrix2.mul;Matrix2.rotate=function(n,r,a){return mat2.rotate(n.array,r.array,a),n._dirty=!0,n};Matrix2.scale=function(n,r,a){return mat2.scale(n.array,r.array,a.array),n._dirty=!0,n};Matrix2.transpose=function(n,r){return mat2.transpose(n.array,r.array),n._dirty=!0,n};var mat2d={};mat2d.create=function(){var n=new GLMAT_ARRAY_TYPE(6);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n};mat2d.clone=function(n){var r=new GLMAT_ARRAY_TYPE(6);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r};mat2d.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n};mat2d.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n};mat2d.invert=function(n,r){var a=r[0],s=r[1],o=r[2],u=r[3],c=r[4],p=r[5],d=a*u-s*o;return d?(d=1/d,n[0]=u*d,n[1]=-s*d,n[2]=-o*d,n[3]=a*d,n[4]=(o*p-u*c)*d,n[5]=(s*c-a*p)*d,n):null};mat2d.determinant=function(n){return n[0]*n[3]-n[1]*n[2]};mat2d.multiply=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=r[4],d=r[5],_=a[0],ja=a[1],Ja=a[2],ec=a[3],tc=a[4],rc=a[5];return n[0]=s*_+u*ja,n[1]=o*_+c*ja,n[2]=s*Ja+u*ec,n[3]=o*Ja+c*ec,n[4]=s*tc+u*rc+p,n[5]=o*tc+c*rc+d,n};mat2d.mul=mat2d.multiply;mat2d.rotate=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=r[4],d=r[5],_=Math.sin(a),ja=Math.cos(a);return n[0]=s*ja+u*_,n[1]=o*ja+c*_,n[2]=s*-_+u*ja,n[3]=o*-_+c*ja,n[4]=p,n[5]=d,n};mat2d.scale=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=r[4],d=r[5],_=a[0],ja=a[1];return n[0]=s*_,n[1]=o*_,n[2]=u*ja,n[3]=c*ja,n[4]=p,n[5]=d,n};mat2d.translate=function(n,r,a){var s=r[0],o=r[1],u=r[2],c=r[3],p=r[4],d=r[5],_=a[0],ja=a[1];return n[0]=s,n[1]=o,n[2]=u,n[3]=c,n[4]=s*_+u*ja+p,n[5]=o*_+c*ja+d,n};mat2d.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+1)};var Matrix2d=function(){this.array=mat2d.create(),this._dirty=!0};Matrix2d.prototype={constructor:Matrix2d,setArray:function(n){for(var r=0;r<this.array.length;r++)this.array[r]=n[r];return this._dirty=!0,this},clone:function(){return new Matrix2d().copy(this)},copy:function(n){return mat2d.copy(this.array,n.array),this._dirty=!0,this},determinant:function(){return mat2d.determinant(this.array)},identity:function(){return mat2d.identity(this.array),this._dirty=!0,this},invert:function(){return mat2d.invert(this.array,this.array),this._dirty=!0,this},mul:function(n){return mat2d.mul(this.array,this.array,n.array),this._dirty=!0,this},mulLeft:function(n){return mat2d.mul(this.array,n.array,this.array),this._dirty=!0,this},multiply:function(n){return mat2d.multiply(this.array,this.array,n.array),this._dirty=!0,this},multiplyLeft:function(n){return mat2d.multiply(this.array,n.array,this.array),this._dirty=!0,this},rotate:function(n){return mat2d.rotate(this.array,this.array,n),this._dirty=!0,this},scale:function(n){return mat2d.scale(this.array,this.array,n.array),this._dirty=!0,this},translate:function(n){return mat2d.translate(this.array,this.array,n.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};Matrix2d.copy=function(n,r){return mat2d.copy(n.array,r.array),n._dirty=!0,n};Matrix2d.determinant=function(n){return mat2d.determinant(n.array)};Matrix2d.identity=function(n){return mat2d.identity(n.array),n._dirty=!0,n};Matrix2d.invert=function(n,r){return mat2d.invert(n.array,r.array),n._dirty=!0,n};Matrix2d.mul=function(n,r,a){return mat2d.mul(n.array,r.array,a.array),n._dirty=!0,n};Matrix2d.multiply=Matrix2d.mul;Matrix2d.rotate=function(n,r,a){return mat2d.rotate(n.array,r.array,a),n._dirty=!0,n};Matrix2d.scale=function(n,r,a){return mat2d.scale(n.array,r.array,a.array),n._dirty=!0,n};Matrix2d.translate=function(n,r,a){return mat2d.translate(n.array,r.array,a.array),n._dirty=!0,n};var Matrix3=function(){this.array=mat3$1.create(),this._dirty=!0};Matrix3.prototype={constructor:Matrix3,setArray:function(n){for(var r=0;r<this.array.length;r++)this.array[r]=n[r];return this._dirty=!0,this},adjoint:function(){return mat3$1.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new Matrix3().copy(this)},copy:function(n){return mat3$1.copy(this.array,n.array),this._dirty=!0,this},determinant:function(){return mat3$1.determinant(this.array)},fromMat2d:function(n){return mat3$1.fromMat2d(this.array,n.array),this._dirty=!0,this},fromMat4:function(n){return mat3$1.fromMat4(this.array,n.array),this._dirty=!0,this},fromQuat:function(n){return mat3$1.fromQuat(this.array,n.array),this._dirty=!0,this},identity:function(){return mat3$1.identity(this.array),this._dirty=!0,this},invert:function(){return mat3$1.invert(this.array,this.array),this._dirty=!0,this},mul:function(n){return mat3$1.mul(this.array,this.array,n.array),this._dirty=!0,this},mulLeft:function(n){return mat3$1.mul(this.array,n.array,this.array),this._dirty=!0,this},multiply:function(n){return mat3$1.multiply(this.array,this.array,n.array),this._dirty=!0,this},multiplyLeft:function(n){return mat3$1.multiply(this.array,n.array,this.array),this._dirty=!0,this},rotate:function(n){return mat3$1.rotate(this.array,this.array,n),this._dirty=!0,this},scale:function(n){return mat3$1.scale(this.array,this.array,n.array),this._dirty=!0,this},translate:function(n){return mat3$1.translate(this.array,this.array,n.array),this._dirty=!0,this},normalFromMat4:function(n){return mat3$1.normalFromMat4(this.array,n.array),this._dirty=!0,this},transpose:function(){return mat3$1.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};Matrix3.adjoint=function(n,r){return mat3$1.adjoint(n.array,r.array),n._dirty=!0,n};Matrix3.copy=function(n,r){return mat3$1.copy(n.array,r.array),n._dirty=!0,n};Matrix3.determinant=function(n){return mat3$1.determinant(n.array)};Matrix3.identity=function(n){return mat3$1.identity(n.array),n._dirty=!0,n};Matrix3.invert=function(n,r){return mat3$1.invert(n.array,r.array),n};Matrix3.mul=function(n,r,a){return mat3$1.mul(n.array,r.array,a.array),n._dirty=!0,n};Matrix3.multiply=Matrix3.mul;Matrix3.fromMat2d=function(n,r){return mat3$1.fromMat2d(n.array,r.array),n._dirty=!0,n};Matrix3.fromMat4=function(n,r){return mat3$1.fromMat4(n.array,r.array),n._dirty=!0,n};Matrix3.fromQuat=function(n,r){return mat3$1.fromQuat(n.array,r.array),n._dirty=!0,n};Matrix3.normalFromMat4=function(n,r){return mat3$1.normalFromMat4(n.array,r.array),n._dirty=!0,n};Matrix3.rotate=function(n,r,a){return mat3$1.rotate(n.array,r.array,a),n._dirty=!0,n};Matrix3.scale=function(n,r,a){return mat3$1.scale(n.array,r.array,a.array),n._dirty=!0,n};Matrix3.transpose=function(n,r){return mat3$1.transpose(n.array,r.array),n._dirty=!0,n};Matrix3.translate=function(n,r,a){return mat3$1.translate(n.array,r.array,a.array),n._dirty=!0,n};var animatableMixin={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(n,r){this._animators=this._animators||[];var a=this,s;if(n){for(var o=n.split("."),u=a,c=0,p=o.length;c<p;c++)u&&(u=u[o[c]]);u&&(s=u)}else s=a;if(s==null)throw new Error("Target "+n+" not exists");var d=this._animators,_=new Animator$1(s,r),ja=this;return _.during(function(){ja.__zr&&ja.__zr.refresh()}).done(function(){var Ja=d.indexOf(_);Ja>=0&&d.splice(Ja,1)}),d.push(_),this.__zr&&this.__zr.animation.addAnimator(_),_},stopAnimation:function(n){this._animators=this._animators||[];for(var r=this._animators,a=r.length,s=0;s<a;s++)r[s].stop(n);return r.length=0,this},addAnimatorsToZr:function(n){if(this._animators)for(var r=0;r<this._animators.length;r++)n.animation.addAnimator(this._animators[r])},removeAnimatorsFromZr:function(n){if(this._animators)for(var r=0;r<this._animators.length;r++)n.animation.removeAnimator(this._animators[r])}};const utilShaderCode=`
@export clay.util.rand
highp float rand(vec2 uv) {
 const highp float a = 12.9898, b = 78.233, c = 43758.5453;
 highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);
 return fract(sin(sn) * c);
}
@end
@export clay.util.calculate_attenuation
uniform float attenuationFactor : 5.0;
float lightAttenuation(float dist, float range)
{
 float attenuation = 1.0;
 attenuation = dist*dist/(range*range+1.0);
 float att_s = attenuationFactor;
 attenuation = 1.0/(attenuation*att_s+1.0);
 att_s = 1.0/(att_s+1.0);
 attenuation = attenuation - att_s;
 attenuation /= 1.0 - att_s;
 return clamp(attenuation, 0.0, 1.0);
}
@end
@export clay.util.edge_factor
#ifdef SUPPORT_STANDARD_DERIVATIVES
float edgeFactor(float width)
{
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#else
float edgeFactor(float width)
{
 return 1.0;
}
#endif
@end
@export clay.util.encode_float
vec4 encodeFloat(const in float depth)
{
 const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
 const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
 vec4 res = fract(depth * bitShifts);
 res -= res.xxyz * bit_mask;
 return res;
}
@end
@export clay.util.decode_float
float decodeFloat(const in vec4 color)
{
 const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);
 return dot(color, bitShifts);
}
@end
@export clay.util.float
@import clay.util.encode_float
@import clay.util.decode_float
@end
@export clay.util.rgbm_decode
vec3 RGBMDecode(vec4 rgbm, float range) {
 return range * rgbm.rgb * rgbm.a;
}
@end
@export clay.util.rgbm_encode
vec4 RGBMEncode(vec3 color, float range) {
 if (dot(color, color) == 0.0) {
 return vec4(0.0);
 }
 vec4 rgbm;
 color /= range;
 rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);
 rgbm.a = ceil(rgbm.a * 255.0) / 255.0;
 rgbm.rgb = color / rgbm.a;
 return rgbm;
}
@end
@export clay.util.rgbm
@import clay.util.rgbm_decode
@import clay.util.rgbm_encode
vec4 decodeHDR(vec4 color)
{
#if defined(RGBM_DECODE) || defined(RGBM)
 return vec4(RGBMDecode(color, 8.12), 1.0);
#else
 return color;
#endif
}
vec4 encodeHDR(vec4 color)
{
#if defined(RGBM_ENCODE) || defined(RGBM)
 return RGBMEncode(color.xyz, 8.12);
#else
 return color;
#endif
}
@end
@export clay.util.srgb
vec4 sRGBToLinear(in vec4 value) {
 return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);
}
vec4 linearTosRGB(in vec4 value) {
 return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);
}
@end
@export clay.chunk.skinning_header
#ifdef SKINNING
attribute vec3 weight : WEIGHT;
attribute vec4 joint : JOINT;
#ifdef USE_SKIN_MATRICES_TEXTURE
uniform sampler2D skinMatricesTexture : ignore;
uniform float skinMatricesTextureSize: ignore;
mat4 getSkinMatrix(sampler2D tex, float idx) {
 float j = idx * 4.0;
 float x = mod(j, skinMatricesTextureSize);
 float y = floor(j / skinMatricesTextureSize) + 0.5;
 vec2 scale = vec2(skinMatricesTextureSize);
 return mat4(
 texture2D(tex, vec2(x + 0.5, y) / scale),
 texture2D(tex, vec2(x + 1.5, y) / scale),
 texture2D(tex, vec2(x + 2.5, y) / scale),
 texture2D(tex, vec2(x + 3.5, y) / scale)
 );
}
mat4 getSkinMatrix(float idx) {
 return getSkinMatrix(skinMatricesTexture, idx);
}
#else
uniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;
mat4 getSkinMatrix(float idx) {
 return skinMatrix[int(idx)];
}
#endif
#endif
@end
@export clay.chunk.skin_matrix
mat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;
if (weight.y > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.y) * weight.y;
}
if (weight.z > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.z) * weight.z;
}
float weightW = 1.0-weight.x-weight.y-weight.z;
if (weightW > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.w) * weightW;
}
@end
@export clay.chunk.instancing_header
#ifdef INSTANCING
attribute vec4 instanceMat1;
attribute vec4 instanceMat2;
attribute vec4 instanceMat3;
#endif
@end
@export clay.chunk.instancing_matrix
mat4 instanceMat = mat4(
 vec4(instanceMat1.xyz, 0.0),
 vec4(instanceMat2.xyz, 0.0),
 vec4(instanceMat3.xyz, 0.0),
 vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)
);
@end
@export clay.util.parallax_correct
vec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {
 vec3 first = (boxMax - pos) / dir;
 vec3 second = (boxMin - pos) / dir;
 vec3 further = max(first, second);
 float dist = min(further.x, min(further.y, further.z));
 vec3 fixedPos = pos + dir * dist;
 vec3 boxCenter = (boxMax + boxMin) * 0.5;
 return normalize(fixedPos - boxCenter);
}
@end
@export clay.util.clamp_sample
vec4 clampSample(const in sampler2D texture, const in vec2 coord)
{
#ifdef STEREO
 float eye = step(0.5, coord.x) * 0.5;
 vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));
#else
 vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));
#endif
 return texture2D(texture, coordClamped);
}
@end
@export clay.util.ACES
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
@end`,commonGLSL=`
@export ecgl.common.transformUniforms
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
uniform mat4 world : WORLD;
@end

@export ecgl.common.attributes
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 normal : NORMAL;
@end

@export ecgl.common.uv.header
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
uniform vec2 detailUvRepeat : [1.0, 1.0];
uniform vec2 detailUvOffset : [0.0, 0.0];

varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end

@export ecgl.common.uv.main
v_Texcoord = texcoord * uvRepeat + uvOffset;
v_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;
@end

@export ecgl.common.uv.fragmentHeader
varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end


@export ecgl.common.albedo.main

 vec4 albedoTexel = vec4(1.0);
#ifdef DIFFUSEMAP_ENABLED
 albedoTexel = texture2D(diffuseMap, v_Texcoord);
 #ifdef SRGB_DECODE
 albedoTexel = sRGBToLinear(albedoTexel);
 #endif
#endif

#ifdef DETAILMAP_ENABLED
 vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);
 #ifdef SRGB_DECODE
 detailTexel = sRGBToLinear(detailTexel);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);
 albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;
#endif

@end

@export ecgl.common.wireframe.vertexHeader

#ifdef WIREFRAME_QUAD
attribute vec4 barycentric;
varying vec4 v_Barycentric;
#elif defined(WIREFRAME_TRIANGLE)
attribute vec3 barycentric;
varying vec3 v_Barycentric;
#endif

@end

@export ecgl.common.wireframe.vertexMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 v_Barycentric = barycentric;
#endif

@end


@export ecgl.common.wireframe.fragmentHeader

uniform float wireframeLineWidth : 1;
uniform vec4 wireframeLineColor: [0, 0, 0, 0.5];

#ifdef WIREFRAME_QUAD
varying vec4 v_Barycentric;
float edgeFactor () {
 vec4 d = fwidth(v_Barycentric);
 vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(min(a4.x, a4.y), a4.z), a4.w);
}
#elif defined(WIREFRAME_TRIANGLE)
varying vec3 v_Barycentric;
float edgeFactor () {
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#endif

@end


@export ecgl.common.wireframe.fragmentMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 if (wireframeLineWidth > 0.) {
 vec4 lineColor = wireframeLineColor;
#ifdef SRGB_DECODE
 lineColor = sRGBToLinear(lineColor);
#endif

 gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);
 }
#endif
@end




@export ecgl.common.bumpMap.header

#ifdef BUMPMAP_ENABLED
uniform sampler2D bumpMap;
uniform float bumpScale : 1.0;


vec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)
{
 vec2 dSTdx = dFdx(v_Texcoord);
 vec2 dSTdy = dFdy(v_Texcoord);

 float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;
 float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;
 float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;

 vec3 vSigmaX = dFdx(surfPos);
 vec3 vSigmaY = dFdy(surfPos);
 vec3 vN = surfNormal;

 vec3 R1 = cross(vSigmaY, vN);
 vec3 R2 = cross(vN, vSigmaX);

 float fDet = dot(vSigmaX, R1);

 vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);
 return normalize(abs(fDet) * baseNormal - vGrad);

}
#endif

@end

@export ecgl.common.normalMap.vertexHeader

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.vertexMain

#ifdef NORMALMAP_ENABLED
 if (dot(tangent, tangent) > 0.0) {
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
 }
#endif

@end


@export ecgl.common.normalMap.fragmentHeader

#ifdef NORMALMAP_ENABLED
uniform sampler2D normalMap;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.fragmentMain
#ifdef NORMALMAP_ENABLED
 if (dot(v_Tangent, v_Tangent) > 0.0) {
 vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;
 if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;
 mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);
 N = normalize(tbn * N);
 }
 }
#endif
@end



@export ecgl.common.vertexAnimation.header

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevNormal;
uniform float percent;
#endif

@end

@export ecgl.common.vertexAnimation.main

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 vec3 norm = mix(prevNormal, normal, percent);
#else
 vec3 pos = position;
 vec3 norm = normal;
#endif

@end


@export ecgl.common.ssaoMap.header
#ifdef SSAOMAP_ENABLED
uniform sampler2D ssaoMap;
uniform vec4 viewport : VIEWPORT;
#endif
@end

@export ecgl.common.ssaoMap.main
 float ao = 1.0;
#ifdef SSAOMAP_ENABLED
 ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;
#endif
@end




@export ecgl.common.diffuseLayer.header

#if (LAYER_DIFFUSEMAP_COUNT > 0)
uniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];
uniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];
#endif

@end

@export ecgl.common.emissiveLayer.header

#if (LAYER_EMISSIVEMAP_COUNT > 0)
uniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];
uniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];
#endif

@end

@export ecgl.common.layers.header
@import ecgl.common.diffuseLayer.header
@import ecgl.common.emissiveLayer.header
@end

@export ecgl.common.diffuseLayer.main

#if (LAYER_DIFFUSEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{
 float intensity = layerDiffuseIntensity[_idx_];
 vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);
 albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;
 }}
#endif

@end

@export ecgl.common.emissiveLayer.main

#if (LAYER_EMISSIVEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)
 {{
 vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 float intensity = layerEmissionIntensity[_idx_];
 gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;
 }}
#endif

@end
`,colorGLSL=`@export ecgl.color.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

@import ecgl.common.uv.header

attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 position: POSITION;

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

#ifdef ATMOSPHERE_ENABLED
attribute vec3 normal: NORMAL;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
varying vec3 v_Normal;
#endif

void main()
{
#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 @import ecgl.common.uv.main

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef ATMOSPHERE_ENABLED
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end

@export ecgl.color.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
varying vec3 v_Normal;
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.layers.header

@import ecgl.common.uv.fragmentHeader

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain

}
@end`,lambertGLSL=`/**
 * http: */

@export ecgl.lambert.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header


@import ecgl.common.attributes

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif


@import ecgl.common.vertexAnimation.header


varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{
 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main


 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain
}

@end


@export ecgl.lambert.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 gl_FragColor *= sRGBToLinear(v_Color);
 #else
 gl_FragColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseColor = vec3(0.0, 0.0, 0.0);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 diffuseColor += ambientLightColor[i] * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 vec3 lightColor = directionalLightColor[i];

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor.rgb *= diffuseColor;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,realisticGLSL=`@export ecgl.realistic.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes


@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@import ecgl.common.vertexAnimation.header

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{

 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef NORMALMAP_ENABLED
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end



@export ecgl.realistic.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0
#define PI 3.14159265358979
#define ROUGHNESS_CHANEL 0
#define METALNESS_CHANEL 1

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;

uniform sampler2D detailMap;
uniform sampler2D metalnessMap;
uniform sampler2D roughnessMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform float metalness : 0.0;
uniform float roughness : 0.5;

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
@import clay.header.ambient_cubemap_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.normalMap.fragmentHeader

@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import clay.util.rgbm

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}

float D_Phong(float g, float ndh) {
 float a = pow(8192.0, g);
 return (a + 2.0) / 8.0 * pow(ndh, a);
}

void main()
{
 vec4 albedoColor = color;

 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);
#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 albedoColor *= sRGBToLinear(v_Color);
 #else
 albedoColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 albedoColor *= albedoTexel;

 float m = metalness;

#ifdef METALNESSMAP_ENABLED
 float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];
 m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 baseColor = albedoColor.rgb;
 albedoColor.rgb = baseColor * (1.0 - m);
 vec3 specFactor = mix(vec3(0.04), baseColor, m);

 float g = 1.0 - roughness;

#ifdef ROUGHNESSMAP_ENABLED
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 N = v_Normal;

#ifdef DOUBLE_SIDED
 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

@import ecgl.common.normalMap.fragmentMain

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseTerm = vec3(0.0);
 vec3 specularTerm = vec3(0.0);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 vec3 fresnelTerm = F_Schlick(ndv, specFactor);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;
 }}
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)
 {{
 vec3 L = -directionalLightDirection[_idx_];
 vec3 lc = directionalLightColor[_idx_];

 vec3 H = normalize(L + V);
 float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[_idx_];
 }
#endif

 vec3 li = lc * ndl * shadowContrib;

 diffuseTerm += li;
 specularTerm += li * fresnelTerm * D_Phong(g, ndh);
 }}
#endif


#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
 vec3 L = reflect(-V, N);
 L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);
 float rough2 = clamp(1.0 - g, 0.0, 1.0);
 float bias2 = rough2 * 5.0;
 vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;
 vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;
 vec3 envTexel2;
 for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)
 {{
 envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);
 specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;
 }}
#endif

 gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;
 gl_FragColor.a = albedoColor.a;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

#ifdef SRGB_ENCODE
 gl_FragColor = linearTosRGB(gl_FragColor);
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,hatchingGLSL=`@export ecgl.hatching.vertex

@import ecgl.realistic.vertex

@end


@export ecgl.hatching.fragment

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform vec4 color : [0.0, 0.0, 0.0, 1.0];
uniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

uniform sampler2D hatch1;
uniform sampler2D hatch2;
uniform sampler2D hatch3;
uniform sampler2D hatch4;
uniform sampler2D hatch5;
uniform sampler2D hatch6;

float shade(in float tone) {
 vec4 c = vec4(1. ,1., 1., 1.);
 float step = 1. / 6.;
 vec2 uv = v_DetailTexcoord;
 if (tone <= step / 2.0) {
 c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);
 }
 else if (tone <= step) {
 c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);
 }
 if(tone > step && tone <= 2. * step){
 c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));
 }
 if(tone > 2. * step && tone <= 3. * step){
 c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));
 }
 if(tone > 3. * step && tone <= 4. * step){
 c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));
 }
 if(tone > 4. * step && tone <= 5. * step){
 c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));
 }
 if(tone > 5. * step){
 c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));
 }

 return c.r;
}

const vec3 w = vec3(0.2125, 0.7154, 0.0721);

void main()
{
#ifdef SRGB_DECODE
 vec4 inkColor = sRGBToLinear(color);
#else
 vec4 inkColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 inkColor *= sRGBToLinear(v_Color);
 #else
 inkColor *= v_Color;
 #endif
#endif

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float tone = 0.0;

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 tone += dot(ambientLightColor[i], w) * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 float lightTone = dot(directionalLightColor[i], w);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 tone += lightTone * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));
 }
@end
`,shadowGLSL=`@export ecgl.sm.depth.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;

void main(){

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 v_ViewPosition = worldViewProjection * vec4(pos, 1.0);
 gl_Position = v_ViewPosition;

 v_Texcoord = texcoord;

}
@end



@export ecgl.sm.depth.fragment

@import clay.sm.depth.fragment

@end`;Object.assign(Node$1.prototype,animatableMixin);Shader.import(utilShaderCode);Shader.import(prezGLSL);Shader.import(commonGLSL);Shader.import(colorGLSL);Shader.import(lambertGLSL);Shader.import(realisticGLSL);Shader.import(hatchingGLSL);Shader.import(shadowGLSL);function isValueNone(n){return!n||n==="none"}function isValueImage(n){return n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof Image}function isECharts(n){return n.getZr&&n.setOption}var oldAddToScene=Scene.prototype.addToScene,oldRemoveFromScene=Scene.prototype.removeFromScene;Scene.prototype.addToScene=function(n){if(oldAddToScene.call(this,n),this.__zr){var r=this.__zr;n.traverse(function(a){a.__zr=r,a.addAnimatorsToZr&&a.addAnimatorsToZr(r)})}};Scene.prototype.removeFromScene=function(n){oldRemoveFromScene.call(this,n),n.traverse(function(r){var a=r.__zr;r.__zr=null,a&&r.removeAnimatorsFromZr&&r.removeAnimatorsFromZr(a)})};Material.prototype.setTextureImage=function(n,r,a,s){if(this.shader){var o=a.getZr(),u=this,c;return u.autoUpdateTextureStatus=!1,u.disableTexture(n),isValueNone(r)||(c=graphicGL.loadTexture(r,a,s,function(p){u.enableTexture(n),o&&o.refresh()}),u.set(n,c)),c}};var graphicGL={};graphicGL.Renderer=Renderer;graphicGL.Node=Node$1;graphicGL.Mesh=Mesh;graphicGL.Shader=Shader;graphicGL.Material=Material;graphicGL.Texture=Texture;graphicGL.Texture2D=Texture2D;graphicGL.Geometry=Geometry;graphicGL.SphereGeometry=Sphere;graphicGL.PlaneGeometry=Plane;graphicGL.CubeGeometry=Cube;graphicGL.AmbientLight=AmbientLight;graphicGL.DirectionalLight=DirectionalLight;graphicGL.PointLight=PointLight;graphicGL.SpotLight=SpotLight;graphicGL.PerspectiveCamera=Perspective;graphicGL.OrthographicCamera=Orthographic;graphicGL.Vector2=Vector2;graphicGL.Vector3=Vector3;graphicGL.Vector4=Vector4;graphicGL.Quaternion=Quaternion;graphicGL.Matrix2=Matrix2;graphicGL.Matrix2d=Matrix2d;graphicGL.Matrix3=Matrix3;graphicGL.Matrix4=Matrix4;graphicGL.Plane=Plane$1;graphicGL.Ray=Ray;graphicGL.BoundingBox=BoundingBox;graphicGL.Frustum=Frustum;var blankImage=null;function getBlankImage(){return blankImage!==null||(blankImage=textureUtil.createBlank("rgba(255,255,255,0)").image),blankImage}function nearestPowerOfTwo(n){return Math.pow(2,Math.round(Math.log(n)/Math.LN2))}function convertTextureToPowerOfTwo(n){if((n.wrapS===Texture.REPEAT||n.wrapT===Texture.REPEAT)&&n.image){var r=nearestPowerOfTwo(n.width),a=nearestPowerOfTwo(n.height);if(r!==n.width||a!==n.height){var s=document.createElement("canvas");s.width=r,s.height=a;var o=s.getContext("2d");o.drawImage(n.image,0,0,r,a),n.image=s}}}graphicGL.loadTexture=function(n,r,a,s){typeof a=="function"&&(s=a,a={}),a=a||{};for(var o=Object.keys(a).sort(),u="",c=0;c<o.length;c++)u+=o[c]+"_"+a[o[c]]+"_";var p=r.__textureCache=r.__textureCache||new LRU$1(20);if(isECharts(n)){var d=n.__textureid__,_=p.get(u+d);if(_)_.texture.surface.setECharts(n),s&&s(_.texture);else{var ja=new EChartsSurface(n);ja.onupdate=function(){r.getZr().refresh()},_={texture:ja.getTexture()};for(var c=0;c<o.length;c++)_.texture[o[c]]=a[o[c]];d=n.__textureid__||"__ecgl_ec__"+_.texture.__uid__,n.__textureid__=d,p.put(u+d,_),s&&s(_.texture)}return _.texture}else if(isValueImage(n)){var d=n.__textureid__,_=p.get(u+d);if(!_){_={texture:new graphicGL.Texture2D({image:n})};for(var c=0;c<o.length;c++)_.texture[o[c]]=a[o[c]];d=n.__textureid__||"__ecgl_image__"+_.texture.__uid__,n.__textureid__=d,p.put(u+d,_),convertTextureToPowerOfTwo(_.texture),s&&s(_.texture)}return _.texture}else{var _=p.get(u+n);if(_)_.callbacks?_.callbacks.push(s):s&&s(_.texture);else if(n.match(/.hdr$|^data:application\/octet-stream/)){_={callbacks:[s]};var Ja=textureUtil.loadTexture(n,{exposure:a.exposure,fileType:"hdr"},function(){Ja.dirty(),_.callbacks.forEach(function(rc){rc&&rc(Ja)}),_.callbacks=null});_.texture=Ja,p.put(u+n,_)}else{for(var Ja=new graphicGL.Texture2D({image:new Image}),c=0;c<o.length;c++)Ja[o[c]]=a[o[c]];_={texture:Ja,callbacks:[s]};var ec=Ja.image;ec.onload=function(){Ja.image=ec,convertTextureToPowerOfTwo(Ja),Ja.dirty(),_.callbacks.forEach(function(nc){nc&&nc(Ja)}),_.callbacks=null},ec.crossOrigin="Anonymous",ec.src=n,Ja.image=getBlankImage(),p.put(u+n,_)}return _.texture}};graphicGL.createAmbientCubemap=function(n,r,a,s){n=n||{};var o=n.texture,u=retrieve.firstNotNull(n.exposure,1),c=new AmbientCubemapLight({intensity:retrieve.firstNotNull(n.specularIntensity,1)}),p=new AmbientSHLight({intensity:retrieve.firstNotNull(n.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return c.cubemap=graphicGL.loadTexture(o,a,{exposure:u},function(){c.cubemap.flipY=!1,c.prefilter(r,32),p.coefficients=sh.projectEnvironmentMap(r,c.cubemap,{lod:1}),s&&s()}),{specular:c,diffuse:p}};graphicGL.createBlankTexture=textureUtil.createBlank;graphicGL.isImage=isValueImage;graphicGL.additiveBlend=function(n){n.blendEquation(n.FUNC_ADD),n.blendFunc(n.SRC_ALPHA,n.ONE)};graphicGL.parseColor=function(n,r){return n instanceof Array?(r||(r=[]),r[0]=n[0],r[1]=n[1],r[2]=n[2],n.length>3?r[3]=n[3]:r[3]=1,r):(r=parse(n||"#000",r)||[0,0,0,0],r[0]/=255,r[1]/=255,r[2]/=255,r)};graphicGL.directionFromAlphaBeta=function(n,r){var a=n/180*Math.PI+Math.PI/2,s=-r/180*Math.PI+Math.PI/2,o=[],u=Math.sin(a);return o[0]=u*Math.cos(s),o[1]=-Math.cos(a),o[2]=u*Math.sin(s),o};graphicGL.getShadowResolution=function(n){var r=1024;switch(n){case"low":r=512;break;case"medium":break;case"high":r=2048;break;case"ultra":r=4096;break}return r};graphicGL.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"];graphicGL.createShader=function(n){n==="ecgl.shadow"&&(n="ecgl.displayShadow");var r=Shader.source(n+".vertex"),a=Shader.source(n+".fragment");r||console.error("Vertex shader of '%s' not exits",n),a||console.error("Fragment shader of '%s' not exits",n);var s=new Shader(r,a);return s.name=n,s};graphicGL.createMaterial=function(n,r){r instanceof Array||(r=[r]);var a=graphicGL.createShader(n),s=new Material({shader:a});return r.forEach(function(o){typeof o=="string"&&s.define(o)}),s};graphicGL.setMaterialFromModel=function(n,r,a,s){r.autoUpdateTextureStatus=!1;var o=a.getModel(n+"Material"),u=o.get("detailTexture"),c=retrieve.firstNotNull(o.get("textureTiling"),1),p=retrieve.firstNotNull(o.get("textureOffset"),0);typeof c=="number"&&(c=[c,c]),typeof p=="number"&&(p=[p,p]);var d=c[0]>1||c[1]>1?graphicGL.Texture.REPEAT:graphicGL.Texture.CLAMP_TO_EDGE,_={anisotropic:8,wrapS:d,wrapT:d};if(n==="realistic"){var ja=o.get("roughness"),Ja=o.get("metalness");Ja!=null?isNaN(Ja)&&(r.setTextureImage("metalnessMap",Ja,s,_),Ja=retrieve.firstNotNull(o.get("metalnessAdjust"),.5)):Ja=0,ja!=null?isNaN(ja)&&(r.setTextureImage("roughnessMap",ja,s,_),ja=retrieve.firstNotNull(o.get("roughnessAdjust"),.5)):ja=.5;var ec=o.get("normalTexture");r.setTextureImage("detailMap",u,s,_),r.setTextureImage("normalMap",ec,s,_),r.set({roughness:ja,metalness:Ja,detailUvRepeat:c,detailUvOffset:p})}else if(n==="lambert")r.setTextureImage("detailMap",u,s,_),r.set({detailUvRepeat:c,detailUvOffset:p});else if(n==="color")r.setTextureImage("detailMap",u,s,_),r.set({detailUvRepeat:c,detailUvOffset:p});else if(n==="hatching"){var tc=o.get("hatchingTextures")||[];tc.length<6;for(var rc=0;rc<6;rc++)r.setTextureImage("hatch"+(rc+1),tc[rc],s,{anisotropic:8,wrapS:graphicGL.Texture.REPEAT,wrapT:graphicGL.Texture.REPEAT});r.set({detailUvRepeat:c,detailUvOffset:p})}};graphicGL.updateVertexAnimation=function(n,r,a,s){var o=s.get("animation"),u=s.get("animationDurationUpdate"),c=s.get("animationEasingUpdate"),p=a.shadowDepthMaterial;if(o&&r&&u>0&&r.geometry.vertexCount===a.geometry.vertexCount){a.material.define("vertex","VERTEX_ANIMATION"),a.ignorePreZ=!0,p&&p.define("vertex","VERTEX_ANIMATION");for(var d=0;d<n.length;d++)a.geometry.attributes[n[d][0]].value=r.geometry.attributes[n[d][1]].value;a.geometry.dirty(),a.__percent=0,a.material.set("percent",0),a.stopAnimation(),a.animate().when(u,{__percent:1}).during(function(){a.material.set("percent",a.__percent),p&&p.set("percent",a.__percent)}).done(function(){a.ignorePreZ=!1,a.material.undefine("vertex","VERTEX_ANIMATION"),p&&p.undefine("vertex","VERTEX_ANIMATION")}).start(c)}else a.material.undefine("vertex","VERTEX_ANIMATION"),p&&p.undefine("vertex","VERTEX_ANIMATION")};var LayerGL=function(n,r){this.id=n,this.zr=r;try{this.renderer=new Renderer({clearBit:0,devicePixelRatio:r.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(r.painter.getWidth(),r.painter.getHeight())}catch(s){this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",console.error(s);return}this.onglobalout=this.onglobalout.bind(this),r.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var a=this.dom.style;a.position="absolute",a.left="0",a.top="0",this.views=[],this._picking=new RayPicking({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new Rect$2({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};LayerGL.prototype.setUnpainted=function(){};LayerGL.prototype.addView=function(n){if(n.layer!==this){var r=this._viewsToDispose.indexOf(n);r>=0&&this._viewsToDispose.splice(r,1),this.views.push(n),n.layer=this;var a=this.zr;n.scene.traverse(function(s){s.__zr=a,s.addAnimatorsToZr&&s.addAnimatorsToZr(a)})}};function removeFromZr(n){var r=n.__zr;n.__zr=null,r&&n.removeAnimatorsFromZr&&n.removeAnimatorsFromZr(r)}LayerGL.prototype.removeView=function(n){if(n.layer===this){var r=this.views.indexOf(n);r>=0&&(this.views.splice(r,1),n.scene.traverse(removeFromZr,this),n.layer=null,this._viewsToDispose.push(n))}};LayerGL.prototype.removeViewsAll=function(){this.views.forEach(function(n){n.scene.traverse(removeFromZr,this),n.layer=null,this._viewsToDispose.push(n)},this),this.views.length=0};LayerGL.prototype.resize=function(n,r){var a=this.renderer;a.resize(n,r)};LayerGL.prototype.clear=function(){var n=this.renderer.gl,r=this._backgroundColor||[0,0,0,0];n.clearColor(r[0],r[1],r[2],r[3]),n.depthMask(!0),n.colorMask(!0,!0,!0,!0),n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT)};LayerGL.prototype.clearDepth=function(){var n=this.renderer.gl;n.clear(n.DEPTH_BUFFER_BIT)};LayerGL.prototype.clearColor=function(){var n=this.renderer.gl;n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)};LayerGL.prototype.needsRefresh=function(){this.zr.refresh()};LayerGL.prototype.refresh=function(n){this._backgroundColor=n?graphicGL.parseColor(n):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var r=0;r<this.views.length;r++)this.views[r].prepareRender(this.renderer);this._doRender(!1),this._trackAndClean();for(var r=0;r<this._viewsToDispose.length;r++)this._viewsToDispose[r].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()};LayerGL.prototype.renderToCanvas=function(n){this._startAccumulating(!0),n.drawImage(this.dom,0,0,n.canvas.width,n.canvas.height)};LayerGL.prototype._doRender=function(n){this.clear(),this.renderer.saveViewport();for(var r=0;r<this.views.length;r++)this.views[r].render(this.renderer,n);this.renderer.restoreViewport()};LayerGL.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var accumulatingId=1;LayerGL.prototype._startAccumulating=function(n){var r=this;this._stopAccumulating();for(var a=!1,s=0;s<this.views.length;s++)a=this.views[s].needsAccumulate()||a;if(!a)return;function o(u){if(!(!r._accumulatingId||u!==r._accumulatingId)){for(var c=!0,p=0;p<r.views.length;p++)c=r.views[p].isAccumulateFinished()&&a;c||(r._doRender(!0),n?o(u):requestAnimationFrame$1(function(){o(u)}))}}this._accumulatingId=accumulatingId++,n?o(r._accumulatingId):this._accumulatingTimeout=setTimeout(function(){o(r._accumulatingId)},50)};LayerGL.prototype._trackAndClean=function(){var n=[],r=[];this._textureList&&(markUnused(this._textureList),markUnused(this._geometriesList));for(var a=0;a<this.views.length;a++)collectResources(this.views[a].scene,n,r);this._textureList&&(checkAndDispose(this.renderer,this._textureList),checkAndDispose(this.renderer,this._geometriesList)),this._textureList=n,this._geometriesList=r};function markUnused(n){for(var r=0;r<n.length;r++)n[r].__used__=0}function checkAndDispose(n,r){for(var a=0;a<r.length;a++)r[a].__used__||r[a].dispose(n)}function updateUsed(n,r){n.__used__=n.__used__||0,n.__used__++,n.__used__===1&&r.push(n)}function collectResources(n,r,a){var s,o;n.traverse(function(c){if(c.isRenderable()){var p=c.geometry,d=c.material;if(d!==s)for(var _=d.getTextureUniforms(),ja=0;ja<_.length;ja++){var Ja=_[ja],ec=d.uniforms[Ja].value;if(ec){if(ec instanceof Texture)updateUsed(ec,r);else if(ec instanceof Array)for(var tc=0;tc<ec.length;tc++)ec[tc]instanceof Texture&&updateUsed(ec[tc],r)}}p!==o&&updateUsed(p,a),s=d,o=p}});for(var u=0;u<n.lights.length;u++)n.lights[u].cubemap&&updateUsed(n.lights[u].cubemap,r)}LayerGL.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(markUnused(this._textureList),markUnused(this._geometriesList),checkAndDispose(this.renderer,this._textureList),checkAndDispose(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)};LayerGL.prototype.onmousedown=function(n){if(!(n.target&&n.target.__isGLToZRProxy)){n=n.event;var r=this.pickObject(n.offsetX,n.offsetY);r&&(this._dispatchEvent("mousedown",n,r),this._dispatchDataEvent("mousedown",n,r)),this._downX=n.offsetX,this._downY=n.offsetY}};LayerGL.prototype.onmousemove=function(n){if(!(n.target&&n.target.__isGLToZRProxy)){n=n.event;var r=this.pickObject(n.offsetX,n.offsetY),a=r&&r.target,s=this._hovered;this._hovered=r,s&&a!==s.target&&(s.relatedTarget=a,this._dispatchEvent("mouseout",n,s),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",n,r),r&&(this.zr.setCursorStyle("pointer"),(!s||a!==s.target)&&this._dispatchEvent("mouseover",n,r)),this._dispatchDataEvent("mousemove",n,r)}};LayerGL.prototype.onmouseup=function(n){if(!(n.target&&n.target.__isGLToZRProxy)){n=n.event;var r=this.pickObject(n.offsetX,n.offsetY);r&&(this._dispatchEvent("mouseup",n,r),this._dispatchDataEvent("mouseup",n,r)),this._upX=n.offsetX,this._upY=n.offsetY}};LayerGL.prototype.onclick=LayerGL.prototype.dblclick=function(n){if(!(n.target&&n.target.__isGLToZRProxy)){var r=this._upX-this._downX,a=this._upY-this._downY;if(!(Math.sqrt(r*r+a*a)>20)){n=n.event;var s=this.pickObject(n.offsetX,n.offsetY);s&&(this._dispatchEvent(n.type,n,s),this._dispatchDataEvent(n.type,n,s));var o=this._clickToSetFocusPoint(n);if(o){var u=o.view.setDOFFocusOnPoint(o.distance);u&&this.zr.refresh()}}}};LayerGL.prototype._clickToSetFocusPoint=function(n){for(var r=this.renderer,a=r.viewport,s=this.views.length-1;s>=0;s--){var o=this.views[s];if(o.hasDOF()&&o.containPoint(n.offsetX,n.offsetY)){this._picking.scene=o.scene,this._picking.camera=o.camera,r.viewport=o.viewport;var u=this._picking.pick(n.offsetX,n.offsetY,!0);if(u)return u.view=o,u}}r.viewport=a};LayerGL.prototype.onglobalout=function(n){var r=this._hovered;r&&this._dispatchEvent("mouseout",n,{target:r.target})};LayerGL.prototype.pickObject=function(n,r){for(var a=[],s=this.renderer,o=s.viewport,u=0;u<this.views.length;u++){var c=this.views[u];c.containPoint(n,r)&&(this._picking.scene=c.scene,this._picking.camera=c.camera,s.viewport=c.viewport,this._picking.pickAll(n,r,a))}return s.viewport=o,a.sort(function(p,d){return p.distance-d.distance}),a[0]};LayerGL.prototype._dispatchEvent=function(n,r,a){a||(a={});var s=a.target;for(a.cancelBubble=!1,a.event=r,a.type=n,a.offsetX=r.offsetX,a.offsetY=r.offsetY;s&&(s.trigger(n,a),s=s.getParent(),!a.cancelBubble););this._dispatchToView(n,a)};LayerGL.prototype._dispatchDataEvent=function(n,r,a){var s=a&&a.target,o=s&&s.dataIndex,u=s&&s.seriesIndex,c=s&&s.eventData,p=!1,d=this._zrEventProxy;d.x=r.offsetX,d.y=r.offsetY,d.update();var _={target:d};const ja=getECData(d);n==="mousemove"&&(o!=null?o!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(ja.dataIndex=this._lastDataIndex,ja.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(_,"mouseout",r)),p=!0):c!=null&&c!==this._lastEventData&&(this._lastEventData!=null&&(ja.eventData=this._lastEventData,this.zr.handler.dispatchToElement(_,"mouseout",r)),p=!0),this._lastEventData=c,this._lastDataIndex=o,this._lastSeriesIndex=u),ja.eventData=c,ja.dataIndex=o,ja.seriesIndex=u,(c!=null||parseInt(o,10)>=0&&parseInt(u,10)>=0)&&(this.zr.handler.dispatchToElement(_,n,r),p&&this.zr.handler.dispatchToElement(_,"mouseover",r))};LayerGL.prototype._dispatchToView=function(n,r){for(var a=0;a<this.views.length;a++)this.views[a].containPoint(r.offsetX,r.offsetY)&&this.views[a].trigger(n,r)};Object.assign(LayerGL.prototype,notifier);var GL_SERIES=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function convertNormalEmphasis(n,r){if(n&&n[r]&&(n[r].normal||n[r].emphasis)){var a=n[r].normal,s=n[r].emphasis;a&&(n[r]=a),s&&(n.emphasis=n.emphasis||{},n.emphasis[r]=s)}}function convertNormalEmphasisForEach(n){convertNormalEmphasis(n,"itemStyle"),convertNormalEmphasis(n,"lineStyle"),convertNormalEmphasis(n,"areaStyle"),convertNormalEmphasis(n,"label")}function removeTextStyleInAxis(n){n&&(n instanceof Array||(n=[n]),each$f(n,function(r){if(r.axisLabel){var a=r.axisLabel;Object.assign(a,a.textStyle),a.textStyle=null}}))}function backwardCompat(n){each$f(n.series,function(r){indexOf(GL_SERIES,r.type)>=0&&(convertNormalEmphasisForEach(r),r.coordinateSystem==="mapbox"&&(r.coordinateSystem="mapbox3D",n.mapbox3D=n.mapbox))}),removeTextStyleInAxis(n.xAxis3D),removeTextStyleInAxis(n.yAxis3D),removeTextStyleInAxis(n.zAxis3D),removeTextStyleInAxis(n.grid3D),convertNormalEmphasis(n.geo3D)}function EChartsGL(n){this._layers={},this._zr=n}EChartsGL.prototype.update=function(n,r){var a=this,s=r.getZr();if(!s.getWidth()||!s.getHeight()){console.warn("Dom has no width or height");return}function o(p){s.setSleepAfterStill(0);var d;p.coordinateSystem&&p.coordinateSystem.model,d=p.get("zlevel");var _=a._layers,ja=_[d];if(!ja){if(ja=_[d]=new LayerGL("gl-"+d,s),s.painter.isSingleCanvas()){ja.virtual=!0;var Ja=new ZRImage({z:1e4,style:{image:ja.renderer.canvas},silent:!0});ja.__hostImage=Ja,s.add(Ja)}s.painter.insertLayer(d,ja)}return ja.__hostImage&&ja.__hostImage.setStyle({width:ja.renderer.getWidth(),height:ja.renderer.getHeight()}),ja}function u(p,d){p&&p.traverse(function(_){_.isRenderable&&_.isRenderable()&&(_.ignorePicking=_.$ignorePicking!=null?_.$ignorePicking:d)})}for(var c in this._layers)this._layers[c].removeViewsAll();n.eachComponent(function(p,d){if(p!=="series"){var _=r.getViewOfComponentModel(d),ja=d.coordinateSystem;if(_.__ecgl__){var Ja;if(ja){if(!ja.viewGL){console.error("Can't find viewGL in coordinateSystem of component "+d.id);return}Ja=ja.viewGL}else{if(!d.viewGL){console.error("Can't find viewGL of component "+d.id);return}Ja=ja.viewGL}var Ja=ja.viewGL,ec=o(d);ec.addView(Ja),_.afterRender&&_.afterRender(d,n,r,ec),u(_.groupGL,d.get("silent"))}}}),n.eachSeries(function(p){var d=r.getViewOfSeriesModel(p),_=p.coordinateSystem;if(d.__ecgl__){if(_&&!_.viewGL&&!d.viewGL){console.error("Can't find viewGL of series "+d.id);return}var ja=_&&_.viewGL||d.viewGL,Ja=o(p);Ja.addView(ja),d.afterRender&&d.afterRender(p,n,r,Ja),u(d.groupGL,p.get("silent"))}})};registerPostInit(function(n){var r=n.getZr(),a=r.painter.dispose;r.painter.dispose=function(){typeof this.eachOtherLayer=="function"&&this.eachOtherLayer(function(s){s instanceof LayerGL&&s.dispose()}),a.call(this)},r.painter.getRenderedCanvas=function(s){if(s=s||{},this._singleCanvas)return this._layers[0].dom;var o=document.createElement("canvas"),u=s.pixelRatio||this.dpr;o.width=this.getWidth()*u,o.height=this.getHeight()*u;var c=o.getContext("2d");c.dpr=u,c.clearRect(0,0,o.width,o.height),s.backgroundColor&&(c.fillStyle=s.backgroundColor,c.fillRect(0,0,o.width,o.height));var p=this.storage.getDisplayList(!0),d={},_,ja=this;function Ja(nc,ic){var uc=ja._zlevelList;nc==null&&(nc=-1/0);for(var eh,rh=0;rh<uc.length;rh++){var ah=uc[rh],ih=ja._layers[ah];if(!ih.__builtin__&&ah>nc&&ah<ic){eh=ih;break}}eh&&eh.renderToCanvas&&(c.save(),eh.renderToCanvas(c),c.restore())}for(var ec={ctx:c},tc=0;tc<p.length;tc++){var rc=p[tc];rc.zlevel!==_&&(Ja(_,rc.zlevel),_=rc.zlevel),this._doPaintEl(rc,ec,!0,null,d)}return Ja(_,1/0),o}});registerPostUpdate(function(n,r){var a=r.getZr(),s=a.__egl=a.__egl||new EChartsGL(a);s.update(n,r)});registerPreprocessor(backwardCompat);const componentViewControlMixin={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(n){n=n||{},this.option.viewControl=this.option.viewControl||{},n.alpha!=null&&(this.option.viewControl.alpha=n.alpha),n.beta!=null&&(this.option.viewControl.beta=n.beta),n.distance!=null&&(this.option.viewControl.distance=n.distance),n.center!=null&&(this.option.viewControl.center=n.center)}},componentPostEffectMixin={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},componentLightMixin={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}};var Grid3DModel=ComponentModel.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});merge(Grid3DModel.prototype,componentViewControlMixin);merge(Grid3DModel.prototype,componentPostEffectMixin);merge(Grid3DModel.prototype,componentLightMixin);var firstNotNull$3=retrieve.firstNotNull,MOUSE_BUTTON_KEY_MAP={left:0,middle:1,right:2};function convertToArray(n){return n instanceof Array||(n=[n,n]),n}var OrbitControl=Base.extend(function(){return{zr:null,viewGL:null,_center:new Vector3,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new Vector2,_panVelocity:new Vector2,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(n){this[n]=this[n].bind(this)},this)},{init:function(){var n=this.zr;n&&(n.on("mousedown",this._mouseDownHandler),n.on("globalout",this._mouseUpHandler),n.on("mousewheel",this._mouseWheelHandler),n.on("pinch",this._pinchHandler),n.animation.on("frame",this._update),n.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var n=this.zr;n&&(n.off("mousedown",this._mouseDownHandler),n.off("mousemove",this._mouseMoveHandler),n.off("mouseup",this._mouseUpHandler),n.off("mousewheel",this._mouseWheelHandler),n.off("pinch",this._pinchHandler),n.off("globalout",this._mouseUpHandler),n.dom.removeEventListener("contextmenu",this._contextMenuHandler),n.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(n){this._distance=n,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(n){this._orthoSize=n,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(n){n=Math.max(Math.min(this.maxAlpha,n),this.minAlpha),this._theta=n/180*Math.PI,this._needsUpdate=!0},setBeta:function(n){n=Math.max(Math.min(this.maxBeta,n),this.minBeta),this._phi=-n/180*Math.PI,this._needsUpdate=!0},setCenter:function(n){this._center.setArray(n)},setViewGL:function(n){this.viewGL=n},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(n,r){r=r||{};var a=r.baseDistance||0,s=r.baseOrthoSize||1,o=n.get("projection");o!=="perspective"&&o!=="orthographic"&&o!=="isometric"&&(o="perspective"),this._projection=o,this.viewGL.setProjection(o);var u=n.get("distance")+a,c=n.get("orthographicSize")+s;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(ec){this[ec[0]]=firstNotNull$3(n.get(ec[0]),ec[1])},this),this.minDistance+=a,this.maxDistance+=a,this.minOrthographicSize+=s,this.maxOrthographicSize+=s;var p=n.ecModel,d={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(ec){d[ec]=firstNotNull$3(n.get(ec),p&&p.get(ec))});var _=firstNotNull$3(r.alpha,n.get("alpha"))||0,ja=firstNotNull$3(r.beta,n.get("beta"))||0,Ja=firstNotNull$3(r.center,n.get("center"))||[0,0,0];d.animation&&d.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:_,beta:ja,center:Ja,distance:u,orthographicSize:c,easing:d.animationEasingUpdate,duration:d.animationDurationUpdate}):(this.setDistance(u),this.setAlpha(_),this.setBeta(ja),this.setCenter(Ja),this.setOrthographicSize(c)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(n){var r=this.zr,a=this,s={},o={};return n.distance!=null&&(s.distance=this.getDistance(),o.distance=n.distance),n.orthographicSize!=null&&(s.orthographicSize=this.getOrthographicSize(),o.orthographicSize=n.orthographicSize),n.alpha!=null&&(s.alpha=this.getAlpha(),o.alpha=n.alpha),n.beta!=null&&(s.beta=this.getBeta(),o.beta=n.beta),n.center!=null&&(s.center=this.getCenter(),o.center=n.center),this._addAnimator(r.animation.animate(s).when(n.duration||1e3,o).during(function(){s.alpha!=null&&a.setAlpha(s.alpha),s.beta!=null&&a.setBeta(s.beta),s.distance!=null&&a.setDistance(s.distance),s.center!=null&&a.setCenter(s.center),s.orthographicSize!=null&&a.setOrthographicSize(s.orthographicSize),a._needsUpdate=!0})).start(n.easing||"linear")},stopAllAnimation:function(){for(var n=0;n<this._animators.length;n++)this._animators[n].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(n){if(this._rotating){var r=(this.autoRotateDirection==="cw"?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=r*n/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(n=Math.min(n,50),this._updateDistanceOrSize(n),this._updatePan(n),this._updateRotate(n),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(n){var r=this._rotateVelocity;this._phi=r.y*n/20+this._phi,this._theta=r.x*n/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(r,Math.pow(this.damping,n/16))},_updateDistanceOrSize:function(n){this._projection==="perspective"?this._setDistance(this._distance+this._zoomSpeed*n/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*n/20),this._zoomSpeed*=Math.pow(this.damping,n/16)},_setDistance:function(n){this._distance=Math.max(Math.min(n,this.maxDistance),this.minDistance)},_setOrthoSize:function(n){this._orthoSize=Math.max(Math.min(n,this.maxOrthographicSize),this.minOrthographicSize);var r=this.getCamera(),a=this._orthoSize,s=a/this.viewGL.viewport.height*this.viewGL.viewport.width;r.left=-s/2,r.right=s/2,r.top=a/2,r.bottom=-a/2},_updatePan:function(n){var r=this._panVelocity,a=this._distance,s=this.getCamera(),o=s.worldTransform.y,u=s.worldTransform.x;this._center.scaleAndAdd(u,-r.x*a/200).scaleAndAdd(o,-r.y*a/200),this._vectorDamping(r,0)},_updateTransform:function(){var n=this.getCamera(),r=new Vector3,a=this._theta+Math.PI/2,s=this._phi+Math.PI/2,o=Math.sin(a);r.x=o*Math.cos(s),r.y=-Math.cos(a),r.z=o*Math.sin(s),n.position.copy(this._center).scaleAndAdd(r,this._distance),n.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var n=this.autoRotateAfterStill,r=this;!isNaN(n)&&n>0&&(this._stillTimeout=setTimeout(function(){r._rotating=!0},n*1e3))},_vectorDamping:function(n,r){var a=n.len();a=a*r,a<1e-4&&(a=0),n.normalize().scale(a)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var n=this.getCamera().worldTransform.z,r=Math.asin(n.y),a=Math.atan2(n.x,n.z);this._theta=r,this._phi=-a,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(n){if(!n.target&&!this._isAnimating()){var r=n.offsetX,a=n.offsetY;this.viewGL&&!this.viewGL.containPoint(r,a)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),n.event.targetTouches?n.event.targetTouches.length===1&&(this._mode="rotate"):n.event.button===MOUSE_BUTTON_KEY_MAP[this.rotateMouseButton]?this._mode="rotate":n.event.button===MOUSE_BUTTON_KEY_MAP[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=n.offsetX,this._mouseY=n.offsetY)}},_mouseMoveHandler:function(n){if(!(n.target&&n.target.__isGLToZRProxy)&&!this._isAnimating()){var r=convertToArray(this.panSensitivity),a=convertToArray(this.rotateSensitivity);this._mode==="rotate"?(this._rotateVelocity.y=(n.offsetX-this._mouseX)/this.zr.getHeight()*2*a[0],this._rotateVelocity.x=(n.offsetY-this._mouseY)/this.zr.getWidth()*2*a[1]):this._mode==="pan"&&(this._panVelocity.x=(n.offsetX-this._mouseX)/this.zr.getWidth()*r[0]*400,this._panVelocity.y=(-n.offsetY+this._mouseY)/this.zr.getHeight()*r[1]*400),this._mouseX=n.offsetX,this._mouseY=n.offsetY,n.event.preventDefault()}},_mouseWheelHandler:function(n){if(!this._isAnimating()){var r=n.event.wheelDelta||-n.event.detail;this._zoomHandler(n,r)}},_pinchHandler:function(n){this._isAnimating()||(this._zoomHandler(n,n.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(n,r){if(r!==0){var a=n.offsetX,s=n.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(a,s))){var o;this._projection==="perspective"?o=Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):o=Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(r>0?-1:1)*o*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&this._mode==="rotate"&&this._startCountingStill(),n.event.preventDefault()}}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return this.rotateMouseButton==="right"||this.panMouseButton==="right"},_contextMenuHandler:function(n){this._isRightMouseButtonUsed()&&n.preventDefault()},_addAnimator:function(n){var r=this._animators;return r.push(n),n.done(function(){var a=r.indexOf(n);a>=0&&r.splice(a,1)}),n}});Object.defineProperty(OrbitControl.prototype,"autoRotate",{get:function(n){return this._autoRotate},set:function(n){this._autoRotate=n,this._rotating=n}});const dynamicConvertMixin={convertToDynamicArray:function(n){n&&this.resetOffset();var r=this.attributes;for(var a in r)n||!r[a].value?r[a].value=[]:r[a].value=Array.prototype.slice.call(r[a].value);n||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var n=this.attributes;for(var r in n)n[r].value&&n[r].value.length>0?n[r].value=new Float32Array(n[r].value):n[r].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},glmatrix={vec2:vec2$3,vec3:vec3$f,vec4:vec4$1,mat2,mat2d,mat3:mat3$1,mat4:mat4$2,quat};var vec3$e=glmatrix.vec3,sampleLinePoints$1=[[0,0],[1,1]],LinesGeometry$2=Geometry.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new Geometry.Attribute("position","float",3,"POSITION"),positionPrev:new Geometry.Attribute("positionPrev","float",3),positionNext:new Geometry.Attribute("positionNext","float",3),prevPositionPrev:new Geometry.Attribute("prevPositionPrev","float",3),prevPosition:new Geometry.Attribute("prevPosition","float",3),prevPositionNext:new Geometry.Attribute("prevPositionNext","float",3),offset:new Geometry.Attribute("offset","float",1),color:new Geometry.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(n){var r=this.attributes;this.vertexCount!==n&&(r.position.init(n),r.color.init(n),this.useNativeLine||(r.positionPrev.init(n),r.positionNext.init(n),r.offset.init(n)),n>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(n){this.triangleCount!==n&&(n===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(n*3):new Uint16Array(n*3))},_getCubicCurveApproxStep:function(n,r,a,s){var o=vec3$e.dist(n,r)+vec3$e.dist(a,r)+vec3$e.dist(s,a),u=1/(o+1)*this.segmentScale;return u},getCubicCurveVertexCount:function(n,r,a,s){var o=this._getCubicCurveApproxStep(n,r,a,s),u=Math.ceil(1/o);return this.useNativeLine?u*2:u*2+2},getCubicCurveTriangleCount:function(n,r,a,s){var o=this._getCubicCurveApproxStep(n,r,a,s),u=Math.ceil(1/o);return this.useNativeLine?0:u*2},getLineVertexCount:function(){return this.getPolylineVertexCount(sampleLinePoints$1)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(sampleLinePoints$1)},getPolylineVertexCount:function(n){var r;if(typeof n=="number")r=n;else{var a=typeof n[0]!="number";r=a?n.length:n.length/3}return this.useNativeLine?(r-1)*2:(r-1)*2+2},getPolylineTriangleCount:function(n){var r;if(typeof n=="number")r=n;else{var a=typeof n[0]!="number";r=a?n.length:n.length/3}return this.useNativeLine?0:Math.max(r-1,0)*2},addCubicCurve:function(n,r,a,s,o,u){u==null&&(u=1);for(var c=n[0],p=n[1],d=n[2],_=r[0],ja=r[1],Ja=r[2],ec=a[0],tc=a[1],rc=a[2],nc=s[0],ic=s[1],uc=s[2],eh=this._getCubicCurveApproxStep(n,r,a,s),rh=eh*eh,ah=rh*eh,ih=3*eh,oh=3*rh,uh=6*rh,ch=6*ah,hh=c-_*2+ec,dh=p-ja*2+tc,gh=d-Ja*2+rc,fh=(_-ec)*3-c+nc,vh=(ja-tc)*3-p+ic,ph=(Ja-rc)*3-d+uc,yh=c,xh=p,_h=d,bh=(_-c)*ih+hh*oh+fh*ah,Dh=(ja-p)*ih+dh*oh+vh*ah,Th=(Ja-d)*ih+gh*oh+ph*ah,Ch=hh*uh+fh*ch,wh=dh*uh+vh*ch,Nh=gh*uh+ph*ch,Rh=fh*ch,kh=vh*ch,Lh=ph*ch,Fh=0,Wh=0,Qh=Math.ceil(1/eh),jh=new Float32Array((Qh+1)*3),jh=[],Hh=0,Wh=0;Wh<Qh+1;Wh++)jh[Hh++]=yh,jh[Hh++]=xh,jh[Hh++]=_h,yh+=bh,xh+=Dh,_h+=Th,bh+=Ch,Dh+=wh,Th+=Nh,Ch+=Rh,wh+=kh,Nh+=Lh,Fh+=eh,Fh>1&&(yh=bh>0?Math.min(yh,nc):Math.max(yh,nc),xh=Dh>0?Math.min(xh,ic):Math.max(xh,ic),_h=Th>0?Math.min(_h,uc):Math.max(_h,uc));return this.addPolyline(jh,o,u)},addLine:function(n,r,a,s){return this.addPolyline([n,r],a,s)},addPolyline:function(n,r,a,s,o){if(n.length){var u=typeof n[0]!="number";if(o==null&&(o=u?n.length:n.length/3),!(o<2)){s==null&&(s=0),a==null&&(a=1),this._itemVertexOffsets.push(this._vertexOffset);var u=typeof n[0]!="number",c=u?typeof r[0]!="number":r.length/4===o,p=this.attributes.position,d=this.attributes.positionPrev,_=this.attributes.positionNext,ja=this.attributes.color,Ja=this.attributes.offset,ec=this.indices,tc=this._vertexOffset,rc,nc;a=Math.max(a,.01);for(var ic=s;ic<o;ic++){if(u)rc=n[ic],c?nc=r[ic]:nc=r;else{var uc=ic*3;if(rc=rc||[],rc[0]=n[uc],rc[1]=n[uc+1],rc[2]=n[uc+2],c){var eh=ic*4;nc=nc||[],nc[0]=r[eh],nc[1]=r[eh+1],nc[2]=r[eh+2],nc[3]=r[eh+3]}else nc=r}if(this.useNativeLine?ic>1&&(p.copy(tc,tc-1),ja.copy(tc,tc-1),tc++):(ic<o-1&&(d.set(tc+2,rc),d.set(tc+3,rc)),ic>0&&(_.set(tc-2,rc),_.set(tc-1,rc)),p.set(tc,rc),p.set(tc+1,rc),ja.set(tc,nc),ja.set(tc+1,nc),Ja.set(tc,a/2),Ja.set(tc+1,-a/2),tc+=2),this.useNativeLine)ja.set(tc,nc),p.set(tc,rc),tc++;else if(ic>0){var rh=this._triangleOffset*3,ec=this.indices;ec[rh]=tc-4,ec[rh+1]=tc-3,ec[rh+2]=tc-2,ec[rh+3]=tc-3,ec[rh+4]=tc-1,ec[rh+5]=tc-2,this._triangleOffset+=2}}if(!this.useNativeLine){var ah=this._vertexOffset,ih=this._vertexOffset+o*2;d.copy(ah,ah+2),d.copy(ah+1,ah+3),_.copy(ih-1,ih-3),_.copy(ih-2,ih-4)}return this._vertexOffset=tc,this._vertexOffset}}},setItemColor:function(n,r){for(var a=this._itemVertexOffsets[n],s=n<this._itemVertexOffsets.length-1?this._itemVertexOffsets[n+1]:this._vertexOffset,o=a;o<s;o++)this.attributes.color.set(o,r);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});defaults(LinesGeometry$2.prototype,dynamicConvertMixin);function ZRTextureAtlasSurfaceNode(n,r,a,s,o,u,c){this._zr=n,this._x=0,this._y=0,this._rowHeight=0,this.width=s,this.height=o,this.offsetX=r,this.offsetY=a,this.dpr=c,this.gap=u}ZRTextureAtlasSurfaceNode.prototype={constructor:ZRTextureAtlasSurfaceNode,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(n,r,a){var s=n.getBoundingRect();r==null&&(r=s.width),a==null&&(a=s.height),r*=this.dpr,a*=this.dpr,this._fitElement(n,r,a);var o=this._x,u=this._y,c=this.width*this.dpr,p=this.height*this.dpr,d=this.gap;if(o+r+d>c&&(o=this._x=0,u+=this._rowHeight+d,this._y=u,this._rowHeight=0),this._x+=r+d,this._rowHeight=Math.max(this._rowHeight,a),u+a+d>p)return null;n.x+=this.offsetX*this.dpr+o,n.y+=this.offsetY*this.dpr+u,this._zr.add(n);var _=[this.offsetX/this.width,this.offsetY/this.height],ja=[[o/c+_[0],u/p+_[1]],[(o+r)/c+_[0],(u+a)/p+_[1]]];return ja},_fitElement:function(n,r,a){var s=n.getBoundingRect(),o=r/s.width,u=a/s.height;n.x=-s.x*o,n.y=-s.y*u,n.scaleX=o,n.scaleY=u,n.update()}};function ZRTextureAtlasSurface(n){n=n||{},n.width=n.width||512,n.height=n.height||512,n.devicePixelRatio=n.devicePixelRatio||1,n.gap=n.gap==null?2:n.gap;var r=document.createElement("canvas");r.width=n.width*n.devicePixelRatio,r.height=n.height*n.devicePixelRatio,this._canvas=r,this._texture=new Texture2D({image:r,flipY:!1});var a=this;this._zr=init$2(r);var s=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){s.call(this),a._texture.dirty(),a.onupdate&&a.onupdate()},this._dpr=n.devicePixelRatio,this._coords={},this.onupdate=n.onupdate,this._gap=n.gap,this._textureAtlasNodes=[new ZRTextureAtlasSurfaceNode(this._zr,0,0,n.width,n.height,this._gap,this._dpr)],this._nodeWidth=n.width,this._nodeHeight=n.height,this._currentNodeIdx=0}ZRTextureAtlasSurface.prototype={clear:function(){for(var n=0;n<this._textureAtlasNodes.length;n++)this._textureAtlasNodes[n].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var n=4096/this._dpr,r=this._textureAtlasNodes,a=r.length,s=a*this._nodeWidth%n,o=Math.floor(a*this._nodeWidth/n)*this._nodeHeight;if(!(o>=n)){var u=(s+this._nodeWidth)*this._dpr,c=(o+this._nodeHeight)*this._dpr;try{this._zr.resize({width:u,height:c})}catch{this._canvas.width=u,this._canvas.height=c}var p=new ZRTextureAtlasSurfaceNode(this._zr,s,o,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(p),p}},add:function(n,r,a){if(this._coords[n.id])return this._coords[n.id];var s=this._getCurrentNode().add(n,r,a);if(!s){var o=this._expand();if(!o)return;s=o.add(n,r,a)}return this._coords[n.id]=s,s},getCoordsScale:function(){var n=this._dpr;return[this._nodeWidth/this._canvas.width*n,this._nodeHeight/this._canvas.height*n]},getCoords:function(n){return this._coords[n]},dispose:function(){this._zr.dispose()}};function SceneHelper(){}SceneHelper.prototype={constructor:SceneHelper,setScene:function(n){this._scene=n,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(n){this._lightRoot=n,this.mainLight=new graphicGL.DirectionalLight({shadowBias:.005}),this.ambientLight=new graphicGL.AmbientLight,n.add(this.mainLight),n.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(n){var r=this.mainLight,a=this.ambientLight,s=n.getModel("light"),o=s.getModel("main"),u=s.getModel("ambient");r.intensity=o.get("intensity"),a.intensity=u.get("intensity"),r.color=graphicGL.parseColor(o.get("color")).slice(0,3),a.color=graphicGL.parseColor(u.get("color")).slice(0,3);var c=o.get("alpha")||0,p=o.get("beta")||0;r.position.setArray(graphicGL.directionFromAlphaBeta(c,p)),r.lookAt(graphicGL.Vector3.ZERO),r.castShadow=o.get("shadow"),r.shadowResolution=graphicGL.getShadowResolution(o.get("shadowQuality"))},updateAmbientCubemap:function(n,r,a){var s=r.getModel("light.ambientCubemap"),o=s.get("texture");if(o){this._cubemapLightsCache=this._cubemapLightsCache||{};var u=this._cubemapLightsCache[o];if(!u){var c=this;u=this._cubemapLightsCache[o]=graphicGL.createAmbientCubemap(s.option,n,a,function(){c._isSkyboxFromAmbientCubemap&&c._skybox.setEnvironmentMap(u.specular.cubemap),a.getZr().refresh()})}this._lightRoot.add(u.diffuse),this._lightRoot.add(u.specular),this._currentCubemapLights=u}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(n,r,a){var s=r.get("environment"),o=this;function u(){return o._skybox=o._skybox||new Skybox,o._skybox}var c=u();if(s&&s!=="none")if(s==="auto")if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var p=this._currentCubemapLights.specular.cubemap;c.setEnvironmentMap(p),this._scene&&c.attachScene(this._scene),c.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if(typeof s=="object"&&s.colorStops||typeof s=="string"&&parse(s)){this._isSkyboxFromAmbientCubemap=!1;var d=new graphicGL.Texture2D({anisotropic:8,flipY:!1});c.setEnvironmentMap(d);var _=d.image=document.createElement("canvas");_.width=_.height=16;var ja=_.getContext("2d"),Ja=new Rect$2({shape:{x:0,y:0,width:16,height:16},style:{fill:s}});brushSingle(ja,Ja),c.attachScene(this._scene)}else{this._isSkyboxFromAmbientCubemap=!1;var d=graphicGL.loadTexture(s,a,{anisotropic:8,flipY:!1});c.setEnvironmentMap(d),c.attachScene(this._scene)}else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var ec=r.coordinateSystem;if(this._skybox)if(ec&&ec.viewGL&&s!=="auto"&&!(s.match&&s.match(/.hdr$/))){var tc=ec.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[tc]("fragment","SRGB_DECODE")}else this._skybox.material.undefine("fragment","SRGB_DECODE")}};var vec3$d=glmatrix.vec3,QuadsGeometry=Geometry.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new Geometry.Attribute("position","float",3,"POSITION"),normal:new Geometry.Attribute("normal","float",3,"NORMAL"),color:new Geometry.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(n){var r=this.attributes,a=this.getQuadVertexCount()*n,s=this.getQuadTriangleCount()*n;this.vertexCount!==a&&(r.position.init(a),r.normal.init(a),r.color.init(a)),this.triangleCount!==s&&(this.indices=a>65535?new Uint32Array(s*3):new Uint16Array(s*3))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var n=vec3$d.create(),r=vec3$d.create(),a=vec3$d.create(),s=[0,3,1,3,2,1];return function(o,u){var c=this.attributes.position,p=this.attributes.normal,d=this.attributes.color;vec3$d.sub(n,o[1],o[0]),vec3$d.sub(r,o[2],o[1]),vec3$d.cross(a,n,r),vec3$d.normalize(a,a);for(var _=0;_<4;_++)c.set(this._vertexOffset+_,o[_]),d.set(this._vertexOffset+_,u),p.set(this._vertexOffset+_,a);for(var ja=this._faceOffset*3,_=0;_<6;_++)this.indices[ja+_]=s[_]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});defaults(QuadsGeometry.prototype,dynamicConvertMixin);var firstNotNull$2=retrieve.firstNotNull,dimIndicesMap$2={x:0,y:2,z:1};function updateFacePlane(n,r,a,s){var o=[0,0,0],u=s<0?a.getExtentMin():a.getExtentMax();o[dimIndicesMap$2[a.dim]]=u,n.position.setArray(o),n.rotation.identity(),r.distance=-Math.abs(u),r.normal.set(0,0,0),a.dim==="x"?(n.rotation.rotateY(s*Math.PI/2),r.normal.x=-s):a.dim==="z"?(n.rotation.rotateX(-s*Math.PI/2),r.normal.y=-s):(s>0&&n.rotation.rotateY(Math.PI),r.normal.z=-s)}function Grid3DFace(n,r,a){this.rootNode=new graphicGL.Node;var s=new graphicGL.Mesh({geometry:new LinesGeometry$2({useNativeLine:!1}),material:r,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),o=new graphicGL.Mesh({geometry:new QuadsGeometry,material:a,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(o),this.rootNode.add(s),this.faceInfo=n,this.plane=new graphicGL.Plane,this.linesMesh=s,this.quadsMesh=o}Grid3DFace.prototype.update=function(n,r,a){var s=n.coordinateSystem,o=[s.getAxis(this.faceInfo[0]),s.getAxis(this.faceInfo[1])],u=this.linesMesh.geometry,c=this.quadsMesh.geometry;u.convertToDynamicArray(!0),c.convertToDynamicArray(!0),this._updateSplitLines(u,o,n,a),this._udpateSplitAreas(c,o,n,a),u.convertToTypedArray(),c.convertToTypedArray();var p=s.getAxis(this.faceInfo[2]);updateFacePlane(this.rootNode,this.plane,p,this.faceInfo[3])};Grid3DFace.prototype._updateSplitLines=function(n,r,a,s){var o=s.getDevicePixelRatio();r.forEach(function(u,c){var p=u.model,d=r[1-c].getExtent();if(!u.scale.isBlank()){var _=p.getModel("splitLine",a.getModel("splitLine"));if(_.get("show")){var ja=_.getModel("lineStyle"),Ja=ja.get("color"),ec=firstNotNull$2(ja.get("opacity"),1),tc=firstNotNull$2(ja.get("width"),1);Ja=isArray$1(Ja)?Ja:[Ja];for(var rc=u.getTicksCoords({tickModel:_}),nc=0,ic=0;ic<rc.length;ic++){var uc=rc[ic].coord,eh=graphicGL.parseColor(Ja[nc%Ja.length]);eh[3]*=ec;var rh=[0,0,0],ah=[0,0,0];rh[c]=ah[c]=uc,rh[1-c]=d[0],ah[1-c]=d[1],n.addLine(rh,ah,eh,tc*o),nc++}}}})};Grid3DFace.prototype._udpateSplitAreas=function(n,r,a,s){r.forEach(function(o,u){var c=o.model,p=r[1-u].getExtent();if(!o.scale.isBlank()){var d=c.getModel("splitArea",a.getModel("splitArea"));if(d.get("show")){var _=d.getModel("areaStyle"),ja=_.get("color"),Ja=firstNotNull$2(_.get("opacity"),1);ja=isArray$1(ja)?ja:[ja];for(var ec=o.getTicksCoords({tickModel:d,clamp:!0}),tc=0,rc=[0,0,0],nc=[0,0,0],ic=0;ic<ec.length;ic++){var uc=ec[ic].coord,eh=[0,0,0],rh=[0,0,0];if(eh[u]=rh[u]=uc,eh[1-u]=p[0],rh[1-u]=p[1],ic===0){rc=eh,nc=rh;continue}var ah=graphicGL.parseColor(ja[tc%ja.length]);ah[3]*=Ja,n.addQuad([rc,eh,rh,nc],ah),rc=eh,nc=rh,tc++}}}})};var squareTriangles=[0,1,2,0,2,3],SpritesGeometry=Geometry.extend(function(){return{attributes:{position:new Geometry.Attribute("position","float",3,"POSITION"),texcoord:new Geometry.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new Geometry.Attribute("offset","float",2),color:new Geometry.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(n){this._spriteCount=n;var r=n*4,a=n*2;this.vertexCount!==r&&(this.attributes.position.init(r),this.attributes.offset.init(r),this.attributes.color.init(r)),this.triangleCount!==a&&(this.indices=r>65535?new Uint32Array(a*3):new Uint16Array(a*3))},setSpriteAlign:function(n,r,a,s,o){a==null&&(a="left"),s==null&&(s="top");var u,c,p,d;switch(o=o||0,a){case"left":u=o,p=r[0]+o;break;case"center":case"middle":u=-r[0]/2,p=r[0]/2;break;case"right":u=-r[0]-o,p=-o;break}switch(s){case"bottom":c=o,d=r[1]+o;break;case"middle":c=-r[1]/2,d=r[1]/2;break;case"top":c=-r[1]-o,d=-o;break}var _=n*4,ja=this.attributes.offset;ja.set(_,[u,d]),ja.set(_+1,[p,d]),ja.set(_+2,[p,c]),ja.set(_+3,[u,c])},addSprite:function(n,r,a,s,o,u){var c=this._vertexOffset;this.setSprite(this._vertexOffset/4,n,r,a,s,o,u);for(var p=0;p<squareTriangles.length;p++)this.indices[this._faceOffset*3+p]=squareTriangles[p]+c;return this._faceOffset+=2,this._vertexOffset+=4,c/4},setSprite:function(n,r,a,s,o,u,c){for(var p=n*4,d=this.attributes,_=0;_<4;_++)d.position.set(p+_,r);var ja=d.texcoord;ja.set(p,[s[0][0],s[0][1]]),ja.set(p+1,[s[1][0],s[0][1]]),ja.set(p+2,[s[1][0],s[1][1]]),ja.set(p+3,[s[0][0],s[1][1]]),this.setSpriteAlign(n,a,o,u,c)}});defaults(SpritesGeometry.prototype,dynamicConvertMixin);const labelsGLSL=`@export ecgl.labels.vertex

attribute vec3 position: POSITION;
attribute vec2 texcoord: TEXCOORD_0;
attribute vec2 offset;
#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec2 v_Texcoord;

void main()
{
 vec4 proj = worldViewProjection * vec4(position, 1.0);

 vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;

 screen += offset;

 proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);
 gl_Position = proj;
#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif
 v_Texcoord = texcoord;
}
@end


@export ecgl.labels.fragment

uniform vec3 color : [1.0, 1.0, 1.0];
uniform float alpha : 1.0;
uniform sampler2D textureAtlas;
uniform vec2 uvScale: [1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif
varying float v_Miter;

varying vec2 v_Texcoord;

void main()
{
 gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);
#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif
}

@end`;graphicGL.Shader.import(labelsGLSL);const LabelsMesh=graphicGL.Mesh.extend(function(){var n=new SpritesGeometry({dynamic:!0}),r=new graphicGL.Material({shader:graphicGL.createShader("ecgl.labels"),transparent:!0,depthMask:!1});return{geometry:n,material:r,culling:!1,castShadow:!1,ignorePicking:!0}});var firstNotNull$1=retrieve.firstNotNull,dimIndicesMap$1={x:0,y:2,z:1};function Grid3DAxis(n,r){var a=new graphicGL.Mesh({geometry:new LinesGeometry$2({useNativeLine:!1}),material:r,castShadow:!1,ignorePicking:!0,renderOrder:2}),s=new LabelsMesh;s.material.depthMask=!1;var o=new graphicGL.Node;o.add(a),o.add(s),this.rootNode=o,this.dim=n,this.linesMesh=a,this.labelsMesh=s,this.axisLineCoords=null,this.labelElements=[]}var otherDim={x:"y",y:"x",z:"y"};Grid3DAxis.prototype.update=function(n,r,a){var s=n.coordinateSystem,o=s.getAxis(this.dim),u=this.linesMesh.geometry,c=this.labelsMesh.geometry;u.convertToDynamicArray(!0),c.convertToDynamicArray(!0);var p=o.model,d=o.getExtent(),gh=a.getDevicePixelRatio(),_=p.getModel("axisLine",n.getModel("axisLine")),ja=p.getModel("axisTick",n.getModel("axisTick")),Ja=p.getModel("axisLabel",n.getModel("axisLabel")),ec=_.get("lineStyle.color");if(_.get("show")){var tc=_.getModel("lineStyle"),rc=[0,0,0],nc=[0,0,0],ic=dimIndicesMap$1[o.dim];rc[ic]=d[0],nc[ic]=d[1],this.axisLineCoords=[rc,nc];var uc=graphicGL.parseColor(ec),eh=firstNotNull$1(tc.get("width"),1),rh=firstNotNull$1(tc.get("opacity"),1);uc[3]*=rh,u.addLine(rc,nc,uc,eh*gh)}if(ja.get("show")){var ah=ja.getModel("lineStyle"),ih=graphicGL.parseColor(firstNotNull$1(ah.get("color"),ec)),eh=firstNotNull$1(ah.get("width"),1);ih[3]*=firstNotNull$1(ah.get("opacity"),1);for(var oh=o.getTicksCoords(),uh=ja.get("length"),ch=0;ch<oh.length;ch++){var hh=oh[ch].coord,rc=[0,0,0],nc=[0,0,0],ic=dimIndicesMap$1[o.dim],dh=dimIndicesMap$1[otherDim[o.dim]];rc[ic]=nc[ic]=hh,nc[dh]=uh,u.addLine(rc,nc,ih,eh*gh)}}this.labelElements=[];var gh=a.getDevicePixelRatio();if(Ja.get("show"))for(var oh=o.getTicksCoords(),fh=p.get("data"),vh=Ja.get("margin"),ph=o.getViewLabels(),ch=0;ch<ph.length;ch++){var yh=ph[ch].tickValue,xh=ph[ch].formattedLabel,_h=ph[ch].rawLabel,hh=o.dataToCoord(yh),bh=[0,0,0],ic=dimIndicesMap$1[o.dim],dh=dimIndicesMap$1[otherDim[o.dim]];bh[ic]=bh[ic]=hh,bh[dh]=vh;var Dh=Ja;fh&&fh[yh]&&fh[yh].textStyle&&(Dh=new Model(fh[yh].textStyle,Ja,p.ecModel));var Th=firstNotNull$1(Dh.get("color"),ec),Ch=new ZRText({style:createTextStyle(Dh,{text:xh,fill:typeof Th=="function"?Th(o.type==="category"?_h:o.type==="value"?yh+"":yh,ch):Th,verticalAlign:"top",align:"left"})}),wh=r.add(Ch),Nh=Ch.getBoundingRect();c.addSprite(bh,[Nh.width*gh,Nh.height*gh],wh),this.labelElements.push(Ch)}if(p.get("name")){var Rh=p.getModel("nameTextStyle"),bh=[0,0,0],ic=dimIndicesMap$1[o.dim],dh=dimIndicesMap$1[otherDim[o.dim]],kh=firstNotNull$1(Rh.get("color"),ec),Lh=Rh.get("borderColor"),eh=Rh.get("borderWidth");bh[ic]=bh[ic]=(d[0]+d[1])/2,bh[dh]=p.get("nameGap");var Ch=new ZRText({style:createTextStyle(Rh,{text:p.get("name"),fill:kh,stroke:Lh,lineWidth:eh})}),wh=r.add(Ch),Nh=Ch.getBoundingRect();c.addSprite(bh,[Nh.width*gh,Nh.height*gh],wh),Ch.__idx=this.labelElements.length,this.nameLabelElement=Ch}this.labelsMesh.material.set("textureAtlas",r.getTexture()),this.labelsMesh.material.set("uvScale",r.getCoordsScale()),u.convertToTypedArray(),c.convertToTypedArray()};Grid3DAxis.prototype.setSpriteAlign=function(n,r,a){for(var s=a.getDevicePixelRatio(),o=this.labelsMesh.geometry,u=0;u<this.labelElements.length;u++){var c=this.labelElements[u],p=c.getBoundingRect();o.setSpriteAlign(u,[p.width*s,p.height*s],n,r)}var d=this.nameLabelElement;if(d){var p=d.getBoundingRect();o.setSpriteAlign(d.__idx,[p.width*s,p.height*s],n,r),o.dirty()}this.textAlign=n,this.textVerticalAlign=r};const lines3DGLSL=`@export ecgl.lines3D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

void main()
{
 gl_Position = worldViewProjection * vec4(position, 1.0);
 v_Color = a_Color;
}

@end

@export ecgl.lines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif
}
@end



@export ecgl.lines3D.clipNear

vec4 clipNear(vec4 p1, vec4 p2) {
 float n = (p1.w - near) / (p1.w - p2.w);
 return vec4(mix(p1.xy, p2.xy, n), -near, near);
}

@end

@export ecgl.lines3D.expandLine
#ifdef VERTEX_ANIMATION
 vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);
 vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);
 vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);
#else
 vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);
 vec4 currProj = worldViewProjection * vec4(position, 1.0);
 vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);
#endif

 if (currProj.w < 0.0) {
 if (nextProj.w > 0.0) {
 currProj = clipNear(currProj, nextProj);
 }
 else if (prevProj.w > 0.0) {
 currProj = clipNear(currProj, prevProj);
 }
 }

 vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;

 vec2 dir;
 float len = offset;
 if (position == positionPrev) {
 dir = normalize(nextScreen - currScreen);
 }
 else if (position == positionNext) {
 dir = normalize(currScreen - prevScreen);
 }
 else {
 vec2 dirA = normalize(currScreen - prevScreen);
 vec2 dirB = normalize(nextScreen - currScreen);

 vec2 tanget = normalize(dirA + dirB);

 float miter = 1.0 / max(dot(tanget, dirA), 0.5);
 len *= miter;
 dir = tanget;
 }

 dir = vec2(-dir.y, dir.x) * len;
 currScreen += dir;

 currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);
@end


@export ecgl.meshLines3D.vertex

attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute vec4 a_Color : COLOR;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevPositionPrev;
attribute vec3 prevPositionNext;
uniform float percent : 1.0;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

varying vec4 v_Color;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain
}
@end


@export ecgl.meshLines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain
}

@end`;var firstNotNull=retrieve.firstNotNull;graphicGL.Shader.import(lines3DGLSL);var dimIndicesMap={x:0,y:2,z:1};const Grid3DView=ComponentView.extend({type:"grid3D",__ecgl__:!0,init:function(n,r){var a=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]],s=["x","y","z"],o=new graphicGL.Material({shader:graphicGL.createShader("ecgl.color"),depthMask:!1,transparent:!0}),u=new graphicGL.Material({shader:graphicGL.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});o.define("fragment","DOUBLE_SIDED"),o.define("both","VERTEX_COLOR"),this.groupGL=new graphicGL.Node,this._control=new OrbitControl({zr:r.getZr()}),this._control.init(),this._faces=a.map(function(p){var d=new Grid3DFace(p,u,o);return this.groupGL.add(d.rootNode),d},this),this._axes=s.map(function(p){var d=new Grid3DAxis(p,u);return this.groupGL.add(d.rootNode),d},this);var c=r.getDevicePixelRatio();this._axisLabelSurface=new ZRTextureAtlasSurface({width:256,height:256,devicePixelRatio:c}),this._axisLabelSurface.onupdate=function(){r.getZr().refresh()},this._axisPointerLineMesh=new graphicGL.Mesh({geometry:new LinesGeometry$2({useNativeLine:!1}),material:u,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new ZRTextureAtlasSurface({width:128,height:128,devicePixelRatio:c}),this._axisPointerLabelsMesh=new LabelsMesh({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new graphicGL.Node,this._sceneHelper=new SceneHelper,this._sceneHelper.initLight(this._lightRoot)},render:function(n,r,a){this._model=n,this._api=a;var s=n.coordinateSystem;s.viewGL.add(this._lightRoot),n.get("show")?s.viewGL.add(this.groupGL):s.viewGL.remove(this.groupGL);var o=this._control;o.setViewGL(s.viewGL);var u=n.getModel("viewControl");o.setFromViewControlModel(u,0),this._axisLabelSurface.clear(),o.off("update"),n.get("show")&&(this._faces.forEach(function(c){c.update(n,r,a)},this),this._axes.forEach(function(c){c.update(n,this._axisLabelSurface,a)},this)),o.on("update",this._onCameraChange.bind(this,n,a),this),this._sceneHelper.setScene(s.viewGL.scene),this._sceneHelper.updateLight(n),s.viewGL.setPostEffect(n.getModel("postEffect"),a),s.viewGL.setTemporalSuperSampling(n.getModel("temporalSuperSampling")),this._initMouseHandler(n)},afterRender:function(n,r,a,s){var o=s.renderer;this._sceneHelper.updateAmbientCubemap(o,n,a),this._sceneHelper.updateSkybox(o,n,a)},showAxisPointer:function(n,r,a,s){this._doShowAxisPointer(),this._updateAxisPointer(s.value)},hideAxisPointer:function(n,r,a,s){this._doHideAxisPointer()},_initMouseHandler:function(n){var r=n.coordinateSystem,a=r.viewGL;n.get("show")&&n.get("axisPointer.show")?a.on("mousemove",this._updateAxisPointerOnMousePosition,this):a.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(n){if(!n.target){for(var r=this._model,a=r.coordinateSystem,s=a.viewGL,o=s.castRay(n.offsetX,n.offsetY,new graphicGL.Ray),u,c=0;c<this._faces.length;c++){var p=this._faces[c];if(!p.rootNode.invisible){p.plane.normal.dot(s.camera.worldTransform.z)<0&&p.plane.normal.negate();var d=o.intersectPlane(p.plane);if(d){var _=a.getAxis(p.faceInfo[0]),ja=a.getAxis(p.faceInfo[1]),Ja=dimIndicesMap[p.faceInfo[0]],ec=dimIndicesMap[p.faceInfo[1]];_.contain(d.array[Ja])&&ja.contain(d.array[ec])&&(u=d)}}}if(u){var tc=a.pointToData(u.array,[],!0);this._updateAxisPointer(tc),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(n,r){n.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var a=this._control;r.dispatchAction({type:"grid3DChangeCamera",alpha:a.getAlpha(),beta:a.getBeta(),distance:a.getDistance(),center:a.getCenter(),from:this.uid,grid3DId:n.id})},_updateFaceVisibility:function(){var n=this._control.getCamera(),r=new graphicGL.Vector3;n.update();for(var a=0;a<this._faces.length/2;a++){for(var s=[],o=0;o<2;o++){var u=this._faces[a*2+o];u.rootNode.getWorldPosition(r),r.transformMat4(n.viewMatrix),s[o]=r.z}var c=s[0]>s[1]?0:1,p=this._faces[a*2+c],d=this._faces[a*2+1-c];p.rootNode.invisible=!0,d.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var n=this._model.coordinateSystem,r=n.getAxis("x"),a=n.getAxis("y"),s=n.getAxis("z"),o=s.getExtentMax(),u=s.getExtentMin(),c=r.getExtentMin(),p=r.getExtentMax(),d=a.getExtentMax(),_=a.getExtentMin(),ja=this._axes[0].rootNode,Ja=this._axes[1].rootNode,ec=this._axes[2].rootNode,tc=this._faces,rc=tc[4].rootNode.invisible?_:d,nc=tc[2].rootNode.invisible?o:u,ic=tc[0].rootNode.invisible?c:p,uc=tc[2].rootNode.invisible?o:u,eh=tc[0].rootNode.invisible?p:c,rh=tc[4].rootNode.invisible?_:d;ja.rotation.identity(),Ja.rotation.identity(),ec.rotation.identity(),tc[4].rootNode.invisible&&(this._axes[0].flipped=!0,ja.rotation.rotateX(Math.PI)),tc[0].rootNode.invisible&&(this._axes[1].flipped=!0,Ja.rotation.rotateZ(Math.PI)),tc[4].rootNode.invisible&&(this._axes[2].flipped=!0,ec.rotation.rotateY(Math.PI)),ja.position.set(0,nc,rc),Ja.position.set(ic,uc,0),ec.position.set(eh,0,rh),ja.update(),Ja.update(),ec.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var n=this._control.getCamera(),r=[new graphicGL.Vector4,new graphicGL.Vector4],a=new graphicGL.Vector4;this.groupGL.getWorldPosition(a),a.w=1,a.transformMat4(n.viewMatrix).transformMat4(n.projectionMatrix),a.x/=a.w,a.y/=a.w,this._axes.forEach(function(s){var o=s.axisLineCoords;s.labelsMesh.geometry;for(var u=0;u<r.length;u++)r[u].setArray(o[u]),r[u].w=1,r[u].transformMat4(s.rootNode.worldTransform).transformMat4(n.viewMatrix).transformMat4(n.projectionMatrix),r[u].x/=r[u].w,r[u].y/=r[u].w;var c=r[1].x-r[0].x,p=r[1].y-r[0].y,d=(r[1].x+r[0].x)/2,_=(r[1].y+r[0].y)/2,ja,Ja;Math.abs(p/c)<.5?(ja="center",Ja=_>a.y?"bottom":"top"):(Ja="middle",ja=d>a.x?"left":"right"),s.setSpriteAlign(ja,Ja,this._api)},this)},_doShowAxisPointer:function(){this._axisPointerLineMesh.invisible&&(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(n){var r=this._model.coordinateSystem,a=r.dataToPoint(n),s=this._axisPointerLineMesh,o=s.geometry,u=this._model.getModel("axisPointer"),c=this._api.getDevicePixelRatio();o.convertToDynamicArray(!0);function p(ch){return retrieve.firstNotNull(ch.model.get("axisPointer.show"),u.get("show"))}function d(ch){var hh=ch.model.getModel("axisPointer",u),dh=hh.getModel("lineStyle"),gh=graphicGL.parseColor(dh.get("color")),fh=firstNotNull(dh.get("width"),1),vh=firstNotNull(dh.get("opacity"),1);return gh[3]*=vh,{color:gh,lineWidth:fh}}for(var _=0;_<this._faces.length;_++){var ja=this._faces[_];if(!ja.rootNode.invisible){for(var Ja=ja.faceInfo,ec=Ja[3]<0?r.getAxis(Ja[2]).getExtentMin():r.getAxis(Ja[2]).getExtentMax(),tc=dimIndicesMap[Ja[2]],rc=0;rc<2;rc++){var nc=Ja[rc],ic=Ja[1-rc],uc=r.getAxis(nc),eh=r.getAxis(ic);if(p(uc)){var rh=[0,0,0],ah=[0,0,0],ih=dimIndicesMap[nc],oh=dimIndicesMap[ic];rh[ih]=ah[ih]=a[ih],rh[tc]=ah[tc]=ec,rh[oh]=eh.getExtentMin(),ah[oh]=eh.getExtentMax();var uh=d(uc);o.addLine(rh,ah,uh.color,uh.lineWidth*c)}}if(p(r.getAxis(Ja[2]))){var rh=a.slice(),ah=a.slice();ah[tc]=ec;var uh=d(r.getAxis(Ja[2]));o.addLine(rh,ah,uh.color,uh.lineWidth*c)}}}o.convertToTypedArray(),this._updateAxisPointerLabelsMesh(n),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(n){var r=this._model,a=this._axisPointerLabelsMesh,s=this._axisPointerLabelsSurface,o=r.coordinateSystem,u=r.getModel("axisPointer");a.geometry.convertToDynamicArray(!0),s.clear();var c={x:"y",y:"x",z:"y"};this._axes.forEach(function(p,d){var _=o.getAxis(p.dim),ja=_.model,Ja=ja.getModel("axisPointer",u),ec=Ja.getModel("label"),tc=Ja.get("lineStyle.color");if(!(!ec.get("show")||!Ja.get("show"))){var rc=n[d],nc=ec.get("formatter"),ic=_.scale.getLabel({value:rc});if(nc!=null)ic=nc(ic,n);else if(_.scale.type==="interval"||_.scale.type==="log"){var uc=getPrecisionSafe(_.scale.getTicks()[0]);ic=rc.toFixed(uc+2)}var eh=ec.get("color"),rh=new ZRText({style:createTextStyle(ec,{text:ic,fill:eh||tc,align:"left",verticalAlign:"top"})}),ah=s.add(rh),ih=rh.getBoundingRect(),oh=this._api.getDevicePixelRatio(),uh=p.rootNode.position.toArray(),ch=dimIndicesMap[c[p.dim]];uh[ch]+=(p.flipped?-1:1)*ec.get("margin"),uh[dimIndicesMap[p.dim]]=_.dataToCoord(n[d]),a.geometry.addSprite(uh,[ih.width*oh,ih.height*oh],ah,p.textAlign,p.textVerticalAlign)}},this),s.getZr().refreshImmediately(),a.material.set("uvScale",s.getCoordsScale()),a.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}});function Cartesian3D(n){Cartesian.call(this,n),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}Cartesian3D.prototype={constructor:Cartesian3D,model:null,containPoint:function(n){return this.getAxis("x").contain(n[0])&&this.getAxis("y").contain(n[2])&&this.getAxis("z").contain(n[1])},containData:function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])&&this.getAxis("z").containData(n[2])},dataToPoint:function(n,r,a){return r=r||[],r[0]=this.getAxis("x").dataToCoord(n[0],a),r[2]=this.getAxis("y").dataToCoord(n[1],a),r[1]=this.getAxis("z").dataToCoord(n[2],a),r},pointToData:function(n,r,a){return r=r||[],r[0]=this.getAxis("x").coordToData(n[0],a),r[1]=this.getAxis("y").coordToData(n[2],a),r[2]=this.getAxis("z").coordToData(n[1],a),r}};inherits(Cartesian3D,Cartesian);function Axis3D(n,r,a){Axis.call(this,n,r,a)}Axis3D.prototype={constructor:Axis3D,getExtentMin:function(){var n=this._extent;return Math.min(n[0],n[1])},getExtentMax:function(){var n=this._extent;return Math.max(n[0],n[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}};inherits(Axis3D,Axis);var TexturePool=function(){this._pool={},this._allocatedTextures=[]};TexturePool.prototype={constructor:TexturePool,get:function(n){var r=generateKey(n);this._pool.hasOwnProperty(r)||(this._pool[r]=[]);var a=this._pool[r];if(!a.length){var s=new Texture2D(n);return this._allocatedTextures.push(s),s}return a.pop()},put:function(n){var r=generateKey(n);this._pool.hasOwnProperty(r)||(this._pool[r]=[]);var a=this._pool[r];a.push(n)},clear:function(n){for(var r=0;r<this._allocatedTextures.length;r++)this._allocatedTextures[r].dispose(n);this._pool={},this._allocatedTextures=[]}};var defaultParams={width:512,height:512,type:glenum.UNSIGNED_BYTE,format:glenum.RGBA,wrapS:glenum.CLAMP_TO_EDGE,wrapT:glenum.CLAMP_TO_EDGE,minFilter:glenum.LINEAR_MIPMAP_LINEAR,magFilter:glenum.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},defaultParamPropList=Object.keys(defaultParams);function generateKey(n){util.defaultsWithPropList(n,defaultParams,defaultParamPropList),fallBack(n);for(var r="",a=0;a<defaultParamPropList.length;a++){var s=defaultParamPropList[a],o=n[s].toString();r+=o}return r}function fallBack(n){var r=isPowerOfTwo(n.width,n.height);n.format===glenum.DEPTH_COMPONENT&&(n.useMipmap=!1),(!r||!n.useMipmap)&&(n.minFilter==glenum.NEAREST_MIPMAP_NEAREST||n.minFilter==glenum.NEAREST_MIPMAP_LINEAR?n.minFilter=glenum.NEAREST:(n.minFilter==glenum.LINEAR_MIPMAP_LINEAR||n.minFilter==glenum.LINEAR_MIPMAP_NEAREST)&&(n.minFilter=glenum.LINEAR)),r||(n.wrapS=glenum.CLAMP_TO_EDGE,n.wrapT=glenum.CLAMP_TO_EDGE)}function isPowerOfTwo(n,r){return(n&n-1)===0&&(r&r-1)===0}const shadowmapEssl=`@export clay.sm.depth.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
uniform vec2 uvRepeat = vec2(1.0, 1.0);
uniform vec2 uvOffset = vec2(0.0, 0.0);
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
void main(){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 v_ViewPosition = worldViewProjection * P;
 gl_Position = v_ViewPosition;
 v_Texcoord = texcoord * uvRepeat + uvOffset;
}
@end
@export clay.sm.depth.fragment
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
uniform float bias : 0.001;
uniform float slopeScale : 1.0;
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.encode_float
void main(){
 float depth = v_ViewPosition.z / v_ViewPosition.w;
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
#ifdef USE_VSM
 depth = depth * 0.5 + 0.5;
 float moment1 = depth;
 float moment2 = depth * depth;
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 moment2 += 0.25*(dx*dx+dy*dy);
 #endif
 gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);
#else
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;
 #else
 depth += bias;
 #endif
 gl_FragColor = encodeFloat(depth * 0.5 + 0.5);
#endif
}
@end
@export clay.sm.debug_depth
uniform sampler2D depthMap;
varying vec2 v_Texcoord;
@import clay.util.decode_float
void main() {
 vec4 tex = texture2D(depthMap, v_Texcoord);
#ifdef USE_VSM
 gl_FragColor = vec4(tex.rgb, 1.0);
#else
 float depth = decodeFloat(tex);
 gl_FragColor = vec4(depth, depth, depth, 1.0);
#endif
}
@end
@export clay.sm.distance.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 world : WORLD;
attribute vec3 position : POSITION;
@import clay.chunk.skinning_header
varying vec3 v_WorldPosition;
void main (){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = worldViewProjection * P;
 v_WorldPosition = (world * P).xyz;
}
@end
@export clay.sm.distance.fragment
uniform vec3 lightPosition;
uniform float range : 100;
varying vec3 v_WorldPosition;
@import clay.util.encode_float
void main(){
 float dist = distance(lightPosition, v_WorldPosition);
#ifdef USE_VSM
 gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);
#else
 dist = dist / range;
 gl_FragColor = encodeFloat(dist);
#endif
}
@end
@export clay.plugin.shadow_map_common
@import clay.util.decode_float
float tapShadowMap(sampler2D map, vec2 uv, float z){
 vec4 tex = texture2D(map, uv);
 return step(z, decodeFloat(tex) * 2.0 - 1.0);
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {
 float shadowContrib = tapShadowMap(map, uv, z);
 vec2 offset = vec2(1.0 / textureSize) * scale;
#ifdef PCF_KERNEL_SIZE
 for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{
 shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);
 }}
 return shadowContrib / float(PCF_KERNEL_SIZE + 1);
#else
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);
 return shadowContrib / 9.0;
#endif
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize) {
 return pcf(map, uv, z, textureSize, vec2(1.0));
}
float chebyshevUpperBound(vec2 moments, float z){
 float p = 0.0;
 z = z * 0.5 + 0.5;
 if (z <= moments.x) {
 p = 1.0;
 }
 float variance = moments.y - moments.x * moments.x;
 variance = max(variance, 0.0000001);
 float mD = moments.x - z;
 float pMax = variance / (variance + mD * mD);
 pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);
 return max(p, pMax);
}
float computeShadowContrib(
 sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset
) {
 vec4 posInLightSpace = lightVPM * vec4(position, 1.0);
 posInLightSpace.xyz /= posInLightSpace.w;
 float z = posInLightSpace.z;
 if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&
 all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){
 vec2 uv = (posInLightSpace.xy+1.0) / 2.0;
 #ifdef USE_VSM
 vec2 moments = texture2D(map, uv * scale + offset).xy;
 return chebyshevUpperBound(moments, z);
 #else
 return pcf(map, uv * scale + offset, z, textureSize, scale);
 #endif
 }
 return 1.0;
}
float computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {
 return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));
}
float computeShadowContribOmni(samplerCube map, vec3 direction, float range)
{
 float dist = length(direction);
 vec4 shadowTex = textureCube(map, direction);
#ifdef USE_VSM
 vec2 moments = shadowTex.xy;
 float variance = moments.y - moments.x * moments.x;
 float mD = moments.x - dist;
 float p = variance / (variance + mD * mD);
 if(moments.x + 0.001 < dist){
 return clamp(p, 0.0, 1.0);
 }else{
 return 1.0;
 }
#else
 return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);
#endif
}
@end
@export clay.plugin.compute_shadow_map
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)
#ifdef SPOT_LIGHT_SHADOWMAP_COUNT
uniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT
#if defined(SHADOW_CASCADE)
uniform sampler2D directionalLightShadowMaps[1]:unconfigurable;
uniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;
uniform float directionalLightShadowMapSizes[1]:unconfigurable;
uniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;
uniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;
#else
uniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#endif
#ifdef POINT_LIGHT_SHADOWMAP_COUNT
uniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
uniform bool shadowEnabled : true;
#ifdef PCF_KERNEL_SIZE
uniform vec2 pcfKernel[PCF_KERNEL_SIZE];
#endif
@import clay.plugin.shadow_map_common
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,
 spotLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
#ifdef SHADOW_CASCADE
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)
 / (gl_DepthRange.far - gl_DepthRange.near);
 float shadowContrib;
 shadowContribs[0] = 1.0;
 for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{
 if (
 depth >= shadowCascadeClipsNear[_idx_] &&
 depth <= shadowCascadeClipsFar[_idx_]
 ) {
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[0],
 vec2(1.0 / float(SHADOW_CASCADE), 1.0),
 vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)
 );
 shadowContribs[0] = shadowContrib;
 }
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#else
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
#if defined(POINT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){
 vec3 lightPosition;
 vec3 direction;
 for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 lightPosition = pointLightPosition[_idx_];
 direction = position - lightPosition;
 shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);
 }}
 for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
@end`;var targets=["px","nx","py","ny","pz","nz"];Shader.import(shadowmapEssl);function getDepthMaterialUniform(n,r,a){if(a==="alphaMap")return n.material.get("diffuseMap");if(a==="alphaCutoff"){if(n.material.isDefined("fragment","ALPHA_TEST")&&n.material.get("diffuseMap")){var s=n.material.get("alphaCutoff");return s||0}return 0}else return a==="uvRepeat"?n.material.get("uvRepeat"):a==="uvOffset"?n.material.get("uvOffset"):r.get(a)}function isDepthMaterialChanged(n,r){var a=n.material,s=r.material;return a.get("diffuseMap")!==s.get("diffuseMap")||(a.get("alphaCutoff")||0)!==(s.get("alphaCutoff")||0)}var ShadowMapPass=Base.extend(function(){return{softShadow:ShadowMapPass.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new FrameBuffer,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new TexturePool}},function(){this._gaussianPassH=new Pass({fragment:Shader.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new Pass({fragment:Shader.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new Pass({fragment:Shader.source("clay.sm.debug_depth")})},{render:function(n,r,a,s){a||(a=r.getMainCamera()),this.trigger("beforerender",this,n,r,a),this._renderShadowPass(n,r,a,s),this.trigger("afterrender",this,n,r,a)},renderDebug:function(n,r){n.saveClear();var a=n.viewport,s=0,o=0,u=r||a.width/4,c=u;this.softShadow===ShadowMapPass.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM");for(var p in this._textures){var d=this._textures[p];n.setViewport(s,o,u*d.width/d.height,c),this._outputDepthPass.setUniform("depthMap",d),this._outputDepthPass.render(n),s+=u*d.width/d.height}n.setViewport(a),n.restoreClear()},_updateReceivers:function(n,r){if(r.receiveShadow?(this._receivers.push(r),r.material.set("shadowEnabled",1),r.material.set("pcfKernel",this.kernelPCF)):r.material.set("shadowEnabled",0),this.softShadow===ShadowMapPass.VSM)r.material.define("fragment","USE_VSM"),r.material.undefine("fragment","PCF_KERNEL_SIZE");else{r.material.undefine("fragment","USE_VSM");var a=this.kernelPCF;a&&a.length?r.material.define("fragment","PCF_KERNEL_SIZE",a.length/2):r.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(n,r){var a=this;r.traverse(function(u){u.isRenderable()&&a._updateReceivers(n,u)});for(var s=0;s<r.lights.length;s++){var o=r.lights[s];o.castShadow&&!o.invisible&&this._lightsCastShadow.push(o)}},_renderShadowPass:function(n,r,a,s){for(var o in this._shadowMapNumber)this._shadowMapNumber[o]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var u=n.gl;if(s||r.update(),a&&a.update(),r.updateLights(),this._update(n,r),!this._lightsCastShadow.length&&this._lastRenderNotCastShadow)return;this._lastRenderNotCastShadow=this._lightsCastShadow===0,u.enable(u.DEPTH_TEST),u.depthMask(!0),u.disable(u.BLEND),u.clearColor(1,1,1,1);for(var c=[],p=[],d=[],_=[],ja=[],Ja=[],ec,tc=0;tc<this._lightsCastShadow.length;tc++){var rc=this._lightsCastShadow[tc];if(rc.type==="DIRECTIONAL_LIGHT"){if(ec){console.warn("Only one direectional light supported with shadow cascade");continue}if(rc.shadowCascade>4){console.warn("Support at most 4 cascade");continue}rc.shadowCascade>1&&(ec=rc),this.renderDirectionalLightShadow(n,r,a,rc,ja,_,d)}else rc.type==="SPOT_LIGHT"?this.renderSpotLightShadow(n,r,rc,p,c):rc.type==="POINT_LIGHT"&&this.renderPointLightShadow(n,r,rc,Ja);this._shadowMapNumber[rc.type]++}for(var nc in this._shadowMapNumber)for(var ic=this._shadowMapNumber[nc],uc=nc+"_SHADOWMAP_COUNT",tc=0;tc<this._receivers.length;tc++){var eh=this._receivers[tc],rh=eh.material;rh.fragmentDefines[uc]!==ic&&(ic>0?rh.define("fragment",uc,ic):rh.isDefined("fragment",uc)&&rh.undefine("fragment",uc))}for(var tc=0;tc<this._receivers.length;tc++){var eh=this._receivers[tc],rh=eh.material;ec?rh.define("fragment","SHADOW_CASCADE",ec.shadowCascade):rh.undefine("fragment","SHADOW_CASCADE")}var ah=r.shadowUniforms;function ih(dh){return dh.height}if(d.length>0){var oh=d.map(ih);if(ah.directionalLightShadowMaps={value:d,type:"tv"},ah.directionalLightMatrices={value:_,type:"m4v"},ah.directionalLightShadowMapSizes={value:oh,type:"1fv"},ec){var uh=ja.slice(),ch=ja.slice();uh.pop(),ch.shift(),uh.reverse(),ch.reverse(),_.reverse(),ah.shadowCascadeClipsNear={value:uh,type:"1fv"},ah.shadowCascadeClipsFar={value:ch,type:"1fv"}}}if(c.length>0){var hh=c.map(ih),ah=r.shadowUniforms;ah.spotLightShadowMaps={value:c,type:"tv"},ah.spotLightMatrices={value:p,type:"m4v"},ah.spotLightShadowMapSizes={value:hh,type:"1fv"}}Ja.length>0&&(ah.pointLightShadowMaps={value:Ja,type:"tv"})},renderDirectionalLightShadow:function(){var n=new Frustum,r=new Matrix4,a=new BoundingBox,s=new Matrix4,o=new Matrix4,u=new Matrix4,c=new Matrix4;return function(p,d,_,ja,Ja,ec,tc){var rc=this._getDepthMaterial(ja),nc={getMaterial:function(Nh){return Nh.shadowDepthMaterial||rc},isMaterialChanged:isDepthMaterialChanged,getUniform:getDepthMaterialUniform,ifRender:function(Nh){return Nh.castShadow},sortCompare:Renderer.opaqueSortCompare};if(!d.viewBoundingBoxLastFrame.isFinite()){var ic=d.getBoundingBox();d.viewBoundingBoxLastFrame.copy(ic).applyTransform(_.viewMatrix)}var uc=Math.min(-d.viewBoundingBoxLastFrame.min.z,_.far),eh=Math.max(-d.viewBoundingBoxLastFrame.max.z,_.near),rh=this._getDirectionalLightCamera(ja,d,_),ah=u.array;c.copy(rh.projectionMatrix),mat4$2.invert(o.array,rh.worldTransform.array),mat4$2.multiply(o.array,o.array,_.worldTransform.array),mat4$2.multiply(ah,c.array,o.array);for(var ih=[],oh=_ instanceof Perspective,uh=(_.near+_.far)/(_.near-_.far),ch=2*_.near*_.far/(_.near-_.far),hh=0;hh<=ja.shadowCascade;hh++){var dh=eh*Math.pow(uc/eh,hh/ja.shadowCascade),gh=eh+(uc-eh)*hh/ja.shadowCascade,fh=dh*ja.cascadeSplitLogFactor+gh*(1-ja.cascadeSplitLogFactor);ih.push(fh),Ja.push(-(-fh*uh+ch)/-fh)}var vh=this._getTexture(ja,ja.shadowCascade);tc.push(vh);var ph=p.viewport,yh=p.gl;this._frameBuffer.attach(vh),this._frameBuffer.bind(p),yh.clear(yh.COLOR_BUFFER_BIT|yh.DEPTH_BUFFER_BIT);for(var hh=0;hh<ja.shadowCascade;hh++){var xh=ih[hh],_h=ih[hh+1];oh?mat4$2.perspective(r.array,_.fov/180*Math.PI,_.aspect,xh,_h):mat4$2.ortho(r.array,_.left,_.right,_.bottom,_.top,xh,_h),n.setFromProjection(r),n.getTransformedBoundingBox(a,o),a.applyProjection(c);var bh=a.min.array,Dh=a.max.array;bh[0]=Math.max(bh[0],-1),bh[1]=Math.max(bh[1],-1),Dh[0]=Math.min(Dh[0],1),Dh[1]=Math.min(Dh[1],1),s.ortho(bh[0],Dh[0],bh[1],Dh[1],1,-1),rh.projectionMatrix.multiplyLeft(s);var Th=ja.shadowResolution||512;p.setViewport((ja.shadowCascade-hh-1)*Th,0,Th,Th,1);var Ch=d.updateRenderList(rh);p.renderPass(Ch.opaque,rh,nc),this.softShadow===ShadowMapPass.VSM&&this._gaussianFilter(p,vh,vh.width);var wh=new Matrix4;wh.copy(rh.viewMatrix).multiplyLeft(rh.projectionMatrix),ec.push(wh.array),rh.projectionMatrix.copy(c)}this._frameBuffer.unbind(p),p.setViewport(ph)}}(),renderSpotLightShadow:function(n,r,a,s,o){var u=this._getTexture(a),c=this._getSpotLightCamera(a),p=n.gl;this._frameBuffer.attach(u),this._frameBuffer.bind(n),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT);var d=this._getDepthMaterial(a),_={getMaterial:function(ec){return ec.shadowDepthMaterial||d},isMaterialChanged:isDepthMaterialChanged,getUniform:getDepthMaterialUniform,ifRender:function(ec){return ec.castShadow},sortCompare:Renderer.opaqueSortCompare},ja=r.updateRenderList(c);n.renderPass(ja.opaque,c,_),this._frameBuffer.unbind(n),this.softShadow===ShadowMapPass.VSM&&this._gaussianFilter(n,u,u.width);var Ja=new Matrix4;Ja.copy(c.worldTransform).invert().multiplyLeft(c.projectionMatrix),o.push(u),s.push(Ja.array)},renderPointLightShadow:function(n,r,a,s){var o=this._getTexture(a),u=n.gl;s.push(o);var c=this._getDepthMaterial(a),p={getMaterial:function(eh){return eh.shadowDepthMaterial||c},getUniform:getDepthMaterialUniform,sortCompare:Renderer.opaqueSortCompare},d={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},_=new BoundingBox,ja=a.getWorldPosition().array,Ja=new BoundingBox,ec=a.range;Ja.min.setArray(ja),Ja.max.setArray(ja);var tc=new Vector3(ec,ec,ec);Ja.max.add(tc),Ja.min.sub(tc);var rc={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};r.traverse(function(eh){if(eh.isRenderable()&&eh.castShadow){var rh=eh.geometry;if(!rh.boundingBox){for(var ah=0;ah<targets.length;ah++)d[targets[ah]].push(eh);return}if(_.transformFrom(rh.boundingBox,eh.worldTransform),!_.intersectBoundingBox(Ja))return;_.updateVertices();for(var ah=0;ah<targets.length;ah++)rc[targets[ah]]=!1;for(var ah=0;ah<8;ah++){var ih=_.vertices[ah],oh=ih[0]-ja[0],uh=ih[1]-ja[1],ch=ih[2]-ja[2],hh=Math.abs(oh),dh=Math.abs(uh),gh=Math.abs(ch);hh>dh?hh>gh?rc[oh>0?"px":"nx"]=!0:rc[ch>0?"pz":"nz"]=!0:dh>gh?rc[uh>0?"py":"ny"]=!0:rc[ch>0?"pz":"nz"]=!0}for(var ah=0;ah<targets.length;ah++)rc[targets[ah]]&&d[targets[ah]].push(eh)}});for(var nc=0;nc<6;nc++){var ic=targets[nc],uc=this._getPointLightCamera(a,ic);this._frameBuffer.attach(o,u.COLOR_ATTACHMENT0,u.TEXTURE_CUBE_MAP_POSITIVE_X+nc),this._frameBuffer.bind(n),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),n.renderPass(d[ic],uc,p)}this._frameBuffer.unbind(n)},_getDepthMaterial:function(n){var r=this._lightMaterials[n.__uid__],a=n.type==="POINT_LIGHT";if(!r){var s=a?"clay.sm.distance.":"clay.sm.depth.";r=new Material({precision:this.precision,shader:new Shader(Shader.source(s+"vertex"),Shader.source(s+"fragment"))}),this._lightMaterials[n.__uid__]=r}return n.shadowSlopeScale!=null&&r.setUniform("slopeScale",n.shadowSlopeScale),n.shadowBias!=null&&r.setUniform("bias",n.shadowBias),this.softShadow===ShadowMapPass.VSM?r.define("fragment","USE_VSM"):r.undefine("fragment","USE_VSM"),a&&(r.set("lightPosition",n.getWorldPosition().array),r.set("range",n.range)),r},_gaussianFilter:function(n,r,a){var s={width:a,height:a,type:Texture.FLOAT},o=this._texturePool.get(s);this._frameBuffer.attach(o),this._frameBuffer.bind(n),this._gaussianPassH.setUniform("texture",r),this._gaussianPassH.setUniform("textureWidth",a),this._gaussianPassH.render(n),this._frameBuffer.attach(r),this._gaussianPassV.setUniform("texture",o),this._gaussianPassV.setUniform("textureHeight",a),this._gaussianPassV.render(n),this._frameBuffer.unbind(n),this._texturePool.put(o)},_getTexture:function(n,r){var a=n.__uid__,s=this._textures[a],o=n.shadowResolution||512;return r=r||1,s||(n.type==="POINT_LIGHT"?s=new TextureCube:s=new Texture2D,s.width=o*r,s.height=o,this.softShadow===ShadowMapPass.VSM?(s.type=Texture.FLOAT,s.anisotropic=4):(s.minFilter=glenum.NEAREST,s.magFilter=glenum.NEAREST,s.useMipmap=!1),this._textures[a]=s),s},_getPointLightCamera:function(n,r){this._lightCameras.point||(this._lightCameras.point={px:new Perspective,nx:new Perspective,py:new Perspective,ny:new Perspective,pz:new Perspective,nz:new Perspective});var a=this._lightCameras.point[r];switch(a.far=n.range,a.fov=90,a.position.set(0,0,0),r){case"px":a.lookAt(Vector3.POSITIVE_X,Vector3.NEGATIVE_Y);break;case"nx":a.lookAt(Vector3.NEGATIVE_X,Vector3.NEGATIVE_Y);break;case"py":a.lookAt(Vector3.POSITIVE_Y,Vector3.POSITIVE_Z);break;case"ny":a.lookAt(Vector3.NEGATIVE_Y,Vector3.NEGATIVE_Z);break;case"pz":a.lookAt(Vector3.POSITIVE_Z,Vector3.NEGATIVE_Y);break;case"nz":a.lookAt(Vector3.NEGATIVE_Z,Vector3.NEGATIVE_Y);break}return n.getWorldPosition(a.position),a.update(),a},_getDirectionalLightCamera:function(){var n=new Matrix4,r=new BoundingBox,a=new BoundingBox;return function(s,o,u){this._lightCameras.directional||(this._lightCameras.directional=new Orthographic);var c=this._lightCameras.directional;r.copy(o.viewBoundingBoxLastFrame),r.intersection(u.frustum.boundingBox),c.position.copy(r.min).add(r.max).scale(.5).transformMat4(u.worldTransform),c.rotation.copy(s.rotation),c.scale.copy(s.scale),c.updateWorldTransform(),Matrix4.invert(n,c.worldTransform),Matrix4.multiply(n,n,u.worldTransform),a.copy(r).applyTransform(n);var p=a.min.array,d=a.max.array;return c.position.set((p[0]+d[0])/2,(p[1]+d[1])/2,d[2]).transformMat4(c.worldTransform),c.near=0,c.far=-p[2]+d[2],isNaN(this.lightFrustumBias)?c.far*=4:c.far+=this.lightFrustumBias,c.left=p[0],c.right=d[0],c.top=d[1],c.bottom=p[1],c.update(!0),c}}(),_getSpotLightCamera:function(n){this._lightCameras.spot||(this._lightCameras.spot=new Perspective);var r=this._lightCameras.spot;return r.fov=n.penumbraAngle*2,r.far=n.range,r.worldTransform.copy(n.worldTransform),r.updateProjectionMatrix(),mat4$2.invert(r.viewMatrix.array,r.worldTransform.array),r},dispose:function(n){var r=n.gl||n;this._frameBuffer&&this._frameBuffer.dispose(r);for(var a in this._textures)this._textures[a].dispose(r);this._texturePool.clear(n.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var s=0;s<this._receivers.length;s++){var o=this._receivers[s];if(o.material){var u=o.material;u.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),u.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),u.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),u.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});ShadowMapPass.VSM=1;ShadowMapPass.PCF=2;var CompositorNode=Base.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(n,r){var a=this.outputs[n],s=a.parameters,o=a._parametersCopy;if(o||(o=a._parametersCopy={}),s)for(var u in s)u!=="width"&&u!=="height"&&(o[u]=s[u]);var c,p;return s.width instanceof Function?c=s.width.call(this,r):c=s.width,s.height instanceof Function?p=s.height.call(this,r):p=s.height,(o.width!==c||o.height!==p)&&this._outputTextures[n]&&this._outputTextures[n].dispose(r.gl),o.width=c,o.height=p,o},setParameter:function(n,r){},getParameter:function(n){},setParameters:function(n){for(var r in n)this.setParameter(r,n[r])},render:function(){},getOutput:function(n,r){if(r==null)return r=n,this._outputTextures[r];var a=this.outputs[r];if(a)return this._rendered?a.outputLastFrame?this._prevOutputTextures[r]:this._outputTextures[r]:this._rendering?(this._prevOutputTextures[r]||(this._prevOutputTextures[r]=this._compositor.allocateTexture(a.parameters||{})),this._prevOutputTextures[r]):(this.render(n),this._outputTextures[r])},removeReference:function(n){if(this._outputReferences[n]--,this._outputReferences[n]===0){var r=this.outputs[n];r.keepLastFrame?(this._prevOutputTextures[n]&&this._compositor.releaseTexture(this._prevOutputTextures[n]),this._prevOutputTextures[n]=this._outputTextures[n]):this._compositor.releaseTexture(this._outputTextures[n])}},link:function(n,r,a){this.inputLinks[n]={node:r,pin:a},r.outputLinks[a]||(r.outputLinks[a]=[]),r.outputLinks[a].push({node:this,pin:n}),this.pass.material.enableTexture(n)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(n){if(!this._rendering){this._rendering=!0;for(var r in this.inputLinks){var a=this.inputLinks[r];a.node.updateReference(a.pin)}this._rendering=!1}n&&this._outputReferences[n]++},beforeFrame:function(){this._rendered=!1;for(var n in this.outputLinks)this._outputReferences[n]=0},afterFrame:function(){for(var n in this.outputLinks)if(this._outputReferences[n]>0){var r=this.outputs[n];r.keepLastFrame?(this._prevOutputTextures[n]&&this._compositor.releaseTexture(this._prevOutputTextures[n]),this._prevOutputTextures[n]=this._outputTextures[n]):this._compositor.releaseTexture(this._outputTextures[n])}}}),Graph=Base.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(n){this.nodes.indexOf(n)>=0||(this.nodes.push(n),this._dirty=!0)},removeNode:function(n){typeof n=="string"&&(n=this.getNodeByName(n));var r=this.nodes.indexOf(n);r>=0&&(this.nodes.splice(r,1),this._dirty=!0)},getNodeByName:function(n){for(var r=0;r<this.nodes.length;r++)if(this.nodes[r].name===n)return this.nodes[r]},update:function(){for(var n=0;n<this.nodes.length;n++)this.nodes[n].clear();for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n];if(r.inputs){for(var a in r.inputs)if(r.inputs[a]){if(r.pass&&!r.pass.material.isUniformEnabled(a)){console.warn("Pin "+r.name+"."+a+" not used.");continue}var s=r.inputs[a],o=this.findPin(s);o?r.link(a,o.node,o.pin):console.warn(typeof s=="string"?"Node "+s+" not exist":"Pin of "+s.node+"."+s.pin+" not exist")}}}},findPin:function(n){var r;if((typeof n=="string"||n instanceof CompositorNode)&&(n={node:n}),typeof n.node=="string")for(var a=0;a<this.nodes.length;a++){var s=this.nodes[a];s.name===n.node&&(r=s)}else r=n.node;if(r){var o=n.pin;if(o||r.outputs&&(o=Object.keys(r.outputs)[0]),r.outputs[o])return{node:r,pin:o}}}}),Compositor=Graph.extend(function(){return{_outputs:[],_texturePool:new TexturePool,_frameBuffer:new FrameBuffer({depthBuffer:!1})}},{addNode:function(n){Graph.prototype.addNode.call(this,n),n._compositor=this},render:function(n,r){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var a=0;a<this.nodes.length;a++)this.nodes[a].outputs||this._outputs.push(this.nodes[a])}for(var a=0;a<this.nodes.length;a++)this.nodes[a].beforeFrame();for(var a=0;a<this._outputs.length;a++)this._outputs[a].updateReference();for(var a=0;a<this._outputs.length;a++)this._outputs[a].render(n,r);for(var a=0;a<this.nodes.length;a++)this.nodes[a].afterFrame()},allocateTexture:function(n){return this._texturePool.get(n)},releaseTexture:function(n){this._texturePool.put(n)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(n){this._texturePool.clear(n)}}),SceneNode=CompositorNode.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new FrameBuffer},{render:function(n){this._rendering=!0;var r=n.gl;this.trigger("beforerender");var a;if(!this.outputs)a=n.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);else{var s=this.frameBuffer;for(var o in this.outputs){var u=this.updateParameter(o,n),c=this.outputs[o],p=this._compositor.allocateTexture(u);this._outputTextures[o]=p;var d=c.attachment||r.COLOR_ATTACHMENT0;typeof d=="string"&&(d=r[d]),s.attach(p,d)}s.bind(n);var _=n.getGLExtension("EXT_draw_buffers");if(_){var ja=[];for(var d in this.outputs)d=parseInt(d),d>=r.COLOR_ATTACHMENT0&&d<=r.COLOR_ATTACHMENT0+8&&ja.push(d);_.drawBuffersEXT(ja)}n.saveClear(),n.clearBit=glenum.DEPTH_BUFFER_BIT|glenum.COLOR_BUFFER_BIT,a=n.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),n.restoreClear(),s.unbind(n)}this.trigger("afterrender",a),this._rendering=!1,this._rendered=!0}}),TextureNode=CompositorNode.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(n,r){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),FilterNode=CompositorNode.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var n=new Pass({fragment:this.shader});this.pass=n},{render:function(n,r){this.trigger("beforerender",n),this._rendering=!0;var a=n.gl;for(var s in this.inputLinks){var o=this.inputLinks[s],u=o.node.getOutput(n,o.pin);this.pass.setUniform(s,u)}if(!this.outputs)this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(n),this.pass.render(n,r);else{this.pass.outputs={};var c={};for(var p in this.outputs){var d=this.updateParameter(p,n);isNaN(d.width)&&this.updateParameter(p,n);var _=this.outputs[p],ja=this._compositor.allocateTexture(d);this._outputTextures[p]=ja;var Ja=_.attachment||a.COLOR_ATTACHMENT0;typeof Ja=="string"&&(Ja=a[Ja]),c[Ja]=ja}this._compositor.getFrameBuffer().bind(n);for(var Ja in c)this._compositor.getFrameBuffer().attach(c[Ja],Ja);this.pass.render(n),this._compositor.getFrameBuffer().updateMipmap(n)}for(var s in this.inputLinks){var o=this.inputLinks[s];o.node.removeReference(o.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",n)},updateParameter:function(n,r){var a=this.outputs[n],s=a.parameters,o=a._parametersCopy;if(o||(o=a._parametersCopy={}),s)for(var u in s)u!=="width"&&u!=="height"&&(o[u]=s[u]);var c,p;return typeof s.width=="function"?c=s.width.call(this,r):c=s.width,typeof s.height=="function"?p=s.height.call(this,r):p=s.height,c=Math.ceil(c),p=Math.ceil(p),(o.width!==c||o.height!==p)&&this._outputTextures[n]&&this._outputTextures[n].dispose(r),o.width=c,o.height=p,o},setParameter:function(n,r){this.pass.setUniform(n,r)},getParameter:function(n){return this.pass.getUniform(n)},setParameters:function(n){for(var r in n)this.setParameter(r,n[r])},define:function(n,r){this.pass.material.define("fragment",n,r)},undefine:function(n){this.pass.material.undefine("fragment",n)},removeReference:function(n){if(this._outputReferences[n]--,this._outputReferences[n]===0){var r=this.outputs[n];r.keepLastFrame?(this._prevOutputTextures[n]&&this._compositor.releaseTexture(this._prevOutputTextures[n]),this._prevOutputTextures[n]=this._outputTextures[n]):this._compositor.releaseTexture(this._outputTextures[n])}},clear:function(){CompositorNode.prototype.clear.call(this),this.pass.material.disableTexturesAll()}});const coloradjustEssl=`@export clay.compositor.coloradjust
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float exposure : 0.0;
uniform float gamma : 1.0;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);
 color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 color = clamp( color * pow(2.0, exposure), 0.0, 1.0);
 color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);
 float luminance = dot( color, w );
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.brightness
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = tex.rgb + vec3(brightness);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.contrast
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float contrast : 1.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.exposure
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float exposure : 0.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb * pow(2.0, exposure);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.gamma
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float gamma : 1.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = pow(tex.rgb, vec3(gamma));
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.saturation
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb;
 float luminance = dot(color, w);
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end`,blurCode=`@export clay.compositor.kernel.gaussian_9
float gaussianKernel[9];
gaussianKernel[0] = 0.07;
gaussianKernel[1] = 0.09;
gaussianKernel[2] = 0.12;
gaussianKernel[3] = 0.14;
gaussianKernel[4] = 0.16;
gaussianKernel[5] = 0.14;
gaussianKernel[6] = 0.12;
gaussianKernel[7] = 0.09;
gaussianKernel[8] = 0.07;
@end
@export clay.compositor.kernel.gaussian_13
float gaussianKernel[13];
gaussianKernel[0] = 0.02;
gaussianKernel[1] = 0.03;
gaussianKernel[2] = 0.06;
gaussianKernel[3] = 0.08;
gaussianKernel[4] = 0.11;
gaussianKernel[5] = 0.13;
gaussianKernel[6] = 0.14;
gaussianKernel[7] = 0.13;
gaussianKernel[8] = 0.11;
gaussianKernel[9] = 0.08;
gaussianKernel[10] = 0.06;
gaussianKernel[11] = 0.03;
gaussianKernel[12] = 0.02;
@end
@export clay.compositor.gaussian_blur
#define SHADER_NAME gaussian_blur
uniform sampler2D texture;varying vec2 v_Texcoord;
uniform float blurSize : 2.0;
uniform vec2 textureSize : [512.0, 512.0];
uniform float blurDir : 0.0;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main (void)
{
 @import clay.compositor.kernel.gaussian_9
 vec2 off = blurSize / textureSize;
 off *= vec2(1.0 - blurDir, blurDir);
 vec4 sum = vec4(0.0);
 float weightAll = 0.0;
 for (int i = 0; i < 9; i++) {
 float w = gaussianKernel[i];
 vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));
 sum += texel * w;
 weightAll += w;
 }
 gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));
}
@end
`,lumEssl=`@export clay.compositor.hdr.log_lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 float luminance = dot(tex.rgb, w);
 luminance = log(luminance + 0.001);
 gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));
}
@end
@export clay.compositor.hdr.lum_adaption
varying vec2 v_Texcoord;
uniform sampler2D adaptedLum;
uniform sampler2D currentLum;
uniform float frameTime : 0.02;
@import clay.util.rgbm
void main()
{
 float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;
 float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);
 fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));
 gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));
}
@end
@export clay.compositor.lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord );
 float luminance = dot(tex.rgb, w);
 gl_FragColor = vec4(vec3(luminance), 1.0);
}
@end`,lutCode=`
@export clay.compositor.lut
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform sampler2D lookup;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 float blueColor = tex.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec4 newColor1 = texture2D(lookup, texPos1);
 vec4 newColor2 = texture2D(lookup, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 gl_FragColor = vec4(newColor.rgb, tex.w);
}
@end`,vigentteEssl=`@export clay.compositor.vignette
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float darkness: 1;
uniform float offset: 1;
@import clay.util.rgbm
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = texel.rgb;
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);
 gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));
}
@end`,outputCode=`@export clay.compositor.output
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = tex.rgb;
#ifdef OUTPUT_ALPHA
 gl_FragColor.a = tex.a;
#else
 gl_FragColor.a = 1.0;
#endif
 gl_FragColor = encodeHDR(gl_FragColor);
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,brightCode=`@export clay.compositor.bright
uniform sampler2D texture;
uniform float threshold : 1;
uniform float scale : 1.0;
uniform vec2 textureSize: [512, 512];
varying vec2 v_Texcoord;
const vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
vec4 median(vec4 a, vec4 b, vec4 c)
{
 return a + b + c - min(min(a, b), c) - max(max(a, b), c);
}
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
#ifdef ANTI_FLICKER
 vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);
 vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));
 vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));
 vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));
 vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));
 texel = median(median(texel, s1, s2), s3, s4);
#endif
 float lum = dot(texel.rgb , lumWeight);
 vec4 color;
 if (lum > threshold && texel.a > 0.0)
 {
 color = vec4(texel.rgb * scale, texel.a * scale);
 }
 else
 {
 color = vec4(0.0);
 }
 gl_FragColor = encodeHDR(color);
}
@end
`,downsampleCode=`@export clay.compositor.downsample
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
varying vec2 v_Texcoord;
@import clay.util.rgbm
float brightness(vec3 c)
{
 return max(max(c.r, c.g), c.b);
}
@import clay.util.clamp_sample
void main()
{
 vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;
#ifdef ANTI_FLICKER
 vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;
 vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;
 vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;
 vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;
 float s1w = 1.0 / (brightness(s1) + 1.0);
 float s2w = 1.0 / (brightness(s2) + 1.0);
 float s3w = 1.0 / (brightness(s3) + 1.0);
 float s4w = 1.0 / (brightness(s4) + 1.0);
 float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);
 vec4 color = vec4(
 (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,
 1.0
 );
#else
 vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 color *= 0.25;
#endif
 gl_FragColor = encodeHDR(color);
}
@end`,upsampleCode=`
@export clay.compositor.upsample
#define HIGH_QUALITY
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
uniform float sampleScale: 0.5;
varying vec2 v_Texcoord;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main()
{
#ifdef HIGH_QUALITY
 vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 gl_FragColor = encodeHDR(s / 16.0);
#else
 vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 gl_FragColor = encodeHDR(s / 4.0);
#endif
}
@end`,hdrCode=`@export clay.compositor.hdr.composite
#define TONEMAPPING
uniform sampler2D texture;
#ifdef BLOOM_ENABLED
uniform sampler2D bloom;
#endif
#ifdef LENSFLARE_ENABLED
uniform sampler2D lensflare;
uniform sampler2D lensdirt;
#endif
#ifdef LUM_ENABLED
uniform sampler2D lum;
#endif
#ifdef LUT_ENABLED
uniform sampler2D lut;
#endif
#ifdef COLOR_CORRECTION
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float saturation : 1.0;
#endif
#ifdef VIGNETTE
uniform float vignetteDarkness: 1.0;
uniform float vignetteOffset: 1.0;
#endif
uniform float exposure : 1.0;
uniform float bloomIntensity : 0.25;
uniform float lensflareIntensity : 1;
varying vec2 v_Texcoord;
@import clay.util.srgb
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
float eyeAdaption(float fLum)
{
 return mix(0.2, fLum, 0.5);
}
#ifdef LUT_ENABLED
vec3 lutTransform(vec3 color) {
 float blueColor = color.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec4 newColor1 = texture2D(lut, texPos1);
 vec4 newColor2 = texture2D(lut, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 return newColor.rgb;
}
#endif
@import clay.util.rgbm
void main()
{
 vec4 texel = vec4(0.0);
 vec4 originalTexel = vec4(0.0);
#ifdef TEXTURE_ENABLED
 texel = decodeHDR(texture2D(texture, v_Texcoord));
 originalTexel = texel;
#endif
#ifdef BLOOM_ENABLED
 vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));
 texel.rgb += bloomTexel.rgb * bloomIntensity;
 texel.a += bloomTexel.a * bloomIntensity;
#endif
#ifdef LENSFLARE_ENABLED
 texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;
#endif
 texel.a = min(texel.a, 1.0);
#ifdef LUM_ENABLED
 float fLum = texture2D(lum, vec2(0.5, 0.5)).r;
 float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));
 float exposureBias = adaptedLumDest * exposure;
#else
 float exposureBias = exposure;
#endif
#ifdef TONEMAPPING
 texel.rgb *= exposureBias;
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
 texel = linearTosRGB(texel);
#ifdef LUT_ENABLED
 texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));
#endif
#ifdef COLOR_CORRECTION
 texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);
 texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));
 texel.rgb = mix(vec3(lum), texel.rgb, saturation);
#endif
#ifdef VIGNETTE
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);
 texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));
#endif
 gl_FragColor = encodeHDR(texel);
#ifdef DEBUG
 #if DEBUG == 1
 gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));
 #elif DEBUG == 2
 gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);
 #elif DEBUG == 3
 gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));
 #endif
#endif
 if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {
 gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));
 }
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,lensflareEssl=`@export clay.compositor.lensflare
#define SAMPLE_NUMBER 8
uniform sampler2D texture;
uniform sampler2D lenscolor;
uniform vec2 textureSize : [512, 512];
uniform float dispersal : 0.3;
uniform float haloWidth : 0.4;
uniform float distortion : 1.0;
varying vec2 v_Texcoord;
@import clay.util.rgbm
vec4 textureDistorted(
 in vec2 texcoord,
 in vec2 direction,
 in vec3 distortion
) {
 return vec4(
 decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,
 1.0
 );
}
void main()
{
 vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;
 vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;
 vec2 haloVec = normalize(ghostVec) * haloWidth;
 vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);
 vec4 result = vec4(0.0);
 for (int i = 0; i < SAMPLE_NUMBER; i++)
 {
 vec2 offset = fract(texcoord + ghostVec * float(i));
 float weight = length(vec2(0.5) - offset) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 }
 result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));
 float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 vec2 offset = fract(texcoord + haloVec);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 gl_FragColor = result;
}
@end`,blendCode=`@export clay.compositor.blend
#define SHADER_NAME blend
#ifdef TEXTURE1_ENABLED
uniform sampler2D texture1;
uniform float weight1 : 1.0;
#endif
#ifdef TEXTURE2_ENABLED
uniform sampler2D texture2;
uniform float weight2 : 1.0;
#endif
#ifdef TEXTURE3_ENABLED
uniform sampler2D texture3;
uniform float weight3 : 1.0;
#endif
#ifdef TEXTURE4_ENABLED
uniform sampler2D texture4;
uniform float weight4 : 1.0;
#endif
#ifdef TEXTURE5_ENABLED
uniform sampler2D texture5;
uniform float weight5 : 1.0;
#endif
#ifdef TEXTURE6_ENABLED
uniform sampler2D texture6;
uniform float weight6 : 1.0;
#endif
varying vec2 v_Texcoord;
@import clay.util.rgbm
void main()
{
 vec4 tex = vec4(0.0);
#ifdef TEXTURE1_ENABLED
 tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;
#endif
#ifdef TEXTURE2_ENABLED
 tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;
#endif
#ifdef TEXTURE3_ENABLED
 tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;
#endif
#ifdef TEXTURE4_ENABLED
 tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;
#endif
#ifdef TEXTURE5_ENABLED
 tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;
#endif
#ifdef TEXTURE6_ENABLED
 tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;
#endif
 gl_FragColor = encodeHDR(tex);
}
@end`,fxaaCode=`@export clay.compositor.fxaa
uniform sampler2D texture;
uniform vec4 viewport : VIEWPORT;
varying vec2 v_Texcoord;
#define FXAA_REDUCE_MIN (1.0/128.0)
#define FXAA_REDUCE_MUL (1.0/8.0)
#define FXAA_SPAN_MAX 8.0
@import clay.util.rgbm
void main()
{
 vec2 resolution = 1.0 / viewport.zw;
 vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;
 vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );
 vec3 rgbM = rgbaM.xyz;
 float opacity = rgbaM.w;
 vec3 luma = vec3( 0.299, 0.587, 0.114 );
 float lumaNW = dot( rgbNW, luma );
 float lumaNE = dot( rgbNE, luma );
 float lumaSW = dot( rgbSW, luma );
 float lumaSE = dot( rgbSE, luma );
 float lumaM = dot( rgbM, luma );
 float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
 float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );
 vec2 dir;
 dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
 dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));
 float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );
 float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
 dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),
 max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
 dir * rcpDirMin)) * resolution;
 vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA *= 0.5;
 vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;
 rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;
 rgbB *= 0.25;
 rgbB += rgbA * 0.5;
 float lumaB = dot( rgbB, luma );
 if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )
 {
 gl_FragColor = vec4( rgbA, opacity );
 }
 else {
 gl_FragColor = vec4( rgbB, opacity );
 }
}
@end`;function register(n){n.import(coloradjustEssl),n.import(blurCode),n.import(lumEssl),n.import(lutCode),n.import(vigentteEssl),n.import(outputCode),n.import(brightCode),n.import(downsampleCode),n.import(upsampleCode),n.import(hdrCode),n.import(lensflareEssl),n.import(blendCode),n.import(fxaaCode)}register(Shader);var shaderSourceReg=/^#source\((.*?)\)/;function createCompositor(n,r){var a=new Compositor;r=r||{};var s={textures:{},parameters:{}},o=function(p,d){for(var _=0;_<n.nodes.length;_++){var ja=n.nodes[_],Ja=createNode(ja,s,r);Ja&&a.addNode(Ja)}};for(var u in n.parameters){var c=n.parameters[u];s.parameters[u]=convertParameter(c)}return loadTextures(n,s,r,function(p){s.textures=p,o()}),a}function createNode(n,r,a){var s=n.type||"filter",o,u,c;if(s==="filter"){var p=n.shader.trim(),d=shaderSourceReg.exec(p);if(d?o=Shader.source(d[1].trim()):p.charAt(0)==="#"&&(o=r.shaders[p.substr(1)]),o||(o=p),!o)return}if(n.inputs){u={};for(var _ in n.inputs)typeof n.inputs[_]=="string"?u[_]=n.inputs[_]:u[_]={node:n.inputs[_].node,pin:n.inputs[_].pin}}if(n.outputs){c={};for(var _ in n.outputs){var ja=n.outputs[_];c[_]={},ja.attachment!=null&&(c[_].attachment=ja.attachment),ja.keepLastFrame!=null&&(c[_].keepLastFrame=ja.keepLastFrame),ja.outputLastFrame!=null&&(c[_].outputLastFrame=ja.outputLastFrame),ja.parameters&&(c[_].parameters=convertParameter(ja.parameters))}}var Ja;if(s==="scene"?Ja=new SceneNode({name:n.name,scene:a.scene,camera:a.camera,outputs:c}):s==="texture"?Ja=new TextureNode({name:n.name,outputs:c}):Ja=new FilterNode({name:n.name,shader:o,inputs:u,outputs:c}),Ja){if(n.parameters)for(var _ in n.parameters){var ec=n.parameters[_];typeof ec=="string"?(ec=ec.trim(),ec.charAt(0)==="#"?ec=r.textures[ec.substr(1)]:Ja.on("beforerender",createSizeSetHandler(_,tryConvertExpr(ec)))):typeof ec=="function"&&Ja.on("beforerender",ec),Ja.setParameter(_,ec)}if(n.defines&&Ja.pass)for(var _ in n.defines){var ec=n.defines[_];Ja.pass.material.define("fragment",_,ec)}}return Ja}function defaultWidthFunc(n,r){return n}function defaultHeightFunc(n,r){return r}function convertParameter(n){var r={};if(!n)return r;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(s){var o=n[s];o!=null&&(typeof o=="string"&&(o=Texture[o]),r[s]=o)});var a=n.scale||1;return["width","height"].forEach(function(s){if(n[s]!=null){var o=n[s];typeof o=="string"?(o=o.trim(),r[s]=createSizeParser(s,tryConvertExpr(o),a)):r[s]=o}}),r.width||(r.width=defaultWidthFunc),r.height||(r.height=defaultHeightFunc),n.useMipmap!=null&&(r.useMipmap=n.useMipmap),r}function loadTextures(n,r,a,s){if(!n.textures){s({});return}var o={},u=0,c=!1,p=a.textureRootPath;util.each(n.textures,function(d,_){var ja,Ja=d.path,ec=convertParameter(d.parameters);if(Array.isArray(Ja)&&Ja.length===6)p&&(Ja=Ja.map(function(tc){return util.relative2absolute(tc,p)})),ja=new TextureCube(ec);else if(typeof Ja=="string")p&&(Ja=util.relative2absolute(Ja,p)),ja=new Texture2D(ec);else return;ja.load(Ja),u++,ja.once("success",function(){o[_]=ja,u--,u===0&&(s(o),c=!0)})}),u===0&&!c&&s(o)}function createSizeSetHandler(n,r){return function(a){var s=a.getDevicePixelRatio(),o=a.getWidth(),u=a.getHeight(),c=r(o,u,s);this.setParameter(n,c)}}function createSizeParser(n,r,a){return a=a||1,function(s){var o=s.getDevicePixelRatio(),u=s.getWidth()*a,c=s.getHeight()*a;return r(u,c,o)}}function tryConvertExpr(n){var r=/^expr\((.*)\)$/.exec(n);if(r)try{var a=new Function("width","height","dpr","return "+r[1]);return a(1,1),a}catch{throw new Error("Invalid expression.")}}function halton(n,r){for(var a=0,s=1/r,o=n;o>0;)a=a+s*(o%r),o=Math.floor(o/r),s=s/r;return a}const SSAOGLSL=`@export ecgl.ssao.estimate

uniform sampler2D depthTex;

uniform sampler2D normalTex;

uniform sampler2D noiseTex;

uniform vec2 depthTexSize;

uniform vec2 noiseTexSize;

uniform mat4 projection;

uniform mat4 projectionInv;

uniform mat4 viewInverseTranspose;

uniform vec3 kernel[KERNEL_SIZE];

uniform float radius : 1;

uniform float power : 1;

uniform float bias: 1e-2;

uniform float intensity: 1.0;

varying vec2 v_Texcoord;

float ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {
 float occlusion = 0.0;

 for (int i = 0; i < KERNEL_SIZE; i++) {
 vec3 samplePos = kernel[i];
#ifdef NORMALTEX_ENABLED
 samplePos = kernelBasis * samplePos;
#endif
 samplePos = samplePos * radius + originPos;

 vec4 texCoord = projection * vec4(samplePos, 1.0);
 texCoord.xy /= texCoord.w;

 vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);

 float sampleDepth = depthTexel.r * 2.0 - 1.0;
 if (projection[3][3] == 0.0) {
 sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);
 }
 else {
 sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];
 }
 
 float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));
 occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);
 }
#ifdef NORMALTEX_ENABLED
 occlusion = 1.0 - occlusion / float(KERNEL_SIZE);
#else
 occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);
#endif
 return pow(occlusion, power);
}

void main()
{

 vec4 depthTexel = texture2D(depthTex, v_Texcoord);

#ifdef NORMALTEX_ENABLED
 vec4 tex = texture2D(normalTex, v_Texcoord);
 if (dot(tex.rgb, tex.rgb) == 0.0) {
 gl_FragColor = vec4(1.0);
 return;
 }
 vec3 N = tex.rgb * 2.0 - 1.0;
 N = (viewInverseTranspose * vec4(N, 0.0)).xyz;

 vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;
 vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;
 vec3 T = normalize(rvec - N * dot(rvec, N));
 vec3 BT = normalize(cross(N, T));
 mat3 kernelBasis = mat3(T, BT, N);
#else
 if (depthTexel.r > 0.99999) {
 gl_FragColor = vec4(1.0);
 return;
 }
 mat3 kernelBasis;
#endif

 float z = depthTexel.r * 2.0 - 1.0;

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * projectedPos;

 vec3 position = p4.xyz / p4.w;

 float ao = ssaoEstimator(position, kernelBasis);
 ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);
 gl_FragColor = vec4(vec3(ao), 1.0);
}

@end


@export ecgl.ssao.blur
#define SHADER_NAME SSAO_BLUR

uniform sampler2D ssaoTexture;

#ifdef NORMALTEX_ENABLED
uniform sampler2D normalTex;
#endif

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

uniform int direction: 0.0;

#ifdef DEPTHTEX_ENABLED
uniform sampler2D depthTex;
uniform mat4 projection;
uniform float depthRange : 0.5;

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}
#endif

void main()
{
 float kernel[5];
 kernel[0] = 0.122581;
 kernel[1] = 0.233062;
 kernel[2] = 0.288713;
 kernel[3] = 0.233062;
 kernel[4] = 0.122581;

 vec2 off = vec2(0.0);
 if (direction == 0) {
 off[0] = blurSize / textureSize.x;
 }
 else {
 off[1] = blurSize / textureSize.y;
 }

 vec2 coord = v_Texcoord;

 float sum = 0.0;
 float weightAll = 0.0;

#ifdef NORMALTEX_ENABLED
 vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;
#endif
#if defined(DEPTHTEX_ENABLED)
 float centerDepth = getLinearDepth(v_Texcoord);
#endif

 for (int i = 0; i < 5; i++) {
 vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));

 float w = kernel[i];
#ifdef NORMALTEX_ENABLED
 vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;
 w *= clamp(dot(normal, centerNormal), 0.0, 1.0);
#endif
#ifdef DEPTHTEX_ENABLED
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));
#endif

 weightAll += w;
 sum += texture2D(ssaoTexture, coord).r * w;
 }

 gl_FragColor = vec4(vec3(sum / weightAll), 1.0);
}

@end
`;Shader.import(SSAOGLSL);function generateNoiseData(n){for(var r=new Uint8Array(n*n*4),a=0,s=new Vector3,o=0;o<n;o++)for(var u=0;u<n;u++)s.set(Math.random()*2-1,Math.random()*2-1,0).normalize(),r[a++]=(s.x*.5+.5)*255,r[a++]=(s.y*.5+.5)*255,r[a++]=0,r[a++]=255;return r}function generateNoiseTexture(n){return new Texture2D({pixels:generateNoiseData(n),wrapS:Texture.REPEAT,wrapT:Texture.REPEAT,width:n,height:n})}function generateKernel(n,r,a){var s=new Float32Array(n*3);r=r||0;for(var o=0;o<n;o++){var u=halton(o+r,2)*(a?1:2)*Math.PI,c=halton(o+r,3)*Math.PI,p=Math.random(),d=Math.cos(u)*Math.sin(c)*p,_=Math.cos(c)*p,ja=Math.sin(u)*Math.sin(c)*p;s[o*3]=d,s[o*3+1]=_,s[o*3+2]=ja}return s}function SSAOPass(n){n=n||{},this._ssaoPass=new Pass({fragment:Shader.source("ecgl.ssao.estimate")}),this._blurPass=new Pass({fragment:Shader.source("ecgl.ssao.blur")}),this._framebuffer=new FrameBuffer({depthBuffer:!1}),this._ssaoTexture=new Texture2D,this._blurTexture=new Texture2D,this._blurTexture2=new Texture2D,this._depthTex=n.depthTexture,this._normalTex=n.normalTexture,this.setNoiseSize(4),this.setKernelSize(n.kernelSize||12),n.radius!=null&&this.setParameter("radius",n.radius),n.power!=null&&this.setParameter("power",n.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}SSAOPass.prototype.setDepthTexture=function(n){this._depthTex=n};SSAOPass.prototype.setNormalTexture=function(n){this._normalTex=n,this._ssaoPass.material[n?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)};SSAOPass.prototype.update=function(n,r,a){var s=n.getWidth(),o=n.getHeight(),u=this._ssaoPass,c=this._blurPass;u.setUniform("kernel",this._kernels[a%this._kernels.length]),u.setUniform("depthTex",this._depthTex),this._normalTex!=null&&u.setUniform("normalTex",this._normalTex),u.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var p=new Matrix4;Matrix4.transpose(p,r.worldTransform),u.setUniform("projection",r.projectionMatrix.array),u.setUniform("projectionInv",r.invProjectionMatrix.array),u.setUniform("viewInverseTranspose",p.array);var d=this._ssaoTexture,_=this._blurTexture,ja=this._blurTexture2;d.width=s/2,d.height=o/2,_.width=s,_.height=o,ja.width=s,ja.height=o,this._framebuffer.attach(d),this._framebuffer.bind(n),n.gl.clearColor(1,1,1,1),n.gl.clear(n.gl.COLOR_BUFFER_BIT),u.render(n),c.setUniform("textureSize",[s/2,o/2]),c.setUniform("projection",r.projectionMatrix.array),this._framebuffer.attach(_),c.setUniform("direction",0),c.setUniform("ssaoTexture",d),c.render(n),this._framebuffer.attach(ja),c.setUniform("textureSize",[s,o]),c.setUniform("direction",1),c.setUniform("ssaoTexture",_),c.render(n),this._framebuffer.unbind(n);var Ja=n.clearColor;n.gl.clearColor(Ja[0],Ja[1],Ja[2],Ja[3])};SSAOPass.prototype.getTargetTexture=function(){return this._blurTexture2};SSAOPass.prototype.setParameter=function(n,r){n==="noiseTexSize"?this.setNoiseSize(r):n==="kernelSize"?this.setKernelSize(r):n==="intensity"?this._ssaoPass.material.set("intensity",r):this._ssaoPass.setUniform(n,r)};SSAOPass.prototype.setKernelSize=function(n){this._kernelSize=n,this._ssaoPass.material.define("fragment","KERNEL_SIZE",n),this._kernels=this._kernels||[];for(var r=0;r<30;r++)this._kernels[r]=generateKernel(n,r*n,!!this._normalTex)};SSAOPass.prototype.setNoiseSize=function(n){var r=this._ssaoPass.getUniform("noiseTex");r?(r.data=generateNoiseData(n),r.width=r.height=n,r.dirty()):(r=generateNoiseTexture(n),this._ssaoPass.setUniform("noiseTex",generateNoiseTexture(n))),this._ssaoPass.setUniform("noiseTexSize",[n,n])};SSAOPass.prototype.dispose=function(n){this._blurTexture.dispose(n),this._ssaoTexture.dispose(n),this._blurTexture2.dispose(n)};const SSRGLSLCode=`@export ecgl.ssr.main

#define SHADER_NAME SSR
#define MAX_ITERATION 20;
#define SAMPLE_PER_FRAME 5;
#define TOTAL_SAMPLES 128;

uniform sampler2D sourceTexture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform sampler2D gBufferTexture3;
uniform samplerCube specularCubemap;
uniform float specularIntensity: 1;

uniform mat4 projection;
uniform mat4 projectionInv;
uniform mat4 toViewSpace;
uniform mat4 toWorldSpace;

uniform float maxRayDistance: 200;

uniform float pixelStride: 16;
uniform float pixelStrideZCutoff: 50; 
uniform float screenEdgeFadeStart: 0.9; 
uniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; 
uniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;

uniform float nearZ;
uniform vec2 viewportSize : VIEWPORT_SIZE;

uniform float jitterOffset: 0;

varying vec2 v_Texcoord;

#ifdef DEPTH_DECODE
@import clay.util.decode_float
#endif

#ifdef PHYSICALLY_CORRECT
uniform sampler2D normalDistribution;
uniform float sampleOffset: 0;
uniform vec2 normalDistributionSize;

vec3 transformNormal(vec3 H, vec3 N) {
 vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
vec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {
 float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));
 vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;
 return transformNormal(H, N);
}
float G_Smith(float g, float ndv, float ndl) {
 float roughness = 1.0 - g;
 float k = roughness * roughness / 2.0;
 float G1V = ndv / (ndv * (1.0 - k) + k);
 float G1L = ndl / (ndl * (1.0 - k) + k);
 return G1L * G1V;
}
vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}
#endif

float fetchDepth(sampler2D depthTexture, vec2 uv)
{
 vec4 depthTexel = texture2D(depthTexture, uv);
 return depthTexel.r * 2.0 - 1.0;
}

float linearDepth(float depth)
{
 if (projection[3][3] == 0.0) {
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
 }
 else {
 return (depth - projection[3][2]) / projection[2][2];
 }
}

bool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)
{
 if (rayZFar > rayZNear)
 {
 float t = rayZFar; rayZFar = rayZNear; rayZNear = t;
 }
 float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));
 return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;
}


bool traceScreenSpaceRay(
 vec3 rayOrigin, vec3 rayDir, float jitter,
 out vec2 hitPixel, out vec3 hitPoint, out float iterationCount
)
{
 float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)
 ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;

 vec3 rayEnd = rayOrigin + rayDir * rayLength;

 vec4 H0 = projection * vec4(rayOrigin, 1.0);
 vec4 H1 = projection * vec4(rayEnd, 1.0);

 float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;

 vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;

 vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;
 vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;

 P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;
 vec2 delta = P1 - P0;

 bool permute = false;
 if (abs(delta.x) < abs(delta.y)) {
 permute = true;
 delta = delta.yx;
 P0 = P0.yx;
 P1 = P1.yx;
 }
 float stepDir = sign(delta.x);
 float invdx = stepDir / delta.x;

 vec3 dQ = (Q1 - Q0) * invdx;
 float dk = (k1 - k0) * invdx;

 vec2 dP = vec2(stepDir, delta.y * invdx);

 float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);
 float pixStride = 1.0 + strideScaler * pixelStride;

 dP *= pixStride; dQ *= pixStride; dk *= pixStride;

 vec4 pqk = vec4(P0, Q0.z, k0);
 vec4 dPQK = vec4(dP, dQ.z, dk);

 pqk += dPQK * jitter;
 float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);
 float rayZNear;

 bool intersect = false;

 vec2 texelSize = 1.0 / viewportSize;

 iterationCount = 0.0;

 for (int i = 0; i < MAX_ITERATION; i++)
 {
 pqk += dPQK;

 rayZNear = rayZFar;
 rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);

 hitPixel = permute ? pqk.yx : pqk.xy;
 hitPixel *= texelSize;

 intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);

 iterationCount += 1.0;

 dPQK *= 1.2;

 if (intersect) {
 break;
 }
 }

 Q0.xy += dQ.xy * iterationCount;
 Q0.z = pqk.z;
 hitPoint = Q0 / pqk.w;

 return intersect;
}

float calculateAlpha(
 float iterationCount, float reflectivity,
 vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir
)
{
 float alpha = clamp(reflectivity, 0.0, 1.0);
 alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));
 vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;
 float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));
 alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);

 float _eyeFadeStart = eyeFadeStart;
 float _eyeFadeEnd = eyeFadeEnd;
 if (_eyeFadeStart > _eyeFadeEnd) {
 float tmp = _eyeFadeEnd;
 _eyeFadeEnd = _eyeFadeStart;
 _eyeFadeStart = tmp;
 }

 float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);
 alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);

 alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);

 return alpha;
}

@import clay.util.rand

@import clay.util.rgbm

void main()
{
 vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);

 if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {
 discard;
 }

 float g = normalAndGloss.a;
#if !defined(PHYSICALLY_CORRECT)
 if (g <= minGlossiness) {
 discard;
 }
#endif

 float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);

 vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);
 N = normalize((toViewSpace * vec4(N, 0.0)).xyz);

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);
 vec4 pos = projectionInv * projectedPos;
 vec3 rayOrigin = pos.xyz / pos.w;
 vec3 V = -normalize(rayOrigin);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 float iterationCount;
 float jitter = rand(fract(v_Texcoord + jitterOffset));

#ifdef PHYSICALLY_CORRECT
 vec4 color = vec4(vec3(0.0), 1.0);
 vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);
 vec3 albedo = albedoMetalness.rgb;
 float m = albedoMetalness.a;
 vec3 diffuseColor = albedo * (1.0 - m);
 vec3 spec = mix(vec3(0.04), albedo, m);

 float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);

 for (int i = 0; i < SAMPLE_PER_FRAME; i++) {
 vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);
 vec3 rayDir = normalize(reflect(-V, H));
#else
 vec3 rayDir = normalize(reflect(-V, N));
#endif
 vec2 hitPixel;
 vec3 hitPoint;

 bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);

 float dist = distance(rayOrigin, hitPoint);

 vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;
 hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);
#ifdef PHYSICALLY_CORRECT
 float ndl = clamp(dot(N, rayDir), 0.0, 1.0);
 float vdh = clamp(dot(V, H), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);
 vec3 litTexel = vec3(0.0);
 if (dot(hitNormal, rayDir) < 0.0 && intersect) {
 litTexel = texture2D(sourceTexture, hitPixel).rgb;
 litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);

 }
 else {
 #ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;
#endif
 }
 color.rgb += ndl * litTexel * (
 F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)
 );
 }
 color.rgb /= float(SAMPLE_PER_FRAME);
#else
 #if !defined(SPECULARCUBEMAP_ENABLED)
 if (dot(hitNormal, rayDir) >= 0.0) {
 discard;
 }
 if (!intersect) {
 discard;
 }
#endif
 float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);
 vec4 color = texture2D(sourceTexture, hitPixel);
 color.rgb *= alpha;

#ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 alpha = alpha * (intersect ? 1.0 : 0.0);
 float bias = (1.0 -g) * 5.0;
 color.rgb += (1.0 - alpha)
 * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb
 * specularIntensity;
#endif

#endif

 gl_FragColor = encodeHDR(color);
}
@end

@export ecgl.ssr.blur

uniform sampler2D texture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform mat4 projection;
uniform float depthRange : 0.05;

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

#ifdef BLEND
 #ifdef SSAOTEX_ENABLED
uniform sampler2D ssaoTex;
 #endif
uniform sampler2D sourceTexture;
#endif

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}

@import clay.util.rgbm


void main()
{
 @import clay.compositor.kernel.gaussian_9

 vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);
 float g = centerNTexel.a;
 float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;
#ifdef VERTICAL
 vec2 off = vec2(0.0, maxBlurSize / textureSize.y);
#else
 vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);
#endif

 vec2 coord = v_Texcoord;

 vec4 sum = vec4(0.0);
 float weightAll = 0.0;

 vec3 cN = centerNTexel.rgb * 2.0 - 1.0;
 float cD = getLinearDepth(v_Texcoord);
 for (int i = 0; i < 9; i++) {
 vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));
 float w = gaussianKernel[i]
 * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));

 weightAll += w;
 sum += decodeHDR(texture2D(texture, coord)) * w;
 }

#ifdef BLEND
 float aoFactor = 1.0;
 #ifdef SSAOTEX_ENABLED
 aoFactor = texture2D(ssaoTex, v_Texcoord).r;
 #endif
 gl_FragColor = encodeHDR(
 sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))
 );
#else
 gl_FragColor = encodeHDR(sum / weightAll);
#endif
}

@end`;Shader.import(SSRGLSLCode);function SSRPass(n){n=n||{},this._ssrPass=new Pass({fragment:Shader.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new Pass({fragment:Shader.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new Pass({fragment:Shader.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new Pass({fragment:Shader.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",n.normalTexture),this._ssrPass.setUniform("gBufferTexture2",n.depthTexture),this._blurPass1.setUniform("gBufferTexture1",n.normalTexture),this._blurPass1.setUniform("gBufferTexture2",n.depthTexture),this._blurPass2.setUniform("gBufferTexture1",n.normalTexture),this._blurPass2.setUniform("gBufferTexture2",n.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new Texture2D({type:Texture.HALF_FLOAT}),this._texture2=new Texture2D({type:Texture.HALF_FLOAT}),this._texture3=new Texture2D({type:Texture.HALF_FLOAT}),this._prevTexture=new Texture2D({type:Texture.HALF_FLOAT}),this._currentTexture=new Texture2D({type:Texture.HALF_FLOAT}),this._frameBuffer=new FrameBuffer({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}SSRPass.prototype.setAmbientCubemap=function(n,r){this._ssrPass.material.set("specularCubemap",n),this._ssrPass.material.set("specularIntensity",r);var a=n&&r;this._ssrPass.material[a?"enableTexture":"disableTexture"]("specularCubemap")};SSRPass.prototype.update=function(n,r,a,s){var o=n.getWidth(),u=n.getHeight(),c=this._ssrTexture,p=this._texture2,d=this._texture3;c.width=this._prevTexture.width=this._currentTexture.width=o/this._downScale,c.height=this._prevTexture.height=this._currentTexture.height=u/this._downScale,p.width=d.width=o,p.height=d.height=u;var _=this._frameBuffer,ja=this._ssrPass,Ja=this._blurPass1,ec=this._blurPass2,tc=this._blendPass,rc=new Matrix4,nc=new Matrix4;Matrix4.transpose(rc,r.worldTransform),Matrix4.transpose(nc,r.viewMatrix),ja.setUniform("sourceTexture",a),ja.setUniform("projection",r.projectionMatrix.array),ja.setUniform("projectionInv",r.invProjectionMatrix.array),ja.setUniform("toViewSpace",rc.array),ja.setUniform("toWorldSpace",nc.array),ja.setUniform("nearZ",r.near);var ic=s/this._totalSamples*this._samplePerFrame;if(ja.setUniform("jitterOffset",ic),ja.setUniform("sampleOffset",s*this._samplePerFrame),Ja.setUniform("textureSize",[c.width,c.height]),ec.setUniform("textureSize",[o,u]),ec.setUniform("sourceTexture",a),Ja.setUniform("projection",r.projectionMatrix.array),ec.setUniform("projection",r.projectionMatrix.array),_.attach(c),_.bind(n),ja.render(n),this._physicallyCorrect&&(_.attach(this._currentTexture),tc.setUniform("texture1",this._prevTexture),tc.setUniform("texture2",c),tc.material.set({weight1:s>=1?.95:0,weight2:s>=1?.05:1}),tc.render(n)),_.attach(p),Ja.setUniform("texture",this._physicallyCorrect?this._currentTexture:c),Ja.render(n),_.attach(d),ec.setUniform("texture",p),ec.render(n),_.unbind(n),this._physicallyCorrect){var uc=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=uc}};SSRPass.prototype.getTargetTexture=function(){return this._texture3};SSRPass.prototype.setParameter=function(n,r){n==="maxIteration"?this._ssrPass.material.define("fragment","MAX_ITERATION",r):this._ssrPass.setUniform(n,r)};SSRPass.prototype.setPhysicallyCorrect=function(n){n?(this._normalDistribution||(this._normalDistribution=cubemapUtil.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=n};SSRPass.prototype.setSSAOTexture=function(n){var r=this._blurPass2;n?(r.material.enableTexture("ssaoTex"),r.material.set("ssaoTex",n)):r.material.disableTexture("ssaoTex")};SSRPass.prototype.isFinished=function(n){return this._physicallyCorrect?n>this._totalSamples/this._samplePerFrame:!0};SSRPass.prototype.dispose=function(n){this._ssrTexture.dispose(n),this._texture2.dispose(n),this._texture3.dispose(n),this._prevTexture.dispose(n),this._currentTexture.dispose(n),this._frameBuffer.dispose(n)};const poissonKernel=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925],normalGLSL=`@export ecgl.normal.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

@import ecgl.common.normalMap.vertexHeader

@import ecgl.common.vertexAnimation.header

void main()
{

 @import ecgl.common.vertexAnimation.main

 @import ecgl.common.uv.main

 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

 @import ecgl.common.normalMap.vertexMain

 gl_Position = worldViewProjection * vec4(pos, 1.0);

}


@end


@export ecgl.normal.fragment

#define ROUGHNESS_CHANEL 0

uniform bool useBumpMap;
uniform bool useRoughnessMap;
uniform bool doubleSide;
uniform float roughness;

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform mat4 viewInverse : VIEWINVERSE;

@import ecgl.common.normalMap.fragmentHeader
@import ecgl.common.bumpMap.header

uniform sampler2D roughnessMap;

void main()
{
 vec3 N = v_Normal;
 
 bool flipNormal = false;
 if (doubleSide) {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 flipNormal = true;
 }
 }

 @import ecgl.common.normalMap.fragmentMain

 if (useBumpMap) {
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 }

 float g = 1.0 - roughness;

 if (useRoughnessMap) {
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
 }

 if (flipNormal) {
 N = -N;
 }

 gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;
 gl_FragColor.a = g;
}
@end`;Shader.import(normalGLSL);function attachTextureToSlot(n,r,a,s,o){var u=n.gl;r.setUniform(u,"1i",a,o),u.activeTexture(u.TEXTURE0+o),s.isRenderable()?s.bind(n):s.unbind(n)}function getBeforeRenderHook(n,r,a,s,o){var u,c,p,d,_=n.gl;return function(ja,Ja,ec){if(!(d&&d.material===ja.material)){var tc=ja.material,rc=ja.__program,nc=tc.get("roughness");nc==null&&(nc=1);var ic=tc.get("normalMap")||r,uc=tc.get("roughnessMap"),eh=tc.get("bumpMap"),rh=tc.get("uvRepeat"),ah=tc.get("uvOffset"),ih=tc.get("detailUvRepeat"),oh=tc.get("detailUvOffset"),uh=!!eh&&tc.isTextureEnabled("bumpMap"),ch=!!uc&&tc.isTextureEnabled("roughnessMap"),hh=tc.isDefined("fragment","DOUBLE_SIDED");eh=eh||a,uc=uc||s,ec!==Ja?(Ja.set("normalMap",ic),Ja.set("bumpMap",eh),Ja.set("roughnessMap",uc),Ja.set("useBumpMap",uh),Ja.set("useRoughnessMap",ch),Ja.set("doubleSide",hh),rh!=null&&Ja.set("uvRepeat",rh),ah!=null&&Ja.set("uvOffset",ah),ih!=null&&Ja.set("detailUvRepeat",ih),oh!=null&&Ja.set("detailUvOffset",oh),Ja.set("roughness",nc)):(rc.setUniform(_,"1f","roughness",nc),u!==ic&&attachTextureToSlot(n,rc,"normalMap",ic,0),c!==eh&&eh&&attachTextureToSlot(n,rc,"bumpMap",eh,1),p!==uc&&uc&&attachTextureToSlot(n,rc,"roughnessMap",uc,2),rh!=null&&rc.setUniform(_,"2f","uvRepeat",rh),ah!=null&&rc.setUniform(_,"2f","uvOffset",ah),ih!=null&&rc.setUniform(_,"2f","detailUvRepeat",ih),oh!=null&&rc.setUniform(_,"2f","detailUvOffset",oh),rc.setUniform(_,"1i","useBumpMap",+uh),rc.setUniform(_,"1i","useRoughnessMap",+ch),rc.setUniform(_,"1i","doubleSide",+hh)),u=ic,c=eh,p=uc,d=ja}}}function NormalPass(n){this._depthTex=new Texture2D({format:Texture.DEPTH_COMPONENT,type:Texture.UNSIGNED_INT}),this._normalTex=new Texture2D({type:Texture.HALF_FLOAT}),this._framebuffer=new FrameBuffer,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,FrameBuffer.DEPTH_ATTACHMENT),this._normalMaterial=new Material({shader:new Shader(Shader.source("ecgl.normal.vertex"),Shader.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=textureUtil.createBlank("#000"),this._defaultBumpMap=textureUtil.createBlank("#000"),this._defaultRoughessMap=textureUtil.createBlank("#000"),this._debugPass=new Pass({fragment:Shader.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}NormalPass.prototype.getDepthTexture=function(){return this._depthTex};NormalPass.prototype.getNormalTexture=function(){return this._normalTex};NormalPass.prototype.update=function(n,r,a){var s=n.getWidth(),o=n.getHeight(),u=this._depthTex,c=this._normalTex,p=this._normalMaterial;u.width=s,u.height=o,c.width=s,c.height=o;var d=r.getRenderList(a).opaque;this._framebuffer.bind(n),n.gl.clearColor(0,0,0,0),n.gl.clear(n.gl.COLOR_BUFFER_BIT|n.gl.DEPTH_BUFFER_BIT),n.gl.disable(n.gl.BLEND),n.renderPass(d,a,{getMaterial:function(){return p},ifRender:function(_){return _.renderNormal},beforeRender:getBeforeRenderHook(n,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:n.opaqueSortCompare}),this._framebuffer.unbind(n)};NormalPass.prototype.renderDebug=function(n){this._debugPass.render(n)};NormalPass.prototype.dispose=function(n){this._depthTex.dispose(n),this._normalTex.dispose(n)};function EdgePass(n){n=n||{},this._edgePass=new Pass({fragment:Shader.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",n.normalTexture),this._edgePass.setUniform("depthTexture",n.depthTexture),this._targetTexture=new Texture2D({type:Texture.HALF_FLOAT}),this._frameBuffer=new FrameBuffer,this._frameBuffer.attach(this._targetTexture)}EdgePass.prototype.update=function(n,r,a,s){var o=n.getWidth(),u=n.getHeight(),c=this._targetTexture;c.width=o,c.height=u;var p=this._frameBuffer;p.bind(n),this._edgePass.setUniform("projectionInv",r.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[o,u]),this._edgePass.setUniform("texture",a),this._edgePass.render(n),p.unbind(n)};EdgePass.prototype.getTargetTexture=function(){return this._targetTexture};EdgePass.prototype.setParameter=function(n,r){this._edgePass.setUniform(n,r)};EdgePass.prototype.dispose=function(n){this._targetTexture.dispose(n),this._frameBuffer.dispose(n)};const effectJson={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]},DOFCode=`@export ecgl.dof.coc

uniform sampler2D depth;

uniform float zNear: 0.1;
uniform float zFar: 2000;

uniform float focalDistance: 3;
uniform float focalRange: 1;
uniform float focalLength: 30;
uniform float fstop: 2.8;

varying vec2 v_Texcoord;

@import clay.util.encode_float

void main()
{
 float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;

 float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));

 float aperture = focalLength / fstop;

 float coc;

 float uppper = focalDistance + focalRange;
 float lower = focalDistance - focalRange;
 if (dist <= uppper && dist >= lower) {
 coc = 0.5;
 }
 else {
 float focalAdjusted = dist > uppper ? uppper : lower;

 coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));
 coc = clamp(coc, 0.0, 2.0) / 2.00001;

 if (dist < lower) {
 coc = -coc;
 }
 coc = coc * 0.5 + 0.5;
 }

 gl_FragColor = encodeFloat(coc);
}
@end


@export ecgl.dof.composite

#define DEBUG 0

uniform sampler2D original;
uniform sampler2D blurred;
uniform sampler2D nearfield;
uniform sampler2D coc;
uniform sampler2D nearcoc;
varying vec2 v_Texcoord;

@import clay.util.rgbm
@import clay.util.float

void main()
{
 vec4 blurredColor = texture2D(blurred, v_Texcoord);
 vec4 originalColor = texture2D(original, v_Texcoord);

 float fCoc = decodeFloat(texture2D(coc, v_Texcoord));

 fCoc = abs(fCoc * 2.0 - 1.0);

 float weight = smoothstep(0.0, 1.0, fCoc);
 
#ifdef NEARFIELD_ENABLED
 vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);
 float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));
 fNearCoc = abs(fNearCoc * 2.0 - 1.0);

 gl_FragColor = encodeHDR(
 mix(
 nearfieldColor, mix(originalColor, blurredColor, weight),
 pow(1.0 - fNearCoc, 4.0)
 )
 );
#else
 gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));
#endif

}

@end



@export ecgl.dof.diskBlur

#define POISSON_KERNEL_SIZE 16;

uniform sampler2D texture;
uniform sampler2D coc;
varying vec2 v_Texcoord;

uniform float blurRadius : 10.0;
uniform vec2 textureSize : [512.0, 512.0];

uniform vec2 poissonKernel[POISSON_KERNEL_SIZE];

uniform float percent;

float nrand(const in vec2 n) {
 return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

@import clay.util.rgbm
@import clay.util.float


void main()
{
 vec2 offset = blurRadius / textureSize;

 float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );
 float cosa = cos(rnd);
 float sina = sin(rnd);
 vec4 basis = vec4(cosa, -sina, sina, cosa);

#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)
 offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);
#endif

#ifdef BLUR_COC
 float cocSum = 0.0;
#else
 vec4 color = vec4(0.0);
#endif


 float weightSum = 0.0;

 for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {
 vec2 ofs = poissonKernel[i];

 ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));

 vec2 uv = v_Texcoord + ofs * offset;
 vec4 texel = texture2D(texture, uv);

 float w = 1.0;
#ifdef BLUR_COC
 float fCoc = decodeFloat(texel) * 2.0 - 1.0;
 cocSum += clamp(fCoc, -1.0, 0.0) * w;
#else
 texel = texel;
 #if !defined(BLUR_NEARFIELD)
 float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;
 w *= abs(fCoc);
 #endif
 texel.rgb *= texel.a;
 color += texel * w;
#endif

 weightSum += w;
 }

#ifdef BLUR_COC
 gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);
#else
 color /= weightSum;
 color.rgb /= (color.a + 0.0001);
 gl_FragColor = color;
#endif
}

@end`,edgeCode=`@export ecgl.edge

uniform sampler2D texture;

uniform sampler2D normalTexture;
uniform sampler2D depthTexture;

uniform mat4 projectionInv;

uniform vec2 textureSize;

uniform vec4 edgeColor: [0,0,0,0.8];

varying vec2 v_Texcoord;

vec3 packColor(vec2 coord) {
 float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;
 vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * p;

 return vec3(
 texture2D(normalTexture, coord).rg,
 -p4.z / p4.w / 5.0
 );
}

void main() {
 vec2 cc = v_Texcoord;
 vec3 center = packColor(cc);

 float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;
 float dx = size / textureSize.x;
 float dy = size / textureSize.y;

 vec2 coord;
 vec3 topLeft = packColor(cc+vec2(-dx, -dy));
 vec3 top = packColor(cc+vec2(0.0, -dy));
 vec3 topRight = packColor(cc+vec2(dx, -dy));
 vec3 left = packColor(cc+vec2(-dx, 0.0));
 vec3 right = packColor(cc+vec2(dx, 0.0));
 vec3 bottomLeft = packColor(cc+vec2(-dx, dy));
 vec3 bottom = packColor(cc+vec2(0.0, dy));
 vec3 bottomRight = packColor(cc+vec2(dx, dy));

 vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;
 vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;

 float edge = sqrt(dot(h, h) + dot(v, v));

 edge = smoothstep(0.8, 1.0, edge);

 gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);
}
@end`;Shader.import(blurCode);Shader.import(lutCode);Shader.import(outputCode);Shader.import(brightCode);Shader.import(downsampleCode);Shader.import(upsampleCode);Shader.import(hdrCode);Shader.import(blendCode);Shader.import(fxaaCode);Shader.import(DOFCode);Shader.import(edgeCode);function makeCommonOutputs(n,r){return{color:{parameters:{width:n,height:r}}}}var FINAL_NODES_CHAIN=["composite","FXAA"];function EffectCompositor(){this._width,this._height,this._dpr,this._sourceTexture=new Texture2D({type:Texture.HALF_FLOAT}),this._depthTexture=new Texture2D({format:Texture.DEPTH_COMPONENT,type:Texture.UNSIGNED_INT}),this._framebuffer=new FrameBuffer,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,FrameBuffer.DEPTH_ATTACHMENT),this._normalPass=new NormalPass,this._compositor=createCompositor(effectJson);var n=this._compositor.getNodeByName("source");n.texture=this._sourceTexture;var r=this._compositor.getNodeByName("coc");this._sourceNode=n,this._cocNode=r,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(s){return this._compositor.getNodeByName(s)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=FINAL_NODES_CHAIN.map(function(s){return this._compositor.getNodeByName(s)},this);var a={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new SSAOPass(a),this._ssrPass=new SSRPass(a),this._edgePass=new EdgePass(a)}EffectCompositor.prototype.resize=function(s,o,a){a=a||1;var s=s*a,o=o*a,u=this._sourceTexture,c=this._depthTexture;u.width=s,u.height=o,c.width=s,c.height=o;var p={getWidth:function(){return s},getHeight:function(){return o},getDevicePixelRatio:function(){return a}};function d(_,ja){if(typeof _[ja]=="function"){var Ja=_[ja].__original||_[ja];_[ja]=function(ec){return Ja.call(this,p)},_[ja].__original=Ja}}this._compositor.nodes.forEach(function(_){for(var ja in _.outputs){var Ja=_.outputs[ja].parameters;Ja&&(d(Ja,"width"),d(Ja,"height"))}for(var ec in _.parameters)d(_.parameters,ec)}),this._width=s,this._height=o,this._dpr=a};EffectCompositor.prototype.getWidth=function(){return this._width};EffectCompositor.prototype.getHeight=function(){return this._height};EffectCompositor.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR};EffectCompositor.prototype._getPrevNode=function(n){for(var r=FINAL_NODES_CHAIN.indexOf(n.name)-1,a=this._finalNodesChain[r];a&&!this._compositor.getNodeByName(a.name);)r-=1,a=this._finalNodesChain[r];return a};EffectCompositor.prototype._getNextNode=function(n){for(var r=FINAL_NODES_CHAIN.indexOf(n.name)+1,a=this._finalNodesChain[r];a&&!this._compositor.getNodeByName(a.name);)r+=1,a=this._finalNodesChain[r];return a};EffectCompositor.prototype._addChainNode=function(n){var r=this._getPrevNode(n),a=this._getNextNode(n);r&&(n.inputs.texture=r.name,a?(n.outputs=makeCommonOutputs(this.getWidth.bind(this),this.getHeight.bind(this)),a.inputs.texture=n.name):n.outputs=null,this._compositor.addNode(n))};EffectCompositor.prototype._removeChainNode=function(n){var r=this._getPrevNode(n),a=this._getNextNode(n);r&&(a?(r.outputs=makeCommonOutputs(this.getWidth.bind(this),this.getHeight.bind(this)),a.inputs.texture=r.name):r.outputs=null,this._compositor.removeNode(n))};EffectCompositor.prototype.updateNormal=function(n,r,a,s){this._ifRenderNormalPass()&&this._normalPass.update(n,r,a)};EffectCompositor.prototype.updateSSAO=function(n,r,a,s){this._ssaoPass.update(n,a,s)};EffectCompositor.prototype.enableSSAO=function(){this._enableSSAO=!0};EffectCompositor.prototype.disableSSAO=function(){this._enableSSAO=!1};EffectCompositor.prototype.enableSSR=function(){this._enableSSR=!0};EffectCompositor.prototype.disableSSR=function(){this._enableSSR=!1};EffectCompositor.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()};EffectCompositor.prototype.getSourceFrameBuffer=function(){return this._framebuffer};EffectCompositor.prototype.getSourceTexture=function(){return this._sourceTexture};EffectCompositor.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)};EffectCompositor.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)};EffectCompositor.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()};EffectCompositor.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()};EffectCompositor.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()};EffectCompositor.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()};EffectCompositor.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0};EffectCompositor.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1};EffectCompositor.prototype.enableEdge=function(){this._enableEdge=!0};EffectCompositor.prototype.disableEdge=function(){this._enableEdge=!1};EffectCompositor.prototype.setBloomIntensity=function(n){this._compositeNode.setParameter("bloomIntensity",n)};EffectCompositor.prototype.setSSAOParameter=function(n,r){switch(n){case"quality":var a={low:6,medium:12,high:32,ultra:62}[r]||12;this._ssaoPass.setParameter("kernelSize",a);break;case"radius":this._ssaoPass.setParameter(n,r),this._ssaoPass.setParameter("bias",r/200);break;case"intensity":this._ssaoPass.setParameter(n,r);break}};EffectCompositor.prototype.setDOFParameter=function(n,r){switch(n){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(n,r);break;case"blurRadius":for(var a=0;a<this._dofBlurNodes.length;a++)this._dofBlurNodes[a].setParameter("blurRadius",r);break;case"quality":var s={low:4,medium:8,high:16,ultra:32}[r]||8;this._dofBlurKernelSize=s;for(var a=0;a<this._dofBlurNodes.length;a++)this._dofBlurNodes[a].pass.material.define("POISSON_KERNEL_SIZE",s);this._dofBlurKernel=new Float32Array(s*2);break}};EffectCompositor.prototype.setSSRParameter=function(n,r){if(r!=null)switch(n){case"quality":var a={low:10,medium:15,high:30,ultra:80}[r]||20,s={low:32,medium:16,high:8,ultra:4}[r]||16;this._ssrPass.setParameter("maxIteration",a),this._ssrPass.setParameter("pixelStride",s);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-r,1),0));break;case"physical":this.setPhysicallyCorrectSSR(r);break;default:console.warn("Unkown SSR parameter "+n)}};EffectCompositor.prototype.setPhysicallyCorrectSSR=function(n){this._ssrPass.setPhysicallyCorrect(n)};EffectCompositor.prototype.setEdgeColor=function(n){var r=graphicGL.parseColor(n);this._edgePass.setParameter("edgeColor",r)};EffectCompositor.prototype.setExposure=function(n){this._compositeNode.setParameter("exposure",Math.pow(2,n))};EffectCompositor.prototype.setColorLookupTexture=function(n,r){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?n:"none",r,{minFilter:graphicGL.Texture.NEAREST,magFilter:graphicGL.Texture.NEAREST,flipY:!1})};EffectCompositor.prototype.setColorCorrection=function(n,r){this._compositeNode.setParameter(n,r)};EffectCompositor.prototype.isSSREnabled=function(){return this._enableSSR};EffectCompositor.prototype.composite=function(n,r,a,s,o){var u=this._sourceTexture,c=u;this._enableEdge&&(this._edgePass.update(n,a,u,o),u=c=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(n,a,u,o),c=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=c,this._cocNode.setParameter("depth",this._depthTexture);for(var p=this._dofBlurKernel,d=this._dofBlurKernelSize,_=Math.floor(poissonKernel.length/2/d),ja=o%_,Ja=0;Ja<d*2;Ja++)p[Ja]=poissonKernel[Ja+ja*d*2];for(var Ja=0;Ja<this._dofBlurNodes.length;Ja++)this._dofBlurNodes[Ja].setParameter("percent",o/30),this._dofBlurNodes[Ja].setParameter("poissonKernel",p);this._cocNode.setParameter("zNear",a.near),this._cocNode.setParameter("zFar",a.far),this._compositor.render(n,s)};EffectCompositor.prototype.dispose=function(n){this._sourceTexture.dispose(n),this._depthTexture.dispose(n),this._framebuffer.dispose(n),this._compositor.dispose(n),this._normalPass.dispose(n),this._ssaoPass.dispose(n)};function TemporalSuperSampling(n){for(var r=[],a=0;a<30;a++)r.push([halton(a,2),halton(a,3)]);this._haltonSequence=r,this._frame=0,this._sourceTex=new Texture2D,this._sourceFb=new FrameBuffer,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new Texture2D,this._outputTex=new Texture2D;var s=this._blendPass=new Pass({fragment:Shader.source("clay.compositor.blend")});s.material.disableTexturesAll(),s.material.enableTexture(["texture1","texture2"]),this._blendFb=new FrameBuffer({depthBuffer:!1}),this._outputPass=new Pass({fragment:Shader.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(o){o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA)}}TemporalSuperSampling.prototype={constructor:TemporalSuperSampling,jitterProjection:function(n,r){var a=n.viewport,s=a.devicePixelRatio||n.getDevicePixelRatio(),o=a.width*s,u=a.height*s,c=this._haltonSequence[this._frame%this._haltonSequence.length],p=new Matrix4;p.array[12]=(c[0]*2-1)/o,p.array[13]=(c[1]*2-1)/u,Matrix4.mul(r.projectionMatrix,p,r.projectionMatrix),Matrix4.invert(r.invProjectionMatrix,r.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(n,r){this._prevFrameTex.width=n,this._prevFrameTex.height=r,this._outputTex.width=n,this._outputTex.height=r,this._sourceTex.width=n,this._sourceTex.height=r,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(n,r,a){var s=this._blendPass;this._frame===0?(s.setUniform("weight1",0),s.setUniform("weight2",1)):(s.setUniform("weight1",.9),s.setUniform("weight2",.1)),s.setUniform("texture1",this._prevFrameTex),s.setUniform("texture2",r||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(n),s.render(n),this._blendFb.unbind(n),a||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(n));var o=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=o,this._frame++},dispose:function(n){this._sourceFb.dispose(n),this._blendFb.dispose(n),this._prevFrameTex.dispose(n),this._outputTex.dispose(n),this._sourceTex.dispose(n),this._outputPass.dispose(n),this._blendPass.dispose(n)}};function ViewGL(n){n=n||"perspective",this.layer=null,this.scene=new Scene,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(n),this._compositor=new EffectCompositor,this._temporalSS=new TemporalSuperSampling,this._shadowMapPass=new ShadowMapPass;for(var r=[],a=0,s=0;s<30;s++){for(var o=[],u=0;u<6;u++)o.push(halton(a,2)*4-2),o.push(halton(a,3)*4-2),a++;r.push(o)}this._pcfKernels=r,this.scene.on("beforerender",function(c,p,d){this.needsTemporalSS()&&this._temporalSS.jitterProjection(c,d)},this)}ViewGL.prototype.setProjection=function(n){var r=this.camera;r&&r.update(),n==="perspective"?this.camera instanceof Perspective||(this.camera=new Perspective,r&&this.camera.setLocalTransform(r.localTransform)):this.camera instanceof Orthographic||(this.camera=new Orthographic,r&&this.camera.setLocalTransform(r.localTransform)),this.camera.near=.1,this.camera.far=2e3};ViewGL.prototype.setViewport=function(n,r,a,s,o){this.camera instanceof Perspective&&(this.camera.aspect=a/s),o=o||1,this.viewport.x=n,this.viewport.y=r,this.viewport.width=a,this.viewport.height=s,this.viewport.devicePixelRatio=o,this._compositor.resize(a*o,s*o),this._temporalSS.resize(a*o,s*o)};ViewGL.prototype.containPoint=function(n,r){var a=this.viewport,s=this.layer.renderer.getHeight();return r=s-r,n>=a.x&&r>=a.y&&n<=a.x+a.width&&r<=a.y+a.height};var ndc=new Vector2;ViewGL.prototype.castRay=function(n,r,a){var s=this.layer.renderer,o=s.viewport;return s.viewport=this.viewport,s.screenToNDC(n,r,ndc),this.camera.castRay(ndc,a),s.viewport=o,a};ViewGL.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var n=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var r=0;r<n.transparent.length;r++){var a=n.transparent[r],s=a.geometry;s.needsSortVerticesProgressively&&s.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),s.needsSortTrianglesProgressively&&s.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()};ViewGL.prototype.render=function(n,r){this._doRender(n,r,this._frame),this._frame++};ViewGL.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively};ViewGL.prototype.needsTemporalSS=function(){var n=this._enableTemporalSS;return n==="auto"&&(n=this._enablePostEffect),n};ViewGL.prototype.hasDOF=function(){return this._enableDOF};ViewGL.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30};ViewGL.prototype._doRender=function(n,r,a){var s=this.scene,o=this.camera;a=a||0,this._updateTransparent(n,s,o,a),r||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(n,s,o,!0)),this._updateShadowPCFKernel(a);var u=n.clearColor;if(n.gl.clearColor(u[0],u[1],u[2],u[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(n,o),this._compositor.updateNormal(n,s,o,this._temporalSS.getFrame())),this._updateSSAO(n,s,o,this._temporalSS.getFrame()),this._enablePostEffect){var c=this._compositor.getSourceFrameBuffer();c.bind(n),n.gl.clear(n.gl.DEPTH_BUFFER_BIT|n.gl.COLOR_BUFFER_BIT),n.render(s,o,!0,!0),c.unbind(n),this.needsTemporalSS()&&r?(this._compositor.composite(n,s,o,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),n.setViewport(this.viewport),this._temporalSS.render(n)):(n.setViewport(this.viewport),this._compositor.composite(n,s,o,null,0))}else if(this.needsTemporalSS()&&r){var c=this._temporalSS.getSourceFrameBuffer();c.bind(n),n.saveClear(),n.clearBit=n.gl.DEPTH_BUFFER_BIT|n.gl.COLOR_BUFFER_BIT,n.render(s,o,!0,!0),n.restoreClear(),c.unbind(n),n.setViewport(this.viewport),this._temporalSS.render(n)}else n.setViewport(this.viewport),n.render(s,o,!0,!0)};ViewGL.prototype._updateTransparent=function(n,r,a,s){for(var o=new Vector3,u=new Matrix4,c=a.getWorldPosition(),p=r.getRenderList(a).transparent,d=0;d<p.length;d++){var _=p[d],ja=_.geometry;Matrix4.invert(u,_.worldTransform),Vector3.transformMat4(o,c,u),ja.needsSortTriangles&&ja.needsSortTriangles()&&ja.doSortTriangles(o,s),ja.needsSortVertices&&ja.needsSortVertices()&&ja.doSortVertices(o,s)}};ViewGL.prototype._updateSSAO=function(n,r,a){var s=this._enableSSAO&&this._enablePostEffect;s&&this._compositor.updateSSAO(n,r,a,this._temporalSS.getFrame());for(var o=r.getRenderList(a),u=0;u<o.opaque.length;u++){var c=o.opaque[u];c.renderNormal&&c.material[s?"enableTexture":"disableTexture"]("ssaoMap"),s&&c.material.set("ssaoMap",this._compositor.getSSAOTexture())}};ViewGL.prototype._updateShadowPCFKernel=function(n){for(var r=this._pcfKernels[n%this._pcfKernels.length],a=this.scene.getRenderList(this.camera),s=a.opaque,o=0;o<s.length;o++)s[o].receiveShadow&&(s[o].material.set("pcfKernel",r),s[o].material.define("fragment","PCF_KERNEL_SIZE",r.length/2))};ViewGL.prototype.dispose=function(n){this._compositor.dispose(n.gl),this._temporalSS.dispose(n.gl),this._shadowMapPass.dispose(n)};ViewGL.prototype.setPostEffect=function(n,r){var a=this._compositor;this._enablePostEffect=n.get("enable");var s=n.getModel("bloom"),o=n.getModel("edge"),u=n.getModel("DOF",n.getModel("depthOfField")),c=n.getModel("SSAO",n.getModel("screenSpaceAmbientOcclusion")),p=n.getModel("SSR",n.getModel("screenSpaceReflection")),d=n.getModel("FXAA"),_=n.getModel("colorCorrection");s.get("enable")?a.enableBloom():a.disableBloom(),u.get("enable")?a.enableDOF():a.disableDOF(),p.get("enable")?a.enableSSR():a.disableSSR(),_.get("enable")?a.enableColorCorrection():a.disableColorCorrection(),o.get("enable")?a.enableEdge():a.disableEdge(),d.get("enable")?a.enableFXAA():a.disableFXAA(),this._enableDOF=u.get("enable"),this._enableSSAO=c.get("enable"),this._enableSSAO?a.enableSSAO():a.disableSSAO(),a.setBloomIntensity(s.get("intensity")),a.setEdgeColor(o.get("color")),a.setColorLookupTexture(_.get("lookupTexture"),r),a.setExposure(_.get("exposure")),["radius","quality","intensity"].forEach(function(ja){a.setSSAOParameter(ja,c.get(ja))}),["quality","maxRoughness","physical"].forEach(function(ja){a.setSSRParameter(ja,p.get(ja))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(ja){a.setDOFParameter(ja,u.get(ja))}),["brightness","contrast","saturation"].forEach(function(ja){a.setColorCorrection(ja,_.get(ja))})};ViewGL.prototype.setDOFFocusOnPoint=function(n){if(this._enablePostEffect)return n>this.camera.far||n<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",n),!0)};ViewGL.prototype.setTemporalSuperSampling=function(n){this._enableTemporalSS=n.get("enable")};ViewGL.prototype.isLinearSpace=function(){return this._enablePostEffect};ViewGL.prototype.setRootNode=function(n){if(this.rootNode!==n){for(var r=this.rootNode.children(),a=0;a<r.length;a++)n.add(r[a]);n!==this.scene&&this.scene.add(n),this.rootNode=n}};ViewGL.prototype.add=function(n){this.rootNode.add(n)};ViewGL.prototype.remove=function(n){this.rootNode.remove(n)};ViewGL.prototype.removeAll=function(n){this.rootNode.removeAll(n)};Object.assign(ViewGL.prototype,notifier);function resizeCartesian3D(n,r){var a=n.getBoxLayoutParams(),s=getLayoutRect(a,{width:r.getWidth(),height:r.getHeight()});s.y=r.getHeight()-s.y-s.height,this.viewGL.setViewport(s.x,s.y,s.width,s.height,r.getDevicePixelRatio());var o=n.get("boxWidth"),u=n.get("boxHeight"),c=n.get("boxDepth");this.getAxis("x").setExtent(-o/2,o/2),this.getAxis("y").setExtent(c/2,-c/2),this.getAxis("z").setExtent(-u/2,u/2),this.size=[o,u,c]}function updateCartesian3D(n,r){var a={};function s(o,u){a[o]=a[o]||[1/0,-1/0],a[o][0]=Math.min(u[0],a[o][0]),a[o][1]=Math.max(u[1],a[o][1])}n.eachSeries(function(o){if(o.coordinateSystem===this){var u=o.getData();["x","y","z"].forEach(function(c){u.mapDimensionsAll(c,!0).forEach(function(p){s(c,u.getDataExtent(p,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(o){n.eachComponent(o,function(u){var c=o.charAt(0),p=u.getReferringComponents("grid3D").models[0],d=p.coordinateSystem;if(d===this){var _=d.getAxis(c);if(!_){var ja=createScale(a[c]||[1/0,-1/0],u);_=new Axis3D(c,ja),_.type=u.get("type");var Ja=_.type==="category";_.onBand=Ja&&u.get("boundaryGap"),_.inverse=u.get("inverse"),u.axis=_,_.model=u,_.getLabelModel=function(){return u.getModel("axisLabel",p.getModel("axisLabel"))},_.getTickModel=function(){return u.getModel("axisTick",p.getModel("axisTick"))},d.addAxis(_)}}},this)},this),this.resize(this.model,r)}var grid3DCreator={dimensions:Cartesian3D.prototype.dimensions,create:function(n,r){var a=[];n.eachComponent("grid3D",function(u){u.__viewGL=u.__viewGL||new ViewGL;var c=new Cartesian3D;c.model=u,c.viewGL=u.__viewGL,u.coordinateSystem=c,a.push(c),c.resize=resizeCartesian3D,c.update=updateCartesian3D});var s=["xAxis3D","yAxis3D","zAxis3D"];function o(u,c){return s.map(function(p){var d=u.getReferringComponents(p).models[0];return d==null&&(d=c.getComponent(p)),d})}return n.eachSeries(function(u){if(u.get("coordinateSystem")==="cartesian3D"){var c=u.getReferringComponents("grid3D").models[0];if(c==null){var p=o(u,n),c=p[0].getCoordSysModel();p.forEach(function(ja){ja.getCoordSysModel()})}var d=c.coordinateSystem;u.coordinateSystem=d}}),a}},Axis3DModel=ComponentModel.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});mixinAxisModelCommonMethods(Axis3DModel);var defaultOption={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},categoryAxis=merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},defaultOption),valueAxis=merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},defaultOption),timeAxis=defaults({scale:!0,min:"dataMin",max:"dataMax"},valueAxis),logAxis=defaults({logBase:10},valueAxis);logAxis.scale=!0;const axisDefault={categoryAxis3D:categoryAxis,valueAxis3D:valueAxis,timeAxis3D:timeAxis,logAxis3D:logAxis};var AXIS_TYPES=["value","category","time","log"];function createAxis3DModel(n,r,a,s,o){AXIS_TYPES.forEach(function(u){var c=a.extend({type:r+"Axis3D."+u,__ordinalMeta:null,mergeDefaultAndTheme:function(p,d){var _=d.getTheme();merge(p,_.get(u+"Axis3D")),merge(p,this.getDefaultOption()),p.type=s(r,p)},optionUpdated:function(){var p=this.option;p.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},getCategories:function(){if(this.option.type==="category")return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:merge(clone$4(axisDefault[u+"Axis3D"]),o||{},!0)});n.registerComponentModel(c)}),n.registerSubTypeDefaulter(r+"Axis3D",curry$1(s,r))}function getAxisType(n,r){return r.type||(r.data?"category":"value")}function install$f(n){n.registerComponentModel(Grid3DModel),n.registerComponentView(Grid3DView),n.registerCoordinateSystem("grid3D",grid3DCreator),["x","y","z"].forEach(function(r){createAxis3DModel(n,r,Axis3DModel,getAxisType,{name:r.toUpperCase()});const a=n.ComponentView.extend({type:r+"Axis3D"});n.registerComponentView(a)}),n.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(r,a){a.eachComponent({mainType:"grid3D",query:r},function(s){s.setView(r)})}),n.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(r,a){}),n.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(r,a){})}use(install$f);const componentShadingMixin={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},geo3DModelMixin={getFilledRegions:function(n,r){var a=(n||[]).slice(),s;if(typeof r=="string"?(r=getMap(r),s=r&&r.geoJson):r&&r.features&&(s=r),!s)return[];for(var o={},u=s.features,c=0;c<a.length;c++)o[a[c].name]=a[c];for(var c=0;c<u.length;c++){var p=u[c].properties.name;o[p]||a.push({name:p})}return a},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}};var Geo3DModel=ComponentModel.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var n=this.option;n.regions=this.getFilledRegions(n.regions,n.map);var r=createDimensions(n.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),a=new SeriesData(r,this);a.initData(n.regions);var s={};a.each(function(o){var u=a.getName(o),c=a.getItemModel(o);s[u]=c}),this._regionModelMap=s,this._data=a},getData:function(){return this._data},getRegionModel:function(n){var r=this.getData().getName(n);return this._regionModelMap[r]||new Model(null,this)},getRegionPolygonCoords:function(n){var r=this.getData().getName(n),a=this.coordinateSystem.getRegion(r);return a?a.geometries:[]},getFormattedLabel:function(n,r){var a=this._data.getName(n),s=this.getRegionModel(n),o=s.get(r==="normal"?["label","formatter"]:["emphasis","label","formatter"]);o==null&&(o=s.get(["label","formatter"]));var u={name:a};if(typeof o=="function")return u.status=r,o(u);if(typeof o=="string"){var c=u.seriesName;return o.replace("{a}",c??"")}else return a},defaultOption:{regions:[]}});merge(Geo3DModel.prototype,geo3DModelMixin);merge(Geo3DModel.prototype,componentViewControlMixin);merge(Geo3DModel.prototype,componentPostEffectMixin);merge(Geo3DModel.prototype,componentLightMixin);merge(Geo3DModel.prototype,componentShadingMixin);function earcut(n,r,a){a=a||2;var s=r&&r.length,o=s?r[0]*a:n.length,u=linkedList(n,0,o,a,!0),c=[];if(!u)return c;var p,d,_,ja,Ja,ec,tc;if(s&&(u=eliminateHoles(n,r,u,a)),n.length>80*a){p=_=n[0],d=ja=n[1];for(var rc=a;rc<o;rc+=a)Ja=n[rc],ec=n[rc+1],Ja<p&&(p=Ja),ec<d&&(d=ec),Ja>_&&(_=Ja),ec>ja&&(ja=ec);tc=Math.max(_-p,ja-d)}return earcutLinked(u,c,a,p,d,tc),c}function linkedList(n,r,a,s,o){var u,c;if(o===signedArea(n,r,a,s)>0)for(u=r;u<a;u+=s)c=insertNode(u,n[u],n[u+1],c);else for(u=a-s;u>=r;u-=s)c=insertNode(u,n[u],n[u+1],c);return c&&equals(c,c.next)&&(removeNode(c),c=c.next),c}function filterPoints(n,r){if(!n)return n;r||(r=n);var a=n,s;do if(s=!1,!a.steiner&&(equals(a,a.next)||area(a.prev,a,a.next)===0)){if(removeNode(a),a=r=a.prev,a===a.next)return null;s=!0}else a=a.next;while(s||a!==r);return r}function earcutLinked(n,r,a,s,o,u,c){if(n){!c&&u&&indexCurve(n,s,o,u);for(var p=n,d,_;n.prev!==n.next;){if(d=n.prev,_=n.next,u?isEarHashed(n,s,o,u):isEar(n)){r.push(d.i/a),r.push(n.i/a),r.push(_.i/a),removeNode(n),n=_.next,p=_.next;continue}if(n=_,n===p){c?c===1?(n=cureLocalIntersections(n,r,a),earcutLinked(n,r,a,s,o,u,2)):c===2&&splitEarcut(n,r,a,s,o,u):earcutLinked(filterPoints(n),r,a,s,o,u,1);break}}}}function isEar(n){var r=n.prev,a=n,s=n.next;if(area(r,a,s)>=0)return!1;for(var o=n.next.next;o!==n.prev;){if(pointInTriangle(r.x,r.y,a.x,a.y,s.x,s.y,o.x,o.y)&&area(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function isEarHashed(n,r,a,s){var o=n.prev,u=n,c=n.next;if(area(o,u,c)>=0)return!1;for(var p=o.x<u.x?o.x<c.x?o.x:c.x:u.x<c.x?u.x:c.x,d=o.y<u.y?o.y<c.y?o.y:c.y:u.y<c.y?u.y:c.y,_=o.x>u.x?o.x>c.x?o.x:c.x:u.x>c.x?u.x:c.x,ja=o.y>u.y?o.y>c.y?o.y:c.y:u.y>c.y?u.y:c.y,Ja=zOrder(p,d,r,a,s),ec=zOrder(_,ja,r,a,s),tc=n.nextZ;tc&&tc.z<=ec;){if(tc!==n.prev&&tc!==n.next&&pointInTriangle(o.x,o.y,u.x,u.y,c.x,c.y,tc.x,tc.y)&&area(tc.prev,tc,tc.next)>=0)return!1;tc=tc.nextZ}for(tc=n.prevZ;tc&&tc.z>=Ja;){if(tc!==n.prev&&tc!==n.next&&pointInTriangle(o.x,o.y,u.x,u.y,c.x,c.y,tc.x,tc.y)&&area(tc.prev,tc,tc.next)>=0)return!1;tc=tc.prevZ}return!0}function cureLocalIntersections(n,r,a){var s=n;do{var o=s.prev,u=s.next.next;!equals(o,u)&&intersects(o,s,s.next,u)&&locallyInside(o,u)&&locallyInside(u,o)&&(r.push(o.i/a),r.push(s.i/a),r.push(u.i/a),removeNode(s),removeNode(s.next),s=n=u),s=s.next}while(s!==n);return s}function splitEarcut(n,r,a,s,o,u){var c=n;do{for(var p=c.next.next;p!==c.prev;){if(c.i!==p.i&&isValidDiagonal(c,p)){var d=splitPolygon(c,p);c=filterPoints(c,c.next),d=filterPoints(d,d.next),earcutLinked(c,r,a,s,o,u),earcutLinked(d,r,a,s,o,u);return}p=p.next}c=c.next}while(c!==n)}function eliminateHoles(n,r,a,s){var o=[],u,c,p,d,_;for(u=0,c=r.length;u<c;u++)p=r[u]*s,d=u<c-1?r[u+1]*s:n.length,_=linkedList(n,p,d,s,!1),_===_.next&&(_.steiner=!0),o.push(getLeftmost(_));for(o.sort(compareX),u=0;u<o.length;u++)eliminateHole(o[u],a),a=filterPoints(a,a.next);return a}function compareX(n,r){return n.x-r.x}function eliminateHole(n,r){if(r=findHoleBridge(n,r),r){var a=splitPolygon(r,n);filterPoints(a,a.next)}}function findHoleBridge(n,r){var a=r,s=n.x,o=n.y,u=-1/0,c;do{if(o<=a.y&&o>=a.next.y&&a.next.y!==a.y){var p=a.x+(o-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(p<=s&&p>u){if(u=p,p===s){if(o===a.y)return a;if(o===a.next.y)return a.next}c=a.x<a.next.x?a:a.next}}a=a.next}while(a!==r);if(!c)return null;if(s===u)return c.prev;var d=c,_=c.x,ja=c.y,Ja=1/0,ec;for(a=c.next;a!==d;)s>=a.x&&a.x>=_&&s!==a.x&&pointInTriangle(o<ja?s:u,o,_,ja,o<ja?u:s,o,a.x,a.y)&&(ec=Math.abs(o-a.y)/(s-a.x),(ec<Ja||ec===Ja&&a.x>c.x)&&locallyInside(a,n)&&(c=a,Ja=ec)),a=a.next;return c}function indexCurve(n,r,a,s){var o=n;do o.z===null&&(o.z=zOrder(o.x,o.y,r,a,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==n);o.prevZ.nextZ=null,o.prevZ=null,sortLinked(o)}function sortLinked(n){var r,a,s,o,u,c,p,d,_=1;do{for(a=n,n=null,u=null,c=0;a;){for(c++,s=a,p=0,r=0;r<_&&(p++,s=s.nextZ,!!s);r++);for(d=_;p>0||d>0&&s;)p!==0&&(d===0||!s||a.z<=s.z)?(o=a,a=a.nextZ,p--):(o=s,s=s.nextZ,d--),u?u.nextZ=o:n=o,o.prevZ=u,u=o;a=s}u.nextZ=null,_*=2}while(c>1);return n}function zOrder(n,r,a,s,o){return n=32767*(n-a)/o,r=32767*(r-s)/o,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n|r<<1}function getLeftmost(n){var r=n,a=n;do r.x<a.x&&(a=r),r=r.next;while(r!==n);return a}function pointInTriangle(n,r,a,s,o,u,c,p){return(o-c)*(r-p)-(n-c)*(u-p)>=0&&(n-c)*(s-p)-(a-c)*(r-p)>=0&&(a-c)*(u-p)-(o-c)*(s-p)>=0}function isValidDiagonal(n,r){return n.next.i!==r.i&&n.prev.i!==r.i&&!intersectsPolygon(n,r)&&locallyInside(n,r)&&locallyInside(r,n)&&middleInside(n,r)}function area(n,r,a){return(r.y-n.y)*(a.x-r.x)-(r.x-n.x)*(a.y-r.y)}function equals(n,r){return n.x===r.x&&n.y===r.y}function intersects(n,r,a,s){return equals(n,r)&&equals(a,s)||equals(n,s)&&equals(a,r)?!0:area(n,r,a)>0!=area(n,r,s)>0&&area(a,s,n)>0!=area(a,s,r)>0}function intersectsPolygon(n,r){var a=n;do{if(a.i!==n.i&&a.next.i!==n.i&&a.i!==r.i&&a.next.i!==r.i&&intersects(a,a.next,n,r))return!0;a=a.next}while(a!==n);return!1}function locallyInside(n,r){return area(n.prev,n,n.next)<0?area(n,r,n.next)>=0&&area(n,n.prev,r)>=0:area(n,r,n.prev)<0||area(n,n.next,r)<0}function middleInside(n,r){var a=n,s=!1,o=(n.x+r.x)/2,u=(n.y+r.y)/2;do a.y>u!=a.next.y>u&&a.next.y!==a.y&&o<(a.next.x-a.x)*(u-a.y)/(a.next.y-a.y)+a.x&&(s=!s),a=a.next;while(a!==n);return s}function splitPolygon(n,r){var a=new Node(n.i,n.x,n.y),s=new Node(r.i,r.x,r.y),o=n.next,u=r.prev;return n.next=r,r.prev=n,a.next=o,o.prev=a,s.next=a,a.prev=s,u.next=s,s.prev=u,s}function insertNode(n,r,a,s){var o=new Node(n,r,a);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function removeNode(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Node(n,r,a){this.i=n,this.x=r,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(n,r,a,s){var o=r&&r.length,u=o?r[0]*a:n.length,c=Math.abs(signedArea(n,0,u,a));if(o)for(var p=0,d=r.length;p<d;p++){var _=r[p]*a,ja=p<d-1?r[p+1]*a:n.length;c-=Math.abs(signedArea(n,_,ja,a))}var Ja=0;for(p=0;p<s.length;p+=3){var ec=s[p]*a,tc=s[p+1]*a,rc=s[p+2]*a;Ja+=Math.abs((n[ec]-n[rc])*(n[tc+1]-n[ec+1])-(n[ec]-n[tc])*(n[rc+1]-n[ec+1]))}return c===0&&Ja===0?0:Math.abs((Ja-c)/c)};function signedArea(n,r,a,s){for(var o=0,u=r,c=a-s;u<a;u+=s)o+=(n[c]-n[u])*(n[u+1]+n[c+1]),c=u;return o}function swap(n,r,a){var s=n[r];n[r]=n[a],n[a]=s}function partition(n,r,a,s,o){var u=a,c=n[r];swap(n,r,s);for(var p=a;p<s;p++)o(n[p],c)<0&&(swap(n,p,u),u++);return swap(n,s,u),u}function quickSort(n,r,a,s){if(a<s){var o=Math.floor((a+s)/2),u=partition(n,o,a,s,r);quickSort(n,r,a,u-1),quickSort(n,r,u+1,s)}}function ProgressiveQuickSort(){this._parts=[]}ProgressiveQuickSort.prototype.step=function(n,r,a){var s=n.length;if(a===0){this._parts=[],this._sorted=!1;var o=Math.floor(s/2);this._parts.push({pivot:o,left:0,right:s-1}),this._currentSortPartIdx=0}if(!this._sorted){var u=this._parts;if(u.length===0)return this._sorted=!0,!0;if(u.length<512){for(var c=0;c<u.length;c++)u[c].pivot=partition(n,u[c].pivot,u[c].left,u[c].right,r);for(var p=[],c=0;c<u.length;c++){var d=u[c].left,_=u[c].pivot-1;_>d&&p.push({pivot:Math.floor((_+d)/2),left:d,right:_});var d=u[c].pivot+1,_=u[c].right;_>d&&p.push({pivot:Math.floor((_+d)/2),left:d,right:_})}u=this._parts=p}else for(var c=0;c<Math.floor(u.length/10);c++){var ja=u.length-1-this._currentSortPartIdx;if(quickSort(n,r,u[ja].left,u[ja].right),this._currentSortPartIdx++,this._currentSortPartIdx===u.length)return this._sorted=!0,!0}return!1}};ProgressiveQuickSort.sort=quickSort;var vec3$c=glmatrix.vec3,p0=vec3$c.create(),p1=vec3$c.create(),p2=vec3$c.create();const trianglesSortMixin={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(n,r){var a=this.indices;if(r===0){var s=this.attributes.position,n=n.array;(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new a.constructor(a.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var o=0,u,c=0;c<a.length;){s.get(a[c++],p0),s.get(a[c++],p1),s.get(a[c++],p2);var p=vec3$c.sqrDist(p0,n),d=vec3$c.sqrDist(p1,n),_=vec3$c.sqrDist(p2,n),ja=Math.min(p,d);ja=Math.min(ja,_),c===3?(u=ja,ja=0):ja=ja-u,this._triangleZList[o++]=ja}}for(var Ja=this._sortedTriangleIndices,c=0;c<Ja.length;c++)Ja[c]=c;if(this.triangleCount<2e4)r===0&&this._simpleSort(!0);else for(var c=0;c<3;c++)this._progressiveQuickSort(r*3+c);for(var ec=this._indicesTmp,tc=this._triangleZListTmp,rc=this._triangleZList,c=0;c<this.triangleCount;c++){var nc=Ja[c]*3,ic=c*3;ec[ic++]=a[nc++],ec[ic++]=a[nc++],ec[ic]=a[nc],tc[c]=rc[Ja[c]]}var uc=this._indicesTmp;this._indicesTmp=this.indices,this.indices=uc;var uc=this._triangleZListTmp;this._triangleZListTmp=this._triangleZList,this._triangleZList=uc,this.dirtyIndices()},_simpleSort:function(n){var r=this._triangleZList,a=this._sortedTriangleIndices;function s(o,u){return r[u]-r[o]}n?Array.prototype.sort.call(a,s):ProgressiveQuickSort.sort(a,s,0,a.length-1)},_progressiveQuickSort:function(n){var r=this._triangleZList,a=this._sortedTriangleIndices;this._quickSort=this._quickSort||new ProgressiveQuickSort,this._quickSort.step(a,function(s,o){return r[o]-r[s]},n)}};function getVisualColor(n){const r=n.getVisual("style");if(r){const a=n.getVisual("drawType");return r[a]}}function getVisualOpacity(n){return n.getVisual("style").opacity}function getItemVisualColor(n,r){const a=n.getItemVisual(r,"style");if(a){const s=n.getVisual("drawType");return a[s]}}function getItemVisualOpacity(n,r){const a=n.getItemVisual(r,"style");return a&&a.opacity}var LABEL_NORMAL_SHOW_BIT=1,LABEL_EMPHASIS_SHOW_BIT=2;function LabelsBuilder(n,r,a){this._labelsMesh=new LabelsMesh,this._labelTextureSurface=new ZRTextureAtlasSurface({width:512,height:512,devicePixelRatio:a.getDevicePixelRatio(),onupdate:function(){a.getZr().refresh()}}),this._api=a,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}LabelsBuilder.prototype.getLabelPosition=function(n,r,a){return[0,0,0]};LabelsBuilder.prototype.getLabelDistance=function(n,r,a){return 0};LabelsBuilder.prototype.getMesh=function(){return this._labelsMesh};LabelsBuilder.prototype.updateData=function(n,r,a){r==null&&(r=0),a==null&&(a=n.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==a-r)&&(this._labelsVisibilitiesBits=new Uint8Array(a-r));for(var s=["label","show"],o=["emphasis","label","show"],u=r;u<a;u++){var c=n.getItemModel(u),p=c.get(s),d=c.get(o);d==null&&(d=p);var _=(p?LABEL_NORMAL_SHOW_BIT:0)|(d?LABEL_EMPHASIS_SHOW_BIT:0);this._labelsVisibilitiesBits[u-r]=_}this._start=r,this._end=a,this._data=n};LabelsBuilder.prototype.updateLabels=function(n){if(this._data){n=n||[];for(var r=n.length>0,a={},s=0;s<n.length;s++)a[n[s]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var o=["label"],u=["emphasis","label"],c=this._data.hostModel,p=this._data,d=c.getModel(o),_=c.getModel(u,d),ja={left:"right",right:"left",top:"center",bottom:"center"},Ja={left:"middle",right:"middle",top:"bottom",bottom:"top"},ec=this._start;ec<this._end;ec++){var tc=!1;r&&a[ec]&&(tc=!0);var rc=this._labelsVisibilitiesBits[ec-this._start]&(tc?LABEL_EMPHASIS_SHOW_BIT:LABEL_NORMAL_SHOW_BIT);if(rc){var nc=p.getItemModel(ec),ic=nc.getModel(tc?u:o,tc?_:d),uc=ic.get("distance")||0,eh=ic.get("position"),rh=this._api.getDevicePixelRatio(),ah=c.getFormattedLabel(ec,tc?"emphasis":"normal");if(ah==null||ah==="")return;var ih=new ZRText({style:createTextStyle(ic,{text:ah,fill:ic.get("color")||getItemVisualColor(p,ec)||"#000",align:"left",verticalAlign:"top",opacity:retrieve.firstNotNull(ic.get("opacity"),getItemVisualOpacity(p,ec),1)})}),oh=ih.getBoundingRect(),uh=1.2;oh.height*=uh;var ch=this._labelTextureSurface.add(ih),hh=ja[eh]||"center",dh=Ja[eh]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(ec,eh,uc),[oh.width*rh,oh.height*rh],ch,hh,dh,this.getLabelDistance(ec,eh,uc)*rh)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}};LabelsBuilder.prototype.dispose=function(){this._labelTextureSurface.dispose()};var vec3$b=glmatrix.vec3;graphicGL.Shader.import(lines3DGLSL);function Geo3DBuilder(n){this.rootNode=new graphicGL.Node,this._triangulationResults={},this._shadersMap=graphicGL.COMMON_SHADERS.filter(function(a){return a!=="shadow"}).reduce(function(a,s){return a[s]=graphicGL.createShader("ecgl."+s),a},{}),this._linesShader=graphicGL.createShader("ecgl.meshLines3D");var r={};graphicGL.COMMON_SHADERS.forEach(function(a){r[a]=new graphicGL.Material({shader:graphicGL.createShader("ecgl."+a)})}),this._groundMaterials=r,this._groundMesh=new graphicGL.Mesh({geometry:new graphicGL.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new LabelsBuilder(512,512,n),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=n}Geo3DBuilder.prototype={constructor:Geo3DBuilder,extrudeY:!0,update:function(n,r,a,s,o){var u=n.getData();s==null&&(s=0),o==null&&(o=u.count()),this._startIndex=s,this._endIndex=o-1,this._triangulation(n,s,o);var c=this._getShader(n.get("shading"));this._prepareMesh(n,c,a,s,o),this.rootNode.updateWorldTransform(),this._updateRegionMesh(n,a,s,o);var p=n.coordinateSystem;p.type==="geo3D"&&this._updateGroundPlane(n,p,a);var d=this;this._labelsBuilder.updateData(u,s,o),this._labelsBuilder.getLabelPosition=function(_,ja,Ja){var ec=u.getName(_),tc,rc=Ja;if(p.type==="geo3D"){var nc=p.getRegion(ec);if(!nc)return[NaN,NaN,NaN];tc=nc.getCenter();var ic=p.dataToPoint([tc[0],tc[1],rc]);return ic}else var uc=d._triangulationResults[_-d._startIndex],tc=d.extrudeY?[(uc.max[0]+uc.min[0])/2,uc.max[1]+rc,(uc.max[2]+uc.min[2])/2]:[(uc.max[0]+uc.min[0])/2,(uc.max[1]+uc.min[1])/2,uc.max[2]+rc]},this._data=u,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(n),this._lastHoverDataIndex=0},_initMeshes:function(){var n=this;function r(){var o=new graphicGL.Mesh({name:"Polygon",material:new graphicGL.Material({shader:n._shadersMap.lambert}),geometry:new graphicGL.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(o.geometry,trianglesSortMixin),o}var a=r(),s=new graphicGL.Mesh({material:new graphicGL.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new LinesGeometry$2({useNativeLine:!1})});this.rootNode.add(a),this.rootNode.add(s),a.material.define("both","VERTEX_COLOR"),a.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=a,this._linesMesh=s,this.rootNode.add(this._groundMesh)},_getShader:function(n){var r=this._shadersMap[n];return r||(r=this._shadersMap.lambert),r.__shading=n,r},_prepareMesh:function(n,r,a,s,o){for(var u=0,c=0,p=0,d=0,_=s;_<o;_++){var ja=this._getRegionPolygonInfo(_),Ja=this._getRegionLinesInfo(_,n,this._linesMesh.geometry);u+=ja.vertexCount,c+=ja.triangleCount,p+=Ja.vertexCount,d+=Ja.triangleCount}var ec=this._polygonMesh,tc=ec.geometry;["position","normal","texcoord0","color"].forEach(function(rc){tc.attributes[rc].init(u)}),tc.indices=u>65535?new Uint32Array(c*3):new Uint16Array(c*3),ec.material.shader!==r&&ec.material.attachShader(r,!0),graphicGL.setMaterialFromModel(r.__shading,ec.material,n,a),p>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(p),this._linesMesh.geometry.setTriangleCount(d)),this._dataIndexOfVertex=new Uint32Array(u),this._vertexRangeOfDataIndex=new Uint32Array((o-s)*2)},_updateRegionMesh:function(n,r,a,s){for(var o=n.getData(),u=0,c=0,p=!1,oh=this._polygonMesh,d=this._linesMesh,_=a;_<s;_++){var ja=n.getRegionModel(_),Ja=ja.getModel("itemStyle"),ec=retrieve.firstNotNull(getItemVisualColor(o,_),Ja.get("color"),"#fff"),tc=retrieve.firstNotNull(getItemVisualOpacity(o,_),Ja.get("opacity"),1),rc=graphicGL.parseColor(ec),nc=graphicGL.parseColor(Ja.get("borderColor"));rc[3]*=tc,nc[3]*=tc;var ic=rc[3]<.99;oh.material.set("color",[1,1,1,1]),p=p||ic;for(var uc=retrieve.firstNotNull(ja.get("height",!0),n.get("regionHeight")),eh=this._updatePolygonGeometry(n,oh.geometry,_,uc,u,c,rc),rh=u;rh<eh.vertexOffset;rh++)this._dataIndexOfVertex[rh]=_;this._vertexRangeOfDataIndex[(_-a)*2]=u,this._vertexRangeOfDataIndex[(_-a)*2+1]=eh.vertexOffset,u=eh.vertexOffset,c=eh.triangleOffset;var ah=Ja.get("borderWidth"),ih=ah>0;ih&&(ah*=r.getDevicePixelRatio(),this._updateLinesGeometry(d.geometry,n,_,uc,ah,n.coordinateSystem.transform)),d.invisible=!ih,d.material.set({color:nc})}var oh=this._polygonMesh;oh.material.transparent=p,oh.material.depthMask=!p,oh.geometry.updateBoundingBox(),oh.frontFace=this.extrudeY?graphicGL.Mesh.CCW:graphicGL.Mesh.CW,oh.material.get("normalMap")&&oh.geometry.generateTangents(),oh.seriesIndex=n.seriesIndex,oh.on("mousemove",this._onmousemove,this),oh.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(n){var r=n.getModel("debug.wireframe");if(r.get("show")){var a=graphicGL.parseColor(r.get("lineStyle.color")||"rgba(0,0,0,0.5)"),s=retrieve.firstNotNull(r.get("lineStyle.width"),1),o=this._polygonMesh;o.geometry.generateBarycentric(),o.material.define("both","WIREFRAME_TRIANGLE"),o.material.set("wireframeLineColor",a),o.material.set("wireframeLineWidth",s)}},_onmousemove:function(n){var r=this._dataIndexOfVertex[n.triangle[0]];r==null&&(r=-1),r!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(r),this._labelsBuilder.updateLabels([r])),this._lastHoverDataIndex=r,this._polygonMesh.dataIndex=r},_onmouseout:function(n){n.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(n,r,a){var s=n.getModel("groundPlane",n);if(this._groundMesh.invisible=!s.get("show",!0),!this._groundMesh.invisible){var o=n.get("shading"),u=this._groundMaterials[o];u||(u=this._groundMaterials.lambert),graphicGL.setMaterialFromModel(o,u,s,a),u.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=u,this._groundMesh.material.set("color",graphicGL.parseColor(s.get("color"))),this._groundMesh.scale.set(r.size[0],r.size[2],1)}},_triangulation:function(n,r,a){this._triangulationResults=[];for(var s=[1/0,1/0,1/0],o=[-1/0,-1/0,-1/0],u=n.coordinateSystem,c=r;c<a;c++){for(var p=[],d=n.getRegionPolygonCoords(c),_=0;_<d.length;_++){var ja=d[_].exterior,Ja=d[_].interiors,ec=[],tc=[];if(!(ja.length<3)){for(var rc=0,nc=0;nc<ja.length;nc++){var ic=ja[nc];ec[rc++]=ic[0],ec[rc++]=ic[1]}for(var nc=0;nc<Ja.length;nc++)if(!(Ja[nc].length<3)){for(var uc=ec.length/2,eh=0;eh<Ja[nc].length;eh++){var ic=Ja[nc][eh];ec.push(ic[0]),ec.push(ic[1])}tc.push(uc)}for(var rh=earcut(ec,tc),ah=new Float64Array(ec.length/2*3),ih=[],oh=[1/0,1/0,1/0],uh=[-1/0,-1/0,-1/0],ch=0,nc=0;nc<ec.length;)vec3$b.set(ih,ec[nc++],0,ec[nc++]),u&&u.transform&&vec3$b.transformMat4(ih,ih,u.transform),vec3$b.min(oh,oh,ih),vec3$b.max(uh,uh,ih),ah[ch++]=ih[0],ah[ch++]=ih[1],ah[ch++]=ih[2];vec3$b.min(s,s,oh),vec3$b.max(o,o,uh),p.push({points:ah,indices:rh,min:oh,max:uh})}}this._triangulationResults.push(p)}this._geoBoundingBox=[s,o]},_getRegionPolygonInfo:function(n){for(var r=this._triangulationResults[n-this._startIndex],a=0,s=0,o=0;o<r.length;o++)a+=r[o].points.length/3,s+=r[o].indices.length/3;var u=a*2+a*4,c=s*2+a*2;return{vertexCount:u,triangleCount:c}},_updatePolygonGeometry:function(n,r,a,s,o,u,c){var p=n.get("projectUVOnGround"),d=r.attributes.position,_=r.attributes.normal,ja=r.attributes.texcoord0,Ja=r.attributes.color,ec=this._triangulationResults[a-this._startIndex],tc=Ja.value&&c,rc=r.indices,nc=this.extrudeY?1:2,ic=this.extrudeY?2:1,uc=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],eh=vec3$b.mul([],this._geoBoundingBox[0],uc),rh=vec3$b.mul([],this._geoBoundingBox[1],uc),ah=Math.max(rh[0]-eh[0],rh[2]-eh[2]);function ih(Wh,Qh,jh){for(var Hh=Wh.points,qh=Hh.length,nd=[],Sh=[],Gh=0;Gh<qh;Gh+=3)nd[0]=Hh[Gh],nd[nc]=Qh,nd[ic]=Hh[Gh+2],Sh[0]=(Hh[Gh]*uc[0]-eh[0])/ah,Sh[1]=(Hh[Gh+2]*uc[ic]-eh[2])/ah,d.set(o,nd),tc&&Ja.set(o,c),ja.set(o++,Sh)}function oh(Wh,Qh,jh){var Hh=o;ih(Wh,Qh);for(var qh=Wh.indices.length,nd=0;nd<qh;nd++)rc[u*3+nd]=Wh.indices[nd]+Hh;u+=Wh.indices.length/3}for(var uh=this.extrudeY?[0,1,0]:[0,0,1],ch=vec3$b.negate([],uh),hh=0;hh<ec.length;hh++){var dh=o,gh=ec[hh];oh(gh,0),oh(gh,s);for(var fh=gh.points.length/3,vh=0;vh<fh;vh++)_.set(dh+vh,ch),_.set(dh+vh+fh,uh);for(var ph=[0,3,1,1,3,2],yh=[[],[],[],[]],xh=[],_h=[],bh=[],Dh=[],Th=0,vh=0;vh<fh;vh++){for(var Ch=(vh+1)%fh,wh=(gh.points[Ch*3]-gh.points[vh*3])*uc[0],Nh=(gh.points[Ch*3+2]-gh.points[vh*3+2])*uc[ic],Rh=Math.sqrt(wh*wh+Nh*Nh),kh=0;kh<4;kh++){var Lh=kh===0||kh===3,Fh=(Lh?vh:Ch)*3;yh[kh][0]=gh.points[Fh],yh[kh][nc]=kh>1?s:0,yh[kh][ic]=gh.points[Fh+2],d.set(o+kh,yh[kh]),p?(Dh[0]=(gh.points[Fh]*uc[0]-eh[0])/ah,Dh[1]=(gh.points[Fh+2]*uc[ic]-eh[ic])/ah):(Dh[0]=(Lh?Th:Th+Rh)/ah,Dh[1]=(yh[kh][nc]*uc[nc]-eh[nc])/ah),ja.set(o+kh,Dh)}vec3$b.sub(xh,yh[1],yh[0]),vec3$b.sub(_h,yh[3],yh[0]),vec3$b.cross(bh,xh,_h),vec3$b.normalize(bh,bh);for(var kh=0;kh<4;kh++)_.set(o+kh,bh),tc&&Ja.set(o+kh,c);for(var kh=0;kh<6;kh++)rc[u*3+kh]=ph[kh]+o;o+=4,u+=2,Th+=Rh}}return r.dirty(),{vertexOffset:o,triangleOffset:u}},_getRegionLinesInfo:function(n,r,a){var s=0,o=0,u=r.getRegionModel(n),c=u.getModel("itemStyle"),p=c.get("borderWidth");if(p>0){var d=r.getRegionPolygonCoords(n);d.forEach(function(_){var ja=_.exterior,Ja=_.interiors;s+=a.getPolylineVertexCount(ja),o+=a.getPolylineTriangleCount(ja);for(var ec=0;ec<Ja.length;ec++)s+=a.getPolylineVertexCount(Ja[ec]),o+=a.getPolylineTriangleCount(Ja[ec])},this)}return{vertexCount:s,triangleCount:o}},_updateLinesGeometry:function(n,r,a,s,o,u){function c(_){for(var ja=new Float64Array(_.length*3),Ja=0,ec=[],tc=0;tc<_.length;tc++)ec[0]=_[tc][0],ec[1]=s+.1,ec[2]=_[tc][1],u&&vec3$b.transformMat4(ec,ec,u),ja[Ja++]=ec[0],ja[Ja++]=ec[1],ja[Ja++]=ec[2];return ja}var p=[1,1,1,1],d=r.getRegionPolygonCoords(a);d.forEach(function(_){var ja=_.exterior,Ja=_.interiors;n.addPolyline(c(ja),p,o);for(var ec=0;ec<Ja.length;ec++)n.addPolyline(c(Ja[ec]),p,o)})},highlight:function(n){var r=this._data;if(r){var a=r.getItemModel(n),s=a.getModel(["emphasis","itemStyle"]),o=s.get("color"),u=retrieve.firstNotNull(s.get("opacity"),getItemVisualOpacity(r,n),1);if(o==null){var c=getItemVisualColor(r,n);o=lift(c,-.4)}u==null&&(u=getItemVisualOpacity(r,n));var p=graphicGL.parseColor(o);p[3]*=u,this._setColorOfDataIndex(r,n,p)}},downplay:function(n){var r=this._data;if(r){var a=r.getItemModel(n),s=retrieve.firstNotNull(getItemVisualColor(r,n),a.get(["itemStyle","color"]),"#fff"),o=retrieve.firstNotNull(getItemVisualOpacity(r,n),a.get(["itemStyle","opacity"]),1),u=graphicGL.parseColor(s);u[3]*=o,this._setColorOfDataIndex(r,n,u)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(n,r,a){if(!(r<this._startIndex&&r>this._endIndex)){r-=this._startIndex;for(var s=this._vertexRangeOfDataIndex[r*2];s<this._vertexRangeOfDataIndex[r*2+1];s++)this._polygonMesh.geometry.attributes.color.set(s,a);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};const Geo3DView=ComponentView.extend({type:"geo3D",__ecgl__:!0,init:function(n,r){this._geo3DBuilder=new Geo3DBuilder(r),this.groupGL=new graphicGL.Node,this._lightRoot=new graphicGL.Node,this._sceneHelper=new SceneHelper(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new OrbitControl({zr:r.getZr()}),this._control.init()},render:function(n,r,a){this.groupGL.add(this._geo3DBuilder.rootNode);var s=n.coordinateSystem;if(!(!s||!s.viewGL)){s.viewGL.add(this._lightRoot),n.get("show")?s.viewGL.add(this.groupGL):s.viewGL.remove(this.groupGL);var o=this._control;o.setViewGL(s.viewGL);var u=n.getModel("viewControl");o.setFromViewControlModel(u,0),this._sceneHelper.setScene(s.viewGL.scene),this._sceneHelper.updateLight(n),s.viewGL.setPostEffect(n.getModel("postEffect"),a),s.viewGL.setTemporalSuperSampling(n.getModel("temporalSuperSampling")),this._geo3DBuilder.update(n,r,a,0,n.getData().count());var c=s.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(p){p.material&&p.material[c]("fragment","SRGB_DECODE")}),o.off("update"),o.on("update",function(){a.dispatchAction({type:"geo3DChangeCamera",alpha:o.getAlpha(),beta:o.getBeta(),distance:o.getDistance(),center:o.getCenter(),from:this.uid,geo3DId:n.id})}),o.update()}},afterRender:function(n,r,a,s){var o=s.renderer;this._sceneHelper.updateAmbientCubemap(o,n,a),this._sceneHelper.updateSkybox(o,n,a)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}});var geoCoordMap={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function fixGeoCoords(n,r){if(n==="world"){var a=geoCoordMap[r.name];if(a){var s=[a[0],a[1]];r.setCenter(s)}}}var vec3$a=glmatrix.vec3,mat4$1=glmatrix.mat4,geoFixFuncs=[fixTextCoords,fixGeoCoords];function Geo3D(n,r,a,s,o){this.name=n,this.map=r,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(a,s,o),this.transform=mat4$1.identity(new Float64Array(16)),this.invTransform=mat4$1.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}Geo3D.prototype={constructor:Geo3D,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(n,r,a){var s=parseGeoJSON||parseGeoJSON;try{this.regions=n?s(n):[]}catch(_){throw`Invalid geoJson format
`+_}r=r||{},a=a||{};for(var o=this.regions,u={},c=0;c<o.length;c++){var p=o[c].name;p=a[p]||p,o[c].name=p,u[p]=o[c],this.addGeoCoord(p,o[c].getCenter());var d=r[p];d&&o[c].transformTo(d.left,d.top,d.width,d.height)}this._regionsMap=u,this._geoRect=null,geoFixFuncs.forEach(function(_){_(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var n,r=this.regions,a=0;a<r.length;a++){var s=r[a].getBoundingRect();n=n||s.clone(),n.union(s)}return this._geoRect=n||new BoundingRect(0,0,0,0)},addGeoCoord:function(n,r){this._nameCoordMap[n]=r},getRegion:function(n){return this._regionsMap[n]},getRegionByCoord:function(n){for(var r=this.regions,a=0;a<r.length;a++)if(r[a].contain(n))return r[a]},setSize:function(n,r,a){this.size=[n,r,a];var s=this.getGeoBoundingRect(),o=n/s.width,u=-a/s.height,c=-n/2-s.x*o,p=a/2-s.y*u,d=this.extrudeY?[c,0,p]:[c,p,0],_=this.extrudeY?[o,1,u]:[o,u,1],ja=this.transform;mat4$1.identity(ja),mat4$1.translate(ja,ja,d),mat4$1.scale(ja,ja,_),mat4$1.invert(this.invTransform,ja)},dataToPoint:function(n,r){r=r||[];var a=this.extrudeY?1:2,s=this.extrudeY?2:1,o=n[2];return isNaN(o)&&(o=0),r[0]=n[0],r[s]=n[1],this.altitudeAxis?r[a]=this.altitudeAxis.dataToCoord(o):r[a]=0,r[a]+=this.regionHeight,vec3$a.transformMat4(r,r,this.transform),r},pointToData:function(n,r){}};function resizeGeo3D(n,r){var a=n.getBoxLayoutParams(),s=getLayoutRect(a,{width:r.getWidth(),height:r.getHeight()});s.y=r.getHeight()-s.y-s.height,this.viewGL.setViewport(s.x,s.y,s.width,s.height,r.getDevicePixelRatio());var o=this.getGeoBoundingRect(),u=o.width/o.height*(n.get("aspectScale")||.75),c=n.get("boxWidth"),p=n.get("boxDepth"),d=n.get("boxHeight");d==null&&(d=5),isNaN(c)&&isNaN(p)&&(c=100),isNaN(p)?p=c/u:isNaN(c)&&(c=p/u),this.setSize(c,d,p),this.regionHeight=n.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(d-this.regionHeight,0))}function updateGeo3D(n,r){var a=[1/0,-1/0];if(n.eachSeries(function(o){if(o.coordinateSystem===this&&o.type!=="series.map3D"){var u=o.getData(),c=o.coordDimToDataDim("alt"),p=c&&c[0];if(p){var d=u.getDataExtent(p,!0);a[0]=Math.min(a[0],d[0]),a[1]=Math.max(a[1],d[1])}}},this),a&&isFinite(a[1]-a[0])){var s=createScale(a,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new Axis("altitude",s),this.resize(this.model,r)}}var idStart=0,geo3DCreator={dimensions:Geo3D.prototype.dimensions,create:function(n,r){var a=[];if(!getMap)throw new Error("geo3D component depends on geo component");function s(o,u){var c=geo3DCreator.createGeo3D(o);o.__viewGL=o.__viewGL||new ViewGL,c.viewGL=o.__viewGL,o.coordinateSystem=c,c.model=o,a.push(c),c.resize=resizeGeo3D,c.resize(o,r),c.update=updateGeo3D}return n.eachComponent("geo3D",function(o,u){s(o)}),n.eachSeriesByType("map3D",function(o,u){var c=o.get("coordinateSystem");c==null&&(c="geo3D"),c==="geo3D"&&s(o)}),n.eachSeries(function(o){if(o.get("coordinateSystem")==="geo3D"){if(o.type==="series.map3D")return;var u=o.getReferringComponents("geo3D").models[0];if(u||(u=n.getComponent("geo3D")),!u)throw new Error('geo "'+retrieve.firstNotNull(o.get("geo3DIndex"),o.get("geo3DId"),0)+'" not found');o.coordinateSystem=u.coordinateSystem}}),a},createGeo3D:function(n){var r=n.get("map"),a;return typeof r=="string"?(a=r,r=getMap(r)):r&&r.features&&(r={geoJson:r}),a==null&&(a="GEO_ANONYMOUS_"+idStart++),new Geo3D(a+idStart++,a,r&&r.geoJson,r&&r.specialAreas,n.get("nameMap"))}};function install$e(n){n.registerComponentModel(Geo3DModel),n.registerComponentView(Geo3DView),n.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(r,a){a.eachComponent({mainType:"geo3D",query:r},function(s){s.setView(r)})}),n.registerCoordinateSystem("geo3D",geo3DCreator)}use(install$e);function defaultId(n,r){n.id=n.id||n.name||r+""}var GlobeModel=ComponentModel.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){GlobeModel.superApply(this,"init",arguments),each$f(this.option.layers,function(n,r){merge(n,this.defaultLayerOption),defaultId(n,r)},this)},mergeOption:function(n){var r=this.option.layers;this.option.layers=null,GlobeModel.superApply(this,"mergeOption",arguments);function a(c){return reduce(c,function(p,d,_){return defaultId(d,_),p[d.id]=d,p},{})}if(r&&r.length){var s=a(n.layers),o=a(r);for(var u in s)o[u]?merge(o[u],s[u],!0):r.push(n.layers[u]);this.option.layers=r}each$f(this.option.layers,function(c){merge(c,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(n,r,a){this.displacementData=n,this.displacementWidth=r,this.displacementHeight=a},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var n=this.getDisplacementTexture(),r=this.get("displacementScale");return(!n||n==="none")&&(r=0),r},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var n=this.getDisplacementTexture(),r=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==n||this._displacementScale!==r,this._displacementTexture=n,this._displacementScale=r},isDisplacementChanged:function(){return this._displacementChanged}});merge(GlobeModel.prototype,componentViewControlMixin);merge(GlobeModel.prototype,componentPostEffectMixin);merge(GlobeModel.prototype,componentLightMixin);merge(GlobeModel.prototype,componentShadingMixin);var PI$1=Math.PI,sin=Math.sin,cos=Math.cos,tan=Math.tan,asin=Math.asin,atan=Math.atan2,rad=PI$1/180,dayMs=1e3*60*60*24,J1970=2440588,J2000=2451545;function toJulian(n){return n.valueOf()/dayMs-.5+J1970}function toDays(n){return toJulian(n)-J2000}var e=rad*23.4397;function rightAscension(n,r){return atan(sin(n)*cos(e)-tan(r)*sin(e),cos(n))}function declination(n,r){return asin(sin(r)*cos(e)+cos(r)*sin(e)*sin(n))}function azimuth(n,r,a){return atan(sin(n),cos(n)*sin(r)-tan(a)*cos(r))}function altitude(n,r,a){return asin(sin(r)*sin(a)+cos(r)*cos(a)*cos(n))}function siderealTime(n,r){return rad*(280.16+360.9856235*n)-r}function solarMeanAnomaly(n){return rad*(357.5291+.98560028*n)}function eclipticLongitude(n){var r=rad*(1.9148*sin(n)+.02*sin(2*n)+3e-4*sin(3*n)),a=rad*102.9372;return n+r+a+PI$1}function sunCoords(n){var r=solarMeanAnomaly(n),a=eclipticLongitude(r);return{dec:declination(a,0),ra:rightAscension(a,0)}}var SunCalc={};SunCalc.getPosition=function(n,r,a){var s=rad*-a,o=rad*r,u=toDays(n),c=sunCoords(u),p=siderealTime(u,s)-c.ra;return{azimuth:azimuth(p,o,c.dec),altitude:altitude(p,o,c.dec)}};const atmosphereShaderCode=`@export ecgl.atmosphere.vertex
attribute vec3 position: POSITION;
attribute vec3 normal : NORMAL;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;

varying vec3 v_Normal;

void main() {
 v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end


@export ecgl.atmosphere.fragment
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform float glowPower;
uniform vec3 glowColor;

varying vec3 v_Normal;

void main() {
 float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor = vec4(glowColor, intensity * intensity);
}
@end`;graphicGL.Shader.import(utilShaderCode);graphicGL.Shader.import(atmosphereShaderCode);const GlobeView=ComponentView.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(n,r){this.groupGL=new graphicGL.Node,this._sphereGeometry=new graphicGL.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new graphicGL.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new graphicGL.PlaneGeometry,this._earthMesh=new graphicGL.Mesh({renderNormal:!0}),this._atmosphereMesh=new graphicGL.Mesh,this._atmosphereGeometry=new graphicGL.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new graphicGL.Material({shader:new graphicGL.Shader(graphicGL.Shader.source("ecgl.atmosphere.vertex"),graphicGL.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=graphicGL.Mesh.CW,this._lightRoot=new graphicGL.Node,this._sceneHelper=new SceneHelper,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new OrbitControl({zr:r.getZr()}),this._control.init(),this._layerMeshes={}},render:function(n,r,a){var s=n.coordinateSystem,o=n.get("shading");s.viewGL.add(this._lightRoot),n.get("show")?s.viewGL.add(this.groupGL):s.viewGL.remove(this.groupGL),this._sceneHelper.setScene(s.viewGL.scene),s.viewGL.setPostEffect(n.getModel("postEffect"),a),s.viewGL.setTemporalSuperSampling(n.getModel("temporalSuperSampling"));var u=this._earthMesh;u.geometry=this._sphereGeometry;var c="ecgl."+o;(!u.material||u.material.shader.name!==c)&&(u.material=graphicGL.createMaterial(c)),graphicGL.setMaterialFromModel(o,u.material,n,a),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(Ja){var ec=u.material.get(Ja);ec&&(ec.flipY=!1)}),u.material.set("color",graphicGL.parseColor(n.get("baseColor")));var p=s.radius*.99;if(u.scale.set(p,p,p),n.get("atmosphere.show")){u.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:n.get("atmosphere.glowPower")||6,glowColor:n.get("atmosphere.color")||"#ffffff"}),u.material.setUniforms({glowPower:n.get("atmosphere.innerGlowPower")||2,glowColor:n.get("atmosphere.color")||"#ffffff"});var d=n.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(p+d,p+d,p+d)}else u.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var _=u.material.setTextureImage("diffuseMap",n.get("baseTexture"),a,{flipY:!1,anisotropic:8});_&&_.surface&&_.surface.attachToMesh(u);var ja=u.material.setTextureImage("bumpMap",n.get("heightTexture"),a,{flipY:!1,anisotropic:8});ja&&ja.surface&&ja.surface.attachToMesh(u),u.material[n.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(n,a),this._displaceVertices(n,a),this._updateViewControl(n,a),this._updateLayers(n,a)},afterRender:function(n,r,a,s){var o=s.renderer;this._sceneHelper.updateAmbientCubemap(o,n,a),this._sceneHelper.updateSkybox(o,n,a)},_updateLayers:function(n,r){var a=n.coordinateSystem,s=n.get("layers"),o=a.radius,u=[],c=[],p=[],d=[];each$f(s,function(tc){var rc=new Model(tc),nc=rc.get("type"),ic=graphicGL.loadTexture(rc.get("texture"),r,{flipY:!1,anisotropic:8});if(ic.surface&&ic.surface.attachToMesh(this._earthMesh),nc==="blend"){var uc=rc.get("blendTo"),eh=retrieve.firstNotNull(rc.get("intensity"),1);uc==="emission"?(p.push(ic),d.push(eh)):(u.push(ic),c.push(eh))}else{var rh=rc.get("id"),ah=this._layerMeshes[rh];ah||(ah=this._layerMeshes[rh]=new graphicGL.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0}));var ih=rc.get("shading");ih==="lambert"?(ah.material=ah.__lambertMaterial||new graphicGL.Material({autoUpdateTextureStatus:!1,shader:graphicGL.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),ah.__lambertMaterial=ah.material):(ah.material=ah.__colorMaterial||new graphicGL.Material({autoUpdateTextureStatus:!1,shader:graphicGL.createShader("ecgl.color"),transparent:!0,depthMask:!1}),ah.__colorMaterial=ah.material),ah.material.enableTexture("diffuseMap");var oh=rc.get("distance"),uh=o+(oh??a.radius/100);ah.scale.set(uh,uh,uh),o=uh;var ch=this._blankTexture||(this._blankTexture=graphicGL.createBlankTexture("rgba(255, 255, 255, 0)"));ah.material.set("diffuseMap",ch),graphicGL.loadTexture(rc.get("texture"),r,{flipY:!1,anisotropic:8},function(hh){hh.surface&&hh.surface.attachToMesh(ah),ah.material.set("diffuseMap",hh),r.getZr().refresh()}),rc.get("show")?this.groupGL.add(ah):this.groupGL.remove(ah)}},this);var _=this._earthMesh.material;_.define("fragment","LAYER_DIFFUSEMAP_COUNT",u.length),_.define("fragment","LAYER_EMISSIVEMAP_COUNT",p.length),_.set("layerDiffuseMap",u),_.set("layerDiffuseIntensity",c),_.set("layerEmissiveMap",p),_.set("layerEmissionIntensity",d);var ja=n.getModel("debug.wireframe");if(ja.get("show")){_.define("both","WIREFRAME_TRIANGLE");var Ja=graphicGL.parseColor(ja.get("lineStyle.color")||"rgba(0,0,0,0.5)"),ec=retrieve.firstNotNull(ja.get("lineStyle.width"),1);_.set("wireframeLineWidth",ec),_.set("wireframeLineColor",Ja)}else _.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(n,r){var a=n.coordinateSystem,s=n.getModel("viewControl");a.viewGL.camera;var o=this;function u(){return{type:"globeChangeCamera",alpha:c.getAlpha(),beta:c.getBeta(),distance:c.getDistance()-a.radius,center:c.getCenter(),from:o.uid,globeId:n.id}}var c=this._control;c.setViewGL(a.viewGL);var p=s.get("targetCoord"),d,_;p!=null&&(_=p[0]+90,d=p[1]),c.setFromViewControlModel(s,{baseDistance:a.radius,alpha:d,beta:_}),c.off("update"),c.on("update",function(){r.dispatchAction(u())})},_displaceVertices:function(n,r){var a=n.get("displacementQuality"),s=n.get("debug.wireframe.show"),o=n.coordinateSystem;if(!(!n.isDisplacementChanged()&&a===this._displacementQuality&&s===this._showDebugWireframe)){this._displacementQuality=a,this._showDebugWireframe=s;var u=this._sphereGeometry,c={low:100,medium:200,high:400,ultra:800}[a]||200,p=c/2;(u.widthSegments!==c||s)&&(u.widthSegments=c,u.heightSegments=p,u.build()),this._doDisplaceVertices(u,o),s&&u.generateBarycentric()}},_doDisplaceVertices:function(n,r){var a=n.attributes.position.value,s=n.attributes.texcoord0.value,o=n.__originalPosition;(!o||o.length!==a.length)&&(o=new Float32Array(a.length),o.set(a),n.__originalPosition=o);for(var u=r.displacementWidth,c=r.displacementHeight,p=r.displacementData,d=0;d<n.vertexCount;d++){var _=d*3,ja=d*2,Ja=o[_+1],ec=o[_+2],tc=o[_+3],rc=s[ja++],nc=s[ja++],ic=Math.round(rc*(u-1)),uc=Math.round(nc*(c-1)),eh=uc*u+ic,rh=p?p[eh]:0;a[_+1]=Ja+Ja*rh,a[_+2]=ec+ec*rh,a[_+3]=tc+tc*rh}n.generateVertexNormals(),n.dirty(),n.updateBoundingBox()},_updateLight:function(n,r){var a=this._earthMesh;this._sceneHelper.updateLight(n);var s=this._sceneHelper.mainLight,o=n.get("light.main.time")||new Date,u=SunCalc.getPosition(parseDate(o),0,0),c=Math.cos(u.altitude);s.position.y=-c*Math.cos(u.azimuth),s.position.x=Math.sin(u.altitude),s.position.z=c*Math.sin(u.azimuth),s.lookAt(a.getWorldPosition())},dispose:function(n,r){this.groupGL.removeAll(),this._control.dispose()}});var vec3$9=glmatrix.vec3;function Globe(n){this.radius=n,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}Globe.prototype={constructor:Globe,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(n,r,a){this.displacementData=n,this.displacementWidth=r,this.displacementHeight=a},_getDisplacementScale:function(n,r){var a=(n+180)/360*(this.displacementWidth-1),s=(90-r)/180*(this.displacementHeight-1),o=Math.round(a)+Math.round(s)*this.displacementWidth;return this.displacementData[o]},dataToPoint:function(n,r){var a=n[0],s=n[1],o=n[2]||0,u=this.radius;this.displacementData&&(u*=1+this._getDisplacementScale(a,s)),this.altitudeAxis&&(u+=this.altitudeAxis.dataToCoord(o)),a=a*Math.PI/180,s=s*Math.PI/180;var c=Math.cos(s)*u;return r=r||[],r[0]=-c*Math.cos(a+Math.PI),r[1]=Math.sin(s)*u,r[2]=c*Math.sin(a+Math.PI),r},pointToData:function(n,r){var a=n[0],s=n[1],o=n[2],u=vec3$9.len(n);a/=u,s/=u,o/=u;var c=Math.asin(s),p=Math.atan2(o,-a);p<0&&(p=Math.PI*2+p);var d=c*180/Math.PI,_=p*180/Math.PI-180;return r=r||[],r[0]=_,r[1]=d,r[2]=u-this.radius,this.altitudeAxis&&(r[2]=this.altitudeAxis.coordToData(r[2])),r}};function getDisplacementData(n,r){var a=document.createElement("canvas"),s=a.getContext("2d"),o=n.width,u=n.height;a.width=o,a.height=u,s.drawImage(n,0,0,o,u);for(var c=s.getImageData(0,0,o,u).data,p=new Float32Array(c.length/4),d=0;d<c.length/4;d++){var _=c[d*4];p[d]=_/255*r}return{data:p,width:o,height:u}}function resizeGlobe(n,r){var a=n.getBoxLayoutParams(),s=getLayoutRect(a,{width:r.getWidth(),height:r.getHeight()});s.y=r.getHeight()-s.y-s.height,this.viewGL.setViewport(s.x,s.y,s.width,s.height,r.getDevicePixelRatio()),this.radius=n.get("globeRadius");var o=n.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,o-this.radius)}function updateGlobe(n,r){var a=[1/0,-1/0];if(n.eachSeries(function(o){if(o.coordinateSystem===this){var u=o.getData(),c=o.coordDimToDataDim("alt"),p=c&&c[0];if(p){var d=u.getDataExtent(p,!0);a[0]=Math.min(a[0],d[0]),a[1]=Math.max(a[1],d[1])}}},this),a&&isFinite(a[1]-a[0])){var s=createScale(a,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new Axis("altitude",s),this.resize(this.model,r)}}var globeCreator={dimensions:Globe.prototype.dimensions,create:function(n,r){var a=[];return n.eachComponent("globe",function(s){s.__viewGL=s.__viewGL||new ViewGL;var o=new Globe;o.viewGL=s.__viewGL,s.coordinateSystem=o,o.model=s,a.push(o),o.resize=resizeGlobe,o.resize(s,r),o.update=updateGlobe}),n.eachSeries(function(s){if(s.get("coordinateSystem")==="globe"){var o=s.getReferringComponents("globe").models[0];if(o||(o=n.getComponent("globe")),!o)throw new Error('globe "'+retrieve.firstNotNull(s.get("globe3DIndex"),s.get("globe3DId"),0)+'" not found');var u=o.coordinateSystem;s.coordinateSystem=u}}),n.eachComponent("globe",function(s,o){var u=s.coordinateSystem,c=s.getDisplacementTexture(),p=s.getDisplacemenScale();if(s.isDisplacementChanged()){if(s.hasDisplacement()){var d=!0;graphicGL.loadTexture(c,r,function(_){var ja=_.image,Ja=getDisplacementData(ja,p);s.setDisplacementData(Ja.data,Ja.width,Ja.height),d||r.dispatchAction({type:"globeUpdateDisplacment"})}),d=!1}else u.setDisplacementData(null,0,0);u.setDisplacementData(s.displacementData,s.displacementWidth,s.displacementHeight)}}),a}};function install$d(n){n.registerComponentModel(GlobeModel),n.registerComponentView(GlobeView),n.registerCoordinateSystem("globe",globeCreator),n.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(r,a){a.eachComponent({mainType:"globe",query:r},function(s){s.setView(r)})}),n.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(r,a){})}use(install$d);var MAPBOX_CAMERA_OPTION=["zoom","center","pitch","bearing"],Mapbox3DModel=ComponentModel.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var n=this;return MAPBOX_CAMERA_OPTION.reduce(function(r,a){return r[a]=n.get(a),r},{})},setMapboxCameraOption:function(n){n!=null&&MAPBOX_CAMERA_OPTION.forEach(function(r){n[r]!=null&&(this.option[r]=n[r])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(n){this._mapbox=n}});merge(Mapbox3DModel.prototype,componentPostEffectMixin);merge(Mapbox3DModel.prototype,componentLightMixin);function Mapbox3DLayer(n,r){if(this.id=n,this.zr=r,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Mapbox3DLayer.prototype.setUnpainted=function(){};Mapbox3DLayer.prototype.resize=function(){this._mapbox.resize()};Mapbox3DLayer.prototype.getMapbox=function(){return this._mapbox};Mapbox3DLayer.prototype.clear=function(){};Mapbox3DLayer.prototype.refresh=function(){this._mapbox.resize()};var EVENTS$1=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Mapbox3DLayer.prototype._initEvents=function(){var n=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(r){return r.preventDefault(),!1}},EVENTS$1.forEach(function(r){this._handlers[r]=function(a){var s={};for(var o in a)s[o]=a[o];s.bubbles=!1;var u=new a.constructor(a.type,s);n.dispatchEvent(u)},this.zr.dom.addEventListener(r,this._handlers[r])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)};Mapbox3DLayer.prototype.dispose=function(){EVENTS$1.forEach(function(n){this.zr.dom.removeEventListener(n,this._handlers[n])},this)};const displayShadowGLSL=`
@export ecgl.displayShadow.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_WorldPosition;

varying vec3 v_Normal;

void main()
{
 @import ecgl.common.uv.main
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);

 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}

@end


@export ecgl.displayShadow.fragment

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform float roughness: 0.2;

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.ssaoMap.header

@import clay.plugin.compute_shadow_map

void main()
{
 float shadow = 1.0;

 @import ecgl.common.ssaoMap.main

#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
 for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {
 shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);
 }
#endif

 shadow *= 0.5 + ao * 0.5;
 shadow = clamp(shadow, 0.0, 1.0);

 gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);
}

@end`;graphicGL.Shader.import(displayShadowGLSL);const Mapbox3DView=ComponentView.extend({type:"mapbox3D",__ecgl__:!0,init:function(n,r){var a=r.getZr();this._zrLayer=new Mapbox3DLayer("mapbox3D",a),a.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new graphicGL.Node,this._sceneHelper=new SceneHelper(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var s=this._zrLayer.getMapbox(),o=this._dispatchInteractAction.bind(this,r,s);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(u){s.on(u,o)}),this._groundMesh=new graphicGL.Mesh({geometry:new graphicGL.PlaneGeometry,material:new graphicGL.Material({shader:new graphicGL.Shader({vertex:graphicGL.Shader.source("ecgl.displayShadow.vertex"),fragment:graphicGL.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(n,r,a){var s=this._zrLayer.getMapbox(),o=n.get("style"),u=JSON.stringify(o);u!==this._oldStyleStr&&o&&s.setStyle(o),this._oldStyleStr=u,s.setCenter(n.get("center")),s.setZoom(n.get("zoom")),s.setPitch(n.get("pitch")),s.setBearing(n.get("bearing")),n.setMapbox(s);var c=n.coordinateSystem;c.viewGL.scene.add(this._lightRoot),c.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(c.viewGL.scene),this._sceneHelper.updateLight(n),c.viewGL.setPostEffect(n.getModel("postEffect"),a),c.viewGL.setTemporalSuperSampling(n.getModel("temporalSuperSampling")),this._mapbox3DModel=n},afterRender:function(n,r,a,s){var o=s.renderer;this._sceneHelper.updateAmbientCubemap(o,n,a),this._sceneHelper.updateSkybox(o,n,a),n.coordinateSystem.viewGL.scene.traverse(function(u){u.material&&(u.material.define("fragment","NORMAL_UP_AXIS",2),u.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(n,r,a,s){n.coordinateSystem.setCameraOption(s),this._updateGroundMesh(),a.getZr().refresh()},_dispatchInteractAction:function(n,r,a){n.dispatchAction({type:"mapbox3DChangeCamera",pitch:r.getPitch(),zoom:r.getZoom(),center:r.getCenter().toArray(),bearing:r.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var n=this._mapbox3DModel.coordinateSystem,r=n.dataToPoint(n.center);this._groundMesh.position.set(r[0],r[1],-.001);var a=new graphicGL.Plane(new graphicGL.Vector3(0,0,1),0),s=n.viewGL.camera.castRay(new graphicGL.Vector2(-1,-1)),o=n.viewGL.camera.castRay(new graphicGL.Vector2(1,1)),u=s.intersectPlane(a),c=o.intersectPlane(a),p=u.dist(c)/n.viewGL.rootNode.scale.x;this._groundMesh.scale.set(p,p,1)}},dispose:function(n,r){this._zrLayer&&this._zrLayer.dispose(),r.getZr().painter.delLayer(-1e3)}});var mat4=glmatrix.mat4,TILE_SIZE=512,FOV=.6435011087932844,PI=Math.PI,WORLD_SCALE=1/10;function MapServiceCoordSys3D(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}MapServiceCoordSys3D.prototype={constructor:MapServiceCoordSys3D,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(n){this.bearing=n.bearing,this.pitch=n.pitch,this.center=n.center,this.zoom=n.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,TILE_SIZE)),this._initialZoom==null&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var n=.5/Math.tan(FOV/2)*this.height*WORLD_SCALE,r=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,a=FOV/2,s=Math.PI/2+r,o=Math.sin(a)*n/Math.sin(Math.PI-s-a),u=Math.cos(Math.PI/2-r)*o+n,c=u*1.1;this.pitch>50&&(c=1e3);var p=[];mat4.perspective(p,FOV,this.width/this.height,1,c),this.viewGL.camera.projectionMatrix.setArray(p),this.viewGL.camera.decomposeProjectionMatrix();var p=mat4.identity([]),d=this.dataToPoint(this.center);mat4.scale(p,p,[1,-1,1]),mat4.translate(p,p,[0,0,-n]),mat4.rotateX(p,p,r),mat4.rotateZ(p,p,-this.bearing/180*Math.PI),mat4.translate(p,p,[-d[0]*this.getScale()*WORLD_SCALE,-d[1]*this.getScale()*WORLD_SCALE,0]),this.viewGL.camera.viewMatrix.array=p;var _=[];mat4.invert(_,p),this.viewGL.camera.worldTransform.array=_,this.viewGL.camera.decomposeWorldTransform();var ja=TILE_SIZE*this.getScale(),Ja;if(this.altitudeExtent&&!isNaN(this.boxHeight)){var ec=this.altitudeExtent[1]-this.altitudeExtent[0];Ja=this.boxHeight/ec*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else Ja=ja/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*WORLD_SCALE;this.viewGL.rootNode.scale.set(this.getScale()*WORLD_SCALE,this.getScale()*WORLD_SCALE,Ja)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(n,r){return this.projectOnTileWithScale(n,this.getScale()*TILE_SIZE,r)},projectOnTileWithScale:function(n,r,a){var s=n[0],o=n[1],u=s*PI/180,c=o*PI/180,p=r*(u+PI)/(2*PI),d=r*(PI-Math.log(Math.tan(PI/4+c*.5)))/(2*PI);return a=a||[],a[0]=p,a[1]=d,a},unprojectFromTile:function(n,r){return this.unprojectOnTileWithScale(n,this.getScale()*TILE_SIZE,r)},unprojectOnTileWithScale:function(n,r,a){var s=n[0],o=n[1],u=s/r*(2*PI)-PI,c=2*(Math.atan(Math.exp(PI-o/r*(2*PI)))-PI/4);return a=a||[],a[0]=u*180/PI,a[1]=c*180/PI,a},dataToPoint:function(n,r){return r=this.projectOnTileWithScale(n,TILE_SIZE,r),r[0]-=this._origin[0],r[1]-=this._origin[1],r[2]=isNaN(n[2])?0:n[2],isNaN(n[2])||(r[2]=n[2],this.altitudeExtent&&(r[2]-=this.altitudeExtent[0])),r}};function Mapbox3D(){MapServiceCoordSys3D.apply(this,arguments)}Mapbox3D.prototype=new MapServiceCoordSys3D;Mapbox3D.prototype.constructor=Mapbox3D;Mapbox3D.prototype.type="mapbox3D";function createMapService3DCreator(n,r,a){function s(u,c){var p=c.getWidth(),d=c.getHeight(),_=c.getDevicePixelRatio();this.viewGL.setViewport(0,0,p,d,_),this.width=p,this.height=d,this.altitudeScale=u.get("altitudeScale"),this.boxHeight=u.get("boxHeight")}function o(u,c){if(this.model.get("boxHeight")!=="auto"){var p=[1/0,-1/0];u.eachSeries(function(d){if(d.coordinateSystem===this){var _=d.getData(),ja=d.coordDimToDataDim("alt")[0];if(ja){var Ja=_.getDataExtent(ja,!0);p[0]=Math.min(p[0],Ja[0]),p[1]=Math.max(p[1],Ja[1])}}},this),p&&isFinite(p[1]-p[0])&&(this.altitudeExtent=p)}}return{dimensions:r.prototype.dimensions,create:function(u,c){var p=[];return u.eachComponent(n,function(d){var _=d.__viewGL;_||(_=d.__viewGL=new ViewGL,_.setRootNode(new graphicGL.Node));var ja=new r;ja.viewGL=d.__viewGL,ja.resize=s,ja.resize(d,c),p.push(ja),d.coordinateSystem=ja,ja.model=d,ja.update=o}),u.eachSeries(function(d){if(d.get("coordinateSystem")===n){var _=d.getReferringComponents(n).models[0];if(_||(_=u.getComponent(n)),!_)throw new Error(n+' "'+retrieve.firstNotNull(d.get(n+"Index"),d.get(n+"Id"),0)+'" not found');d.coordinateSystem=_.coordinateSystem}}),a&&a(p,u,c),p}}}var mapbox3DCreator=createMapService3DCreator("mapbox3D",Mapbox3D,function(n){n.forEach(function(r){r.setCameraOption(r.model.getMapboxCameraOption())})});function install$c(n){n.registerComponentModel(Mapbox3DModel),n.registerComponentView(Mapbox3DView),n.registerCoordinateSystem("mapbox3D",mapbox3DCreator),n.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(r,a){a.eachComponent({mainType:"mapbox3D",query:r},function(s){s.setMapboxCameraOption(r)})})}use(install$c);var MAPTALKS_CAMERA_OPTION=["zoom","center","pitch","bearing"],Maptalks3DModel=ComponentModel.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var n=this;return MAPTALKS_CAMERA_OPTION.reduce(function(r,a){return r[a]=n.get(a),r},{})},setMaptalksCameraOption:function(n){n!=null&&MAPTALKS_CAMERA_OPTION.forEach(function(r){n[r]!=null&&(this.option[r]=n[r])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(n){this._maptalks=n}});merge(Maptalks3DModel.prototype,componentPostEffectMixin);merge(Maptalks3DModel.prototype,componentLightMixin);function Maptalks3DLayer(n,r,a,s){if(this.id=n,this.zr=r,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:a,zoom:s,doubleClickZoom:!1,fog:!1}),this._initEvents()}Maptalks3DLayer.prototype.setUnpainted=function(){};Maptalks3DLayer.prototype.resize=function(){this._maptalks.checkSize()};Maptalks3DLayer.prototype.getMaptalks=function(){return this._maptalks};Maptalks3DLayer.prototype.clear=function(){};Maptalks3DLayer.prototype.refresh=function(){this._maptalks.checkSize()};var EVENTS=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];Maptalks3DLayer.prototype._initEvents=function(){var n=this.dom;this._handlers=this._handlers||{contextmenu:function(r){return r.preventDefault(),!1}},EVENTS.forEach(function(r){this._handlers[r]=function(a){var s={};for(var o in a)s[o]=a[o];s.bubbles=!1;var u=new a.constructor(a.type,s);r==="mousewheel"||r==="DOMMouseScroll"?n.dispatchEvent(u):n.firstElementChild.dispatchEvent(u)},this.zr.dom.addEventListener(r,this._handlers[r])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)};Maptalks3DLayer.prototype.dispose=function(){EVENTS.forEach(function(n){this.zr.dom.removeEventListener(n,this._handlers[n])},this),this._maptalks.remove()};graphicGL.Shader.import(displayShadowGLSL);const Maptalks3DView=ComponentView.extend({type:"maptalks3D",__ecgl__:!0,init:function(n,r){this._groundMesh=new graphicGL.Mesh({geometry:new graphicGL.PlaneGeometry,material:new graphicGL.Material({shader:new graphicGL.Shader({vertex:graphicGL.Shader.source("ecgl.displayShadow.vertex"),fragment:graphicGL.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(n,r){var a=r.getZr();this._zrLayer=new Maptalks3DLayer("maptalks3D",a,n.get("center"),n.get("zoom")),a.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new graphicGL.Node,this._sceneHelper=new SceneHelper(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var s=this._zrLayer.getMaptalks(),o=this._dispatchInteractAction.bind(this,r,s);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(u){s.on(u,o)})},render:function(n,r,a){this._zrLayer||this._initMaptalksLayer(n,a);var s=this._zrLayer.getMaptalks(),o=n.get("urlTemplate"),u=s.getBaseLayer();o!==this._oldUrlTemplate&&(u?u.setOptions({urlTemplate:o,attribution:n.get("attribution")}):(u=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:o,subdomains:["a","b","c"],attribution:n.get("attribution")}),s.setBaseLayer(u))),this._oldUrlTemplate=o,s.setCenter(n.get("center")),s.setZoom(n.get("zoom"),{animation:!1}),s.setPitch(n.get("pitch")),s.setBearing(n.get("bearing")),n.setMaptalks(s);var c=n.coordinateSystem;c.viewGL.scene.add(this._lightRoot),c.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(c.viewGL.scene),this._sceneHelper.updateLight(n),c.viewGL.setPostEffect(n.getModel("postEffect"),a),c.viewGL.setTemporalSuperSampling(n.getModel("temporalSuperSampling")),this._maptalks3DModel=n},afterRender:function(n,r,a,s){var o=s.renderer;this._sceneHelper.updateAmbientCubemap(o,n,a),this._sceneHelper.updateSkybox(o,n,a),n.coordinateSystem.viewGL.scene.traverse(function(u){u.material&&(u.material.define("fragment","NORMAL_UP_AXIS",2),u.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(n,r,a,s){n.coordinateSystem.setCameraOption(s),this._updateGroundMesh(),a.getZr().refresh()},_dispatchInteractAction:function(n,r,a){n.dispatchAction({type:"maptalks3DChangeCamera",pitch:r.getPitch(),zoom:getMapboxZoom(r.getResolution())+1,center:r.getCenter().toArray(),bearing:r.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var n=this._maptalks3DModel.coordinateSystem,r=n.dataToPoint(n.center);this._groundMesh.position.set(r[0],r[1],-.001);var a=new graphicGL.Plane(new graphicGL.Vector3(0,0,1),0),s=n.viewGL.camera.castRay(new graphicGL.Vector2(-1,-1)),o=n.viewGL.camera.castRay(new graphicGL.Vector2(1,1)),u=s.intersectPlane(a),c=o.intersectPlane(a),p=u.dist(c)/n.viewGL.rootNode.scale.x;this._groundMesh.scale.set(p,p,1)}},dispose:function(n,r){this._zrLayer&&this._zrLayer.dispose(),r.getZr().painter.delLayer(-1e3)}}),MAX_RES=2*6378137*Math.PI/(256*Math.pow(2,20));function getMapboxZoom(n){return 19-Math.log(n/MAX_RES)/Math.LN2}function Maptalks3D(){MapServiceCoordSys3D.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}Maptalks3D.prototype=new MapServiceCoordSys3D;Maptalks3D.prototype.constructor=Maptalks3D;Maptalks3D.prototype.type="maptalks3D";var maptalks3DCreator=createMapService3DCreator("maptalks3D",Maptalks3D,function(n){n.forEach(function(r){r.setCameraOption(r.model.getMaptalksCameraOption())})});function install$b(n){n.registerComponentModel(Maptalks3DModel),n.registerComponentView(Maptalks3DView),n.registerCoordinateSystem("maptalks3D",maptalks3DCreator),n.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(r,a){a.eachComponent({mainType:"maptalks3D",query:r},function(s){s.setMaptalksCameraOption(r)})})}use(install$b);var vec3$8=glmatrix.vec3,isDimensionStacked$1=dataStack.isDimensionStacked;function ifCrossZero(n){var r=n[0],a=n[1];return!(r>0&&a>0||r<0&&a<0)}function cartesian3DLayout(n,r){var a=n.getData(),s=n.get("barSize");if(s==null){var o=r.size,u,c,p=r.getAxis("x"),d=r.getAxis("y");p.type==="category"?u=p.getBandWidth()*.7:u=Math.round(o[0]/Math.sqrt(a.count()))*.6,d.type==="category"?c=d.getBandWidth()*.7:c=Math.round(o[1]/Math.sqrt(a.count()))*.6,s=[u,c]}else isArray$1(s)||(s=[s,s]);var _=r.getAxis("z").scale.getExtent(),ja=ifCrossZero(_),Ja=["x","y","z"].map(function(rc){return n.coordDimToDataDim(rc)[0]}),ec=isDimensionStacked$1(a,Ja[2]),tc=ec?a.getCalculationInfo("stackResultDimension"):Ja[2];a.each(Ja,function(rc,nc,ic,uc){var eh=a.get(tc,uc),rh=ec?eh-ic:ja?0:_[0],ah=r.dataToPoint([rc,nc,rh]),ih=r.dataToPoint([rc,nc,eh]),oh=vec3$8.dist(ah,ih),uh=[0,ih[1]<ah[1]?-1:1,0];Math.abs(oh)===0&&(oh=.1);var ch=[s[0],oh,s[1]];a.setItemLayout(uc,[ah,uh,ch])}),a.setLayout("orient",[1,0,0])}function evaluateBarSparseness(n,r,a){for(var s=n.getDataExtent(r),o=n.getDataExtent(a),u=s[1]-s[0]||s[0],c=o[1]-o[0]||o[0],p=50,d=new Uint8Array(p*p),_=0;_<n.count();_++){var ja=n.get(r,_),Ja=n.get(a,_),ec=Math.floor((ja-s[0])/u*(p-1)),tc=Math.floor((Ja-o[0])/c*(p-1)),rc=tc*p+ec;d[rc]=d[rc]||1}for(var nc=0,_=0;_<d.length;_++)d[_]&&nc++;return nc/d.length}var vec3$7=glmatrix.vec3,isDimensionStacked=dataStack.isDimensionStacked;function globeLayout(n,r){var a=n.getData(),s=n.get("minHeight")||0,o=n.get("barSize"),u=["lng","lat","alt"].map(function(_){return n.coordDimToDataDim(_)[0]});if(o==null){var c=r.radius*Math.PI,p=evaluateBarSparseness(a,u[0],u[1]);o=[c/Math.sqrt(a.count()/p),c/Math.sqrt(a.count()/p)]}else isArray$1(o)||(o=[o,o]);var d=getValueDimension(a,u);a.each(u,function(_,ja,Ja,ec){var tc=a.get(d.dimension,ec),rc=d.isStacked?tc-Ja:r.altitudeAxis.scale.getExtent()[0],nc=Math.max(r.altitudeAxis.dataToCoord(Ja),s),ic=r.dataToPoint([_,ja,rc]),uc=r.dataToPoint([_,ja,tc]),eh=vec3$7.sub([],uc,ic);vec3$7.normalize(eh,eh);var rh=[o[0],nc,o[1]];a.setItemLayout(ec,[ic,eh,rh])}),a.setLayout("orient",Vector3.UP.array)}function geo3DLayout(n,r){var a=n.getData(),s=n.get("barSize"),o=n.get("minHeight")||0,u=["lng","lat","alt"].map(function(ja){return n.coordDimToDataDim(ja)[0]});if(s==null){var c=Math.min(r.size[0],r.size[2]),p=evaluateBarSparseness(a,u[0],u[1]);s=[c/Math.sqrt(a.count()/p),c/Math.sqrt(a.count()/p)]}else isArray$1(s)||(s=[s,s]);var d=[0,1,0],_=getValueDimension(a,u);a.each(u,function(ja,Ja,ec,tc){var rc=a.get(_.dimension,tc),nc=_.isStacked?rc-ec:r.altitudeAxis.scale.getExtent()[0],ic=Math.max(r.altitudeAxis.dataToCoord(ec),o),uc=r.dataToPoint([ja,Ja,nc]),eh=[s[0],ic,s[1]];a.setItemLayout(tc,[uc,d,eh])}),a.setLayout("orient",[1,0,0])}function mapService3DLayout(n,r){var a=n.getData(),s=n.coordDimToDataDim("lng")[0],o=n.coordDimToDataDim("lat")[0],u=n.coordDimToDataDim("alt")[0],c=n.get("barSize"),p=n.get("minHeight")||0;if(c==null){var d=a.getDataExtent(s),_=a.getDataExtent(o),ja=r.dataToPoint([d[0],_[0]]),Ja=r.dataToPoint([d[1],_[1]]),ec=Math.min(Math.abs(ja[0]-Ja[0]),Math.abs(ja[1]-Ja[1]))||1,tc=evaluateBarSparseness(a,s,o);c=[ec/Math.sqrt(a.count()/tc),ec/Math.sqrt(a.count()/tc)]}else isArray$1(c)||(c=[c,c]),c[0]/=r.getScale()/16,c[1]/=r.getScale()/16;var rc=[0,0,1],nc=[s,o,u],ic=getValueDimension(a,nc);a.each(nc,function(uc,eh,rh,ah){var ih=a.get(ic.dimension,ah),oh=ic.isStacked?ih-rh:0,uh=r.dataToPoint([uc,eh,oh]),ch=r.dataToPoint([uc,eh,ih]),hh=Math.max(ch[2]-uh[2],p),dh=[c[0],hh,c[1]];a.setItemLayout(ah,[uh,rc,dh])}),a.setLayout("orient",[1,0,0])}function getValueDimension(n,r){var a=isDimensionStacked(n,r[2]);return{dimension:a?n.getCalculationInfo("stackResultDimension"):r[2],isStacked:a}}function registerBarLayout(n){n.registerLayout(function(r,a){r.eachSeriesByType("bar3D",function(s){var o=s.coordinateSystem,u=o&&o.type;u==="globe"?globeLayout(s,o):u==="cartesian3D"?cartesian3DLayout(s,o):u==="geo3D"?geo3DLayout(s,o):(u==="mapbox3D"||u==="maptalks3D")&&mapService3DLayout(s,o)})})}var formatUtil={};formatUtil.getFormattedLabel=function(n,r,a,s,o){a=a||"normal";var u=n.getData(s),c=u.getItemModel(r),p=n.getDataParams(r,s);o!=null&&p.value instanceof Array&&(p.value=p.value[o]);var d=c.get(a==="normal"?["label","formatter"]:["emphasis","label","formatter"]);d==null&&(d=c.get(["label","formatter"]));var _;return typeof d=="function"?(p.status=a,_=d(p)):typeof d=="string"&&(_=formatTpl(d,p)),_};formatUtil.normalizeToArray=function(n){return n instanceof Array?n:n==null?[]:[n]};function otherDimToDataDim(n,r){var a=[];return each$f(n.dimensions,function(s){var o=n.getDimensionInfo(s),u=o.otherDims,c=u[r];c!=null&&c!==!1&&(a[c]=o.name)}),a}function formatTooltip(n,r,a){function s(Ja){var ec=[],tc=otherDimToDataDim(o,"tooltip");tc.length?each$f(tc,function(nc){rc(o.get(nc,r),nc)}):each$f(Ja,rc);function rc(nc,ic){var uc=o.getDimensionInfo(ic);if(!(!uc||uc.otherDims.tooltip===!1)){var eh=uc.type,rh="- "+(uc.tooltipName||uc.name)+": "+(eh==="ordinal"?nc+"":eh==="time"?formatTime("yyyy/MM/dd hh:mm:ss",nc):addCommas(nc));rh&&ec.push(encodeHTML(rh))}}return"<br/>"+ec.join("<br/>")}var o=n.getData(),u=n.getRawValue(r),c=isArray$1(u)?s(u):encodeHTML(addCommas(u)),p=o.getName(r),d=getItemVisualColor(o,r);isObject$3(d)&&d.colorStops&&(d=(d.colorStops[0]||{}).color),d=d||"transparent";var _=getTooltipMarker(d),ja=n.name;return ja==="\0-"&&(ja=""),ja=ja?encodeHTML(ja)+"<br/>":"",ja+_+(p?encodeHTML(p)+": "+c:c)}function createList(n,r,a){a=a||n.getSource();var s=r||getCoordinateSystemDimensions(n.get("coordinateSystem"))||["x","y","z"],o=createDimensions(a,{dimensionsDefine:a.dimensionsDefine||n.get("dimensions"),encodeDefine:a.encodeDefine||n.get("encode"),coordDimensions:s.map(function(p){var d=n.getReferringComponents(p+"Axis3D").models[0];return{type:d&&d.get("type")==="category"?"ordinal":"float",name:p}})});n.get("coordinateSystem")==="cartesian3D"&&o.forEach(function(p){if(s.indexOf(p.coordDim)>=0){var d=n.getReferringComponents(p.coordDim+"Axis3D").models[0];d&&d.get("type")==="category"&&(p.ordinalMeta=d.getOrdinalMeta())}});var u=dataStack.enableDataStack(n,o,{byIndex:!0,stackedCoordDimension:"z"}),c=new SeriesData(o,n);return c.setCalculationInfo(u),c.initData(a),c}var Bar3DSeries=SeriesModel.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(n,r){return createList(this)},getFormattedLabel:function(n,r,a,s){var o=formatUtil.getFormattedLabel(this,n,r,a,s);return o==null&&(o=this.getData().get("z",n)),o},formatTooltip:function(n){return formatTooltip(this,n)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});merge(Bar3DSeries.prototype,componentShadingMixin);var vec3$6=glmatrix.vec3,mat3=glmatrix.mat3,BarsGeometry=Geometry.extend(function(){return{attributes:{position:new Geometry.Attribute("position","float",3,"POSITION"),normal:new Geometry.Attribute("normal","float",3,"NORMAL"),color:new Geometry.Attribute("color","float",4,"COLOR"),prevPosition:new Geometry.Attribute("prevPosition","float",3),prevNormal:new Geometry.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(n){var r=this.enableNormal,a=this.getBarVertexCount()*n,s=this.getBarTriangleCount()*n;this.vertexCount!==a&&(this.attributes.position.init(a),r?this.attributes.normal.init(a):this.attributes.normal.value=null,this.attributes.color.init(a)),this.triangleCount!==s&&(this.indices=a>65535?new Uint32Array(s*3):new Uint16Array(s*3),this._dataIndices=new Uint32Array(a))},getBarVertexCount:function(){var n=this.bevelSize>0?this.bevelSegments:0;return n>0?this._getBevelBarVertexCount(n):this.enableNormal?24:8},getBarTriangleCount:function(){var n=this.bevelSize>0?this.bevelSegments:0;return n>0?this._getBevelBarTriangleCount(n):12},_getBevelBarVertexCount:function(n){return(n+1)*4*(n+1)*2},_getBevelBarTriangleCount:function(n){var r=n*4+3,a=n*2+1;return(r+1)*a*2+4},setColor:function(n,r){for(var a=this.getBarVertexCount(),s=a*n,o=a*(n+1),u=s;u<o;u++)this.attributes.color.set(u,r);this.dirtyAttribute("color")},getDataIndexOfVertex:function(n){return this._dataIndices?this._dataIndices[n]:null},addBar:function(){for(var n=vec3$6.create,r=vec3$6.scaleAndAdd,a=n(),s=n(),o=n(),u=n(),c=n(),p=n(),d=n(),_=[],ja=[],Ja=0;Ja<8;Ja++)_[Ja]=n();for(var ec=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],tc=[0,1,2,0,2,3],rc=[],Ja=0;Ja<ec.length;Ja++)for(var nc=ec[Ja],ic=0;ic<2;ic++){for(var uc=[],eh=0;eh<3;eh++)uc.push(nc[tc[ic*3+eh]]);rc.push(uc)}return function(rh,ah,ih,oh,uh,ch){var hh=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(rh,ah,ih,oh,this.bevelSize,this.bevelSegments,uh);else{vec3$6.copy(o,ah),vec3$6.normalize(o,o),vec3$6.cross(u,ih,o),vec3$6.normalize(u,u),vec3$6.cross(s,o,u),vec3$6.normalize(u,u),vec3$6.negate(c,s),vec3$6.negate(p,o),vec3$6.negate(d,u),r(_[0],rh,s,oh[0]/2),r(_[0],_[0],u,oh[2]/2),r(_[1],rh,s,oh[0]/2),r(_[1],_[1],d,oh[2]/2),r(_[2],rh,c,oh[0]/2),r(_[2],_[2],d,oh[2]/2),r(_[3],rh,c,oh[0]/2),r(_[3],_[3],u,oh[2]/2),r(a,rh,o,oh[1]),r(_[4],a,s,oh[0]/2),r(_[4],_[4],u,oh[2]/2),r(_[5],a,s,oh[0]/2),r(_[5],_[5],d,oh[2]/2),r(_[6],a,c,oh[0]/2),r(_[6],_[6],d,oh[2]/2),r(_[7],a,c,oh[0]/2),r(_[7],_[7],u,oh[2]/2);var dh=this.attributes;if(this.enableNormal){ja[0]=s,ja[1]=c,ja[2]=o,ja[3]=p,ja[4]=u,ja[5]=d;for(var gh=this._vertexOffset,fh=0;fh<ec.length;fh++){for(var vh=this._triangleOffset*3,ph=0;ph<6;ph++)this.indices[vh++]=gh+tc[ph];gh+=4,this._triangleOffset+=2}for(var fh=0;fh<ec.length;fh++)for(var yh=ja[fh],ph=0;ph<4;ph++){var xh=ec[fh][ph];dh.position.set(this._vertexOffset,_[xh]),dh.normal.set(this._vertexOffset,yh),dh.color.set(this._vertexOffset++,uh)}}else{for(var fh=0;fh<rc.length;fh++){for(var vh=this._triangleOffset*3,ph=0;ph<3;ph++)this.indices[vh+ph]=rc[fh][ph]+this._vertexOffset;this._triangleOffset++}for(var fh=0;fh<_.length;fh++)dh.position.set(this._vertexOffset,_[fh]),dh.color.set(this._vertexOffset++,uh)}}for(var _h=this._vertexOffset,fh=hh;fh<_h;fh++)this._dataIndices[fh]=ch}}(),_addBevelBar:function(){var n=vec3$6.create(),r=vec3$6.create(),a=vec3$6.create(),s=mat3.create(),o=[],u=[1,-1,-1,1],c=[1,1,-1,-1],p=[2,0];return function(d,_,ja,Ja,ec,tc,rc){vec3$6.copy(r,_),vec3$6.normalize(r,r),vec3$6.cross(a,ja,r),vec3$6.normalize(a,a),vec3$6.cross(n,r,a),vec3$6.normalize(a,a),s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=r[0],s[4]=r[1],s[5]=r[2],s[6]=a[0],s[7]=a[1],s[8]=a[2],ec=Math.min(Ja[0],Ja[2])/2*ec;for(var nc=0;nc<3;nc++)o[nc]=Math.max(Ja[nc]-ec*2,0);for(var ic=(Ja[0]-o[0])/2,uc=(Ja[1]-o[1])/2,eh=(Ja[2]-o[2])/2,rh=[],ah=[],ih=this._vertexOffset,oh=[],nc=0;nc<2;nc++){oh[nc]=oh[nc]=[];for(var uh=0;uh<=tc;uh++)for(var ch=0;ch<4;ch++){(uh===0&&nc===0||nc===1&&uh===tc)&&oh[nc].push(ih);for(var hh=0;hh<=tc;hh++){var dh=hh/tc*Math.PI/2+Math.PI/2*ch,gh=uh/tc*Math.PI/2+Math.PI/2*nc;ah[0]=ic*Math.cos(dh)*Math.sin(gh),ah[1]=uc*Math.cos(gh),ah[2]=eh*Math.sin(dh)*Math.sin(gh),rh[0]=ah[0]+u[ch]*o[0]/2,rh[1]=ah[1]+uc+p[nc]*o[1]/2,rh[2]=ah[2]+c[ch]*o[2]/2,Math.abs(ic-uc)<1e-6&&Math.abs(uc-eh)<1e-6||(ah[0]/=ic*ic,ah[1]/=uc*uc,ah[2]/=eh*eh),vec3$6.normalize(ah,ah),vec3$6.transformMat3(rh,rh,s),vec3$6.transformMat3(ah,ah,s),vec3$6.add(rh,rh,d),this.attributes.position.set(ih,rh),this.enableNormal&&this.attributes.normal.set(ih,ah),this.attributes.color.set(ih,rc),ih++}}}for(var fh=tc*4+3,vh=tc*2+1,ph=fh+1,ch=0;ch<vh;ch++)for(var nc=0;nc<=fh;nc++){var yh=ch*ph+nc+this._vertexOffset,xh=ch*ph+(nc+1)%ph+this._vertexOffset,_h=(ch+1)*ph+(nc+1)%ph+this._vertexOffset,bh=(ch+1)*ph+nc+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[_h,yh,xh]),this.setTriangleIndices(this._triangleOffset++,[_h,bh,yh])}this.setTriangleIndices(this._triangleOffset++,[oh[0][0],oh[0][2],oh[0][1]]),this.setTriangleIndices(this._triangleOffset++,[oh[0][0],oh[0][3],oh[0][2]]),this.setTriangleIndices(this._triangleOffset++,[oh[1][0],oh[1][1],oh[1][2]]),this.setTriangleIndices(this._triangleOffset++,[oh[1][0],oh[1][2],oh[1][3]]),this._vertexOffset=ih}}()});defaults(BarsGeometry.prototype,dynamicConvertMixin);defaults(BarsGeometry.prototype,trianglesSortMixin);var vec3$5=glmatrix.vec3;const Bar3DView=ChartView.extend({type:"bar3D",__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node,this._api=r,this._labelsBuilder=new LabelsBuilder(256,256,r);var a=this;this._labelsBuilder.getLabelPosition=function(s,o,u){if(a._data){var c=a._data.getItemLayout(s),p=c[0],d=c[1],_=c[2][1];return vec3$5.scaleAndAdd([],p,d,u+_)}else return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(n,r,a){var s=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=s,this._barMesh||(this._barMesh=new graphicGL.Mesh({geometry:new BarsGeometry,shadowDepthMaterial:new graphicGL.Material({shader:new graphicGL.Shader(graphicGL.Shader.source("ecgl.sm.depth.vertex"),graphicGL.Shader.source("ecgl.sm.depth.fragment"))}),culling:n.coordinateSystem.type==="cartesian3D",renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var o=n.coordinateSystem;if(this._doRender(n,a),o&&o.viewGL){o.viewGL.add(this.groupGL);var u=o.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[u]("fragment","SRGB_DECODE")}this._data=n.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(n)},_updateAnimation:function(n){graphicGL.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,n)},_doRender:function(n,r){var a=n.getData(),s=n.get("shading"),o=s!=="color",u=this,c=this._barMesh,p="ecgl."+s;(!c.material||c.material.shader.name!==p)&&(c.material=graphicGL.createMaterial(p,["VERTEX_COLOR"])),graphicGL.setMaterialFromModel(s,c.material,n,r),c.geometry.enableNormal=o,c.geometry.resetOffset();var d=n.get("bevelSize"),_=n.get("bevelSmoothness");c.geometry.bevelSegments=_,c.geometry.bevelSize=d;var ja=[],Ja=new Float32Array(a.count()*4),ec=0,ic=0,tc=!1;a.each(function(eh){if(a.hasValue(eh)){var rh=getItemVisualColor(a,eh),ah=getItemVisualOpacity(a,eh);ah==null&&(ah=1),graphicGL.parseColor(rh,ja),ja[3]*=ah,Ja[ec++]=ja[0],Ja[ec++]=ja[1],Ja[ec++]=ja[2],Ja[ec++]=ja[3],ja[3]>0&&(ic++,ja[3]<.99&&(tc=!0))}}),c.geometry.setBarCount(ic);var rc=a.getLayout("orient"),nc=this._barIndexOfData=new Int32Array(a.count()),ic=0;a.each(function(eh){if(!a.hasValue(eh)){nc[eh]=-1;return}var rh=a.getItemLayout(eh),ah=rh[0],ih=rh[1],oh=rh[2],uh=eh*4;ja[0]=Ja[uh++],ja[1]=Ja[uh++],ja[2]=Ja[uh++],ja[3]=Ja[uh++],ja[3]>0&&(u._barMesh.geometry.addBar(ah,ih,rc,oh,ja,eh),nc[eh]=ic++)}),c.geometry.dirty(),c.geometry.updateBoundingBox();var uc=c.material;uc.transparent=tc,uc.depthMask=!tc,c.geometry.sortTriangles=tc,this._initHandler(n,r)},_initHandler:function(n,r){var a=n.getData(),s=this._barMesh,o=n.coordinateSystem.type==="cartesian3D";s.seriesIndex=n.seriesIndex;var u=-1;s.off("mousemove"),s.off("mouseout"),s.on("mousemove",function(c){var p=s.geometry.getDataIndexOfVertex(c.triangle[0]);p!==u&&(this._downplay(u),this._highlight(p),this._labelsBuilder.updateLabels([p]),o&&r.dispatchAction({type:"grid3DShowAxisPointer",value:[a.get("x",p),a.get("y",p),a.get("z",p,!0)]})),u=p,s.dataIndex=p},this),s.on("mouseout",function(c){this._downplay(u),this._labelsBuilder.updateLabels(),u=-1,s.dataIndex=-1,o&&r.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(n){var r=this._data;if(r){var a=this._barIndexOfData[n];if(!(a<0)){var s=r.getItemModel(n),o=s.getModel("emphasis.itemStyle"),u=o.get("color"),c=o.get("opacity");if(u==null){var p=getItemVisualColor(r,n);u=lift(p,-.4)}c==null&&(c=getItemVisualOpacity(r,n));var d=graphicGL.parseColor(u);d[3]*=c,this._barMesh.geometry.setColor(a,d),this._api.getZr().refresh()}}},_downplay:function(n){var r=this._data;if(r){var a=this._barIndexOfData[n];if(!(a<0)){var s=getItemVisualColor(r,n),o=getItemVisualOpacity(r,n),u=graphicGL.parseColor(s);u[3]*=o,this._barMesh.geometry.setColor(a,u),this._api.getZr().refresh()}}},highlight:function(n,r,a,s){this._toggleStatus("highlight",n,r,a,s)},downplay:function(n,r,a,s){this._toggleStatus("downplay",n,r,a,s)},_toggleStatus:function(n,r,a,s,o){var u=r.getData(),c=retrieve.queryDataIndex(u,o),p=this;c!=null?each$f(formatUtil.normalizeToArray(c),function(d){n==="highlight"?this._highlight(d):this._downplay(d)},this):u.each(function(d){n==="highlight"?p._highlight(d):p._downplay(d)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});function install$a(n){n.registerChartView(Bar3DView),n.registerSeriesModel(Bar3DSeries),registerBarLayout(n),n.registerProcessor(function(r,a){r.eachSeriesByType("bar3d",function(s){var o=s.getData();o.filterSelf(function(u){return o.hasValue(u)})})})}use(install$a);var Line3DSeries=SeriesModel.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(n,r){return createList(this)},formatTooltip:function(n){return formatTooltip(this,n)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}}),vec3$4=glmatrix.vec3;graphicGL.Shader.import(lines3DGLSL);const Line3DView=ChartView.extend({type:"line3D",__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node,this._api=r},render:function(n,r,a){var s=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=s,this._line3DMesh||(this._line3DMesh=new graphicGL.Mesh({geometry:new LinesGeometry$2({useNativeLine:!1,sortTriangles:!0}),material:new graphicGL.Material({shader:graphicGL.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var o=n.coordinateSystem;if(o&&o.viewGL){o.viewGL.add(this.groupGL);var u=o.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[u]("fragment","SRGB_DECODE")}this._doRender(n,a),this._data=n.getData(),this._camera=o.viewGL.camera,this.updateCamera(),this._updateAnimation(n)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(n,r){var a=n.getData(),s=this._line3DMesh;s.geometry.resetOffset();var o=a.getLayout("points"),u=[],c=new Float32Array(o.length/3*4),p=0,d=!1;a.each(function(Ja){var ec=getItemVisualColor(a,Ja),tc=getItemVisualOpacity(a,Ja);tc==null&&(tc=1),graphicGL.parseColor(ec,u),u[3]*=tc,c[p++]=u[0],c[p++]=u[1],c[p++]=u[2],c[p++]=u[3],u[3]<.99&&(d=!0)}),s.geometry.setVertexCount(s.geometry.getPolylineVertexCount(o)),s.geometry.setTriangleCount(s.geometry.getPolylineTriangleCount(o)),s.geometry.addPolyline(o,c,retrieve.firstNotNull(n.get("lineStyle.width"),1)),s.geometry.dirty(),s.geometry.updateBoundingBox();var _=s.material;_.transparent=d,_.depthMask=!d;var ja=n.getModel("debug.wireframe");ja.get("show")?(s.geometry.createAttribute("barycentric","float",3),s.geometry.generateBarycentric(),s.material.set("both","WIREFRAME_TRIANGLE"),s.material.set("wireframeLineColor",graphicGL.parseColor(ja.get("lineStyle.color")||"rgba(0,0,0,0.5)")),s.material.set("wireframeLineWidth",retrieve.firstNotNull(ja.get("lineStyle.width"),1))):s.material.set("both","WIREFRAME_TRIANGLE"),this._points=o,this._initHandler(n,r)},_updateAnimation:function(n){graphicGL.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,n)},_initHandler:function(n,r){var a=n.getData(),s=n.coordinateSystem,o=this._line3DMesh,u=-1;o.seriesIndex=n.seriesIndex,o.off("mousemove"),o.off("mouseout"),o.on("mousemove",function(c){var p=s.pointToData(c.point.array),d=a.indicesOfNearest("x",p[0])[0];d!==u&&(r.dispatchAction({type:"grid3DShowAxisPointer",value:[a.get("x",d),a.get("y",d),a.get("z",d)]}),o.dataIndex=d),u=d},this),o.on("mouseout",function(c){u=-1,o.dataIndex=-1,r.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var n=new Matrix4,r=this._camera;Matrix4.multiply(n,r.projectionMatrix,r.viewMatrix);var a=this._positionNDC,s=this._points,o=s.length/3;(!a||a.length/2!==o)&&(a=this._positionNDC=new Float32Array(o*2));for(var u=[],c=0;c<o;c++){var p=c*3,d=c*2;u[0]=s[p],u[1]=s[p+1],u[2]=s[p+2],u[3]=1,vec3$4.transformMat4(u,u,n.array),a[d]=u[0]/u[3],a[d+1]=u[1]/u[3]}},_pick:function(n,r,a,s,o,u){var c=this._positionNDC,p=this._data.hostModel,d=p.get("lineStyle.width"),_=-1,ja=a.viewport.width,Ja=a.viewport.height,ec=ja*.5,tc=Ja*.5;n=(n+1)*ec,r=(r+1)*tc;for(var rc=1;rc<c.length/2;rc++){var nc=(c[(rc-1)*2]+1)*ec,ic=(c[(rc-1)*2+1]+1)*tc,uc=(c[rc*2]+1)*ec,eh=(c[rc*2+1]+1)*tc;if(containStroke$4(nc,ic,uc,eh,d,n,r)){var rh=(nc-n)*(nc-n)+(ic-r)*(ic-r),ah=(uc-n)*(uc-n)+(eh-r)*(eh-r);_=rh<ah?rc-1:rc}}if(_>=0){var ih=_*3,oh=new Vector3(this._points[ih],this._points[ih+1],this._points[ih+2]);u.push({dataIndex:_,point:oh,pointWorld:oh.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(oh)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function install$9(n){n.registerChartView(Line3DView),n.registerSeriesModel(Line3DSeries),n.registerLayout(function(r,a){r.eachSeriesByType("line3D",function(s){var o=s.getData(),u=s.coordinateSystem;if(u){if(u.type!=="cartesian3D")return;var c=new Float32Array(o.count()*3),p=[],d=[],_=u.dimensions,ja=_.map(function(Ja){return s.coordDimToDataDim(Ja)[0]});u&&o.each(ja,function(Ja,ec,tc,rc){p[0]=Ja,p[1]=ec,p[2]=tc,u.dataToPoint(p,d),c[rc*3]=d[0],c[rc*3+1]=d[1],c[rc*3+2]=d[2]}),o.setLayout("points",c)}})})}use(install$9);const Scatter3DSeries=SeriesModel.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(n,r){return createList(this)},getFormattedLabel:function(n,r,a,s){var o=formatUtil.getFormattedLabel(this,n,r,a,s);if(o==null){var u=this.getData(),c=u.dimensions[u.dimensions.length-1];o=u.get(c,n)}return o},formatTooltip:function(n){return formatTooltip(this,n)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function makeSprite(n,s,a){var s=s||document.createElement("canvas");s.width=n,s.height=n;var o=s.getContext("2d");return a&&a(o),s}function makePath(n,r,a,s){isArray$1(r)||(r=[r,r]);var o=spriteUtil.getMarginByStyle(a,s),u=r[0]+o.left+o.right,c=r[1]+o.top+o.bottom,p=createSymbol$1(n,0,0,r[0],r[1]),d=Math.max(u,c);p.x=o.left,p.y=o.top,u>c?p.y+=(d-c)/2:p.x+=(d-u)/2;var _=p.getBoundingRect();return p.x-=_.x,p.y-=_.y,p.setStyle(a),p.update(),p.__size=d,p}function generateSDF(n,r,a){var s=r.width,o=r.height,u=n.canvas.width,c=n.canvas.height,p=s/u,d=o/c;function _(uc){return uc<128?1:-1}function ja(uc,eh){var rh=1/0;uc=Math.floor(uc*p),eh=Math.floor(eh*d);for(var ah=eh*s+uc,ih=r.data[ah*4],oh=_(ih),uh=Math.max(eh-a,0);uh<Math.min(eh+a,o);uh++)for(var ch=Math.max(uc-a,0);ch<Math.min(uc+a,s);ch++){var ah=uh*s+ch,hh=r.data[ah*4],dh=_(hh),gh=ch-uc,fh=uh-eh;if(oh!==dh){var vh=gh*gh+fh*fh;vh<rh&&(rh=vh)}}return oh*Math.sqrt(rh)}for(var Ja=n.createImageData(u,c),ec=0;ec<c;ec++)for(var tc=0;tc<u;tc++){var rc=ja(tc,ec),nc=rc/a*.5+.5,ic=(ec*u+tc)*4;Ja.data[ic++]=(1-nc)*255,Ja.data[ic++]=(1-nc)*255,Ja.data[ic++]=(1-nc)*255,Ja.data[ic++]=255}return Ja}var spriteUtil={getMarginByStyle:function(n){var r=n.minMargin||0,a=0;n.stroke&&n.stroke!=="none"&&(a=n.lineWidth==null?1:n.lineWidth);var s=n.shadowBlur||0,o=n.shadowOffsetX||0,u=n.shadowOffsetY||0,c={};return c.left=Math.max(a/2,-o+s,r),c.right=Math.max(a/2,o+s,r),c.top=Math.max(a/2,-u+s,r),c.bottom=Math.max(a/2,u+s,r),c},createSymbolSprite:function(n,r,a,s){var o=makePath(n,r,a),u=spriteUtil.getMarginByStyle(a);return{image:makeSprite(o.__size,s,function(c){brushSingle(c,o)}),margin:u}},createSDFFromCanvas:function(n,r,a,s){return makeSprite(r,s,function(o){var u=n.getContext("2d"),c=u.getImageData(0,0,n.width,n.height);o.putImageData(generateSDF(o,c,a),0,0)})},createSimpleSprite:function(n,r){return makeSprite(n,r,function(a){var s=n/2;a.beginPath(),a.arc(s,s,60,0,Math.PI*2,!1),a.closePath();var o=a.createRadialGradient(s,s,0,s,s,s);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),o.addColorStop(1,"rgba(255, 255, 255, 0)"),a.fillStyle=o,a.fill()})}},vec3$3=glmatrix.vec3;const verticesSortMixin={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(n,r){var a=this.indices,s=vec3$3.create();if(!a){a=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var o=0;o<a.length;o++)a[o]=o}if(r===0){var u=this.attributes.position,n=n.array,c=0;(!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount));for(var p,o=0;o<this.vertexCount;o++){u.get(o,s);var d=vec3$3.sqrDist(s,n);isNaN(d)&&(d=1e7,c++),o===0?(p=d,d=0):d=d-p,this._zList[o]=d}this._noneCount=c}if(this.vertexCount<2e4)r===0&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(var o=0;o<3;o++)this._progressiveQuickSort(r*3+o);this.dirtyIndices()},_simpleSort:function(n){var r=this._zList,a=this.indices;function s(o,u){return r[u]-r[o]}n?Array.prototype.sort.call(a,s):ProgressiveQuickSort.sort(a,s,0,a.length-1)},_progressiveQuickSort:function(n){var r=this._zList,a=this.indices;this._quickSort=this._quickSort||new ProgressiveQuickSort,this._quickSort.step(a,function(s,o){return r[o]-r[s]},n)}},sdfSpriteGLSL=`@export ecgl.sdfSprite.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform float elapsedTime : 0;

attribute vec3 position : POSITION;

#ifdef VERTEX_SIZE
attribute float size;
#else
uniform float u_Size;
#endif

#ifdef VERTEX_COLOR
attribute vec4 a_FillColor: COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute float prevSize;
uniform float percent : 1.0;
#endif


#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

varying float v_Size;

void main()
{

#ifdef POSITIONTEXTURE_ENABLED
 gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);
#else

 #ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 #else
 vec3 pos = position;
 #endif
 gl_Position = worldViewProjection * vec4(pos, 1.0);
#endif

#ifdef VERTEX_SIZE
#ifdef VERTEX_ANIMATION
 v_Size = mix(prevSize, size, percent);
#else
 v_Size = size;
#endif
#else
 v_Size = u_Size;
#endif

#ifdef VERTEX_COLOR
 v_Color = a_FillColor;
 #endif

 gl_PointSize = v_Size;
}

@end

@export ecgl.sdfSprite.fragment

uniform vec4 color: [1, 1, 1, 1];
uniform vec4 strokeColor: [1, 1, 1, 1];
uniform float smoothing: 0.07;

uniform float lineWidth: 0.0;

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

varying float v_Size;

uniform sampler2D sprite;

@import clay.util.srgb

void main()
{
 gl_FragColor = color;

 vec4 _strokeColor = strokeColor;

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
 #endif

#ifdef SPRITE_ENABLED
 float d = texture2D(sprite, gl_PointCoord).r;
 gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);

 if (lineWidth > 0.0) {
 float sLineWidth = lineWidth / 2.0;

 float outlineMaxValue0 = 0.5 + sLineWidth;
 float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;
 float outlineMinValue0 = 0.5 - sLineWidth - smoothing;
 float outlineMinValue1 = 0.5 - sLineWidth;

 if (d <= outlineMaxValue1 && d >= outlineMinValue0) {
 float a = _strokeColor.a;
 if (d <= outlineMinValue1) {
 a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);
 }
 else {
 a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);
 }
 gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);
 gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;
 }
 }
#endif

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(gl_FragColor);
#endif
}
@end`;var vec4=glmatrix.vec4;graphicGL.Shader.import(sdfSpriteGLSL);var PointsMesh=graphicGL.Mesh.extend(function(){var n=new graphicGL.Geometry({dynamic:!0,attributes:{color:new graphicGL.Geometry.Attribute("color","float",4,"COLOR"),position:new graphicGL.Geometry.Attribute("position","float",3,"POSITION"),size:new graphicGL.Geometry.Attribute("size","float",1),prevPosition:new graphicGL.Geometry.Attribute("prevPosition","float",3),prevSize:new graphicGL.Geometry.Attribute("prevSize","float",1)}});Object.assign(n,verticesSortMixin);var r=new graphicGL.Material({shader:graphicGL.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});r.enableTexture("sprite"),r.define("both","VERTEX_COLOR"),r.define("both","VERTEX_SIZE");var a=new graphicGL.Texture2D({image:document.createElement("canvas"),flipY:!1});return r.set("sprite",a),n.pick=this._pick.bind(this),{geometry:n,material:r,mode:graphicGL.Mesh.POINTS,sizeScale:1}},{_pick:function(n,r,a,s,o,u){var c=this._positionNDC;if(c)for(var p=a.viewport,d=2/p.width,_=2/p.height,ja=this.geometry.vertexCount-1;ja>=0;ja--){var Ja;this.geometry.indices?Ja=this.geometry.indices[ja]:Ja=ja;var ec=c[Ja*2],tc=c[Ja*2+1],rc=this.geometry.attributes.size.get(Ja)/this.sizeScale,nc=rc/2;if(n>ec-nc*d&&n<ec+nc*d&&r>tc-nc*_&&r<tc+nc*_){var ic=new graphicGL.Vector3,uc=new graphicGL.Vector3;this.geometry.attributes.position.get(Ja,ic.array),graphicGL.Vector3.transformMat4(uc,ic,this.worldTransform),u.push({vertexIndex:Ja,point:ic,pointWorld:uc,target:this,distance:uc.distance(s.getWorldPosition())})}}},updateNDCPosition:function(n,r,a){var s=this._positionNDC,o=this.geometry;(!s||s.length/2!==o.vertexCount)&&(s=this._positionNDC=new Float32Array(o.vertexCount*2));for(var u=vec4.create(),c=0;c<o.vertexCount;c++)o.attributes.position.get(c,u),u[3]=1,vec4.transformMat4(u,u,n.array),vec4.scale(u,u,1/u[3]),s[c*2]=u[0],s[c*2+1]=u[1]}}),SDF_RANGE=20,Z_2D=-10;function isSymbolSizeSame(n,r){return n&&r&&n[0]===r[0]&&n[1]===r[1]}function PointsBuilder(n,r){this.rootNode=new graphicGL.Node,this.is2D=n,this._labelsBuilder=new LabelsBuilder(256,256,r),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=r,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}PointsBuilder.prototype={constructor:PointsBuilder,highlightOnMouseover:!0,update:function(n,r,a,s,o){var u=this._prevMesh;this._prevMesh=this._mesh,this._mesh=u;var c=n.getData();if(s==null&&(s=0),o==null&&(o=c.count()),this._startDataIndex=s,this._endDataIndex=o-1,!this._mesh){var p=this._prevMesh&&this._prevMesh.material;this._mesh=new PointsMesh({renderOrder:10,frustumCulling:!1}),p&&(this._mesh.material=p)}var p=this._mesh.material,d=this._mesh.geometry,_=d.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var ja=this._getSymbolInfo(n,s,o),Ja=a.getDevicePixelRatio(),ec=n.getModel("itemStyle").getItemStyle(),tc=n.get("large"),rc=1;ja.maxSize>2?(rc=this._updateSymbolSprite(n,ec,ja,Ja),p.enableTexture("sprite")):p.disableTexture("sprite"),_.position.init(o-s);var nc=[];if(tc){p.undefine("VERTEX_SIZE"),p.undefine("VERTEX_COLOR");var ic=getVisualColor(c),uc=getVisualOpacity(c);graphicGL.parseColor(ic,nc),nc[3]*=uc,p.set({color:nc,u_Size:ja.maxSize*this._sizeScale})}else p.set({color:[1,1,1,1]}),p.define("VERTEX_SIZE"),p.define("VERTEX_COLOR"),_.size.init(o-s),_.color.init(o-s),this._originalOpacity=new Float32Array(o-s);for(var eh=c.getLayout("points"),rh=_.position.value,ah=0;ah<o-s;ah++){var ih=ah*3,oh=ah*2;if(this.is2D?(rh[ih]=eh[oh],rh[ih+1]=eh[oh+1],rh[ih+2]=Z_2D):(rh[ih]=eh[ih],rh[ih+1]=eh[ih+1],rh[ih+2]=eh[ih+2]),!tc){var ic=getItemVisualColor(c,ah),uc=getItemVisualOpacity(c,ah);graphicGL.parseColor(ic,nc),nc[3]*=uc,_.color.set(ah,nc),nc[3]<.99;var uh=c.getItemVisual(ah,"symbolSize");uh=uh instanceof Array?Math.max(uh[0],uh[1]):uh,isNaN(uh)&&(uh=0),_.size.value[ah]=uh*rc*this._sizeScale,this._originalOpacity[ah]=nc[3]}}this._mesh.sizeScale=rc,d.updateBoundingBox(),d.dirty(),this._updateMaterial(n,ec);var ch=n.coordinateSystem;if(ch&&ch.viewGL){var hh=ch.viewGL.isLinearSpace()?"define":"undefine";p[hh]("fragment","SRGB_DECODE")}tc||this._updateLabelBuilder(n,s,o),this._updateHandler(n,r,a),this._updateAnimation(n),this._api=a},getPointsMesh:function(){return this._mesh},updateLabels:function(n){this._labelsBuilder.updateLabels(n)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(n,r,a,s){a.maxSize=Math.min(a.maxSize*2,200);var o=[];return a.aspect>1?(o[0]=a.maxSize,o[1]=a.maxSize/a.aspect):(o[1]=a.maxSize,o[0]=a.maxSize*a.aspect),o[0]=o[0]||1,o[1]=o[1]||1,(this._symbolType!==a.type||!isSymbolSizeSame(this._symbolSize,o)||this._lineWidth!==r.lineWidth)&&(spriteUtil.createSymbolSprite(a.type,o,{fill:"#fff",lineWidth:r.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(o[0]/2,10)},this._spriteImageCanvas),spriteUtil.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),SDF_RANGE,this._mesh.material.get("sprite").image),this._symbolType=a.type,this._symbolSize=o,this._lineWidth=r.lineWidth),this._spriteImageCanvas.width/a.maxSize*s},_updateMaterial:function(n,r){var a=n.get("blendMode")==="lighter"?graphicGL.additiveBlend:null,s=this._mesh.material;s.blend=a,s.set("lineWidth",r.lineWidth/SDF_RANGE);var o=graphicGL.parseColor(r.stroke);s.set("strokeColor",o),s.transparent=!0,s.depthMask=!1,s.depthTest=!this.is2D,s.sortVertices=!this.is2D},_updateLabelBuilder:function(n,c,a){var s=n.getData(),o=this._mesh.geometry,u=o.attributes.position.value,c=this._startDataIndex,p=this._mesh.sizeScale;this._labelsBuilder.updateData(s,c,a),this._labelsBuilder.getLabelPosition=function(d,_,ja){var Ja=(d-c)*3;return[u[Ja],u[Ja+1],u[Ja+2]]},this._labelsBuilder.getLabelDistance=function(d,_,ja){var Ja=o.attributes.size.get(d-c)/p;return Ja/2+ja},this._labelsBuilder.updateLabels()},_updateAnimation:function(n){graphicGL.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,n)},_updateHandler:function(n,r,a){var s=n.getData(),o=this._mesh,u=this,c=-1,p=n.coordinateSystem&&n.coordinateSystem.type==="cartesian3D",d;p&&(d=n.coordinateSystem.model),o.seriesIndex=n.seriesIndex,o.off("mousemove"),o.off("mouseout"),o.on("mousemove",function(_){var ja=_.vertexIndex+u._startDataIndex;ja!==c&&(this.highlightOnMouseover&&(this.downplay(s,c),this.highlight(s,ja),this._labelsBuilder.updateLabels([ja])),p&&a.dispatchAction({type:"grid3DShowAxisPointer",value:[s.get(n.coordDimToDataDim("x")[0],ja),s.get(n.coordDimToDataDim("y")[0],ja),s.get(n.coordDimToDataDim("z")[0],ja)],grid3DIndex:d.componentIndex})),o.dataIndex=ja,c=ja},this),o.on("mouseout",function(_){var ja=_.vertexIndex+u._startDataIndex;this.highlightOnMouseover&&(this.downplay(s,ja),this._labelsBuilder.updateLabels()),c=-1,o.dataIndex=-1,p&&a.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:d.componentIndex})},this)},updateLayout:function(n,r,a){var s=n.getData();if(this._mesh){var o=this._mesh.geometry.attributes.position.value,u=s.getLayout("points");if(this.is2D)for(var c=0;c<u.length/2;c++){var p=c*3,d=c*2;o[p]=u[d],o[p+1]=u[d+1],o[p+2]=Z_2D}else for(var c=0;c<u.length;c++)o[c]=u[c];this._mesh.geometry.dirty(),a.getZr().refresh()}},updateView:function(n){if(this._mesh){var r=new Matrix4;Matrix4.mul(r,n.viewMatrix,this._mesh.worldTransform),Matrix4.mul(r,n.projectionMatrix,r),this._mesh.updateNDCPosition(r,this.is2D,this._api)}},highlight:function(n,r){if(!(r>this._endDataIndex||r<this._startDataIndex)){var a=n.getItemModel(r),s=a.getModel("emphasis.itemStyle"),o=s.get("color"),u=s.get("opacity");if(o==null){var c=getItemVisualColor(n,r);o=lift(c,-.4)}u==null&&(u=getItemVisualOpacity(n,r));var p=graphicGL.parseColor(o);p[3]*=u,this._mesh.geometry.attributes.color.set(r-this._startDataIndex,p),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(n,r){if(!(r>this._endDataIndex||r<this._startDataIndex)){var a=getItemVisualColor(n,r),s=getItemVisualOpacity(n,r),o=graphicGL.parseColor(a);o[3]*=s,this._mesh.geometry.attributes.color.set(r-this._startDataIndex,o),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(n){if(this._originalOpacity){for(var r=this._mesh.geometry,a=0;a<r.vertexCount;a++){var s=this._originalOpacity[a]*n;r.attributes.color.value[a*4+3]=s}r.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(n){this._mesh&&this._setPositionTextureToMesh(this._mesh,n),this._positionTexture=n},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(n){if(n!==this._sizeScale){if(this._mesh){var r=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",r/this._sizeScale*n);var a=this._mesh.geometry.attributes;if(a.size.value)for(var s=0;s<a.size.value.length;s++)a.size.value[s]=a.size.value[s]/this._sizeScale*n}this._sizeScale=n}},_setPositionTextureToMesh:function(n,r){r&&n.material.set("positionTexture",r),n.material[r?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(n,r,a){if(n.get("large")){var s=retrieve.firstNotNull(n.get("symbolSize"),1),p,u;return s instanceof Array?(p=Math.max(s[0],s[1]),u=s[0]/s[1]):(p=s,u=1),{maxSize:s,type:n.get("symbol"),aspect:u}}for(var o=n.getData(),u,c=o.getItemVisual(0,"symbol")||"circle",p=0,d=r;d<a;d++){var s=o.getItemVisual(d,"symbolSize"),_=o.getItemVisual(d,"symbol"),ja;if(s instanceof Array)ja=s[0]/s[1],p=Math.max(Math.max(s[0],s[1]),p);else{if(isNaN(s))continue;ja=1,p=Math.max(s,p)}c=_,u=ja}return{maxSize:p,type:c,aspect:u}}};const Scatter3DView=ChartView.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(n,r,a){if(this.groupGL.removeAll(),!!n.getData().count()){var s=n.coordinateSystem;if(s&&s.viewGL){s.viewGL.add(this.groupGL),this._camera=s.viewGL.camera;var o=this._pointsBuilderList[0];o||(o=this._pointsBuilderList[0]=new PointsBuilder(!1,a)),this._pointsBuilderList.length=1,this.groupGL.add(o.rootNode),o.update(n,r,a),o.updateView(s.viewGL.camera)}}},incrementalPrepareRender:function(n,r,a){var s=n.coordinateSystem;s&&s.viewGL&&(s.viewGL.add(this.groupGL),this._camera=s.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(n,r,a,s){if(!(n.end<=n.start)){var o=this._pointsBuilderList[this._currentStep];o||(o=new PointsBuilder(!1,s),this._pointsBuilderList[this._currentStep]=o),this.groupGL.add(o.rootNode),o.update(r,a,s,n.start,n.end),o.updateView(r.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(n){n.updateView(this._camera)},this)},highlight:function(n,r,a,s){this._toggleStatus("highlight",n,r,a,s)},downplay:function(n,r,a,s){this._toggleStatus("downplay",n,r,a,s)},_toggleStatus:function(n,r,a,s,o){var u=r.getData(),c=retrieve.queryDataIndex(u,o),p=n==="highlight";c!=null?each$f(formatUtil.normalizeToArray(c),function(d){for(var _=0;_<this._pointsBuilderList.length;_++){var ja=this._pointsBuilderList[_];p?ja.highlight(u,d):ja.downplay(u,d)}},this):u.each(function(d){for(var _=0;_<this._pointsBuilderList.length;_++){var ja=this._pointsBuilderList[_];p?ja.highlight(u,d):ja.downplay(u,d)}})},dispose:function(){this._pointsBuilderList.forEach(function(n){n.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function install$8(n){n.registerChartView(Scatter3DView),n.registerSeriesModel(Scatter3DSeries),n.registerLayout({seriesType:"scatter3D",reset:function(r){var a=r.coordinateSystem;if(a){var s=a.dimensions;if(s.length<3)return;var o=s.map(function(p){return r.coordDimToDataDim(p)[0]}),u=[],c=[];return{progress:function(p,d){for(var _=new Float32Array((p.end-p.start)*3),ja=p.start;ja<p.end;ja++){var Ja=(ja-p.start)*3;u[0]=d.get(o[0],ja),u[1]=d.get(o[1],ja),u[2]=d.get(o[2],ja),a.dataToPoint(u,c),_[Ja]=c[0],_[Ja+1]=c[1],_[Ja+2]=c[2]}d.setLayout("points",_)}}}}})}use(install$8);var vec3$2=glmatrix.vec3,vec2$2=glmatrix.vec2,normalize$1=vec3$2.normalize,cross=vec3$2.cross,sub=vec3$2.sub,add=vec3$2.add,create=vec3$2.create,normal=create(),tangent=create(),bitangent=create(),halfVector=create(),coord0=[],coord1=[];function getCubicPointsOnGlobe(n,r){vec2$2.copy(coord0,n[0]),vec2$2.copy(coord1,n[1]);var a=[],s=a[0]=create(),o=a[1]=create(),u=a[2]=create(),c=a[3]=create();r.dataToPoint(coord0,s),r.dataToPoint(coord1,c),normalize$1(normal,s),sub(tangent,c,s),normalize$1(tangent,tangent),cross(bitangent,tangent,normal),normalize$1(bitangent,bitangent),cross(tangent,normal,bitangent),add(o,normal,tangent),normalize$1(o,o),normalize$1(normal,c),sub(tangent,s,c),normalize$1(tangent,tangent),cross(bitangent,tangent,normal),normalize$1(bitangent,bitangent),cross(tangent,normal,bitangent),add(u,normal,tangent),normalize$1(u,u),add(halfVector,s,c),normalize$1(halfVector,halfVector);var p=vec3$2.dot(s,halfVector),d=vec3$2.dot(halfVector,o),_=(Math.max(vec3$2.len(s),vec3$2.len(c))-p)/d*2;return vec3$2.scaleAndAdd(o,s,o,_),vec3$2.scaleAndAdd(u,c,u,_),a}function getCubicPointsOnPlane(n,r,a){var s=[],o=s[0]=vec3$2.create(),u=s[1]=vec3$2.create(),c=s[2]=vec3$2.create(),p=s[3]=vec3$2.create();r.dataToPoint(n[0],o),r.dataToPoint(n[1],p);var d=vec3$2.dist(o,p);return vec3$2.lerp(u,o,p,.3),vec3$2.lerp(c,o,p,.3),vec3$2.scaleAndAdd(u,u,a,Math.min(d*.1,10)),vec3$2.scaleAndAdd(c,c,a,Math.min(d*.1,10)),s}function getPolylinePoints(n,r){for(var a=new Float32Array(n.length*3),s=0,o=[],u=0;u<n.length;u++)r.dataToPoint(n[u],o),a[s++]=o[0],a[s++]=o[1],a[s++]=o[2];return a}function prepareCoords(n){var r=[];return n.each(function(a){var s=n.getItemModel(a),o=s.option instanceof Array?s.option:s.getShallow("coords",!0);r.push(o)}),{coordsList:r}}function layoutGlobe(n,r){var a=n.getData(),s=n.get("polyline");a.setLayout("lineType",s?"polyline":"cubicBezier");var o=prepareCoords(a);a.each(function(u){var c=o.coordsList[u],p=s?getPolylinePoints:getCubicPointsOnGlobe;a.setItemLayout(u,p(c,r))})}function layoutOnPlane(n,r,a){var s=n.getData(),o=n.get("polyline"),u=prepareCoords(s);s.setLayout("lineType",o?"polyline":"cubicBezier"),s.each(function(c){var p=u.coordsList[c],d=o?getPolylinePoints(p,r):getCubicPointsOnPlane(p,r,a);s.setItemLayout(c,d)})}function lines3DLayout(n,r){n.eachSeriesByType("lines3D",function(a){var s=a.coordinateSystem;s.type==="globe"?layoutGlobe(a,s):s.type==="geo3D"?layoutOnPlane(a,s,[0,1,0]):(s.type==="mapbox3D"||s.type==="maptalks3D")&&layoutOnPlane(a,s,[0,0,1])})}const Lines3DSeries=SeriesModel.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(n,r){var a=new SeriesData(["value"],this);return a.hasItemOption=!1,a.initData(n.data,[],function(s,o,u,c){if(s instanceof Array)return NaN;a.hasItemOption=!0;var p=s.value;if(p!=null)return p instanceof Array?p[c]:p}),a},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}}),trail2GLSL=`@export ecgl.trail2.vertex
attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute float dist;
attribute float distAll;
attribute float start;

attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

uniform float speed : 0;
uniform float trailLength: 0.3;
uniform float time;
uniform float period: 1000;

uniform float spotSize: 1;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain

#ifdef CONSTANT_SPEED
 float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;
#else
 float t = mod((time + start) / period, 1. + trailLength) - trailLength;
#endif

 float trailLen = distAll * trailLength;

 v_Percent = (dist - t * distAll) / trailLen;

 v_SpotPercent = spotSize / distAll;

 }
@end


@export ecgl.trail2.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform float spotIntensity: 5;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
 if (v_Percent > 1.0 || v_Percent < 0.0) {
 discard;
 }

 float fade = v_Percent;

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain

 if (v_Percent > (1.0 - v_SpotPercent)) {
 gl_FragColor.rgb *= spotIntensity;
 }

 gl_FragColor.a *= fade;
}

@end`;var vec3$1=glmatrix.vec3;function sign(n){return n>0?1:-1}graphicGL.Shader.import(trail2GLSL);const TrailMesh2=graphicGL.Mesh.extend(function(){var n=new graphicGL.Material({shader:new graphicGL.Shader(graphicGL.Shader.source("ecgl.trail2.vertex"),graphicGL.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),r=new LinesGeometry$2({dynamic:!0});return r.createAttribute("dist","float",1),r.createAttribute("distAll","float",1),r.createAttribute("start","float",1),{geometry:r,material:n,culling:!1,$ignorePicking:!0}},{updateData:function(n,r,a){var s=n.hostModel,o=this.geometry,u=s.getModel("effect"),c=u.get("trailWidth")*r.getDevicePixelRatio(),p=u.get("trailLength"),d=s.get("effect.constantSpeed"),_=s.get("effect.period")*1e3,ja=d!=null;ja?this.material.set("speed",d/1e3):this.material.set("period",_),this.material[ja?"define":"undefine"]("vertex","CONSTANT_SPEED");var Ja=s.get("polyline");o.trailLength=p,this.material.set("trailLength",p),o.resetOffset(),["position","positionPrev","positionNext"].forEach(function(uh){o.attributes[uh].value=a.attributes[uh].value});var ec=["dist","distAll","start","offset","color"];ec.forEach(function(uh){o.attributes[uh].init(o.vertexCount)}),o.indices=a.indices;var tc=[],rc=u.get("trailColor"),nc=u.get("trailOpacity"),ic=rc!=null,uc=nc!=null;this.updateWorldTransform();var eh=this.worldTransform.x.len(),rh=this.worldTransform.y.len(),ah=this.worldTransform.z.len(),ih=0,oh=0;n.each(function(uh){var ch=n.getItemLayout(uh),hh=uc?nc:getItemVisualOpacity(n,uh),dh=getItemVisualColor(n,uh);hh==null&&(hh=1),tc=graphicGL.parseColor(ic?rc:dh,tc),tc[3]*=hh;for(var gh=Ja?a.getPolylineVertexCount(ch):a.getCubicCurveVertexCount(ch[0],ch[1],ch[2],ch[3]),fh=0,vh=[],ph=[],yh=ih;yh<ih+gh;yh++)o.attributes.position.get(yh,vh),vh[0]*=eh,vh[1]*=rh,vh[2]*=ah,yh>ih&&(fh+=vec3$1.dist(vh,ph)),o.attributes.dist.set(yh,fh),vec3$1.copy(ph,vh);oh=Math.max(oh,fh);for(var xh=Math.random()*(ja?fh:_),yh=ih;yh<ih+gh;yh++)o.attributes.distAll.set(yh,fh),o.attributes.start.set(yh,xh),o.attributes.offset.set(yh,sign(a.attributes.offset.get(yh))*c/2),o.attributes.color.set(yh,tc);ih+=gh}),this.material.set("spotSize",oh*.1*p),this.material.set("spotIntensity",u.get("spotIntensity")),o.dirty()},setAnimationTime:function(n){this.material.set("time",n)}});graphicGL.Shader.import(lines3DGLSL);function getCoordSysSize(n){return n.radius!=null?n.radius:n.size!=null?Math.max(n.size[0],n.size[1],n.size[2]):100}const Lines3DView=ChartView.extend({type:"lines3D",__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node,this._meshLinesMaterial=new graphicGL.Material({shader:graphicGL.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new graphicGL.Mesh({geometry:new LinesGeometry$2,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new TrailMesh2},render:function(n,r,a){this.groupGL.add(this._linesMesh);var s=n.coordinateSystem,o=n.getData();if(s&&s.viewGL){var u=s.viewGL;u.add(this.groupGL),this._updateLines(n,r,a);var c=s.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[c]("fragment","SRGB_DECODE"),this._trailMesh.material[c]("fragment","SRGB_DECODE")}var p=this._trailMesh;if(p.stopAnimation(),n.get("effect.show")){this.groupGL.add(p),p.updateData(o,a,this._linesMesh.geometry),p.__time=p.__time||0;var d=3600*1e3;this._curveEffectsAnimator=p.animate("",{loop:!0}).when(d,{__time:d}).during(function(){p.setAnimationTime(p.__time)}).start()}else this.groupGL.remove(p),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend=n.get("blendMode")==="lighter"?graphicGL.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var n=this._curveEffectsAnimator;n&&(n.isPaused()?n.resume():n.pause())},_updateLines:function(n,r,a){var s=n.getData(),o=n.coordinateSystem,u=this._linesMesh.geometry,c=n.get("polyline");u.expandLine=!0;var p=getCoordSysSize(o);u.segmentScale=p/20;var d="lineStyle.width".split("."),_=a.getDevicePixelRatio();s.each(function(tc){var rc=s.getItemModel(tc),nc=rc.get(d);nc==null&&(nc=1),s.setItemVisual(tc,"lineWidth",nc)}),u.useNativeLine=!1;var ja=0,Ja=0;s.each(function(tc){var rc=s.getItemLayout(tc);c?(ja+=u.getPolylineVertexCount(rc),Ja+=u.getPolylineTriangleCount(rc)):(ja+=u.getCubicCurveVertexCount(rc[0],rc[1],rc[2],rc[3]),Ja+=u.getCubicCurveTriangleCount(rc[0],rc[1],rc[2],rc[3]))}),u.setVertexCount(ja),u.setTriangleCount(Ja),u.resetOffset();var ec=[];s.each(function(tc){var rc=s.getItemLayout(tc),nc=getItemVisualColor(s,tc),ic=getItemVisualOpacity(s,tc),uc=s.getItemVisual(tc,"lineWidth")*_;ic==null&&(ic=1),ec=graphicGL.parseColor(nc,ec),ec[3]*=ic,c?u.addPolyline(rc,ec,uc):u.addCubicCurve(rc[0],rc[1],rc[2],rc[3],ec,uc)}),u.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function install$7(n){n.registerChartView(Lines3DView),n.registerSeriesModel(Lines3DSeries),n.registerLayout(lines3DLayout),n.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),n.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),n.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})}use(install$7);function transformPolygon$1(n,r){for(var a=[],s=0;s<r.length;s++)a.push(n.dataToPoint(r[s]));return a}var Polygons3DSeries=SeriesModel.extend({type:"series.polygons3D",getRegionModel:function(n){return this.getData().getItemModel(n)},getRegionPolygonCoords:function(n){var r=this.coordinateSystem,a=this.getData().getItemModel(n),s=a.option instanceof Array?a.option:a.getShallow("coords");a.get("multiPolygon")||(s=[s]);for(var o=[],u=0;u<s.length;u++){for(var c=[],p=1;p<s[u].length;p++)c.push(transformPolygon$1(r,s[u][p]));o.push({exterior:transformPolygon$1(r,s[u][0]),interiors:c})}return o},getInitialData:function(n){var r=new SeriesData(["value"],this);return r.hasItemOption=!1,r.initData(n.data,[],function(a,s,o,u){if(a instanceof Array)return NaN;r.hasItemOption=!0;var c=a.value;if(c!=null)return c instanceof Array?c[u]:c}),r},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});merge(Polygons3DSeries.prototype,componentShadingMixin);const Polygons3DView=ChartView.extend({type:"polygons3D",__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(n,r,a){this.groupGL.removeAll();var s=n.coordinateSystem;s&&s.viewGL&&s.viewGL.add(this.groupGL);var o=this._geo3DBuilderList[0];o||(o=new Geo3DBuilder(a),o.extrudeY=s.type!=="mapbox3D"&&s.type!=="maptalks3D",this._geo3DBuilderList[0]=o),this._updateShaderDefines(s,o),o.update(n,r,a),this._geo3DBuilderList.length=1,this.groupGL.add(o.rootNode)},incrementalPrepareRender:function(n,r,a){this.groupGL.removeAll();var s=n.coordinateSystem;s&&s.viewGL&&s.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(n,r,a,s){var o=this._geo3DBuilderList[this._currentStep],u=r.coordinateSystem;o||(o=new Geo3DBuilder(s),o.extrudeY=u.type!=="mapbox3D"&&u.type!=="maptalks3D",this._geo3DBuilderList[this._currentStep]=o),o.update(r,a,s,n.start,n.end),this.groupGL.add(o.rootNode),this._updateShaderDefines(u,o),this._currentStep++},_updateShaderDefines:function(n,r){var a=n.viewGL.isLinearSpace()?"define":"undefine";r.rootNode.traverse(function(s){s.material&&(s.material[a]("fragment","SRGB_DECODE"),(n.type==="mapbox3D"||n.type==="maptalks3D")&&(s.material.define("fragment","NORMAL_UP_AXIS",2),s.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(n){n.dispose()})}});function install$6(n){n.registerChartView(Polygons3DView),n.registerSeriesModel(Polygons3DSeries)}use(install$6);var SurfaceSeries=SeriesModel.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(n){return formatTooltip(this,n)},getInitialData:function(n,r){var a=n.data;function s(_h){return!(isNaN(_h.min)||isNaN(_h.max)||isNaN(_h.step))}function o(_h){var bh=getPrecisionSafe;return Math.max(bh(_h.min),bh(_h.max),bh(_h.step))+1}if(!a)if(n.parametric){var ah=n.parametricEquation||{},ih=ah.u||{},oh=ah.v||{};["u","v"].forEach(function(bh){s(ah[bh])}),["x","y","z"].forEach(function(bh){ah[bh]});var uh=Math.floor((ih.max+ih.step-ih.min)/ih.step),ch=Math.floor((oh.max+oh.step-oh.min)/oh.step);a=new Float32Array(uh*ch*5);for(var hh=o(ih),dh=o(oh),ec=0,tc=0;tc<ch;tc++)for(var rc=0;rc<uh;rc++){var gh=rc*ih.step+ih.min,fh=tc*oh.step+oh.min,vh=round$3(Math.min(gh,ih.max),hh),ph=round$3(Math.min(fh,oh.max),dh),nc=ah.x(vh,ph),ic=ah.y(vh,ph),rh=ah.z(vh,ph);a[ec++]=nc,a[ec++]=ic,a[ec++]=rh,a[ec++]=vh,a[ec++]=ph}}else{var u=n.equation||{},c=u.x||{},p=u.y||{};if(["x","y"].forEach(function(_h){s(u[_h])}),typeof u.z!="function")return;var d=Math.floor((c.max+c.step-c.min)/c.step),_=Math.floor((p.max+p.step-p.min)/p.step);a=new Float32Array(d*_*3);for(var ja=o(c),Ja=o(p),ec=0,tc=0;tc<_;tc++)for(var rc=0;rc<d;rc++){var nc=rc*c.step+c.min,ic=tc*p.step+p.min,uc=round$3(Math.min(nc,c.max),ja),eh=round$3(Math.min(ic,p.max),Ja),rh=u.z(uc,eh);a[ec++]=uc,a[ec++]=eh,a[ec++]=rh}}var yh=["x","y","z"];n.parametric&&yh.push("u","v");var xh=createList(this,yh,a);return xh},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});merge(SurfaceSeries.prototype,componentShadingMixin);var vec3=glmatrix.vec3;function isPointsNaN(n){return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])}const SurfaceView=ChartView.extend({type:"surface",__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node},render:function(n,r,a){var s=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=s,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var o=n.coordinateSystem,u=n.get("shading"),c=n.getData(),p="ecgl."+u;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==p)&&(this._surfaceMesh.material=graphicGL.createMaterial(p,["VERTEX_COLOR","DOUBLE_SIDED"])),graphicGL.setMaterialFromModel(u,this._surfaceMesh.material,n,a),o&&o.viewGL){o.viewGL.add(this.groupGL);var d=o.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[d]("fragment","SRGB_DECODE")}var _=n.get("parametric"),ja=n.get("dataShape");ja||(ja=this._getDataShape(c,_));var Ja=n.getModel("wireframe"),ec=Ja.get("lineStyle.width"),tc=Ja.get("show")&&ec>0;this._updateSurfaceMesh(this._surfaceMesh,n,ja,tc);var rc=this._surfaceMesh.material;tc?(rc.define("WIREFRAME_QUAD"),rc.set("wireframeLineWidth",ec),rc.set("wireframeLineColor",graphicGL.parseColor(Ja.get("lineStyle.color")))):rc.undefine("WIREFRAME_QUAD"),this._initHandler(n,a),this._updateAnimation(n)},_updateAnimation:function(n){graphicGL.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,n)},_createSurfaceMesh:function(){var n=new graphicGL.Mesh({geometry:new graphicGL.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new graphicGL.Material({shader:new graphicGL.Shader(graphicGL.Shader.source("ecgl.sm.depth.vertex"),graphicGL.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return n.geometry.createAttribute("barycentric","float",4),n.geometry.createAttribute("prevPosition","float",3),n.geometry.createAttribute("prevNormal","float",3),Object.assign(n.geometry,trianglesSortMixin),n},_initHandler:function(n,r){var a=n.getData(),s=this._surfaceMesh,o=n.coordinateSystem;function u(p,d){for(var _=1/0,ja=-1,Ja=[],ec=0;ec<p.length;ec++){s.geometry.attributes.position.get(p[ec],Ja);var tc=vec3.dist(d.array,Ja);tc<_&&(_=tc,ja=p[ec])}return ja}s.seriesIndex=n.seriesIndex;var c=-1;s.off("mousemove"),s.off("mouseout"),s.on("mousemove",function(p){var d=u(p.triangle,p.point);if(d>=0){var _=[];s.geometry.attributes.position.get(d,_);for(var ja=o.pointToData(_),Ja=1/0,ec=-1,tc=[],rc=0;rc<a.count();rc++){tc[0]=a.get("x",rc),tc[1]=a.get("y",rc),tc[2]=a.get("z",rc);var nc=vec3.squaredDistance(tc,ja);nc<Ja&&(ec=rc,Ja=nc)}ec!==c&&r.dispatchAction({type:"grid3DShowAxisPointer",value:ja}),c=ec,s.dataIndex=ec}else s.dataIndex=-1},this),s.on("mouseout",function(p){c=-1,s.dataIndex=-1,r.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(n,r,a,s){var o=n.geometry,u=r.getData(),c=u.getLayout("points"),p=0;u.each(function(nd){u.hasValue(nd)||p++});var d=p||s,_=o.attributes.position,ja=o.attributes.normal,Ja=o.attributes.texcoord0,ec=o.attributes.barycentric,tc=o.attributes.color,rc=a[0],nc=a[1],ic=r.get("shading"),uc=ic!=="color";if(d){var eh=(rc-1)*(nc-1)*4;_.init(eh),s&&ec.init(eh)}else _.value=new Float32Array(c);tc.init(o.vertexCount),Ja.init(o.vertexCount);var rh=[0,3,1,1,3,2],ah=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],ih=o.indices=new(o.vertexCount>65535?Uint32Array:Uint16Array)((rc-1)*(nc-1)*6),oh=function(nd,Sh,Gh){Gh[1]=nd*nc+Sh,Gh[0]=nd*nc+Sh+1,Gh[3]=(nd+1)*nc+Sh+1,Gh[2]=(nd+1)*nc+Sh},uh=!1;if(d){var ch=[],hh=[],dh=0;uc?ja.init(o.vertexCount):ja.value=null;for(var gh=[[],[],[]],fh=[],vh=[],ph=vec3.create(),yh=function(nd,Sh,Gh){var zh=Sh*3;return Gh[0]=nd[zh],Gh[1]=nd[zh+1],Gh[2]=nd[zh+2],Gh},xh=new Float32Array(c.length),_h=new Float32Array(c.length/3*4),bh=0;bh<u.count();bh++)if(u.hasValue(bh)){var jh=graphicGL.parseColor(getItemVisualColor(u,bh)),Dh=getItemVisualOpacity(u,bh);Dh!=null&&(jh[3]*=Dh),jh[3]<.99&&(uh=!0);for(var Th=0;Th<4;Th++)_h[bh*4+Th]=jh[Th]}for(var Ch=[1e7,1e7,1e7],bh=0;bh<rc-1;bh++)for(var wh=0;wh<nc-1;wh++){var Nh=bh*(nc-1)+wh,Rh=Nh*4;oh(bh,wh,ch);for(var kh=!1,Th=0;Th<4;Th++)yh(c,ch[Th],hh),isPointsNaN(hh)&&(kh=!0);for(var Th=0;Th<4;Th++)kh?_.set(Rh+Th,Ch):(yh(c,ch[Th],hh),_.set(Rh+Th,hh)),s&&ec.set(Rh+Th,ah[Th]);for(var Th=0;Th<6;Th++)ih[dh++]=rh[Th]+Rh;if(uc&&!kh)for(var Th=0;Th<2;Th++){for(var Lh=Th*3,Fh=0;Fh<3;Fh++){var Wh=ch[rh[Lh]+Fh];yh(c,Wh,gh[Fh])}vec3.sub(fh,gh[0],gh[1]),vec3.sub(vh,gh[1],gh[2]),vec3.cross(ph,fh,vh);for(var Fh=0;Fh<3;Fh++){var Qh=ch[rh[Lh]+Fh]*3;xh[Qh]=xh[Qh]+ph[0],xh[Qh+1]=xh[Qh+1]+ph[1],xh[Qh+2]=xh[Qh+2]+ph[2]}}}if(uc)for(var bh=0;bh<xh.length/3;bh++)yh(xh,bh,ph),vec3.normalize(ph,ph),xh[bh*3]=ph[0],xh[bh*3+1]=ph[1],xh[bh*3+2]=ph[2];for(var jh=[],Hh=[],bh=0;bh<rc-1;bh++)for(var wh=0;wh<nc-1;wh++){var Nh=bh*(nc-1)+wh,Rh=Nh*4;oh(bh,wh,ch);for(var Th=0;Th<4;Th++){for(var Fh=0;Fh<4;Fh++)jh[Fh]=_h[ch[Th]*4+Fh];tc.set(Rh+Th,jh),uc&&(yh(xh,ch[Th],ph),ja.set(Rh+Th,ph));var Wh=ch[Th];Hh[0]=Wh%nc/(nc-1),Hh[1]=Math.floor(Wh/nc)/(rc-1),Ja.set(Rh+Th,Hh)}Nh++}}else{for(var Hh=[],bh=0;bh<u.count();bh++){Hh[0]=bh%nc/(nc-1),Hh[1]=Math.floor(bh/nc)/(rc-1);var jh=graphicGL.parseColor(getItemVisualColor(u,bh)),Dh=getItemVisualOpacity(u,bh);Dh!=null&&(jh[3]*=Dh),jh[3]<.99&&(uh=!0),tc.set(bh,jh),Ja.set(bh,Hh)}for(var ch=[],qh=0,bh=0;bh<rc-1;bh++)for(var wh=0;wh<nc-1;wh++){oh(bh,wh,ch);for(var Th=0;Th<6;Th++)ih[qh++]=ch[rh[Th]]}uc?o.generateVertexNormals():ja.value=null}n.material.get("normalMap")&&o.generateTangents(),o.updateBoundingBox(),o.dirty(),n.material.transparent=uh,n.material.depthMask=!uh},_getDataShape:function(n,r){for(var a=-1/0,s=0,o=0,u=!1,c=r?"u":"x",p=n.count(),d=0;d<p;d++){var _=n.get(c,d);_<a&&(o=0,s++),a=_,o++}if((!s||o===1)&&(u=!0),!u)return[s+1,o];for(var ja=Math.floor(Math.sqrt(p));ja>0;){if(Math.floor(p/ja)===p/ja)return[ja,p/ja];ja--}return ja=Math.floor(Math.sqrt(p)),[ja,ja]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function install$5(n){n.registerChartView(SurfaceView),n.registerSeriesModel(SurfaceSeries),n.registerLayout(function(r,a){r.eachSeriesByType("surface",function(s){var o=s.coordinateSystem;!o||o.type;var u=s.getData(),c=new Float32Array(3*u.count()),p=[NaN,NaN,NaN];if(o&&o.type==="cartesian3D"){var d=o.dimensions,_=d.map(function(ja){return s.coordDimToDataDim(ja)[0]});u.each(_,function(ja,Ja,ec,tc){var rc;u.hasValue(tc)?rc=o.dataToPoint([ja,Ja,ec]):rc=p,c[tc*3]=rc[0],c[tc*3+1]=rc[1],c[tc*3+2]=rc[2]})}u.setLayout("points",c)})})}use(install$5);function transformPolygon(n,r){for(var a=[],s=0;s<r.length;s++)a.push(n.dataToPoint(r[s]));return a}var Map3DSeries=SeriesModel.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(n){var r=this.get("coordinateSystem");r==null||r==="geo3D"||(this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null)},getInitialData:function(n){n.data=this.getFilledRegions(n.data,n.map);var r=createDimensions(n.data,{coordDimensions:["value"]}),a=new SeriesData(r,this);a.initData(n.data);var s={};return a.each(function(o){var u=a.getName(o),c=a.getItemModel(o);s[u]=c}),this._regionModelMap=s,a},formatTooltip:function(n){return formatTooltip(this,n)},getRegionModel:function(n){var r=this.getData().getName(n);return this._regionModelMap[r]||new Model(null,this)},getRegionPolygonCoords:function(n){var r=this.coordinateSystem,a=this.getData().getName(n);if(r.transform){var s=r.getRegion(a);return s?s.geometries:[]}else{this._geo||(this._geo=geo3DCreator.createGeo3D(this));for(var s=this._geo.getRegion(a),o=[],u=0;u<s.geometries.length;u++){var c=s.geometries[u],p=[],d=transformPolygon(r,c.exterior);if(p&&p.length)for(var _=0;_<c.interiors.length;_++)p.push(transformPolygon(r,p[_]));o.push({interiors:p,exterior:d})}return o}},getFormattedLabel:function(n,r){var a=formatUtil.getFormattedLabel(this,n,r);return a==null&&(a=this.getData().getName(n)),a},defaultOption:{coordinateSystem:"geo3D",data:null}});merge(Map3DSeries.prototype,geo3DModelMixin);merge(Map3DSeries.prototype,componentViewControlMixin);merge(Map3DSeries.prototype,componentPostEffectMixin);merge(Map3DSeries.prototype,componentLightMixin);merge(Map3DSeries.prototype,componentShadingMixin);const Map3DView=ChartView.extend({type:"map3D",__ecgl__:!0,init:function(n,r){this._geo3DBuilder=new Geo3DBuilder(r),this.groupGL=new graphicGL.Node},render:function(n,r,a){var s=n.coordinateSystem;if(!(!s||!s.viewGL)){if(this.groupGL.add(this._geo3DBuilder.rootNode),s.viewGL.add(this.groupGL),s.type==="geo3D"){this._sceneHelper||(this._sceneHelper=new SceneHelper,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(s.viewGL.scene),this._sceneHelper.updateLight(n),s.viewGL.setPostEffect(n.getModel("postEffect"),a),s.viewGL.setTemporalSuperSampling(n.getModel("temporalSuperSampling"));var o=this._control;o||(o=this._control=new OrbitControl({zr:a.getZr()}),this._control.init());var u=n.getModel("viewControl");o.setViewGL(s.viewGL),o.setFromViewControlModel(u,0),o.off("update"),o.on("update",function(){a.dispatchAction({type:"map3DChangeCamera",alpha:o.getAlpha(),beta:o.getBeta(),distance:o.getDistance(),from:this.uid,map3DId:n.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),n.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(n,r,a,0,n.getData().count());var c=s.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(p){p.material&&p.material[c]("fragment","SRGB_DECODE")})}},afterRender:function(n,r,a,s){var o=s.renderer,u=n.coordinateSystem;u&&u.type==="geo3D"&&(this._sceneHelper.updateAmbientCubemap(o,n,a),this._sceneHelper.updateSkybox(o,n,a))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});function install$4(n){install$e(n),n.registerChartView(Map3DView),n.registerSeriesModel(Map3DSeries),n.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(r,a){a.eachComponent({mainType:"series",subType:"map3D",query:r},function(s){s.setView(r)})})}use(install$4);const ScatterGLSeries=SeriesModel.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return createList$3(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});function GLViewHelper(n){this.viewGL=n}GLViewHelper.prototype.reset=function(n,r){this._updateCamera(r.getWidth(),r.getHeight(),r.getDevicePixelRatio()),this._viewTransform=create$2(),this.updateTransform(n,r)};GLViewHelper.prototype.updateTransform=function(n,r){var a=n.coordinateSystem;a.getRoamTransform&&(invert(this._viewTransform,a.getRoamTransform()),this._setCameraTransform(this._viewTransform),r.getZr().refresh())};GLViewHelper.prototype.dataToPoint=function(n,r,a){a=n.dataToPoint(r,null,a);var s=this._viewTransform;s&&applyTransform$1(a,a,s)};GLViewHelper.prototype.removeTransformInPoint=function(n){return this._viewTransform&&applyTransform$1(n,n,this._viewTransform),n};GLViewHelper.prototype.getZoom=function(){if(this._viewTransform){var n=this._viewTransform;return 1/Math.max(Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.sqrt(n[2]*n[2]+n[3]*n[3]))}return 1};GLViewHelper.prototype._setCameraTransform=function(n){var r=this.viewGL.camera;r.position.set(n[4],n[5],0),r.scale.set(Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.sqrt(n[2]*n[2]+n[3]*n[3]),1)};GLViewHelper.prototype._updateCamera=function(n,r,a){this.viewGL.setViewport(0,0,n,r,a);var s=this.viewGL.camera;s.left=s.top=0,s.bottom=r,s.right=n,s.near=0,s.far=100};const ScatterGLView=ChartView.extend({type:"scatterGL",__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node,this.viewGL=new ViewGL("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new GLViewHelper(this.viewGL)},render:function(n,r,a){if(this.groupGL.removeAll(),this._glViewHelper.reset(n,a),!!n.getData().count()){var s=this._pointsBuilderList[0];s||(s=this._pointsBuilderList[0]=new PointsBuilder(!0,a)),this._pointsBuilderList.length=1,this.groupGL.add(s.rootNode),this._removeTransformInPoints(n.getData().getLayout("points")),s.update(n,r,a),this.viewGL.setPostEffect(n.getModel("postEffect"),a)}},incrementalPrepareRender:function(n,r,a){this.groupGL.removeAll(),this._glViewHelper.reset(n,a),this._currentStep=0,this.viewGL.setPostEffect(n.getModel("postEffect"),a)},incrementalRender:function(n,r,a,s){if(!(n.end<=n.start)){var o=this._pointsBuilderList[this._currentStep];o||(o=new PointsBuilder(!0,s),this._pointsBuilderList[this._currentStep]=o),this.groupGL.add(o.rootNode),this._removeTransformInPoints(r.getData().getLayout("points")),o.setSizeScale(this._sizeScale),o.update(r,a,s,n.start,n.end),s.getZr().refresh(),this._currentStep++}},updateTransform:function(n,r,a){if(n.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(n,a);var s=this._glViewHelper.getZoom(),o=Math.max((n.get("zoomScale")||0)*(s-1)+1,0);this._sizeScale=o,this._pointsBuilderList.forEach(function(u){u.setSizeScale(o)})}},_removeTransformInPoints:function(n){if(n)for(var r=[],a=0;a<n.length;a+=2)r[0]=n[a],r[1]=n[a+1],this._glViewHelper.removeTransformInPoint(r),n[a]=r[0],n[a+1]=r[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(n){n.dispose()})},remove:function(){this.groupGL.removeAll()}});function install$3(n){n.registerChartView(ScatterGLView),n.registerSeriesModel(ScatterGLSeries),n.registerLayout({seriesType:"scatterGL",reset:function(r){var a=r.coordinateSystem,s=r.getData(),o;if(a){var u=a.dimensions.map(function(p){return s.mapDimension(p)}).slice(0,2),c=[];u.length===1?o=function(p){for(var d=new Float32Array((p.end-p.start)*2),_=p.start;_<p.end;_++){var ja=(_-p.start)*2,Ja=s.get(u[0],_),ec=a.dataToPoint(Ja);d[ja]=ec[0],d[ja+1]=ec[1]}s.setLayout("points",d)}:u.length===2&&(o=function(p){for(var d=new Float32Array((p.end-p.start)*2),_=p.start;_<p.end;_++){var ja=(_-p.start)*2,Ja=s.get(u[0],_),ec=s.get(u[1],_);c[0]=Ja,c[1]=ec,c=a.dataToPoint(c),d[ja]=c[0],d[ja+1]=c[1]}s.setLayout("points",d)})}return{progress:o}}})}use(install$3);function createGraphFromNodeEdge(n,r,a,s,o){for(var u=new Graph$1(s),c=0;c<n.length;c++)u.addNode(retrieve.firstNotNull(n[c].id,n[c].name,c),c);for(var p=[],d=[],_=0,c=0;c<r.length;c++){var ja=r[c],Ja=ja.source,ec=ja.target;u.addEdge(Ja,ec,_)&&(d.push(ja),p.push(retrieve.firstNotNull(ja.id,Ja+" > "+ec)),_++)}var tc,rc=createDimensions(n,{coordDimensions:["value"]});tc=new SeriesData(rc,a),tc.initData(n);var nc=new SeriesData(["value"],a);return nc.initData(d,p),o&&o(tc,nc),linkSeriesData({mainData:tc,struct:u,structAttr:"graph",datas:{node:tc,edge:nc},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}var GraphSeries=SeriesModel.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(n){GraphSeries.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(n){GraphSeries.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(n,r,a,s){var o=formatUtil.getFormattedLabel(this,n,r,a,s);if(o==null){var u=this.getData(),c=u.dimensions[u.dimensions.length-1];o=u.get(c,n)}return o},getInitialData:function(n,r){var a=n.edges||n.links||[],s=n.data||n.nodes||[],o=this;if(s&&a)return createGraphFromNodeEdge(s,a,this,!0,u).data;function u(c,p){c.wrapMethod("getItemModel",function(Ja){const ec=o._categoriesModels,tc=Ja.getShallow("category"),rc=ec[tc];return rc&&(rc.parentModel=Ja.parentModel,Ja.parentModel=rc),Ja});const d=r.getModel([]).getModel;function _(Ja,ec){const tc=d.call(this,Ja,ec);return tc.resolveParentPath=ja,tc}p.wrapMethod("getItemModel",function(Ja){return Ja.resolveParentPath=ja,Ja.getModel=_,Ja});function ja(Ja){if(Ja&&(Ja[0]==="label"||Ja[1]==="label")){const ec=Ja.slice();return Ja[0]==="label"?ec[0]="edgeLabel":Ja[1]==="label"&&(ec[1]="edgeLabel"),ec}return Ja}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(n,r,a){if(a==="edge"){var s=this.getData(),o=this.getDataParams(n,a),u=s.graph.getEdgeByIndex(n),c=s.getName(u.node1.dataIndex),p=s.getName(u.node2.dataIndex),d=[];return c!=null&&d.push(c),p!=null&&d.push(p),d=encodeHTML(d.join(" > ")),o.value&&(d+=" : "+encodeHTML(o.value)),d}else return GraphSeries.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var n=(this.option.categories||[]).map(function(a){return a.value!=null?a:Object.assign({value:0},a)}),r=new SeriesData(["value"],this);r.initData(n),this._categoriesData=r,this._categoriesModels=r.mapArray(function(a){return r.getItemModel(a,!0)})},setView:function(n){n.zoom!=null&&(this.option.zoom=n.zoom),n.offset!=null&&(this.option.offset=n.offset)},setNodePosition:function(n){for(var r=0;r<n.length/2;r++){var a=n[r*2],s=n[r*2+1],o=this.getData().getRawDataItem(r);o.x=a,o.y=s}},isAnimationEnabled:function(){return GraphSeries.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}}),vec2$1=glmatrix.vec2,sampleLinePoints=[[0,0],[1,1]],LinesGeometry$1=Geometry.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new Geometry.Attribute("position","float",2,"POSITION"),normal:new Geometry.Attribute("normal","float",2),offset:new Geometry.Attribute("offset","float",1),color:new Geometry.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(n){var r=this.attributes;this.vertexCount!==n&&(r.position.init(n),r.color.init(n),this.useNativeLine||(r.offset.init(n),r.normal.init(n)),n>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(n){this.triangleCount!==n&&(n===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(n*3):new Uint16Array(n*3))},_getCubicCurveApproxStep:function(n,r,a,s){var o=vec2$1.dist(n,r)+vec2$1.dist(a,r)+vec2$1.dist(s,a),u=1/(o+1)*this.segmentScale;return u},getCubicCurveVertexCount:function(n,r,a,s){var o=this._getCubicCurveApproxStep(n,r,a,s),u=Math.ceil(1/o);return this.useNativeLine?u*2:u*2+2},getCubicCurveTriangleCount:function(n,r,a,s){var o=this._getCubicCurveApproxStep(n,r,a,s),u=Math.ceil(1/o);return this.useNativeLine?0:u*2},getLineVertexCount:function(){return this.getPolylineVertexCount(sampleLinePoints)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(sampleLinePoints)},getPolylineVertexCount:function(n){var r;if(typeof n=="number")r=n;else{var a=typeof n[0]!="number";r=a?n.length:n.length/2}return this.useNativeLine?(r-1)*2:(r-1)*2+2},getPolylineTriangleCount:function(n){var r;if(typeof n=="number")r=n;else{var a=typeof n[0]!="number";r=a?n.length:n.length/2}return this.useNativeLine?0:(r-1)*2},addCubicCurve:function(n,r,a,s,o,u){u==null&&(u=1);for(var c=n[0],p=n[1],d=r[0],_=r[1],ja=a[0],Ja=a[1],ec=s[0],tc=s[1],rc=this._getCubicCurveApproxStep(n,r,a,s),nc=rc*rc,ic=nc*rc,uc=3*rc,eh=3*nc,rh=6*nc,ah=6*ic,ih=c-d*2+ja,oh=p-_*2+Ja,uh=(d-ja)*3-c+ec,ch=(_-Ja)*3-p+tc,hh=c,dh=p,gh=(d-c)*uc+ih*eh+uh*ic,fh=(_-p)*uc+oh*eh+ch*ic,vh=ih*rh+uh*ah,ph=oh*rh+ch*ah,yh=uh*ah,xh=ch*ah,_h=0,bh=0,Dh=Math.ceil(1/rc),Th=new Float32Array((Dh+1)*3),Th=[],Ch=0,bh=0;bh<Dh+1;bh++)Th[Ch++]=hh,Th[Ch++]=dh,hh+=gh,dh+=fh,gh+=vh,fh+=ph,vh+=yh,ph+=xh,_h+=rc,_h>1&&(hh=gh>0?Math.min(hh,ec):Math.max(hh,ec),dh=fh>0?Math.min(dh,tc):Math.max(dh,tc));this.addPolyline(Th,o,u)},addLine:function(n,r,a,s){this.addPolyline([n,r],a,s)},addPolyline:function(){var n=vec2$1.create(),r=vec2$1.create(),a=vec2$1.create(),s=vec2$1.create(),o=[],u=[],c=[];return function(p,d,_,ja,Ja){if(p.length){var ec=typeof p[0]!="number";if(Ja==null&&(Ja=ec?p.length:p.length/2),!(Ja<2)){ja==null&&(ja=0),_==null&&(_=1),this._itemVertexOffsets.push(this._vertexOffset);for(var tc=ec?typeof d[0]!="number":d.length/4===Ja,rc=this.attributes.position,nc=this.attributes.color,ic=this.attributes.offset,uc=this.attributes.normal,eh=this.indices,rh=this._vertexOffset,ah,ih=0;ih<Ja;ih++){if(ec)o=p[ih+ja],tc?ah=d[ih+ja]:ah=d;else{var oh=ih*2+ja;if(o=o||[],o[0]=p[oh],o[1]=p[oh+1],tc){var uh=ih*4+ja;ah=ah||[],ah[0]=d[uh],ah[1]=d[uh+1],ah[2]=d[uh+2],ah[3]=d[uh+3]}else ah=d}if(this.useNativeLine)ih>1&&(rc.copy(rh,rh-1),nc.copy(rh,rh-1),rh++);else{var ch;if(ih<Ja-1){if(ec)vec2$1.copy(u,p[ih+1]);else{var oh=(ih+1)*2+ja;u=u||[],u[0]=p[oh],u[1]=p[oh+1]}if(ih>0){vec2$1.sub(n,o,c),vec2$1.sub(r,u,o),vec2$1.normalize(n,n),vec2$1.normalize(r,r),vec2$1.add(s,n,r),vec2$1.normalize(s,s);var hh=_/2*Math.min(1/vec2$1.dot(n,s),2);a[0]=-s[1],a[1]=s[0],ch=hh}else vec2$1.sub(n,u,o),vec2$1.normalize(n,n),a[0]=-n[1],a[1]=n[0],ch=_/2}else vec2$1.sub(n,o,c),vec2$1.normalize(n,n),a[0]=-n[1],a[1]=n[0],ch=_/2;uc.set(rh,a),uc.set(rh+1,a),ic.set(rh,ch),ic.set(rh+1,-ch),vec2$1.copy(c,o),rc.set(rh,o),rc.set(rh+1,o),nc.set(rh,ah),nc.set(rh+1,ah),rh+=2}if(this.useNativeLine)nc.set(rh,ah),rc.set(rh,o),rh++;else if(ih>0){var dh=this._faceOffset*3,eh=this.indices;eh[dh]=rh-4,eh[dh+1]=rh-3,eh[dh+2]=rh-2,eh[dh+3]=rh-3,eh[dh+4]=rh-1,eh[dh+5]=rh-2,this._faceOffset+=2}}this._vertexOffset=rh}}}}(),setItemColor:function(n,r){for(var a=this._itemVertexOffsets[n],s=n<this._itemVertexOffsets.length-1?this._itemVertexOffsets[n+1]:this._vertexOffset,o=a;o<s;o++)this.attributes.color.set(o,r);this.dirty("color")}});defaults(LinesGeometry$1.prototype,dynamicConvertMixin);const forceAtlas2Code=`@export ecgl.forceAtlas2.updateNodeRepulsion

#define NODE_COUNT 0

uniform sampler2D positionTex;

uniform vec2 textureSize;
uniform float gravity;
uniform float scaling;
uniform vec2 gravityCenter;

uniform bool strongGravityMode;
uniform bool preventOverlap;

varying vec2 v_Texcoord;

void main() {

 vec4 n0 = texture2D(positionTex, v_Texcoord);

 vec2 force = vec2(0.0);
 for (int i = 0; i < NODE_COUNT; i++) {
 vec2 uv = vec2(
 mod(float(i), textureSize.x) / (textureSize.x - 1.0),
 floor(float(i) / textureSize.x) / (textureSize.y - 1.0)
 );
 vec4 n1 = texture2D(positionTex, uv);

 vec2 dir = n0.xy - n1.xy;
 float d2 = dot(dir, dir);

 if (d2 > 0.0) {
 float factor = 0.0;
 if (preventOverlap) {
 float d = sqrt(d2);
 d = d - n0.w - n1.w;
 if (d > 0.0) {
 factor = scaling * n0.z * n1.z / (d * d);
 }
 else if (d < 0.0) {
 factor = scaling * 100.0 * n0.z * n1.z;
 }
 }
 else {
 factor = scaling * n0.z * n1.z / d2;
 }
 force += dir * factor;
 }
 }

 vec2 dir = gravityCenter - n0.xy;
 float d = 1.0;
 if (!strongGravityMode) {
 d = length(dir);
 }

 force += dir * n0.z * gravity / (d + 1.0);

 gl_FragColor = vec4(force, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.vertex

attribute vec2 node1;
attribute vec2 node2;
attribute float weight;

uniform sampler2D positionTex;
uniform float edgeWeightInfluence;
uniform bool preventOverlap;
uniform bool linLogMode;

uniform vec2 windowSize: WINDOW_SIZE;

varying vec2 v_Force;

void main() {

 vec4 n0 = texture2D(positionTex, node1);
 vec4 n1 = texture2D(positionTex, node2);

 vec2 dir = n1.xy - n0.xy;
 float d = length(dir);
 float w;
 if (edgeWeightInfluence == 0.0) {
 w = 1.0;
 }
 else if (edgeWeightInfluence == 1.0) {
 w = weight;
 }
 else {
 w = pow(weight, edgeWeightInfluence);
 }
 vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);
 vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);
 vec2 pos = node1 * scale * 2.0 - 1.0;
 gl_Position = vec4(pos + offset, 0.0, 1.0);
 gl_PointSize = 1.0;

 float factor;
 if (preventOverlap) {
 d = d - n1.w - n0.w;
 }
 if (d <= 0.0) {
 v_Force = vec2(0.0);
 return;
 }

 if (linLogMode) {
 factor = w * log(d) / d;
 }
 else {
 factor = w;
 }
 v_Force = dir * factor;
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.fragment

varying vec2 v_Force;

void main() {
 gl_FragColor = vec4(v_Force, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.vertex

attribute vec2 node;

varying vec2 v_NodeUv;

void main() {

 v_NodeUv = node;
 gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
 gl_PointSize = 1.0;
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.fragment

varying vec2 v_NodeUv;

uniform sampler2D positionTex;
uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;

void main() {
 vec2 force = texture2D(forceTex, v_NodeUv).rg;
 vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;

 float mass = texture2D(positionTex, v_NodeUv).z;
 float swing = length(force - forcePrev) * mass;
 float traction = length(force + forcePrev) * 0.5 * mass;

 gl_FragColor = vec4(swing, traction, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcGlobalSpeed

uniform sampler2D globalSpeedPrevTex;
uniform sampler2D weightedSumTex;
uniform float jitterTolerence;

void main() {
 vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;
 float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;
 float globalSpeed = jitterTolerence * jitterTolerence
 * weightedSum.y / weightedSum.x;
 if (prevGlobalSpeed > 0.0) {
 globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;
 }
 gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updatePosition

uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;
uniform sampler2D positionTex;
uniform sampler2D globalSpeedTex;

varying vec2 v_Texcoord;

void main() {
 vec2 force = texture2D(forceTex, v_Texcoord).xy;
 vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;
 vec4 node = texture2D(positionTex, v_Texcoord);

 float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;
 float swing = length(force - forcePrev);
 float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));

 float df = length(force);
 if (df > 0.0) {
 speed = min(df * speed, 10.0) / df;

 gl_FragColor = vec4(node.xy + speed * force, node.zw);
 }
 else {
 gl_FragColor = node;
 }
}
@end

@export ecgl.forceAtlas2.edges.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 node;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

uniform sampler2D positionTex;

void main()
{
 gl_Position = worldViewProjection * vec4(
 texture2D(positionTex, node).xy, -10.0, 1.0
 );
 v_Color = a_Color;
}
@end

@export ecgl.forceAtlas2.edges.fragment
uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
varying vec4 v_Color;
void main() {
 gl_FragColor = color * v_Color;
}
@end`;graphicGL.Shader.import(forceAtlas2Code);var defaultConfigs$1={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function ForceAtlas2GPU(n){var r={type:graphicGL.Texture.FLOAT,minFilter:graphicGL.Texture.NEAREST,magFilter:graphicGL.Texture.NEAREST};this._positionSourceTex=new graphicGL.Texture2D(r),this._positionSourceTex.flipY=!1,this._positionTex=new graphicGL.Texture2D(r),this._positionPrevTex=new graphicGL.Texture2D(r),this._forceTex=new graphicGL.Texture2D(r),this._forcePrevTex=new graphicGL.Texture2D(r),this._weightedSumTex=new graphicGL.Texture2D(r),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new graphicGL.Texture2D(r),this._globalSpeedPrevTex=new graphicGL.Texture2D(r),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new Pass({fragment:graphicGL.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new Pass({fragment:graphicGL.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new Pass({fragment:graphicGL.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new Pass({fragment:graphicGL.Shader.source("clay.compositor.output")});var a=function(s){s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ONE)};this._edgeForceMesh=new graphicGL.Mesh({geometry:new graphicGL.Geometry({attributes:{node1:new graphicGL.Geometry.Attribute("node1","float",2),node2:new graphicGL.Geometry.Attribute("node2","float",2),weight:new graphicGL.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new graphicGL.Material({transparent:!0,shader:graphicGL.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:a,depthMask:!1,depthText:!1}),mode:graphicGL.Mesh.POINTS}),this._weightedSumMesh=new graphicGL.Mesh({geometry:new graphicGL.Geometry({attributes:{node:new graphicGL.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new graphicGL.Material({transparent:!0,shader:graphicGL.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:a,depthMask:!1,depthText:!1}),mode:graphicGL.Mesh.POINTS}),this._framebuffer=new FrameBuffer({depthBuffer:!1}),this._dummyCamera=new graphicGL.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}ForceAtlas2GPU.prototype.updateOption=function(n){for(var r in defaultConfigs$1)this[r]=defaultConfigs$1[r];var a=this._nodes.length;if(a>5e4?this.jitterTolerence=10:a>5e3?this.jitterTolerence=1:this.jitterTolerence=.1,a>100?this.scaling=2:this.scaling=10,n)for(var r in defaultConfigs$1)n[r]!=null&&(this[r]=n[r]);if(this.repulsionByDegree)for(var s=this._positionSourceTex.pixels,o=0;o<this._nodes.length;o++)s[o*4+2]=(this._nodes[o].degree||0)+1};ForceAtlas2GPU.prototype._updateGravityCenter=function(n){var r=this._nodes,a=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var s=[1/0,1/0],o=[-1/0,-1/0],u=0;u<r.length;u++)s[0]=Math.min(r[u].x,s[0]),s[1]=Math.min(r[u].y,s[1]),o[0]=Math.max(r[u].x,o[0]),o[1]=Math.max(r[u].y,o[1]);this._gravityCenter=[(s[0]+o[0])*.5,(s[1]+o[1])*.5]}for(var u=0;u<a.length;u++){var c=a[u].node1,p=a[u].node2;r[c].degree=(r[c].degree||0)+1,r[p].degree=(r[p].degree||0)+1}};ForceAtlas2GPU.prototype.initData=function(n,r){this._nodes=n,this._edges=r,this._updateGravityCenter();var a=Math.ceil(Math.sqrt(n.length)),s=a,o=new Float32Array(a*s*4);this._resize(a,s);for(var u=0,c=0;c<n.length;c++){var p=n[c];o[u++]=p.x||0,o[u++]=p.y||0,o[u++]=p.mass||1,o[u++]=p.size||1}this._positionSourceTex.pixels=o;var d=this._edgeForceMesh.geometry,_=r.length;d.attributes.node1.init(_*2),d.attributes.node2.init(_*2),d.attributes.weight.init(_*2);for(var ja=[],c=0;c<r.length;c++){var Ja=d.attributes,ec=r[c].weight;ec==null&&(ec=1),Ja.node1.set(c,this.getNodeUV(r[c].node1,ja)),Ja.node2.set(c,this.getNodeUV(r[c].node2,ja)),Ja.weight.set(c,ec),Ja.node1.set(c+_,this.getNodeUV(r[c].node2,ja)),Ja.node2.set(c+_,this.getNodeUV(r[c].node1,ja)),Ja.weight.set(c+_,ec)}var tc=this._weightedSumMesh.geometry;tc.attributes.node.init(n.length);for(var c=0;c<n.length;c++)tc.attributes.node.set(c,this.getNodeUV(c,ja));d.dirty(),tc.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",n.length),this._nodeRepulsionPass.material.setUniform("textureSize",[a,s]),this._inited=!1,this._frame=0};ForceAtlas2GPU.prototype.getNodes=function(){return this._nodes};ForceAtlas2GPU.prototype.getEdges=function(){return this._edges};ForceAtlas2GPU.prototype.step=function(n){this._inited||(this._initFromSource(n),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(n);var r=this._nodeRepulsionPass;r.setUniform("strongGravityMode",this.strongGravityMode),r.setUniform("gravity",this.gravity),r.setUniform("gravityCenter",this._gravityCenter),r.setUniform("scaling",this.scaling),r.setUniform("preventOverlap",this.preventOverlap),r.setUniform("positionTex",this._positionPrevTex),r.render(n);var a=this._edgeForceMesh;a.material.set("linLogMode",this.linLogMode),a.material.set("edgeWeightInfluence",this.edgeWeightInfluence),a.material.set("preventOverlap",this.preventOverlap),a.material.set("positionTex",this._positionPrevTex),n.gl.enable(n.gl.BLEND),n.renderPass([a],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),n.gl.clearColor(0,0,0,0),n.gl.clear(n.gl.COLOR_BUFFER_BIT),n.gl.enable(n.gl.BLEND);var s=this._weightedSumMesh;s.material.set("positionTex",this._positionPrevTex),s.material.set("forceTex",this._forceTex),s.material.set("forcePrevTex",this._forcePrevTex),n.renderPass([s],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var o=this._globalSpeedPass;o.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),o.setUniform("weightedSumTex",this._weightedSumTex),o.setUniform("jitterTolerence",this.jitterTolerence),n.gl.disable(n.gl.BLEND),o.render(n);var u=this._positionPass;this._framebuffer.attach(this._positionTex),u.setUniform("globalSpeedTex",this._globalSpeedTex),u.setUniform("positionTex",this._positionPrevTex),u.setUniform("forceTex",this._forceTex),u.setUniform("forcePrevTex",this._forcePrevTex),u.render(n),this._framebuffer.unbind(n),this._swapTexture()};ForceAtlas2GPU.prototype.update=function(n,r,a){r==null&&(r=1),r=Math.max(r,1);for(var s=0;s<r;s++)this.step(n);a&&a()};ForceAtlas2GPU.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex};ForceAtlas2GPU.prototype.getNodeUV=function(n,r){r=r||[];var a=this._positionTex.width,s=this._positionTex.height;return r[0]=n%a/(a-1),r[1]=Math.floor(n/a)/(s-1)||0,r};ForceAtlas2GPU.prototype.getNodePosition=function(n,r){var a=this._positionArr,s=this._positionTex.width,o=this._positionTex.height,u=s*o;(!a||a.length!==u*4)&&(a=this._positionArr=new Float32Array(u*4)),this._framebuffer.bind(n),this._framebuffer.attach(this._positionPrevTex),n.gl.readPixels(0,0,s,o,n.gl.RGBA,n.gl.FLOAT,a),this._framebuffer.unbind(n),r||(r=new Float32Array(this._nodes.length*2));for(var c=0;c<this._nodes.length;c++)r[c*2]=a[c*4],r[c*2+1]=a[c*4+1];return r};ForceAtlas2GPU.prototype.getTextureData=function(n,r){var a=this["_"+r+"Tex"],s=a.width,o=a.height;this._framebuffer.bind(n),this._framebuffer.attach(a);var u=new Float32Array(s*o*4);return n.gl.readPixels(0,0,s,o,n.gl.RGBA,n.gl.FLOAT,u),this._framebuffer.unbind(n),u};ForceAtlas2GPU.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}};ForceAtlas2GPU.prototype.isFinished=function(n){return this._frame>n};ForceAtlas2GPU.prototype._swapTexture=function(){var n=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=n;var n=this._forcePrevTex;this._forcePrevTex=this._forceTex,this._forceTex=n;var n=this._globalSpeedPrevTex;this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=n};ForceAtlas2GPU.prototype._initFromSource=function(n){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(n),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(n),n.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),n.gl.clear(n.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),n.gl.clear(n.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(n)};ForceAtlas2GPU.prototype._resize=function(n,r){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(a){this[a].width=n,this[a].height=r,this[a].dirty()},this)};ForceAtlas2GPU.prototype.dispose=function(n){this._framebuffer.dispose(n),this._copyPass.dispose(n),this._nodeRepulsionPass.dispose(n),this._positionPass.dispose(n),this._globalSpeedPass.dispose(n),this._edgeForceMesh.geometry.dispose(n),this._weightedSumMesh.geometry.dispose(n),this._positionSourceTex.dispose(n),this._positionTex.dispose(n),this._positionPrevTex.dispose(n),this._forceTex.dispose(n),this._forcePrevTex.dispose(n),this._weightedSumTex.dispose(n),this._globalSpeedTex.dispose(n),this._globalSpeedPrevTex.dispose(n)};function forceAtlas2Worker(){var n={create:function(){return new Float32Array(2)},dist:function(d,_){var ja=_[0]-d[0],Ja=_[1]-d[1];return Math.sqrt(ja*ja+Ja*Ja)},len:function(d){var _=d[0],ja=d[1];return Math.sqrt(_*_+ja*ja)},scaleAndAdd:function(d,_,ja,Ja){return d[0]=_[0]+ja[0]*Ja,d[1]=_[1]+ja[1]*Ja,d},scale:function(d,_,ja){return d[0]=_[0]*ja,d[1]=_[1]*ja,d},add:function(d,_,ja){return d[0]=_[0]+ja[0],d[1]=_[1]+ja[1],d},sub:function(d,_,ja){return d[0]=_[0]-ja[0],d[1]=_[1]-ja[1],d},normalize:function(d,_){var ja=_[0],Ja=_[1],ec=ja*ja+Ja*Ja;return ec>0&&(ec=1/Math.sqrt(ec),d[0]=_[0]*ec,d[1]=_[1]*ec),d},negate:function(d,_){return d[0]=-_[0],d[1]=-_[1],d},copy:function(d,_){return d[0]=_[0],d[1]=_[1],d},set:function(d,_,ja){return d[0]=_,d[1]=ja,d}};function r(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var a=r.prototype;a.beforeUpdate=function(){for(var d=0;d<this.nSubRegions;d++)this.subRegions[d].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},a.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var d=0;d<this.nSubRegions;d++)this.subRegions[d].afterUpdate()},a.addNode=function(d){if(this.nSubRegions===0)if(this.node==null){this.node=d;return}else this._addNodeToSubRegion(this.node),this.node=null;this._addNodeToSubRegion(d),this._updateCenterOfMass(d)},a.findSubRegion=function(d,_){for(var ja=0;ja<this.nSubRegions;ja++){var Ja=this.subRegions[ja];if(Ja.contain(d,_))return Ja}},a.contain=function(d,_){return this.bbox[0]<=d&&this.bbox[2]>=d&&this.bbox[1]<=_&&this.bbox[3]>=_},a.setBBox=function(d,_,ja,Ja){this.bbox[0]=d,this.bbox[1]=_,this.bbox[2]=ja,this.bbox[3]=Ja,this.size=(ja-d+Ja-_)/2},a._newSubRegion=function(){var d=this.subRegions[this.nSubRegions];return d||(d=new r,this.subRegions[this.nSubRegions]=d),this.nSubRegions++,d},a._addNodeToSubRegion=function(d){var _=this.findSubRegion(d.position[0],d.position[1]),ja=this.bbox;if(!_){var Ja=(ja[0]+ja[2])/2,ec=(ja[1]+ja[3])/2,tc=(ja[2]-ja[0])/2,rc=(ja[3]-ja[1])/2,nc=d.position[0]>=Ja?1:0,ic=d.position[1]>=ec?1:0,_=this._newSubRegion();_.setBBox(nc*tc+ja[0],ic*rc+ja[1],(nc+1)*tc+ja[0],(ic+1)*rc+ja[1])}_.addNode(d)},a._updateCenterOfMass=function(d){this.centerOfMass==null&&(this.centerOfMass=new Float32Array(2));var _=this.centerOfMass[0]*this.mass,ja=this.centerOfMass[1]*this.mass;_+=d.position[0]*d.mass,ja+=d.position[1]*d.mass,this.mass+=d.mass,this.centerOfMass[0]=_/this.mass,this.centerOfMass[1]=ja/this.mass};function s(){this.position=new Float32Array(2),this.force=n.create(),this.forcePrev=n.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function o(d,_){this.source=d,this.target=_,this.weight=1}function u(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new r,this.rootRegion.centerOfMass=n.create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}var c=u.prototype;c.initNodes=function(d,_,ja){var Ja=_.length;this.nodes.length=0;for(var ec=typeof ja<"u",tc=0;tc<Ja;tc++){var rc=new s;rc.position[0]=d[tc*2],rc.position[1]=d[tc*2+1],rc.mass=_[tc],ec&&(rc.size=ja[tc]),this.nodes.push(rc)}this._massArr=_,this._swingingArr=new Float32Array(Ja),ec&&(this._sizeArr=ja)},c.initEdges=function(d,_){var ja=d.length/2;this.edges.length=0;for(var Ja=0;Ja<ja;Ja++){var ec=d[Ja*2],tc=d[Ja*2+1],rc=this.nodes[ec],nc=this.nodes[tc];if(!rc||!nc){console.error("Node not exists, try initNodes before initEdges");return}rc.outDegree++,nc.inDegree++;var ic=new o(rc,nc);_&&(ic.weight=_[Ja]),this.edges.push(ic)}},c.updateSettings=function(){if(this.repulsionByDegree)for(var d=0;d<this.nodes.length;d++){var _=this.nodes[d];_.mass=_.inDegree+_.outDegree+1}else for(var d=0;d<this.nodes.length;d++){var _=this.nodes[d];_.mass=this._massArr[d]}},c.update=function(){var d=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var _=0;_<d;_++)this.rootRegion.addNode(this.nodes[_]);this.rootRegion.afterUpdate()}for(var _=0;_<d;_++){var ja=this.nodes[_];n.copy(ja.forcePrev,ja.force),n.set(ja.force,0,0)}for(var _=0;_<d;_++){var Ja=this.nodes[_];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,Ja);else for(var ec=_+1;ec<d;ec++){var tc=this.nodes[ec];this.applyNodeToNodeRepulsion(Ja,tc,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(Ja):this.applyNodeGravity(Ja))}for(var _=0;_<this.edges.length;_++)this.applyEdgeAttraction(this.edges[_]);for(var rc=0,nc=0,ic=n.create(),_=0;_<d;_++){var ja=this.nodes[_],uc=n.dist(ja.force,ja.forcePrev);rc+=uc*ja.mass,n.add(ic,ja.force,ja.forcePrev);var eh=n.len(ic)*.5;nc+=eh*ja.mass,this._swingingArr[_]=uc}var rh=this.jitterTolerence*this.jitterTolerence*nc/rc;this._globalSpeed>0&&(rh=Math.min(rh/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=rh;for(var _=0;_<d;_++){var ja=this.nodes[_],uc=this._swingingArr[_],ah=.1*rh/(1+rh*Math.sqrt(uc)),ih=n.len(ja.force);ih>0&&(ah=Math.min(ih*ah,10)/ih,n.scaleAndAdd(ja.position,ja.position,ja.force,ah))}},c.applyRegionToNodeRepulsion=function(){var d=n.create();return function(ja,Ja){if(ja.node)this.applyNodeToNodeRepulsion(ja.node,Ja,!0);else{n.sub(d,Ja.position,ja.centerOfMass);var ec=d[0]*d[0]+d[1]*d[1];if(ec>this.barnesHutTheta*ja.size*ja.size){var tc=this.scaling*Ja.mass*ja.mass/ec;n.scaleAndAdd(Ja.force,Ja.force,d,tc)}else for(var rc=0;rc<ja.nSubRegions;rc++)this.applyRegionToNodeRepulsion(ja.subRegions[rc],Ja)}}}(),c.applyNodeToNodeRepulsion=function(){var d=n.create();return function(ja,Ja,ec){if(ja!=Ja){n.sub(d,ja.position,Ja.position);var tc=d[0]*d[0]+d[1]*d[1];if(tc!==0){var rc;if(this.preventOverlap){var nc=Math.sqrt(tc);if(nc=nc-ja.size-Ja.size,nc>0)rc=this.scaling*ja.mass*Ja.mass/(nc*nc);else if(nc<0)rc=this.scaling*100*ja.mass*Ja.mass;else return}else rc=this.scaling*ja.mass*Ja.mass/tc;n.scaleAndAdd(ja.force,ja.force,d,rc),n.scaleAndAdd(Ja.force,Ja.force,d,-rc)}}}}(),c.applyEdgeAttraction=function(){var d=n.create();return function(ja){var Ja=ja.source,ec=ja.target;n.sub(d,Ja.position,ec.position);var tc=n.len(d),rc;this.edgeWeightInfluence===0?rc=1:this.edgeWeightInfluence===1?rc=ja.weight:rc=Math.pow(ja.weight,this.edgeWeightInfluence);var nc;this.preventOverlap&&(tc=tc-Ja.size-ec.size,tc<=0)||(this.linLogMode?nc=-rc*Math.log(tc+1)/(tc+1):nc=-rc,n.scaleAndAdd(Ja.force,Ja.force,d,nc),n.scaleAndAdd(ec.force,ec.force,d,-nc))}}(),c.applyNodeGravity=function(){var d=n.create();return function(_){n.sub(d,this.gravityCenter,_.position);var ja=n.len(d);n.scaleAndAdd(_.force,_.force,d,this.gravity*_.mass/(ja+1))}}(),c.applyNodeStrongGravity=function(){var d=n.create();return function(_){n.sub(d,this.gravityCenter,_.position),n.scaleAndAdd(_.force,_.force,d,this.gravity*_.mass)}}(),c.updateBBox=function(){for(var d=1/0,_=1/0,ja=-1/0,Ja=-1/0,ec=0;ec<this.nodes.length;ec++){var tc=this.nodes[ec].position;d=Math.min(d,tc[0]),_=Math.min(_,tc[1]),ja=Math.max(ja,tc[0]),Ja=Math.max(Ja,tc[1])}this.bbox[0]=d,this.bbox[1]=_,this.bbox[2]=ja,this.bbox[3]=Ja},c.getGlobalSpeed=function(){return this._globalSpeed};var p=null;self.onmessage=function(d){switch(d.data.cmd){case"init":p=new u,p.initNodes(d.data.nodesPosition,d.data.nodesMass,d.data.nodesSize),p.initEdges(d.data.edges,d.data.edgesWeight);break;case"updateConfig":if(p)for(var _ in d.data.config)p[_]=d.data.config[_];break;case"update":var ja=d.data.steps;if(p){for(var Ja=0;Ja<ja;Ja++)p.update();for(var ec=p.nodes.length,tc=new Float32Array(ec*2),Ja=0;Ja<ec;Ja++){var rc=p.nodes[Ja];tc[Ja*2]=rc.position[0],tc[Ja*2+1]=rc.position[1]}self.postMessage({buffer:tc.buffer,globalSpeed:p.getGlobalSpeed()},[tc.buffer])}else{var nc=new Float32Array;self.postMessage({buffer:nc.buffer,globalSpeed:p.getGlobalSpeed()},[nc.buffer])}break}}}var workerUrl=forceAtlas2Worker.toString();workerUrl=workerUrl.slice(workerUrl.indexOf("{")+1,workerUrl.lastIndexOf("}"));var defaultConfigs={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},ForceAtlas2=function(n){for(var r in defaultConfigs)this[r]=defaultConfigs[r];if(n)for(var r in n)this[r]=n[r];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new Texture2D({type:Texture.FLOAT,flipY:!1,minFilter:Texture.NEAREST,magFilter:Texture.NEAREST})};ForceAtlas2.prototype.initData=function(n,r){var a=new Blob([workerUrl]),s=window.URL.createObjectURL(a);this._worker=new Worker(s),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=n,this._edges=r,this._frame=0;for(var o=n.length,u=r.length,c=new Float32Array(o*2),p=new Float32Array(o),d=new Float32Array(o),_=new Float32Array(u*2),ja=new Float32Array(u),Ja=0;Ja<n.length;Ja++){var ec=n[Ja];c[Ja*2]=ec.x,c[Ja*2+1]=ec.y,p[Ja]=ec.mass==null?1:ec.mass,d[Ja]=ec.size==null?1:ec.size}for(var Ja=0;Ja<r.length;Ja++){var tc=r[Ja],rc=tc.node1,nc=tc.node2;_[Ja*2]=rc,_[Ja*2+1]=nc,ja[Ja]=tc.weight==null?1:tc.weight}var ic=Math.ceil(Math.sqrt(n.length)),uc=ic,eh=new Float32Array(ic*uc*4),rh=this._positionTex;rh.width=ic,rh.height=uc,rh.pixels=eh,this._worker.postMessage({cmd:"init",nodesPosition:c,nodesMass:p,nodesSize:d,edges:_,edgesWeight:ja}),this._globalSpeed=1/0};ForceAtlas2.prototype.updateOption=function(n){var r={};for(var a in defaultConfigs)r[a]=defaultConfigs[a];var s=this._nodes,o=this._edges,u=s.length;if(u>5e4?r.jitterTolerence=10:u>5e3?r.jitterTolerence=1:r.jitterTolerence=.1,u>100?r.scaling=2:r.scaling=10,u>1e3?r.barnesHutOptimize=!0:r.barnesHutOptimize=!1,n)for(var a in defaultConfigs)n[a]!=null&&(r[a]=n[a]);if(!r.gravityCenter){for(var c=[1/0,1/0],p=[-1/0,-1/0],d=0;d<s.length;d++)c[0]=Math.min(s[d].x,c[0]),c[1]=Math.min(s[d].y,c[1]),p[0]=Math.max(s[d].x,p[0]),p[1]=Math.max(s[d].y,p[1]);r.gravityCenter=[(c[0]+p[0])*.5,(c[1]+p[1])*.5]}for(var d=0;d<o.length;d++){var _=o[d].node1,ja=o[d].node2;s[_].degree=(s[_].degree||0)+1,s[ja].degree=(s[ja].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:r})};ForceAtlas2.prototype.update=function(n,r,a){r==null&&(r=1),r=Math.max(r,1),this._frame+=r,this._onupdate=a,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(r)})};ForceAtlas2.prototype._$onupdate=function(n){if(!this._disposed){var r=new Float32Array(n.data.buffer);this._globalSpeed=n.data.globalSpeed,this._positionArr=r,this._updateTexture(r),this._onupdate&&this._onupdate()}};ForceAtlas2.prototype.getNodePositionTexture=function(){return this._positionTex};ForceAtlas2.prototype.getNodeUV=function(n,r){r=r||[];var a=this._positionTex.width,s=this._positionTex.height;return r[0]=n%a/(a-1),r[1]=Math.floor(n/a)/(s-1),r};ForceAtlas2.prototype.getNodes=function(){return this._nodes};ForceAtlas2.prototype.getEdges=function(){return this._edges};ForceAtlas2.prototype.isFinished=function(n){return this._frame>n};ForceAtlas2.prototype.getNodePosition=function(n,r){if(r||(r=new Float32Array(this._nodes.length*2)),this._positionArr)for(var a=0;a<this._positionArr.length;a++)r[a]=this._positionArr[a];return r};ForceAtlas2.prototype._updateTexture=function(n){for(var r=this._positionTex.pixels,a=0,s=0;s<n.length;)r[a++]=n[s++],r[a++]=n[s++],r[a++]=1,r[a++]=1;this._positionTex.dirty()};ForceAtlas2.prototype.dispose=function(n){this._disposed=!0,this._worker=null};var Roam2DControl=Base.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var n=this.zr;n.on("mousedown",this._mouseDownHandler),n.on("mousewheel",this._mouseWheelHandler),n.on("globalout",this._mouseUpHandler),n.animation.on("frame",this._update)},setTarget:function(n){this._target=n},setZoom:function(n){this._zoom=Math.max(Math.min(n,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(n){this._dx=n[0],this._dy=n[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var n=this._target,r=this._zoom;n.position.x=this._dx,n.position.y=this._dy,n.scale.set(r,r,r),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(n){if(!n.target){var r=n.offsetX,a=n.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(r,a))){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var s=this._convertPos(r,a);this._x=s.x,this._y=s.y}}},_convertPos:function(n,r){var a=this.viewGL.camera,s=this.viewGL.viewport;return{x:(n-s.x)/s.width*(a.right-a.left)+a.left,y:(r-s.y)/s.height*(a.bottom-a.top)+a.top}},_mouseMoveHandler:function(n){var r=this._convertPos(n.offsetX,n.offsetY);this._dx+=r.x-this._x,this._dy+=r.y-this._y,this._x=r.x,this._y=r.y,this._needsUpdate=!0},_mouseUpHandler:function(n){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(n){n=n.event;var r=n.wheelDelta||-n.detail;if(r!==0){var a=n.offsetX,s=n.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(a,s))){var o=r>0?1.1:.9,u=Math.max(Math.min(this._zoom*o,this.maxZoom),this.minZoom);o=u/this._zoom;var c=this._convertPos(a,s),p=(c.x-this._dx)*(o-1),d=(c.y-this._dy)*(o-1);this._dx-=p,this._dy-=d,this._zoom=u,this._needsUpdate=!0}}},dispose:function(){var n=this.zr;n.off("mousedown",this._mouseDownHandler),n.off("mousemove",this._mouseMoveHandler),n.off("mouseup",this._mouseUpHandler),n.off("mousewheel",this._mouseWheelHandler),n.off("globalout",this._mouseUpHandler),n.animation.off("frame",this._update)}});const lines2DGLSL=`@export ecgl.lines2D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

void main()
{
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 v_Color = a_Color;
}

@end

@export ecgl.lines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

void main()
{
 gl_FragColor = color * v_Color;
}
@end


@export ecgl.meshLines2D.vertex

attribute vec2 position: POSITION;
attribute vec2 normal;
attribute float offset;
attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 p2.xy /= p2.w;
 gl_Position.xy /= gl_Position.w;

 vec2 N = normalize(p2.xy - gl_Position.xy);
 gl_Position.xy += N * offset / viewport.zw * 2.0;

 gl_Position.xy *= gl_Position.w;

 v_Color = a_Color;
}
@end


@export ecgl.meshLines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 gl_FragColor = color * v_Color;
}

@end`;var vec2=glmatrix.vec2;graphicGL.Shader.import(lines2DGLSL);var globalLayoutId=1;const GraphGLView=ChartView.extend({type:"graphGL",__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node,this.viewGL=new ViewGL("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new PointsBuilder(!0,r),this._forceEdgesMesh=new graphicGL.Mesh({material:new graphicGL.Material({shader:graphicGL.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new graphicGL.Geometry({attributes:{node:new graphicGL.Geometry.Attribute("node","float",2),color:new graphicGL.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:graphicGL.Mesh.LINES}),this._edgesMesh=new graphicGL.Mesh({material:new graphicGL.Material({shader:graphicGL.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new LinesGeometry$1({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new Roam2DControl({zr:r.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(n,r,a){this.groupGL.add(this._pointsBuilder.rootNode),this._model=n,this._api=a,this._initLayout(n,r,a),this._pointsBuilder.update(n,r,a),this._forceLayoutInstance instanceof ForceAtlas2GPU||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(n,a),this._control.off("update"),this._control.on("update",function(){a.dispatchAction({type:"graphGLRoam",seriesId:n.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(retrieve.firstNotNull(n.get("zoom"),1)),this._control.setOffset(n.get("offset")||[0,0]);var s=this._pointsBuilder.getPointsMesh();if(s.off("mousemove",this._mousemoveHandler),s.off("mouseout",this._mouseOutHandler,this),a.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,n.get("focusNodeAdjacency")){var o=n.get("focusNodeAdjacencyOn");o==="click"?a.getZr().on("click",this._clickHandler):o==="mouseover"&&(s.on("mousemove",this._mousemoveHandler,this),s.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(n){if(!this._layouting){var r=this._pointsBuilder.getPointsMesh().dataIndex;r>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:r}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(n){if(!this._layouting){var r=this._pointsBuilder.getPointsMesh().dataIndex;r>=0?r!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:r}):this._mouseOutHandler(n),this._lastMouseOverDataIndex=r}},_mouseOutHandler:function(n){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(n,r){var a=this._forceEdgesMesh.geometry,s=r.getEdgeData(),o=0,u=this._forceLayoutInstance,c=s.count()*2;a.attributes.node.init(c),a.attributes.color.init(c),s.each(function(p){var d=n[p];a.attributes.node.set(o,u.getNodeUV(d.node1)),a.attributes.node.set(o+1,u.getNodeUV(d.node2));var _=getItemVisualColor(s,d.dataIndex),ja=graphicGL.parseColor(_);ja[3]*=retrieve.firstNotNull(getItemVisualOpacity(s,d.dataIndex),1),a.attributes.color.set(o,ja),a.attributes.color.set(o+1,ja),o+=2}),a.dirty()},_updateMeshLinesGeometry:function(){var r=this._model.getEdgeData(),n=this._edgesMesh.geometry,r=this._model.getEdgeData(),a=this._model.getData().getLayout("points");n.resetOffset(),n.setVertexCount(r.count()*n.getLineVertexCount()),n.setTriangleCount(r.count()*n.getLineTriangleCount());var s=[],o=[],u=["lineStyle","width"];this._originalEdgeColors=new Float32Array(r.count()*4),this._edgeIndicesMap=new Float32Array(r.count()),r.each(function(c){var p=r.graph.getEdgeByIndex(c),d=p.node1.dataIndex*2,_=p.node2.dataIndex*2;s[0]=a[d],s[1]=a[d+1],o[0]=a[_],o[1]=a[_+1];var ja=getItemVisualColor(r,p.dataIndex),Ja=graphicGL.parseColor(ja);Ja[3]*=retrieve.firstNotNull(getItemVisualOpacity(r,p.dataIndex),1);var ec=r.getItemModel(p.dataIndex),tc=retrieve.firstNotNull(ec.get(u),1)*this._api.getDevicePixelRatio();n.addLine(s,o,Ja,tc);for(var rc=0;rc<4;rc++)this._originalEdgeColors[p.dataIndex*4+rc]=Ja[rc];this._edgeIndicesMap[p.dataIndex]=c},this),n.dirty()},_updateForceNodesGeometry:function(n){for(var r=this._pointsBuilder.getPointsMesh(),a=[],s=0;s<n.count();s++)this._forceLayoutInstance.getNodeUV(s,a),r.geometry.attributes.position.set(s,a);r.geometry.dirty("position")},_initLayout:function(n,r,a){var s=n.get("layout"),o=n.getGraph(),u=n.getBoxLayoutParams(),c=getLayoutRect(u,{width:a.getWidth(),height:a.getHeight()});s==="force"&&(s="forceAtlas2"),this.stopLayout(n,r,a,{beforeLayout:!0});var p=n.getData(),d=n.getData();if(s==="forceAtlas2"){var _=n.getModel("forceAtlas2"),ja=this._forceLayoutInstance,Ja=[],ec=[],tc=p.getDataExtent("value"),rc=d.getDataExtent("value"),nc=retrieve.firstNotNull(_.get("edgeWeight"),1),ic=retrieve.firstNotNull(_.get("nodeWeight"),1);typeof nc=="number"&&(nc=[nc,nc]),typeof ic=="number"&&(ic=[ic,ic]);var uc=0,eh={},rh=new Float32Array(p.count()*2);if(o.eachNode(function(ih){var oh=ih.dataIndex,uh=p.get("value",oh),ch,hh;if(p.hasItemOption){var dh=p.getItemModel(oh);ch=dh.get("x"),hh=dh.get("y")}ch==null&&(ch=c.x+Math.random()*c.width,hh=c.y+Math.random()*c.height),rh[uc*2]=ch,rh[uc*2+1]=hh,eh[ih.id]=uc++;var gh=linearMap$2(uh,tc,ic);isNaN(gh)&&(isNaN(ic[0])?gh=1:gh=ic[0]),Ja.push({x:ch,y:hh,mass:gh,size:p.getItemVisual(oh,"symbolSize")})}),p.setLayout("points",rh),o.eachEdge(function(ih){var oh=ih.dataIndex,uh=p.get("value",oh),ch=linearMap$2(uh,rc,nc);isNaN(ch)&&(isNaN(nc[0])?ch=1:ch=nc[0]),ec.push({node1:eh[ih.node1.id],node2:eh[ih.node2.id],weight:ch,dataIndex:oh})}),!ja){var ah=_.get("GPU");this._forceLayoutInstance&&(ah&&!(this._forceLayoutInstance instanceof ForceAtlas2GPU)||!ah&&!(this._forceLayoutInstance instanceof ForceAtlas2))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),ja=this._forceLayoutInstance=ah?new ForceAtlas2GPU:new ForceAtlas2}ja.initData(Ja,ec),ja.updateOption(_.option),this._updateForceEdgesGeometry(ja.getEdges(),n),this._updatePositionTexture(),a.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else{var rh=new Float32Array(p.count()*2),uc=0;o.eachNode(function(uh){var ch=uh.dataIndex,hh,dh;if(p.hasItemOption){var gh=p.getItemModel(ch);hh=gh.get("x"),dh=gh.get("y")}rh[uc++]=hh,rh[uc++]=dh}),p.setLayout("points",rh),this._updateAfterLayout(n,r,a)}},_updatePositionTexture:function(){var n=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(n),this._forceEdgesMesh.material.set("positionTex",n)},startLayout:function(n,r,u,s){if(!(s&&s.from!=null&&s.from!==this.uid)){var o=this.viewGL,u=this._api,c=this._forceLayoutInstance,p=this._model.getData(),d=this._model.getModel("forceAtlas2");if(c&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),!!this._forceLayoutInstance)){this._updateForceNodesGeometry(n.getData()),this._pointsBuilder.hideLabels();var _=this,ja=this._layoutId=globalLayoutId++,Ja=d.getShallow("maxSteps"),ec=d.getShallow("steps"),tc=0,rc=Math.max(ec*2,20),nc=function(ic){if(ic===_._layoutId){if(c.isFinished(Ja)){u.dispatchAction({type:"graphGLStopLayout",from:_.uid}),u.dispatchAction({type:"graphGLFinishLayout",points:p.getLayout("points"),from:_.uid});return}c.update(o.layer.renderer,ec,function(){_._updatePositionTexture(),tc+=ec,tc>=rc&&(_._syncNodePosition(n),tc=0),u.getZr().refresh(),requestAnimationFrame$1(function(){nc(ic)})})}};requestAnimationFrame$1(function(){_._forceLayoutInstanceToDispose&&(_._forceLayoutInstanceToDispose.dispose(o.layer.renderer),_._forceLayoutInstanceToDispose=null),nc(ja)}),this._layouting=!0}}},stopLayout:function(n,r,a,s){s&&s.from!=null&&s.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&this.viewGL.layer&&(s&&s.beforeLayout||(this._syncNodePosition(n),this._updateAfterLayout(n,r,a)),this._api.getZr().refresh(),this._layouting=!1))},_syncNodePosition:function(n){var r=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);n.getData().setLayout("points",r),n.setNodePosition(r)},_updateAfterLayout:function(n,r,a){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(n,r,a),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(n,r,a,s){var o=this._model.getData();this._downplayAll();var u=s.dataIndex,c=o.graph,p=[],d=c.getNodeByIndex(u);p.push(d),d.edges.forEach(function(ja){ja.dataIndex<0||(ja.node1!==d&&p.push(ja.node1),ja.node2!==d&&p.push(ja.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),p.forEach(function(ja){this._pointsBuilder.highlight(o,ja.dataIndex)},this),this._pointsBuilder.updateLabels(p.map(function(ja){return ja.dataIndex}));var _=[];d.edges.forEach(function(ja){ja.dataIndex>=0&&(this._highlightEdge(ja.dataIndex),_.push(ja))},this),this._focusNodes=p,this._focusEdges=_},unfocusNodeAdjacency:function(n,r,a,s){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(n){var r=this._model.getEdgeData().getItemModel(n),a=graphicGL.parseColor(r.get("emphasis.lineStyle.color")||r.get("lineStyle.color")),s=retrieve.firstNotNull(r.get("emphasis.lineStyle.opacity"),r.get("lineStyle.opacity"),1);a[3]*=s,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[n],a)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(n){this._pointsBuilder.downplay(this._model.getData(),n.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(n){this._downplayEdge(n.dataIndex)},this)},_downplayEdge:function(n){var r=this._getColor(n,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[n],r)},_setEdgeFade:function(){var n=[];return function(r,a){this._getColor(r,n),n[3]*=a,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[r],n)}}(),_getColor:function(n,r){for(var a=0;a<4;a++)r[a]=this._originalEdgeColors[n*4+a];return r},_fadeOutEdgesAll:function(n){var r=this._model.getData().graph;r.eachEdge(function(a){this._setEdgeFade(a.dataIndex,n)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(n,r){this.viewGL.setViewport(0,0,r.getWidth(),r.getHeight(),r.getDevicePixelRatio());for(var a=this.viewGL.camera,s=n.getData(),o=s.getLayout("points"),u=vec2.create(1/0,1/0),c=vec2.create(-1/0,-1/0),p=[],d=0;d<o.length;)p[0]=o[d++],p[1]=o[d++],vec2.min(u,u,p),vec2.max(c,c,p);var _=(c[1]+u[1])/2,ja=(c[0]+u[0])/2;if(!(ja>a.left&&ja<a.right&&_<a.bottom&&_>a.top)){var Ja=Math.max(c[0]-u[0],10),ec=Ja/r.getWidth()*r.getHeight();Ja*=1.4,ec*=1.4,u[0]-=Ja*.2,a.left=u[0],a.top=_-ec/2,a.bottom=_+ec/2,a.right=Ja+u[0],a.near=0,a.far=100}},dispose:function(){var n=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(n),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function normalize(n){return n instanceof Array||(n=[n,n]),n}function install$2(n){n.registerChartView(GraphGLView),n.registerSeriesModel(GraphSeries),n.registerVisual(function(a){const s={};a.eachSeriesByType("graphGL",function(o){var u=o.getCategoriesData(),c=o.getData(),p={};u.each(function(d){var _=u.getName(d);p["ec-"+_]=d;var ja=u.getItemModel(d),Ja=ja.getModel("itemStyle").getItemStyle();Ja.fill||(Ja.fill=o.getColorFromPalette(_,s)),u.setItemVisual(d,"style",Ja);var ec=["symbol","symbolSize","symbolKeepAspect"];for(let rc=0;rc<ec.length;rc++){var tc=ja.getShallow(ec[rc],!0);tc!=null&&u.setItemVisual(d,ec[rc],tc)}}),u.count()&&c.each(function(d){var _=c.getItemModel(d);let ja=_.getShallow("category");if(ja!=null){typeof ja=="string"&&(ja=p["ec-"+ja]);var Ja=u.getItemVisual(ja,"style"),ec=c.ensureUniqueItemVisual(d,"style");extend$2(ec,Ja);var tc=["symbol","symbolSize","symbolKeepAspect"];for(let rc=0;rc<tc.length;rc++)c.setItemVisual(d,tc[rc],u.getItemVisual(ja,tc[rc]))}})})}),n.registerVisual(function(a){a.eachSeriesByType("graphGL",function(s){var o=s.getGraph(),u=s.getEdgeData(),c=normalize(s.get("edgeSymbol")),p=normalize(s.get("edgeSymbolSize"));u.setVisual("drawType","stroke"),u.setVisual("fromSymbol",c&&c[0]),u.setVisual("toSymbol",c&&c[1]),u.setVisual("fromSymbolSize",p&&p[0]),u.setVisual("toSymbolSize",p&&p[1]),u.setVisual("style",s.getModel("lineStyle").getLineStyle()),u.each(function(d){var _=u.getItemModel(d),ja=o.getEdgeByIndex(d),Ja=normalize(_.getShallow("symbol",!0)),ec=normalize(_.getShallow("symbolSize",!0)),tc=_.getModel("lineStyle").getLineStyle(),rc=u.ensureUniqueItemVisual(d,"style");switch(extend$2(rc,tc),rc.stroke){case"source":{var nc=ja.node1.getVisual("style");rc.stroke=nc&&nc.fill;break}case"target":{var nc=ja.node2.getVisual("style");rc.stroke=nc&&nc.fill;break}}Ja[0]&&ja.setVisual("fromSymbol",Ja[0]),Ja[1]&&ja.setVisual("toSymbol",Ja[1]),ec[0]&&ja.setVisual("fromSymbolSize",ec[0]),ec[1]&&ja.setVisual("toSymbolSize",ec[1])})})}),n.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(a,s){s.eachComponent({mainType:"series",query:a},function(o){o.setView(a)})});function r(){}n.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},r),n.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},r),n.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},r),n.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},r)}use(install$2);const FlowGLSeries=SeriesModel.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(n,r){var a=this.get("coordinateSystem"),s=a==="geo"?["lng","lat"]:getCoordinateSystemDimensions(a)||["x","y"];s.push("vx","vy");var o=createDimensions(this.getSource(),{coordDimensions:s,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),u=new SeriesData(o,this);return u.initData(this.getSource()),u},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}});var LinesGeometry=Geometry.extend(function(){return{dynamic:!0,attributes:{position:new Geometry.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(n){var r=this.attributes,a=4*n,s=2*n;this.vertexCount!==a&&r.position.init(a),this.triangleCount!==s&&(s===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(s*3):new Uint16Array(s*3))},addLine:function(n){var r=this._vertexOffset;this.attributes.position.set(r,[n[0],n[1],1]),this.attributes.position.set(r+1,[n[0],n[1],-1]),this.attributes.position.set(r+2,[n[0],n[1],2]),this.attributes.position.set(r+3,[n[0],n[1],-2]),this.setTriangleIndices(this._faceOffset++,[r,r+1,r+2]),this.setTriangleIndices(this._faceOffset++,[r+1,r+2,r+3]),this._vertexOffset+=4}});const vectorFieldParticleGLSL=`@export ecgl.vfParticle.particle.fragment

uniform sampler2D particleTexture;
uniform sampler2D spawnTexture;
uniform sampler2D velocityTexture;

uniform float deltaTime;
uniform float elapsedTime;

uniform float speedScaling : 1.0;

uniform vec2 textureSize;
uniform vec4 region : [0, 0, 1, 1];
uniform float firstFrameTime;

varying vec2 v_Texcoord;


void main()
{
 vec4 p = texture2D(particleTexture, v_Texcoord);
 bool spawn = false;
 if (p.w <= 0.0) {
 p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));
 p.w -= firstFrameTime;
 spawn = true;
 }
 vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;
 v = (v - 0.5) * 2.0;
 p.z = length(v);
 p.xy += v * deltaTime / 10.0 * speedScaling;
 p.w -= deltaTime;

 if (spawn || p.xy != fract(p.xy)) {
 p.z = 0.0;
 }
 p.xy = fract(p.xy);

 gl_FragColor = p;
}
@end

@export ecgl.vfParticle.renderPoints.vertex

#define PI 3.1415926

attribute vec2 texcoord : TEXCOORD_0;

uniform sampler2D particleTexture;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

uniform float size : 1.0;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 vec4 p = texture2D(particleTexture, texcoord);

 if (p.w > 0.0 && p.z > 1e-5) {
 gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }

 v_Mag = p.z;
 v_Uv = p.xy;

 gl_PointSize = size;
}

@end

@export ecgl.vfParticle.renderPoints.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;
uniform sampler2D spriteTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
#ifdef SPRITETEXTURE_ENABLED
 gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);
 if (color.a == 0.0) {
 discard;
 }
#endif
#ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end

@export ecgl.vfParticle.renderLines.vertex

#define PI 3.1415926

attribute vec3 position : POSITION;

uniform sampler2D particleTexture;
uniform sampler2D prevParticleTexture;

uniform float size : 1.0;
uniform vec4 vp: VIEWPORT;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

varying float v_Mag;
varying vec2 v_Uv;

@import clay.util.rand

void main()
{
 vec4 p = texture2D(particleTexture, position.xy);
 vec4 p2 = texture2D(prevParticleTexture, position.xy);

 p.xy = p.xy * 2.0 - 1.0;
 p2.xy = p2.xy * 2.0 - 1.0;

 if (p.w > 0.0 && p.z > 1e-5) {
 vec2 dir = normalize(p.xy - p2.xy);
 vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;
 if (abs(position.z) == 2.0) {
 gl_Position = vec4(p.xy + norm, 0.0, 1.0);
 v_Uv = p.xy;
 v_Mag = p.z;
 }
 else {
 gl_Position = vec4(p2.xy + norm, 0.0, 1.0);
 v_Mag = p2.z;
 v_Uv = p2.xy;
 }
 gl_Position = worldViewProjection * gl_Position;
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }
}

@end

@export ecgl.vfParticle.renderLines.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
 #ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end
`;Shader.import(vectorFieldParticleGLSL);function createSpriteCanvas(n){var r=document.createElement("canvas");r.width=r.height=n;var a=r.getContext("2d");return a.fillStyle="#fff",a.arc(n/2,n/2,n/2,0,Math.PI*2),a.fill(),r}var VectorFieldParticleSurface=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new Texture2D({type:Texture.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};VectorFieldParticleSurface.prototype={constructor:VectorFieldParticleSurface,init:function(){var n={type:Texture.FLOAT,minFilter:Texture.NEAREST,magFilter:Texture.NEAREST,useMipmap:!1};this._spawnTexture=new Texture2D(n),this._particleTexture0=new Texture2D(n),this._particleTexture1=new Texture2D(n),this._frameBuffer=new FrameBuffer({depthBuffer:!1}),this._particlePass=new Pass({fragment:Shader.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new Pass({fragment:Shader.source("clay.compositor.downsample")});var r=new Mesh({renderOrder:10,material:new Material({shader:new Shader(Shader.source("ecgl.vfParticle.renderPoints.vertex"),Shader.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:Mesh.POINTS,geometry:new Geometry({dynamic:!0,mainAttribute:"texcoord0"})}),a=new Mesh({renderOrder:10,material:new Material({shader:new Shader(Shader.source("ecgl.vfParticle.renderLines.vertex"),Shader.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new LinesGeometry,culling:!1}),s=new Mesh({material:new Material({shader:new Shader(Shader.source("ecgl.color.vertex"),Shader.source("ecgl.color.fragment"))}),geometry:new Plane});s.material.enableTexture("diffuseMap"),this._particlePointsMesh=r,this._particleLinesMesh=a,this._lastFrameFullQuadMesh=s,this._camera=new Orthographic,this._thisFrameTexture=new Texture2D,this._lastFrameTexture=new Texture2D},setParticleDensity:function(n,r){for(var a=n*r,s=new Float32Array(a*4),o=0,u=this.particleLife,c=0;c<n;c++)for(var p=0;p<r;p++,o++){s[o*4]=Math.random(),s[o*4+1]=Math.random(),s[o*4+2]=Math.random();var d=(u[1]-u[0])*Math.random()+u[0];s[o*4+3]=d}this._particleType==="line"?this._setLineGeometry(n,r):this._setPointsGeometry(n,r),this._spawnTexture.width=n,this._spawnTexture.height=r,this._spawnTexture.pixels=s,this._particleTexture0.width=this._particleTexture1.width=n,this._particleTexture0.height=this._particleTexture1.height=r,this._particlePass.setUniform("textureSize",[n,r])},_setPointsGeometry:function(n,r){var a=n*r,s=this._particlePointsMesh.geometry,o=s.attributes;o.texcoord0.init(a);for(var u=0,c=0;c<n;c++)for(var p=0;p<r;p++,u++)o.texcoord0.value[u*2]=c/n,o.texcoord0.value[u*2+1]=p/r;s.dirty()},_setLineGeometry:function(n,r){var a=n*r,s=this._getParticleMesh().geometry;s.setLineCount(a),s.resetOffset();for(var o=0;o<n;o++)for(var u=0;u<r;u++)s.addLine([o/n,u/r]);s.dirty()},_getParticleMesh:function(){return this._particleType==="line"?this._particleLinesMesh:this._particlePointsMesh},update:function(n,r,a,s){var o=this._getParticleMesh(),u=this._frameBuffer,c=this._particlePass;s&&this._updateDownsampleTextures(n,r),o.material.set("size",this._particleSize*this._supersampling),o.material.set("color",this.particleColor),c.setUniform("speedScaling",this.particleSpeedScaling),u.attach(this._particleTexture1),c.setUniform("firstFrameTime",s?(this.particleLife[1]+this.particleLife[0])/2:0),c.setUniform("particleTexture",this._particleTexture0),c.setUniform("deltaTime",a),c.setUniform("elapsedTime",this._elapsedTime),c.render(n,u),o.material.set("particleTexture",this._particleTexture1),o.material.set("prevParticleTexture",this._particleTexture0),u.attach(this._thisFrameTexture),u.bind(n),n.gl.clear(n.gl.DEPTH_BUFFER_BIT|n.gl.COLOR_BUFFER_BIT);var p=this._lastFrameFullQuadMesh;p.material.set("diffuseMap",this._lastFrameTexture),p.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),n.renderPass([p,o],this._camera),u.unbind(n),this._downsample(n),this._swapTexture(),this._elapsedTime+=a},_downsample:function(n){var r=this._downsampleTextures;if(r.length!==0)for(var a=0,s=this._thisFrameTexture,o=r[a];o;)this._frameBuffer.attach(o),this._downsamplePass.setUniform("texture",s),this._downsamplePass.setUniform("textureSize",[s.width,s.height]),this._downsamplePass.render(n,this._frameBuffer),s=o,o=r[++a]},getSurfaceTexture:function(){var n=this._downsampleTextures;return n.length>0?n[n.length-1]:this._lastFrameTexture},setRegion:function(n){this._particlePass.setUniform("region",n)},resize:function(n,r){this._lastFrameTexture.width=n*this._supersampling,this._lastFrameTexture.height=r*this._supersampling,this._thisFrameTexture.width=n*this._supersampling,this._thisFrameTexture.height=r*this._supersampling,this._width=n,this._height=r},setParticleSize:function(n){var r=this._getParticleMesh();if(n<=2){r.material.disableTexture("spriteTexture"),r.material.transparent=!1;return}this._spriteTexture||(this._spriteTexture=new Texture2D),(!this._spriteTexture.image||this._spriteTexture.image.width!==n)&&(this._spriteTexture.image=createSpriteCanvas(n),this._spriteTexture.dirty()),r.material.transparent=!0,r.material.enableTexture("spriteTexture"),r.material.set("spriteTexture",this._spriteTexture),this._particleSize=n},setGradientTexture:function(n){var r=this._getParticleMesh().material;r[n?"enableTexture":"disableTexture"]("gradientTexture"),r.setUniform("gradientTexture",n)},setColorTextureImage:function(n,r){var a=this._getParticleMesh().material;a.setTextureImage("colorTexture",n,r,{flipY:!0})},setParticleType:function(n){this._particleType=n},clearFrame:function(n){var r=this._frameBuffer;r.attach(this._lastFrameTexture),r.bind(n),n.gl.clear(n.gl.DEPTH_BUFFER_BIT|n.gl.COLOR_BUFFER_BIT),r.unbind(n)},setSupersampling:function(n){this._supersampling=n,this.resize(this._width,this._height)},_updateDownsampleTextures:function(n,r){for(var a=this._downsampleTextures,s=Math.max(Math.floor(Math.log(this._supersampling/r.getDevicePixelRatio())/Math.log(2)),0),o=2,u=this._width*this._supersampling,c=this._height*this._supersampling,p=0;p<s;p++)a[p]=a[p]||new Texture2D,a[p].width=u/o,a[p].height=c/o,o*=2;for(;p<a.length;p++)a[p].dispose(n);a.length=s},_swapTexture:function(){var n=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=n;var n=this._thisFrameTexture;this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=n},dispose:function(n){n.disposeFrameBuffer(this._frameBuffer),n.disposeTexture(this.vectorFieldTexture),n.disposeTexture(this._spawnTexture),n.disposeTexture(this._particleTexture0),n.disposeTexture(this._particleTexture1),n.disposeTexture(this._thisFrameTexture),n.disposeTexture(this._lastFrameTexture),n.disposeGeometry(this._particleLinesMesh.geometry),n.disposeGeometry(this._particlePointsMesh.geometry),n.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&n.disposeTexture(this._spriteTexture),this._particlePass.dispose(n),this._downsamplePass.dispose(n),this._downsampleTextures.forEach(function(r){r.dispose(n)})}};const FlowGLView=ChartView.extend({type:"flowGL",__ecgl__:!0,init:function(n,r){this.viewGL=new ViewGL("orthographic"),this.groupGL=new graphicGL.Node,this.viewGL.add(this.groupGL),this._particleSurface=new VectorFieldParticleSurface;var a=new graphicGL.Mesh({geometry:new graphicGL.PlaneGeometry,material:new graphicGL.Material({shader:new graphicGL.Shader({vertex:graphicGL.Shader.source("ecgl.color.vertex"),fragment:graphicGL.Shader.source("ecgl.color.fragment")}),transparent:!0})});a.material.enableTexture("diffuseMap"),this.groupGL.add(a),this._planeMesh=a},render:function(n,r,a){var s=this._particleSurface;s.setParticleType(n.get("particleType")),s.setSupersampling(n.get("supersampling")),this._updateData(n,a),this._updateCamera(a.getWidth(),a.getHeight(),a.getDevicePixelRatio());var o=retrieve.firstNotNull(n.get("particleDensity"),128);s.setParticleDensity(o,o);var u=this._planeMesh,c=+new Date,p=this,d=!0;u.__percent=0,u.stopAnimation(),u.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var Ja=+new Date,ec=Math.min(Ja-c,20);c=c+ec,p._renderer&&(s.update(p._renderer,a,ec/1e3,d),u.material.set("diffuseMap",s.getSurfaceTexture())),d=!1}).start();var _=n.getModel("itemStyle"),ja=graphicGL.parseColor(_.get("color"));ja[3]*=retrieve.firstNotNull(_.get("opacity"),1),u.material.set("color",ja),s.setColorTextureImage(n.get("colorTexture"),a),s.setParticleSize(n.get("particleSize")),s.particleSpeedScaling=n.get("particleSpeed"),s.motionBlurFactor=1-Math.pow(.1,n.get("particleTrail"))},updateTransform:function(n,r,a){this._updateData(n,a)},afterRender:function(n,r,a,s){var o=s.renderer;this._renderer=o},_updateData:function(n,r){var a=n.coordinateSystem,s=a.dimensions.map(function(eh){return n.coordDimToDataDim(eh)[0]}),o=n.getData(),u=o.getDataExtent(s[0]),c=o.getDataExtent(s[1]),p=n.get("gridWidth"),d=n.get("gridHeight");if(p==null||p==="auto"){var _=(u[1]-u[0])/(c[1]-c[0]);p=Math.round(Math.sqrt(_*o.count()))}(d==null||d==="auto")&&(d=Math.ceil(o.count()/p));var ja=this._particleSurface.vectorFieldTexture,Ja=ja.pixels;if(!Ja||Ja.length!==d*p*4)Ja=ja.pixels=new Float32Array(p*d*4);else for(var ec=0;ec<Ja.length;ec++)Ja[ec]=0;var tc=0,rc=1/0,nc=new Float32Array(o.count()*2),ic=0,uc=[[1/0,1/0],[-1/0,-1/0]];o.each([s[0],s[1],"vx","vy"],function(eh,rh,ah,ih){var oh=a.dataToPoint([eh,rh]);nc[ic++]=oh[0],nc[ic++]=oh[1],uc[0][0]=Math.min(oh[0],uc[0][0]),uc[0][1]=Math.min(oh[1],uc[0][1]),uc[1][0]=Math.max(oh[0],uc[1][0]),uc[1][1]=Math.max(oh[1],uc[1][1]);var uh=Math.sqrt(ah*ah+ih*ih);tc=Math.max(tc,uh),rc=Math.min(rc,uh)}),o.each(["vx","vy"],function(eh,rh,ah){var ih=Math.round((nc[ah*2]-uc[0][0])/(uc[1][0]-uc[0][0])*(p-1)),oh=d-1-Math.round((nc[ah*2+1]-uc[0][1])/(uc[1][1]-uc[0][1])*(d-1)),uh=(oh*p+ih)*4;Ja[uh]=eh/tc*.5+.5,Ja[uh+1]=rh/tc*.5+.5,Ja[uh+3]=1}),ja.width=p,ja.height=d,n.get("coordinateSystem")==="bmap"&&this._fillEmptyPixels(ja),ja.dirty(),this._updatePlanePosition(uc[0],uc[1],n,r),this._updateGradientTexture(o.getVisual("visualMeta"),[rc,tc])},_fillEmptyPixels:function(n){var r=n.pixels,a=n.width,s=n.height;function o(nc,ic,uc){nc=Math.max(Math.min(nc,a-1),0),ic=Math.max(Math.min(ic,s-1),0);var eh=(ic*(a-1)+nc)*4;return r[eh+3]===0?!1:(uc[0]=r[eh],uc[1]=r[eh+1],!0)}function u(nc,ic,uc){uc[0]=nc[0]+ic[0],uc[1]=nc[1]+ic[1]}for(var c=[],p=[],d=[],_=[],ja=[],Ja=0,ec=0;ec<s;ec++)for(var tc=0;tc<a;tc++){var rc=(ec*(a-1)+tc)*4;r[rc+3]===0&&(Ja=c[0]=c[1]=0,o(tc-1,ec,p)&&(Ja++,u(p,c,c)),o(tc+1,ec,d)&&(Ja++,u(d,c,c)),o(tc,ec-1,_)&&(Ja++,u(_,c,c)),o(tc,ec+1,ja)&&(Ja++,u(ja,c,c)),c[0]/=Ja,c[1]/=Ja,r[rc]=c[0],r[rc+1]=c[1]),r[rc+3]=1}},_updateGradientTexture:function(n,r){if(!n||!n.length){this._particleSurface.setGradientTexture(null);return}this._gradientTexture=this._gradientTexture||new graphicGL.Texture2D({image:document.createElement("canvas")});var a=this._gradientTexture,s=a.image;s.width=200,s.height=1;var o=s.getContext("2d"),u=o.createLinearGradient(0,.5,s.width,.5);n[0].stops.forEach(function(c){var p;r[1]===r[0]?p=0:(p=c.value/r[1],p=Math.min(Math.max(p,0),1)),u.addColorStop(p,c.color)}),o.fillStyle=u,o.fillRect(0,0,s.width,s.height),a.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)},_updatePlanePosition:function(n,r,a,s){var o=this._limitInViewportAndFullFill(n,r,a,s);n=o.leftTop,r=o.rightBottom,this._particleSurface.setRegion(o.region),this._planeMesh.position.set((n[0]+r[0])/2,s.getHeight()-(n[1]+r[1])/2,0);var u=r[0]-n[0],c=r[1]-n[1];this._planeMesh.scale.set(u/2,c/2,1),this._particleSurface.resize(Math.max(Math.min(u,2048),1),Math.max(Math.min(c,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(n,r,a,s){var o=[Math.max(n[0],0),Math.max(n[1],0)],u=[Math.min(r[0],s.getWidth()),Math.min(r[1],s.getHeight())];if(a.get("coordinateSystem")==="bmap"){var c=a.getData().getDataExtent(a.coordDimToDataDim("lng")[0]),p=Math.floor(c[1]-c[0])>=359;p&&(o[0]>0&&(o[0]=0),u[0]<s.getWidth()&&(u[0]=s.getWidth()))}var d=r[0]-n[0],_=r[1]-n[1],ja=u[0]-o[0],Ja=u[1]-o[1],ec=[(o[0]-n[0])/d,1-Ja/_-(o[1]-n[1])/_,ja/d,Ja/_];return{leftTop:o,rightBottom:u,region:ec}},_updateCamera:function(n,r,a){this.viewGL.setViewport(0,0,n,r,a);var s=this.viewGL.camera;s.left=s.bottom=0,s.top=r,s.right=n,s.near=0,s.far=100,s.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});function install$1(n){n.registerChartView(FlowGLView),n.registerSeriesModel(FlowGLSeries)}use(install$1);var LinesGLSeries=SeriesModel.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(n){var r=this._processFlatCoordsArray(n.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(n.data=new Float32Array(r.count)),LinesGLSeries.superApply(this,"init",arguments)},mergeOption:function(n){var r=this._processFlatCoordsArray(n.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(n.data=new Float32Array(r.count)),LinesGLSeries.superApply(this,"mergeOption",arguments)},appendData:function(n){var r=this._processFlatCoordsArray(n.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,r.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),n.data=new Float32Array(r.count)),this.getRawData().appendData(n.data)},_getCoordsFromItemModel:function(n){var r=this.getData().getItemModel(n),a=r.option instanceof Array?r.option:r.getShallow("coords");return a},getLineCoordsCount:function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},getLineCoords:function(n,r){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[n*2],s=this._flatCoordsOffset[n*2+1],o=0;o<s;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[a+o*2],r[o][1]=this._flatCoords[a+o*2+1];return s}else{for(var u=this._getCoordsFromItemModel(n),o=0;o<u.length;o++)r[o]=r[o]||[],r[o][0]=u[o][0],r[o][1]=u[o][1];return u.length}},_processFlatCoordsArray:function(n){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),typeof n[0]=="number"){for(var a=n.length,s=new Uint32Array(a),o=new Float64Array(a),u=0,c=0,p=0,d=0;d<a;){p++;var _=n[d++];s[c++]=u+r,s[c++]=_;for(var ja=0;ja<_;ja++){var Ja=n[d++],ec=n[d++];o[u++]=Ja,o[u++]=ec}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,c),flatCoords:o,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},getInitialData:function(n,r){var a=new SeriesData(["value"],this);return a.hasItemOption=!1,a.initData(n.data,[],function(s,o,u,c){if(s instanceof Array)return NaN;a.hasItemOption=!0;var p=s.value;if(p!=null)return p instanceof Array?p[c]:p}),a},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});const LinesGLView=ChartView.extend({type:"linesGL",__ecgl__:!0,init:function(n,r){this.groupGL=new graphicGL.Node,this.viewGL=new ViewGL("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new GLViewHelper(this.viewGL),this._nativeLinesShader=graphicGL.createShader("ecgl.lines3D"),this._meshLinesShader=graphicGL.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(n,r,a){this.groupGL.removeAll(),this._glViewHelper.reset(n,a);var s=this._linesMeshes[0];s||(s=this._linesMeshes[0]=this._createLinesMesh(n)),this._linesMeshes.length=1,this.groupGL.add(s),this._updateLinesMesh(n,s,0,n.getData().count()),this.viewGL.setPostEffect(n.getModel("postEffect"),a)},incrementalPrepareRender:function(n,r,a){this.groupGL.removeAll(),this._glViewHelper.reset(n,a),this._currentStep=0,this.viewGL.setPostEffect(n.getModel("postEffect"),a)},incrementalRender:function(n,r,a,s){var o=this._linesMeshes[this._currentStep];o||(o=this._createLinesMesh(r),this._linesMeshes[this._currentStep]=o),this._updateLinesMesh(r,o,n.start,n.end),this.groupGL.add(o),s.getZr().refresh(),this._currentStep++},updateTransform:function(n,r,a){n.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(n,a)},_createLinesMesh:function(n){var r=new graphicGL.Mesh({$ignorePicking:!0,material:new graphicGL.Material({shader:graphicGL.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new LinesGeometry$1({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:graphicGL.Mesh.LINES,culling:!1});return r},_updateLinesMesh:function(n,r,a,s){var o=n.getData();r.material.blend=n.get("blendMode")==="lighter"?graphicGL.additiveBlend:null;var u=n.get("lineStyle.curveness")||0,c=n.get("polyline"),p=r.geometry,d=n.coordinateSystem,_=retrieve.firstNotNull(n.get("lineStyle.width"),1);_>1?(r.material.shader!==this._meshLinesShader&&r.material.attachShader(this._meshLinesShader),r.mode=graphicGL.Mesh.TRIANGLES):(r.material.shader!==this._nativeLinesShader&&r.material.attachShader(this._nativeLinesShader),r.mode=graphicGL.Mesh.LINES),a=a||0,s=s||o.count(),p.resetOffset();var ja=0,Ja=0,ec=[],tc=[],rc=[],nc=[],ic=[],uc=.3,eh=.7;function rh(){tc[0]=ec[0]*eh+nc[0]*uc-(ec[1]-nc[1])*u,tc[1]=ec[1]*eh+nc[1]*uc-(nc[0]-ec[0])*u,rc[0]=ec[0]*uc+nc[0]*eh-(ec[1]-nc[1])*u,rc[1]=ec[1]*uc+nc[1]*eh-(nc[0]-ec[0])*u}if(c||u!==0)for(var ah=a;ah<s;ah++)if(c){var ih=n.getLineCoordsCount(ah);ja+=p.getPolylineVertexCount(ih),Ja+=p.getPolylineTriangleCount(ih)}else n.getLineCoords(ah,ic),this._glViewHelper.dataToPoint(d,ic[0],ec),this._glViewHelper.dataToPoint(d,ic[1],nc),rh(),ja+=p.getCubicCurveVertexCount(ec,tc,rc,nc),Ja+=p.getCubicCurveTriangleCount(ec,tc,rc,nc);else{var oh=s-a;ja+=oh*p.getLineVertexCount(),Ja+=oh*p.getLineVertexCount()}p.setVertexCount(ja),p.setTriangleCount(Ja);for(var uh=a,ch=[],ah=a;ah<s;ah++){graphicGL.parseColor(getItemVisualColor(o,uh),ch);var hh=retrieve.firstNotNull(getItemVisualOpacity(o,uh),1);ch[3]*=hh;for(var ih=n.getLineCoords(ah,ic),dh=0;dh<ih;dh++)this._glViewHelper.dataToPoint(d,ic[dh],ic[dh]);c?p.addPolyline(ic,ch,_,0,ih):u!==0?(ec=ic[0],nc=ic[1],rh(),p.addCubicCurve(ec,tc,rc,nc,ch,_)):p.addPolyline(ic,ch,_,0,2),uh++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function install(n){n.registerChartView(LinesGLView),n.registerSeriesModel(LinesGLSeries)}use(install);const radius=1,zMin=0;function getParametricEquation(n,r,a,s,o,u,c){let p=(n+r)/2,d=n*Math.PI*2,_=r*Math.PI*2,ja=p*Math.PI*2;n===0&&r===1&&(u=!1);let Ja=u?Math.cos(ja)*.1:0,ec=u?Math.sin(ja)*.1:0,tc=c?1.1:1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(rc,nc){const ic=(Math.cos(nc)>0?a:s)*radius;return rc<d?Ja+Math.cos(d)*ic*tc:rc>_?Ja+Math.cos(_)*ic*tc:Ja+Math.cos(rc)*ic*tc},y:function(rc,nc){const ic=(Math.cos(nc)>0?a:s)*radius;return rc<d?ec+Math.sin(d)*ic*tc:rc>_?ec+Math.sin(_)*ic*tc:ec+Math.sin(rc)*ic*tc},z:function(rc,nc){return rc<-Math.PI/2||rc>Math.PI*5/2?Math.max(Math.cos(rc)*o,zMin):Math.sin(nc)>0?o:zMin}}}function getPie3D(n,r,a,s){r=Number.parseFloat(r),a=Number.parseFloat(a);const o=r/100,u=a/100;let c=n.reduce((rc,nc)=>rc+=nc.value,0);n.forEach(rc=>rc.perValue=rc.value/c);let p=[],d=0,_=0,ja=0,Ja=[],ec=[];for(let rc=0;rc<n.length;rc++){d+=n[rc].perValue;let nc={name:typeof n[rc].name>"u"?`series${rc}`:n[rc].name,type:"surface",parametric:!0,shading:"realistic",wireframe:{show:!1},realisticMaterial:{roughness:.7,metalness:0,textureTiling:[200,20]},pieData:n[rc],pieStatus:{selected:!1,hovered:!1}};if(typeof n[rc].itemStyle<"u"){let ic={};typeof n[rc].itemStyle.color<"u"&&(ic.color=n[rc].itemStyle.color),typeof n[rc].itemStyle.opacity<"u"&&(ic.opacity=n[rc].itemStyle.opacity),nc.itemStyle=ic}p.push(nc)}for(let rc=0;rc<p.length;rc++){ja=_+p[rc].pieData.perValue,p[rc].pieData.startRatio=_/d,p[rc].pieData.endRatio=ja/d,p[rc].parametricEquation=getParametricEquation(p[rc].pieData.startRatio,p[rc].pieData.endRatio,o,u,p[rc].pieData.perValue,p[rc].pieData.selected,p[rc].pieData.hovered),_=ja;let nc=(p[rc].pieData.endRatio+p[rc].pieData.startRatio)*Math.PI,ic=Math.cos(nc)*(1+Math.cos(Math.PI/2))*u,uc=Math.sin(nc)*(1+Math.cos(Math.PI/2))*u,eh=Math.log(Math.abs(p[rc].pieData.perValue+1))*.1,rh=n[rc].itemStyle.color;const ah=.3,ih=.1;let oh=[ic*(1+ah),uc*(1+ah),eh*2],uh=[ic*(1+ah+ih),uc*(1+ah+ih),eh*6];ec.push({type:"line3D",lineStyle:{color:rh},data:[[ic,uc,eh],oh,uh]},{type:"scatter3D",label:{show:!0,distance:0,position:"center",textStyle:{color:"#ffffff",backgroundColor:rh,borderWidth:1,fontSize:14,padding:5,borderRadius:4},formatter:"{b}"},symbolSize:0,data:[{name:p[rc].name+`
`+p[rc].pieData.value,value:uh}]}),Ja.push(p[rc].name)}return s&&(p=p.concat(ec)),p.push({type:"surface",parametric:!0,shading:"realistic",silent:!1,wireframe:{show:!1},realisticMaterial:{roughness:.7,metalness:0,textureTiling:[200,20]},itemStyle:{opacity:1,color:"rgba(50, 100, 200, 0.3)"},parametricEquation:{u:{min:0,max:Math.PI*2,step:Math.PI/32},v:{min:0,max:Math.PI,step:Math.PI/20},x:function(rc,nc){return(Math.sin(nc)*Math.sin(rc)+Math.sin(rc))/Math.PI*1.5},y:function(rc,nc){return(Math.sin(nc)*Math.cos(rc)+Math.cos(rc))/Math.PI*1.5},z:function(rc,nc){return Math.cos(nc)>0?zMin-.01:-.1}}}),{tooltip:{textStyle:{color:"var(--ec-text-color)"},backgroundColor:"var(--ec-background-color)",borderColor:"var(--ec-border-color)",formatter:rc=>{const{seriesName:nc,seriesIndex:ic,color:uc}=rc;let eh=0,rh=n[ic];if(!rh)return;let ah=rh.value;for(let ih=0;ih<n.length;ih++)eh+=Number(n[ih].value);return`
        <span style="color: ${uc}">${nc}</span>
        <b>${rh.value}</b>
        <small>${(ah/eh*100).toFixed(0)}%</small>`}},xAxis3D:{min:-radius,max:radius},yAxis3D:{min:-radius,max:radius},zAxis3D:{min:zMin,max:1},grid3D:{show:!1,viewControl:{autoRotate:!0,maxDistance:100},boxHeight:30,boxWidth:a,boxDepth:a,light:{main:{intensity:1,shadow:!0}}},series:p}}const _sfc_main$3=defineComponent({__name:"PieChart",props:{pOption:{type:Object,default:()=>({})},data:{type:Array,default:()=>[]},autoAction:{type:Boolean,default:!1}},setup(n){const r=n,a=ref();let s=null,o=null,u=null;const c=(uc,eh)=>{const{type:rh,color:ah,lableShow:ih,labelColor:oh,innerRadius:uh,outerRadius:ch,legendTextStyleColor:hh,datasetDimensions:dh,datasetSourceProduct:gh}=uc,fh={color:ah??["hsla(240, 100%, 67%, 1)","hsla(120, 100%, 67%, 1)","hsla(60, 100%, 67%, 1)","hsla(30, 100%, 67%, 1)"],title:{show:!1},tooltip:{trigger:"item",textStyle:{color:"var(--ec-text-color)"},backgroundColor:"var(--ec-background-color)",borderColor:"var(--ec-border-color)",formatter:vh=>`${vh.data[gh]} ${vh.data[dh[0]]}<br />${vh.percent}%`},dataset:{dimensions:["product",...dh],source:eh.map(vh=>(vh.product=vh[gh],vh))},legend:{textStyle:{color:hh??"#aaa"},itemWidth:20,itemHeight:10,icon:"roundRect"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},series:[]};if(fh.series=[{type:"pie",label:{show:ih,color:oh,textBorderColor:"transparent",textBorderWidth:0},radius:[uh,ch]}],rh=="pie")return fh;if(rh=="pie3D"){const vh=eh.map((yh,xh)=>({name:yh[gh],value:yh[dh[0]],itemStyle:{color:ah[xh],opacity:1},selected:yh.selected??!1,hovered:yh.hovered??!1})),ph=getPie3D(vh,uh,ch,ih);return ph.legend=fh.legend,ph.legend.selectedMode=!1,ph}return fh},p=uc=>{if(r.pOption.type!=="pie3D")return;o===uc.seriesIndex?o=null:o=uc.seriesIndex;const eh=r.data.map((rh,ah)=>({...rh,selected:o==ah}));s.setOption(c(r.pOption,eh))},d=uc=>{if(r.pOption.type!=="pie3D"||u===uc.seriesIndex)return;u=uc.seriesIndex;const eh=r.data.map((rh,ah)=>({...rh,selected:o==ah,hovered:u==ah}));s.setOption(c(r.pOption,eh))};watch(r,()=>{s&&(s.clear(),s.setOption(c(r.pOption,r.data),{notMerge:!0}))},{deep:!0});let _=-1,ja=null,Ja=1e3,ec=ref(!0);const tc=function(){if(!ec.value||!s)return;let uc=r.data.length;s.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:_});const eh=(_+1)%uc;_=Number.isNaN(eh)?-1:eh,s.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:_}),s.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:_})};watch(()=>r.autoAction,uc=>{ja&&clearInterval(ja),uc&&(ja=setInterval(tc,Ja))},{immediate:!0});const rc=()=>{nextTick(()=>{s=init$1(a.value),s.setOption(c(r.pOption,r.data)),s.on("click",p),s.on("mousemove",d)})};let nc;const ic=()=>{nc=new window.ResizeObserver(uc=>s==null?void 0:s.resize()),nc.observe(a.value)};return onMounted(()=>{rc(),ic()}),onUnmounted(()=>{s.dispose(),s=null,nc&&nc.disconnect()}),(uc,eh)=>(openBlock(),createElementBlock("div",{ref_key:"chartDomRef",ref:a,style:{width:"100%",height:"100%"},onMouseover:eh[0]||(eh[0]=rh=>isRef(ec)?ec.value=!1:ec=!1),onMouseout:eh[1]||(eh[1]=rh=>isRef(ec)?ec.value=!0:ec=!0)},null,544))}}),PieChartRaw=`<script setup lang="ts">\r
import { nextTick, onMounted, onUnmounted, ref, watch } from 'vue'\r
import * as echarts from 'echarts'\r
import 'echarts-gl'\r
import { getPie3D } from './pie3DOption.js'\r
\r
const props = defineProps({\r
  pOption: {\r
    type: Object,\r
    default: () => ({})\r
  },\r
  data: {\r
    type: Array,\r
    default: () => []\r
  },\r
  autoAction: {\r
    type: Boolean,\r
    default: false\r
  }\r
})\r
\r
const chartDomRef = ref()\r
let chartInstance = null\r
let selectedIndex = null\r
let hoveredIndex = null\r
\r
const generateOption = (pOption, data) => {\r
  const {\r
    type,\r
    color,\r
    lableShow,\r
    labelColor,\r
    innerRadius,\r
    outerRadius,\r
    legendTextStyleColor,\r
    datasetDimensions,\r
    datasetSourceProduct\r
  } = pOption\r
\r
  const opt: any = {\r
    color: color ?? [\r
      'hsla(240, 100%, 67%, 1)',\r
      'hsla(120, 100%, 67%, 1)',\r
      'hsla(60, 100%, 67%, 1)',\r
      'hsla(30, 100%, 67%, 1)'\r
    ],\r
    title: {\r
      show: false\r
    },\r
    tooltip: {\r
      trigger: 'item',\r
      textStyle: {\r
        color: 'var(--ec-text-color)'\r
      },\r
      backgroundColor: 'var(--ec-background-color)',\r
      borderColor: 'var(--ec-border-color)',\r
      formatter: (params) =>\r
        \`\${params.data[datasetSourceProduct]} \${params.data[datasetDimensions[0]]}<br />\${params.percent}%\`\r
    },\r
    dataset: {\r
      dimensions: ['product', ...datasetDimensions],\r
      source: data.map((data: any) => {\r
        data.product = data[datasetSourceProduct]\r
        return data\r
      })\r
    },\r
    legend: {\r
      textStyle: {\r
        color: legendTextStyleColor ?? '#aaa'\r
      },\r
      itemWidth: 20,\r
      itemHeight: 10,\r
      icon: 'roundRect'\r
    },\r
    grid: {\r
      left: '3%',\r
      right: '4%',\r
      bottom: '3%',\r
      containLabel: true\r
    },\r
    series: []\r
  }\r
\r
  opt.series = [\r
    {\r
      type: 'pie',\r
      label: {\r
        show: lableShow,\r
        color: labelColor,\r
        textBorderColor: 'transparent',\r
        textBorderWidth: 0\r
      },\r
      radius: [innerRadius, outerRadius]\r
    }\r
  ]\r
\r
  if (type == 'pie') return opt\r
  else if (type == 'pie3D') {\r
    const pieData = data.map((v, i) => {\r
      return {\r
        name: v[datasetSourceProduct],\r
        value: v[datasetDimensions[0]],\r
        itemStyle: {\r
          color: color[i],\r
          opacity: 1\r
        },\r
        selected: v.selected ?? false,\r
        hovered: v.hovered ?? false\r
      }\r
    })\r
\r
    const opt3D = getPie3D(pieData, innerRadius, outerRadius, lableShow)\r
\r
    opt3D.legend = opt.legend\r
    opt3D.legend.selectedMode = false\r
\r
    return opt3D\r
  }\r
\r
  return opt\r
}\r
\r
const onClick = (params) => {\r
  if (props.pOption.type !== 'pie3D') return\r
\r
  if (selectedIndex === params.seriesIndex) selectedIndex = null\r
  else selectedIndex = params.seriesIndex\r
\r
  const data = props.data.map((element: any, index) => {\r
    return {\r
      ...element,\r
      selected: selectedIndex == index\r
    }\r
  })\r
\r
  chartInstance.setOption(generateOption(props.pOption, data))\r
}\r
\r
const onMouseMove = (params) => {\r
  if (props.pOption.type !== 'pie3D') return\r
  if (hoveredIndex === params.seriesIndex) return\r
\r
  hoveredIndex = params.seriesIndex\r
\r
  const data = props.data.map((element: any, index) => {\r
    return {\r
      ...element,\r
      selected: selectedIndex == index,\r
      hovered: hoveredIndex == index\r
    }\r
  })\r
\r
  chartInstance.setOption(generateOption(props.pOption, data))\r
}\r
\r
watch(\r
  props,\r
  () => {\r
    if (chartInstance) {\r
      chartInstance.clear()\r
      chartInstance.setOption(generateOption(props.pOption, props.data), { notMerge: true })\r
    }\r
  },\r
  { deep: true }\r
)\r
// 轮流选择\r
let currentIndex = -1\r
let intervalAction = null\r
let actionDelay = 1000\r
let actionable = ref(true)\r
\r
const action = function () {\r
  if (!actionable.value || !chartInstance) return\r
\r
  let dataLen = props.data.length\r
\r
  chartInstance.dispatchAction({\r
    type: 'downplay',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
\r
  const index = (currentIndex + 1) % dataLen\r
  currentIndex = Number.isNaN(index) ? -1 : index\r
\r
  chartInstance.dispatchAction({\r
    type: 'highlight',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
  chartInstance.dispatchAction({\r
    type: 'showTip',\r
    seriesIndex: 0,\r
    dataIndex: currentIndex\r
  })\r
}\r
\r
watch(\r
  () => props.autoAction,\r
  (newVal) => {\r
    if (intervalAction) clearInterval(intervalAction)\r
\r
    if (newVal) intervalAction = setInterval(action, actionDelay)\r
  },\r
  {\r
    immediate: true\r
  }\r
)\r
// 初始化\r
const initChart = () => {\r
  nextTick(() => {\r
    chartInstance = echarts.init(chartDomRef.value)\r
    chartInstance.setOption(generateOption(props.pOption, props.data))\r
\r
    chartInstance.on('click', onClick)\r
    chartInstance.on('mousemove', onMouseMove)\r
  })\r
}\r
\r
let resizeObserver\r
const chartResizeObserver = () => {\r
  resizeObserver = new window.ResizeObserver((entries) => chartInstance?.resize())\r
  resizeObserver.observe(chartDomRef.value)\r
}\r
\r
onMounted(() => {\r
  initChart()\r
  chartResizeObserver()\r
})\r
\r
onUnmounted(() => {\r
  chartInstance.dispose()\r
  chartInstance = null\r
  if (resizeObserver) resizeObserver.disconnect()\r
})\r
<\/script>\r
\r
<template>\r
  <div\r
    ref="chartDomRef"\r
    :style="{ width: '100%', height: '100%' }"\r
    @mouseover="actionable = false"\r
    @mouseout="actionable = true"\r
  ></div>\r
</template>\r
\r
<style scoped></style>\r
`,pie3DOptionRaw=`const radius = 1 // 半径\r
const zMin = 0 // 最小z\r
// 生成扇形的曲面参数方程，用于 series-surface.parametricEquation\r
function getParametricEquation(\r
  startRatio,\r
  endRatio,\r
  innerRadiusRatio,\r
  outerRadiusRatio,\r
  height,\r
  isSelected,\r
  isHovered\r
) {\r
  let midRatio = (startRatio + endRatio) / 2\r
\r
  let startRadian = startRatio * Math.PI * 2\r
  let endRadian = endRatio * Math.PI * 2\r
  let midRadian = midRatio * Math.PI * 2\r
\r
  // 如果只有一个扇形，则不实现选中效果。\r
  if (startRatio === 0 && endRatio === 1) {\r
    isSelected = false\r
  }\r
\r
  // 计算选中效果分别在 x 轴、y 轴方向上的位移（未选中，则位移均为 0）\r
  let offsetX = isSelected ? Math.cos(midRadian) * 0.1 : 0\r
  let offsetY = isSelected ? Math.sin(midRadian) * 0.1 : 0\r
\r
  // 计算高亮效果的放大比例（未高亮，则比例为 1）\r
  let hoverRate = isHovered ? 1.1 : 1\r
\r
  // 返回曲面参数方程\r
  return {\r
    u: {\r
      min: -Math.PI,\r
      max: Math.PI * 3,\r
      step: Math.PI / 32\r
    },\r
\r
    v: {\r
      min: 0,\r
      max: Math.PI * 2,\r
      step: Math.PI / 20\r
    },\r
\r
    x: function (u, v) {\r
      const r = (Math.cos(v) > 0 ? innerRadiusRatio : outerRadiusRatio) * radius\r
\r
      if (u < startRadian) {\r
        return offsetX + Math.cos(startRadian) * r * hoverRate\r
      }\r
      if (u > endRadian) {\r
        return offsetX + Math.cos(endRadian) * r * hoverRate\r
      }\r
      return offsetX + Math.cos(u) * r * hoverRate\r
    },\r
\r
    y: function (u, v) {\r
      const r = (Math.cos(v) > 0 ? innerRadiusRatio : outerRadiusRatio) * radius\r
\r
      if (u < startRadian) {\r
        return offsetY + Math.sin(startRadian) * r * hoverRate\r
      }\r
      if (u > endRadian) {\r
        return offsetY + Math.sin(endRadian) * r * hoverRate\r
      }\r
      return offsetY + Math.sin(u) * r * hoverRate\r
    },\r
\r
    z: function (u, v) {\r
      if (u < -Math.PI / 2) {\r
        return Math.max(Math.cos(u) * height, zMin)\r
      }\r
      if (u > (Math.PI * 5) / 2) {\r
        return Math.max(Math.cos(u) * height, zMin)\r
      }\r
      return Math.sin(v) > 0 ? height : zMin\r
    }\r
  }\r
}\r
\r
// 生成模拟 3D 饼图的配置项\r
/**\r
 *\r
 * @param {Array} pieData\r
 * @param {String} innerRadius - 内径百分比\r
 * @param {String} outerRadius - 外径百分比\r
 * @returns\r
 */\r
export function getPie3D(pieData, innerRadius, outerRadius, lableShow) {\r
  innerRadius = Number.parseFloat(innerRadius)\r
  outerRadius = Number.parseFloat(outerRadius)\r
\r
  const innerRadiusRatio = innerRadius / 100\r
  const outerRadiusRatio = outerRadius / 100\r
\r
  let total = pieData.reduce((total, item) => (total += item.value), 0)\r
\r
  pieData.forEach((item) => (item.perValue = item.value / total))\r
\r
  let series = []\r
  let sumValue = 0\r
  let startValue = 0\r
  let endValue = 0\r
  let legendData = []\r
  let linesSeries = [] // line3D模拟label指示线\r
\r
  // 为每一个饼图数据，生成一个 series-surface 配置\r
  for (let i = 0; i < pieData.length; i++) {\r
    sumValue += pieData[i].perValue\r
\r
    let seriesItem = {\r
      name: typeof pieData[i].name === 'undefined' ? \`series\${i}\` : pieData[i].name,\r
      type: 'surface',\r
      parametric: true,\r
      shading: 'realistic',\r
      wireframe: {\r
        show: false\r
      },\r
      realisticMaterial: {\r
        roughness: 0.7,\r
        metalness: 0,\r
        textureTiling: [200, 20]\r
      },\r
      pieData: pieData[i],\r
      pieStatus: {\r
        selected: false,\r
        hovered: false\r
      }\r
    }\r
\r
    if (typeof pieData[i].itemStyle != 'undefined') {\r
      let itemStyle = {}\r
\r
      typeof pieData[i].itemStyle.color != 'undefined'\r
        ? (itemStyle.color = pieData[i].itemStyle.color)\r
        : null\r
      typeof pieData[i].itemStyle.opacity != 'undefined'\r
        ? (itemStyle.opacity = pieData[i].itemStyle.opacity)\r
        : null\r
\r
      seriesItem.itemStyle = itemStyle\r
    }\r
    series.push(seriesItem)\r
  }\r
  // 使用上一次遍历时，计算出的数据和 sumValue，调用 getParametricEquation 函数，\r
  // 向每个 series-surface 传入不同的参数方程 series-surface.parametricEquation，也就是实现每一个扇形。\r
  for (let i = 0; i < series.length; i++) {\r
    endValue = startValue + series[i].pieData.perValue\r
    series[i].pieData.startRatio = startValue / sumValue\r
    series[i].pieData.endRatio = endValue / sumValue\r
    series[i].parametricEquation = getParametricEquation(\r
      series[i].pieData.startRatio,\r
      series[i].pieData.endRatio,\r
      innerRadiusRatio,\r
      outerRadiusRatio,\r
      series[i].pieData.perValue,\r
      series[i].pieData.selected,\r
      series[i].pieData.hovered\r
    )\r
    startValue = endValue\r
\r
    // 计算label指示线的起始和终点位置\r
    let midRadian = (series[i].pieData.endRatio + series[i].pieData.startRatio) * Math.PI\r
    let posX = Math.cos(midRadian) * (1 + Math.cos(Math.PI / 2)) * outerRadiusRatio\r
    let posY = Math.sin(midRadian) * (1 + Math.cos(Math.PI / 2)) * outerRadiusRatio\r
    let posZ = Math.log(Math.abs(series[i].pieData.perValue + 1)) * 0.1\r
    let color = pieData[i].itemStyle.color\r
    const length = 0.3\r
    const length2 = 0.1\r
\r
    let turningPosArr = [posX * (1 + length), posY * (1 + length), posZ * 2]\r
    let endPosArr = [posX * (1 + length + length2), posY * (1 + length + length2), posZ * 6]\r
\r
    linesSeries.push(\r
      {\r
        type: 'line3D',\r
        lineStyle: {\r
          color: color\r
        },\r
        data: [[posX, posY, posZ], turningPosArr, endPosArr]\r
      },\r
      {\r
        type: 'scatter3D',\r
        label: {\r
          show: true,\r
          distance: 0,\r
          position: 'center',\r
          textStyle: {\r
            color: '#ffffff',\r
            backgroundColor: color,\r
            borderWidth: 1,\r
            fontSize: 14,\r
            padding: 5,\r
            borderRadius: 4\r
          },\r
          formatter: '{b}'\r
        },\r
        symbolSize: 0,\r
        data: [{ name: series[i].name + '\\n' + series[i].pieData.value, value: endPosArr }]\r
      }\r
    )\r
    legendData.push(series[i].name)\r
  }\r
\r
  if (lableShow) series = series.concat(linesSeries)\r
\r
  // 最底下圆盘\r
  series.push({\r
    type: 'surface',\r
    parametric: true,\r
    shading: 'realistic',\r
    silent: false,\r
    wireframe: {\r
      show: false\r
    },\r
    realisticMaterial: {\r
      roughness: 0.7,\r
      metalness: 0,\r
      textureTiling: [200, 20]\r
    },\r
    itemStyle: {\r
      opacity: 1,\r
      color: 'rgba(50, 100, 200, 0.3)'\r
    },\r
    parametricEquation: {\r
      u: {\r
        min: 0,\r
        max: Math.PI * 2,\r
        step: Math.PI / 32\r
      },\r
      v: {\r
        min: 0,\r
        max: Math.PI,\r
        step: Math.PI / 20\r
      },\r
      x: function (u, v) {\r
        return ((Math.sin(v) * Math.sin(u) + Math.sin(u)) / Math.PI) * 1.5\r
      },\r
      y: function (u, v) {\r
        return ((Math.sin(v) * Math.cos(u) + Math.cos(u)) / Math.PI) * 1.5\r
      },\r
      z: function (u, v) {\r
        return Math.cos(v) > 0 ? zMin - 0.01 : -0.1\r
      }\r
    }\r
  })\r
\r
  let option = {\r
    tooltip: {\r
      textStyle: {\r
        color: 'var(--ec-text-color)'\r
      },\r
      backgroundColor: 'var(--ec-background-color)',\r
      borderColor: 'var(--ec-border-color)',\r
      formatter: (params) => {\r
        const { seriesName, seriesIndex, color } = params\r
\r
        let total = 0\r
        let obj = pieData[seriesIndex]\r
\r
        if (!obj) return\r
\r
        let target = obj.value\r
        for (let i = 0; i < pieData.length; i++) {\r
          total += Number(pieData[i].value)\r
        }\r
\r
        return \`\r
        <span style="color: \${color}">\${seriesName}</span>\r
        <b>\${obj.value}</b>\r
        <small>\${((target / total) * 100).toFixed(0)}%</small>\`\r
      }\r
    },\r
    xAxis3D: {\r
      min: -radius,\r
      max: radius\r
    },\r
    yAxis3D: {\r
      min: -radius,\r
      max: radius\r
    },\r
    zAxis3D: {\r
      min: zMin,\r
      max: 1\r
    },\r
    grid3D: {\r
      show: false,\r
      viewControl: {\r
        autoRotate: true, // 自动旋转\r
        maxDistance: 100\r
      },\r
      boxHeight: 30,\r
      boxWidth: outerRadius,\r
      boxDepth: outerRadius,\r
      light: {\r
        main: {\r
          intensity: 1,\r
          shadow: true\r
        }\r
      }\r
    },\r
    series: series\r
  }\r
  return option\r
}\r
`;class NPieChart extends ItemNode{constructor(node){super(node);Zp(this,"isNPieChart",!0);Zp(this,"isChartNode",!0);if(this.watchStateOptions.push({value:"initData",label:"刷新数据"}),!node){this.path="./components/NPieChart/NPieChart.tsx",this.name="饼图";const r=this.props.style;this.props.style={...r,width:"300px",height:"200px",flexShrink:"0"},this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [{
    product: String,
    default1: Number
  }]
}`,this.props.autoAction=!1,this.props.pOption={type:"pie",color:["hsla(320, 100%, 67%, 1)","hsla(160, 100%, 67%, 1)","hsla(80, 100%, 67%, 1)","hsla(40, 100%, 67%, 1)"],innerRadius:"0%",outerRadius:"75%",legendTextStyleColor:"#333",lableShow:!1,labelColor:"#333",datasetDimensions:["default1"],datasetSourceProduct:"product"}}const pComponent=this.component;this.component=markRaw(defineComponent(props=>{const data=ref([{product:"defaultA",default1:2},{product:"defaultB",default1:5},{product:"defaultC",default1:4},{product:"defaultD",default1:6}]),initData=async()=>{this.props.dataUrl&&(data.value=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(data.value=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(_sfc_main$3,{pOption:this.props.pOption,data:data.value,autoAction:this.props.autoAction},null)]})},{name:"NPieChart"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.3, 0.3)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":r=>this.props.dataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("饼图类型")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.pOption.type,"onUpdate:modelValue":r=>this.props.pOption.type=r,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"pie",label:"普通",size:"small"},null),createVNode$1(ElRadioButton,{value:"pie3D",label:"3D",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("名字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.datasetSourceProduct,"onUpdate:modelValue":r=>this.props.pOption.datasetSourceProduct=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.datasetDimensions[0],"onUpdate:modelValue":r=>this.props.pOption.datasetDimensions[0]=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("内半径百分比")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.innerRadius,"onUpdate:modelValue":r=>this.props.pOption.innerRadius=r||"0%",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("外半径百分比")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.pOption.outerRadius,"onUpdate:modelValue":r=>this.props.pOption.outerRadius=r||"75%",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("图例字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.pOption.legendTextStyleColor,"onUpdate:modelValue":r=>this.props.pOption.legendTextStyleColor=r||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("显示标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pOption.lableShow,"onUpdate:modelValue":r=>this.props.pOption.lableShow=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.pOption.labelColor,"onUpdate:modelValue":r=>this.props.pOption.labelColor=r||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("调色盘")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.pOption.color.map((r,a)=>createVNode$1(ElColorPicker,{modelValue:this.props.pOption.color[a],"onUpdate:modelValue":s=>this.props.pOption.color[a]=s||"","color-format":"hsl","show-alpha":!0,size:"small",teleported:!1},null)),createVNode$1(ElButton,{type:"primary",icon:plus$1,circle:!0,onClick:()=>this.props.pOption.color.push("#5af"),size:"small"},null),createVNode$1(ElButton,{type:"danger",icon:minus$1,circle:!0,onClick:()=>this.props.pOption.color.pop(),size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("轮流选择")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.autoAction,"onUpdate:modelValue":r=>this.props.autoAction=r,size:"small"},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_pOption`,c=`${a}_${s}_data`,p=`${a}_${s}_initData`,d=JSON.stringify(this.props.pOption);return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"./imports/PieChart.vue":{default:"PieChart"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"PieChart.vue":PieChartRaw,"pie3DOption.js":pie3DOptionRaw,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref(${d})
const ${c} = ref([])
const ${p} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${p}()
${this.props.watchState.length>0?`
${this.props.watchState.map(_=>{if(_.type=="initData")return`watch(() => state.${_.stateProperty}, ${p})`}).join(`
`)}
    `:""}
      `,r.template=r.template.replace("<slot></slot>",`
  <PieChart :pOption="${u}" :data="${c}" :autoAction="${this.props.autoAction}"></PieChart>
      `),r}}function _isSlot$3(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!isVNode(n)}class NRadio extends ItemNode{constructor(node){super(node);Zp(this,"isNRadio",!0);Zp(this,"isFormNode",!0);this.watchStateOptions.push({value:"initData",label:"刷新数据"}),node||(this.path="./components/NRadio/NRadio.tsx",this.name="单选框",this.props.field=`${NRadio.name.replace(/^N(\w)/,(r,a)=>a.toLowerCase())}_${this.uuid.split("-").at(0)}`,this.props.value="",this.props.options=[{id:Math.random(),label:"默认选项1",value:1},{id:Math.random(),label:"默认选项2",value:2}],this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [
    {
      id: String,
      label: String,
      value: String
    }
  ]
}`,this.props.label="",this.props.ruleMessage="请正确输入",this.props.ruleType="none",this.props.changeFn=`function (value) {
  value
}`);const rulesOptions=reactive([{label:"无验证",value:"none"},{label:"默认验证",value:"default"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const rule=computed(()=>generateRule(this.props.ruleType,this.props.ruleMessage)),initData=async()=>{this.props.dataUrl&&(this.props.options=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(this.props.options=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0});const onChange=value=>{eval(`(${this.props.changeFn})`)(value)};return onChange(this.props.value),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>{let r;return createVNode$1(pComponent,null,{default:()=>[createVNode$1(ElFormItem,{label:this.props.label,prop:this.props.field,rules:rule.value},{default:()=>[createVNode$1(ElRadioGroup,{modelValue:this.props.value,"onUpdate:modelValue":a=>this.props.value=a,onChange},_isSlot$3(r=this.props.options.map(a=>createVNode$1(ElRadio,{key:a.id,label:a.label,value:a.value},null)))?r:{default:()=>[r]})]})]})}},{name:"NRadio"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.7)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.field,"onUpdate:modelValue":r=>this.props.field=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.label,"onUpdate:modelValue":r=>this.props.label=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{const r={id:Math.random(),label:"新选项",value:"值"};this.props.options.push(r)}},{default:()=>[createTextVNode("+ 添加选项")]}),createVNode$1(ElTree,{data:this.props.options,"node-key":"id","default-expand-all":!0,"expand-on-click-node":!1},{default:({node:r,data:a})=>createVNode$1("span",{style:{flex:"1",display:"flex",justifyContent:"space-between"}},[createVNode$1("span",null,[a.label]),createVNode$1("span",null,[createVNode$1(ElPopover,{width:180,trigger:"click",teleported:!1,placement:"left"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-primary)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>createVNode$1(ElForm,{"label-width":"50px"},{default:()=>[createVNode$1(ElFormItem,{label:"标签"},{default:()=>[createVNode$1(ElInput,{modelValue:a.label,"onUpdate:modelValue":s=>a.label=s},null)]}),createVNode$1(ElFormItem,{label:"值"},{default:()=>[createVNode$1(ElInput,{modelValue:a.value,"onUpdate:modelValue":s=>a.value=s},null)]})]})}),h$1(ElIcon,{color:"var(--el-color-danger)",onClick:()=>{const s=r.parent,o=s.data.children||s.data,u=o.findIndex(c=>c.value===a.value);o.splice(u,1)}},{default:()=>createVNode$1(_delete,null,null)})])])})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":r=>this.props.dataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证规则")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.ruleType,"onUpdate:modelValue":r=>this.props.ruleType=r,size:"small",teleported:!1},{default:()=>rulesOptions.map(r=>createVNode$1(ElOption,{key:r.value,label:r.label,value:r.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证消息")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.ruleMessage,"onUpdate:modelValue":r=>this.props.ruleMessage=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值变化处理函数"),createVNode$1(_sfc_main$d,{content:"值变化后调用；可访问全局状态变量state，value：组件的值"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.changeFn,"onUpdate:modelValue":r=>this.props.changeFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_value`,c=`${a}_${s}_options`,p=`${a}_${s}_rule`,d=`${a}_${s}_initData`,_=`${a}_${s}_onChange`,ja=JSON.stringify(this.props.options),Ja=JSON.stringify(generateRule(this.props.ruleType,this.props.ruleMessage));return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"element-plus":{ElFormItem:"ElFormItem",ElRadioGroup:"ElRadioGroup",ElRadio:"ElRadio"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref()
const ${c} = ref(${ja})
const ${p} = ref(${Ja})
${this.props.dataUrl?`const ${d} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${d}()`:""}
${this.props.watchState.length>0?`
${this.props.watchState.map(ec=>{if(ec.type=="initData")return`watch(() => state.${ec.stateProperty}, ${d})`}).join(`
`)}
    `:""}
const ${_} = (value) => {
  (${this.props.changeFn})(value)
}
${_}(${typeof this.props.value=="string"?`'${this.props.value}'`:this.props.value})
      `,r.template=r.template.replace("<slot></slot>",`
  <ElFormItem label="${this.props.label}" prop="${this.props.field}" :rules="${p}">
    <ElRadioGroup
      v-model="${u}"
      @change="${_}"
    >
      <ElRadio
        v-for="option of ${c}"
        :key="option.id"
        :label="option.label"
        :value="option.value"
      ></ElRadio>
    </ElRadioGroup>
  </ElFormItem>
      `),r}}const routerState=ref([]),pushState=n=>(routerState.value.push(n),n);function _isSlot$2(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!isVNode(n)}class NText extends ItemNode{constructor(node){super(node);Zp(this,"isNText",!0);Zp(this,"isDataNode",!0);Zp(this,"styleDisplay","inline-block");this.watchStateOptions.push({value:"initData",label:"刷新数据"}),node||(this.path="./components/NText/NText.tsx",this.name="文本",this.props.style={...this.props.style,display:this.styleDisplay,maxWidth:"100%"},this.props.textStyle={display:"inline-block",width:"100%",fontSize:"16px",textAlign:"start",textAlignLast:"start",textIndent:"0",wordSpacing:"normal",textShadow:"0px 0px 0px rgba(0, 0, 0, 0)"},this.props.dataUrl="",this.props.dataFn=`function (res) {
  return String
}`,this.props.content="文本内容",this.props.tag="span",this.props.truncated=!1,this.props.lineClamp=null,this.props.color=["#333"],this.props.textShadow={color:"rgba(0, 0, 0, 0)",blurRadius:"10px"}),watch([()=>this.props.truncated,()=>this.props.lineClamp],([r,a])=>{Object.assign(this.props.textStyle,{display:"inline-block",textOverflow:"initial",whiteSpace:"initial","-webkit-box-orient":"initial","-webkit-line-clamp":"initial",overflow:"initial"}),a==null?r&&Object.assign(this.props.textStyle,{display:"inline-block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}):Object.assign(this.props.textStyle,{display:"-webkit-inline-box","-webkit-box-orient":"vertical","-webkit-line-clamp":a,overflow:"hidden"})}),watch(()=>this.props.color,r=>{(r==null?void 0:r.length)>1?(this.props.textStyle.color="transparent",this.props.textStyle.backgroundImage=`linear-gradient(${r.map(a=>a).join(", ")})`,this.props.textStyle.backgroundClip="text"):(r==null?void 0:r.length)==1&&(this.props.textStyle.color=r[0])},{deep:!0,immediate:!0});const tagOptions=reactive([{label:"默认",value:"span"},{label:"段落",value:"p"},{label:"加粗",value:"b"},{label:"斜体",value:"i"},{label:"下标",value:"sub"},{label:"上标",value:"sup"},{label:"下划线",value:"ins"},{label:"删除线",value:"del"},{label:"标记",value:"mark"}]),textAlignOptions=reactive([{label:"左",value:"start"},{label:"右",value:"end"},{label:"居中",value:"center"},{label:"两侧对齐",value:"justify"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const initData=async()=>{this.props.dataUrl&&(this.props.content="",await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);this.props.content=resData}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>{let r;return createVNode$1(pComponent,null,_isSlot$2(r=h$1(this.props.tag,{style:this.props.textStyle},this.props.content))?r:{default:()=>[r]})}},{name:"NText"}));const pView=this.view;this.view=markRaw(defineComponent(r=>(this.props.color=["#aaa"],()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{width:"100px",transform:"scale(0.8)"}},null)]}))));const pParams=this.params;this.params=markRaw(defineComponent(()=>{const r=()=>{if(this.props.textShadow.color)return this.props.textStyle.textShadow=`0px 0px ${this.props.textShadow.blurRadius} ${this.props.textShadow.color}`;delete this.props.textStyle.textShadow};return()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("元素标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.tag,"onUpdate:modelValue":a=>this.props.tag=a,size:"small",teleported:!1},{default:()=>tagOptions.map(a=>createVNode$1(ElOption,{key:a.value,label:a.label,value:a.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("内容")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.content,"onUpdate:modelValue":a=>this.props.content=a,type:"textarea",autosize:!0,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("内容数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":a=>this.props.dataUrl=a||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":a=>this.props.dataFn=a||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字体大小")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.textStyle.fontSize,"onUpdate:modelValue":a=>this.props.textStyle.fontSize=a,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字间距")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.textStyle.letterSpacing,"onUpdate:modelValue":a=>this.props.textStyle.letterSpacing=a,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字体颜色")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.props.color.map((a,s)=>createVNode$1(ElColorPicker,{modelValue:this.props.color[s],"onUpdate:modelValue":o=>this.props.color[s]=o||"","show-alpha":!0,size:"small",teleported:!1},null)),createVNode$1(ElButton,{type:"primary",icon:plus$1,circle:!0,onClick:()=>this.props.color.push("#333"),size:"small"},null),createVNode$1(ElButton,{type:"danger",icon:minus$1,circle:!0,onClick:()=>this.props.color.pop(),size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("阴影")]}),createVNode$1("div",{class:classes["params-item-content"]},[createTextVNode("颜色："),createVNode$1(ElColorPicker,{modelValue:this.props.textShadow.color,"onUpdate:modelValue":a=>this.props.textShadow.color=a||"","show-alpha":!0,size:"small",teleported:!1,onChange:r},null),createTextVNode("  范围："),createVNode$1(ElInput,{style:{width:"50px"},modelValue:this.props.textShadow.blurRadius,"onUpdate:modelValue":a=>this.props.textShadow.blurRadius=a,size:"small",onChange:r},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("水平对齐")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.textStyle.textAlign,"onUpdate:modelValue":a=>this.props.textStyle.textAlign=this.props.textStyle.textAlignLast=a,size:"small"},{default:()=>textAlignOptions.map(a=>createVNode$1(ElRadioButton,{key:a.value,label:a.label,value:a.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("最大行数")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.lineClamp,"onUpdate:modelValue":a=>this.props.lineClamp=a,min:1,step:1,size:"small"},null)])]),this.props.lineClamp==null?createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("显示省略号")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.truncated,"onUpdate:modelValue":a=>this.props.truncated=a},null)])]):createVNode$1(Fragment,null,null),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("缩进")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:Number.parseInt(this.props.textStyle.textIndent),"onUpdate:modelValue":a=>this.props.textStyle.textIndent=`${a||0}em`,min:0,step:1,size:"small"},null)])])]})}))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_content`,c=`${a}_${s}_initData`,p=`${camel2Kebab(a)}-${o}`;return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"./imports/request.js":{default:"request"},"./imports/store.js":{state:"state"}},r.importFiles={...r.importFiles,"request.js":requestRaw},r.script=`
${r.script}
${this.props.dataUrl?`
  const ${u} = ref('${this.props.content??""}')
  const ${c} = async () => {
  ${u}.value = ''

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${u}.value = (${this.props.dataFn||'() => ""'})(res)
  })
}
${c}()`:""}
${this.props.watchState.length>0?`
${this.props.watchState.map(d=>{if(d.type=="initData")return`watch(() => state.${d.stateProperty}, ${c})`}).join(`
`)}
    `:""}
      `,r.template=r.template.replace("<slot></slot>",`
  <${this.props.tag} class="${p}-content">${this.props.dataUrl?`{{${u}}}`:this.props.content}</${this.props.tag}>
      `),r.style+=`
.${p}-content ${obj2Style(toRaw(this.props.textStyle))}
      `,r}}class NRouterLink extends ContainerNode{constructor(a){super(a);Zp(this,"isNRouterLink",!0);Zp(this,"isNavigationNode",!0);Zp(this,"styleDisplay","inline-block");if(!a){this.path="./components/NRouterLink/NRouterLink.tsx",this.name="导航链接";const c=this.props.style;this.props.style={...c,display:this.styleDisplay,cursor:"pointer",minWidth:"32px",minHeight:"16px"},this.props.routeName="",this.props.underline=!1}const s=this.component;this.component=markRaw(defineComponent(c=>()=>createVNode$1(s,{onClick:()=>pushState(this.props.routeName)},{default:()=>[createVNode$1(ElLink,{underline:this.props.underline},{default:()=>this.children.map((p,d)=>h$1(p.component,{key:p.uuid}))})]}),{name:"NRouterLink"}));const o=this.view;this.view=markRaw(defineComponent(c=>{const p=new NText;return p.props.content="内容",p.props.color=["#aaa"],this.add(p),()=>createVNode$1(o,null,null)}));const u=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(u,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("路由名"),createVNode$1(_sfc_main$d,{content:"页面名（导出vue时填url地址）"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.routeName,"onUpdate:modelValue":c=>this.props.routeName=c,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("下划线")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.underline,"onUpdate:modelValue":c=>this.props.underline=c,size:"small"},null)])])]})))}toVue(){const a=super.toVue();return a.imports={...a.imports,"element-plus":{ElLink:"ElLink"}},a.template=a.template.replace("<slot></slot>",`
  <ElLink :underline="${this.props.underline}" href="${this.props.routeName}">
    ${this.children.map(s=>s.uuid).join(`
  `)}
  </ElLink>
      `),a}}function _isSlot$1(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!isVNode(n)}class NRow extends ContainerNode{constructor(a){super(a);Zp(this,"isNRow",!0);Zp(this,"isLayoutNode",!0);a||(this.path="./components/NRow/NRow.tsx",this.name="24栏容器",this.props.gutter=0,this.props.justify="start",this.props.align="top");const s=this.component;this.component=markRaw(defineComponent(c=>()=>createVNode$1(s,null,{default:()=>[createVNode$1(ElRow,{style:"box-sizing: border-box;",gutter:this.props.gutter,justify:this.props.justify,align:this.props.align},{default:()=>{let p;return createVNode$1(TransitionGroup,{name:"list"},_isSlot$1(p=this.children.map((d,_)=>{var ja;return h$1(ElCol,{key:d.uuid,span:(ja=d.props).span??(ja.span=24)},()=>h$1(d.component))}))?p:{default:()=>[p]})}})]}),{name:"NRow"}));const o=this.view;this.view=markRaw(defineComponent(c=>(this.props.style.outlineColor="transparent",()=>createVNode$1(o,null,null))));const u=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(u,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("水平排列")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.justify,"onUpdate:modelValue":c=>this.props.justify=c},{default:()=>[createVNode$1(ElRadioButton,{value:"start",label:"起",size:"small"},null),createVNode$1(ElRadioButton,{value:"center",label:"中",size:"small"},null),createVNode$1(ElRadioButton,{value:"end",label:"止",size:"small"},null),createVNode$1(ElRadioButton,{value:"space-around",label:"半均分",size:"small"},null),createVNode$1(ElRadioButton,{value:"space-evenly",label:"均分",size:"small"},null),createVNode$1(ElRadioButton,{value:"space-between",label:"两端对齐",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("垂直排列方式")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.align,"onUpdate:modelValue":c=>this.props.align=c},{default:()=>[createVNode$1(ElRadioButton,{value:"top",label:"上",size:"small"},null),createVNode$1(ElRadioButton,{value:"middle",label:"中",size:"small"},null),createVNode$1(ElRadioButton,{value:"bottom",label:"下",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("栅格间隔")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.gutter,"onUpdate:modelValue":c=>this.props.gutter=c,min:0,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("列宽管理")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.children.map(c=>createVNode$1(ElTag,{key:c.id,type:"primary",effect:"dark",size:"small"},{default:()=>[c.props.span,createVNode$1(ElPopover,{width:180,trigger:"click",teleported:!1,placement:"top"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-warning)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"50px"},{default:()=>[createVNode$1(ElFormItem,{label:"列宽"},{default:()=>[createVNode$1(ElInputNumber,{modelValue:c.props.span,"onUpdate:modelValue":p=>c.props.span=p,min:1,max:24,size:"small"},null)]})]})])})]}))])])]})))}toVue(){const a=super.toVue();return a.imports={...a.imports,"element-plus":{ElRow:"ElRow",ElCol:"ElCol"}},a.template=a.template.replace("<slot></slot>",`
  <ElRow
    :gutter="${this.props.gutter}"
    justify="${this.props.justify}"
    align="${this.props.align}"
  >
    ${this.children.map((s,o)=>`<ElCol :span="${s.props.span}">
      ${s.uuid}
    </ElCol>`).join(`
  `)}
  </ElRow>
       `),a}}function _isSlot(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!isVNode(n)}class NSelect extends ItemNode{constructor(node){super(node);Zp(this,"isNSelect",!0);Zp(this,"isFormNode",!0);this.watchStateOptions.push({value:"initData",label:"刷新数据"}),node||(this.path="./components/NSelect/NSelect.tsx",this.name="选择器",this.props.field=`${NSelect.name.replace(/^N(\w)/,(r,a)=>a.toLowerCase())}_${this.uuid.split("-").at(0)}`,this.props.value="",this.props.options=[{id:Math.random(),label:"默认选项1",value:1},{id:Math.random(),label:"默认选项2",value:2}],this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [
    {
      id: String,
      label: String,
      value: String
    }
  ]
}`,this.props.label="",this.props.placeholder="请选择",this.props.multiple=!1,this.props.ruleMessage="请正确输入",this.props.ruleType="none",this.props.changeFn=`function (value) {
  value
}`);const rulesOptions=reactive([{label:"无验证",value:"none"},{label:"默认验证",value:"default"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const rule=computed(()=>generateRule(this.props.ruleType,this.props.ruleMessage)),initData=async()=>{this.props.dataUrl&&(this.props.options=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(this.props.options=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0});const onChange=value=>{eval(`(${this.props.changeFn})`)(value)};return onChange(this.props.value),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>{let r;return createVNode$1(pComponent,null,{default:()=>[createVNode$1(ElFormItem,{label:this.props.label,prop:this.props.field,rules:rule.value},{default:()=>[createVNode$1(ElSelect,{placeholder:this.props.placeholder,multiple:this.props.multiple,modelValue:this.props.value,teleported:!1,"onUpdate:modelValue":a=>this.props.value=a,onChange},_isSlot(r=this.props.options.map(a=>createVNode$1(ElOption,{key:a.id,label:a.label,value:a.value},null)))?r:{default:()=>[r]})]})]})}},{name:"NSelect"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{width:"100px",transform:"scale(0.8)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.field,"onUpdate:modelValue":r=>this.props.field=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.label,"onUpdate:modelValue":r=>this.props.label=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{const r={id:Math.random(),label:"新选项",value:"值"};this.props.options.push(r)}},{default:()=>[createTextVNode("+ 添加选项")]}),createVNode$1(ElTree,{data:this.props.options,"node-key":"id","default-expand-all":!0,"expand-on-click-node":!1},{default:({node:r,data:a})=>createVNode$1("span",{style:{flex:"1",display:"flex",justifyContent:"space-between"}},[createVNode$1("span",null,[a.label]),createVNode$1("span",null,[createVNode$1(ElPopover,{width:180,trigger:"click",teleported:!1,placement:"left"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-primary)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"50px"},{default:()=>[createVNode$1(ElFormItem,{label:"标签"},{default:()=>[createVNode$1(ElInput,{modelValue:a.label,"onUpdate:modelValue":s=>a.label=s},null)]}),createVNode$1(ElFormItem,{label:"值"},{default:()=>[createVNode$1(ElInput,{modelValue:a.value,"onUpdate:modelValue":s=>a.value=s},null)]})]})])}),h$1(ElIcon,{color:"var(--el-color-danger)",onClick:()=>{const s=r.parent,o=s.data.children||s.data,u=o.findIndex(c=>c.value===a.value);o.splice(u,1)}},{default:()=>createVNode$1(_delete,null,null)})])])})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":r=>this.props.dataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("占位文本")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.placeholder,"onUpdate:modelValue":r=>this.props.placeholder=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("多选")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.multiple,"onUpdate:modelValue":r=>{this.props.multiple=r,r?this.props.value=[]:this.props.value=""}},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证规则")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.ruleType,"onUpdate:modelValue":r=>this.props.ruleType=r,size:"small",teleported:!1},{default:()=>rulesOptions.map(r=>createVNode$1(ElOption,{key:r.value,label:r.label,value:r.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证消息")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.ruleMessage,"onUpdate:modelValue":r=>this.props.ruleMessage=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值变化处理函数"),createVNode$1(_sfc_main$d,{content:"值变化后调用；可访问全局状态变量state，value：组件的值"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.changeFn,"onUpdate:modelValue":r=>this.props.changeFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_value`,c=`${a}_${s}_options`,p=`${a}_${s}_rule`,d=`${a}_${s}_initData`,_=`${a}_${s}_onChange`,ja=JSON.stringify(this.props.options),Ja=JSON.stringify(generateRule(this.props.ruleType,this.props.ruleMessage));return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"element-plus":{ElFormItem:"ElFormItem",ElSelect:"ElSelect",ElOption:"ElOption"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ${this.props.multiple?"ref([])":"ref('')"}
const ${c} = ref(${ja})
const ${p} = ref(${Ja})
${this.props.dataUrl?`const ${d} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${d}()`:""}
${this.props.watchState.length>0?`
${this.props.watchState.map(ec=>{if(ec.type=="initData")return`watch(() => state.${ec.stateProperty}, ${d})`}).join(`
`)}
    `:""}
const ${_} = (value) => {
  (${this.props.changeFn})(value)
}
${_}(${typeof this.props.value=="string"?`'${this.props.value}'`:this.props.value})
      `,r.template=r.template.replace("<slot></slot>",`
  <ElFormItem label="${this.props.label}" prop="${this.props.field}" :rules="${p}">
    <ElSelect
      v-model="${u}"
      :multiple="${this.props.multiple}"
      placeholder="${this.props.placeholder}"
      :teleported="false"
      @change="${_}"
    >
      <ElOption
        v-for="option of ${c}"
        :key="option.id"
        :label="option.label"
        :value="option.value"
      ></ElOption>
    </ElSelect>
  </ElFormItem>
       `),r}}function tryOnScopeDispose(n){return getCurrentScope()?(onScopeDispose(n),!0):!1}function toValue(n){return typeof n=="function"?n():unref(n)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function promiseTimeout(n,r=!1,a="Timeout"){return new Promise((s,o)=>{setTimeout(r?()=>o(a):s,n)})}function identity(n){return n}function createEasingFunction([n,r,a,s]){const o=(ja,Ja)=>1-3*Ja+3*ja,u=(ja,Ja)=>3*Ja-6*ja,c=ja=>3*ja,p=(ja,Ja,ec)=>((o(Ja,ec)*ja+u(Ja,ec))*ja+c(Ja))*ja,d=(ja,Ja,ec)=>3*o(Ja,ec)*ja*ja+2*u(Ja,ec)*ja+c(Ja),_=ja=>{let Ja=ja;for(let ec=0;ec<4;++ec){const tc=d(Ja,n,a);if(tc===0)return Ja;const rc=p(Ja,n,a)-ja;Ja-=rc/tc}return Ja};return ja=>n===r&&a===s?ja:p(_(ja),r,s)}function lerp(n,r,a){return n+a*(r-n)}function toVec(n){return(typeof n=="number"?[n]:n)||[]}function executeTransition(n,r,a,s={}){var o,u;const c=toValue(r),p=toValue(a),d=toVec(c),_=toVec(p),ja=(o=toValue(s.duration))!=null?o:1e3,Ja=Date.now(),ec=Date.now()+ja,tc=typeof s.transition=="function"?s.transition:(u=toValue(s.transition))!=null?u:identity,rc=typeof tc=="function"?tc:createEasingFunction(tc);return new Promise(nc=>{n.value=c;const ic=()=>{var uc;if((uc=s.abort)!=null&&uc.call(s)){nc();return}const eh=Date.now(),rh=rc((eh-Ja)/ja),ah=toVec(n.value).map((ih,oh)=>lerp(d[oh],_[oh],rh));Array.isArray(n.value)?n.value=ah.map((ih,oh)=>{var uh,ch;return lerp((uh=d[oh])!=null?uh:0,(ch=_[oh])!=null?ch:0,rh)}):typeof n.value=="number"&&(n.value=ah[0]),eh<ec?requestAnimationFrame(ic):(n.value=p,nc())};ic()})}function useTransition(n,r={}){let a=0;const s=()=>{const u=toValue(n);return typeof u=="number"?u:u.map(toValue)},o=ref(s());return watch(s,async u=>{var c,p;if(toValue(r.disabled))return;const d=++a;if(r.delay&&await promiseTimeout(toValue(r.delay)),d!==a)return;const _=Array.isArray(u)?u.map(toValue):toValue(u);(c=r.onStarted)==null||c.call(r),await executeTransition(o,o.value,_,{...r,abort:()=>{var ja;return d!==a||((ja=r.abort)==null?void 0:ja.call(r))}}),(p=r.onFinished)==null||p.call(r)},{deep:!0}),watch(()=>toValue(r.disabled),u=>{u&&(a++,o.value=s())}),tryOnScopeDispose(()=>{a++}),computed(()=>toValue(r.disabled)?s():o.value)}const _hoisted_1={class:"box"},_sfc_main$2={__name:"SytNumFlip",props:{value:[String,Number],duration:{type:Number,default:1e3},valueStyle:{type:Object,default:()=>({color:"#fff",fontSize:"40px"})}},setup(n){useCssVars(s=>({"5d9f496f":r.valueStyle.color,"26a9bb64":r.valueStyle.fontSize}));const r=n,a=defineComponent(s=>{const o=ref(0),u=ref(0),c=ref(0);let p=null,d=()=>{const _=parseInt(s.itemValue),ja=parseInt(u.value);if(Number.isNaN(_)||Number.isNaN(ja))return o.value=s.itemValue;const Ja=_-ja,ec=Math.sign(Ja);c.value=s.itemDuration/Math.abs(Ja);function*tc(){for(;o.value!==_;)u.value=o.value,yield o.value+=ec}const rc=tc();return setInterval(()=>{rc.next()},c.value)};return watch(()=>s.itemValue,(_,ja)=>{u.value=ja??0,p?clearInterval(p):p=d()},{immediate:!0}),()=>h$1("div",{class:"item"},[h$1("div",{class:"item-child item-1"},o.value),h$1("div",{key:Math.random(),class:`item-child item-2 ${o.value!==u.value?"ani-a":""}`,style:{animationDuration:`${c.value}ms`}},o.value),h$1("div",{key:Math.random(),class:`item-child item-3 ${o.value!==u.value?"ani-b":""}`,style:{animationDuration:`${c.value}ms`}},u.value),h$1("div",{class:"item-child item-4"},u.value)])},{props:["itemValue","itemDuration"]});return(s,o)=>(openBlock(),createElementBlock("div",_hoisted_1,[(openBlock(!0),createElementBlock(Fragment,null,renderList((n.value??0).toString(),(u,c)=>(openBlock(),createBlock(unref(a),{key:c,"item-value":u,"item-duration":n.duration},null,8,["item-value","item-duration"]))),128))]))}},SytNumFlip=_export_sfc$1(_sfc_main$2,[["__scopeId","data-v-920373d2"]]),SytNumFlipRaw=`<script setup>\r
import { defineComponent, h, ref, watch } from 'vue'\r
\r
const props = defineProps({\r
  value: [String, Number],\r
  duration: {\r
    type: Number,\r
    default: 1000\r
  },\r
  valueStyle: {\r
    type: Object,\r
    default: () => ({\r
      color: '#fff',\r
      fontSize: '40px'\r
    })\r
  }\r
})\r
\r
// 单整数数字项组件\r
const NumberItem = defineComponent(\r
  (props) => {\r
    const newValue = ref(0)\r
    const oldValue = ref(0)\r
    const splitDuration = ref(0)\r
\r
    let numTimer = null\r
\r
    let generateNum = () => {\r
      const targetVal = parseInt(props.itemValue)\r
      const oldVal = parseInt(oldValue.value)\r
\r
      if (Number.isNaN(targetVal) || Number.isNaN(oldVal)) return (newValue.value = props.itemValue)\r
\r
      const diff = targetVal - oldVal\r
      const sign = Math.sign(diff)\r
\r
      splitDuration.value = props.itemDuration / Math.abs(diff)\r
\r
      function* step() {\r
        while (newValue.value !== targetVal) {\r
          oldValue.value = newValue.value\r
\r
          yield (newValue.value += sign)\r
        }\r
      }\r
\r
      const numStep = step()\r
\r
      return setInterval(() => {\r
        numStep.next()\r
      }, splitDuration.value)\r
    }\r
\r
    watch(\r
      () => props.itemValue,\r
      (newV, oldV) => {\r
        oldValue.value = oldV ?? 0\r
\r
        if (numTimer) clearInterval(numTimer)\r
        else numTimer = generateNum()\r
      },\r
      { immediate: true }\r
    )\r
\r
    return () =>\r
      h('div', { class: 'item' }, [\r
        h('div', { class: 'item-child item-1' }, newValue.value),\r
        h(\r
          'div',\r
          {\r
            key: Math.random(),\r
            class: \`item-child item-2 \${newValue.value !== oldValue.value ? 'ani-a' : ''}\`,\r
            style: {\r
              animationDuration: \`\${splitDuration.value}ms\`\r
            }\r
          },\r
          newValue.value\r
        ),\r
        h(\r
          'div',\r
          {\r
            key: Math.random(),\r
            class: \`item-child item-3 \${newValue.value !== oldValue.value ? 'ani-b' : ''}\`,\r
            style: {\r
              animationDuration: \`\${splitDuration.value}ms\`\r
            }\r
          },\r
          oldValue.value\r
        ),\r
        h('div', { class: 'item-child item-4' }, oldValue.value)\r
      ])\r
  },\r
  {\r
    props: ['itemValue', 'itemDuration']\r
  }\r
)\r
<\/script>\r
\r
<template>\r
  <div class="box">\r
    <NumberItem\r
      v-for="(n, i) of (value ?? 0).toString()"\r
      :key="i"\r
      :item-value="n"\r
      :item-duration="duration"\r
    ></NumberItem>\r
  </div>\r
</template>\r
\r
<style scoped>\r
@font-face {\r
  font-family: shuZi;\r
  src: url('data:application/octet-stream;base64,AAEAAAANAIAAAwBQT1MvMjE7LhoAAAFYAAAAYGNtYXChxm93AAAFOAAAAuxjdnQgKU8w+gAACcwAAACaZnBnbafZXpMAAAgkAAAAZGdseWarHbQnAAAMLAAAg1RoZWFkGfZDmwAAANwAAAA2aGhlYQh8BRgAAAEUAAAAJGhtdHhIMSxZAAABuAAAA35sb2NhQT4hsgAACmgAAAHCbWF4cAIiA84AAAE4AAAAIG5hbWWTyawHAACPgAAAANZwb3N05V+8XQAAkFgAAAIacHJlcDHTh2cAAAiIAAABQwABAAAAAQAAGqmm518PPPUAAgPoAAAAANrRM5YAAAAA2vTMF/9s/yUFrgPpAAAAAwACAAAAAAAAAAEAAANf/zgAAAXN/2z/MwWuAAEAAAAAAAAAAAAAAAAAAADfAAEAAADgAUkADgAyAAoAAgAIAEAACgAAARUCEAACAAEAAwKiAZAABwAAArwCigAAAI8CvAKKAAABxQAyAQMAAAAAAAAAAAAAAAAAAAADEAAAAAAAAAAAAAAAICAgIABAAADwAANf/zgAAANfAMgAAAABAAAAAALQAtAAAAAgAAADhAA4AAAAAAGzAAABswAAAP8AQQGtAEsDawBLAucAQQVSACEDXQBBAREASwGSAEEBkgAVAlgAIQLoAD8A1//rAgEAIQDCACEDZgAhAucAQQLnATQC5wBBAucAJgLnAEEC5wBBAucAQQLnAAAC5wBBAucAQQDMACwA1//rAwwASwLnAEEDDABLAnMAIQSIAFcC5wBBAucAQQKcAEEC5wBBApwAQQKRAEEC5wBBAucAQQD/AEEC5wBBAucAQQLQAEEEzgBBAucAQQLnAEEC5wBBAuoAQQLqAEEC5wBBAmf/9QLnAEEC6gBBBM4AQQKOACEC5wBBAnkACwGOAEEBsABLAY4ACwNfAEsCsQBLAO0AAALnAEEC5wBBApwAQQLnAEECnABBApEAQQLnAEEC5wBBAP8AQQLnAEEC5wBBAtAAQQTOAEEC5wBBAucAQQLnAEEC6gBBAuoAQQLnAEECZ//1AucAQQLqAEEEzgBBAo4AIQLnAEECeQALAccASwDzAEsBxwBLAq8ASwLnAEEC5wBBArIAQQKcAEEC5wBBAucAQQLnAEEC5wBBAucAQQLnAEEC5wBBAucAQQLnAEECsgBBApwAQQKcAEECnABBApwAQQD/ADIA///dAP//bAD//9sC5wBBAucAQQLnAEEC5wBBAucAQQLnAEEC5wBBAucAQQLnAEEC5wBBAu4AIQIkAEsCuABBAyH/3wLeAEECJABLAxgARwUMAFEFDABRBEoASwDtAAABcAAABKQAQQLuAEEDNgBCAvoAIQKXAEwCmQBLBKQAQQLuAEECcwBBAP8AQQSwACcDMgAhAlQAIQJUACEDWQA+AXcAAALnAEEC5wBBAucAQQSpAEEEqQBBAucAQQUwAEEB7wAhAe8AIQEOACEBDgAhAgEAIQLnAEEC5wBBAWX/ygKrAEsBaAAhAWgAIQLuACEAwgAhANf/6wG5/+sFzQAhAucAQQKcAEEC5wBBApwAQQKcAEEA/wA3AP//gAD//9sA///dAucAQQLnAEED6AAAAucAQQLnAEEC5wBBAucAQQD/AEECSQAAAdYAAAG/AAkBdwAAAucAugEUADsCQAAAAucAQQLnAEECeQALAnkACwD/AEEDg//1A4P/9QLnAEEC5wBBA+gAAAPoAAABvwAAAugAlQFzAJsBcwAhAXMAJgNNAFEDpwB+ACYAAAAAAAMAAAADAAAAHAABAAAAAAHmAAMAAQAAABwABAHKAAAAOgAgAAQAGgAAAB0AfgC0AN4A/wExAUEBUwFhAXgBfgGSAscC2ALaAtwgFCAaIB4gIiAmIDAgOiEiIhUiGfAA//8AAAAAAB0AIACgALYA4AExAUEBUgFgAXgBfQGSAsYC2ALaAtwgEyAYIBwgICAmIDAgOSEiIhUiGfAA//8AAf/k/+MAAAAAAAD/lP7A/0//bf8z/1L/BwAA/fH98P3r4JAAAAAAAADgduCE4HXfad6X3pgQwAABAAAAAAAAADQAXACsAAAAAAAAAAAAAAAAAAAA3AAAAAAAAAAAANYA2gDeAAAAAAAAAAAAAAAAAAAAAACdAJcAhACFAK0AkQDRAIYAjQCKAJIAmgCYANgAiQDIAIMAkADbANwAjACIALEAywDaAJMAmwDeAN0A3wCWAJ4AtwC1AJ8AYgBjAI4AZAC5AGUAtgC4AL0AugC7ALwA0gBmAMEAvgC/AKAAZwDZAI8AxADCAMMAaADUANYAagBpAGsAbQBsAG4AlABvAHEAcAByAHMAdQB0AHYAdwDTAHgAegB5AHsAfQB8AKkAlQB/AH4AgACBANUA1wCqAMYAzACnAKgAsgClAKYAswCCALAAhwAAAQYAAAEAAAAAAAAAAQMAAAACAAAAAAAAAAAAAAAAAAAAAQAAAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGEAYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeIAImKi4yNAI6PAJAAAJEAAAAAAACSkwCUlZaXmACZAACam5ydnp+goaKjpKWmp6ipAKqrrK2urwAAsLGys7S1tre4ubq7vL2+vwDBwsPExcbHyMkAyssAAMxABQUEAwIALHZFILADJUUjYWgYI2hgRC0sRSCwAyVFI2FoI2hgRC0sICC4/8A4ErFAATY4LSwgILBAOBKwATa4/8A4LSwBsEZ2IEdoGCNGYWggWCCwAyUjOLACJRKwATZlOFktQA40NDMzFRUCAgAAFhZFAY24Af+FdkVoRBizAQBGACuzAwBGACuzBBVGACuzBRVGACuzBgBGACuzBwBGACuzCABGACuzCQJGACuzCgBGACuzCwBGACuzDAJGACuzDQJGACuzDgBGACuzDwJGACuzEAJGACuzEQBGACuzEhVGACuzEwJGACuzFBVGACuzFwJGACuzGBZGACuzGRVGACuzGhZGACuzGwJGACuzHAJGACuzHQJGACuzHgJGACuzHwJGACuzIBVGACuzIQBGACuzIhVGACuzIxVGACuzJBVGACuzJQJGACuzJhZGACuzJxZGACuzKBVGACuzKRVGACuzKgJGACuzKxZGACuzLABGACuzLRVGACuzLgBGACuzLwBGACuzMBVGACuzMQBGACuzMgJGACtFaERFaERFaERFaERFaEQAAs8DgQHSA6AAmwAAAlUDRAPjAhkDawLfAZgBMANXAfICNQKqAGMBuP/nAAD/oQHX/4MAev+QAT0B7wEhAgABagDaAvYAEgCu/+UBoP+t/3IAuACcAPn/JQLVAOMC5gMa//MCvgFfAIEAVgBCAHsAnAHmAO8A/QEfAMwB2gCcAB4AEwClADYAcQB+AMAAKgBUAJgAswBkAIwAGAAAAAAAMgAyADIAMgBeAJgBGAHaAkgC+AMYA3ADxgQeBHYEkASsBMgE+gV2BaIGHgaYBwAHfggUCFIJAgmYCcQJ8gooClQKigr8C6wMRAz6DVQN1g5QDrYPOg+8D+YQPBDAERgRtBIWEpITGBOmFEYUxBUgFYoV4haKFvwXZhfAGBQYNBiIGL4Y2hj6GZIaSBqiGyQbnhwEHIgdCh00HYoeDh5mHwIfZB/gIGYg9CGUIhIibiLYIzAj2CRKJLQlDiVkJYAl3CYuJjomRia0JsAmzCbYJuQm8Cb8JwgnFCcgJywnmiemJ7InvifKJ9Yn4ifuJ/ooBigSKB4oKig2KEIoTihaKGYocijcKRoptipCKvYrGCu2LGws9i2QLbAt3i6gL0YvlDBAMMAxMjE6MUIxtjHiNJA09DVaNbw2DjYONho2JjYyNuY27jcKNzY3YjeON6g3wjgEOBA4HDhMONQ5Bjk4OdI57joIOjQ6xDrQOtw66Dr0OwA7DDsYOyQ7MDs8O0g7SDtUO2A7bDt4O6I71jwkPEA8jDzsPQw9Pj1KPVY9Yj1uPZg+MD7IPtQ+4D7gPuA+/D9qP5hABEBuQLxBTEGqAAAAAgA4AAADTAOEAAMABwA9QBsHBDQABgU0AQUEMwMCBwYzAQACAQEDABUBAEZ2LzcYAD88PzwBLzz9PC88/TwAEP08EP08MTCyCAAFKzMRIREnESEROAMUOP1cA4T8fDgDFPzsAAIAQQAAAMIC0AADAAcAMkAWAAcGNAQGBQIDATMHBAMDAAMAXQUEFQA/PHY/GAEvFzz9FzwAEP08AC4xMLIIAQUrNycRNxEjNTPCgYGBgdRBAWVW/TCbAAACAEsB7wFkAtAAAwAHAEpAIQYHMwUEBAUCAzMBAAABBQQzAgMDAgcEAwMAAAYFAgMBHAA/Fzw/FzwAhy4OxA78DsSHLg7EDvwOxIcuDsQO/A7EMTCyCAYFKwEHIzcjByM3AWQeXx49Hl8eAtDh4eHhAAAAAAIASwAQAyECwAAbAB8AnEBSEg4EAB4KCx0zFRcWMxQREA0MFRUMGBkzGh8JCBwzGwYDAgcaGgcdHBIRAgUBNBsYFxQTBQAcHx4QDwQFAzQODQoJBgUFLRoZFgMVAAwLCAMHIgA/Fzw/FzwAPxc8/Rc8Pxc8/Rc8hy4OxAXExMTE/A7EBcTELg78BcSHLg7EBcTExMQO/AXELvwOxAXExAEuLi4uMTCyIA4FKwEHIwczByMHIzcjByM3IzczNyM3MzczBzM3Mw8BIwczAyEPrDasD6xEQ0OiQ0RErQ+tNq0OrkJDQqJCREJTojaiAestrC3V1dXVLawt1dXV1S2sAAAHAEH/iAKoA00ABQANABIAGAAdACUAKwDnQGwjBiMiIB8NCwoGCQYHHiQfDw4QDAEBAAIqIQQEAAIMJycAAhwZGhYXMxoZGRoUEzMREhIRKiEPNCwBNAQVFDQYFwwlJDQhCAc0DB0ZMxoREDMOGxoCEg4AKyYFAwAzKSgDAwIEB10nGHgBGkZ2LzcYAHY/dj8YAS8XPP0XPBDdPBDdPDEQ/TwQ/TwAL/08L/08Pzz9PBD9EP0Q1ocuxLk7r+jSC/wOxIcuBMQF/LnDPBQWC8QBERI5ERI5EDwREjkQPDwREjkQPBESOQAREjkREjkALi4uLi4uLi4BLi4xMLIsGgUrAQcnNTcfAQchJzczFzcTByc1NycHISc3ISUHNTcXAQcjJwcjNyEPASc1NxcBuUM+P0KxM/6jPj5USU3kQUCBHXn+xnl5ATr+sIFAQQGTP05RSeONAT1cQEJAQgLgKSlCKyhVViwqMTH9lSsrzSsLKCgvDjL4Kyv9wi0vL1aqJClEIyQACgAhAAAFMwLQAAMACQAPABUAGwAhACcALQAzADcAAAkBJwkBByc1NxcnByEnNyEBByEnNyETByc1NxcBByc1NxcFByEnNyEBByEnNyElByc1NxcJASMBBD3+p0gBCQGOQj89RFdC/v9CQgEC/WJB/v5AQAEElkI/P0IBMkJEREIBVkH+/UFCAQH9Y0H+/kJEAQD+60JEREICK/7dmAElAtD+hVcBJP2YKyupLCs3Ly4pATIpKS3+8ywrqisq/forLKkrK+QtLSkBMicnLgwrK6oqK/7V/sABQAAAAAgAQQAAA4AC0AAFAAsAEQAXAB0AIgAnAC0AukBgKxUSAyYKAAQBEgwMHyYVDw8fJigsKRkHBxgaHAoKGBohHh8fBxwyGTQuJDQuFBMOAw00FxYRAxAMAgE0BC0sNCkbCQgDGjMdCwYDGCcjIgMeMyYlIAMfBQQAKikVAR9Gdi83GAA/PD88AS8XPP0XPC8XPP0XPAAQ/TwQ/Tw/Fzz9FzwQ/RD9P9Y8ARESORESORA8ERI5EDwAERI5ERI5EDwREjkQPBESOQAuLgEuLi4uMTCyLh8FKwEHISc3IRMHJzU3HwEHIyc3Mw8BIyc3MxMHJzU3FyUHNTcXEQcnNRcBByEnNyECVEL+xkJCATqcRD9BQtJsUUJFPaxCb4Ftg5dDP0BC/haBQEFBQIEBkkL+xkJCAToCpCoqLP7ULzBbLS2YKCcwLygpLv7NKSrMKCl1MvgrK/36Kyv4K/76LCwqAAABAEsB7wDIAtAAAwAkQA0CAzMBAAABAwAAAgEcAD88PzwAhy4OxA78DsQxMLIEAgUrEwcjN8geXx4C0OHhAAAABABBAAABfwLQAAQACQAOABMAX0AsDwANBgMAARESDwgFBgs0FAIBNAATEjQPDgoJAwUzDQwHAwYEAAAQDxUBBkZ2LzcYAD88PzwBLxc8/Rc8ABD9PBD9PBD9ARESOQAREjkREjkALi4BLi4xMLIUBgUrAQcjJzcDBzU3FxEHJzUXEyMnNzMBf2BHQkIWgUBBQUCBvadCQkcC0FYqLP7VMvgrK/36Kyv4K/7OLCoAAAAEABUAAAFTAtAABAAJAA4AEwBfQCwRAw4FAAMBDxIQCAUGCzQUAgE0AxMSNBANDAcDBjMOCgkDBQQDABEQFQEDRnYvNxgAPzw/PAEvFzz9FzwAEP08EP08EP0BERI5ABESORESOQAuLgEuLjEwshQDBSsTByMnMxMnNTcXEQcnNTcDByM3M/9CRmKoloFBQEBBgVRCqGJGAqQqVv6jK80rK/36KyvGMv7PLFYAAwAhAaACOgLsAAUACwARAGRAKwEAAg0MMw8QEA8LCjMHCAgHATQEEQwJCA4CBgAFADMDAgQLXQ0HJXgBDkZ2LzcYAHY/PHY/GAEvPP08EN0Q3TEvPNY8ABD9hy4OxA78DsSHLg7EDvwOxAEREjkxMLISDgUrAQcnNTcXEwcnNTcXBQcnPwEXAXFCQkJCyUK6PrT+7LBLCbc7AkcgIoIhIv7wGkUzGEIIRhU3Rx0AAAAEAD8AnAKrAjUABAAJAA4AEwBjQDAKAAEDAAEGBRAGEjIODQQDADQMCwIDARsABQwHEw8JAwUzERAIAwcJEF0QKXgBDEZ2LzcYAHY/dj8YAS8XPP0XPBDdEN0xAD8XPP0XPD/WARESOQAREjkREjkxMLIUDAUrAQcjJzcnByc1Nw8BIzczFwc1NxcCqzumOz8bP0OCUkXdPKKWgUI/AZNWKysPLC1rJ8wsVtAnkiwsAAH/6/+iALcAmwADABpACAIAAwAEAgEWAD88PzwAAS4uMTCyBAIFKzcHIze3RoZHm/n5AAABACEA2AHiAS4AAwAZQAgCAAIBNAMADQA/PP08AS4uMTCyBAIFKwEHITcB4lf+llcBLlZWAAAAAAEAIQAAAKIAmwADAB9ACwIBMwMAAwIEAQAVAD88PzwBLzz9PAAxMLIEAQUrMyM1M6KBgZsAAAAAAgAhAAADRwLQAAMABwAwQBEHAgYDMwQBBQAABQMAAAYFFQA/PD88AIcuDsQOxA7EDvwOxA7EDsQxMLIIBgUrCQEnAQMBIwEDR/6nSgEK1P7fmAEjAtD+hVcBJP5w/sABQAAAAAYAQQAAAqgC0AAEAAoADwAUABkAHwB7QD0dCBEPBQkGGh4bAwABExARDDQgABgyBwY0CR8eNBsZFRQDEDMYFxIDEQ4NAgMBMw8LBAMACgkAHBsVARFGdi83GAA/PD88AS8XPP0XPC8XPP0XPAAQ/TwQ/Tw/1hD9ARESORESOQAREjkREjkALi4BLi4xMLIgEQUrASc1NxcnByEnNyETByc1NyUHNTcXEQcnNRcBByEnNyECqIFAQVRC/sZCQgE6lkFAgf4agUBBQUCBAZJC/sZCQgE6AXMyxisrOSoqLP2VKyvNK0gy+Csr/forK/gr/vosLCoAAAAAAgE0AAABtQLQAAMABwAtQBMHAAYFAgMBMwcEAwMAAwBdBBV4AHY/dj8YAS8XPP0XPAAALi4xMLIIAQUrASc1NxEnNTcBtYGBgYEBczLVVv0wVtwrAAAAAAUAQQAAAqgC0AAEAAkADwAUABkAkEA/FwUIBhITEAMAARYVBwoPMwABAQAMDTMZGBgZFjQaDAs0Dw4MFBM0EAcGNAgZFTMHAgEzEAQACQgAERAVAQdGdi83GAA/PD88AS88PP08L/08ABD9PBD9PD88/TwQ/YcuxLnEUejSC/wOxIcuBMQF/Lk8xBQWC8QBERI5ERI5ABESORESOQEuMTCyGgcFKwEnNTcXJwchNyETByEnNyETISc3ISUHJzUXAqiBQEFUQv4vlwE6eXn+xnl5ATqW/jBCQgFV/pVBQIEBczLGKys5Klb+mCgoL/5pLCoPKyv4KwAABQAmAAACcgLQAAQACQAOABQAGQCNQD8XEggFCAYVGBYDAAEPFDMAAQEAEA8zDQ4ODQs0GhEQNBQTDAcGNAgZGDQWDQwCAwEzDgoEAwAJCAAXFhUBCEZ2LzcYAD88PzwBLxc8/Rc8ABD9PBD9PD88/TwQ/YcuxLk7r+jSC/wOxIcuBMQF/Lk8xBQWC8QBERI5ABESORESOQEuLi4xMLIaCAUrASc1NxcnByEnIRMHJzU3JwchJzchEwchNyECcoFAQVRC/sZ8AbaWQUCBHXn+xnl5ATpCQv5KfAE6AXMyxisrOSpW/ZUrK80rCygoL/6VLFYAAAQAQQAAAqgC0AADAAcADQARAIBANQYLDDMFBAQFCA0zAAEBAAkIMxARERAKCTQNDAwHBDMGBRAPAgMBMxEOAwMAAwBdDhV4AQVGdi83GAB2P3Y/GAEvFzz9FzwvPP08AD88/TyHLsS5O6/o0gv8DsSHLgTEBfy5PMQUFgvEhy4ExAX8ucM8FBYLxAAuMTCyEgUFKwEnNTcBBxEXAQchJzchEyc1NwKogYH+GoGBAcl5/sZ5eQE6loGBAXMy1Vb+1TIBXVb+7igoL/5pVtwrAAAFAEEAAAKoAtAABAAJAA8AFAAZAJJAQBcAAwABFRgWBgUHExARDQ4zERAQEQsKMwgJCQgGNBoMCzQPDgwZGDQWAgE0ABQQMxIRCAczCQUEAAAXFhUBEUZ2LzcYAD88PzwBLzz9PC88/TwAEP08EP08Pzz9PBD9hy7EuTuv6NIL/A7Ehy4ExAX8ucM8FBYLxAEREjkREjkAERI5ERI5AS4uMTCyGhEFKwEHISc3AQcnNTcnByEnNyElBzU3FwEHITchAo17/sZCQgHQQUCBHXn+xnl5ATr+sIFAQQGSQv4vfAFVAtBWKiz9lSsrzSsLKCgvDjL4Kyv9wSxWAAAGAEEAAAKoAtAABAAJAA8AFAAZAB8ArkBNHQADAAEaHhsGBQcTEBENDjMREBARDA0zGRgYGQsKMwgJCQgGNCAMCzQPDgwCATQAHx40GxkVFAMQMxgXEgMRCAczCQUEAAAcGxUBEUZ2LzcYAD88PzwBLzz9PC8XPP0XPAAQ/TwQ/Tw/PP08EP2HLsS5O6/o0gv8DsSHLgTEucRR6NIL/A7Ehy4ExAX8ucM8FBYLxAEREjkREjkAERI5ERI5AS4uMTCyIBEFKwEHISc3AQcnNTcnByEnNyElBzU3FxEHJzUXAQchJzchAo17/sZCQgHQQUCBHXn+xnl5ATr+sIFAQUFAgQGSQv7GQkIBOgLQVios/ZUrK80rCygoLw4y+Csr/forK/gr/vosLCoAAAADAAAAAAJSAtAAAwAHAAsAREAfBwsABQQzAgMDAgYFNAQKCQIDATMLCAMDAAcEAAgVeAB2Pxg/PAEvFzz9FzwAEP08hy7EBfzEAC4uAS4xMLIMBwUrASc1NycHIScBJzU3AlKBgRWC/saBAlKBgQFzMsZXDlZW/TBW3CsABwBBAAACqALQAAQACgAPABUAGgAfACUAz0BdIwgFCQYgJCEDAAEZFhcTFDMXFhYXEBUzAAEBABITMx8eHh8REDMODw8ODDQmAB4yEhE0FRQMBwY0CSUkNCEfGxoDFjMeHRgDFw4NAgMBMw8LBAMACgkAIiEVARdGdi83GAA/PD88AS8XPP0XPC8XPP0XPAAQ/TwQ/Tw/PP08P9YQ/YcuxLk7r+jSC/wOxIcuBMS5xFHo0gv8DsSHLgTEBfy5PMQUFgvEhy4ExAX8ucM8FBYLxAEREjkREjkAERI5ERI5AS4uMTCyJhcFKwEnNTcXJwchJzchEwcnNTcnByEnNyElBzU3FxEHJzUXAQchJzchAqiBQEFUQv7GQkIBOpZBQIEdef7GeXkBOv6wgUBBQUCBAZJC/sZCQgE6AXMyxisrOSoqLP2VKyvNKwsoKC8OMvgrK/36Kyv4K/76LCwqAAAAAAYAQQAAAqgC0AAEAAoADwAVABoAHwCuQE0dCAUJBhseHAMAARkWFxEQMw4PDw4TFDMXFhYXEBUzAAEBAAw0IBIRNBUUDAcGNAkfHjQcGhYzGBcODQIDATMPCwQDAAoJAB0cFQEXRnYvNxgAPzw/PAEvFzz9FzwvPP08ABD9PBD9PD88/TwQ/YcuxAX8uTzEFBYLxIcuBMQF/LnDPBQWC8SHLgTEuTuv6NIL/A7EARESORESOQAREjkREjkBLi4xMLIgFwUrASc1NxcnByEnNyETByc1NycHISc3ISUHNTcXAQchNyECqIFAQVRC/sZCQgE6lkFAgR15/sZ5eQE6/rCBQEEBkkL+SnwBOgFzK80rKzkqKiz9lSsrxjILKCgvByv4Kyv9wSxWAAAAAAIALAAAAK0B1AADAAcANUAZBwY0BAEANAIGBQIDATMHBAMDAAMCAgUEFQA/PD88AS8XPP0XPAAQ/TwQ/TwxMLIIAQUrEyM1MxEjNTOtgYGBgQFAlP4smwAC/+v/ogC3AdQAAwAHADNAFQYEBwQAAQA0AgcCATMDAAMCAgYFFgA/PD88AS88/Tw8ABD9PBDWPAEuLjEwsggGBSsTIzUzEwcjN7GBgQZGhkcBQJT+x/n5AAAAAAEASwB6AsMCVgAFAElAFwQDMwECAgEFBDMAAQEABDMBAgZdABl4AHY/dj8YAS/9AIcuDsS5w+rp8wv8DsSHLrnEGhaOC8QO/LnD6hYNC8QxMLIGAQUrLQIVDQECw/2IAnj+OQHHeu7uR6enAAIAQQD5AqgB2QADAAcALEASBgQCAAcENAUCATQAAwACBgUqAD88PzwAEP08EP08AS4uLi4xMLIIAgUrAQchNwUHITcCqD/92D8CKD/92D8B2VZWiVdXAAABAEsAegLDAlYABQBJQBcDBDMABQUAAgMzAQAAAQMzAAUGXQEZeAB2P3Y/GAEv/QCHLg7EuTwW6fML/A7Ehy65O+YWjgvEDvy5PBYWDQvEMTCyBgEFKwEFNS0BNQLD/YgBx/45AWjuR6enRwAFACEAAAI0AtAABQAKAA8AEwAXAIhAQAMABAEJBgcTEjMNDg4NCw8zBgcHBhI0ERAXFjQUDQw0Dw4MAgE0BAgHMwoGFxQTAxAzFhUSAxEFBAAVFBUBA0Z2LzcYAD88PzwBLxc8/Rc8Lzz9PAAQ/Tw/PP08EP08Lzz9hy7EBfy5PHgU/QvEhy4FxAT8xAEREjkAERI5AS4xMLIYAwUrAQchJzchEyc1NxcDByMnMwcjNRcRIzUzAd9C/sZCQgE6l4JAQh55XILed4GBgoICpCoqLP6jMsYrK/7/KlfMvlP+ypsAAAACAFf/8wQyAt0ARABaAF5ALkc1HBcHFSo0NFsqND8xNDghNARTNAopSzQXFhIGLjM7TzMONCczQj8LODABO0Z2LzcYAD8/AS/9PC/9L/0APzw8/T/9L/0Q/RD9EP0Q1gAuAS4uLi4xMLJbOwUrJQYjIiMiJjcOASMiJyY1Njc2MzIWFzczBwYHBhUUFx4BMzI3Njc2NTQmIyIHBhUUBDMyNjcXDgEjIiQ1NDc2MzIWFRQGAzY1NCcmIyIHBhUUFxYzMjc2NzY3NgM+BgYIBDpLBRBbNUsxNw1XUVgtSg4PSEMLBQkRCyEVCgs7MD7WqLCHjgEHrG/eQyFZ233e/tW2q9C87pbYBiIZLzk+QhkWMDIdJCMGEgWRATMjJCYtM1poSUQhGzvZJBAeEhwYDxEDDzZGY3aPXGGJf8xMPB9LSdWhnW9orINprAERGhIuEw5ITVhAHBkRFT8OPRMAAAAABgBBAAACqALQAAMABwALABEAFQAZAMNAVxcLCjMGBwcGBQQzAgMDAg8QMwkICAkMETMAAQEADg8zGRgYGQ0MMxQVFRQAGDIODTQREAwGBTQEGRYLAwgzGBcKAwkUEwIDATMVEgMDAAcEABIVeAEJRnYvNxgAdj8YPzwBLxc8/Rc8Lxc8/Rc8ABD9PD88/Tw/1ocuxLk7r+jSC/wOxIcuBMS5xFHo0gv8DsSHLgTEBfy5PMQUFgvEhy4ExAX8ucM8FBYLxIcuBMQF/MSHLsQE/MQALjEwshoJBSsBJzU3JwchJxMHERcBByEnNyETJzU3AQcRFwKogYEVgf7GgmyBgQHJef7GeXkBOpaBgf4agYEBczLGVw5WVv7VMgFPV/79KCgv/mlW3Cv++VYBXSsAAAcAQQAAAqgC0AAEAAkADQASABgAHAAhAORAaQUIBh0gHgMAAR8gMxoZGRoNDDMHCAgHFhczCwoKCxMYMwABAQAVFjMcGxscFBMzERISEQ80Iho0IgAbMhUUNBgXDAcGNAghIDQeHBkNAwozGxoMAwsREAIDATMSDgQDAAkIAB8eFQELRnYvNxgAPzw/PAEvFzz9FzwvFzz9FzwAEP08EP08Pzz9PD/WEP0Q/YcuxLk7r+jSC/wOxIcuBMS5xFHo0gv8DsSHLgTEBfy5PMQUFgvEhy4ExAX8ucM8FBYLxIcuBcQE/MSHLsQF/MQBERI5ABESORESOTEwsiILBSsBJzU3FycHISchAQcRFwEHJzU3JwchJzchAQcRFwEHITchAqiBQEFUQv7GggG8/rCBgQHmQUCBHXn+xnl5ATr+sIGBAZJC/kSCAToBczLGKys5Klb+1TIBT1f9+isrzSsLKCgv/s5XAU8r/vosVgAEAEEAAAKTAtAABAAJAA4AEwBfQCwKABIGAwABDA0KCAUGEDQUAgE0AA4NNAoTDwkDBTMSEQcDBgQAAAsKFQEGRnYvNxgAPzw/PAEvFzz9FzwAEP08EP08EP0BERI5ABESORESOQAuLgEuLjEwshQGBSsBByEnNwMHNTcXASEnNyElByc1FwKTgf7GQkIWgUBBAdH+RUJCATr+sEFAgQLQVios/s4r+Csr/ZUsKg8rK/gyAAAGAEEAAAKoAtAABAAJAA0AEgAWABsAkEBJEgsFCAYXGhgDAAEZGjMUExMUDQwzBwgIBw80HBQ0HAAVMgcGNAgbGjQYFhMNAwozFRQMAwsREAIDATMSDgQDAAkIABkYFQELRnYvNxgAPzw/PAEvFzz9FzwvFzz9FzwAEP08EP08P9YQ/RD9hy4FxAT8xIcuxAX8xAEREjkAERI5ERI5AC4uMTCyHAsFKwEnNTcXJwchJyEBBxEXAQcnNTcFBxEXAQchNyECqIFAQVRC/saCAbz+sIGBAeZBQIH+GoGBAZJC/kSCAToBczLGKys5Klb+1TIBT1f9+isrzSv4VwFPK/76LFYAAAUAQQAAApMC0AADAAcADQARABUAk0BDDgAIBRQTEjMPEBAPBwYzAgMDAgsMMwUEBAUKCzMVFBQVEzQWCgk0DQwMAgE0ABEQNA4VEgcDBDMUEwYDBQMAAA8OFQA/PD88AS8XPP0XPAAQ/TwQ/Tw/PP08EP2HLsS5xFHo0gv8DsSHLgTEBfy5wzwUFgvEhy4FxAT8xIcuBcQE/MQAERI5AS4uMTCyFgUFKwEHIScTBxEXAQchJzchEyE3ISUHERcCk4H+xoJsgYEByXn+xnl5ATqB/cOCATr+sIGBAtBWVv7VMgFPV/79KCgv/mlWD1cBTysAAAAEAEEAAAKTAtAAAwAHAA0AEQB4QDQACAUQBwYzAgMDAgsMMwUEBAUKCzMREBARCgk0DQwMAgE0ABEOBwMEMxAPBgMFAwAADxV4AHY/GD88AS8XPP0XPAAQ/Tw/PP08hy7EucRR6NIL/A7Ehy4ExAX8ucM8FBYLxIcuBcQE/MQAERI5AS4xMLISBQUrAQchJxMHERcBByEnNyEBBxEXApOB/saCbIGBAcl5/sZ5eQE6/rCBgQLQVlb+1TIBT1f+/SgoL/6/VgFdKwAAAAAGAEEAAAKoAtAABAAKAA8AFAAZAB8AjUBCHQgAGBEDAAEaHhsMCw0TEBEGBTMODw8ODDQgBwY0CgkMAgE0AB8eNBsZFRQDEDMYFxIDEQ4NMw8LBAAAHBsVARFGdi83GAA/PD88AS88/TwvFzz9FzwAEP08EP08Pzz9PBD9hy7EuTuv6NIL/A7EARESORESOQAREjkREjkALi4BLi4uMTCyIBEFKwEHISc3AQcjJzczEwcnNTclBzU3FxEHJzUXAQchJzchAo17/sZCQgGzeXh6eniWQUCB/hqBQEFBQIEBkkL+xkJCAToC0FYqLP6YKCgv/s4rK80rSDL4Kyv9+isr+Cv++iwsKgAFAEEAAAKoAtAAAwAHAA0AEQAVAKNARhMGCwwzBQQEBQgNMwABAQAKCzMVFBQVCQgzEBEREAAUMgoJNA0MDBUSBwMEMxQTBgMFEA8CAwEzEQ4DAwADAF0OFXgBBUZ2LzcYAHY/dj8YAS8XPP0XPC8XPP0XPAA/PP08P9aHLsS5O6/o0gv8DsSHLgTEucRR6NIL/A7Ehy4ExAX8uTzEFBYLxIcuBMQF/LnDPBQWC8QALi4xMLIWBQUrASc1NwEHERcBByEnNyETJzU3AQcRFwKogYH+GoGBAcl5/sZ5eQE6loGB/hqBgQFzMtVW/tUyAV1W/u4oKC/+aVbcK/75VgFdKwAAAAIAQQAAAMIC0AADAAcALUATBwAGBQIDATMHBAMDAAMAXQQVeAB2P3Y/GAEvFzz9FzwAAC4uMTCyCAEFKxMnNTcRJzU3woGBgYEBczLVVv0wVtwrAAQAQQAAAqgC0AADAAcACwAPAGZAMgcNDDMJCgoJCAszBAUFBAQ0EAAOMgsKNAgPDDMODQYFAgMBMwcEAwMAAwBdCQgVAQ1Gdi83GAA/PHY/GAEvFzz9FzwvPP08ABD9PD/WEP2HLsQF/MSHLsQE/MQALjEwshANBSsBJzU3ESc1NwMhNyElBxEXAqiBgYGBFf3DggE6/rCBgQFzMtVW/T5XzSv+o1YPVwFPKwAFAEEAAAKoAtAABQAJAA8AEwAXAKFARhUIAwQzAQAAAQ0OMwcGBgcMDTMXFhYXCwozEhMTEgIBDgwLNA8ODAMCBhIRMxMQBQMAFxQJAwYzFhUIAwcFBAAQFXgBB0Z2LzcYAHY/GD88AS8XPP0XPC8XPP08ENY8AD88/TwQ1jyHLsS5O6/o0gv8DsSHLgTEucRR6NIL/A7Ehy4ExAX8ucM8FBYLxIcuDsQO/A7EAC4uMTCyGAcFKwEFIzUlMwEHERcBByEnNyETJzU3AQcRFwKo/pBbAWxf/hqBgQHJef7GeXkBOpaBgf4agYECle0+6v7VMgFdVv7uKCgv/mlW3Cv++VYBXSsAAAAEAEEAAAKoAtAAAwAHAAsADwBlQDEOBwENDDMJCgoJCAszBAUFBAQ0EAsKNAgGBTMHBA8MAwMAMw4NAgMBAgBdCQgVAQFGdi83GAA/PHY/GAEvFzz9FzwvPP08ABD9PBD9hy7EBfzEhy7EBPzEAC4uLjEwshABBSsTBxEXASc1NwMhNyElBxEXwoGBAeaBgRX9w4IBOv6wgYEBpTIBXVb9lFfNK/6jVg9XAU8rAAAAAAcAQQAABI4C0AADAAoAEAAUABgAHgAiAK1AWyAaFh0PBwcLDQIDMwUEBAUJCjMYFxcYDwcMHRQyCxwNACEyCQgGAwU0BAc0BCIfGAMVMxYTEgIDATMAFBEDAwALISAXAxYNHhkQAwszHBsOAw0KBAARFXgBFkZ2LzcYAHY/GD88AS8XPP0XPBDdFzwQ3Rc8MRD9FzwQ/Rc8ABD9EP0XPD/WP9Y/PNYQ1ocuxAX8xIcuxAT8xAEREjkQPDwALi4uMTCyIxYFKwEnNTcnByEnByEnAQcnNTcXASc1NyUHERcBByc1NxcFBxEXBI6BgRWD/sdWVf7DfwJSQUBAQQHmgYH8NIGBAeZBQEBB/hqBgQFzMsZWD1Y4OFb+viEh3ywu/ZVW3CtIMgFPV/3dSEjuJyfgVgFdKwAAAAUAQQAAAqgC0AADAAcACwAPABMAbUA3EQ8JCwozBgcHBgUEMwIDAwIAEjIGBTQEExALAwgzEhEKAwkODQIDATMPDAMDAAcEAAwVeAEJRnYvNxgAdj8YPzwBLxc8/Rc8Lxc8/Rc8ABD9PD/Why7EBfzEhy7EBPzEAC4uLjEwshQJBSsBJzU3JwchJxMHERcBJzU3AQcRFwKogYEVgf7GgmyBgQHmgYH+GoGBAXMyxlcOVlb+1TIBT1f9lVbcK/75VgFdKwAGAEEAAAKoAtAABAAKAA8AFAAZAB8Ae0A9HQgRDwUJBhoeGwMAARMQEQw0IAAYMgcGNAkfHjQbGRUUAxAzGBcSAxEODQIDATMPCwQDAAoJABwbFQERRnYvNxgAPzw/PAEvFzz9FzwvFzz9FzwAEP08EP08P9YQ/QEREjkREjkAERI5ERI5AC4uAS4uMTCyIBEFKwEnNTcXJwchJzchEwcnNTclBzU3FxEHJzUXAQchJzchAqiBQEFUQv7GQkIBOpZBQIH+GoFAQUFAgQGSQv7GQkIBOgFzMsYrKzkqKiz9lSsrzStIMvgrK/36Kyv4K/76LCwqAAAAAAUAQQAAAqgC0AAEAAkADQATABcApUBIBQgGAwABDQwzBwgIBxESMwsKCgsOEzMAAQEAEBEzFxYWFwAWMhAPNBMSDAcGNAgXFA0DCjMWFQwDCwIBMwQACQgAFRV4AQtGdi83GAB2Pxg/PAEvPP08Lxc8/Rc8ABD9PD88/Tw/1ocuxLnEUejSC/wOxIcuBMQF/Lk8xBQWC8SHLgTEBfy5wzwUFgvEhy4FxAT8xAEREjkAERI5MTCyGAsFKwEnNTcXJwchJyEBBxEXAQchJzchAQcRFwKogUBBVEL+xoIBvP6wgYEByXn+xnl5ATr+sIGBAXMyxisrOSpW/tUyAU9X/v0oKC/+v1YBXSsAAAAHAEH/gAKrAtAABAAKAA8AFAAYAB0AIgCXQEwIEQ8FCQYgFh4DAAETEBEYFzMWHiIzFRYWFQw0IxwAHwcGNAkiIRcDFjQfHhUODQIDATMPCwQDAB0ZFAMQMxwbEgMRCgkAFRh4ARFGdi83GAB2Pxg/PAEvFzz9FzwvFzz9FzwAPzz9FzwQ/Tw/1hD9hy7EBfzELg78DsQBERI5ERI5ABESORESOQAuLgEuMTCyIxEFKwEnNTcXJwchJzchEwcnNTclBzU3FwElMxclByc1FxMjJzczAqiBQEFUQv7GQkIBOpZBQIH+GoFAQQHp/rGznP4XQUCB9+FAQFwBczLGKys5Kios/ZUrK80rSDL4Kyv9FdZicSsr+Cv+zi8nAAYAQf//AwYC0AAEAAkADQATABcAGwDNQFcFCAYDAAEVFjMUFxcUDQwzBwgIBxESMwsKCgsOEzMAAQEAEBEzGxoaGxsXFg8ZNBwAGjIQDzQTEgwHBjQIFQIBMwQAGxgNAwozGhkMAwsJCAAUFXgBC0Z2LzcYAHY/GD88AS8XPP0XPC88/Tw8ABD9PD88/Tw/1hD9ENY8PIcuxLnEUejSC/wOxIcuBMQF/Lk8xBQWC8SHLgTEBfy5wzwUFgvEhy4FxAT8xIcuuTpj5csLxA78ucWdGjULxAEREjkAERI5MTCyHAsFKwEnNTcXJwchJyEBBxEXAQchJzchEy8BMwUHERcCqIFAQVRC/saCAbz+sIGBAcl5/sZ5eQE69OGckv6ngYEBczLGKys5Klb+1TIBT1f+/SgoL/5oZc7NVwFPKwAABQBBAAACqALQAAQACQAPABQAGQCQQD8XBQMAARUYFgYABxMQEQ0OMxEQEBELCjMICQkIBjQaDAs0Dw4MGRg0FgIBNAAUEDMSEQgHMwAEAAAXFhUBEUZ2LzcYAD88PzwBL/08Lzz9PAAQ/TwQ/Tw/PP08EP2HLsS5O6/o0gv8DsSHLgTEBfy5wzwUFgvEARESORESOQAREjkREjkBLi4xMLIaEQUrAQchJzcBByc1NycHISc3ISUHNTcXAQchNyECqIz+vEJCAdBBQIEdef7GeXkBOv6wgUBBAZJC/i+NAUQC0FYqLP2VKyvNKwsoKC8OMvgrK/3BLFYAAAAAA//1AAACcwLQAAYADAASAGlAMw4ICAcJEQsDAwcJCBEyBxANBQQCAwE0AAM0AAYJAAcSDQwDBzMQDwoDCQYAAA4VeAEGRnYvNxgAdj8YPzwBLxc8/Rc8EN0Q3TEAEP0Q/Rc8P9Y/1gEREjkQPDwREjkQPDEwshMGBSsBByMnByMnAQcnNTcXEQcnETcXAnNnjElOjWcBgUFCQkFCQkNBAtBWMjJW/sQqKtQvL/3HLy8BAi4uAAAAAAUAQQAAAqgC0AADAAcADAARABcAb0A2FQwGBRIWEwkAAQ4EBQk0GAAQMhcWNBMRDQcDBDMQDwYDBQsKAgMBMwwIAwMAAwBdFBMVAQVGdi83GAA/PHY/GAEvFzz9FzwvFzz9FzwAEP08P9YQ/QEREjkREjkAERI5AC4uLgEuMTCyGAUFKwEnNTcBBxEXAQcnNTcFByc1FwEHISc3IQKogYH+GoGBAeZBQIH+GkFAgQGSQv7GQkIBOgFzMthT/tUyAV1T/egrK80r+Csr+Cv++iwsKgAABABB//8CqwLCAAMABwALAA8AYkArBgUPDjMMDQ0MCgszCQgICQ0AHwoJDwwCATMDAAcEMw0GBQMAXQwVeAEFRnYvNxgAdj92PxgBLzw8/TwvPP08LzzWPAA/1ocuDsQO/A7Ehy4OxA78DsQALi4xMLIQBQUrASc1NwEHERcJATU3AwEfAQKogYH+GoGBAen+23uc/typewFzMsZX/uMyAU9X/vv+mrSV/rYBaB6VAAAHAEEAAASPAtAAAwAJAA4AEgAYACEAJgC4QGAREA4FGR0aHB0aCwAMHwUUFAQGIyIQFwALNCcjNCcUNCcWBAwlAB8hIB4DHTQaHzQaJhIPAyIzEA0CAQMMMwAOCgMDAAQlJBEDEAYYEwkDBDMWFQcDBggDAF0bGhUBEEZ2LzcYAD88dj88GAEvFzz9FzwQ3Rc8EN0XPDEQ/Rc8EP0XPAAQ/RD9Fzw/1j/WEP0Q/RD9ENYBERI5ERI5EDw8ERI5ABESORESOQAuLi4uMTCyJxAFKwEnNTcBByc1NxcBByc1NyUHERcBByc1NxcBByEnNyEXNyElByc1FwSPgoL+GkJAQEIB5j1Egfw0goIB5kBCQEIBkkD83D9AATpVVwE7/MlBQIEBcyvcVv7KJyfuSEj92yoqyDU+KwFdVv3pLC7dISH+6SspLTo6DSsr/TYAAAAEACEAAAJvAtAABQALABEAFwCIQD4UDAkFFw8GAhUWMxIBEwAAEw0OMxEQEBELCjMHCAgHAwQzEgETAAATFxILAwYPDgMDAgoJBQMEABQTDQMMFQA/Fzw/FzwBLxc81hc8AIcuDsQOxA7EDvwOxIcuDsQO/A7Ehy4OxA78DsSHLg7EDsQOxA78DsQALi4uLgEuLi4uMTCyGAgFKwEDIzU3MwEjAzUzFwEjJzUzEyUHIzUTMwJv1EO9Wv7LRNVdvAE1XbpD1P7LvVzVRAKJ/ulk+v6iARpE+v4q+Gb+6bH4SQEVAAAEAEEAAAKoAtAAAwAHAA0AEgCDQDcGDw4QCwwzBQQEBQgNMwABAQASEQkKCTQNDAwCATMABwQzBQYFEAMADhIOMxEQAwBdDxV4AQVGdi83GAB2P3Y/GAEvPP08EN08EN08MRD9PBD9PAA/PP08ENY8hy7EBfy5PMQUFgvEhy4ExAX8ucM8FBYLxAEREjkALjEwshMFBSsBJzU3AQcRFwEHISc3IQMHJzUzAqiBgf4agYEByXn+xnl5ATpZRT+EAXMy1Vb+1TIBXVb+7igoL/6bMjL7AAQACwAAAnAC0AADAAcACwAPAGdALwwHAgMzAQAAAQoLMwgNDjMJCAgJBQQzAgMDAg8ONAkGBTQABwQDAwAADQwKAwkVAD8XPD8XPAAQ/TwQ/TyHLrnUlS8JC8QF/MSHLsT8xC4O/A7Ehy4OxA78DsQBLi4xMLIQCgUrAQMnEyMHIycBAyMTASE3MwJw51SuHDjrgQFd6I3cAXD+Wj/kAtD+nVsBCFZW/o7+ogFK/rZWAAAAAAQAQQAAAYUC0AADAAcACwAPAGBALgwACgUNDjMJCAgJBwYzAgMDAgk0EAIBNAAPDjQMCwgHAwQzCgkGAwUDAAANDBUAPzw/PAEvFzz9FzwAEP08EP08EP2HLg7EBPzEhy7EDvwFxAAuLgEuLjEwshAFBSsBByMnEwcRFxEHERcTITczAYWBLIJsgYGBgcP+0YIsAtBWVv7VMgFPV/36VwFPK/7OVgAAAAEASwAAAWcC0AADACRADQADMwECAgEDAgABABUAPzw/PACHLg7EDvwOxDEwsgQCBSshIwMzAWdfvV8C0AAAAAAEAAsAAAFPAtAAAwAHAAsADwBgQC4NAwsECAkzDA8PDAYHMwEAAAEINBACATQADw40DAoJBgMFMwsIBwMEAwAADQwVAD88PzwBLxc8/Rc8ABD9PBD9PBD9hy4OxAT8xIcuBcQE/MQALi4BLi4xMLIQAwUrAQcjJwEnNTcRJzU3AyE3MwE6gyuBAUSBgYGBFf7RgSsC0FZW/qMrzVf9TFfGMv6jVgAAAAABAEsArgMXAlMABQBHQBoDAjMEBQUEAQIzAAUFAAI0BQUGXQQDAQMAIwA/Fzx2PxgAEP2HLg7EuSijMXQL/A7Ehy4OxLnXLDFJC/wOxDEwsgYEBSslIwsBIwEDF2z7+WwBZa4BL/7RAaUAAAABAEv/5QJnAAAAAwAdQAoDAgEAAwI0AQAkAD88/TwBLi4uLjEwsgQBBSsFITUhAmf95AIcGxsAAAEAAAFqAO8B+gADACRADQADMwECAgEDAg8BAB8APzw/PACHLg7EDvwOxDEwsgQCBSsTIycz741ijQFqkAAAAAAGAEEAAAKoAtAAAwAHAAsAEQAVABkAw0BXFwsKMwYHBwYFBDMCAwMCDxAzCQgICQwRMwABAQAODzMZGBgZDQwzFBUVFAAYMg4NNBEQDAYFNAQZFgsDCDMYFwoDCRQTAgMBMxUSAwMABwQAEhV4AQlGdi83GAB2Pxg/PAEvFzz9FzwvFzz9FzwAEP08Pzz9PD/Why7EuTuv6NIL/A7Ehy4ExLnEUejSC/wOxIcuBMQF/Lk8xBQWC8SHLgTEBfy5wzwUFgvEhy4ExAX8xIcuxAT8xAAuMTCyGgkFKwEnNTcnByEnEwcRFwEHISc3IRMnNTcBBxEXAqiBgRWB/saCbIGBAcl5/sZ5eQE6loGB/hqBgQFzMsZXDlZW/tUyAU9X/v0oKC/+aVbcK/75VgFdKwAABwBBAAACqALQAAQACQANABIAGAAcACEA5EBpBQgGHSAeAwABHyAzGhkZGg0MMwcICAcWFzMLCgoLExgzAAEBABUWMxwbGxwUEzMREhIRDzQiGjQiABsyFRQ0GBcMBwY0CCEgNB4cGQ0DCjMbGgwDCxEQAgMBMxIOBAMACQgAHx4VAQtGdi83GAA/PD88AS8XPP0XPC8XPP0XPAAQ/TwQ/Tw/PP08P9YQ/RD9hy7EuTuv6NIL/A7Ehy4ExLnEUejSC/wOxIcuBMQF/Lk8xBQWC8SHLgTEBfy5wzwUFgvEhy4FxAT8xIcuxAX8xAEREjkAERI5ERI5MTCyIgsFKwEnNTcXJwchJyEBBxEXAQcnNTcnByEnNyEBBxEXAQchNyECqIFAQVRC/saCAbz+sIGBAeZBQIEdef7GeXkBOv6wgYEBkkL+RIIBOgFzMsYrKzkqVv7VMgFPV/36KyvNKwsoKC/+zlcBTyv++ixWAAQAQQAAApMC0AAEAAkADgATAF9ALAoAEgYDAAEMDQoIBQYQNBQCATQADg00ChMPCQMFMxIRBwMGBAAACwoVAQZGdi83GAA/PD88AS8XPP0XPAAQ/TwQ/TwQ/QEREjkAERI5ERI5AC4uAS4uMTCyFAYFKwEHISc3Awc1NxcBISc3ISUHJzUXApOB/sZCQhaBQEEB0f5FQkIBOv6wQUCBAtBWKiz+ziv4Kyv9lSwqDysr+DIAAAYAQQAAAqgC0AAEAAkADQASABYAGwCQQEkSCwUIBhcaGAMAARkaMxQTExQNDDMHCAgHDzQcFDQcABUyBwY0CBsaNBgWEw0DCjMVFAwDCxEQAgMBMxIOBAMACQgAGRgVAQtGdi83GAA/PD88AS8XPP0XPC8XPP0XPAAQ/TwQ/Tw/1hD9EP2HLgXEBPzEhy7EBfzEARESOQAREjkREjkALi4xMLIcCwUrASc1NxcnByEnIQEHERcBByc1NwUHERcBByE3IQKogUBBVEL+xoIBvP6wgYEB5kFAgf4agYEBkkL+RIIBOgFzMsYrKzkqVv7VMgFPV/36KyvNK/hXAU8r/vosVgAABQBBAAACkwLQAAMABwANABEAFQCTQEMOAAgFFBMSMw8QEA8HBjMCAwMCCwwzBQQEBQoLMxUUFBUTNBYKCTQNDAwCATQAERA0DhUSBwMEMxQTBgMFAwAADw4VAD88PzwBLxc8/Rc8ABD9PBD9PD88/TwQ/YcuxLnEUejSC/wOxIcuBMQF/LnDPBQWC8SHLgXEBPzEhy4FxAT8xAAREjkBLi4xMLIWBQUrAQchJxMHERcBByEnNyETITchJQcRFwKTgf7GgmyBgQHJef7GeXkBOoH9w4IBOv6wgYEC0FZW/tUyAU9X/v0oKC/+aVYPVwFPKwAAAAQAQQAAApMC0AADAAcADQARAHhANAAIBRAHBjMCAwMCCwwzBQQEBQoLMxEQEBEKCTQNDAwCATQAEQ4HAwQzEA8GAwUDAAAPFXgAdj8YPzwBLxc8/Rc8ABD9PD88/TyHLsS5xFHo0gv8DsSHLgTEBfy5wzwUFgvEhy4FxAT8xAAREjkBLjEwshIFBSsBByEnEwcRFwEHISc3IQEHERcCk4H+xoJsgYEByXn+xnl5ATr+sIGBAtBWVv7VMgFPV/79KCgv/r9WAV0rAAAAAAYAQQAAAqgC0AAEAAoADwAUABkAHwCNQEIdCAAYEQMAARoeGwwLDRMQEQYFMw4PDw4MNCAHBjQKCQwCATQAHx40GxkVFAMQMxgXEgMRDg0zDwsEAAAcGxUBEUZ2LzcYAD88PzwBLzz9PC8XPP0XPAAQ/TwQ/Tw/PP08EP2HLsS5O6/o0gv8DsQBERI5ERI5ABESORESOQAuLgEuLi4xMLIgEQUrAQchJzcBByMnNzMTByc1NyUHNTcXEQcnNRcBByEnNyECjXv+xkJCAbN5eHp6eJZBQIH+GoFAQUFAgQGSQv7GQkIBOgLQVios/pgoKC/+zisrzStIMvgrK/36Kyv4K/76LCwqAAUAQQAAAqgC0AADAAcADQARABUAo0BGEwYLDDMFBAQFCA0zAAEBAAoLMxUUFBUJCDMQEREQABQyCgk0DQwMFRIHAwQzFBMGAwUQDwIDATMRDgMDAAMAXQ4VeAEFRnYvNxgAdj92PxgBLxc8/Rc8Lxc8/Rc8AD88/Tw/1ocuxLk7r+jSC/wOxIcuBMS5xFHo0gv8DsSHLgTEBfy5PMQUFgvEhy4ExAX8ucM8FBYLxAAuLjEwshYFBSsBJzU3AQcRFwEHISc3IRMnNTcBBxEXAqiBgf4agYEByXn+xnl5ATqWgYH+GoGBAXMy1Vb+1TIBXVb+7igoL/5pVtwr/vlWAV0rAAAAAgBBAAAAwgLQAAMABwAtQBMHAAYFAgMBMwcEAwMAAwBdBBV4AHY/dj8YAS8XPP0XPAAALi4xMLIIAQUrEyc1NxEnNTfCgYGBgQFzMtVW/TBW3CsABABBAAACqALQAAMABwALAA8AZkAyBw0MMwkKCgkICzMEBQUEBDQQAA4yCwo0CA8MMw4NBgUCAwEzBwQDAwADAF0JCBUBDUZ2LzcYAD88dj8YAS8XPP0XPC88/TwAEP08P9YQ/YcuxAX8xIcuxAT8xAAuMTCyEA0FKwEnNTcRJzU3AyE3ISUHERcCqIGBgYEV/cOCATr+sIGBAXMy1Vb9PlfNK/6jVg9XAU8rAAUAQQAAAqgC0AAFAAkADwATABcAoUBGFQgDBDMBAAABDQ4zBwYGBwwNMxcWFhcLCjMSExMSAgEODAs0Dw4MAwIGEhEzExAFAwAXFAkDBjMWFQgDBwUEABAVeAEHRnYvNxgAdj8YPzwBLxc8/Rc8Lxc8/TwQ1jwAPzz9PBDWPIcuxLk7r+jSC/wOxIcuBMS5xFHo0gv8DsSHLgTEBfy5wzwUFgvEhy4OxA78DsQALi4xMLIYBwUrAQUjNSUzAQcRFwEHISc3IRMnNTcBBxEXAqj+kFsBbF/+GoGBAcl5/sZ5eQE6loGB/hqBgQKV7T7q/tUyAV1W/u4oKC/+aVbcK/75VgFdKwAAAAQAQQAAAqgC0AADAAcACwAPAGVAMQ4HAQ0MMwkKCgkICzMEBQUEBDQQCwo0CAYFMwcEDwwDAwAzDg0CAwECAF0JCBUBAUZ2LzcYAD88dj8YAS8XPP0XPC88/TwAEP08EP2HLsQF/MSHLsQE/MQALi4uMTCyEAEFKxMHERcBJzU3AyE3ISUHERfCgYEB5oGBFf3DggE6/rCBgQGlMgFdVv2UV80r/qNWD1cBTysAAAAABwBBAAAEjgLQAAMACgAQABQAGAAeACIArUBbIBoWHQ8HBwsNAgMzBQQEBQkKMxgXFxgPBwwdFDILHA0AITIJCAYDBTQEBzQEIh8YAxUzFhMSAgMBMwAUEQMDAAshIBcDFg0eGRADCzMcGw4DDQoEABEVeAEWRnYvNxgAdj8YPzwBLxc8/Rc8EN0XPBDdFzwxEP0XPBD9FzwAEP0Q/Rc8P9Y/1j881hDWhy7EBfzEhy7EBPzEARESORA8PAAuLi4xMLIjFgUrASc1NycHIScHIScBByc1NxcBJzU3JQcRFwEHJzU3FwUHERcEjoGBFYP+x1ZV/sN/AlJBQEBBAeaBgfw0gYEB5kFAQEH+GoGBAXMyxlYPVjg4Vv6+ISHfLC79lVbcK0gyAU9X/d1ISO4nJ+BWAV0rAAAABQBBAAACqALQAAMABwALAA8AEwBtQDcRDwkLCjMGBwcGBQQzAgMDAgASMgYFNAQTEAsDCDMSEQoDCQ4NAgMBMw8MAwMABwQADBV4AQlGdi83GAB2Pxg/PAEvFzz9FzwvFzz9FzwAEP08P9aHLsQF/MSHLsQE/MQALi4uMTCyFAkFKwEnNTcnByEnEwcRFwEnNTcBBxEXAqiBgRWB/saCbIGBAeaBgf4agYEBczLGVw5WVv7VMgFPV/2VVtwr/vlWAV0rAAYAQQAAAqgC0AAEAAoADwAUABkAHwB7QD0dCBEPBQkGGh4bAwABExARDDQgABgyBwY0CR8eNBsZFRQDEDMYFxIDEQ4NAgMBMw8LBAMACgkAHBsVARFGdi83GAA/PD88AS8XPP0XPC8XPP0XPAAQ/TwQ/Tw/1hD9ARESORESOQAREjkREjkALi4BLi4xMLIgEQUrASc1NxcnByEnNyETByc1NyUHNTcXEQcnNRcBByEnNyECqIFAQVRC/sZCQgE6lkFAgf4agUBBQUCBAZJC/sZCQgE6AXMyxisrOSoqLP2VKyvNK0gy+Csr/forK/gr/vosLCoAAAAABQBBAAACqALQAAQACQANABMAFwClQEgFCAYDAAENDDMHCAgHERIzCwoKCw4TMwABAQAQETMXFhYXABYyEA80ExIMBwY0CBcUDQMKMxYVDAMLAgEzBAAJCAAVFXgBC0Z2LzcYAHY/GD88AS88/TwvFzz9FzwAEP08Pzz9PD/Why7EucRR6NIL/A7Ehy4ExAX8uTzEFBYLxIcuBMQF/LnDPBQWC8SHLgXEBPzEARESOQAREjkxMLIYCwUrASc1NxcnByEnIQEHERcBByEnNyEBBxEXAqiBQEFUQv7GggG8/rCBgQHJef7GeXkBOv6wgYEBczLGKys5Klb+1TIBT1f+/SgoL/6/VgFdKwAAAAcAQf+AAqsC0AAEAAoADwAUABgAHQAiAJdATAgRDwUJBiAWHgMAARMQERgXMxYeIjMVFhYVDDQjHAAfBwY0CSIhFwMWNB8eFQ4NAgMBMw8LBAMAHRkUAxAzHBsSAxEKCQAVGHgBEUZ2LzcYAHY/GD88AS8XPP0XPC8XPP0XPAA/PP0XPBD9PD/WEP2HLsQF/MQuDvwOxAEREjkREjkAERI5ERI5AC4uAS4xMLIjEQUrASc1NxcnByEnNyETByc1NyUHNTcXASUzFyUHJzUXEyMnNzMCqIFAQVRC/sZCQgE6lkFAgf4agUBBAen+sbOc/hdBQIH34UBAXAFzMsYrKzkqKiz9lSsrzStIMvgrK/0V1mJxKyv4K/7OLycABgBB//8DBgLQAAQACQANABMAFwAbAM1AVwUIBgMAARUWMxQXFxQNDDMHCAgHERIzCwoKCw4TMwABAQAQETMbGhobGxcWDxk0HAAaMhAPNBMSDAcGNAgVAgEzBAAbGA0DCjMaGQwDCwkIABQVeAELRnYvNxgAdj8YPzwBLxc8/Rc8Lzz9PDwAEP08Pzz9PD/WEP0Q1jw8hy7EucRR6NIL/A7Ehy4ExAX8uTzEFBYLxIcuBMQF/LnDPBQWC8SHLgXEBPzEhy65OmPlywvEDvy5xZ0aNQvEARESOQAREjkxMLIcCwUrASc1NxcnByEnIQEHERcBByEnNyETLwEzBQcRFwKogUBBVEL+xoIBvP6wgYEByXn+xnl5ATr04ZyS/qeBgQFzMsYrKzkqVv7VMgFPV/79KCgv/mhlzs1XAU8rAAAFAEEAAAKoAtAABAAJAA8AFAAZAJBAPxcFAwABFRgWBgAHExARDQ4zERAQEQsKMwgJCQgGNBoMCzQPDgwZGDQWAgE0ABQQMxIRCAczAAQAABcWFQERRnYvNxgAPzw/PAEv/TwvPP08ABD9PBD9PD88/TwQ/YcuxLk7r+jSC/wOxIcuBMQF/LnDPBQWC8QBERI5ERI5ABESORESOQEuLjEwshoRBSsBByEnNwEHJzU3JwchJzchJQc1NxcBByE3IQKojP68QkIB0EFAgR15/sZ5eQE6/rCBQEEBkkL+L40BRALQVios/ZUrK80rCygoLw4y+Csr/cEsVgAAAAAD//UAAAJzAtAABgAMABIAaUAzDggIBwkRCwMDBwkIETIHEA0FBAIDATQAAzQABgkABxINDAMHMxAPCgMJBgAADhV4AQZGdi83GAB2Pxg/PAEvFzz9FzwQ3RDdMQAQ/RD9Fzw/1j/WARESORA8PBESORA8MTCyEwYFKwEHIycHIycBByc1NxcRBycRNxcCc2eMSU6NZwGBQUJCQUJCQ0EC0FYyMlb+xCoq1C8v/ccvLwECLi4AAAAABQBBAAACqALQAAMABwAMABEAFwBvQDYVDAYFEhYTCQABDgQFCTQYABAyFxY0ExENBwMEMxAPBgMFCwoCAwEzDAgDAwADAF0UExUBBUZ2LzcYAD88dj8YAS8XPP0XPC8XPP0XPAAQ/Tw/1hD9ARESORESOQAREjkALi4uAS4xMLIYBQUrASc1NwEHERcBByc1NwUHJzUXAQchJzchAqiBgf4agYEB5kFAgf4aQUCBAZJC/sZCQgE6AXMy2FP+1TIBXVP96CsrzSv4Kyv4K/76LCwqAAAEAEH//wKrAsIAAwAHAAsADwBiQCsGBQ8OMwwNDQwKCzMJCAgJDQAfCgkPDAIBMwMABwQzDQYFAwBdDBV4AQVGdi83GAB2P3Y/GAEvPDz9PC88/TwvPNY8AD/Why4OxA78DsSHLg7EDvwOxAAuLjEwshAFBSsBJzU3AQcRFwkBNTcDAR8BAqiBgf4agYEB6f7be5z+3Kl7AXMyxlf+4zIBT1f++/6atJX+tgFoHpUAAAcAQQAABI8C0AADAAkADgASABgAIQAmALhAYBEQDgUZHRocHRoLAAwfBRQUBAYjIhAXAAs0JyM0JxQ0JxYEDCUAHyEgHgMdNBofNBomEg8DIjMQDQIBAwwzAA4KAwMABCUkEQMQBhgTCQMEMxYVBwMGCAMAXRsaFQEQRnYvNxgAPzx2PzwYAS8XPP0XPBDdFzwQ3Rc8MRD9FzwQ/Rc8ABD9EP0XPD/WP9YQ/RD9EP0Q1gEREjkREjkQPDwREjkAERI5ERI5AC4uLi4xMLInEAUrASc1NwEHJzU3FwEHJzU3JQcRFwEHJzU3FwEHISc3IRc3ISUHJzUXBI+Cgv4aQkBAQgHmPUSB/DSCggHmQEJAQgGSQPzcP0ABOlVXATv8yUFAgQFzK9xW/sonJ+5ISP3bKirINT4rAV1W/eksLt0hIf7pKyktOjoNKyv9NgAAAAQAIQAAAm8C0AAFAAsAEQAXAIhAPhQMCQUXDwYCFRYzEgETAAATDQ4zERAQEQsKMwcICAcDBDMSARMAABMXEgsDBg8OAwMCCgkFAwQAFBMNAwwVAD8XPD8XPAEvFzzWFzwAhy4OxA7EDsQO/A7Ehy4OxA78DsSHLg7EDvwOxIcuDsQOxA7EDvwOxAAuLi4uAS4uLi4xMLIYCAUrAQMjNTczASMDNTMXASMnNTMTJQcjNRMzAm/UQ71a/stE1V28ATVdukPU/su9XNVEAon+6WT6/qIBGkT6/ir4Zv7psfhJARUAAAQAQQAAAqgC0AADAAcADQASAINANwYPDhALDDMFBAQFCA0zAAEBABIRCQoJNA0MDAIBMwAHBDMFBgUQAwAOEg4zERADAF0PFXgBBUZ2LzcYAHY/dj8YAS88/TwQ3TwQ3TwxEP08EP08AD88/TwQ1jyHLsQF/Lk8xBQWC8SHLgTEBfy5wzwUFgvEARESOQAuMTCyEwUFKwEnNTcBBxEXAQchJzchAwcnNTMCqIGB/hqBgQHJef7GeXkBOllFP4QBczLVVv7VMgFdVv7uKCgv/psyMvsABAALAAACcALQAAMABwALAA8AZ0AvDAcCAzMBAAABCgszCA0OMwkICAkFBDMCAwMCDw40CQYFNAAHBAMDAAANDAoDCRUAPxc8Pxc8ABD9PBD9PIcuudSVLwkLxAX8xIcuxPzELg78DsSHLg7EDvwOxAEuLjEwshAKBSsBAycTIwcjJwEDIxMBITczAnDnVK4cOOuBAV3ojdwBcP5aP+QC0P6dWwEIVlb+jv6iAUr+tlYAAAAAAQBL/5ABfQNAACAATkAkIBgQDwgAGAgREDQOIB80ABwbFQMUMwwLBAMDDw4HAQAaAQhGdi83GAA/PD88AS8XPP0XPAAQ/TwQ/TwALi4BLi4uLi4uMTCyIQgFKwUjIjURNCcmIzI2NRE0OwEVIyIGFREUBiMyFhURFBY7AQF9YHU6ERIpNHVgEDUkOSsrOSI3EHBCAU8wEQYoHwFPQiUYJf7YHy8uIP7YJRgAAAEASwAAAKoC0AADAB9ACwIBMwMAAwIAAQAVAD88PzwBLzz9PAAxMLIEAQUrMyMRM6pfXwLQAAAAAQBL/5ABfQNAACQATkAkHBsRCQgAEQAbGjQcCgk0BxcWDgMNMyAfBQMEHRwHCAcaAQhGdi83GAA/PD88AS8XPP0XPAAQ/TwQ/TwALi4BLi4uLi4uMTCyJQgFKwEiBwYVERQrATUzMjY1ETQ2MyImJyY1ETQmKwE1MzIVERQWFxYBfRMPO3NiETYiOysIFAs/ITcRYnMfHA8BaAYSL/6xQiUYJQEoHy8DBBUyASgmFyVC/rEXIggGAAEASwEkAmYBogAfAD5AGh8QDwAGBzMXGBYWGAo0Exo0Ax8eEwwPAw4dAD88PD88PAAQ/RD9hy4OxA7EDvwOxAEuLi4uMTCyIA8FKwEOASMiJi8CJiMiBg8BIzU+ATMyFh8CFjMyNj8BMwJmBkg7EyoacxQdExgYBwJLBkg7EyoacxIdExkZBwJLAZI1OAYHIAQGFBoKETU4BgcgBQYVGgkAAAD//wBBAAACqAOCACYAJAAAAAcAjQC0AAf//wBBAAACqAPgACYAJAAAAAYAyv/3AAAABQBB/54CkwLQAAQACQAOABMAFwB4QDkKABIGAwABDA0KCAUGFhczFRQUFRA0GAIBNAAODTQLChUXFDQVEw8JAwUzEhEHAwYEAAAWFRYBBkZ2LzcYAD88PzwBLxc8/Rc8ABD9PD88/TwQ/TwQ/YcuDsQO/A7EARESOQAREjkREjkALi4BLi4xMLIYBgUrAQchJzcDBzU3FwEhJzchJQcnNRcBByM3ApOB/sZCQhaBQEEB0f5FQkIBOv6wQUCBAQVXilcC0FYqLP7OK/grK/2VLCoPKyv4Mv68SUkA//8AQQAAApMDgwAmACgAAAAHAIwBLQGI//8AQQAAAqgDnQAmADEAAAAHAMcAkAAh//8AQQAAAqgDgwAmADIAAAAHAI0AtwAI//8AQQAAAqgDgwAmADgAAAAHAI0AtAAI//8AQQAAAqgDggAmACQAAAAHAIwBMwGH//8AQQAAAqgDggAmACQAAAAHAEMAxwGI//8AQQAAAqgDngAmACQAAAAGAMZTJQAA//8AQQAAAqgDggAmACQAAAAHAI0AtAAH//8AQQAAAqgDowAmACQAAAAGAMd7JwAA//8AQQAAAqgD4AAmACQAAAAGAMr/9wAAAAUAQf+eApMC0AAEAAkADgATABcAeEA5CgASBgMAAQwNCggFBhYXMxUUFBUQNBgCATQADg00CwoVFxQ0FRMPCQMFMxIRBwMGBAAAFhUWAQZGdi83GAA/PD88AS8XPP0XPAAQ/Tw/PP08EP08EP2HLg7EDvwOxAEREjkAERI5ERI5AC4uAS4uMTCyGAYFKwEHISc3Awc1NxcBISc3ISUHJzUXAQcjNwKTgf7GQkIWgUBBAdH+RUJCATr+sEFAgQEFV4pXAtBWKiz+ziv4Kyv9lSwqDysr+DL+vElJAP//AEEAAAKTA4MAJgAoAAAABwCMASMBiP//AEEAAAKTA4IAJgAoAAAABwBDAKIBiP//AEEAAAKTA6MAJgAoAAAABgDGRCoAAP//AEEAAAKTA4IAJgAoAAAABwCNAK0AB///ADIAAAEhA4IAJgAsAAAABwCMADIBh////90AAADMA4IAJgAsAAAABwBD/90BiP///2wAAAG4A6EAJgAsAAAABwDG/2wAKP///9sAAAFMA4QAJgAsAAAABgCN2wkAAP//AEEAAAKoA50AJgAxAAAABgDHfCEAAP//AEEAAAKoA4IAJgAyAAAABwCMATABh///AEEAAAKoA4AAJgAyAAAABwBDAMkBhv//AEEAAAKoA6QAJgAyAAAABgDGVSsAAP//AEEAAAKoA4MAJgAyAAAABwCNALwACP//AEEAAAKoA5MAJgAyAAAABwDHAIsAF///AEEAAAKoA4IAJgA4AAAABwCMAUIBh///AEEAAAKoA4MAJgA4AAAABwBDAMkBif//AEEAAAKoA6AAJgA4AAAABgDGSycAAP//AEEAAAKoA4MAJgA4AAAABwCNAK8ACAAEACEAAALQAtAABQALABEAFwB1QDkPCgcGCgcJCgcMCgcBAAITAAIWAQ8ODQgDBzQREAsDCgkGAA8CFxIFAwAzFRQDAwIEAF0TFXgBD0Z2LzcYAHY/dj8YAS8XPP0XPBDdEN0xAD8XPP0XPD/WARESORESOQAREjkREjkREjkREjkxMLIYDwUrAQcnNTcXBQcjJzczBQcjJzczEwcnETcXAbg/QkI/ARhAwjo/wf7RRcE+P8KWQj9CPwIkLS2EKCjBKSsrKiwoLv4UKCgBhywrAAAAAAIASwHUAdoC3gALABcALUATDzQJFTQDEjMGDDMACQsDFwEGRnYvNxgAPz8BL/0v/QAQ/RD9MTCyGAYFKwEUBiMiJjU0NjMyFgc0JiMiBhUUFjMyNgHadFNSdnVTVHNATjk5Tk45OU4CWTdOTjc4TU04JjQ0JiY0NAAAAAAGAEH/cwKZA1cABQANABIAGgAfACUAq0BSEx4XFhQTDw0LCgYJBgcYGRMhDAEBAAIEAAIkFRUAAhEODyQVATQECAc0DBoZNBwVJSAzIyIfGxIDDjMPHh0QAw8CBgAFADMDAgQOXSEneAEPRnYvNxgAdj92PxgBLzz9PBDdEN0XPDEQ/Rc8Lzz9PAAvPP08L/08EP0Q1gEREjkREjkQPBESORESORA8PAAREjkREjkALi4uLi4uLi4uLgEuMTCyJg8FKwEHJzU3HwEHISc3Mxc3Awc1NxcBIycHIyc3ISUHJzUXEwcnNTcXAbJFPj9E54H+wj4/SklQ/IFAQQHV301MRz9BATz+rEFAgetAREJCAuAvL0gvMlVWKS01Nf7OK/grK/2VOTkqLA8rK/gy/oE5N0grLAAAAAAG/98AAAMCAtAABAAKABAAFgAaAB8AmUBLHRcAHgMAAQ4UFA8MEQsLDwweCQkFBwYFBxwbMxgZGRgcNCATEg0DDDQWFRADDwwaGTQXAgE0AA4DER8bCgMFMwgHBAAAGBcVARRGdi83GAA/PD88AS88/Rc8L9Y8ABD9PBD9PD8XPP0XPBD9hy4FxAT8xAEREjkREjkQPAAREjkQPBESORA8ERI5AC4BLi4uMTCyIBQFKwEHISc3AwcnNTcXAQcjJzczBQcjJzczASE3ISUHETcXAwKD/sdBQRRDP0JAAQtAtkJFs/7gR3ZBRHACb/2vlQE5/rKERT8C0FYqLP7NKCrMLS3++yYmMTEmJzD+aVYQSAEPKCgAAAAACABB/yUCnwLQAAUACwARABcAHQAjACkALwC0QFsnIQ8JAQYKBwwQDR4iHyQoJRYEBAACEwEBAAIrGRkYGhMZLis0MBM0MA4NNBEQEwgHNAopKDQlIyI0IB8vKh0DGDMtLBsDGhUUAwMCMxcSBQMACwoAJiUrARpGdi83GAA/PD88AS8XPP0XPC8XPP0XPAAvPP08EP08EP08Pzz9PBD9EP0v1jwBERI5EDwREjkQPBESORA8ABESORESORESORESOQAuAS4uLi4xMLIwGgUrAQcnNTcXJwchJzchEwchJzchEwcnNTcXBQcnNTcXAQchJzchEwchJzchJQcnNTcXAp9CPz1EV0L+1EFBAS1BSv7oTTYBRIxCPz1E/idCQ0NCAYI2/rw2TgEVTUH+00JDASv+wEJDQ0IB1SsrlysqNikpLf7JLy8o/tUrK8YrKsgrLMYrK/76IiIz/sImJi8MKyuWKisAAAAAAQBLAOMB2gHtAAsAFkAGBgAJDwMtAD8/AAEuLjEwsgwGBSsBFAYjIiY1NDYzMhYB2nRTU3V1U1RzAWg3Tk04OE1NAAAHAEcAAAKuAtAAAwAIAAwAEQAVABsAHwC9QFYcAgEHBAUQDQ4LDDMFBAQFFhszCQoKCRcWMx4fHx4ZGjMODQ0OCRQyGBc0GxoMBgU0BB4dCwMKMx8cDAMJEQ0zDw4UEwIDATMVEgMDAAgEABMVeAEORnYvNxgAdj8YPzwBLxc8/Rc8Lzz9PC8XPP0XPAAQ/Tw/PP08P9aHLsQF/LnDLhPxC8SHLgTEuTu+6PwL/A7Ehy4ExAX8uTzSE/ELxIcuBcQE/MQBERI5ABESOQAuLi4xMLIgDgUrAQcRFycHIyc3ASc1NwEHNTcXAQcRFycHIyc3MxMnNTcCroGBuoOUQkIBLIGB/r+BQEEB5oGBw3qUenqUmIGBAaUyAU9XZVYqLP6jMsZX/uMy+Csr/etWAV0rNigoL/5pVtwrAAAACABR//cErQLfAAsAFwAcACEAJQArAC8AMwC8QFkpIx0gHiYYMhsYGS0uMywvLywlJDMfICAfGw8kDzMvLicxNDQsNDQYMjIrKjQoJx8eNCEgBhU0Aw80CTMwJQMiMzIxJAMjLRoZMxwYEjMGDDMACQsDMAEGRnYvNxgAPz8BL/0v/S88/Tw8Lxc8/Rc8ABD9EP0/PP08Lzz9PD/WEP0Q/RDWPDwQ1hDWhy4FxAT8xIcuuTp95gILxA78ucWDGf4LxAEREjkAERI5ERI5AC4BLjEwsjQGBSsBFAQjIiQ1NCQzMgQHNCQjIgQVFAQzMiQlJzU3FycHIychDwE1FwUHIyc3MxMvATMPATUXBK3+uujm/rgBR+fmAUg//t7Nzv7fASLNzgEh/s5SKig0LMdUARvWU1MBJE7HTk7HnpBlXdxTUwFrmtrampra2pqIwsCKiMLAjiB+HBwlGze/INY4pRoaHv77QISDONccAAYAUf/3BK0C3wALABcAHAAhACYAKwB5QDsiGCobGBkkJSIgHR4gDygVHhkmJTQjIhkaGTQcGBU0Aw80CSsnIQMdMyopHwMeEjMGDDMACQsDMAEGRnYvNxgAPz8BL/0v/S8XPP0XPAAQ/RD9Lzz9PD88/TwQ1hDWENYBERI5ABESORESOQAuAS4uMTCyLAYFKwEUBCMiJDU0JDMyBAc0JCMiBBUUBDMyJAEHIyc3DwE1NxcBISc3MycHJzUXBK3+uujm/rgBR+fmAUg//t7Nzv7fASLNzgEh/q1RySoqD1EpKAEp/uYqKsnYKClRAWua2tqamtramojCwIqIwsABYTcbHMQbnhwc/nQcHAkcHJ8gAAAAAAIASwFfBAEC2wAlAC0AqEBNIRUTEQgGBCkoFxgWMxkaGhkBAjMAJSUADQ4zHRweGxseIyQzCwoMCQkMITQMKyonAyY0LSwALSYnLCspKCczKiklJBsDGgsNDDIBK0Z2LzcYAD88Pxc8AS88/TwQ1jwQ1jwAPzz9FzwQ/YcuDsQOxA7EDvwOxIcuDsQOxA7EDvwOxIcuDsQO/A7Ehy4OxA78DsQOxAAuLgEuLi4uLi4uMTCyLisFKwEjLwImNTQ3DwMjLwMWFQYVDwIjEzMfAh4BFTY/ATMFIxEjESM1IQQBUDcDAgEDDgcClhaWAwYOAwECAzdQax+hCQQDBgQToh/9+XtPegFEAWjWDAYIBAoMIQwF4eEGCyEMCggEBgzWAXPvDggHFQgdHe86/scBOS8AAAAAAQAAAWsA7wH7AAMAJEANAgMzAQAAAQMADwIBHwA/PD88AIcuDsQO/A7EMTCyBAIFKxMHIzfvY4xiAfuQkAAAAAIAAAL5AXEDewADAAcAN0AZBwQzBgUCATMDAAcGAwMCAQUEAQMAIQEFRnYvNxgAPxc8Pxc8AS88/TwvPP08ADEwsggFBSsBIzUzByM1MwFxgYHwgYEC+YKCggAACABBAAAEhQLQAAYADAASABYAGgAgACUAKQDfQG4XBxQoChQoDg0iAw0iBQYzFhUVFiIhMxgZGRgeHzMUExMUHR4zKSgoKSQOIjQqHRwJAwg0IB8MAwsMBQQCAwE0ABoZNBcDNAAbCikWEwMmMxQoJxUDFA8ADSUhEgMNMyMiEAMPBgAAJxgXFQEURnYvNxgAPzw8PzwBLxc8/Rc8EN0Q3Rc8MRD9Fzwv1gAQ/RD9PBD9Fzw/Fzz9FzwQ/S/Why7EucQO6ZUL/A7Ehy4ExAX8ucNiFIoLxIcuBcQE/MSHLsQF/MQBERI5ERI5ABESORESOQEuMTCyKhQFKwEHIScHIScBByEnNyElByc1NxcFBxEXASE3IQEHISc3IRMHETcXBQcRFwSFgf69Ulr+xYEEF33+zjo/ATL+sz9ERD/+GoSEA8D9wYMBPP5SRP7FeXsBO5aBQj/+GIKCAtBWNzdW/pkpLCsPLC3GLCzHMgFOV/2VVgEWLCku/sZWASsrK91VAV4tAAcAQQAAArEC0AAFAAkADgAUABkAHQAjAL5AYBwWDgYDBAEABAEeIxAhIxALCgwQDzMSExMSCAkzEA8PEBsaMxITExIbNCQLNCQCATQEIiM0EB0aMxYIBzMUDwkDBg0MMw4KGRUzHBsXEhEFFhQTBQMEACAfEQMQFQERRnYvNxgAPxc8Pxc8AS8XPP08Lzz9PC8XPP08EP08ABD9PBD9PBD9EP2HLsQO/ATEhy4FxAT8DsSHLg7EDvwOxAEREjkAERI5ERI5ERI5ERI5AC4uLi4xMLIkEQUrAQchJzchEyc1NwMHJzU3EwEjNQEzAQc1NxcTBzUXAQchJzcFAjwz/tRBQQE+loSECEBBgQj90kICMT/+EoFBQAOEhAGPP/7FJDkBKAK2PCos/qQxJJX+BysrzSsBLP13SQKH/tUy+Csr/pyX7Cn++CsZPQEAAgBCABMC9wHFAAsADwBhQDIDAgAFBAEDADQLCgcDBg8ONAwODQYDBQMPDAsDAAEKCQIDATMIBwQDAwkIAg0MIgEFRnYvNxgAPzw/PAEvFzz9FzwQ3Rc8EN0XPDEAEP08Lxc8/Rc8ENY8MTCyEAUFKwEhFSM1ITUhNTMVIREhNSEC9/7ZZv7YAShmASf9SwK1AQd6ekR6ev7IRAAACAAhAAAC2wLQAAMACAAMABIAFwAcACEAJgDMQGMLBAcFGRgaDRIzAAEBABARMwoJCQoABxwbFg8ONBIRDCEgCAMHNB4dBgMFLSYXFgMlNCMVFAMiGSYiIQMdGhYVBwMGAQIBMwMADAkzIAsKEwQYJB8aHBgzGxoDAF0ZFXgBH0Z2LzcYAHY/dj8YAS88/TwQ3TwQ3TwxLzw8/TwvPP08ENYXPBDWFzwAPxc8/Rc8Pxc8/Rc8Pzz9PBDWPBDWhy7EBfy5wy4T8QvEhy4ExAX8uTzSE/ELxAEREjkAERI5AC4xMLInHwUrASc1NxMHIzUzJQcRFwEHISc3IRcHIzUzBQcnNTMHIyc3MxUjJzczAquBgTAe1dn+BIGBAch6/sd6egE5yCDT1f7/RT+EpdYgJNLZGxzYAXMy1Vb+LRo7hzIBXVb+7igoL/kdPIsyMvtLHCCeGyAAAAADAEwBIgJOAtsAHAAgADkAUkAoHx4cGwI0GiAfNB01NAYpNBQtMw0bGgIBBCMzIB0cAwAUCx4dHQENRnYvNxgAPzw/AS8XPP0XPC/9ABD9L/0Q/Twv/QAuLgEuLjEwsjoNBSsBIzUHDgEjIicuAScmNTQ1NDc+ATMyFxYfAjUzESE1ISc2NTQnLgIjIgYPARQXFhcWFxYzMjc+AQJOVwUWZj4tLThKDAQEEoVUFRdYLAcFV/4OAfJaBQUJMUclPV0MAwEDAQ07LTAzLRkmAYpMCCIqDBA/LQ8UCAkDDz9MAw0zCAdH/lI2vQ0MCw8eKxY2LRYLBAYCMxoUFQwnAAAAAwBLASICUALgAB0AIQA1AD9AHCEgHx4nNBUzNAUhIDQeIjMbLDMQFQsfHh0BEEZ2LzcYAD88PwEv/S/9ABD9PC/9EP0BLi4uLjEwsjYQBSsBDgEHBiMiIyYnLgEnJicmNTQ3PgEzMhcWFxYVFAYHITUhJzQnLgEjIgcOARUUFx4BFxYzMjYCSxBqTxceEBAOBk9qEAMBAQUTjVo1NnsbBQQE/gwB9FEDCmA9JCEuNgMJRTQSEkZkAg02SAsEAwELSDYOAwYMEBI/Tw8jXBIQEA/vNtgPCCw2Cg48JQ8HJjMIA0X//wBBAAAEhQLQAAYAjgAA//8AQQAAArEC0AAGAI8AAAAFAEEAAAJUAtAAAwAHAAwAEQAXAI1ARBUSFhMODQ8EBTMIDAwICQozERAQEQ40GAQ0BwYeAQA0AgwLNAkIGxcWNBMGBQIDATMHBAMDABENMxAPAwIAFBMVAQ9Gdi83GAA/PD88AS88/TwvFzz9FzwAEP08Pzz9PBD9PD88/RD9hy7EucOI6wML/AXEhy7EBPzEARESOQAREjkBLjEwshgPBSsBIzUzESc1MwcjJzczAwcnNRcFByEnNyEB0IGBg4Mb3nh5WnBBQIEBkkL+xkJCAToCNZv+d1NrzC0q/tUrK/gy/ywsKgAAAgBBAAAAwgLQAAMABwAyQBYGAQA0AgYFAgMBMwcEAwMAAwIABRV4AHY/GD88AS8XPP0XPAAQ/TwALjEwsggBBSsTIzUzEQcRF8KBgYGBAjWb/YZWAfxBAAgAJ/+tBIoCqgADACAASwCcANQBLQE5AUgCEEC97ezn29jX1tXU0tDPx8XCvr28t7axsKuppKOhnp2XlpSOiIeGhYN9e3l3bmtlYmFfV1RNTEVCOzgu9rCph4F/d3ZNQiAEJzRMNMs0szSxNJo0lzScNIY0LzQ+NLo0njSRNEE0jzTu7dfWEwUSNALh4Gc0AtS+vY0EnTQAikg0ACAfFAMTBBoZFwpBMwD2MwEkMwAOCwozABIRBQMEMwDv7jMB/vwzAS8zADIzAP8zAgEhMwMAAwIRAQAmAQFGdi83GAA/PD88AS88/S88/RD9EP0Q/TwQ/TwQ/Rc8EP08PBD9EP0Q/RDWPDwQ1hc8ABD9PBD9FzwQ/Tw8EP0XPLgBSRD9uAFJEP24AUkQ/bgBSRD9uAFJEP24AUkQ/bgBSRD9uAFJEP24AUkQ/bgBSRD9uAFJEP24AUkQ/bgBSRD9uAFJEP24AUkQ/bgBSRD9AC4uLi4uLi4uLi4uLrgBAC64AQEuuAEPLrgBEi64ARQuuAEVLrgBGy64AR4uuAEfLrgBIy64AScuuAEoLrgBRS4BLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uuAEALrgBAi64AQUuuAEGLrgBBy64AQguuAEOLrgBEy64ARUuuAEWLrgBGC64AS4uuAE0LrgBOi64AUIuMTC6AUkAAQAFKwUhESEDNSIjIiY9ATQmNTQ2MzUjFTIWFRQVERQGIyIjFRc0JjU0NjMyFhcWFxYVFzQ2NyYjIgcGFRQWFRQGIyImNSMUBhUUFjMyNzYnIzQ2NzY3NjU0JjU0NjMyFhcWFRQVMzQ2NyYjIgcGFRQWFRQGIyInJi8BIxQVFBUUBxYzMjcWFQYHFTMVFDMyNj8BJwYjIiY1ND0BMjYzMhcHNSImNTY9ATQjIgYHNjU0Jw4BIxU2MzIWHQEUBiMmIxUzJyImNTQ2NTQ1NDc2MzIXFh0BFBUUBwM1IxUyFhUUBwYHAyMDLgEnJjc0NjMyMzUjFTIWFxYXFhciBgcOARUUFQcVNxcUBiMVMzUiIyInJjU3MhYzNycjNTQ1NDYzMh8BMzY3NjcWFxYXMzY3Njc2AzQmIyIGFRQWMzI2JxQHBiMiJyY1NDYzMhcWBIr7nQRjXwsFFRABEyOgJRATFAkF6pwfFhAeDAMBARAGASomLBsgmyQaKh4QBC0lLyAmyFYCAxwOEuY2KBMyDQUSAwY1Oj4oLedALBoaIwcBEwMzNxsYBRMaLUAIFAgbCA0TExUIIwgPDoUdEAFdGTISAQUXLhgLBg0RChAOB5ABHhMCChAvJg8MBBl3DiQmFBR0DnoQIAwEAR4HCQOPGg0GCgwcBBdHCwQDKCgBESGbDAUTBhABESQSBQJKERsRDAsdGx4WKwkxJREeDycuDgerSDk9UkQ6QFI1EBQnLhgTJiUwFxJTAv3+VRIKFvoKFAkYDxISDh4PCf7+FgwS5DIgIhUZDw4OAwYMAREpCw0SFio1HiQZGx4pCzUDCg0WGsoYMRYXFRsfWBRAJioPCwsXDgYeGhgVHSE8VxZAKiwICxIwFgsJBRQUFQYoIAsIDJ0+BAIiCw8cJwkEbAID2REKEhQNXGAeFxIJEAoKDBEBBwqsCwwBERERFwYjDBMJLhIcFxMrNggELCMCtRISBQgZgUFBAT7+xUOOPAYECgUSEg0dKy1pLEEZChYTFQkUCgSZIA8REQIGIaABGQIkEQggJAk2UEw5YhqAYjs9iaAVBP3XOEZIPTtQUigpHCIxJjQnOi0jAAAEACH/cAMSAtAAAwAHAA0AEQB4QCoQAAgMCQIDMwQHBwQKCzMOEREOCwwzBgUFBgoJNA0MDAIBNAADAAAQJ3gAdj8YPzwAEP08Pzz9PIcuufSJwQkLxAX8ucOcFTALxIcuuQuWPvMLxLnD2eoWC/wOxIcuuQtzPvwLxAX8xAAREjkBLi4xMLISEAUrAQchJxcPARMBByMnNzMHAwcTAxKR/sZwWCSLPQGPgb1ygb3kQ5JcAtBWVmXGMgFP/qYoKC9l/pRWAe0AAAQAIQAAAjQB1AADAAcACwAPAIhAQQ0OMwwPDwwGBzMFBAQFAgMzAQAAAQkKMwgLCwgJCjMMDw8MAgMzBQQEBQYFAgMBDw4LAwogBwQDAwACDQwJAwgVAD8XPD8XPAA/FzzWFzyHLg7EDvwOxIcuDsQO/A7Ehy4OxA78DsSHLg7EDvwOxIcuDsQO/A7Ehy4OxA78DsQxMLIQBgUrAQcjNyMHIzcBIyczByMnMwI0mYuXYJqMmAF6jZaLV42WjAHU39/f3/4s3d3dAAAAAAQAIQAAAjQB1AADAAcACwAPAIJAPgQHMwUGBgUNDDMODw8OAAMzAQICAQkIMwsNDDMKCwsKBAczAQICAQ8MCwMIBQQBAwAqBwYDAwICDg0KAwkVAD8XPD8XPAA/FzzWFzyHLg7EDvwOxIcuDsQO/A7ELg78DsSHLg7EDvwOxIcuDsQO/A7Ehy4OxA78DsQxMLIQDgUrJSMnMwcjJzMFByM3IwcjNwI0ipmPWYuZjgGDlo6aZJaPm/fd3d3139/f3wAAAAADAD7/9wMdAGMACwAXACMAOEAYGw8DNCEVCRIYMx4GMwAADB4SDDMSAR5Gdi83GAEv/RDdEN0xEP0Q/QA/PDz9PDwxMLIkHgUrJRQGIyImNTQ2MzIWBRQGIyImNTQ2MzIWBRQGIyImNTQ2MzIWAx0wISIvLyIiL/7hLyIiLy8iIi/+4i8iIi8vIiIvLRYgHxcXHx4YFx8fFxcfHxcXHx8XFx8f//8AQQAAAqgDggAmACQAAAAHAEMAqQGI//8AQQAAAqgDowAmACQAAAAHAMcAigAn//8AQQAAAqgDnQAmADIAAAAGAMd3IQAAAAcAQQAABIkC0AAHAA0AEwAZAB4AJgArAMJAZB8qBgABCBsYCxsYISIfJBUPDxQWEhgYFBYDFBYdGhsYDxU0LCg0LAoJNA0MDAUEAgMBNAAmJSMDIjQfAzQAJDQfKyceAxozGyopHAMbEAAOGRQTAw4zFxYRAxAHAAAgHxUBG0Z2LzcYAD88PzwBLxc8/Rc8EN0Q3Rc8MRD9FzwAEP0Q/RD9FzwQ/Rc8Pzz9PBD9EP0v1gEREjkREjkREjkQPBESORA8PAAREjkREjkREjkREjkALgEuMTCyLBsFKwEHIScHISc3AQchJzchJQcnNTcXAwcnNTcXJQc1NxcBISc3IRc3KQEHJxEXBImC/rdOW/7GQkQDk33+zjo/ATL+sz9ERD8CPUVGPP4chEJCA8P8T0FRAStYXQFB/L1CQoQC0FY6Oi0p/pkpLCsPLC3GLCz97yss2CwtdTP5KCn9kiQyPj4nJwELLgAA//8AQQAABIkC0AAGAKEAAAABAEEBPQKoAZMAAwAZQAgCAAIBNAMADAA/PP08AS4uMTCyBAIFKwEHITcCqD/92D8Bk1ZWAAAAAAIAQQE9BQ8BkwADAAcALkAVBAIGBzMBAAABBgUCAwE0BwQDAwAMAD8XPP0XPIcuBcT8xAEuLjEwsggCBSsBByE3IQchNwKoP/3YPwSPP/3YPwGTVlZWVgACACEB2AHQAtAAAwAHADFAFQYABQQzAgMDAgcEAwMAAAYFAgMBFwA/Fzw/FzwAhy4OxA78DsQBLi4xMLIIBgUrAQcjNyMHIzcB0EeFRl1GhkcC0Pj4+PgAAgAhAdgB0ALQAAMABwAxQBUGAAUEMwIDAwIHBAMDAAAGBQIDARcAPxc8Pxc8AIcuDsQO/A7EAS4uMTCyCAYFKwEHIzcjByM3AdBHhUZdRoZHAtD4+Pj4AAEAIQHYAO0C0AADABpACAIAAwAAAgEXAD88PzwAAS4uMTCyBAIFKxMHIzftRoZHAtD4+AABACEB2ADtAtAAAwAaQAgCAAMAAAIBFwA/PD88AAEuLjEwsgQCBSsTByM37UaGRwLQ+PgAAwAhABUB4gHpAAMABwALAE9AJgsKNAgFBDQGAgE0AwANAgUABAsIBwMEMwoJBgMFBwYPCQgiAQJGdi83GAA/PD88AS8XPP0XPBDdEN0xAD88/TwQ/TwQ/TwxMLIMAgUrAQchPwEjNTMRIzUzAeJX/pZXzoGBgYEBLlZWJ5T+LJsAAAD//wBBAAACqAOEACYAPAAAAAcAjQCuAAn//wBBAAACqAOEACYAPAAAAAcAjQDHAAkAAv/KAAABpwLQAAMABwAwQBEHAgYDMwQBBQAABQMAAAYFFQA/PD88AIcuDsQOxA7EDvwOxA7EDsQxMLIIBgUrAQMnEwsBIxMBp8wrnXytWq0C0P6FVwEk/nD+wAFAAAAAAgBLALcCYQIZACIAMwB0QDUBADMgISEgCQozBgUFBhcYMxwbGxwSEzMPDg4PKjQeDzI0DCAlMwMtMxUbIQldDwkoeAESRnYvNxgAdj88dj88GAEv/S/9AD/9P/2HLg7EDvwOxIcuDsQO/A7Ehy4OxA78DsSHLg7EDvwOxDEwsjQSBSsBBxYVFAcXDwInBiMiJwcuASc3JjU0Nyc/Ahc2MzIXNxYHNjU0Jy4BIyIGFRQXHgEzMgJhXigqXwsKGl03R0g2YQwWCmArKl0TDAtgOEhHOF0ZkSsrFTMdOlcrFDUdPAH5PCUuLyc/CAcPPxwdPwUQCT8lLy8kPBEIBz4cHD8M6RwoKBwODjknJx0ODgACACEAAAFHAdQAAwAHADxAGQUGMwQHBwQCAzMBAAABAgEHBiADAAIFBBUAPzw/PAA/PNY8hy4OxA78DsSHLg7EDvwOxDEwsggCBSsBByM3EyMnMwFHmoyYi42WjAHU39/+LN0AAgAhAAABRwHUAAMABwA8QBkAAzMBAgIBBQQzBgcHBgcEAQAqAwICBgUVAD88PzwAPzzWPIcuDsQO/A7Ehy4OxA78DsQxMLIIBgUrJSMnMxcHIzcBR4uZjpWWj5v33fXf3wAAAAcAIQAAAtAC0AAFAAsAEQAXAB0AIwApAJ9AUwYKBwkKBxscGRgcGRMBAQACJQACFgEPEygtIyIdAxw0IB8aAxkODQgDBzQREAsDCgkeDBsJGAYAIQ8CKSQXEgUFADMnJhUUAwUCBABdJRV4AQ9Gdi83GAB2P3Y/GAEvFzz9FzwQ3TwQ3TwxLzzWPAA/Fzz9FzwvFzz9Fzw/1j/WARESORESORA8ABESORESORESORESOTEwsioPBSsBByc1NxcFByMnNzMFByMnNzMXByc1NxcFByMnNzMFByMnNzMXByc1NxcBuD9CQj8BGEDCOj/B/tFFwT4/wpY/QkI/ARhAwjo/wf7RRcE+P8KWQj9CPwIkLC2EJyfCKSwrKywpLucsLYQnJ8IpLCsrLCku+CcnkysrAAAAAQAhAR0AogG4AAMAH0ALAgEzAwADAhMBAB0APzw/PAEvPP08ADEwsgQBBSsTIzUzooGBAR2bAAAB/+v/ogC3AJsAAwAaQAgCAAMABAIBFgA/PD88AAEuLjEwsgQCBSs3ByM3t0aGR5v5+QAAAv/r/6IBmgCbAAMABwAxQBUGAAUEMwIDAwIHBAMDAAQGBQIDARYAPxc8Pxc8AIcuDsQO/A7EAS4uMTCyCAYFKyUHIzcjByM3AZpHhUZdRoZHm/n5+fkAAA4AIQAABa4C0AAFAAsADwAVABsAIQAnAC0AMwA5AD8ARQBLAE8AAAEHIyc3MxMHJzU3FwkBJxMBByc1Nx8BByMnNzMlByMnNzMBByMnNzMBByc1NxclByc1NxcTByc1NxclByc1Nx8BByMnNzMBByMnNzMlASMBBV45fzk8fIk8ODg8/av+xSz1Aa05Pj45yjp9PDt//lY5fzk6fv4gOX85On4Cojw4Nj795zw4ODz/OT4+Of3nOT4+Oco6fTw7fwJSOn47O3/+y/71cAELAUkvLin+9ysrqSwrAb7+hVcBJP2XKyypKyvkLS0p8y8uKQEyKSkt/ZgrK6ksK7EsK6orKv36KyypKyuxKyuqKivjJycu/nctLSnq/sABQAAA//8AQQAAAqgDowAmACQAAAAGAMZOKgAA//8AQQAAApUDowAmACgAAAAGAMZJKgAA//8AQQAAAqgDhwAmACQAAAAHAIwBJAGM//8AQQAAApMDggAmACgAAAAHAI0AtwAH//8AQQAAApMDggAmACgAAAAHAEMAogGI//8ANwAAASYDggAmACwAAAAHAIwANwGH////gAAAAcwDoQAmACwAAAAGAMaAKAAA////2wAAAUwDhAAmACwAAAAGAI3bCQAA////3QAAAMwDggAmACwAAAAHAEP/3QGI//8AQQAAAqgDggAmADIAAAAHAIwBJgGH//8AQQAAAqgDpAAmADIAAAAGAMZaKwAA//8AQQAAAqgDgAAmADIAAAAHAEMAyQGG//8AQQAAAqgDggAmADgAAAAHAIwBMwGH//8AQQAAAqgDoAAmADgAAAAGAMZQJwAA//8AQQAAAqgDgwAmADgAAAAHAEMAvwGJAAIAQQAAAMIC0AADAAcALUATBwAGBQIDATMHBAMDAAMAXQQVeAB2P3Y/GAEvFzz9FzwAAC4uMTCyCAEFKxMnNTcRJzU3woGBgYEBczLVVv0wVtwrAAIAAALaAkwDeQADAAcAP0AaAQIzAAMDAAUEMwYHBwYCBAMHAV0GBQEDACwAPxc8dj88GAEv1gCHLg7EDvwOxIcuDsQO/A7EMTCyCAYFKwEjJzcPASM3Aky+XShJXbPsAto7Y2M7nwAAAwAAAuYB1wN8AAMABwALAGRAHgoACQQFMwcGBgcICzMFBgYFBAczAQICAQMBXQQueAB2P3Y/GACHLrnkysYNC8S5Pq7zAQv8uT628ykLxIcuucFKDNcLxLkayTofC/wOxIcuDsQO/A7EAC4BLi4xMLIMCgUrAQcnNxcvARcPASc3Adc2Vw8p0lrZow99NQNlc2sflitrLUofGHMAAQAJAxoBygNwAAMAGUAIAgACATQDAAoAPzz9PAEuLjEwsgQCBSsBByE3AcpX/pZXA3BWVgAAAAADAAACvgF6A2oABAAKAA8AVUAkCA4MAQUJBgEAAgwLDQoJNAYPCzMODQMCMwQABApdBwYxAQ1Gdi83GAA/PHY/GAEvPP08Lzz9PAAQ/TwBERI5ERI5ABESOQAuLi4BLjEwshANBSsBByc1Nw8BIyc3MycHJzUXAXpAQYFVQktCQktiQEGBAyIrKx0rgSsrKw4rK0grAAAAAAQAugLzAj8D6QAFAAsAEQAXAGZALw8JBgoHDBANAQACExIUBBY0EwEvCAc0ChEQNA0XEjMVFAMCMwUACwoIDg0hARRGdi83GAA/PD88AS88/TwvPP08ABD9PBD9PD88/TwBERI5ERI5ABESORESOQEuLjEwshgUBSsBByc1NxcnByMnNzMXByMnNzMnByc1NxcCPzszMztNNn84OX03LZMtQmuHNjs7NgNCJSNUJCUvIiIn2hwcKwYjJVAlJAAAAAEAO/+eARb/5wADACNADQEAMwIDAwIDADQCARYAPzz9PIcuDsQO/A7EMTCyBAIFKwUHIzcBFlGKUhlJSQAAAAACAAAC0QJCA3AAAwAHADpAGAQHMwUGBgUCAzMBAAABBwYDAwAKBQEseAB2PzwYPxc8AIcuDsQO/A7Ehy4OxA78DsQxMLIIBgUrAQcnNw8BJzMCQuweXXkk+LkDcJ9kOz5gngD//wBBAAACqAOgACYANgAAAAYAzFIwAAD//wBBAAACqAOgACYANgAAAAYAzFIwAAD//wALAAACcAOiACYAPQAAAAYAzCQyAAD//wALAAACcAOiACYAPQAAAAYAzCQyAAAAAgBBAAAAwgLQAAMABwAtQBMHAAYFAgMBMwcEAwMAAwBdBBV4AHY/dj8YAS8XPP0XPAAALi4xMLIIAQUrEyc1NxEnNTfCgYGBgQFzMtVW/TBW3CsAB//1AAADTQLQAAQACQANABIAFgAbAB8ArUBYEgsFCAYXGhgDAAEdHDMeHx8eGRozFBMTFA0MMwcICAcPNCAUNCAAFTIHBjQIGxo0GB4dNB8cDBwLFhMNAwozFRQMAwsREAIDATMSDgQDAAkIABkYFQEeRnYvNxgAPzw/PAEvFzz9FzwvFzz9FzwQ1gA/PP08EP08EP08P9YQ/RD9hy4FxAT8xIcuxAX8xIcuDsQO/A7EARESOQAREjkREjkALi4xMLIgHgUrASc1NxcnByEnIQEHERcBByc1NwUHERcBByE3IQEHIzcDTYFAQVRC/saCAbz+sIGBAeZBQIH+GoGBAZJC/kSCATr+ET+UQAFzMsYrKzkqVv7VMgFPV/36KyvNK/hXAU8r/vosVgE9VlYAAAf/9QAAA00C0AAEAAkADQASABYAGwAfAK1AWBILBQgGFxoYAwABHRwzHh8fHhkaMxQTExQNDDMHCAgHDzQgFDQgABUyBwY0CBsaNBgeHTQfHAwcCxYTDQMKMxUUDAMLERACAwEzEg4EAwAJCAAZGBUBHkZ2LzcYAD88PzwBLxc8/Rc8Lxc8/Rc8ENYAPzz9PBD9PBD9PD/WEP0Q/YcuBcQE/MSHLsQF/MSHLg7EDvwOxAEREjkAERI5ERI5AC4uMTCyIB4FKwEnNTcXJwchJyEBBxEXAQcnNTcFBxEXAQchNyEBByM3A02BQEFUQv7GggG8/rCBgQHmQUCB/hqBgQGSQv5EggE6/hE/lEABczLGKys5Klb+1TIBT1f9+isrzSv4VwFPK/76LFYBPVZWAP//AEEAAAKoA4IAJgA8AAAABwCMATEBh///AEEAAAKoA4IAJgA8AAAABwCMAScBhwABAAAA3AHBATIAAwAZQAgCAAIBNAMADQA/PP08AS4uMTCyBAIFKwEHITcBwVf+llcBMlZWAAAAAAQAlQC5AlQCGQAEAAkADgATAIpAPgoPEzMQEREQDQ4zDAsLDAcIMwUJCQUCATMEAAAEDhMCEgIHBgMDAg4KMgQDBgsFERIRBgkACV0QDCh4AQhGdi83GAB2Pzx2PzwYAS/WPBDWPBDWPAA/PNYXPBDWENY8hy4OxA78DsSHLg7EDvwOxIcuDsQO/A7Ehy4OxA78DsQBLjEwshQIBSsBFwcnNQcXIyc3Fw8BJzcFByc1FwIiMndXJANgcDGfA5wwcgFHMZtaAhlYTgI9AzxLWbc/aFlMTFloPgIAAAACAJsCBADbA2wAAwAHADJAFwc0BAA0AwYFAgMBMwcEAwMAAwpdBB54AHY/dj8YAS8XPP0XPAAQ/RD9MTCyCAEFKxMnNTcRJzU320BAQEACvhlqK/6YK24WAAAAAAUAIQH+AVUDZgAEAAkADwAUABkAeUA4GBcNFgMABQgGCg4LEhMQAwABFhUHGAYMCzQPDgAUEzQQBwY0CBkVMwcCATMQBAAJCAoREB4BB0Z2LzcYAD88PzwBLzw8/Twv/TwAEP08EP08Pzz9PBDWARESORESOQAREjkREjkREjkALi4uAS4uLjEwshoHBSsBJzU3FycHIzczFwcjJzczFyMnNzMnByc1FwFVQSAhKiHpS548PJ48PJ5L6SEhq7UhIEECuBljFRUcFSu0FBQYzBYVCBYWfBYAAAUAJgH+AUwDZgAEAAkADgAUABkAdEA3FxIIDgAFCAYPAA4VGBYDAAELEAMTERA0FBMABwY0CBkYNBYNDAIDATMOCgQDAAkIChcWHgEIRnYvNxgAPzw/PAEvFzz9FzwAEP08EP08Pzz9PBDWENYBERI5ABESORESORESOQAuLgEuLi4xMLIaCAUrASc1NxcnByMnMxMHJzU3JwcjJzczFwcjNzMBTEEgISohnj3bSyEgQQ88njw8niEh2z2eArgZYxUVHBUr/ssWFmYWBRQUGLYWKwAACQBRAAADEgNsAAQACQAPABQAGQAdACEAJQApAAAlJzU3FycHIzczFwcjJzczFyMnNzMnByc1FwEnNTcRJzU3JQMnEwsBIxMDEkAfISoh6EudPDydPDydS+ghIau2IR9A/rxAQEBAAVPMK518rVqtwBljFRUcFSu0FBQYzBYVCBYWfBYCHxlqK/6YK24WHf6FVwEk/nD+wAFAAAAACAB+AAADdQNsAAMABwALAA8AFQAZAB0AIQCaQE0TDhAIGSEcIB0zHhsfGhofDBgpBDQHERk0FhULNAgANAMVFDQSESMeDQ4NMw8MBwQDAwAzBgUCAwEYFwoDCTMZFgsDCAMKXSAfFQEgRnYvNxgAPzx2PxgBLxc8/Rc8Lxc8/Rc8Lzz9PBDWAD88/TwQ/S/9P/0//T/Why4OxA7EDsQO/A7EDsQOxAAREjkALgEuMTCyIiAFKxMnNTcRJzU3ASc1Nw8BNR8BByMnNzMXJzU3AQMnEwsBIxPbQEBAQAKaQEDzQEDkPJ08PJ1LQED+5swrnXytWq0CvhlqK/6YK24W/hAZaiuVGa4riRQUGMwrbhYCGP6FVwEk/nD+wAFAAAAACwAmAAADdQNmAAQACQAOABQAGQAdACEAJwArAC8AMwAAASc1NxcnByMnMxMHJzU3JwcjJzczFwcjNzMBJzU3DwE1HwEHIyc3MxcnNTcLAScTCwEjEwFMQSAhKiGePdtLISBBDzyePDyeISHbPZ4CdEBA80BA5DydPDydS0BA/MwrnXytWq0CuBljFRUcFSv+yxYWZhYFFBQYthYr/poZaiuVGa4riRQUGMwrbhYCGP6FVwEk/nD+wAFAAAAAAAgAZgADAAEECQABABwADgADAAEECQACAA4AAAADAAEECQADADYADgADAAEECQAEABwADgADAAEECQAFABgALAADAAEECQAGACwARAADAAEIBAABABwADgADAAEIBAAEABwADgBSAGUAZwB1AGwAYQByAEoAQ2xfV84ATABFAERtsmZ2ZXBbVwAgW71PUwA6AFYAZQByAHMAaQBvAG4AIAAxAC4AMAAwAEgAWgBMAEUARAB5AGUAagBpAG4AZwBzAGgAdQB6AGkAawB1AGEAbgB0AGkAAAACAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADiAQIAAwAEAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADsAPAA9AD4APwBAAEEAQgBDAEQARQBGAEcASABJAEoASwBMAE0ATgBPAFAAUQBSAFMAVABVAFYAVwBYAFkAWgBbAFwAXQBeAF8AYABhAGIAYwBkAGUAZgBnAGgAaQBqAGsAbABtAG4AbwBwAHEAcgBzAHQAdQB2AHcAeAB5AHoAewB8AH0AfgB/AIAAgQCCAIMAhACFAIYAhwCIAIoAiwCMAI0AjgCQAJEAkwCWAJ0AngCgAKEAogCjAKQApgCpAKoAqwEDAK0ArgCvALAAsQCyALMAtAC1ALYAtwC4ALoAuwEEAL0AvgC/AMIAwwDEAMUAxgDHAMgAyQDKAMsAzADNAM4AzwDQANEA0gDTANQA1QDWANcA2ADZANoA2wDdAN4A4QDkAOUA5gDnAOgA6QDqAOsA7ADtAO4BBQDwAQYBBwEIAPQA9QD2B3VuaTAwMEQHdW5pMDBBMAd1bmkyMjE1B3VuaTAwQUQHdW5pMDBCOQd1bmkwMEIyB3VuaTAwQjMAAA==');\r
}\r
\r
.box {\r
  display: flex;\r
}\r
\r
.item {\r
  color: v-bind('props.valueStyle.color');\r
  position: relative;\r
  transform-style: preserve-3d;\r
  perspective-origin: -300% 200%;\r
  perspective: 550px;\r
  width: calc(v-bind('props.valueStyle.fontSize') * 1.05);\r
  height: calc(v-bind('props.valueStyle.fontSize') * 1.25);\r
  margin: 0 2px;\r
  font-family: shuZi;\r
  font-size: v-bind('props.valueStyle.fontSize');\r
}\r
\r
:deep(.item-child) {\r
  width: 100%;\r
  height: 100%;\r
  box-sizing: border-box;\r
  display: flex;\r
  align-items: center;\r
  justify-content: center;\r
  position: absolute;\r
  border-radius: 5px;\r
  box-shadow: rgba(255, 255, 255, 0.2) 0px 0px 5px 1px;\r
  border-bottom: 1px solid rgba(255, 255, 255, 0.5);\r
  background-image: linear-gradient(\r
    #1d4299 0%,\r
    #1d4299 47%,\r
    #061e4f 47%,\r
    #061e4f 53%,\r
    #1d4299 53%,\r
    #1d4299 100%\r
  );\r
}\r
\r
:deep(.item-1) {\r
  z-index: 1;\r
  clip-path: polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%);\r
}\r
\r
:deep(.item-2) {\r
  z-index: 3;\r
  bottom: 0;\r
  clip-path: polygon(0% 50%, 100% 50%, 100% 100%, 0% 100%);\r
  backface-visibility: hidden;\r
  transform: rotateX(180deg);\r
}\r
\r
:deep(.item-3) {\r
  bottom: 0;\r
  z-index: 2;\r
  clip-path: polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%);\r
  backface-visibility: hidden;\r
  transform: rotateX(0);\r
}\r
\r
:deep(.item-4) {\r
  bottom: 0;\r
  z-index: 0;\r
}\r
\r
:deep(.ani-a) {\r
  animation: a forwards;\r
}\r
\r
:deep(.ani-b) {\r
  animation: b forwards;\r
}\r
\r
@keyframes a {\r
  0% {\r
    transform: rotateX(180deg);\r
  }\r
\r
  100% {\r
    transform: rotateX(0deg);\r
  }\r
}\r
\r
@keyframes b {\r
  0% {\r
    transform: rotateX(0deg);\r
  }\r
\r
  100% {\r
    transform: rotateX(-180deg);\r
  }\r
}\r
</style>\r
`;class NStatistic extends ItemNode{constructor(node){super(node);Zp(this,"isNStatistic",!0);Zp(this,"isDataNode",!0);this.watchStateOptions.push({value:"initData",label:"刷新数据"}),node||(this.path="./components/NStatistic/NStatistic.tsx",this.name="统计数",this.props.style={...this.props.style},this.props.valueStyle={color:"#333",fontSize:"20px",fontWeight:"normal"},this.props.dataUrl="",this.props.dataFn=`function (res) {
  return Number
}`,this.props.value=0,this.props.precision=0,this.props.type="base",this.props.title="",this.props.prefix="",this.props.suffix="",this.props.duration=0,this.props.groupSeparator=",");const pComponent=this.component;this.component=markRaw(defineComponent(props=>{let source=ref(0),value=useTransition(source,{duration:this.props.duration});source.value=this.props.value;const initData=async()=>{this.props.dataUrl&&(this.props.content="",await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);this.props.value=isNaN(resData)?0:Number(resData),source.value=this.props.value}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>{if(this.props.type==="base")return createVNode$1(ElStatistic,{value:this.props.duration?value.value:this.props.value,precision:this.props.precision,prefix:this.props.prefix,suffix:this.props.suffix,valueStyle:this.props.valueStyle,groupSeparator:this.props.groupSeparator,style:{"--el-statistic-content-color":this.props.valueStyle.color,"--el-statistic-content-font-size":`calc(${this.props.valueStyle.fontSize} * 0.7)`}},{title:this.props.title?()=>this.props.title:null});if(this.props.type==="flip")return createVNode$1(SytNumFlip,{key:Math.random(),value:this.props.value,valueStyle:this.props.valueStyle,duration:this.props.duration},null)}})},{name:"NStatistic"}));const pView=this.view;this.view=markRaw(defineComponent(r=>(this.props.valueStyle.color="#aaa",()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{width:"100px",transform:"scale(0.8)"}},null)]}))));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.value,"onUpdate:modelValue":r=>this.props.value=isNaN(r)?0:Number(r),size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("内容数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":r=>this.props.dataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标题")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.title,"onUpdate:modelValue":r=>this.props.title=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字色")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElColorPicker,{modelValue:this.props.valueStyle.color,"onUpdate:modelValue":r=>this.props.valueStyle.color=r||"","show-alpha":!0,size:"small",teleported:!1},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字体大小")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.valueStyle.fontSize,"onUpdate:modelValue":r=>this.props.valueStyle.fontSize=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字体粗细")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.valueStyle.fontWeight,"onUpdate:modelValue":r=>this.props.valueStyle.fontWeight=r},{default:()=>[createVNode$1(ElRadioButton,{value:"normal",label:"正常",size:"small"},null),createVNode$1(ElRadioButton,{value:"bold",label:"加粗",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数字精度")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.precision,"onUpdate:modelValue":r=>this.props.precision=r,min:0,step:1,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("展示类型")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.type,"onUpdate:modelValue":r=>this.props.type=r},{default:()=>[createVNode$1(ElRadioButton,{value:"base",label:"基础",size:"small"},null),createVNode$1(ElRadioButton,{value:"flip",label:"翻牌",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("动效时间")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.duration,"onUpdate:modelValue":r=>this.props.duration=r,min:0,placeholder:"毫秒",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("前缀")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.prefix,"onUpdate:modelValue":r=>this.props.prefix=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("后缀")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.suffix,"onUpdate:modelValue":r=>this.props.suffix=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("千分位标识符")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.groupSeparator,"onUpdate:modelValue":r=>this.props.groupSeparator=r,size:"small"},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_valueVar`,c=`${a}_${s}_sourceVar`,p=`${a}_${s}_dynamicValueVar`,d=`${a}_${s}_initData`;return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"@vueuse/core":{useTransition:"useTransition"},"./imports/SytNumFlip.vue":{default:"SytNumFlip"},"element-plus":{ElStatistic:"ElStatistic"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"request.js":requestRaw,"SytNumFlip.vue":SytNumFlipRaw},r.script=`
${r.script}
const ${u} = ref(${this.props.valueVar??0})
const ${c} = ref(0)
const ${p} = useTransition(${c}, {
  duration: ${this.props.duration}
})
${c}.value = ${u}.value
${this.props.dataUrl?`const ${d} = async () => {
  ${u}.value = 0

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${u}.value = (${this.props.dataFn||"() => 0"})(res)

    ${c}.value = ${u}.value
  })
}
${d}()`:""}
${this.props.watchState.length>0?`
${this.props.watchState.map(_=>{if(_.type=="initData")return`watch(() => state.${_.stateProperty}, ${d})`}).join(`
`)}
    `:""}
      `,r.template=r.template.replace("<slot></slot>",`
  ${this.props.type==="base"?`<ElStatistic
        :value="${this.props.duration?p:u}"
        :precision="${this.props.precision}"
        prefix="${this.props.prefix}"
        suffix="${this.props.suffix}"
        :valueStyle="${JSON.stringify(this.props.valueStyle).replaceAll('"',"'")}"
        groupSeparator="${this.props.groupSeparator}"
        style="--el-statistic-content-color: ${this.props.valueStyle.color}; --el-statistic-content-font-size: calc(${this.props.valueStyle.fontSize} * 0.7)"
      >
      ${this.props.title?` <template #title>${this.props.title}</template>`:""}
      </ElStatistic>`:""}
  ${this.props.type==="flip"?`<SytNumFlip
          :value="${u}"
          :valueStyle="${JSON.stringify(this.props.valueStyle).replaceAll('"',"'")}"
          :duration="${this.props.duration}"
        ></SytNumFlip>`:""}
      `),r}}const _sfc_main$1={__name:"TableColumn",props:{thData:{type:Object}},setup(n){return(r,a)=>{var o;const s=resolveComponent("TableColumn",!0);return(o=n.thData.children)!=null&&o.length?(openBlock(),createBlock(unref(ElTableColumn),{key:1,label:n.thData.title,align:"center"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.thData.children,u=>(openBlock(),createBlock(s,{key:u.id,"th-data":u},null,8,["th-data"]))),128))]),_:1},8,["label"])):(openBlock(),createBlock(unref(ElTableColumn),{key:0,prop:n.thData.dataIndex,label:n.thData.title,align:"center",sortable:n.thData.sortable,"show-overflow-tooltip":n.thData.showOverflowTooltip&&{effect:"light"}},null,8,["prop","label","sortable","show-overflow-tooltip"]))}}},scrollDelay=1500,cellHeight=40,_sfc_main={__name:"TableVue",props:{columns:{type:Array,default:()=>[{title:"名字",dataIndex:"name"},{title:"a列",children:[{title:"b列",dataIndex:"b",sortable:!0,showOverflowTooltip:!0},{title:"c列",dataIndex:"c"}]}]},data:{type:Array,default:()=>[{b:"1",c:"2"},{b:"3",c:"4"}]},height:[Number,String],selection:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},autoScroll:{type:Boolean,default:!1}},emits:["selection-change"],setup(n,{emit:r}){const a=n,s=r,o=useSlots(),u=ref(),c=computed(()=>a.columns),p=rc=>{s("selection-change",rc)},d=reactive({"--el-table-bg-color":"transparent","--el-table-tr-bg-color":"transparent","--el-table-header-bg-color":"rgb(255 255 255 / 0.05)","--el-fill-color-light":"rgb(255 255 255 / 0.05)","--el-fill-color-lighter":"rgb(255 255 255 / 0.02)","--el-table-border":"1px solid transparent","--el-table-border-color":"transparent"});let _=null,ja=ref(!0);const Ja=computed(()=>{if(a.autoScroll){const rc=ec(a.columns),nc=cellHeight*rc,ic=typeof a.height=="string"?0:a.height-nc;return cellHeight*a.data.length>ic?a.data.concat(a.data):a.data}return a.data});function ec(rc,nc=0){return(rc==null?void 0:rc.length)>0?Math.max(...rc.map(ic=>ic.children?ec(ic.children,nc+1):nc+1)):nc}const tc=()=>{let rc=0;return()=>{var uc;if(!ja.value)return;const nc=a.data.length,ic=rc%(nc+1)*cellHeight;(uc=u.value)==null||uc.scrollTo({left:0,top:ic,behavior:ic==0?"instant":"smooth"}),rc++}};return watch(()=>a.autoScroll,rc=>{_&&clearInterval(_),rc&&(_=setInterval(tc(),scrollDelay))},{immediate:!0}),(rc,nc)=>(openBlock(),createElementBlock("div",{class:"table-container",onMouseover:nc[0]||(nc[0]=ic=>isRef(ja)?ja.value=!1:ja=!1),onMouseout:nc[1]||(nc[1]=ic=>isRef(ja)?ja.value=!0:ja=!0)},[createVNode$1(unref(ElTable),{ref_key:"tableRef",ref:u,height:n.height||"auto",style:normalizeStyle$1(n.transparent?d:null),data:Ja.value,"row-key":"id",border:!1,stripe:"",onSelectionChange:p},{default:withCtx(()=>[n.selection?(openBlock(),createBlock(unref(ElTableColumn),{key:0,type:"selection","reserve-selection":"",width:55})):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,ic=>(openBlock(),createBlock(_sfc_main$1,{key:ic.id,"th-data":ic},null,8,["th-data"]))),128)),o.operations?(openBlock(),createBlock(unref(ElTableColumn),{key:1,label:"操作",align:"center",fixed:"right",width:100},{default:withCtx(({row:ic,column:uc})=>[renderSlot(rc.$slots,"operations",{row:ic,column:uc},void 0,!0)]),_:3})):createCommentVNode("",!0)]),_:3},8,["height","style","data"])],32))}},TableVue=_export_sfc$1(_sfc_main,[["__scopeId","data-v-e2126e28"]]),TableVueRaw=`<script setup>\r
import { ref, computed, reactive, watch } from 'vue'\r
import { ElTable, ElTableColumn } from 'element-plus'\r
import TableColumn from './TableColumn.vue'\r
\r
const props = defineProps({\r
  columns: {\r
    type: Array,\r
    default: () => [\r
      { title: '名字', dataIndex: 'name' },\r
      {\r
        title: 'a列',\r
        children: [\r
          { title: 'b列', dataIndex: 'b', sortable: true, showOverflowTooltip: true },\r
          { title: 'c列', dataIndex: 'c' }\r
        ]\r
      }\r
    ]\r
  },\r
  data: {\r
    type: Array,\r
    default: () => [\r
      { b: '1', c: '2' },\r
      { b: '3', c: '4' }\r
    ]\r
  },\r
  height: [Number, String],\r
  selection: {\r
    type: Boolean,\r
    default: false\r
  },\r
  transparent: {\r
    type: Boolean,\r
    default: false\r
  },\r
  autoScroll: {\r
    type: Boolean,\r
    default: false\r
  }\r
})\r
\r
const emit = defineEmits(['selection-change'])\r
\r
const slots = defineSlots()\r
\r
const tableRef = ref()\r
\r
const tableThArr = computed(() => props.columns)\r
\r
const handleSelectionChange = (val) => {\r
  emit('selection-change', val)\r
}\r
\r
const transparentStyle = reactive({\r
  '--el-table-bg-color': 'transparent',\r
  '--el-table-tr-bg-color': 'transparent',\r
  '--el-table-header-bg-color': 'rgb(255 255 255 / 0.05)',\r
  '--el-fill-color-light': 'rgb(255 255 255 / 0.05)',\r
  '--el-fill-color-lighter': 'rgb(255 255 255 / 0.02)',\r
  '--el-table-border': '1px solid transparent',\r
  '--el-table-border-color': 'transparent'\r
})\r
// 自动滚动\r
const scrollDelay = 1500\r
const cellHeight = 40\r
let intervalScroll = null\r
let srollable = ref(true)\r
// 表格数据\r
const tableData = computed(() => {\r
  if (props.autoScroll) {\r
    const headerDeep = count(props.columns)\r
    const headerHeight = cellHeight * headerDeep\r
    const bodyHeight = typeof props.height == 'string' ? 0 : props.height - headerHeight\r
\r
    return cellHeight * props.data.length > bodyHeight ? props.data.concat(props.data) : props.data\r
  }\r
\r
  return props.data\r
})\r
// 计算表头深度\r
function count(column, num = 0) {\r
  if (column?.length > 0) {\r
    return Math.max(\r
      ...column.map((item) => {\r
        if (item.children) return count(item.children, num + 1)\r
        else return num + 1\r
      })\r
    )\r
  }\r
\r
  return num\r
}\r
\r
const scroll = () => {\r
  let y = 0\r
\r
  return () => {\r
    if (!srollable.value) return\r
\r
    const length = props.data.length\r
    const top = (y % (length + 1)) * cellHeight\r
\r
    tableRef.value?.scrollTo({\r
      left: 0,\r
      top,\r
      behavior: top == 0 ? 'instant' : 'smooth'\r
    })\r
\r
    y++\r
  }\r
}\r
\r
watch(\r
  () => props.autoScroll,\r
  (newVal) => {\r
    if (intervalScroll) clearInterval(intervalScroll)\r
\r
    if (newVal) intervalScroll = setInterval(scroll(), scrollDelay)\r
  },\r
  {\r
    immediate: true\r
  }\r
)\r
<\/script>\r
\r
<template>\r
  <div class="table-container" @mouseover="srollable = false" @mouseout="srollable = true">\r
    <!-- 多级标头border会被固定为true -->\r
    <el-table\r
      ref="tableRef"\r
      :height="height || 'auto'"\r
      :style="transparent ? transparentStyle : null"\r
      :data="tableData"\r
      row-key="id"\r
      :border="false"\r
      stripe\r
      @selection-change="handleSelectionChange"\r
    >\r
      <el-table-column v-if="selection" :type="'selection'" reserve-selection :width="55" />\r
      <TableColumn v-for="item of tableThArr" :key="item.id" :th-data="item" />\r
      <el-table-column\r
        v-if="slots.operations"\r
        label="操作"\r
        align="center"\r
        fixed="right"\r
        :width="100"\r
      >\r
        <template #default="{ row, column }">\r
          <slot name="operations" :row="row" :column="column" />\r
        </template>\r
      </el-table-column>\r
    </el-table>\r
  </div>\r
</template>\r
\r
<style scoped>\r
.table-container {\r
  box-sizing: border-box;\r
}\r
</style>\r
`,TableColumnRaw=`<script setup>\r
import { ElTableColumn } from 'element-plus'\r
\r
defineProps({\r
  thData: {\r
    type: Object\r
  }\r
})\r
<\/script>\r
\r
<template>\r
  <el-table-column\r
    v-if="!thData.children?.length"\r
    :prop="thData.dataIndex"\r
    :label="thData.title"\r
    align="center"\r
    :sortable="thData.sortable"\r
    :show-overflow-tooltip="thData.showOverflowTooltip && { effect: 'light' }"\r
  >\r
  </el-table-column>\r
  <el-table-column v-else :label="thData.title" align="center">\r
    <TableColumn v-for="item of thData.children" :key="item.id" :th-data="item" />\r
  </el-table-column>\r
</template>\r
\r
<style scoped></style>\r
`;function exportExcel(n,r,a){const s=[],o=[];let u=0;function c(tc,rc=1){var nc;tc.level=rc,u<rc&&(u=rc),s[nc=rc-1]??(s[nc]=[]),s[rc-1].push(tc),tc.children?tc.children.forEach(ic=>{ic.parentTh=tc,c(ic,rc+1)}):o.push(tc)}function p(tc,rc){tc.children?(tc.rowspan=1,tc.children.forEach(nc=>{p(nc,rc-1)})):tc.rowspan=rc}function d(tc){tc.children?tc.colspan=tc.children.reduce((rc,nc)=>rc+=nc.colspan,0):tc.colspan=1,tc.parentTh&&d(tc.parentTh)}n.forEach(tc=>c(tc)),n.forEach(tc=>p(tc,u)),o.forEach(tc=>d(tc));const ja=`
    <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:excel' xmlns='http://www.w3.org/TR/REC-html40'>
      <meta http-equiv="content-type" content="application/vnd.ms-excel; charset=UTF-8">
      <meta http-equiv="content-type" content="application/vnd.ms-excel; charset=UTF-8">
      <head>
      <!--[if gte mso 9]>
      <xml>
        <x:ExcelWorkbook>
          <x:ExcelWorksheets>
            <x:ExcelWorksheet>
              <x:Name>
                sheet
              </x:Name>
            <x:WorksheetOptions>
              <x:DisplayGridlines/>
            </x:WorksheetOptions>
            </x:ExcelWorksheet>
          </x:ExcelWorksheets>
        </x:ExcelWorkbook>
      </xml>
      <![endif]-->
      </head>
      <body>
        ${`
    <table border="1">
      ${s.reduce((tc,rc)=>tc+=`
          <tr>
              ${rc.reduce((nc,ic)=>nc+=`<td colspan=${ic.colspan??1} rowspan=${ic.rowspan??1}>${ic.title}</td>`,"")}
          </tr>`,"")}
      ${r.reduce((tc,rc)=>tc+=`
          <tr>
              ${o.reduce((nc,ic)=>nc+=`<td style="mso-number-format:'@';width: 100px">${rc[ic.dataIndex]}</td>`,"")}
          </tr>`,"")}
    </table>`}
      </body>
    </html>`.trim(),Ja=new Blob([ja],{type:"application/vnd.ms-excel"}),ec=document.createElement("a");ec.href=URL.createObjectURL(Ja),ec.style.visibility="hidden",ec.download="未命名.xls",document.body.appendChild(ec),ec.click(),document.body.removeChild(ec)}const exportExcelRaw=`export default function exportExcel(tableThs, tableData, tableName) {\r
  const levelThsArr = [] //分层th\r
  const thsArr = [] //数据用col\r
  let rowNum = 0 //最多几行tr\r
\r
  function pushTh(th, level = 1) {\r
    th.level = level\r
    if (rowNum < level) rowNum = level\r
    levelThsArr[level - 1] ??= []\r
    levelThsArr[level - 1].push(th)\r
    if (!th.children) thsArr.push(th)\r
    else {\r
      th.children.forEach((t) => {\r
        t.parentTh = th\r
        pushTh(t, level + 1)\r
      })\r
    }\r
  }\r
\r
  function setRowspan(th, count) {\r
    if (!th.children) th.rowspan = count\r
    else {\r
      th.rowspan = 1\r
      th.children.forEach((t) => {\r
        setRowspan(t, count - 1)\r
      })\r
    }\r
  }\r
\r
  function setColspan(th) {\r
    if (!th.children) {\r
      th.colspan = 1\r
    } else {\r
      th.colspan = th.children.reduce((pre, val) => (pre += val.colspan), 0)\r
    }\r
    if (th.parentTh) setColspan(th.parentTh)\r
  }\r
\r
  tableThs.forEach((th) => pushTh(th))\r
\r
  tableThs.forEach((th) => setRowspan(th, rowNum))\r
\r
  thsArr.forEach((th) => setColspan(th))\r
\r
  const domStr = \`\r
    <table border="1">\r
      \${levelThsArr.reduce((pre, cur) => {\r
        return (pre += \`\r
          <tr>\r
              \${cur.reduce((p, c) => {\r
                return (p += \`<td colspan=\${c.colspan ?? 1} rowspan=\${c.rowspan ?? 1}>\${\r
                  c.title\r
                }</td>\`)\r
              }, '')}\r
          </tr>\`)\r
      }, '')}\r
      \${tableData.reduce((pre, cur) => {\r
        return (pre += \`\r
          <tr>\r
              \${thsArr.reduce((p, c) => {\r
                return (p += \`<td style="mso-number-format:'\\@';width: 100px">\${\r
                  cur[c.dataIndex]\r
                }</td>\`)\r
              }, '')}\r
          </tr>\`)\r
      }, '')}\r
    </table>\`\r
  const excelFile = \`\r
    <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:excel' xmlns='http://www.w3.org/TR/REC-html40'>\r
      <meta http-equiv="content-type" content="application/vnd.ms-excel; charset=UTF-8">\r
      <meta http-equiv="content-type" content="application/vnd.ms-excel; charset=UTF-8">\r
      <head>\r
      <!--[if gte mso 9]>\r
      <xml>\r
        <x:ExcelWorkbook>\r
          <x:ExcelWorksheets>\r
            <x:ExcelWorksheet>\r
              <x:Name>\r
                sheet\r
              </x:Name>\r
            <x:WorksheetOptions>\r
              <x:DisplayGridlines/>\r
            </x:WorksheetOptions>\r
            </x:ExcelWorksheet>\r
          </x:ExcelWorksheets>\r
        </x:ExcelWorkbook>\r
      </xml>\r
      <![endif]-->\r
      </head>\r
      <body>\r
        \${domStr}\r
      </body>\r
    </html>\`.trim()\r
  const blob = new Blob([excelFile], { type: 'application/vnd.ms-excel' })\r
  const link = document.createElement('a')\r
  link.href = URL.createObjectURL(blob)\r
  link.style.visibility = 'hidden'\r
  link.download = (tableName ?? '未命名') + '.xls'\r
  document.body.appendChild(link)\r
  link.click()\r
  document.body.removeChild(link)\r
}\r
`;class NTable extends ItemNode{constructor(node){super(node);Zp(this,"isNTable",!0);Zp(this,"isDataNode",!0);if(this.watchStateOptions.push({value:"initData",label:"刷新数据"}),!node){this.path="./components/NTable/NTable.tsx",this.name="表格";const r=this.props.style;this.props.style={...r,flexShrink:"0"},this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [{
    defaultA: String,
    defaultC: String,
    defaultD: String
  }]
}`,this.props.totalFn=`function (res) {
  return Number
}`,this.props.height=150,this.props.exportExcel=!1,this.props.pagination=!1,this.props.transparent=!1,this.props.autoScroll=!1,this.props.columns=[{id:Math.random(),title:"defaultA",dataIndex:"defaultA"},{id:Math.random(),title:"defaultB",children:[{id:Math.random(),title:"defaultC",dataIndex:"defaultC",sortable:!0,showOverflowTooltip:!0},{id:Math.random(),title:"defaultD",dataIndex:"defaultD"}]}]}const pComponent=this.component;this.component=markRaw(defineComponent(props=>{let data=ref([{id:Math.random(),defaultA:"defaultA",defaultC:"defaultC",defaultD:"defaultD"},{id:Math.random(),defaultA:"defaultA",defaultC:"defaultC",defaultD:"defaultD"}]),currentPage=ref(1),pageSize=ref(10),total=ref(0);ref("");const handleExportExcel=async()=>{await request$1({url:this.props.dataUrl,method:"GET"}).then(res=>{this.props.dataFn&&exportExcel(this.props.columns,eval(`(${this.props.dataFn})`)(res))})},initData=async()=>{if(!this.props.dataUrl)return;data.value=[];const query=this.props.pagination?{currentPage:currentPage.value,pageSize:pageSize.value}:{};await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a])+`${this.props.dataUrl.includes("?")?"&":"?"}${new URLSearchParams(query)}`,method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(data.value=resData)}catch(r){}if(this.props.totalFn)try{const resTotal=eval(`(${this.props.totalFn})`)(res);total.value=resTotal}catch(r){}})},handlePaginationChange=(r,a)=>{currentPage.value=r,pageSize.value=a,initData()},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn,()=>this.props.totalFn,()=>this.props.pagination],initDataDebounce),initDataDebounce();const watchStateSet=new Set;return watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0}),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1("div",{style:{display:"flex","justify-content":"flex-end"}},[[this.props.exportExcel&&createVNode$1(ElButton,{onClick:handleExportExcel},{default:()=>[createTextVNode("导出excel")]})]]),createVNode$1(TableVue,{height:this.props.height,columns:this.props.columns,data:data.value,transparent:this.props.transparent,autoScroll:this.props.autoScroll},null),this.props.pagination&&createVNode$1(ElPagination,{layout:"total, sizes, prev, pager, next, jumper",total:total.value,"page-sizes":[10,20,30,40,50,100],style:{marginTop:"10px"},size:"small",background:!0,onChange:handlePaginationChange},null)]})},{name:"NTable"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.35, 0.25)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":r=>this.props.dataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("表格高度")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.height,"onUpdate:modelValue":r=>this.props.height=r,min:0,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("分页"),createVNode$1(_sfc_main$d,{content:"分页需设置：分页总数处理函数"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.pagination,"onUpdate:modelValue":r=>this.props.pagination=r,size:"small"},null)])]),this.props.pagination&&createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用；可访问全局状态变量state，res：接口返回数据"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.totalFn,"onUpdate:modelValue":r=>this.props.totalFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("表头")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{const r={id:Math.random(),title:"",dataIndex:""};this.props.columns.push(r)}},{default:()=>[createTextVNode("+ 添加列")]}),createVNode$1(ElTree,{data:this.props.columns,"node-key":"id","default-expand-all":!0,"expand-on-click-node":!1},{default:({node:r,data:a})=>createVNode$1("span",{style:{flex:"1",display:"flex",justifyContent:"space-between"}},[createVNode$1("span",null,[a.title]),createVNode$1("span",null,[createVNode$1(ElPopover,{width:180,trigger:"click",teleported:!1,placement:"left"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-primary)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"80px"},{default:()=>[createVNode$1(ElFormItem,{label:"标题"},{default:()=>[createVNode$1(ElInput,{modelValue:a.title,"onUpdate:modelValue":s=>a.title=s},null)]}),createVNode$1(ElFormItem,{label:"字段"},{default:()=>[createVNode$1(ElInput,{modelValue:a.dataIndex,"onUpdate:modelValue":s=>a.dataIndex=s},null)]}),createVNode$1(ElFormItem,{label:"排序"},{default:()=>[createVNode$1(ElSwitch,{modelValue:a.sortable,"onUpdate:modelValue":s=>a.sortable=s},null)]}),createVNode$1(ElFormItem,{label:"提示信息"},{default:()=>[createVNode$1(ElSwitch,{modelValue:a.showOverflowTooltip,"onUpdate:modelValue":s=>a.showOverflowTooltip=s},null)]})]})])}),h$1(ElIcon,{color:"var(--el-color-warning)",onClick:()=>{const s={id:Math.random(),title:"",dataIndex:""};a.children||(a.children=[]),a.children.push(s),this.props.columns=[...this.props.columns]}},{default:()=>createVNode$1(plus$1,null,null)}),h$1(ElIcon,{color:"var(--el-color-danger)",onClick:()=>{const s=r.parent,o=s.data.children||s.data,u=o.findIndex(c=>c.dataIndex===a.dataIndex);o.splice(u,1)}},{default:()=>createVNode$1(_delete,null,null)})])])})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("导出excel")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.exportExcel,"onUpdate:modelValue":r=>this.props.exportExcel=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("背景透明")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.transparent,"onUpdate:modelValue":r=>this.props.transparent=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("自动滚动")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.autoScroll,"onUpdate:modelValue":r=>this.props.autoScroll=r,size:"small"},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_columns`,c=`${a}_${s}_data`,p=`${a}_${s}_handleExportExcel`,d=`${a}_${s}_currentPage`,_=`${a}_${s}_pageSize`,ja=`${a}_${s}_handlePaginationChang`,Ja=`${a}_${s}_total`,ec=`${a}_${s}_initData`,tc=JSON.stringify(this.props.columns);return r.imports={...r.imports,vue:{ref:"ref",watch:"watch"},"element-plus":{ElButton:"ElButton",ElInput:"ElInput",ElPagination:"ElPagination"},"./imports/TableVue.vue":{default:"TableVue"},"./imports/exportExcel.js":{default:"exportExcel"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"TableVue.vue":TableVueRaw,"TableColumn.vue":TableColumnRaw,"exportExcel.js":exportExcelRaw,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref(${tc})
const ${c} = ref([])
${this.props.pagination?`
const ${Ja} = ref(0)
const ${d} = ref(1)
const ${_} = ref(10)
const ${ja} = (currentP, pSize) => {
  ${d}.value = currentP
  ${_}.value = pSize

  ${ec}()
}
`:""}
${this.props.exportExcel?`const ${p} = async () => {
  await request({
    url: '${this.props.dataUrl}',
    method: 'GET'
  }).then((res) => {
    ${this.props.dataFn?`exportExcel(${u}.value, (${this.props.dataFn})(res))`:""}
  })
}
`:""} 
const ${ec} = async () => {
  ${c}.value = []

  const query = ${this.props.pagination?`{
    currentPage: ${d}.value,
    pageSize: ${_}.value
  }`:"{}"}

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]) + \`${this.props.dataUrl.includes("?")?"&":"?"}\${new URLSearchParams(query)}\`,
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
    ${this.props.pagination&&this.props.totalFn?`${Ja}.value = (${this.props.totalFn})(res)`:""}
  })
}
  
${ec}()
${this.props.watchState.length>0?`
${this.props.watchState.map(rc=>{if(rc.type=="initData")return`watch(() => state.${rc.stateProperty}, ${ec})`}).join(`
`)}
    `:""}
      `,r.template=r.template.replace("<slot></slot>",`
  ${this.props.exportExcel?`
  <ElButton @click="${p}">导出excel</ElButton>
      `:""}
  <TableVue
    :height="${typeof this.props.height=="string"?`'${this.props.height}'`:this.props.height}"
    :columns="${u}"
    :data="${c}"
    :transparent="${this.props.transparent}"
    :autoScroll="${this.props.autoScroll}"
  ></TableVue>
${this.props.pagination?`
  <ElPagination
    layout="total, sizes, prev, pager, next, jumper"
    :total="${Ja}"
    :page-sizes="[10, 20, 30, 40, 50, 100]"
    :style="{ marginTop: '10px' }"
    size="small"
    background
    @change="${ja}"
  ></ElPagination>`:""}
      `),r}}class NTabs extends ContainerNode{constructor(a){super(a);Zp(this,"isNTabs",!0);Zp(this,"isDataNode",!0);a||(this.path="./components/NTabs/NTabs.tsx",this.name="标签页容器",this.props.style.minHeight="100px",this.props.type="",this.props.tabPosition="top");const s=this.component;this.component=markRaw(defineComponent(c=>()=>createVNode$1(s,null,{default:()=>[createVNode$1(ElTabs,{type:this.props.type,tabPosition:this.props.tabPosition},{default:()=>this.children.map((p,d)=>h$1(ElTabPane,{label:p.name,lazy:!0},()=>h$1(p.component)))})]}),{name:"NTabs"}));const o=this.view;this.view=markRaw(defineComponent(c=>(this.props.style.minHeight="",()=>createVNode$1(o,null,null))));const u=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(u,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("类型")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.type,"onUpdate:modelValue":c=>this.props.type=c,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"",label:"默认",size:"small"},null),createVNode$1(ElRadioButton,{value:"card",label:"卡片",size:"small"},null),createVNode$1(ElRadioButton,{value:"border-card",label:"边框卡片",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项卡位置")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElRadioGroup,{modelValue:this.props.tabPosition,"onUpdate:modelValue":c=>this.props.tabPosition=c,size:"small"},{default:()=>[createVNode$1(ElRadioButton,{value:"top",label:"上",size:"small"},null),createVNode$1(ElRadioButton,{value:"right",label:"右",size:"small"},null),createVNode$1(ElRadioButton,{value:"bottom",label:"下",size:"small"},null),createVNode$1(ElRadioButton,{value:"left",label:"左",size:"small"},null)]})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项卡")]}),createVNode$1("div",{class:classes["params-item-content"]},[this.children.map(c=>createVNode$1(ElTag,{key:c,type:"primary",effect:"dark",size:"small"},{default:()=>[c.name,createVNode$1(ElPopover,{width:180,trigger:"click",teleported:!1,placement:"top"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-warning)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"80px"},{default:()=>[createVNode$1(ElFormItem,{label:"选项卡标题"},{default:()=>[createVNode$1(ElInput,{modelValue:c.name,"onUpdate:modelValue":p=>c.name=p},null)]})]})])})]}))])])]})))}toVue(){const a=super.toVue();return a.imports={...a.imports,"element-plus":{ElTabs:"ElTabs",ElTabPane:"ElTabPane"}},a.template=a.template.replace("<slot></slot>",`
  <ElTabs
    type="${this.props.type}"
    tabPosition="${this.props.tabPosition}"
  >
    ${this.children.map((s,o)=>`<ElTabPane label="${s.name}" lazy >
      ${s.uuid}
    </ElTabPane>`).join(`
  `)}
  </ElTabs>
       `),a}}class NTreeSelect extends ItemNode{constructor(node){super(node);Zp(this,"isNTreeSelect",!0);Zp(this,"isFormNode",!0);this.watchStateOptions.push({value:"initData",label:"刷新数据"}),node||(this.path="./components/NTreeSelect/NTreeSelect.tsx",this.name="树形选择",this.props.field=`${NTreeSelect.name.replace(/^N(\w)/,(r,a)=>a.toLowerCase())}_${this.uuid.split("-").at(0)}`,this.props.value="",this.props.options=[{id:Math.random(),label:"默认选项1",value:1,children:[{id:Math.random(),label:"默认选项3",value:3}]},{id:Math.random(),label:"默认选项2",value:2}],this.props.dataUrl="",this.props.dataFn=`function (res) {
  return [
    {
      id: String,
      label: String,
      value: String,
      children: [{}]
    }
  ]
}`,this.props.label="",this.props.placeholder="请选择",this.props.multiple=!1,this.props.checkStrictly=!1,this.props.ruleMessage="请正确输入",this.props.ruleType="none",this.props.changeFn=`function (value) {
  value
}`);const rulesOptions=reactive([{label:"无验证",value:"none"},{label:"默认验证",value:"default"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const rule=computed(()=>generateRule(this.props.ruleType,this.props.ruleMessage)),initData=async()=>{this.props.dataUrl&&(this.props.options=[],await request$1({url:this.props.dataUrl.replace(/\:(\w+)/g,(r,a)=>state[a]),method:"GET"}).then(res=>{if(this.props.dataFn)try{const resData=eval(`(${this.props.dataFn})`)(res);Array.isArray(resData)&&(this.props.options=resData)}catch(r){}}))},initDataDebounce=debounce(()=>{initData()},1e3);watch([()=>this.props.dataUrl,()=>this.props.dataFn],initDataDebounce),initDataDebounce();const watchStateSet=new Set;watch(()=>this.props.watchState,()=>{watchStateSet.forEach(r=>r()),this.props.watchState.forEach(r=>{r.type=="initData"&&watchStateSet.add(watch(()=>state[r.stateProperty],initData))})},{immediate:!0,deep:!0});const onChange=value=>{eval(`(${this.props.changeFn})`)(value)};return onChange(this.props.value),onUnmounted(()=>{watchStateSet.forEach(r=>r())}),()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(ElFormItem,{label:this.props.label,prop:this.props.field,rules:rule.value},{default:()=>[createVNode$1(ElTreeSelect,{data:this.props.options,placeholder:this.props.placeholder,multiple:this.props.multiple,"check-strictly":this.props.checkStrictly,teleported:!1,modelValue:this.props.value,"onUpdate:modelValue":r=>this.props.value=r,onChange},null)]})]})},{name:"NTreeSelect"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{width:"100px",transform:"scale(0.8)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.field,"onUpdate:modelValue":r=>this.props.field=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.label,"onUpdate:modelValue":r=>this.props.label=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElButton,{type:"primary",size:"small",onClick:()=>{const r={id:Math.random(),label:"新选项",value:"值"};this.props.options.push(r)}},{default:()=>[createTextVNode("+ 添加选项")]}),createVNode$1(ElTree,{data:this.props.options,"node-key":"id","default-expand-all":!0,"expand-on-click-node":!1},{default:({node:r,data:a})=>createVNode$1("span",{style:{flex:"1",display:"flex",justifyContent:"space-between"}},[createVNode$1("span",null,[a.label]),createVNode$1("span",null,[createVNode$1(ElPopover,{width:180,trigger:"click",teleported:!1,placement:"left"},{reference:()=>createVNode$1(ElIcon,{color:"var(--el-color-primary)"},{default:()=>[createVNode$1(edit,null,null)]}),default:()=>createVNode$1(Fragment,null,[createVNode$1(ElForm,{"label-width":"50px"},{default:()=>[createVNode$1(ElFormItem,{label:"标签"},{default:()=>[createVNode$1(ElInput,{modelValue:a.label,"onUpdate:modelValue":s=>a.label=s},null)]}),createVNode$1(ElFormItem,{label:"值"},{default:()=>[createVNode$1(ElInput,{modelValue:a.value,"onUpdate:modelValue":s=>a.value=s},null)]})]})])}),h$1(ElIcon,{color:"var(--el-color-warning)",onClick:()=>{const s={id:Math.random(),label:"新选项",value:"值"};a.children||(a.children=[]),a.children.push(s),this.props.options=[...this.props.options]}},{default:()=>createVNode$1(plus$1,null,null)}),h$1(ElIcon,{color:"var(--el-color-danger)",onClick:()=>{const s=r.parent,o=s.data.children||s.data,u=o.findIndex(c=>c.value===a.value);o.splice(u,1)}},{default:()=>createVNode$1(_delete,null,null)})])])})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选项数据url"),createVNode$1(_sfc_main$d,{content:"可引用全局状态变量state的属性，例子：/abc/:def引用state.def"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.dataUrl,"onUpdate:modelValue":r=>this.props.dataUrl=r||"",size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"接口url不为空时启用;res：接口返回数据，可访问全局状态变量state"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("占位文本")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.placeholder,"onUpdate:modelValue":r=>this.props.placeholder=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("多选")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.multiple,"onUpdate:modelValue":r=>{this.props.multiple=r,r?this.props.value=[]:this.props.value=""}},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("选择任意级别")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.checkStrictly,"onUpdate:modelValue":r=>this.props.checkStrictly=r},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证规则")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.ruleType,"onUpdate:modelValue":r=>this.props.ruleType=r,size:"small",teleported:!1},{default:()=>rulesOptions.map(r=>createVNode$1(ElOption,{key:r.value,label:r.label,value:r.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证消息")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.ruleMessage,"onUpdate:modelValue":r=>this.props.ruleMessage=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值变化处理函数"),createVNode$1(_sfc_main$d,{content:"值变化后调用；可访问全局状态变量state，value：组件的值"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.changeFn,"onUpdate:modelValue":r=>this.props.changeFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_value`,c=`${a}_${s}_options`,p=`${a}_${s}_rule`,d=`${a}_${s}_initData`,_=`${a}_${s}_onChange`,ja=JSON.stringify(this.props.options),Ja=JSON.stringify(generateRule(this.props.ruleType,this.props.ruleMessage));return r.imports={...r.imports,vue:{ref:"ref"},"element-plus":{ElFormItem:"ElFormItem",ElTreeSelect:"ElTreeSelect"},"./imports/request.js":{default:"request"}},r.importFiles={...r.importFiles,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ${this.props.multiple?"ref([])":"ref('')"}
const ${c} = ref(${ja})
const ${p} = ref(${Ja})

${this.props.dataUrl?`const ${d} = async () => {
  ${c}.value = []

  await request({
    url: '${this.props.dataUrl}'.replace(/\\:(\\w+)/g, (match, p1) => state[p1]),
    method: 'GET'
  }).then((res) => {
    ${c}.value = (${this.props.dataFn||"() => []"})(res)
  })
}
${d}()`:""}
${this.props.watchState.length>0?`
${this.props.watchState.map(ec=>{if(ec.type=="initData")return`watch(() => state.${ec.stateProperty}, ${d})`}).join(`
`)}
    `:""}
const ${_} = (value) => {
  (${this.props.changeFn})(value)
}
  ${_}(${typeof this.props.value=="string"?`'${this.props.value}'`:this.props.value})
      `,r.template=r.template.replace("<slot></slot>",`
  <ElFormItem label="${this.props.label}" prop="${this.props.field}" :rules="${p}">
    <ElTreeSelect
      :data="${c}"
      v-model="${u}"
      :multiple="${this.props.multiple}"
      :check-strictly="${this.props.checkStrictly}"
      placeholder="${this.props.placeholder}"
      :teleported="false"
      @change="${_}"
    >
    </ElTreeSelect>
  </ElFormItem>
      `),r}}class NUpload extends ItemNode{constructor(node){super(node);Zp(this,"isNUpload",!0);Zp(this,"isFormNode",!0);node||(this.path="./components/NUpload/NUpload.tsx",this.name="上传",this.props.field=`${NUpload.name.replace(/^N(\w)/,(r,a)=>a.toLowerCase())}_${this.uuid.split("-").at(0)}`,this.props.value=[],this.props.label="",this.props.ruleMessage="请选择文件",this.props.ruleType="none",this.props.dataFn=`function (res) {
  return String
}`,this.props.action="",this.props.tip="",this.props.multiple=!1,this.props.drag=!1,this.props.name="file",this.props.limit=null,this.props.changeFn=`function (value) {
  value
}`);const rulesOptions=reactive([{label:"无验证",value:"none"},{label:"默认验证",value:"default"}]),pComponent=this.component;this.component=markRaw(defineComponent(props=>{const rule=computed(()=>generateRule(this.props.ruleType,this.props.ruleMessage)),onSuccess=(response,uploadFile,uploadFiles)=>{try{uploadFiles.forEach(element=>{if(element.response){const resData=eval(`(${this.props.dataFn})`)(element.response);element.url=resData}})}catch(r){console.log(r)}},onChange=value=>{eval(`(${this.props.changeFn})`)(value)};return()=>createVNode$1(pComponent,null,{default:()=>[createVNode$1(ElFormItem,{label:this.props.label,prop:this.props.field,rules:rule.value},{default:()=>[createVNode$1(ElUpload,{fileList:this.props.value,"onUpdate:fileList":r=>this.props.value=r,style:{width:"100%"},name:this.props.name,action:this.props.action.includes("http")?this.props.action:config.baseUrl+this.props.action,headers:{Authorization:config.token},multiple:this.props.multiple,limit:this.props.limit,drag:this.props.drag,onSuccess,onChange:()=>onChange(this.props.value)},{default:()=>this.props.drag?createVNode$1(ElIcon,{size:70,color:"var(--el-text-color-regular)"},{default:()=>[createVNode$1(uploadFilled,null,null)]}):createVNode$1(ElButton,{type:"primary"},{default:()=>[createTextVNode("上传")]}),tip:()=>createVNode$1("div",{style:{color:"var(--el-text-color-regular)"}},[this.props.tip])})]})]})},{name:"NUpload"}));const pView=this.view;this.view=markRaw(defineComponent(r=>()=>createVNode$1(pView,null,{default:()=>[createVNode$1(this.component,{style:{transform:"scale(0.6)"}},null)]})));const pParams=this.params;this.params=markRaw(defineComponent(()=>()=>createVNode$1(pParams,null,{default:()=>[createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("表单字段")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.field,"onUpdate:modelValue":r=>this.props.field=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("上传地址")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.action,"onUpdate:modelValue":r=>this.props.action=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("接口数据处理函数"),createVNode$1(_sfc_main$d,{content:"需返回文件url"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.dataFn,"onUpdate:modelValue":r=>this.props.dataFn=r||""},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("上传的文件字段名")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.name,"onUpdate:modelValue":r=>this.props.name=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("标签")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.label,"onUpdate:modelValue":r=>this.props.label=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("多选")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.multiple,"onUpdate:modelValue":r=>this.props.multiple=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("上传文件数量")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInputNumber,{modelValue:this.props.limit,"onUpdate:modelValue":r=>this.props.limit=r,min:1,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("拖拽上传")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSwitch,{modelValue:this.props.drag,"onUpdate:modelValue":r=>this.props.drag=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("提示内容")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.tip,"onUpdate:modelValue":r=>this.props.tip=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证规则")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElSelect,{modelValue:this.props.ruleType,"onUpdate:modelValue":r=>this.props.ruleType=r,size:"small",teleported:!1},{default:()=>rulesOptions.map(r=>createVNode$1(ElOption,{key:r.value,label:r.label,value:r.value},null))})])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("验证消息")]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(ElInput,{modelValue:this.props.ruleMessage,"onUpdate:modelValue":r=>this.props.ruleMessage=r,size:"small"},null)])]),createVNode$1("div",{class:classes["params-item"]},[createVNode$1(ElText,{class:classes["params-item-label"],type:"info"},{default:()=>[createTextVNode("值变化处理函数"),createVNode$1(_sfc_main$d,{content:"值变化后调用；可访问全局状态变量state，value：组件的值"},null)]}),createVNode$1("div",{class:classes["params-item-content"]},[createVNode$1(CodeEditor,{modelValue:this.props.changeFn,"onUpdate:modelValue":r=>this.props.changeFn=r||""},null)])])]})))}toVue(){const r=super.toVue(),a=r.name,[s,o]=this.uuid.split("-"),u=`${a}_${s}_value`,c=`${a}_${s}_rule`,p=`${a}_${s}_onSuccess`,d=`${a}_${s}_onChange`,_=JSON.stringify(generateRule(this.props.ruleType,this.props.ruleMessage));return r.imports={...r.imports,vue:{ref:"ref"},"element-plus":{ElUpload:"ElUpload",ElFormItem:"ElFormItem",ElIcon:"ElIcon"},"@element-plus/icons-vue":{UploadFilled:"UploadFilled"},"./imports/request.js":{config:"config"},"./imports/store.js":{state:"state"}},r.importFiles={...r.importFiles,"request.js":requestRaw},r.script=`
${r.script}
const ${u} = ref([])
const ${c} = ref(${_})

const ${p} = (response, uploadFile, uploadFiles) => {
  uploadFiles.forEach((element) => {
    if (element.response) {
      const resData = (${this.props.dataFn||"() => {}"})(element.response)
      element.url = resData
    }
  })
}

const ${d} = (value) => {
  (${this.props.changeFn})(value)
}
      `,r.template=r.template.replace("<slot></slot>",`
  <ElFormItem label="${this.props.label}" prop="${this.props.field}" :rules="${c}">
    <ElUpload
      v-model:fileList="${u}"
      style="width: 100%;"
      name="${this.props.name}"
      :action="${this.props.action.includes("http")?`'${this.props.action}'`:`config.baseUrl + '${this.props.action}'`}"
      :headers="{ Authorization: config.token }"
      :multiple="${this.props.multiple}"
      :limit="${this.props.limit}"
      :drag="${this.props.drag}"
      :on-success="${p}"
      :on-change="() => ${d}(${u})"
    >
      ${this.props.drag?'<ElIcon :size="70" color="var(--el-text-color-regular)"><UploadFilled /></ElIcon>':'<ElButton type="primary">上传</ElButton>'}
      <template #tip>
        <div style="color: var(--el-text-color-regular);">${this.props.tip}</div>
      </template>
    </ElUpload>
  </ElFormItem>
      `),r}}var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,r){(function(a){n.exports=a()})(function(){return function a(s,o,u){function c(_,ja){if(!o[_]){if(!s[_]){var Ja=typeof commonjsRequire=="function"&&commonjsRequire;if(!ja&&Ja)return Ja(_,!0);if(p)return p(_,!0);var ec=new Error("Cannot find module '"+_+"'");throw ec.code="MODULE_NOT_FOUND",ec}var tc=o[_]={exports:{}};s[_][0].call(tc.exports,function(rc){var nc=s[_][1][rc];return c(nc||rc)},tc,tc.exports,a,s,o,u)}return o[_].exports}for(var p=typeof commonjsRequire=="function"&&commonjsRequire,d=0;d<u.length;d++)c(u[d]);return c}({1:[function(a,s,o){var u=a("./utils"),c=a("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(d){for(var _,ja,Ja,ec,tc,rc,nc,ic=[],uc=0,eh=d.length,rh=eh,ah=u.getTypeOf(d)!=="string";uc<d.length;)rh=eh-uc,Ja=ah?(_=d[uc++],ja=uc<eh?d[uc++]:0,uc<eh?d[uc++]:0):(_=d.charCodeAt(uc++),ja=uc<eh?d.charCodeAt(uc++):0,uc<eh?d.charCodeAt(uc++):0),ec=_>>2,tc=(3&_)<<4|ja>>4,rc=1<rh?(15&ja)<<2|Ja>>6:64,nc=2<rh?63&Ja:64,ic.push(p.charAt(ec)+p.charAt(tc)+p.charAt(rc)+p.charAt(nc));return ic.join("")},o.decode=function(d){var _,ja,Ja,ec,tc,rc,nc=0,ic=0,uc="data:";if(d.substr(0,uc.length)===uc)throw new Error("Invalid base64 input, it looks like a data url.");var eh,rh=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===p.charAt(64)&&rh--,d.charAt(d.length-2)===p.charAt(64)&&rh--,rh%1!=0)throw new Error("Invalid base64 input, bad content length.");for(eh=c.uint8array?new Uint8Array(0|rh):new Array(0|rh);nc<d.length;)_=p.indexOf(d.charAt(nc++))<<2|(ec=p.indexOf(d.charAt(nc++)))>>4,ja=(15&ec)<<4|(tc=p.indexOf(d.charAt(nc++)))>>2,Ja=(3&tc)<<6|(rc=p.indexOf(d.charAt(nc++))),eh[ic++]=_,tc!==64&&(eh[ic++]=ja),rc!==64&&(eh[ic++]=Ja);return eh}},{"./support":30,"./utils":32}],2:[function(a,s,o){var u=a("./external"),c=a("./stream/DataWorker"),p=a("./stream/Crc32Probe"),d=a("./stream/DataLengthProbe");function _(ja,Ja,ec,tc,rc){this.compressedSize=ja,this.uncompressedSize=Ja,this.crc32=ec,this.compression=tc,this.compressedContent=rc}_.prototype={getContentWorker:function(){var ja=new c(u.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),Ja=this;return ja.on("end",function(){if(this.streamInfo.data_length!==Ja.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),ja},getCompressedWorker:function(){return new c(u.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(ja,Ja,ec){return ja.pipe(new p).pipe(new d("uncompressedSize")).pipe(Ja.compressWorker(ec)).pipe(new d("compressedSize")).withStreamInfo("compression",Ja)},s.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,s,o){var u=a("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new u("STORE compression")},uncompressWorker:function(){return new u("STORE decompression")}},o.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,s,o){var u=a("./utils"),c=function(){for(var p,d=[],_=0;_<256;_++){p=_;for(var ja=0;ja<8;ja++)p=1&p?3988292384^p>>>1:p>>>1;d[_]=p}return d}();s.exports=function(p,d){return p!==void 0&&p.length?u.getTypeOf(p)!=="string"?function(_,ja,Ja,ec){var tc=c,rc=ec+Ja;_^=-1;for(var nc=ec;nc<rc;nc++)_=_>>>8^tc[255&(_^ja[nc])];return-1^_}(0|d,p,p.length,0):function(_,ja,Ja,ec){var tc=c,rc=ec+Ja;_^=-1;for(var nc=ec;nc<rc;nc++)_=_>>>8^tc[255&(_^ja.charCodeAt(nc))];return-1^_}(0|d,p,p.length,0):0}},{"./utils":32}],5:[function(a,s,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(a,s,o){var u=null;u=typeof Promise<"u"?Promise:a("lie"),s.exports={Promise:u}},{lie:37}],7:[function(a,s,o){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=a("pako"),p=a("./utils"),d=a("./stream/GenericWorker"),_=u?"uint8array":"array";function ja(Ja,ec){d.call(this,"FlateWorker/"+Ja),this._pako=null,this._pakoAction=Ja,this._pakoOptions=ec,this.meta={}}o.magic="\b\0",p.inherits(ja,d),ja.prototype.processChunk=function(Ja){this.meta=Ja.meta,this._pako===null&&this._createPako(),this._pako.push(p.transformTo(_,Ja.data),!1)},ja.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},ja.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},ja.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Ja=this;this._pako.onData=function(ec){Ja.push({data:ec,meta:Ja.meta})}},o.compressWorker=function(Ja){return new ja("Deflate",Ja)},o.uncompressWorker=function(){return new ja("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,s,o){function u(tc,rc){var nc,ic="";for(nc=0;nc<rc;nc++)ic+=String.fromCharCode(255&tc),tc>>>=8;return ic}function c(tc,rc,nc,ic,uc,eh){var rh,ah,ih=tc.file,oh=tc.compression,uh=eh!==_.utf8encode,ch=p.transformTo("string",eh(ih.name)),hh=p.transformTo("string",_.utf8encode(ih.name)),dh=ih.comment,gh=p.transformTo("string",eh(dh)),fh=p.transformTo("string",_.utf8encode(dh)),vh=hh.length!==ih.name.length,ph=fh.length!==dh.length,yh="",xh="",_h="",bh=ih.dir,Dh=ih.date,Th={crc32:0,compressedSize:0,uncompressedSize:0};rc&&!nc||(Th.crc32=tc.crc32,Th.compressedSize=tc.compressedSize,Th.uncompressedSize=tc.uncompressedSize);var Ch=0;rc&&(Ch|=8),uh||!vh&&!ph||(Ch|=2048);var wh=0,Nh=0;bh&&(wh|=16),uc==="UNIX"?(Nh=798,wh|=function(kh,Lh){var Fh=kh;return kh||(Fh=Lh?16893:33204),(65535&Fh)<<16}(ih.unixPermissions,bh)):(Nh=20,wh|=function(kh){return 63&(kh||0)}(ih.dosPermissions)),rh=Dh.getUTCHours(),rh<<=6,rh|=Dh.getUTCMinutes(),rh<<=5,rh|=Dh.getUTCSeconds()/2,ah=Dh.getUTCFullYear()-1980,ah<<=4,ah|=Dh.getUTCMonth()+1,ah<<=5,ah|=Dh.getUTCDate(),vh&&(xh=u(1,1)+u(ja(ch),4)+hh,yh+="up"+u(xh.length,2)+xh),ph&&(_h=u(1,1)+u(ja(gh),4)+fh,yh+="uc"+u(_h.length,2)+_h);var Rh="";return Rh+=`
\0`,Rh+=u(Ch,2),Rh+=oh.magic,Rh+=u(rh,2),Rh+=u(ah,2),Rh+=u(Th.crc32,4),Rh+=u(Th.compressedSize,4),Rh+=u(Th.uncompressedSize,4),Rh+=u(ch.length,2),Rh+=u(yh.length,2),{fileRecord:Ja.LOCAL_FILE_HEADER+Rh+ch+yh,dirRecord:Ja.CENTRAL_FILE_HEADER+u(Nh,2)+Rh+u(gh.length,2)+"\0\0\0\0"+u(wh,4)+u(ic,4)+ch+yh+gh}}var p=a("../utils"),d=a("../stream/GenericWorker"),_=a("../utf8"),ja=a("../crc32"),Ja=a("../signature");function ec(tc,rc,nc,ic){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=rc,this.zipPlatform=nc,this.encodeFileName=ic,this.streamFiles=tc,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.inherits(ec,d),ec.prototype.push=function(tc){var rc=tc.meta.percent||0,nc=this.entriesCount,ic=this._sources.length;this.accumulate?this.contentBuffer.push(tc):(this.bytesWritten+=tc.data.length,d.prototype.push.call(this,{data:tc.data,meta:{currentFile:this.currentFile,percent:nc?(rc+100*(nc-ic-1))/nc:100}}))},ec.prototype.openedSource=function(tc){this.currentSourceOffset=this.bytesWritten,this.currentFile=tc.file.name;var rc=this.streamFiles&&!tc.file.dir;if(rc){var nc=c(tc,rc,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:nc.fileRecord,meta:{percent:0}})}else this.accumulate=!0},ec.prototype.closedSource=function(tc){this.accumulate=!1;var rc=this.streamFiles&&!tc.file.dir,nc=c(tc,rc,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(nc.dirRecord),rc)this.push({data:function(ic){return Ja.DATA_DESCRIPTOR+u(ic.crc32,4)+u(ic.compressedSize,4)+u(ic.uncompressedSize,4)}(tc),meta:{percent:100}});else for(this.push({data:nc.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},ec.prototype.flush=function(){for(var tc=this.bytesWritten,rc=0;rc<this.dirRecords.length;rc++)this.push({data:this.dirRecords[rc],meta:{percent:100}});var nc=this.bytesWritten-tc,ic=function(uc,eh,rh,ah,ih){var oh=p.transformTo("string",ih(ah));return Ja.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(uc,2)+u(uc,2)+u(eh,4)+u(rh,4)+u(oh.length,2)+oh}(this.dirRecords.length,nc,tc,this.zipComment,this.encodeFileName);this.push({data:ic,meta:{percent:100}})},ec.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},ec.prototype.registerPrevious=function(tc){this._sources.push(tc);var rc=this;return tc.on("data",function(nc){rc.processChunk(nc)}),tc.on("end",function(){rc.closedSource(rc.previous.streamInfo),rc._sources.length?rc.prepareNextSource():rc.end()}),tc.on("error",function(nc){rc.error(nc)}),this},ec.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},ec.prototype.error=function(tc){var rc=this._sources;if(!d.prototype.error.call(this,tc))return!1;for(var nc=0;nc<rc.length;nc++)try{rc[nc].error(tc)}catch{}return!0},ec.prototype.lock=function(){d.prototype.lock.call(this);for(var tc=this._sources,rc=0;rc<tc.length;rc++)tc[rc].lock()},s.exports=ec},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,s,o){var u=a("../compressions"),c=a("./ZipFileWorker");o.generateWorker=function(p,d,_){var ja=new c(d.streamFiles,_,d.platform,d.encodeFileName),Ja=0;try{p.forEach(function(ec,tc){Ja++;var rc=function(eh,rh){var ah=eh||rh,ih=u[ah];if(!ih)throw new Error(ah+" is not a valid compression method !");return ih}(tc.options.compression,d.compression),nc=tc.options.compressionOptions||d.compressionOptions||{},ic=tc.dir,uc=tc.date;tc._compressWorker(rc,nc).withStreamInfo("file",{name:ec,dir:ic,date:uc,comment:tc.comment||"",unixPermissions:tc.unixPermissions,dosPermissions:tc.dosPermissions}).pipe(ja)}),ja.entriesCount=Ja}catch(ec){ja.error(ec)}return ja}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,s,o){function u(){if(!(this instanceof u))return new u;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new u;for(var p in this)typeof this[p]!="function"&&(c[p]=this[p]);return c}}(u.prototype=a("./object")).loadAsync=a("./load"),u.support=a("./support"),u.defaults=a("./defaults"),u.version="3.10.1",u.loadAsync=function(c,p){return new u().loadAsync(c,p)},u.external=a("./external"),s.exports=u},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,s,o){var u=a("./utils"),c=a("./external"),p=a("./utf8"),d=a("./zipEntries"),_=a("./stream/Crc32Probe"),ja=a("./nodejsUtils");function Ja(ec){return new c.Promise(function(tc,rc){var nc=ec.decompressed.getContentWorker().pipe(new _);nc.on("error",function(ic){rc(ic)}).on("end",function(){nc.streamInfo.crc32!==ec.decompressed.crc32?rc(new Error("Corrupted zip : CRC32 mismatch")):tc()}).resume()})}s.exports=function(ec,tc){var rc=this;return tc=u.extend(tc||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:p.utf8decode}),ja.isNode&&ja.isStream(ec)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",ec,!0,tc.optimizedBinaryString,tc.base64).then(function(nc){var ic=new d(tc);return ic.load(nc),ic}).then(function(nc){var ic=[c.Promise.resolve(nc)],uc=nc.files;if(tc.checkCRC32)for(var eh=0;eh<uc.length;eh++)ic.push(Ja(uc[eh]));return c.Promise.all(ic)}).then(function(nc){for(var ic=nc.shift(),uc=ic.files,eh=0;eh<uc.length;eh++){var rh=uc[eh],ah=rh.fileNameStr,ih=u.resolve(rh.fileNameStr);rc.file(ih,rh.decompressed,{binary:!0,optimizedBinaryString:!0,date:rh.date,dir:rh.dir,comment:rh.fileCommentStr.length?rh.fileCommentStr:null,unixPermissions:rh.unixPermissions,dosPermissions:rh.dosPermissions,createFolders:tc.createFolders}),rh.dir||(rc.file(ih).unsafeOriginalName=ah)}return ic.zipComment.length&&(rc.comment=ic.zipComment),rc})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,s,o){var u=a("../utils"),c=a("../stream/GenericWorker");function p(d,_){c.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(_)}u.inherits(p,c),p.prototype._bindStream=function(d){var _=this;(this._stream=d).pause(),d.on("data",function(ja){_.push({data:ja,meta:{percent:0}})}).on("error",function(ja){_.isPaused?this.generatedError=ja:_.error(ja)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},p.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=p},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,s,o){var u=a("readable-stream").Readable;function c(p,d,_){u.call(this,d),this._helper=p;var ja=this;p.on("data",function(Ja,ec){ja.push(Ja)||ja._helper.pause(),_&&_(ec)}).on("error",function(Ja){ja.emit("error",Ja)}).on("end",function(){ja.push(null)})}a("../utils").inherits(c,u),c.prototype._read=function(){this._helper.resume()},s.exports=c},{"../utils":32,"readable-stream":16}],14:[function(a,s,o){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(u,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(u,c);if(typeof u=="number")throw new Error('The "data" argument must not be a number');return new Buffer(u,c)},allocBuffer:function(u){if(Buffer.alloc)return Buffer.alloc(u);var c=new Buffer(u);return c.fill(0),c},isBuffer:function(u){return Buffer.isBuffer(u)},isStream:function(u){return u&&typeof u.on=="function"&&typeof u.pause=="function"&&typeof u.resume=="function"}}},{}],15:[function(a,s,o){function u(ih,oh,uh){var ch,hh=p.getTypeOf(oh),dh=p.extend(uh||{},ja);dh.date=dh.date||new Date,dh.compression!==null&&(dh.compression=dh.compression.toUpperCase()),typeof dh.unixPermissions=="string"&&(dh.unixPermissions=parseInt(dh.unixPermissions,8)),dh.unixPermissions&&16384&dh.unixPermissions&&(dh.dir=!0),dh.dosPermissions&&16&dh.dosPermissions&&(dh.dir=!0),dh.dir&&(ih=uc(ih)),dh.createFolders&&(ch=ic(ih))&&eh.call(this,ch,!0);var gh=hh==="string"&&dh.binary===!1&&dh.base64===!1;uh&&uh.binary!==void 0||(dh.binary=!gh),(oh instanceof Ja&&oh.uncompressedSize===0||dh.dir||!oh||oh.length===0)&&(dh.base64=!1,dh.binary=!0,oh="",dh.compression="STORE",hh="string");var fh=null;fh=oh instanceof Ja||oh instanceof d?oh:rc.isNode&&rc.isStream(oh)?new nc(ih,oh):p.prepareContent(ih,oh,dh.binary,dh.optimizedBinaryString,dh.base64);var vh=new ec(ih,fh,dh);this.files[ih]=vh}var c=a("./utf8"),p=a("./utils"),d=a("./stream/GenericWorker"),_=a("./stream/StreamHelper"),ja=a("./defaults"),Ja=a("./compressedObject"),ec=a("./zipObject"),tc=a("./generate"),rc=a("./nodejsUtils"),nc=a("./nodejs/NodejsStreamInputAdapter"),ic=function(ih){ih.slice(-1)==="/"&&(ih=ih.substring(0,ih.length-1));var oh=ih.lastIndexOf("/");return 0<oh?ih.substring(0,oh):""},uc=function(ih){return ih.slice(-1)!=="/"&&(ih+="/"),ih},eh=function(ih,oh){return oh=oh!==void 0?oh:ja.createFolders,ih=uc(ih),this.files[ih]||u.call(this,ih,null,{dir:!0,createFolders:oh}),this.files[ih]};function rh(ih){return Object.prototype.toString.call(ih)==="[object RegExp]"}var ah={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ih){var oh,uh,ch;for(oh in this.files)ch=this.files[oh],(uh=oh.slice(this.root.length,oh.length))&&oh.slice(0,this.root.length)===this.root&&ih(uh,ch)},filter:function(ih){var oh=[];return this.forEach(function(uh,ch){ih(uh,ch)&&oh.push(ch)}),oh},file:function(ih,oh,uh){if(arguments.length!==1)return ih=this.root+ih,u.call(this,ih,oh,uh),this;if(rh(ih)){var ch=ih;return this.filter(function(dh,gh){return!gh.dir&&ch.test(dh)})}var hh=this.files[this.root+ih];return hh&&!hh.dir?hh:null},folder:function(ih){if(!ih)return this;if(rh(ih))return this.filter(function(hh,dh){return dh.dir&&ih.test(hh)});var oh=this.root+ih,uh=eh.call(this,oh),ch=this.clone();return ch.root=uh.name,ch},remove:function(ih){ih=this.root+ih;var oh=this.files[ih];if(oh||(ih.slice(-1)!=="/"&&(ih+="/"),oh=this.files[ih]),oh&&!oh.dir)delete this.files[ih];else for(var uh=this.filter(function(hh,dh){return dh.name.slice(0,ih.length)===ih}),ch=0;ch<uh.length;ch++)delete this.files[uh[ch].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ih){var oh,uh={};try{if((uh=p.extend(ih||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=uh.type.toLowerCase(),uh.compression=uh.compression.toUpperCase(),uh.type==="binarystring"&&(uh.type="string"),!uh.type)throw new Error("No output type specified.");p.checkSupport(uh.type),uh.platform!=="darwin"&&uh.platform!=="freebsd"&&uh.platform!=="linux"&&uh.platform!=="sunos"||(uh.platform="UNIX"),uh.platform==="win32"&&(uh.platform="DOS");var ch=uh.comment||this.comment||"";oh=tc.generateWorker(this,uh,ch)}catch(hh){(oh=new d("error")).error(hh)}return new _(oh,uh.type||"string",uh.mimeType)},generateAsync:function(ih,oh){return this.generateInternalStream(ih).accumulate(oh)},generateNodeStream:function(ih,oh){return(ih=ih||{}).type||(ih.type="nodebuffer"),this.generateInternalStream(ih).toNodejsStream(oh)}};s.exports=ah},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,s,o){s.exports=a("stream")},{stream:void 0}],17:[function(a,s,o){var u=a("./DataReader");function c(p){u.call(this,p);for(var d=0;d<this.data.length;d++)p[d]=255&p[d]}a("../utils").inherits(c,u),c.prototype.byteAt=function(p){return this.data[this.zero+p]},c.prototype.lastIndexOfSignature=function(p){for(var d=p.charCodeAt(0),_=p.charCodeAt(1),ja=p.charCodeAt(2),Ja=p.charCodeAt(3),ec=this.length-4;0<=ec;--ec)if(this.data[ec]===d&&this.data[ec+1]===_&&this.data[ec+2]===ja&&this.data[ec+3]===Ja)return ec-this.zero;return-1},c.prototype.readAndCheckSignature=function(p){var d=p.charCodeAt(0),_=p.charCodeAt(1),ja=p.charCodeAt(2),Ja=p.charCodeAt(3),ec=this.readData(4);return d===ec[0]&&_===ec[1]&&ja===ec[2]&&Ja===ec[3]},c.prototype.readData=function(p){if(this.checkOffset(p),p===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,d},s.exports=c},{"../utils":32,"./DataReader":18}],18:[function(a,s,o){var u=a("../utils");function c(p){this.data=p,this.length=p.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(p){this.checkIndex(this.index+p)},checkIndex:function(p){if(this.length<this.zero+p||p<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+p+"). Corrupted zip ?")},setIndex:function(p){this.checkIndex(p),this.index=p},skip:function(p){this.setIndex(this.index+p)},byteAt:function(){},readInt:function(p){var d,_=0;for(this.checkOffset(p),d=this.index+p-1;d>=this.index;d--)_=(_<<8)+this.byteAt(d);return this.index+=p,_},readString:function(p){return u.transformTo("string",this.readData(p))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var p=this.readInt(4);return new Date(Date.UTC(1980+(p>>25&127),(p>>21&15)-1,p>>16&31,p>>11&31,p>>5&63,(31&p)<<1))}},s.exports=c},{"../utils":32}],19:[function(a,s,o){var u=a("./Uint8ArrayReader");function c(p){u.call(this,p)}a("../utils").inherits(c,u),c.prototype.readData=function(p){this.checkOffset(p);var d=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,d},s.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,s,o){var u=a("./DataReader");function c(p){u.call(this,p)}a("../utils").inherits(c,u),c.prototype.byteAt=function(p){return this.data.charCodeAt(this.zero+p)},c.prototype.lastIndexOfSignature=function(p){return this.data.lastIndexOf(p)-this.zero},c.prototype.readAndCheckSignature=function(p){return p===this.readData(4)},c.prototype.readData=function(p){this.checkOffset(p);var d=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,d},s.exports=c},{"../utils":32,"./DataReader":18}],21:[function(a,s,o){var u=a("./ArrayReader");function c(p){u.call(this,p)}a("../utils").inherits(c,u),c.prototype.readData=function(p){if(this.checkOffset(p),p===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+p);return this.index+=p,d},s.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(a,s,o){var u=a("../utils"),c=a("../support"),p=a("./ArrayReader"),d=a("./StringReader"),_=a("./NodeBufferReader"),ja=a("./Uint8ArrayReader");s.exports=function(Ja){var ec=u.getTypeOf(Ja);return u.checkSupport(ec),ec!=="string"||c.uint8array?ec==="nodebuffer"?new _(Ja):c.uint8array?new ja(u.transformTo("uint8array",Ja)):new p(u.transformTo("array",Ja)):new d(Ja)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,s,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,s,o){var u=a("./GenericWorker"),c=a("../utils");function p(d){u.call(this,"ConvertWorker to "+d),this.destType=d}c.inherits(p,u),p.prototype.processChunk=function(d){this.push({data:c.transformTo(this.destType,d.data),meta:d.meta})},s.exports=p},{"../utils":32,"./GenericWorker":28}],25:[function(a,s,o){var u=a("./GenericWorker"),c=a("../crc32");function p(){u.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(p,u),p.prototype.processChunk=function(d){this.streamInfo.crc32=c(d.data,this.streamInfo.crc32||0),this.push(d)},s.exports=p},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,s,o){var u=a("../utils"),c=a("./GenericWorker");function p(d){c.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}u.inherits(p,c),p.prototype.processChunk=function(d){if(d){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+d.data.length}c.prototype.processChunk.call(this,d)},s.exports=p},{"../utils":32,"./GenericWorker":28}],27:[function(a,s,o){var u=a("../utils"),c=a("./GenericWorker");function p(d){c.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(ja){_.dataIsReady=!0,_.data=ja,_.max=ja&&ja.length||0,_.type=u.getTypeOf(ja),_.isPaused||_._tickAndRepeat()},function(ja){_.error(ja)})}u.inherits(p,c),p.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,u.delay(this._tickAndRepeat,[],this)),!0)},p.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(u.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},p.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,_);break;case"uint8array":d=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":d=this.data.slice(this.index,_)}return this.index=_,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=p},{"../utils":32,"./GenericWorker":28}],28:[function(a,s,o){function u(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}u.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,p){return this._listeners[c].push(p),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,p){if(this._listeners[c])for(var d=0;d<this._listeners[c].length;d++)this._listeners[c][d].call(this,p)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var p=this;return c.on("data",function(d){p.processChunk(d)}),c.on("end",function(){p.end()}),c.on("error",function(d){p.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,p){return this.extraStreamInfo[c]=p,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},s.exports=u},{}],29:[function(a,s,o){var u=a("../utils"),c=a("./ConvertWorker"),p=a("./GenericWorker"),d=a("../base64"),_=a("../support"),ja=a("../external"),Ja=null;if(_.nodestream)try{Ja=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function ec(rc,nc){return new ja.Promise(function(ic,uc){var eh=[],rh=rc._internalType,ah=rc._outputType,ih=rc._mimeType;rc.on("data",function(oh,uh){eh.push(oh),nc&&nc(uh)}).on("error",function(oh){eh=[],uc(oh)}).on("end",function(){try{var oh=function(uh,ch,hh){switch(uh){case"blob":return u.newBlob(u.transformTo("arraybuffer",ch),hh);case"base64":return d.encode(ch);default:return u.transformTo(uh,ch)}}(ah,function(uh,ch){var hh,dh=0,gh=null,fh=0;for(hh=0;hh<ch.length;hh++)fh+=ch[hh].length;switch(uh){case"string":return ch.join("");case"array":return Array.prototype.concat.apply([],ch);case"uint8array":for(gh=new Uint8Array(fh),hh=0;hh<ch.length;hh++)gh.set(ch[hh],dh),dh+=ch[hh].length;return gh;case"nodebuffer":return Buffer.concat(ch);default:throw new Error("concat : unsupported type '"+uh+"'")}}(rh,eh),ih);ic(oh)}catch(uh){uc(uh)}eh=[]}).resume()})}function tc(rc,nc,ic){var uc=nc;switch(nc){case"blob":case"arraybuffer":uc="uint8array";break;case"base64":uc="string"}try{this._internalType=uc,this._outputType=nc,this._mimeType=ic,u.checkSupport(uc),this._worker=rc.pipe(new c(uc)),rc.lock()}catch(eh){this._worker=new p("error"),this._worker.error(eh)}}tc.prototype={accumulate:function(rc){return ec(this,rc)},on:function(rc,nc){var ic=this;return rc==="data"?this._worker.on(rc,function(uc){nc.call(ic,uc.data,uc.meta)}):this._worker.on(rc,function(){u.delay(nc,arguments,ic)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(rc){if(u.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new Ja(this,{objectMode:this._outputType!=="nodebuffer"},rc)}},s.exports=tc},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,s,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var u=new ArrayBuffer(0);try{o.blob=new Blob([u],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(u),o.blob=c.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!a("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(a,s,o){for(var u=a("./utils"),c=a("./support"),p=a("./nodejsUtils"),d=a("./stream/GenericWorker"),_=new Array(256),ja=0;ja<256;ja++)_[ja]=252<=ja?6:248<=ja?5:240<=ja?4:224<=ja?3:192<=ja?2:1;_[254]=_[254]=1;function Ja(){d.call(this,"utf-8 decode"),this.leftOver=null}function ec(){d.call(this,"utf-8 encode")}o.utf8encode=function(tc){return c.nodebuffer?p.newBufferFrom(tc,"utf-8"):function(rc){var nc,ic,uc,eh,rh,ah=rc.length,ih=0;for(eh=0;eh<ah;eh++)(64512&(ic=rc.charCodeAt(eh)))==55296&&eh+1<ah&&(64512&(uc=rc.charCodeAt(eh+1)))==56320&&(ic=65536+(ic-55296<<10)+(uc-56320),eh++),ih+=ic<128?1:ic<2048?2:ic<65536?3:4;for(nc=c.uint8array?new Uint8Array(ih):new Array(ih),eh=rh=0;rh<ih;eh++)(64512&(ic=rc.charCodeAt(eh)))==55296&&eh+1<ah&&(64512&(uc=rc.charCodeAt(eh+1)))==56320&&(ic=65536+(ic-55296<<10)+(uc-56320),eh++),ic<128?nc[rh++]=ic:(ic<2048?nc[rh++]=192|ic>>>6:(ic<65536?nc[rh++]=224|ic>>>12:(nc[rh++]=240|ic>>>18,nc[rh++]=128|ic>>>12&63),nc[rh++]=128|ic>>>6&63),nc[rh++]=128|63&ic);return nc}(tc)},o.utf8decode=function(tc){return c.nodebuffer?u.transformTo("nodebuffer",tc).toString("utf-8"):function(rc){var nc,ic,uc,eh,rh=rc.length,ah=new Array(2*rh);for(nc=ic=0;nc<rh;)if((uc=rc[nc++])<128)ah[ic++]=uc;else if(4<(eh=_[uc]))ah[ic++]=65533,nc+=eh-1;else{for(uc&=eh===2?31:eh===3?15:7;1<eh&&nc<rh;)uc=uc<<6|63&rc[nc++],eh--;1<eh?ah[ic++]=65533:uc<65536?ah[ic++]=uc:(uc-=65536,ah[ic++]=55296|uc>>10&1023,ah[ic++]=56320|1023&uc)}return ah.length!==ic&&(ah.subarray?ah=ah.subarray(0,ic):ah.length=ic),u.applyFromCharCode(ah)}(tc=u.transformTo(c.uint8array?"uint8array":"array",tc))},u.inherits(Ja,d),Ja.prototype.processChunk=function(tc){var rc=u.transformTo(c.uint8array?"uint8array":"array",tc.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var nc=rc;(rc=new Uint8Array(nc.length+this.leftOver.length)).set(this.leftOver,0),rc.set(nc,this.leftOver.length)}else rc=this.leftOver.concat(rc);this.leftOver=null}var ic=function(eh,rh){var ah;for((rh=rh||eh.length)>eh.length&&(rh=eh.length),ah=rh-1;0<=ah&&(192&eh[ah])==128;)ah--;return ah<0||ah===0?rh:ah+_[eh[ah]]>rh?ah:rh}(rc),uc=rc;ic!==rc.length&&(c.uint8array?(uc=rc.subarray(0,ic),this.leftOver=rc.subarray(ic,rc.length)):(uc=rc.slice(0,ic),this.leftOver=rc.slice(ic,rc.length))),this.push({data:o.utf8decode(uc),meta:tc.meta})},Ja.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=Ja,u.inherits(ec,d),ec.prototype.processChunk=function(tc){this.push({data:o.utf8encode(tc.data),meta:tc.meta})},o.Utf8EncodeWorker=ec},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,s,o){var u=a("./support"),c=a("./base64"),p=a("./nodejsUtils"),d=a("./external");function _(nc){return nc}function ja(nc,ic){for(var uc=0;uc<nc.length;++uc)ic[uc]=255&nc.charCodeAt(uc);return ic}a("setimmediate"),o.newBlob=function(nc,ic){o.checkSupport("blob");try{return new Blob([nc],{type:ic})}catch{try{var uc=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return uc.append(nc),uc.getBlob(ic)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Ja={stringifyByChunk:function(nc,ic,uc){var eh=[],rh=0,ah=nc.length;if(ah<=uc)return String.fromCharCode.apply(null,nc);for(;rh<ah;)ic==="array"||ic==="nodebuffer"?eh.push(String.fromCharCode.apply(null,nc.slice(rh,Math.min(rh+uc,ah)))):eh.push(String.fromCharCode.apply(null,nc.subarray(rh,Math.min(rh+uc,ah)))),rh+=uc;return eh.join("")},stringifyByChar:function(nc){for(var ic="",uc=0;uc<nc.length;uc++)ic+=String.fromCharCode(nc[uc]);return ic},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&String.fromCharCode.apply(null,p.allocBuffer(1)).length===1}catch{return!1}}()}};function ec(nc){var ic=65536,uc=o.getTypeOf(nc),eh=!0;if(uc==="uint8array"?eh=Ja.applyCanBeUsed.uint8array:uc==="nodebuffer"&&(eh=Ja.applyCanBeUsed.nodebuffer),eh)for(;1<ic;)try{return Ja.stringifyByChunk(nc,uc,ic)}catch{ic=Math.floor(ic/2)}return Ja.stringifyByChar(nc)}function tc(nc,ic){for(var uc=0;uc<nc.length;uc++)ic[uc]=nc[uc];return ic}o.applyFromCharCode=ec;var rc={};rc.string={string:_,array:function(nc){return ja(nc,new Array(nc.length))},arraybuffer:function(nc){return rc.string.uint8array(nc).buffer},uint8array:function(nc){return ja(nc,new Uint8Array(nc.length))},nodebuffer:function(nc){return ja(nc,p.allocBuffer(nc.length))}},rc.array={string:ec,array:_,arraybuffer:function(nc){return new Uint8Array(nc).buffer},uint8array:function(nc){return new Uint8Array(nc)},nodebuffer:function(nc){return p.newBufferFrom(nc)}},rc.arraybuffer={string:function(nc){return ec(new Uint8Array(nc))},array:function(nc){return tc(new Uint8Array(nc),new Array(nc.byteLength))},arraybuffer:_,uint8array:function(nc){return new Uint8Array(nc)},nodebuffer:function(nc){return p.newBufferFrom(new Uint8Array(nc))}},rc.uint8array={string:ec,array:function(nc){return tc(nc,new Array(nc.length))},arraybuffer:function(nc){return nc.buffer},uint8array:_,nodebuffer:function(nc){return p.newBufferFrom(nc)}},rc.nodebuffer={string:ec,array:function(nc){return tc(nc,new Array(nc.length))},arraybuffer:function(nc){return rc.nodebuffer.uint8array(nc).buffer},uint8array:function(nc){return tc(nc,new Uint8Array(nc.length))},nodebuffer:_},o.transformTo=function(nc,ic){if(ic=ic||"",!nc)return ic;o.checkSupport(nc);var uc=o.getTypeOf(ic);return rc[uc][nc](ic)},o.resolve=function(nc){for(var ic=nc.split("/"),uc=[],eh=0;eh<ic.length;eh++){var rh=ic[eh];rh==="."||rh===""&&eh!==0&&eh!==ic.length-1||(rh===".."?uc.pop():uc.push(rh))}return uc.join("/")},o.getTypeOf=function(nc){return typeof nc=="string"?"string":Object.prototype.toString.call(nc)==="[object Array]"?"array":u.nodebuffer&&p.isBuffer(nc)?"nodebuffer":u.uint8array&&nc instanceof Uint8Array?"uint8array":u.arraybuffer&&nc instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(nc){if(!u[nc.toLowerCase()])throw new Error(nc+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(nc){var ic,uc,eh="";for(uc=0;uc<(nc||"").length;uc++)eh+="\\x"+((ic=nc.charCodeAt(uc))<16?"0":"")+ic.toString(16).toUpperCase();return eh},o.delay=function(nc,ic,uc){setImmediate(function(){nc.apply(uc||null,ic||[])})},o.inherits=function(nc,ic){function uc(){}uc.prototype=ic.prototype,nc.prototype=new uc},o.extend=function(){var nc,ic,uc={};for(nc=0;nc<arguments.length;nc++)for(ic in arguments[nc])Object.prototype.hasOwnProperty.call(arguments[nc],ic)&&uc[ic]===void 0&&(uc[ic]=arguments[nc][ic]);return uc},o.prepareContent=function(nc,ic,uc,eh,rh){return d.Promise.resolve(ic).then(function(ah){return u.blob&&(ah instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ah))!==-1)&&typeof FileReader<"u"?new d.Promise(function(ih,oh){var uh=new FileReader;uh.onload=function(ch){ih(ch.target.result)},uh.onerror=function(ch){oh(ch.target.error)},uh.readAsArrayBuffer(ah)}):ah}).then(function(ah){var ih=o.getTypeOf(ah);return ih?(ih==="arraybuffer"?ah=o.transformTo("uint8array",ah):ih==="string"&&(rh?ah=c.decode(ah):uc&&eh!==!0&&(ah=function(oh){return ja(oh,u.uint8array?new Uint8Array(oh.length):new Array(oh.length))}(ah))),ah):d.Promise.reject(new Error("Can't read the data of '"+nc+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,s,o){var u=a("./reader/readerFor"),c=a("./utils"),p=a("./signature"),d=a("./zipEntry"),_=a("./support");function ja(Ja){this.files=[],this.loadOptions=Ja}ja.prototype={checkSignature:function(Ja){if(!this.reader.readAndCheckSignature(Ja)){this.reader.index-=4;var ec=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(ec)+", expected "+c.pretty(Ja)+")")}},isSignature:function(Ja,ec){var tc=this.reader.index;this.reader.setIndex(Ja);var rc=this.reader.readString(4)===ec;return this.reader.setIndex(tc),rc},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Ja=this.reader.readData(this.zipCommentLength),ec=_.uint8array?"uint8array":"array",tc=c.transformTo(ec,Ja);this.zipComment=this.loadOptions.decodeFileName(tc)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Ja,ec,tc,rc=this.zip64EndOfCentralSize-44;0<rc;)Ja=this.reader.readInt(2),ec=this.reader.readInt(4),tc=this.reader.readData(ec),this.zip64ExtensibleData[Ja]={id:Ja,length:ec,value:tc}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Ja,ec;for(Ja=0;Ja<this.files.length;Ja++)ec=this.files[Ja],this.reader.setIndex(ec.localHeaderOffset),this.checkSignature(p.LOCAL_FILE_HEADER),ec.readLocalPart(this.reader),ec.handleUTF8(),ec.processAttributes()},readCentralDir:function(){var Ja;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER);)(Ja=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Ja);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Ja=this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);if(Ja<0)throw this.isSignature(0,p.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Ja);var ec=Ja;if(this.checkSignature(p.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(Ja=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Ja),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var tc=this.centralDirOffset+this.centralDirSize;this.zip64&&(tc+=20,tc+=12+this.zip64EndOfCentralSize);var rc=ec-tc;if(0<rc)this.isSignature(ec,p.CENTRAL_FILE_HEADER)||(this.reader.zero=rc);else if(rc<0)throw new Error("Corrupted zip: missing "+Math.abs(rc)+" bytes.")},prepareReader:function(Ja){this.reader=u(Ja)},load:function(Ja){this.prepareReader(Ja),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=ja},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,s,o){var u=a("./reader/readerFor"),c=a("./utils"),p=a("./compressedObject"),d=a("./crc32"),_=a("./utf8"),ja=a("./compressions"),Ja=a("./support");function ec(tc,rc){this.options=tc,this.loadOptions=rc}ec.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(tc){var rc,nc;if(tc.skip(22),this.fileNameLength=tc.readInt(2),nc=tc.readInt(2),this.fileName=tc.readData(this.fileNameLength),tc.skip(nc),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((rc=function(ic){for(var uc in ja)if(Object.prototype.hasOwnProperty.call(ja,uc)&&ja[uc].magic===ic)return ja[uc];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new p(this.compressedSize,this.uncompressedSize,this.crc32,rc,tc.readData(this.compressedSize))},readCentralPart:function(tc){this.versionMadeBy=tc.readInt(2),tc.skip(2),this.bitFlag=tc.readInt(2),this.compressionMethod=tc.readString(2),this.date=tc.readDate(),this.crc32=tc.readInt(4),this.compressedSize=tc.readInt(4),this.uncompressedSize=tc.readInt(4);var rc=tc.readInt(2);if(this.extraFieldsLength=tc.readInt(2),this.fileCommentLength=tc.readInt(2),this.diskNumberStart=tc.readInt(2),this.internalFileAttributes=tc.readInt(2),this.externalFileAttributes=tc.readInt(4),this.localHeaderOffset=tc.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");tc.skip(rc),this.readExtraFields(tc),this.parseZIP64ExtraField(tc),this.fileComment=tc.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var tc=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),tc==0&&(this.dosPermissions=63&this.externalFileAttributes),tc==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var tc=u(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=tc.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=tc.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=tc.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=tc.readInt(4))}},readExtraFields:function(tc){var rc,nc,ic,uc=tc.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});tc.index+4<uc;)rc=tc.readInt(2),nc=tc.readInt(2),ic=tc.readData(nc),this.extraFields[rc]={id:rc,length:nc,value:ic};tc.setIndex(uc)},handleUTF8:function(){var tc=Ja.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var rc=this.findExtraFieldUnicodePath();if(rc!==null)this.fileNameStr=rc;else{var nc=c.transformTo(tc,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(nc)}var ic=this.findExtraFieldUnicodeComment();if(ic!==null)this.fileCommentStr=ic;else{var uc=c.transformTo(tc,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(uc)}}},findExtraFieldUnicodePath:function(){var tc=this.extraFields[28789];if(tc){var rc=u(tc.value);return rc.readInt(1)!==1||d(this.fileName)!==rc.readInt(4)?null:_.utf8decode(rc.readData(tc.length-5))}return null},findExtraFieldUnicodeComment:function(){var tc=this.extraFields[25461];if(tc){var rc=u(tc.value);return rc.readInt(1)!==1||d(this.fileComment)!==rc.readInt(4)?null:_.utf8decode(rc.readData(tc.length-5))}return null}},s.exports=ec},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,s,o){function u(rc,nc,ic){this.name=rc,this.dir=ic.dir,this.date=ic.date,this.comment=ic.comment,this.unixPermissions=ic.unixPermissions,this.dosPermissions=ic.dosPermissions,this._data=nc,this._dataBinary=ic.binary,this.options={compression:ic.compression,compressionOptions:ic.compressionOptions}}var c=a("./stream/StreamHelper"),p=a("./stream/DataWorker"),d=a("./utf8"),_=a("./compressedObject"),ja=a("./stream/GenericWorker");u.prototype={internalStream:function(rc){var nc=null,ic="string";try{if(!rc)throw new Error("No output type specified.");var uc=(ic=rc.toLowerCase())==="string"||ic==="text";ic!=="binarystring"&&ic!=="text"||(ic="string"),nc=this._decompressWorker();var eh=!this._dataBinary;eh&&!uc&&(nc=nc.pipe(new d.Utf8EncodeWorker)),!eh&&uc&&(nc=nc.pipe(new d.Utf8DecodeWorker))}catch(rh){(nc=new ja("error")).error(rh)}return new c(nc,ic,"")},async:function(rc,nc){return this.internalStream(rc).accumulate(nc)},nodeStream:function(rc,nc){return this.internalStream(rc||"nodebuffer").toNodejsStream(nc)},_compressWorker:function(rc,nc){if(this._data instanceof _&&this._data.compression.magic===rc.magic)return this._data.getCompressedWorker();var ic=this._decompressWorker();return this._dataBinary||(ic=ic.pipe(new d.Utf8EncodeWorker)),_.createWorkerFrom(ic,rc,nc)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof ja?this._data:new p(this._data)}};for(var Ja=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],ec=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},tc=0;tc<Ja.length;tc++)u.prototype[Ja[tc]]=ec;s.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,s,o){(function(u){var c,p,d=u.MutationObserver||u.WebKitMutationObserver;if(d){var _=0,ja=new d(rc),Ja=u.document.createTextNode("");ja.observe(Ja,{characterData:!0}),c=function(){Ja.data=_=++_%2}}else if(u.setImmediate||u.MessageChannel===void 0)c="document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var nc=u.document.createElement("script");nc.onreadystatechange=function(){rc(),nc.onreadystatechange=null,nc.parentNode.removeChild(nc),nc=null},u.document.documentElement.appendChild(nc)}:function(){setTimeout(rc,0)};else{var ec=new u.MessageChannel;ec.port1.onmessage=rc,c=function(){ec.port2.postMessage(0)}}var tc=[];function rc(){var nc,ic;p=!0;for(var uc=tc.length;uc;){for(ic=tc,tc=[],nc=-1;++nc<uc;)ic[nc]();uc=tc.length}p=!1}s.exports=function(nc){tc.push(nc)!==1||p||c()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,s,o){var u=a("immediate");function c(){}var p={},d=["REJECTED"],_=["FULFILLED"],ja=["PENDING"];function Ja(uc){if(typeof uc!="function")throw new TypeError("resolver must be a function");this.state=ja,this.queue=[],this.outcome=void 0,uc!==c&&nc(this,uc)}function ec(uc,eh,rh){this.promise=uc,typeof eh=="function"&&(this.onFulfilled=eh,this.callFulfilled=this.otherCallFulfilled),typeof rh=="function"&&(this.onRejected=rh,this.callRejected=this.otherCallRejected)}function tc(uc,eh,rh){u(function(){var ah;try{ah=eh(rh)}catch(ih){return p.reject(uc,ih)}ah===uc?p.reject(uc,new TypeError("Cannot resolve promise with itself")):p.resolve(uc,ah)})}function rc(uc){var eh=uc&&uc.then;if(uc&&(typeof uc=="object"||typeof uc=="function")&&typeof eh=="function")return function(){eh.apply(uc,arguments)}}function nc(uc,eh){var rh=!1;function ah(uh){rh||(rh=!0,p.reject(uc,uh))}function ih(uh){rh||(rh=!0,p.resolve(uc,uh))}var oh=ic(function(){eh(ih,ah)});oh.status==="error"&&ah(oh.value)}function ic(uc,eh){var rh={};try{rh.value=uc(eh),rh.status="success"}catch(ah){rh.status="error",rh.value=ah}return rh}(s.exports=Ja).prototype.finally=function(uc){if(typeof uc!="function")return this;var eh=this.constructor;return this.then(function(rh){return eh.resolve(uc()).then(function(){return rh})},function(rh){return eh.resolve(uc()).then(function(){throw rh})})},Ja.prototype.catch=function(uc){return this.then(null,uc)},Ja.prototype.then=function(uc,eh){if(typeof uc!="function"&&this.state===_||typeof eh!="function"&&this.state===d)return this;var rh=new this.constructor(c);return this.state!==ja?tc(rh,this.state===_?uc:eh,this.outcome):this.queue.push(new ec(rh,uc,eh)),rh},ec.prototype.callFulfilled=function(uc){p.resolve(this.promise,uc)},ec.prototype.otherCallFulfilled=function(uc){tc(this.promise,this.onFulfilled,uc)},ec.prototype.callRejected=function(uc){p.reject(this.promise,uc)},ec.prototype.otherCallRejected=function(uc){tc(this.promise,this.onRejected,uc)},p.resolve=function(uc,eh){var rh=ic(rc,eh);if(rh.status==="error")return p.reject(uc,rh.value);var ah=rh.value;if(ah)nc(uc,ah);else{uc.state=_,uc.outcome=eh;for(var ih=-1,oh=uc.queue.length;++ih<oh;)uc.queue[ih].callFulfilled(eh)}return uc},p.reject=function(uc,eh){uc.state=d,uc.outcome=eh;for(var rh=-1,ah=uc.queue.length;++rh<ah;)uc.queue[rh].callRejected(eh);return uc},Ja.resolve=function(uc){return uc instanceof this?uc:p.resolve(new this(c),uc)},Ja.reject=function(uc){var eh=new this(c);return p.reject(eh,uc)},Ja.all=function(uc){var eh=this;if(Object.prototype.toString.call(uc)!=="[object Array]")return this.reject(new TypeError("must be an array"));var rh=uc.length,ah=!1;if(!rh)return this.resolve([]);for(var ih=new Array(rh),oh=0,uh=-1,ch=new this(c);++uh<rh;)hh(uc[uh],uh);return ch;function hh(dh,gh){eh.resolve(dh).then(function(fh){ih[gh]=fh,++oh!==rh||ah||(ah=!0,p.resolve(ch,ih))},function(fh){ah||(ah=!0,p.reject(ch,fh))})}},Ja.race=function(uc){var eh=this;if(Object.prototype.toString.call(uc)!=="[object Array]")return this.reject(new TypeError("must be an array"));var rh=uc.length,ah=!1;if(!rh)return this.resolve([]);for(var ih=-1,oh=new this(c);++ih<rh;)uh=uc[ih],eh.resolve(uh).then(function(ch){ah||(ah=!0,p.resolve(oh,ch))},function(ch){ah||(ah=!0,p.reject(oh,ch))});var uh;return oh}},{immediate:36}],38:[function(a,s,o){var u={};(0,a("./lib/utils/common").assign)(u,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),s.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,s,o){var u=a("./zlib/deflate"),c=a("./utils/common"),p=a("./utils/strings"),d=a("./zlib/messages"),_=a("./zlib/zstream"),ja=Object.prototype.toString,Ja=0,ec=-1,tc=0,rc=8;function nc(uc){if(!(this instanceof nc))return new nc(uc);this.options=c.assign({level:ec,method:rc,chunkSize:16384,windowBits:15,memLevel:8,strategy:tc,to:""},uc||{});var eh=this.options;eh.raw&&0<eh.windowBits?eh.windowBits=-eh.windowBits:eh.gzip&&0<eh.windowBits&&eh.windowBits<16&&(eh.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var rh=u.deflateInit2(this.strm,eh.level,eh.method,eh.windowBits,eh.memLevel,eh.strategy);if(rh!==Ja)throw new Error(d[rh]);if(eh.header&&u.deflateSetHeader(this.strm,eh.header),eh.dictionary){var ah;if(ah=typeof eh.dictionary=="string"?p.string2buf(eh.dictionary):ja.call(eh.dictionary)==="[object ArrayBuffer]"?new Uint8Array(eh.dictionary):eh.dictionary,(rh=u.deflateSetDictionary(this.strm,ah))!==Ja)throw new Error(d[rh]);this._dict_set=!0}}function ic(uc,eh){var rh=new nc(eh);if(rh.push(uc,!0),rh.err)throw rh.msg||d[rh.err];return rh.result}nc.prototype.push=function(uc,eh){var rh,ah,ih=this.strm,oh=this.options.chunkSize;if(this.ended)return!1;ah=eh===~~eh?eh:eh===!0?4:0,typeof uc=="string"?ih.input=p.string2buf(uc):ja.call(uc)==="[object ArrayBuffer]"?ih.input=new Uint8Array(uc):ih.input=uc,ih.next_in=0,ih.avail_in=ih.input.length;do{if(ih.avail_out===0&&(ih.output=new c.Buf8(oh),ih.next_out=0,ih.avail_out=oh),(rh=u.deflate(ih,ah))!==1&&rh!==Ja)return this.onEnd(rh),!(this.ended=!0);ih.avail_out!==0&&(ih.avail_in!==0||ah!==4&&ah!==2)||(this.options.to==="string"?this.onData(p.buf2binstring(c.shrinkBuf(ih.output,ih.next_out))):this.onData(c.shrinkBuf(ih.output,ih.next_out)))}while((0<ih.avail_in||ih.avail_out===0)&&rh!==1);return ah===4?(rh=u.deflateEnd(this.strm),this.onEnd(rh),this.ended=!0,rh===Ja):ah!==2||(this.onEnd(Ja),!(ih.avail_out=0))},nc.prototype.onData=function(uc){this.chunks.push(uc)},nc.prototype.onEnd=function(uc){uc===Ja&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=uc,this.msg=this.strm.msg},o.Deflate=nc,o.deflate=ic,o.deflateRaw=function(uc,eh){return(eh=eh||{}).raw=!0,ic(uc,eh)},o.gzip=function(uc,eh){return(eh=eh||{}).gzip=!0,ic(uc,eh)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,s,o){var u=a("./zlib/inflate"),c=a("./utils/common"),p=a("./utils/strings"),d=a("./zlib/constants"),_=a("./zlib/messages"),ja=a("./zlib/zstream"),Ja=a("./zlib/gzheader"),ec=Object.prototype.toString;function tc(nc){if(!(this instanceof tc))return new tc(nc);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},nc||{});var ic=this.options;ic.raw&&0<=ic.windowBits&&ic.windowBits<16&&(ic.windowBits=-ic.windowBits,ic.windowBits===0&&(ic.windowBits=-15)),!(0<=ic.windowBits&&ic.windowBits<16)||nc&&nc.windowBits||(ic.windowBits+=32),15<ic.windowBits&&ic.windowBits<48&&!(15&ic.windowBits)&&(ic.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ja,this.strm.avail_out=0;var uc=u.inflateInit2(this.strm,ic.windowBits);if(uc!==d.Z_OK)throw new Error(_[uc]);this.header=new Ja,u.inflateGetHeader(this.strm,this.header)}function rc(nc,ic){var uc=new tc(ic);if(uc.push(nc,!0),uc.err)throw uc.msg||_[uc.err];return uc.result}tc.prototype.push=function(nc,ic){var uc,eh,rh,ah,ih,oh,uh=this.strm,ch=this.options.chunkSize,hh=this.options.dictionary,dh=!1;if(this.ended)return!1;eh=ic===~~ic?ic:ic===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof nc=="string"?uh.input=p.binstring2buf(nc):ec.call(nc)==="[object ArrayBuffer]"?uh.input=new Uint8Array(nc):uh.input=nc,uh.next_in=0,uh.avail_in=uh.input.length;do{if(uh.avail_out===0&&(uh.output=new c.Buf8(ch),uh.next_out=0,uh.avail_out=ch),(uc=u.inflate(uh,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&hh&&(oh=typeof hh=="string"?p.string2buf(hh):ec.call(hh)==="[object ArrayBuffer]"?new Uint8Array(hh):hh,uc=u.inflateSetDictionary(this.strm,oh)),uc===d.Z_BUF_ERROR&&dh===!0&&(uc=d.Z_OK,dh=!1),uc!==d.Z_STREAM_END&&uc!==d.Z_OK)return this.onEnd(uc),!(this.ended=!0);uh.next_out&&(uh.avail_out!==0&&uc!==d.Z_STREAM_END&&(uh.avail_in!==0||eh!==d.Z_FINISH&&eh!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(rh=p.utf8border(uh.output,uh.next_out),ah=uh.next_out-rh,ih=p.buf2string(uh.output,rh),uh.next_out=ah,uh.avail_out=ch-ah,ah&&c.arraySet(uh.output,uh.output,rh,ah,0),this.onData(ih)):this.onData(c.shrinkBuf(uh.output,uh.next_out)))),uh.avail_in===0&&uh.avail_out===0&&(dh=!0)}while((0<uh.avail_in||uh.avail_out===0)&&uc!==d.Z_STREAM_END);return uc===d.Z_STREAM_END&&(eh=d.Z_FINISH),eh===d.Z_FINISH?(uc=u.inflateEnd(this.strm),this.onEnd(uc),this.ended=!0,uc===d.Z_OK):eh!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(uh.avail_out=0))},tc.prototype.onData=function(nc){this.chunks.push(nc)},tc.prototype.onEnd=function(nc){nc===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=nc,this.msg=this.strm.msg},o.Inflate=tc,o.inflate=rc,o.inflateRaw=function(nc,ic){return(ic=ic||{}).raw=!0,rc(nc,ic)},o.ungzip=rc},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,s,o){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(d){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var ja=_.shift();if(ja){if(typeof ja!="object")throw new TypeError(ja+"must be non-object");for(var Ja in ja)ja.hasOwnProperty(Ja)&&(d[Ja]=ja[Ja])}}return d},o.shrinkBuf=function(d,_){return d.length===_?d:d.subarray?d.subarray(0,_):(d.length=_,d)};var c={arraySet:function(d,_,ja,Ja,ec){if(_.subarray&&d.subarray)d.set(_.subarray(ja,ja+Ja),ec);else for(var tc=0;tc<Ja;tc++)d[ec+tc]=_[ja+tc]},flattenChunks:function(d){var _,ja,Ja,ec,tc,rc;for(_=Ja=0,ja=d.length;_<ja;_++)Ja+=d[_].length;for(rc=new Uint8Array(Ja),_=ec=0,ja=d.length;_<ja;_++)tc=d[_],rc.set(tc,ec),ec+=tc.length;return rc}},p={arraySet:function(d,_,ja,Ja,ec){for(var tc=0;tc<Ja;tc++)d[ec+tc]=_[ja+tc]},flattenChunks:function(d){return[].concat.apply([],d)}};o.setTyped=function(d){d?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,c)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,p))},o.setTyped(u)},{}],42:[function(a,s,o){var u=a("./common"),c=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var d=new u.Buf8(256),_=0;_<256;_++)d[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function ja(Ja,ec){if(ec<65537&&(Ja.subarray&&p||!Ja.subarray&&c))return String.fromCharCode.apply(null,u.shrinkBuf(Ja,ec));for(var tc="",rc=0;rc<ec;rc++)tc+=String.fromCharCode(Ja[rc]);return tc}d[254]=d[254]=1,o.string2buf=function(Ja){var ec,tc,rc,nc,ic,uc=Ja.length,eh=0;for(nc=0;nc<uc;nc++)(64512&(tc=Ja.charCodeAt(nc)))==55296&&nc+1<uc&&(64512&(rc=Ja.charCodeAt(nc+1)))==56320&&(tc=65536+(tc-55296<<10)+(rc-56320),nc++),eh+=tc<128?1:tc<2048?2:tc<65536?3:4;for(ec=new u.Buf8(eh),nc=ic=0;ic<eh;nc++)(64512&(tc=Ja.charCodeAt(nc)))==55296&&nc+1<uc&&(64512&(rc=Ja.charCodeAt(nc+1)))==56320&&(tc=65536+(tc-55296<<10)+(rc-56320),nc++),tc<128?ec[ic++]=tc:(tc<2048?ec[ic++]=192|tc>>>6:(tc<65536?ec[ic++]=224|tc>>>12:(ec[ic++]=240|tc>>>18,ec[ic++]=128|tc>>>12&63),ec[ic++]=128|tc>>>6&63),ec[ic++]=128|63&tc);return ec},o.buf2binstring=function(Ja){return ja(Ja,Ja.length)},o.binstring2buf=function(Ja){for(var ec=new u.Buf8(Ja.length),tc=0,rc=ec.length;tc<rc;tc++)ec[tc]=Ja.charCodeAt(tc);return ec},o.buf2string=function(Ja,ec){var tc,rc,nc,ic,uc=ec||Ja.length,eh=new Array(2*uc);for(tc=rc=0;tc<uc;)if((nc=Ja[tc++])<128)eh[rc++]=nc;else if(4<(ic=d[nc]))eh[rc++]=65533,tc+=ic-1;else{for(nc&=ic===2?31:ic===3?15:7;1<ic&&tc<uc;)nc=nc<<6|63&Ja[tc++],ic--;1<ic?eh[rc++]=65533:nc<65536?eh[rc++]=nc:(nc-=65536,eh[rc++]=55296|nc>>10&1023,eh[rc++]=56320|1023&nc)}return ja(eh,rc)},o.utf8border=function(Ja,ec){var tc;for((ec=ec||Ja.length)>Ja.length&&(ec=Ja.length),tc=ec-1;0<=tc&&(192&Ja[tc])==128;)tc--;return tc<0||tc===0?ec:tc+d[Ja[tc]]>ec?tc:ec}},{"./common":41}],43:[function(a,s,o){s.exports=function(u,c,p,d){for(var _=65535&u|0,ja=u>>>16&65535|0,Ja=0;p!==0;){for(p-=Ja=2e3<p?2e3:p;ja=ja+(_=_+c[d++]|0)|0,--Ja;);_%=65521,ja%=65521}return _|ja<<16|0}},{}],44:[function(a,s,o){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,s,o){var u=function(){for(var c,p=[],d=0;d<256;d++){c=d;for(var _=0;_<8;_++)c=1&c?3988292384^c>>>1:c>>>1;p[d]=c}return p}();s.exports=function(c,p,d,_){var ja=u,Ja=_+d;c^=-1;for(var ec=_;ec<Ja;ec++)c=c>>>8^ja[255&(c^p[ec])];return-1^c}},{}],46:[function(a,s,o){var u,c=a("../utils/common"),p=a("./trees"),d=a("./adler32"),_=a("./crc32"),ja=a("./messages"),Ja=0,ec=4,tc=0,rc=-2,nc=-1,ic=4,uc=2,eh=8,rh=9,ah=286,ih=30,oh=19,uh=2*ah+1,ch=15,hh=3,dh=258,gh=dh+hh+1,fh=42,vh=113,ph=1,yh=2,xh=3,_h=4;function bh(Sh,Gh){return Sh.msg=ja[Gh],Gh}function Dh(Sh){return(Sh<<1)-(4<Sh?9:0)}function Th(Sh){for(var Gh=Sh.length;0<=--Gh;)Sh[Gh]=0}function Ch(Sh){var Gh=Sh.state,zh=Gh.pending;zh>Sh.avail_out&&(zh=Sh.avail_out),zh!==0&&(c.arraySet(Sh.output,Gh.pending_buf,Gh.pending_out,zh,Sh.next_out),Sh.next_out+=zh,Gh.pending_out+=zh,Sh.total_out+=zh,Sh.avail_out-=zh,Gh.pending-=zh,Gh.pending===0&&(Gh.pending_out=0))}function wh(Sh,Gh){p._tr_flush_block(Sh,0<=Sh.block_start?Sh.block_start:-1,Sh.strstart-Sh.block_start,Gh),Sh.block_start=Sh.strstart,Ch(Sh.strm)}function Nh(Sh,Gh){Sh.pending_buf[Sh.pending++]=Gh}function Rh(Sh,Gh){Sh.pending_buf[Sh.pending++]=Gh>>>8&255,Sh.pending_buf[Sh.pending++]=255&Gh}function kh(Sh,Gh){var zh,$h,Ph=Sh.max_chain_length,Vh=Sh.strstart,Xh=Sh.prev_length,Zh=Sh.nice_match,Uh=Sh.strstart>Sh.w_size-gh?Sh.strstart-(Sh.w_size-gh):0,Kh=Sh.window,ed=Sh.w_mask,Jh=Sh.prev,od=Sh.strstart+dh,ud=Kh[Vh+Xh-1],ld=Kh[Vh+Xh];Sh.prev_length>=Sh.good_match&&(Ph>>=2),Zh>Sh.lookahead&&(Zh=Sh.lookahead);do if(Kh[(zh=Gh)+Xh]===ld&&Kh[zh+Xh-1]===ud&&Kh[zh]===Kh[Vh]&&Kh[++zh]===Kh[Vh+1]){Vh+=2,zh++;do;while(Kh[++Vh]===Kh[++zh]&&Kh[++Vh]===Kh[++zh]&&Kh[++Vh]===Kh[++zh]&&Kh[++Vh]===Kh[++zh]&&Kh[++Vh]===Kh[++zh]&&Kh[++Vh]===Kh[++zh]&&Kh[++Vh]===Kh[++zh]&&Kh[++Vh]===Kh[++zh]&&Vh<od);if($h=dh-(od-Vh),Vh=od-dh,Xh<$h){if(Sh.match_start=Gh,Zh<=(Xh=$h))break;ud=Kh[Vh+Xh-1],ld=Kh[Vh+Xh]}}while((Gh=Jh[Gh&ed])>Uh&&--Ph!=0);return Xh<=Sh.lookahead?Xh:Sh.lookahead}function Lh(Sh){var Gh,zh,$h,Ph,Vh,Xh,Zh,Uh,Kh,ed,Jh=Sh.w_size;do{if(Ph=Sh.window_size-Sh.lookahead-Sh.strstart,Sh.strstart>=Jh+(Jh-gh)){for(c.arraySet(Sh.window,Sh.window,Jh,Jh,0),Sh.match_start-=Jh,Sh.strstart-=Jh,Sh.block_start-=Jh,Gh=zh=Sh.hash_size;$h=Sh.head[--Gh],Sh.head[Gh]=Jh<=$h?$h-Jh:0,--zh;);for(Gh=zh=Jh;$h=Sh.prev[--Gh],Sh.prev[Gh]=Jh<=$h?$h-Jh:0,--zh;);Ph+=Jh}if(Sh.strm.avail_in===0)break;if(Xh=Sh.strm,Zh=Sh.window,Uh=Sh.strstart+Sh.lookahead,Kh=Ph,ed=void 0,ed=Xh.avail_in,Kh<ed&&(ed=Kh),zh=ed===0?0:(Xh.avail_in-=ed,c.arraySet(Zh,Xh.input,Xh.next_in,ed,Uh),Xh.state.wrap===1?Xh.adler=d(Xh.adler,Zh,ed,Uh):Xh.state.wrap===2&&(Xh.adler=_(Xh.adler,Zh,ed,Uh)),Xh.next_in+=ed,Xh.total_in+=ed,ed),Sh.lookahead+=zh,Sh.lookahead+Sh.insert>=hh)for(Vh=Sh.strstart-Sh.insert,Sh.ins_h=Sh.window[Vh],Sh.ins_h=(Sh.ins_h<<Sh.hash_shift^Sh.window[Vh+1])&Sh.hash_mask;Sh.insert&&(Sh.ins_h=(Sh.ins_h<<Sh.hash_shift^Sh.window[Vh+hh-1])&Sh.hash_mask,Sh.prev[Vh&Sh.w_mask]=Sh.head[Sh.ins_h],Sh.head[Sh.ins_h]=Vh,Vh++,Sh.insert--,!(Sh.lookahead+Sh.insert<hh)););}while(Sh.lookahead<gh&&Sh.strm.avail_in!==0)}function Fh(Sh,Gh){for(var zh,$h;;){if(Sh.lookahead<gh){if(Lh(Sh),Sh.lookahead<gh&&Gh===Ja)return ph;if(Sh.lookahead===0)break}if(zh=0,Sh.lookahead>=hh&&(Sh.ins_h=(Sh.ins_h<<Sh.hash_shift^Sh.window[Sh.strstart+hh-1])&Sh.hash_mask,zh=Sh.prev[Sh.strstart&Sh.w_mask]=Sh.head[Sh.ins_h],Sh.head[Sh.ins_h]=Sh.strstart),zh!==0&&Sh.strstart-zh<=Sh.w_size-gh&&(Sh.match_length=kh(Sh,zh)),Sh.match_length>=hh)if($h=p._tr_tally(Sh,Sh.strstart-Sh.match_start,Sh.match_length-hh),Sh.lookahead-=Sh.match_length,Sh.match_length<=Sh.max_lazy_match&&Sh.lookahead>=hh){for(Sh.match_length--;Sh.strstart++,Sh.ins_h=(Sh.ins_h<<Sh.hash_shift^Sh.window[Sh.strstart+hh-1])&Sh.hash_mask,zh=Sh.prev[Sh.strstart&Sh.w_mask]=Sh.head[Sh.ins_h],Sh.head[Sh.ins_h]=Sh.strstart,--Sh.match_length!=0;);Sh.strstart++}else Sh.strstart+=Sh.match_length,Sh.match_length=0,Sh.ins_h=Sh.window[Sh.strstart],Sh.ins_h=(Sh.ins_h<<Sh.hash_shift^Sh.window[Sh.strstart+1])&Sh.hash_mask;else $h=p._tr_tally(Sh,0,Sh.window[Sh.strstart]),Sh.lookahead--,Sh.strstart++;if($h&&(wh(Sh,!1),Sh.strm.avail_out===0))return ph}return Sh.insert=Sh.strstart<hh-1?Sh.strstart:hh-1,Gh===ec?(wh(Sh,!0),Sh.strm.avail_out===0?xh:_h):Sh.last_lit&&(wh(Sh,!1),Sh.strm.avail_out===0)?ph:yh}function Wh(Sh,Gh){for(var zh,$h,Ph;;){if(Sh.lookahead<gh){if(Lh(Sh),Sh.lookahead<gh&&Gh===Ja)return ph;if(Sh.lookahead===0)break}if(zh=0,Sh.lookahead>=hh&&(Sh.ins_h=(Sh.ins_h<<Sh.hash_shift^Sh.window[Sh.strstart+hh-1])&Sh.hash_mask,zh=Sh.prev[Sh.strstart&Sh.w_mask]=Sh.head[Sh.ins_h],Sh.head[Sh.ins_h]=Sh.strstart),Sh.prev_length=Sh.match_length,Sh.prev_match=Sh.match_start,Sh.match_length=hh-1,zh!==0&&Sh.prev_length<Sh.max_lazy_match&&Sh.strstart-zh<=Sh.w_size-gh&&(Sh.match_length=kh(Sh,zh),Sh.match_length<=5&&(Sh.strategy===1||Sh.match_length===hh&&4096<Sh.strstart-Sh.match_start)&&(Sh.match_length=hh-1)),Sh.prev_length>=hh&&Sh.match_length<=Sh.prev_length){for(Ph=Sh.strstart+Sh.lookahead-hh,$h=p._tr_tally(Sh,Sh.strstart-1-Sh.prev_match,Sh.prev_length-hh),Sh.lookahead-=Sh.prev_length-1,Sh.prev_length-=2;++Sh.strstart<=Ph&&(Sh.ins_h=(Sh.ins_h<<Sh.hash_shift^Sh.window[Sh.strstart+hh-1])&Sh.hash_mask,zh=Sh.prev[Sh.strstart&Sh.w_mask]=Sh.head[Sh.ins_h],Sh.head[Sh.ins_h]=Sh.strstart),--Sh.prev_length!=0;);if(Sh.match_available=0,Sh.match_length=hh-1,Sh.strstart++,$h&&(wh(Sh,!1),Sh.strm.avail_out===0))return ph}else if(Sh.match_available){if(($h=p._tr_tally(Sh,0,Sh.window[Sh.strstart-1]))&&wh(Sh,!1),Sh.strstart++,Sh.lookahead--,Sh.strm.avail_out===0)return ph}else Sh.match_available=1,Sh.strstart++,Sh.lookahead--}return Sh.match_available&&($h=p._tr_tally(Sh,0,Sh.window[Sh.strstart-1]),Sh.match_available=0),Sh.insert=Sh.strstart<hh-1?Sh.strstart:hh-1,Gh===ec?(wh(Sh,!0),Sh.strm.avail_out===0?xh:_h):Sh.last_lit&&(wh(Sh,!1),Sh.strm.avail_out===0)?ph:yh}function Qh(Sh,Gh,zh,$h,Ph){this.good_length=Sh,this.max_lazy=Gh,this.nice_length=zh,this.max_chain=$h,this.func=Ph}function jh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=eh,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*uh),this.dyn_dtree=new c.Buf16(2*(2*ih+1)),this.bl_tree=new c.Buf16(2*(2*oh+1)),Th(this.dyn_ltree),Th(this.dyn_dtree),Th(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(ch+1),this.heap=new c.Buf16(2*ah+1),Th(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*ah+1),Th(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Hh(Sh){var Gh;return Sh&&Sh.state?(Sh.total_in=Sh.total_out=0,Sh.data_type=uc,(Gh=Sh.state).pending=0,Gh.pending_out=0,Gh.wrap<0&&(Gh.wrap=-Gh.wrap),Gh.status=Gh.wrap?fh:vh,Sh.adler=Gh.wrap===2?0:1,Gh.last_flush=Ja,p._tr_init(Gh),tc):bh(Sh,rc)}function qh(Sh){var Gh=Hh(Sh);return Gh===tc&&function(zh){zh.window_size=2*zh.w_size,Th(zh.head),zh.max_lazy_match=u[zh.level].max_lazy,zh.good_match=u[zh.level].good_length,zh.nice_match=u[zh.level].nice_length,zh.max_chain_length=u[zh.level].max_chain,zh.strstart=0,zh.block_start=0,zh.lookahead=0,zh.insert=0,zh.match_length=zh.prev_length=hh-1,zh.match_available=0,zh.ins_h=0}(Sh.state),Gh}function nd(Sh,Gh,zh,$h,Ph,Vh){if(!Sh)return rc;var Xh=1;if(Gh===nc&&(Gh=6),$h<0?(Xh=0,$h=-$h):15<$h&&(Xh=2,$h-=16),Ph<1||rh<Ph||zh!==eh||$h<8||15<$h||Gh<0||9<Gh||Vh<0||ic<Vh)return bh(Sh,rc);$h===8&&($h=9);var Zh=new jh;return(Sh.state=Zh).strm=Sh,Zh.wrap=Xh,Zh.gzhead=null,Zh.w_bits=$h,Zh.w_size=1<<Zh.w_bits,Zh.w_mask=Zh.w_size-1,Zh.hash_bits=Ph+7,Zh.hash_size=1<<Zh.hash_bits,Zh.hash_mask=Zh.hash_size-1,Zh.hash_shift=~~((Zh.hash_bits+hh-1)/hh),Zh.window=new c.Buf8(2*Zh.w_size),Zh.head=new c.Buf16(Zh.hash_size),Zh.prev=new c.Buf16(Zh.w_size),Zh.lit_bufsize=1<<Ph+6,Zh.pending_buf_size=4*Zh.lit_bufsize,Zh.pending_buf=new c.Buf8(Zh.pending_buf_size),Zh.d_buf=1*Zh.lit_bufsize,Zh.l_buf=3*Zh.lit_bufsize,Zh.level=Gh,Zh.strategy=Vh,Zh.method=zh,qh(Sh)}u=[new Qh(0,0,0,0,function(Sh,Gh){var zh=65535;for(zh>Sh.pending_buf_size-5&&(zh=Sh.pending_buf_size-5);;){if(Sh.lookahead<=1){if(Lh(Sh),Sh.lookahead===0&&Gh===Ja)return ph;if(Sh.lookahead===0)break}Sh.strstart+=Sh.lookahead,Sh.lookahead=0;var $h=Sh.block_start+zh;if((Sh.strstart===0||Sh.strstart>=$h)&&(Sh.lookahead=Sh.strstart-$h,Sh.strstart=$h,wh(Sh,!1),Sh.strm.avail_out===0)||Sh.strstart-Sh.block_start>=Sh.w_size-gh&&(wh(Sh,!1),Sh.strm.avail_out===0))return ph}return Sh.insert=0,Gh===ec?(wh(Sh,!0),Sh.strm.avail_out===0?xh:_h):(Sh.strstart>Sh.block_start&&(wh(Sh,!1),Sh.strm.avail_out),ph)}),new Qh(4,4,8,4,Fh),new Qh(4,5,16,8,Fh),new Qh(4,6,32,32,Fh),new Qh(4,4,16,16,Wh),new Qh(8,16,32,32,Wh),new Qh(8,16,128,128,Wh),new Qh(8,32,128,256,Wh),new Qh(32,128,258,1024,Wh),new Qh(32,258,258,4096,Wh)],o.deflateInit=function(Sh,Gh){return nd(Sh,Gh,eh,15,8,0)},o.deflateInit2=nd,o.deflateReset=qh,o.deflateResetKeep=Hh,o.deflateSetHeader=function(Sh,Gh){return Sh&&Sh.state?Sh.state.wrap!==2?rc:(Sh.state.gzhead=Gh,tc):rc},o.deflate=function(Sh,Gh){var zh,$h,Ph,Vh;if(!Sh||!Sh.state||5<Gh||Gh<0)return Sh?bh(Sh,rc):rc;if($h=Sh.state,!Sh.output||!Sh.input&&Sh.avail_in!==0||$h.status===666&&Gh!==ec)return bh(Sh,Sh.avail_out===0?-5:rc);if($h.strm=Sh,zh=$h.last_flush,$h.last_flush=Gh,$h.status===fh)if($h.wrap===2)Sh.adler=0,Nh($h,31),Nh($h,139),Nh($h,8),$h.gzhead?(Nh($h,($h.gzhead.text?1:0)+($h.gzhead.hcrc?2:0)+($h.gzhead.extra?4:0)+($h.gzhead.name?8:0)+($h.gzhead.comment?16:0)),Nh($h,255&$h.gzhead.time),Nh($h,$h.gzhead.time>>8&255),Nh($h,$h.gzhead.time>>16&255),Nh($h,$h.gzhead.time>>24&255),Nh($h,$h.level===9?2:2<=$h.strategy||$h.level<2?4:0),Nh($h,255&$h.gzhead.os),$h.gzhead.extra&&$h.gzhead.extra.length&&(Nh($h,255&$h.gzhead.extra.length),Nh($h,$h.gzhead.extra.length>>8&255)),$h.gzhead.hcrc&&(Sh.adler=_(Sh.adler,$h.pending_buf,$h.pending,0)),$h.gzindex=0,$h.status=69):(Nh($h,0),Nh($h,0),Nh($h,0),Nh($h,0),Nh($h,0),Nh($h,$h.level===9?2:2<=$h.strategy||$h.level<2?4:0),Nh($h,3),$h.status=vh);else{var Xh=eh+($h.w_bits-8<<4)<<8;Xh|=(2<=$h.strategy||$h.level<2?0:$h.level<6?1:$h.level===6?2:3)<<6,$h.strstart!==0&&(Xh|=32),Xh+=31-Xh%31,$h.status=vh,Rh($h,Xh),$h.strstart!==0&&(Rh($h,Sh.adler>>>16),Rh($h,65535&Sh.adler)),Sh.adler=1}if($h.status===69)if($h.gzhead.extra){for(Ph=$h.pending;$h.gzindex<(65535&$h.gzhead.extra.length)&&($h.pending!==$h.pending_buf_size||($h.gzhead.hcrc&&$h.pending>Ph&&(Sh.adler=_(Sh.adler,$h.pending_buf,$h.pending-Ph,Ph)),Ch(Sh),Ph=$h.pending,$h.pending!==$h.pending_buf_size));)Nh($h,255&$h.gzhead.extra[$h.gzindex]),$h.gzindex++;$h.gzhead.hcrc&&$h.pending>Ph&&(Sh.adler=_(Sh.adler,$h.pending_buf,$h.pending-Ph,Ph)),$h.gzindex===$h.gzhead.extra.length&&($h.gzindex=0,$h.status=73)}else $h.status=73;if($h.status===73)if($h.gzhead.name){Ph=$h.pending;do{if($h.pending===$h.pending_buf_size&&($h.gzhead.hcrc&&$h.pending>Ph&&(Sh.adler=_(Sh.adler,$h.pending_buf,$h.pending-Ph,Ph)),Ch(Sh),Ph=$h.pending,$h.pending===$h.pending_buf_size)){Vh=1;break}Vh=$h.gzindex<$h.gzhead.name.length?255&$h.gzhead.name.charCodeAt($h.gzindex++):0,Nh($h,Vh)}while(Vh!==0);$h.gzhead.hcrc&&$h.pending>Ph&&(Sh.adler=_(Sh.adler,$h.pending_buf,$h.pending-Ph,Ph)),Vh===0&&($h.gzindex=0,$h.status=91)}else $h.status=91;if($h.status===91)if($h.gzhead.comment){Ph=$h.pending;do{if($h.pending===$h.pending_buf_size&&($h.gzhead.hcrc&&$h.pending>Ph&&(Sh.adler=_(Sh.adler,$h.pending_buf,$h.pending-Ph,Ph)),Ch(Sh),Ph=$h.pending,$h.pending===$h.pending_buf_size)){Vh=1;break}Vh=$h.gzindex<$h.gzhead.comment.length?255&$h.gzhead.comment.charCodeAt($h.gzindex++):0,Nh($h,Vh)}while(Vh!==0);$h.gzhead.hcrc&&$h.pending>Ph&&(Sh.adler=_(Sh.adler,$h.pending_buf,$h.pending-Ph,Ph)),Vh===0&&($h.status=103)}else $h.status=103;if($h.status===103&&($h.gzhead.hcrc?($h.pending+2>$h.pending_buf_size&&Ch(Sh),$h.pending+2<=$h.pending_buf_size&&(Nh($h,255&Sh.adler),Nh($h,Sh.adler>>8&255),Sh.adler=0,$h.status=vh)):$h.status=vh),$h.pending!==0){if(Ch(Sh),Sh.avail_out===0)return $h.last_flush=-1,tc}else if(Sh.avail_in===0&&Dh(Gh)<=Dh(zh)&&Gh!==ec)return bh(Sh,-5);if($h.status===666&&Sh.avail_in!==0)return bh(Sh,-5);if(Sh.avail_in!==0||$h.lookahead!==0||Gh!==Ja&&$h.status!==666){var Zh=$h.strategy===2?function(Uh,Kh){for(var ed;;){if(Uh.lookahead===0&&(Lh(Uh),Uh.lookahead===0)){if(Kh===Ja)return ph;break}if(Uh.match_length=0,ed=p._tr_tally(Uh,0,Uh.window[Uh.strstart]),Uh.lookahead--,Uh.strstart++,ed&&(wh(Uh,!1),Uh.strm.avail_out===0))return ph}return Uh.insert=0,Kh===ec?(wh(Uh,!0),Uh.strm.avail_out===0?xh:_h):Uh.last_lit&&(wh(Uh,!1),Uh.strm.avail_out===0)?ph:yh}($h,Gh):$h.strategy===3?function(Uh,Kh){for(var ed,Jh,od,ud,ld=Uh.window;;){if(Uh.lookahead<=dh){if(Lh(Uh),Uh.lookahead<=dh&&Kh===Ja)return ph;if(Uh.lookahead===0)break}if(Uh.match_length=0,Uh.lookahead>=hh&&0<Uh.strstart&&(Jh=ld[od=Uh.strstart-1])===ld[++od]&&Jh===ld[++od]&&Jh===ld[++od]){ud=Uh.strstart+dh;do;while(Jh===ld[++od]&&Jh===ld[++od]&&Jh===ld[++od]&&Jh===ld[++od]&&Jh===ld[++od]&&Jh===ld[++od]&&Jh===ld[++od]&&Jh===ld[++od]&&od<ud);Uh.match_length=dh-(ud-od),Uh.match_length>Uh.lookahead&&(Uh.match_length=Uh.lookahead)}if(Uh.match_length>=hh?(ed=p._tr_tally(Uh,1,Uh.match_length-hh),Uh.lookahead-=Uh.match_length,Uh.strstart+=Uh.match_length,Uh.match_length=0):(ed=p._tr_tally(Uh,0,Uh.window[Uh.strstart]),Uh.lookahead--,Uh.strstart++),ed&&(wh(Uh,!1),Uh.strm.avail_out===0))return ph}return Uh.insert=0,Kh===ec?(wh(Uh,!0),Uh.strm.avail_out===0?xh:_h):Uh.last_lit&&(wh(Uh,!1),Uh.strm.avail_out===0)?ph:yh}($h,Gh):u[$h.level].func($h,Gh);if(Zh!==xh&&Zh!==_h||($h.status=666),Zh===ph||Zh===xh)return Sh.avail_out===0&&($h.last_flush=-1),tc;if(Zh===yh&&(Gh===1?p._tr_align($h):Gh!==5&&(p._tr_stored_block($h,0,0,!1),Gh===3&&(Th($h.head),$h.lookahead===0&&($h.strstart=0,$h.block_start=0,$h.insert=0))),Ch(Sh),Sh.avail_out===0))return $h.last_flush=-1,tc}return Gh!==ec?tc:$h.wrap<=0?1:($h.wrap===2?(Nh($h,255&Sh.adler),Nh($h,Sh.adler>>8&255),Nh($h,Sh.adler>>16&255),Nh($h,Sh.adler>>24&255),Nh($h,255&Sh.total_in),Nh($h,Sh.total_in>>8&255),Nh($h,Sh.total_in>>16&255),Nh($h,Sh.total_in>>24&255)):(Rh($h,Sh.adler>>>16),Rh($h,65535&Sh.adler)),Ch(Sh),0<$h.wrap&&($h.wrap=-$h.wrap),$h.pending!==0?tc:1)},o.deflateEnd=function(Sh){var Gh;return Sh&&Sh.state?(Gh=Sh.state.status)!==fh&&Gh!==69&&Gh!==73&&Gh!==91&&Gh!==103&&Gh!==vh&&Gh!==666?bh(Sh,rc):(Sh.state=null,Gh===vh?bh(Sh,-3):tc):rc},o.deflateSetDictionary=function(Sh,Gh){var zh,$h,Ph,Vh,Xh,Zh,Uh,Kh,ed=Gh.length;if(!Sh||!Sh.state||(Vh=(zh=Sh.state).wrap)===2||Vh===1&&zh.status!==fh||zh.lookahead)return rc;for(Vh===1&&(Sh.adler=d(Sh.adler,Gh,ed,0)),zh.wrap=0,ed>=zh.w_size&&(Vh===0&&(Th(zh.head),zh.strstart=0,zh.block_start=0,zh.insert=0),Kh=new c.Buf8(zh.w_size),c.arraySet(Kh,Gh,ed-zh.w_size,zh.w_size,0),Gh=Kh,ed=zh.w_size),Xh=Sh.avail_in,Zh=Sh.next_in,Uh=Sh.input,Sh.avail_in=ed,Sh.next_in=0,Sh.input=Gh,Lh(zh);zh.lookahead>=hh;){for($h=zh.strstart,Ph=zh.lookahead-(hh-1);zh.ins_h=(zh.ins_h<<zh.hash_shift^zh.window[$h+hh-1])&zh.hash_mask,zh.prev[$h&zh.w_mask]=zh.head[zh.ins_h],zh.head[zh.ins_h]=$h,$h++,--Ph;);zh.strstart=$h,zh.lookahead=hh-1,Lh(zh)}return zh.strstart+=zh.lookahead,zh.block_start=zh.strstart,zh.insert=zh.lookahead,zh.lookahead=0,zh.match_length=zh.prev_length=hh-1,zh.match_available=0,Sh.next_in=Zh,Sh.input=Uh,Sh.avail_in=Xh,zh.wrap=Vh,tc},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,s,o){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,s,o){s.exports=function(u,c){var p,d,_,ja,Ja,ec,tc,rc,nc,ic,uc,eh,rh,ah,ih,oh,uh,ch,hh,dh,gh,fh,vh,ph,yh;p=u.state,d=u.next_in,ph=u.input,_=d+(u.avail_in-5),ja=u.next_out,yh=u.output,Ja=ja-(c-u.avail_out),ec=ja+(u.avail_out-257),tc=p.dmax,rc=p.wsize,nc=p.whave,ic=p.wnext,uc=p.window,eh=p.hold,rh=p.bits,ah=p.lencode,ih=p.distcode,oh=(1<<p.lenbits)-1,uh=(1<<p.distbits)-1;e:do{rh<15&&(eh+=ph[d++]<<rh,rh+=8,eh+=ph[d++]<<rh,rh+=8),ch=ah[eh&oh];t:for(;;){if(eh>>>=hh=ch>>>24,rh-=hh,(hh=ch>>>16&255)===0)yh[ja++]=65535&ch;else{if(!(16&hh)){if(!(64&hh)){ch=ah[(65535&ch)+(eh&(1<<hh)-1)];continue t}if(32&hh){p.mode=12;break e}u.msg="invalid literal/length code",p.mode=30;break e}dh=65535&ch,(hh&=15)&&(rh<hh&&(eh+=ph[d++]<<rh,rh+=8),dh+=eh&(1<<hh)-1,eh>>>=hh,rh-=hh),rh<15&&(eh+=ph[d++]<<rh,rh+=8,eh+=ph[d++]<<rh,rh+=8),ch=ih[eh&uh];r:for(;;){if(eh>>>=hh=ch>>>24,rh-=hh,!(16&(hh=ch>>>16&255))){if(!(64&hh)){ch=ih[(65535&ch)+(eh&(1<<hh)-1)];continue r}u.msg="invalid distance code",p.mode=30;break e}if(gh=65535&ch,rh<(hh&=15)&&(eh+=ph[d++]<<rh,(rh+=8)<hh&&(eh+=ph[d++]<<rh,rh+=8)),tc<(gh+=eh&(1<<hh)-1)){u.msg="invalid distance too far back",p.mode=30;break e}if(eh>>>=hh,rh-=hh,(hh=ja-Ja)<gh){if(nc<(hh=gh-hh)&&p.sane){u.msg="invalid distance too far back",p.mode=30;break e}if(vh=uc,(fh=0)===ic){if(fh+=rc-hh,hh<dh){for(dh-=hh;yh[ja++]=uc[fh++],--hh;);fh=ja-gh,vh=yh}}else if(ic<hh){if(fh+=rc+ic-hh,(hh-=ic)<dh){for(dh-=hh;yh[ja++]=uc[fh++],--hh;);if(fh=0,ic<dh){for(dh-=hh=ic;yh[ja++]=uc[fh++],--hh;);fh=ja-gh,vh=yh}}}else if(fh+=ic-hh,hh<dh){for(dh-=hh;yh[ja++]=uc[fh++],--hh;);fh=ja-gh,vh=yh}for(;2<dh;)yh[ja++]=vh[fh++],yh[ja++]=vh[fh++],yh[ja++]=vh[fh++],dh-=3;dh&&(yh[ja++]=vh[fh++],1<dh&&(yh[ja++]=vh[fh++]))}else{for(fh=ja-gh;yh[ja++]=yh[fh++],yh[ja++]=yh[fh++],yh[ja++]=yh[fh++],2<(dh-=3););dh&&(yh[ja++]=yh[fh++],1<dh&&(yh[ja++]=yh[fh++]))}break}}break}}while(d<_&&ja<ec);d-=dh=rh>>3,eh&=(1<<(rh-=dh<<3))-1,u.next_in=d,u.next_out=ja,u.avail_in=d<_?_-d+5:5-(d-_),u.avail_out=ja<ec?ec-ja+257:257-(ja-ec),p.hold=eh,p.bits=rh}},{}],49:[function(a,s,o){var u=a("../utils/common"),c=a("./adler32"),p=a("./crc32"),d=a("./inffast"),_=a("./inftrees"),ja=1,Ja=2,ec=0,tc=-2,rc=1,nc=852,ic=592;function uc(fh){return(fh>>>24&255)+(fh>>>8&65280)+((65280&fh)<<8)+((255&fh)<<24)}function eh(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function rh(fh){var vh;return fh&&fh.state?(vh=fh.state,fh.total_in=fh.total_out=vh.total=0,fh.msg="",vh.wrap&&(fh.adler=1&vh.wrap),vh.mode=rc,vh.last=0,vh.havedict=0,vh.dmax=32768,vh.head=null,vh.hold=0,vh.bits=0,vh.lencode=vh.lendyn=new u.Buf32(nc),vh.distcode=vh.distdyn=new u.Buf32(ic),vh.sane=1,vh.back=-1,ec):tc}function ah(fh){var vh;return fh&&fh.state?((vh=fh.state).wsize=0,vh.whave=0,vh.wnext=0,rh(fh)):tc}function ih(fh,vh){var ph,yh;return fh&&fh.state?(yh=fh.state,vh<0?(ph=0,vh=-vh):(ph=1+(vh>>4),vh<48&&(vh&=15)),vh&&(vh<8||15<vh)?tc:(yh.window!==null&&yh.wbits!==vh&&(yh.window=null),yh.wrap=ph,yh.wbits=vh,ah(fh))):tc}function oh(fh,vh){var ph,yh;return fh?(yh=new eh,(fh.state=yh).window=null,(ph=ih(fh,vh))!==ec&&(fh.state=null),ph):tc}var uh,ch,hh=!0;function dh(fh){if(hh){var vh;for(uh=new u.Buf32(512),ch=new u.Buf32(32),vh=0;vh<144;)fh.lens[vh++]=8;for(;vh<256;)fh.lens[vh++]=9;for(;vh<280;)fh.lens[vh++]=7;for(;vh<288;)fh.lens[vh++]=8;for(_(ja,fh.lens,0,288,uh,0,fh.work,{bits:9}),vh=0;vh<32;)fh.lens[vh++]=5;_(Ja,fh.lens,0,32,ch,0,fh.work,{bits:5}),hh=!1}fh.lencode=uh,fh.lenbits=9,fh.distcode=ch,fh.distbits=5}function gh(fh,vh,ph,yh){var xh,_h=fh.state;return _h.window===null&&(_h.wsize=1<<_h.wbits,_h.wnext=0,_h.whave=0,_h.window=new u.Buf8(_h.wsize)),yh>=_h.wsize?(u.arraySet(_h.window,vh,ph-_h.wsize,_h.wsize,0),_h.wnext=0,_h.whave=_h.wsize):(yh<(xh=_h.wsize-_h.wnext)&&(xh=yh),u.arraySet(_h.window,vh,ph-yh,xh,_h.wnext),(yh-=xh)?(u.arraySet(_h.window,vh,ph-yh,yh,0),_h.wnext=yh,_h.whave=_h.wsize):(_h.wnext+=xh,_h.wnext===_h.wsize&&(_h.wnext=0),_h.whave<_h.wsize&&(_h.whave+=xh))),0}o.inflateReset=ah,o.inflateReset2=ih,o.inflateResetKeep=rh,o.inflateInit=function(fh){return oh(fh,15)},o.inflateInit2=oh,o.inflate=function(fh,vh){var ph,yh,xh,_h,bh,Dh,Th,Ch,wh,Nh,Rh,kh,Lh,Fh,Wh,Qh,jh,Hh,qh,nd,Sh,Gh,zh,$h,Ph=0,Vh=new u.Buf8(4),Xh=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!fh||!fh.state||!fh.output||!fh.input&&fh.avail_in!==0)return tc;(ph=fh.state).mode===12&&(ph.mode=13),bh=fh.next_out,xh=fh.output,Th=fh.avail_out,_h=fh.next_in,yh=fh.input,Dh=fh.avail_in,Ch=ph.hold,wh=ph.bits,Nh=Dh,Rh=Th,Gh=ec;e:for(;;)switch(ph.mode){case rc:if(ph.wrap===0){ph.mode=13;break}for(;wh<16;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(2&ph.wrap&&Ch===35615){Vh[ph.check=0]=255&Ch,Vh[1]=Ch>>>8&255,ph.check=p(ph.check,Vh,2,0),wh=Ch=0,ph.mode=2;break}if(ph.flags=0,ph.head&&(ph.head.done=!1),!(1&ph.wrap)||(((255&Ch)<<8)+(Ch>>8))%31){fh.msg="incorrect header check",ph.mode=30;break}if((15&Ch)!=8){fh.msg="unknown compression method",ph.mode=30;break}if(wh-=4,Sh=8+(15&(Ch>>>=4)),ph.wbits===0)ph.wbits=Sh;else if(Sh>ph.wbits){fh.msg="invalid window size",ph.mode=30;break}ph.dmax=1<<Sh,fh.adler=ph.check=1,ph.mode=512&Ch?10:12,wh=Ch=0;break;case 2:for(;wh<16;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(ph.flags=Ch,(255&ph.flags)!=8){fh.msg="unknown compression method",ph.mode=30;break}if(57344&ph.flags){fh.msg="unknown header flags set",ph.mode=30;break}ph.head&&(ph.head.text=Ch>>8&1),512&ph.flags&&(Vh[0]=255&Ch,Vh[1]=Ch>>>8&255,ph.check=p(ph.check,Vh,2,0)),wh=Ch=0,ph.mode=3;case 3:for(;wh<32;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}ph.head&&(ph.head.time=Ch),512&ph.flags&&(Vh[0]=255&Ch,Vh[1]=Ch>>>8&255,Vh[2]=Ch>>>16&255,Vh[3]=Ch>>>24&255,ph.check=p(ph.check,Vh,4,0)),wh=Ch=0,ph.mode=4;case 4:for(;wh<16;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}ph.head&&(ph.head.xflags=255&Ch,ph.head.os=Ch>>8),512&ph.flags&&(Vh[0]=255&Ch,Vh[1]=Ch>>>8&255,ph.check=p(ph.check,Vh,2,0)),wh=Ch=0,ph.mode=5;case 5:if(1024&ph.flags){for(;wh<16;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}ph.length=Ch,ph.head&&(ph.head.extra_len=Ch),512&ph.flags&&(Vh[0]=255&Ch,Vh[1]=Ch>>>8&255,ph.check=p(ph.check,Vh,2,0)),wh=Ch=0}else ph.head&&(ph.head.extra=null);ph.mode=6;case 6:if(1024&ph.flags&&(Dh<(kh=ph.length)&&(kh=Dh),kh&&(ph.head&&(Sh=ph.head.extra_len-ph.length,ph.head.extra||(ph.head.extra=new Array(ph.head.extra_len)),u.arraySet(ph.head.extra,yh,_h,kh,Sh)),512&ph.flags&&(ph.check=p(ph.check,yh,kh,_h)),Dh-=kh,_h+=kh,ph.length-=kh),ph.length))break e;ph.length=0,ph.mode=7;case 7:if(2048&ph.flags){if(Dh===0)break e;for(kh=0;Sh=yh[_h+kh++],ph.head&&Sh&&ph.length<65536&&(ph.head.name+=String.fromCharCode(Sh)),Sh&&kh<Dh;);if(512&ph.flags&&(ph.check=p(ph.check,yh,kh,_h)),Dh-=kh,_h+=kh,Sh)break e}else ph.head&&(ph.head.name=null);ph.length=0,ph.mode=8;case 8:if(4096&ph.flags){if(Dh===0)break e;for(kh=0;Sh=yh[_h+kh++],ph.head&&Sh&&ph.length<65536&&(ph.head.comment+=String.fromCharCode(Sh)),Sh&&kh<Dh;);if(512&ph.flags&&(ph.check=p(ph.check,yh,kh,_h)),Dh-=kh,_h+=kh,Sh)break e}else ph.head&&(ph.head.comment=null);ph.mode=9;case 9:if(512&ph.flags){for(;wh<16;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(Ch!==(65535&ph.check)){fh.msg="header crc mismatch",ph.mode=30;break}wh=Ch=0}ph.head&&(ph.head.hcrc=ph.flags>>9&1,ph.head.done=!0),fh.adler=ph.check=0,ph.mode=12;break;case 10:for(;wh<32;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}fh.adler=ph.check=uc(Ch),wh=Ch=0,ph.mode=11;case 11:if(ph.havedict===0)return fh.next_out=bh,fh.avail_out=Th,fh.next_in=_h,fh.avail_in=Dh,ph.hold=Ch,ph.bits=wh,2;fh.adler=ph.check=1,ph.mode=12;case 12:if(vh===5||vh===6)break e;case 13:if(ph.last){Ch>>>=7&wh,wh-=7&wh,ph.mode=27;break}for(;wh<3;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}switch(ph.last=1&Ch,wh-=1,3&(Ch>>>=1)){case 0:ph.mode=14;break;case 1:if(dh(ph),ph.mode=20,vh!==6)break;Ch>>>=2,wh-=2;break e;case 2:ph.mode=17;break;case 3:fh.msg="invalid block type",ph.mode=30}Ch>>>=2,wh-=2;break;case 14:for(Ch>>>=7&wh,wh-=7&wh;wh<32;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if((65535&Ch)!=(Ch>>>16^65535)){fh.msg="invalid stored block lengths",ph.mode=30;break}if(ph.length=65535&Ch,wh=Ch=0,ph.mode=15,vh===6)break e;case 15:ph.mode=16;case 16:if(kh=ph.length){if(Dh<kh&&(kh=Dh),Th<kh&&(kh=Th),kh===0)break e;u.arraySet(xh,yh,_h,kh,bh),Dh-=kh,_h+=kh,Th-=kh,bh+=kh,ph.length-=kh;break}ph.mode=12;break;case 17:for(;wh<14;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(ph.nlen=257+(31&Ch),Ch>>>=5,wh-=5,ph.ndist=1+(31&Ch),Ch>>>=5,wh-=5,ph.ncode=4+(15&Ch),Ch>>>=4,wh-=4,286<ph.nlen||30<ph.ndist){fh.msg="too many length or distance symbols",ph.mode=30;break}ph.have=0,ph.mode=18;case 18:for(;ph.have<ph.ncode;){for(;wh<3;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}ph.lens[Xh[ph.have++]]=7&Ch,Ch>>>=3,wh-=3}for(;ph.have<19;)ph.lens[Xh[ph.have++]]=0;if(ph.lencode=ph.lendyn,ph.lenbits=7,zh={bits:ph.lenbits},Gh=_(0,ph.lens,0,19,ph.lencode,0,ph.work,zh),ph.lenbits=zh.bits,Gh){fh.msg="invalid code lengths set",ph.mode=30;break}ph.have=0,ph.mode=19;case 19:for(;ph.have<ph.nlen+ph.ndist;){for(;Qh=(Ph=ph.lencode[Ch&(1<<ph.lenbits)-1])>>>16&255,jh=65535&Ph,!((Wh=Ph>>>24)<=wh);){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(jh<16)Ch>>>=Wh,wh-=Wh,ph.lens[ph.have++]=jh;else{if(jh===16){for($h=Wh+2;wh<$h;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(Ch>>>=Wh,wh-=Wh,ph.have===0){fh.msg="invalid bit length repeat",ph.mode=30;break}Sh=ph.lens[ph.have-1],kh=3+(3&Ch),Ch>>>=2,wh-=2}else if(jh===17){for($h=Wh+3;wh<$h;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}wh-=Wh,Sh=0,kh=3+(7&(Ch>>>=Wh)),Ch>>>=3,wh-=3}else{for($h=Wh+7;wh<$h;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}wh-=Wh,Sh=0,kh=11+(127&(Ch>>>=Wh)),Ch>>>=7,wh-=7}if(ph.have+kh>ph.nlen+ph.ndist){fh.msg="invalid bit length repeat",ph.mode=30;break}for(;kh--;)ph.lens[ph.have++]=Sh}}if(ph.mode===30)break;if(ph.lens[256]===0){fh.msg="invalid code -- missing end-of-block",ph.mode=30;break}if(ph.lenbits=9,zh={bits:ph.lenbits},Gh=_(ja,ph.lens,0,ph.nlen,ph.lencode,0,ph.work,zh),ph.lenbits=zh.bits,Gh){fh.msg="invalid literal/lengths set",ph.mode=30;break}if(ph.distbits=6,ph.distcode=ph.distdyn,zh={bits:ph.distbits},Gh=_(Ja,ph.lens,ph.nlen,ph.ndist,ph.distcode,0,ph.work,zh),ph.distbits=zh.bits,Gh){fh.msg="invalid distances set",ph.mode=30;break}if(ph.mode=20,vh===6)break e;case 20:ph.mode=21;case 21:if(6<=Dh&&258<=Th){fh.next_out=bh,fh.avail_out=Th,fh.next_in=_h,fh.avail_in=Dh,ph.hold=Ch,ph.bits=wh,d(fh,Rh),bh=fh.next_out,xh=fh.output,Th=fh.avail_out,_h=fh.next_in,yh=fh.input,Dh=fh.avail_in,Ch=ph.hold,wh=ph.bits,ph.mode===12&&(ph.back=-1);break}for(ph.back=0;Qh=(Ph=ph.lencode[Ch&(1<<ph.lenbits)-1])>>>16&255,jh=65535&Ph,!((Wh=Ph>>>24)<=wh);){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(Qh&&!(240&Qh)){for(Hh=Wh,qh=Qh,nd=jh;Qh=(Ph=ph.lencode[nd+((Ch&(1<<Hh+qh)-1)>>Hh)])>>>16&255,jh=65535&Ph,!(Hh+(Wh=Ph>>>24)<=wh);){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}Ch>>>=Hh,wh-=Hh,ph.back+=Hh}if(Ch>>>=Wh,wh-=Wh,ph.back+=Wh,ph.length=jh,Qh===0){ph.mode=26;break}if(32&Qh){ph.back=-1,ph.mode=12;break}if(64&Qh){fh.msg="invalid literal/length code",ph.mode=30;break}ph.extra=15&Qh,ph.mode=22;case 22:if(ph.extra){for($h=ph.extra;wh<$h;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}ph.length+=Ch&(1<<ph.extra)-1,Ch>>>=ph.extra,wh-=ph.extra,ph.back+=ph.extra}ph.was=ph.length,ph.mode=23;case 23:for(;Qh=(Ph=ph.distcode[Ch&(1<<ph.distbits)-1])>>>16&255,jh=65535&Ph,!((Wh=Ph>>>24)<=wh);){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(!(240&Qh)){for(Hh=Wh,qh=Qh,nd=jh;Qh=(Ph=ph.distcode[nd+((Ch&(1<<Hh+qh)-1)>>Hh)])>>>16&255,jh=65535&Ph,!(Hh+(Wh=Ph>>>24)<=wh);){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}Ch>>>=Hh,wh-=Hh,ph.back+=Hh}if(Ch>>>=Wh,wh-=Wh,ph.back+=Wh,64&Qh){fh.msg="invalid distance code",ph.mode=30;break}ph.offset=jh,ph.extra=15&Qh,ph.mode=24;case 24:if(ph.extra){for($h=ph.extra;wh<$h;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}ph.offset+=Ch&(1<<ph.extra)-1,Ch>>>=ph.extra,wh-=ph.extra,ph.back+=ph.extra}if(ph.offset>ph.dmax){fh.msg="invalid distance too far back",ph.mode=30;break}ph.mode=25;case 25:if(Th===0)break e;if(kh=Rh-Th,ph.offset>kh){if((kh=ph.offset-kh)>ph.whave&&ph.sane){fh.msg="invalid distance too far back",ph.mode=30;break}Lh=kh>ph.wnext?(kh-=ph.wnext,ph.wsize-kh):ph.wnext-kh,kh>ph.length&&(kh=ph.length),Fh=ph.window}else Fh=xh,Lh=bh-ph.offset,kh=ph.length;for(Th<kh&&(kh=Th),Th-=kh,ph.length-=kh;xh[bh++]=Fh[Lh++],--kh;);ph.length===0&&(ph.mode=21);break;case 26:if(Th===0)break e;xh[bh++]=ph.length,Th--,ph.mode=21;break;case 27:if(ph.wrap){for(;wh<32;){if(Dh===0)break e;Dh--,Ch|=yh[_h++]<<wh,wh+=8}if(Rh-=Th,fh.total_out+=Rh,ph.total+=Rh,Rh&&(fh.adler=ph.check=ph.flags?p(ph.check,xh,Rh,bh-Rh):c(ph.check,xh,Rh,bh-Rh)),Rh=Th,(ph.flags?Ch:uc(Ch))!==ph.check){fh.msg="incorrect data check",ph.mode=30;break}wh=Ch=0}ph.mode=28;case 28:if(ph.wrap&&ph.flags){for(;wh<32;){if(Dh===0)break e;Dh--,Ch+=yh[_h++]<<wh,wh+=8}if(Ch!==(4294967295&ph.total)){fh.msg="incorrect length check",ph.mode=30;break}wh=Ch=0}ph.mode=29;case 29:Gh=1;break e;case 30:Gh=-3;break e;case 31:return-4;case 32:default:return tc}return fh.next_out=bh,fh.avail_out=Th,fh.next_in=_h,fh.avail_in=Dh,ph.hold=Ch,ph.bits=wh,(ph.wsize||Rh!==fh.avail_out&&ph.mode<30&&(ph.mode<27||vh!==4))&&gh(fh,fh.output,fh.next_out,Rh-fh.avail_out)?(ph.mode=31,-4):(Nh-=fh.avail_in,Rh-=fh.avail_out,fh.total_in+=Nh,fh.total_out+=Rh,ph.total+=Rh,ph.wrap&&Rh&&(fh.adler=ph.check=ph.flags?p(ph.check,xh,Rh,fh.next_out-Rh):c(ph.check,xh,Rh,fh.next_out-Rh)),fh.data_type=ph.bits+(ph.last?64:0)+(ph.mode===12?128:0)+(ph.mode===20||ph.mode===15?256:0),(Nh==0&&Rh===0||vh===4)&&Gh===ec&&(Gh=-5),Gh)},o.inflateEnd=function(fh){if(!fh||!fh.state)return tc;var vh=fh.state;return vh.window&&(vh.window=null),fh.state=null,ec},o.inflateGetHeader=function(fh,vh){var ph;return fh&&fh.state&&2&(ph=fh.state).wrap?((ph.head=vh).done=!1,ec):tc},o.inflateSetDictionary=function(fh,vh){var ph,yh=vh.length;return fh&&fh.state?(ph=fh.state).wrap!==0&&ph.mode!==11?tc:ph.mode===11&&c(1,vh,yh,0)!==ph.check?-3:gh(fh,vh,yh,yh)?(ph.mode=31,-4):(ph.havedict=1,ec):tc},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,s,o){var u=a("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(ja,Ja,ec,tc,rc,nc,ic,uc){var eh,rh,ah,ih,oh,uh,ch,hh,dh,gh=uc.bits,fh=0,vh=0,ph=0,yh=0,xh=0,_h=0,bh=0,Dh=0,Th=0,Ch=0,wh=null,Nh=0,Rh=new u.Buf16(16),kh=new u.Buf16(16),Lh=null,Fh=0;for(fh=0;fh<=15;fh++)Rh[fh]=0;for(vh=0;vh<tc;vh++)Rh[Ja[ec+vh]]++;for(xh=gh,yh=15;1<=yh&&Rh[yh]===0;yh--);if(yh<xh&&(xh=yh),yh===0)return rc[nc++]=20971520,rc[nc++]=20971520,uc.bits=1,0;for(ph=1;ph<yh&&Rh[ph]===0;ph++);for(xh<ph&&(xh=ph),fh=Dh=1;fh<=15;fh++)if(Dh<<=1,(Dh-=Rh[fh])<0)return-1;if(0<Dh&&(ja===0||yh!==1))return-1;for(kh[1]=0,fh=1;fh<15;fh++)kh[fh+1]=kh[fh]+Rh[fh];for(vh=0;vh<tc;vh++)Ja[ec+vh]!==0&&(ic[kh[Ja[ec+vh]]++]=vh);if(uh=ja===0?(wh=Lh=ic,19):ja===1?(wh=c,Nh-=257,Lh=p,Fh-=257,256):(wh=d,Lh=_,-1),fh=ph,oh=nc,bh=vh=Ch=0,ah=-1,ih=(Th=1<<(_h=xh))-1,ja===1&&852<Th||ja===2&&592<Th)return 1;for(;;){for(ch=fh-bh,dh=ic[vh]<uh?(hh=0,ic[vh]):ic[vh]>uh?(hh=Lh[Fh+ic[vh]],wh[Nh+ic[vh]]):(hh=96,0),eh=1<<fh-bh,ph=rh=1<<_h;rc[oh+(Ch>>bh)+(rh-=eh)]=ch<<24|hh<<16|dh|0,rh!==0;);for(eh=1<<fh-1;Ch&eh;)eh>>=1;if(eh!==0?(Ch&=eh-1,Ch+=eh):Ch=0,vh++,--Rh[fh]==0){if(fh===yh)break;fh=Ja[ec+ic[vh]]}if(xh<fh&&(Ch&ih)!==ah){for(bh===0&&(bh=xh),oh+=ph,Dh=1<<(_h=fh-bh);_h+bh<yh&&!((Dh-=Rh[_h+bh])<=0);)_h++,Dh<<=1;if(Th+=1<<_h,ja===1&&852<Th||ja===2&&592<Th)return 1;rc[ah=Ch&ih]=xh<<24|_h<<16|oh-nc|0}}return Ch!==0&&(rc[oh+Ch]=fh-bh<<24|64<<16|0),uc.bits=xh,0}},{"../utils/common":41}],51:[function(a,s,o){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,s,o){var u=a("../utils/common"),c=0,p=1;function d(Ph){for(var Vh=Ph.length;0<=--Vh;)Ph[Vh]=0}var _=0,ja=29,Ja=256,ec=Ja+1+ja,tc=30,rc=19,nc=2*ec+1,ic=15,uc=16,eh=7,rh=256,ah=16,ih=17,oh=18,uh=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ch=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],hh=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],dh=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],gh=new Array(2*(ec+2));d(gh);var fh=new Array(2*tc);d(fh);var vh=new Array(512);d(vh);var ph=new Array(256);d(ph);var yh=new Array(ja);d(yh);var xh,_h,bh,Dh=new Array(tc);function Th(Ph,Vh,Xh,Zh,Uh){this.static_tree=Ph,this.extra_bits=Vh,this.extra_base=Xh,this.elems=Zh,this.max_length=Uh,this.has_stree=Ph&&Ph.length}function Ch(Ph,Vh){this.dyn_tree=Ph,this.max_code=0,this.stat_desc=Vh}function wh(Ph){return Ph<256?vh[Ph]:vh[256+(Ph>>>7)]}function Nh(Ph,Vh){Ph.pending_buf[Ph.pending++]=255&Vh,Ph.pending_buf[Ph.pending++]=Vh>>>8&255}function Rh(Ph,Vh,Xh){Ph.bi_valid>uc-Xh?(Ph.bi_buf|=Vh<<Ph.bi_valid&65535,Nh(Ph,Ph.bi_buf),Ph.bi_buf=Vh>>uc-Ph.bi_valid,Ph.bi_valid+=Xh-uc):(Ph.bi_buf|=Vh<<Ph.bi_valid&65535,Ph.bi_valid+=Xh)}function kh(Ph,Vh,Xh){Rh(Ph,Xh[2*Vh],Xh[2*Vh+1])}function Lh(Ph,Vh){for(var Xh=0;Xh|=1&Ph,Ph>>>=1,Xh<<=1,0<--Vh;);return Xh>>>1}function Fh(Ph,Vh,Xh){var Zh,Uh,Kh=new Array(ic+1),ed=0;for(Zh=1;Zh<=ic;Zh++)Kh[Zh]=ed=ed+Xh[Zh-1]<<1;for(Uh=0;Uh<=Vh;Uh++){var Jh=Ph[2*Uh+1];Jh!==0&&(Ph[2*Uh]=Lh(Kh[Jh]++,Jh))}}function Wh(Ph){var Vh;for(Vh=0;Vh<ec;Vh++)Ph.dyn_ltree[2*Vh]=0;for(Vh=0;Vh<tc;Vh++)Ph.dyn_dtree[2*Vh]=0;for(Vh=0;Vh<rc;Vh++)Ph.bl_tree[2*Vh]=0;Ph.dyn_ltree[2*rh]=1,Ph.opt_len=Ph.static_len=0,Ph.last_lit=Ph.matches=0}function Qh(Ph){8<Ph.bi_valid?Nh(Ph,Ph.bi_buf):0<Ph.bi_valid&&(Ph.pending_buf[Ph.pending++]=Ph.bi_buf),Ph.bi_buf=0,Ph.bi_valid=0}function jh(Ph,Vh,Xh,Zh){var Uh=2*Vh,Kh=2*Xh;return Ph[Uh]<Ph[Kh]||Ph[Uh]===Ph[Kh]&&Zh[Vh]<=Zh[Xh]}function Hh(Ph,Vh,Xh){for(var Zh=Ph.heap[Xh],Uh=Xh<<1;Uh<=Ph.heap_len&&(Uh<Ph.heap_len&&jh(Vh,Ph.heap[Uh+1],Ph.heap[Uh],Ph.depth)&&Uh++,!jh(Vh,Zh,Ph.heap[Uh],Ph.depth));)Ph.heap[Xh]=Ph.heap[Uh],Xh=Uh,Uh<<=1;Ph.heap[Xh]=Zh}function qh(Ph,Vh,Xh){var Zh,Uh,Kh,ed,Jh=0;if(Ph.last_lit!==0)for(;Zh=Ph.pending_buf[Ph.d_buf+2*Jh]<<8|Ph.pending_buf[Ph.d_buf+2*Jh+1],Uh=Ph.pending_buf[Ph.l_buf+Jh],Jh++,Zh===0?kh(Ph,Uh,Vh):(kh(Ph,(Kh=ph[Uh])+Ja+1,Vh),(ed=uh[Kh])!==0&&Rh(Ph,Uh-=yh[Kh],ed),kh(Ph,Kh=wh(--Zh),Xh),(ed=ch[Kh])!==0&&Rh(Ph,Zh-=Dh[Kh],ed)),Jh<Ph.last_lit;);kh(Ph,rh,Vh)}function nd(Ph,Vh){var Xh,Zh,Uh,Kh=Vh.dyn_tree,ed=Vh.stat_desc.static_tree,Jh=Vh.stat_desc.has_stree,od=Vh.stat_desc.elems,ud=-1;for(Ph.heap_len=0,Ph.heap_max=nc,Xh=0;Xh<od;Xh++)Kh[2*Xh]!==0?(Ph.heap[++Ph.heap_len]=ud=Xh,Ph.depth[Xh]=0):Kh[2*Xh+1]=0;for(;Ph.heap_len<2;)Kh[2*(Uh=Ph.heap[++Ph.heap_len]=ud<2?++ud:0)]=1,Ph.depth[Uh]=0,Ph.opt_len--,Jh&&(Ph.static_len-=ed[2*Uh+1]);for(Vh.max_code=ud,Xh=Ph.heap_len>>1;1<=Xh;Xh--)Hh(Ph,Kh,Xh);for(Uh=od;Xh=Ph.heap[1],Ph.heap[1]=Ph.heap[Ph.heap_len--],Hh(Ph,Kh,1),Zh=Ph.heap[1],Ph.heap[--Ph.heap_max]=Xh,Ph.heap[--Ph.heap_max]=Zh,Kh[2*Uh]=Kh[2*Xh]+Kh[2*Zh],Ph.depth[Uh]=(Ph.depth[Xh]>=Ph.depth[Zh]?Ph.depth[Xh]:Ph.depth[Zh])+1,Kh[2*Xh+1]=Kh[2*Zh+1]=Uh,Ph.heap[1]=Uh++,Hh(Ph,Kh,1),2<=Ph.heap_len;);Ph.heap[--Ph.heap_max]=Ph.heap[1],function(ld,vd){var _d,Ad,Td,pd,$d,wd,md=vd.dyn_tree,xd=vd.max_code,Id=vd.stat_desc.static_tree,jd=vd.stat_desc.has_stree,Xd=vd.stat_desc.extra_bits,Vd=vd.stat_desc.extra_base,bd=vd.stat_desc.max_length,Cd=0;for(pd=0;pd<=ic;pd++)ld.bl_count[pd]=0;for(md[2*ld.heap[ld.heap_max]+1]=0,_d=ld.heap_max+1;_d<nc;_d++)bd<(pd=md[2*md[2*(Ad=ld.heap[_d])+1]+1]+1)&&(pd=bd,Cd++),md[2*Ad+1]=pd,xd<Ad||(ld.bl_count[pd]++,$d=0,Vd<=Ad&&($d=Xd[Ad-Vd]),wd=md[2*Ad],ld.opt_len+=wd*(pd+$d),jd&&(ld.static_len+=wd*(Id[2*Ad+1]+$d)));if(Cd!==0){do{for(pd=bd-1;ld.bl_count[pd]===0;)pd--;ld.bl_count[pd]--,ld.bl_count[pd+1]+=2,ld.bl_count[bd]--,Cd-=2}while(0<Cd);for(pd=bd;pd!==0;pd--)for(Ad=ld.bl_count[pd];Ad!==0;)xd<(Td=ld.heap[--_d])||(md[2*Td+1]!==pd&&(ld.opt_len+=(pd-md[2*Td+1])*md[2*Td],md[2*Td+1]=pd),Ad--)}}(Ph,Vh),Fh(Kh,ud,Ph.bl_count)}function Sh(Ph,Vh,Xh){var Zh,Uh,Kh=-1,ed=Vh[1],Jh=0,od=7,ud=4;for(ed===0&&(od=138,ud=3),Vh[2*(Xh+1)+1]=65535,Zh=0;Zh<=Xh;Zh++)Uh=ed,ed=Vh[2*(Zh+1)+1],++Jh<od&&Uh===ed||(Jh<ud?Ph.bl_tree[2*Uh]+=Jh:Uh!==0?(Uh!==Kh&&Ph.bl_tree[2*Uh]++,Ph.bl_tree[2*ah]++):Jh<=10?Ph.bl_tree[2*ih]++:Ph.bl_tree[2*oh]++,Kh=Uh,ud=(Jh=0)===ed?(od=138,3):Uh===ed?(od=6,3):(od=7,4))}function Gh(Ph,Vh,Xh){var Zh,Uh,Kh=-1,ed=Vh[1],Jh=0,od=7,ud=4;for(ed===0&&(od=138,ud=3),Zh=0;Zh<=Xh;Zh++)if(Uh=ed,ed=Vh[2*(Zh+1)+1],!(++Jh<od&&Uh===ed)){if(Jh<ud)for(;kh(Ph,Uh,Ph.bl_tree),--Jh!=0;);else Uh!==0?(Uh!==Kh&&(kh(Ph,Uh,Ph.bl_tree),Jh--),kh(Ph,ah,Ph.bl_tree),Rh(Ph,Jh-3,2)):Jh<=10?(kh(Ph,ih,Ph.bl_tree),Rh(Ph,Jh-3,3)):(kh(Ph,oh,Ph.bl_tree),Rh(Ph,Jh-11,7));Kh=Uh,ud=(Jh=0)===ed?(od=138,3):Uh===ed?(od=6,3):(od=7,4)}}d(Dh);var zh=!1;function $h(Ph,Vh,Xh,Zh){Rh(Ph,(_<<1)+(Zh?1:0),3),function(Uh,Kh,ed,Jh){Qh(Uh),Nh(Uh,ed),Nh(Uh,~ed),u.arraySet(Uh.pending_buf,Uh.window,Kh,ed,Uh.pending),Uh.pending+=ed}(Ph,Vh,Xh)}o._tr_init=function(Ph){zh||(function(){var Vh,Xh,Zh,Uh,Kh,ed=new Array(ic+1);for(Uh=Zh=0;Uh<ja-1;Uh++)for(yh[Uh]=Zh,Vh=0;Vh<1<<uh[Uh];Vh++)ph[Zh++]=Uh;for(ph[Zh-1]=Uh,Uh=Kh=0;Uh<16;Uh++)for(Dh[Uh]=Kh,Vh=0;Vh<1<<ch[Uh];Vh++)vh[Kh++]=Uh;for(Kh>>=7;Uh<tc;Uh++)for(Dh[Uh]=Kh<<7,Vh=0;Vh<1<<ch[Uh]-7;Vh++)vh[256+Kh++]=Uh;for(Xh=0;Xh<=ic;Xh++)ed[Xh]=0;for(Vh=0;Vh<=143;)gh[2*Vh+1]=8,Vh++,ed[8]++;for(;Vh<=255;)gh[2*Vh+1]=9,Vh++,ed[9]++;for(;Vh<=279;)gh[2*Vh+1]=7,Vh++,ed[7]++;for(;Vh<=287;)gh[2*Vh+1]=8,Vh++,ed[8]++;for(Fh(gh,ec+1,ed),Vh=0;Vh<tc;Vh++)fh[2*Vh+1]=5,fh[2*Vh]=Lh(Vh,5);xh=new Th(gh,uh,Ja+1,ec,ic),_h=new Th(fh,ch,0,tc,ic),bh=new Th(new Array(0),hh,0,rc,eh)}(),zh=!0),Ph.l_desc=new Ch(Ph.dyn_ltree,xh),Ph.d_desc=new Ch(Ph.dyn_dtree,_h),Ph.bl_desc=new Ch(Ph.bl_tree,bh),Ph.bi_buf=0,Ph.bi_valid=0,Wh(Ph)},o._tr_stored_block=$h,o._tr_flush_block=function(Ph,Vh,Xh,Zh){var Uh,Kh,ed=0;0<Ph.level?(Ph.strm.data_type===2&&(Ph.strm.data_type=function(Jh){var od,ud=4093624447;for(od=0;od<=31;od++,ud>>>=1)if(1&ud&&Jh.dyn_ltree[2*od]!==0)return c;if(Jh.dyn_ltree[18]!==0||Jh.dyn_ltree[20]!==0||Jh.dyn_ltree[26]!==0)return p;for(od=32;od<Ja;od++)if(Jh.dyn_ltree[2*od]!==0)return p;return c}(Ph)),nd(Ph,Ph.l_desc),nd(Ph,Ph.d_desc),ed=function(Jh){var od;for(Sh(Jh,Jh.dyn_ltree,Jh.l_desc.max_code),Sh(Jh,Jh.dyn_dtree,Jh.d_desc.max_code),nd(Jh,Jh.bl_desc),od=rc-1;3<=od&&Jh.bl_tree[2*dh[od]+1]===0;od--);return Jh.opt_len+=3*(od+1)+5+5+4,od}(Ph),Uh=Ph.opt_len+3+7>>>3,(Kh=Ph.static_len+3+7>>>3)<=Uh&&(Uh=Kh)):Uh=Kh=Xh+5,Xh+4<=Uh&&Vh!==-1?$h(Ph,Vh,Xh,Zh):Ph.strategy===4||Kh===Uh?(Rh(Ph,2+(Zh?1:0),3),qh(Ph,gh,fh)):(Rh(Ph,4+(Zh?1:0),3),function(Jh,od,ud,ld){var vd;for(Rh(Jh,od-257,5),Rh(Jh,ud-1,5),Rh(Jh,ld-4,4),vd=0;vd<ld;vd++)Rh(Jh,Jh.bl_tree[2*dh[vd]+1],3);Gh(Jh,Jh.dyn_ltree,od-1),Gh(Jh,Jh.dyn_dtree,ud-1)}(Ph,Ph.l_desc.max_code+1,Ph.d_desc.max_code+1,ed+1),qh(Ph,Ph.dyn_ltree,Ph.dyn_dtree)),Wh(Ph),Zh&&Qh(Ph)},o._tr_tally=function(Ph,Vh,Xh){return Ph.pending_buf[Ph.d_buf+2*Ph.last_lit]=Vh>>>8&255,Ph.pending_buf[Ph.d_buf+2*Ph.last_lit+1]=255&Vh,Ph.pending_buf[Ph.l_buf+Ph.last_lit]=255&Xh,Ph.last_lit++,Vh===0?Ph.dyn_ltree[2*Xh]++:(Ph.matches++,Vh--,Ph.dyn_ltree[2*(ph[Xh]+Ja+1)]++,Ph.dyn_dtree[2*wh(Vh)]++),Ph.last_lit===Ph.lit_bufsize-1},o._tr_align=function(Ph){Rh(Ph,2,3),kh(Ph,rh,gh),function(Vh){Vh.bi_valid===16?(Nh(Vh,Vh.bi_buf),Vh.bi_buf=0,Vh.bi_valid=0):8<=Vh.bi_valid&&(Vh.pending_buf[Vh.pending++]=255&Vh.bi_buf,Vh.bi_buf>>=8,Vh.bi_valid-=8)}(Ph)}},{"../utils/common":41}],53:[function(a,s,o){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,s,o){(function(u){(function(c,p){if(!c.setImmediate){var d,_,ja,Ja,ec=1,tc={},rc=!1,nc=c.document,ic=Object.getPrototypeOf&&Object.getPrototypeOf(c);ic=ic&&ic.setTimeout?ic:c,d={}.toString.call(c.process)==="[object process]"?function(ah){process.nextTick(function(){eh(ah)})}:function(){if(c.postMessage&&!c.importScripts){var ah=!0,ih=c.onmessage;return c.onmessage=function(){ah=!1},c.postMessage("","*"),c.onmessage=ih,ah}}()?(Ja="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",rh,!1):c.attachEvent("onmessage",rh),function(ah){c.postMessage(Ja+ah,"*")}):c.MessageChannel?((ja=new MessageChannel).port1.onmessage=function(ah){eh(ah.data)},function(ah){ja.port2.postMessage(ah)}):nc&&"onreadystatechange"in nc.createElement("script")?(_=nc.documentElement,function(ah){var ih=nc.createElement("script");ih.onreadystatechange=function(){eh(ah),ih.onreadystatechange=null,_.removeChild(ih),ih=null},_.appendChild(ih)}):function(ah){setTimeout(eh,0,ah)},ic.setImmediate=function(ah){typeof ah!="function"&&(ah=new Function(""+ah));for(var ih=new Array(arguments.length-1),oh=0;oh<ih.length;oh++)ih[oh]=arguments[oh+1];var uh={callback:ah,args:ih};return tc[ec]=uh,d(ec),ec++},ic.clearImmediate=uc}function uc(ah){delete tc[ah]}function eh(ah){if(rc)setTimeout(eh,0,ah);else{var ih=tc[ah];if(ih){rc=!0;try{(function(oh){var uh=oh.callback,ch=oh.args;switch(ch.length){case 0:uh();break;case 1:uh(ch[0]);break;case 2:uh(ch[0],ch[1]);break;case 3:uh(ch[0],ch[1],ch[2]);break;default:uh.apply(p,ch)}})(ih)}finally{uc(ah),rc=!1}}}}function rh(ah){ah.source===c&&typeof ah.data=="string"&&ah.data.indexOf(Ja)===0&&eh(+ah.data.slice(Ja.length))}})(typeof self>"u"?u===void 0?this:u:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports);var Eu$1=Object.create,$e$3=Object.defineProperty,Cu$1=Object.getOwnPropertyDescriptor,hu$1=Object.getOwnPropertyNames,gu$1=Object.getPrototypeOf,yu$1=Object.prototype.hasOwnProperty,or$2=n=>{throw TypeError(n)},Au$1=(n,r)=>()=>(n&&(r=n(n=0)),r),ye$2=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),We$1=(n,r)=>{for(var a in r)$e$3(n,a,{get:r[a],enumerable:!0})},ir$2=(n,r,a,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of hu$1(r))!yu$1.call(n,o)&&o!==a&&$e$3(n,o,{get:()=>r[o],enumerable:!(s=Cu$1(r,o))||s.enumerable});return n},Ae$3=(n,r,a)=>(a=n!=null?Eu$1(gu$1(n)):{},ir$2($e$3(a,"default",{value:n,enumerable:!0}),n)),Bu$1=n=>ir$2($e$3({},"__esModule",{value:!0}),n),_u$1=(n,r,a)=>r.has(n)||or$2("Cannot "+a),sr$2=(n,r,a)=>r.has(n)?or$2("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,a),fe$2=(n,r,a)=>(_u$1(n,r,"access private method"),a),ar$2=ye$2(n=>{Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;function r(){}r.prototype={diff:function(s,o){var u,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=c.callback;typeof c=="function"&&(p=c,c={}),this.options=c;var d=this;function _(oh){return p?(setTimeout(function(){p(void 0,oh)},0),!0):oh}s=this.castInput(s),o=this.castInput(o),s=this.removeEmpty(this.tokenize(s)),o=this.removeEmpty(this.tokenize(o));var ja=o.length,Ja=s.length,ec=1,tc=ja+Ja;c.maxEditLength&&(tc=Math.min(tc,c.maxEditLength));var rc=(u=c.timeout)!==null&&u!==void 0?u:1/0,nc=Date.now()+rc,ic=[{oldPos:-1,lastComponent:void 0}],uc=this.extractCommon(ic[0],o,s,0);if(ic[0].oldPos+1>=Ja&&uc+1>=ja)return _([{value:this.join(o),count:o.length}]);var eh=-1/0,rh=1/0;function ah(){for(var oh=Math.max(eh,-ec);oh<=Math.min(rh,ec);oh+=2){var uh=void 0,ch=ic[oh-1],hh=ic[oh+1];ch&&(ic[oh-1]=void 0);var dh=!1;if(hh){var gh=hh.oldPos-oh;dh=hh&&0<=gh&&gh<ja}var fh=ch&&ch.oldPos+1<Ja;if(!dh&&!fh){ic[oh]=void 0;continue}if(!fh||dh&&ch.oldPos+1<hh.oldPos?uh=d.addToPath(hh,!0,void 0,0):uh=d.addToPath(ch,void 0,!0,1),uc=d.extractCommon(uh,o,s,oh),uh.oldPos+1>=Ja&&uc+1>=ja)return _(a(d,uh.lastComponent,o,s,d.useLongestToken));ic[oh]=uh,uh.oldPos+1>=Ja&&(rh=Math.min(rh,oh-1)),uc+1>=ja&&(eh=Math.max(eh,oh+1))}ec++}if(p)(function oh(){setTimeout(function(){if(ec>tc||Date.now()>nc)return p();ah()||oh()},0)})();else for(;ec<=tc&&Date.now()<=nc;){var ih=ah();if(ih)return ih}},addToPath:function(s,o,u,c){var p=s.lastComponent;return p&&p.added===o&&p.removed===u?{oldPos:s.oldPos+c,lastComponent:{count:p.count+1,added:o,removed:u,previousComponent:p.previousComponent}}:{oldPos:s.oldPos+c,lastComponent:{count:1,added:o,removed:u,previousComponent:p}}},extractCommon:function(s,o,u,c){for(var p=o.length,d=u.length,_=s.oldPos,ja=_-c,Ja=0;ja+1<p&&_+1<d&&this.equals(o[ja+1],u[_+1]);)ja++,_++,Ja++;return Ja&&(s.lastComponent={count:Ja,previousComponent:s.lastComponent}),s.oldPos=_,ja},equals:function(s,o){return this.options.comparator?this.options.comparator(s,o):s===o||this.options.ignoreCase&&s.toLowerCase()===o.toLowerCase()},removeEmpty:function(s){for(var o=[],u=0;u<s.length;u++)s[u]&&o.push(s[u]);return o},castInput:function(s){return s},tokenize:function(s){return s.split("")},join:function(s){return s.join("")}};function a(s,o,u,c,p){for(var d=[],_;o;)d.push(o),_=o.previousComponent,delete o.previousComponent,o=_;d.reverse();for(var ja=0,Ja=d.length,ec=0,tc=0;ja<Ja;ja++){var rc=d[ja];if(rc.removed){if(rc.value=s.join(c.slice(tc,tc+rc.count)),tc+=rc.count,ja&&d[ja-1].added){var nc=d[ja-1];d[ja-1]=d[ja],d[ja]=nc}}else{if(!rc.added&&p){var ic=u.slice(ec,ec+rc.count);ic=ic.map(function(eh,rh){var ah=c[tc+rh];return ah.length>eh.length?ah:eh}),rc.value=s.join(ic)}else rc.value=s.join(u.slice(ec,ec+rc.count));ec+=rc.count,rc.added||(tc+=rc.count)}}var uc=d[Ja-1];return Ja>1&&typeof uc.value=="string"&&(uc.added||uc.removed)&&s.equals("",uc.value)&&(d[Ja-2].value+=uc.value,d.pop()),d}}),cr$2=ye$2(n=>{Object.defineProperty(n,"__esModule",{value:!0}),n.diffArrays=o,n.arrayDiff=void 0;var r=a(ar$2());function a(u){return u&&u.__esModule?u:{default:u}}var s=new r.default;n.arrayDiff=s,s.tokenize=function(u){return u.slice()},s.join=s.removeEmpty=function(u){return u};function o(u,c,p){return s.diff(u,c,p)}}),ot$2=ye$2((n,r)=>{var a=new Proxy(String,{get:()=>a});r.exports=a}),wn$2={};We$1(wn$2,{default:()=>Ao$2,shouldHighlight:()=>yo$2});var yo$2,Ao$2,On$2=Au$1(()=>{yo$2=()=>!1,Ao$2=String}),Tn$2=ye$2((n,r)=>{var a=String,s=function(){return{isColorSupported:!1,reset:a,bold:a,dim:a,italic:a,underline:a,inverse:a,hidden:a,strikethrough:a,black:a,red:a,green:a,yellow:a,blue:a,magenta:a,cyan:a,white:a,gray:a,bgBlack:a,bgRed:a,bgGreen:a,bgYellow:a,bgBlue:a,bgMagenta:a,bgCyan:a,bgWhite:a}};r.exports=s(),r.exports.createColors=s}),jn$2=ye$2(n=>{Object.defineProperty(n,"__esModule",{value:!0}),n.codeFrameColumns=tc,n.default=rc;var r=(On$2(),Bu$1(wn$2)),a=o(Tn$2(),!0);function s(nc){if(typeof WeakMap!="function")return null;var ic=new WeakMap,uc=new WeakMap;return(s=function(eh){return eh?uc:ic})(nc)}function o(nc,ic){if(nc===null||typeof nc!="object"&&typeof nc!="function")return{default:nc};var uc=s(ic);if(uc&&uc.has(nc))return uc.get(nc);var eh={__proto__:null},rh=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ah in nc)if(ah!=="default"&&{}.hasOwnProperty.call(nc,ah)){var ih=rh?Object.getOwnPropertyDescriptor(nc,ah):null;ih&&(ih.get||ih.set)?Object.defineProperty(eh,ah,ih):eh[ah]=nc[ah]}return eh.default=nc,uc&&uc.set(nc,eh),eh}var u=a.default,c=(nc,ic)=>uc=>nc(ic(uc)),p;function d(nc){return nc?(p!=null||(p=(0,a.createColors)(!0)),p):u}var _=!1;function ja(nc){return{gutter:nc.gray,marker:c(nc.red,nc.bold),message:c(nc.red,nc.bold)}}var Ja=/\r\n|[\n\r\u2028\u2029]/;function ec(nc,ic,uc){let eh=Object.assign({column:0,line:-1},nc.start),rh=Object.assign({},eh,nc.end),{linesAbove:ah=2,linesBelow:ih=3}=uc||{},oh=eh.line,uh=eh.column,ch=rh.line,hh=rh.column,dh=Math.max(oh-(ah+1),0),gh=Math.min(ic.length,ch+ih);oh===-1&&(dh=0),ch===-1&&(gh=ic.length);let fh=ch-oh,vh={};if(fh)for(let ph=0;ph<=fh;ph++){let yh=ph+oh;if(!uh)vh[yh]=!0;else if(ph===0){let xh=ic[yh-1].length;vh[yh]=[uh,xh-uh+1]}else if(ph===fh)vh[yh]=[0,hh];else{let xh=ic[yh-ph].length;vh[yh]=[0,xh]}}else uh===hh?uh?vh[oh]=[uh,0]:vh[oh]=!0:vh[oh]=[uh,hh-uh];return{start:dh,end:gh,markerLines:vh}}function tc(nc,ic,uc={}){let eh=(uc.highlightCode||uc.forceColor)&&(0,r.shouldHighlight)(uc),rh=d(uc.forceColor),ah=ja(rh),ih=(vh,ph)=>eh?vh(ph):ph,oh=nc.split(Ja),{start:uh,end:ch,markerLines:hh}=ec(ic,oh,uc),dh=ic.start&&typeof ic.start.column=="number",gh=String(ch).length,fh=(eh?(0,r.default)(nc,uc):nc).split(Ja,ch).slice(uh,ch).map((vh,ph)=>{let yh=uh+1+ph,xh=` ${` ${yh}`.slice(-gh)} |`,_h=hh[yh],bh=!hh[yh+1];if(_h){let Dh="";if(Array.isArray(_h)){let Th=vh.slice(0,Math.max(_h[0]-1,0)).replace(/[^\t]/g," "),Ch=_h[1]||1;Dh=[`
 `,ih(ah.gutter,xh.replace(/\d/g," "))," ",Th,ih(ah.marker,"^").repeat(Ch)].join(""),bh&&uc.message&&(Dh+=" "+ih(ah.message,uc.message))}return[ih(ah.marker,">"),ih(ah.gutter,xh),vh.length>0?` ${vh}`:"",Dh].join("")}else return` ${ih(ah.gutter,xh)}${vh.length>0?` ${vh}`:""}`}).join(`
`);return uc.message&&!dh&&(fh=`${" ".repeat(gh+1)}${uc.message}
${fh}`),eh?rh.reset(fh):fh}function rc(nc,ic,uc,eh={}){if(!_){_=!0;let rh="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";{let ah=new Error(rh);ah.name="DeprecationWarning",console.warn(new Error(rh))}}return uc=Math.max(uc,0),tc(nc,{start:{column:uc,line:ic}},eh)}}),ur$2={};We$1(ur$2,{__debug:()=>ai$2,check:()=>si$1,doc:()=>tr$2,format:()=>mu$1,formatWithCursor:()=>du$1,getSupportInfo:()=>Di$2,util:()=>nr$2,version:()=>Du$1});var bu$1=(n,r,a,s)=>{if(!(n&&r==null))return r.replaceAll?r.replaceAll(a,s):a.global?r.replace(a,s):r.split(a).join(s)},re$2=bu$1,Qn$2=Ae$3(cr$2());function lr$2(n){let r=n.indexOf("\r");return r>=0?n.charAt(r+1)===`
`?"crlf":"cr":"lf"}function be$3(n){switch(n){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function At$2(n,r){let a;switch(r){case`
`:a=/\n/g;break;case"\r":a=/\r/g;break;case`\r
`:a=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(r)}.`)}let s=n.match(a);return s?s.length:0}function fr$2(n){return re$2(!1,n,/\r\n?/g,`
`)}var G$1="string",V$1="array",z$2="cursor",P$2="indent",L$2="align",I="trim",b$1="group",N$2="fill",x$2="if-break",R$2="indent-if-break",Y$2="line-suffix",j$2="line-suffix-boundary",B$1="line",T$2="label",w$2="break-parent",Ue$3=new Set([z$2,P$2,L$2,I,b$1,N$2,x$2,R$2,Y$2,j$2,B$1,T$2,w$2]);function Nu$1(n){if(typeof n=="string")return G$1;if(Array.isArray(n))return V$1;if(!n)return;let{type:r}=n;if(Ue$3.has(r))return r}var K$2=Nu$1,Tu$1=n=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(n);function Su$1(n){let r=n===null?"null":typeof n;if(r!=="string"&&r!=="object")return`Unexpected doc '${r}', 
Expected it to be 'string' or 'object'.`;if(K$2(n))throw new Error("doc is valid.");let a=Object.prototype.toString.call(n);if(a!=="[object Object]")return`Unexpected doc '${a}'.`;let s=Tu$1([...Ue$3].map(o=>`'${o}'`));return`Unexpected doc.type '${n.type}'.
Expected it to be ${s}.`}var Bt$2=class extends Error{constructor(a){super(Su$1(a));Zp(this,"name","InvalidDocError");this.doc=a}},Z$1=Bt$2,Fr$2={};function vu$1(n,r,a,s){let o=[n];for(;o.length>0;){let u=o.pop();if(u===Fr$2){a(o.pop());continue}a&&o.push(u,Fr$2);let c=K$2(u);if(!c)throw new Z$1(u);if((r==null?void 0:r(u))!==!1)switch(c){case V$1:case N$2:{let p=c===V$1?u:u.parts;for(let d=p.length,_=d-1;_>=0;--_)o.push(p[_]);break}case x$2:o.push(u.flatContents,u.breakContents);break;case b$1:if(s&&u.expandedStates)for(let p=u.expandedStates.length,d=p-1;d>=0;--d)o.push(u.expandedStates[d]);else o.push(u.contents);break;case L$2:case P$2:case R$2:case T$2:case Y$2:o.push(u.contents);break;case G$1:case z$2:case I:case j$2:case B$1:case w$2:break;default:throw new Z$1(u)}}}var xe$2=vu$1,pr$2=()=>{},Ge$2=pr$2;function De$2(n){return{type:P$2,contents:n}}function se$2(n,r){return{type:L$2,contents:r,n}}function _t$2(n,r={}){return Ge$2(r.expandedStates),{type:b$1,id:r.id,contents:n,break:!!r.shouldBreak,expandedStates:r.expandedStates}}function dr$1(n){return se$2(Number.NEGATIVE_INFINITY,n)}function mr$2(n){return se$2({type:"root"},n)}function Er$3(n){return se$2(-1,n)}function Cr$3(n,r){return _t$2(n[0],{...r,expandedStates:n})}function ze$2(n){return{type:N$2,parts:n}}function hr$2(n,r="",a={}){return{type:x$2,breakContents:n,flatContents:r,groupId:a.groupId}}function gr$3(n,r){return{type:R$2,contents:n,groupId:r.groupId,negate:r.negate}}function ke$2(n){return{type:Y$2,contents:n}}var yr$2={type:j$2},Fe$2={type:w$2},Ar$2={type:I},we$2={type:B$1,hard:!0},bt$2={type:B$1,hard:!0,literal:!0},Ke={type:B$1},Br$1={type:B$1,soft:!0},q$3=[we$2,Fe$2],He$1=[bt$2,Fe$2],Oe$3={type:z$2};function Ne$2(n,r){let a=[];for(let s=0;s<r.length;s++)s!==0&&a.push(n),a.push(r[s]);return a}function qe$2(n,r,a){let s=n;if(r>0){for(let o=0;o<Math.floor(r/a);++o)s=De$2(s);s=se$2(r%a,s),s=se$2(Number.NEGATIVE_INFINITY,s)}return s}function _r$2(n,r){return n?{type:T$2,label:n,contents:r}:r}function Q$2(n){var r;if(!n)return"";if(Array.isArray(n)){let a=[];for(let s of n)if(Array.isArray(s))a.push(...Q$2(s));else{let o=Q$2(s);o!==""&&a.push(o)}return a}return n.type===x$2?{...n,breakContents:Q$2(n.breakContents),flatContents:Q$2(n.flatContents)}:n.type===b$1?{...n,contents:Q$2(n.contents),expandedStates:(r=n.expandedStates)==null?void 0:r.map(Q$2)}:n.type===N$2?{type:"fill",parts:n.parts.map(Q$2)}:n.contents?{...n,contents:Q$2(n.contents)}:n}function br$3(n){let r=Object.create(null),a=new Set;return s(Q$2(n));function s(u,c,p){var d,_;if(typeof u=="string")return JSON.stringify(u);if(Array.isArray(u)){let ja=u.map(s).filter(Boolean);return ja.length===1?ja[0]:`[${ja.join(", ")}]`}if(u.type===B$1){let ja=((d=p==null?void 0:p[c+1])==null?void 0:d.type)===w$2;return u.literal?ja?"literalline":"literallineWithoutBreakParent":u.hard?ja?"hardline":"hardlineWithoutBreakParent":u.soft?"softline":"line"}if(u.type===w$2)return((_=p==null?void 0:p[c-1])==null?void 0:_.type)===B$1&&p[c-1].hard?void 0:"breakParent";if(u.type===I)return"trim";if(u.type===P$2)return"indent("+s(u.contents)+")";if(u.type===L$2)return u.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+s(u.contents)+")":u.n<0?"dedent("+s(u.contents)+")":u.n.type==="root"?"markAsRoot("+s(u.contents)+")":"align("+JSON.stringify(u.n)+", "+s(u.contents)+")";if(u.type===x$2)return"ifBreak("+s(u.breakContents)+(u.flatContents?", "+s(u.flatContents):"")+(u.groupId?(u.flatContents?"":', ""')+`, { groupId: ${o(u.groupId)} }`:"")+")";if(u.type===R$2){let ja=[];u.negate&&ja.push("negate: true"),u.groupId&&ja.push(`groupId: ${o(u.groupId)}`);let Ja=ja.length>0?`, { ${ja.join(", ")} }`:"";return`indentIfBreak(${s(u.contents)}${Ja})`}if(u.type===b$1){let ja=[];u.break&&u.break!=="propagated"&&ja.push("shouldBreak: true"),u.id&&ja.push(`id: ${o(u.id)}`);let Ja=ja.length>0?`, { ${ja.join(", ")} }`:"";return u.expandedStates?`conditionalGroup([${u.expandedStates.map(ec=>s(ec)).join(",")}]${Ja})`:`group(${s(u.contents)}${Ja})`}if(u.type===N$2)return`fill([${u.parts.map(ja=>s(ja)).join(", ")}])`;if(u.type===Y$2)return"lineSuffix("+s(u.contents)+")";if(u.type===j$2)return"lineSuffixBoundary";if(u.type===T$2)return`label(${JSON.stringify(u.label)}, ${s(u.contents)})`;throw new Error("Unknown doc type "+u.type)}function o(u){if(typeof u!="symbol")return JSON.stringify(String(u));if(u in r)return r[u];let c=u.description||"symbol";for(let p=0;;p++){let d=c+(p>0?` #${p}`:"");if(!a.has(d))return a.add(d),r[u]=`Symbol.for(${JSON.stringify(d)})`}}}var Pu$1=(n,r,a)=>{if(!(n&&r==null))return Array.isArray(r)||typeof r=="string"?r[a<0?r.length+a:a]:r.at(a)},y=Pu$1,xr$2=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function kr$3(n){return n===12288||n>=65281&&n<=65376||n>=65504&&n<=65510}function wr$3(n){return n>=4352&&n<=4447||n===8986||n===8987||n===9001||n===9002||n>=9193&&n<=9196||n===9200||n===9203||n===9725||n===9726||n===9748||n===9749||n>=9800&&n<=9811||n===9855||n===9875||n===9889||n===9898||n===9899||n===9917||n===9918||n===9924||n===9925||n===9934||n===9940||n===9962||n===9970||n===9971||n===9973||n===9978||n===9981||n===9989||n===9994||n===9995||n===10024||n===10060||n===10062||n>=10067&&n<=10069||n===10071||n>=10133&&n<=10135||n===10160||n===10175||n===11035||n===11036||n===11088||n===11093||n>=11904&&n<=11929||n>=11931&&n<=12019||n>=12032&&n<=12245||n>=12272&&n<=12287||n>=12289&&n<=12350||n>=12353&&n<=12438||n>=12441&&n<=12543||n>=12549&&n<=12591||n>=12593&&n<=12686||n>=12688&&n<=12771||n>=12783&&n<=12830||n>=12832&&n<=12871||n>=12880&&n<=19903||n>=19968&&n<=42124||n>=42128&&n<=42182||n>=43360&&n<=43388||n>=44032&&n<=55203||n>=63744&&n<=64255||n>=65040&&n<=65049||n>=65072&&n<=65106||n>=65108&&n<=65126||n>=65128&&n<=65131||n>=94176&&n<=94180||n===94192||n===94193||n>=94208&&n<=100343||n>=100352&&n<=101589||n>=101632&&n<=101640||n>=110576&&n<=110579||n>=110581&&n<=110587||n===110589||n===110590||n>=110592&&n<=110882||n===110898||n>=110928&&n<=110930||n===110933||n>=110948&&n<=110951||n>=110960&&n<=111355||n===126980||n===127183||n===127374||n>=127377&&n<=127386||n>=127488&&n<=127490||n>=127504&&n<=127547||n>=127552&&n<=127560||n===127568||n===127569||n>=127584&&n<=127589||n>=127744&&n<=127776||n>=127789&&n<=127797||n>=127799&&n<=127868||n>=127870&&n<=127891||n>=127904&&n<=127946||n>=127951&&n<=127955||n>=127968&&n<=127984||n===127988||n>=127992&&n<=128062||n===128064||n>=128066&&n<=128252||n>=128255&&n<=128317||n>=128331&&n<=128334||n>=128336&&n<=128359||n===128378||n===128405||n===128406||n===128420||n>=128507&&n<=128591||n>=128640&&n<=128709||n===128716||n>=128720&&n<=128722||n>=128725&&n<=128727||n>=128732&&n<=128735||n===128747||n===128748||n>=128756&&n<=128764||n>=128992&&n<=129003||n===129008||n>=129292&&n<=129338||n>=129340&&n<=129349||n>=129351&&n<=129535||n>=129648&&n<=129660||n>=129664&&n<=129672||n>=129680&&n<=129725||n>=129727&&n<=129733||n>=129742&&n<=129755||n>=129760&&n<=129768||n>=129776&&n<=129784||n>=131072&&n<=196605||n>=196608&&n<=262141}var Or$2=n=>!(kr$3(n)||wr$3(n)),Lu$1=/[^\x20-\x7F]/;function Iu$1(n){if(!n)return 0;if(!Lu$1.test(n))return n.length;n=n.replace(xr$2(),"  ");let r=0;for(let a of n){let s=a.codePointAt(0);s<=31||s>=127&&s<=159||s>=768&&s<=879||(r+=Or$2(s)?1:2)}return r}var Te$2=Iu$1;function ve$2(n,r){if(typeof n=="string")return r(n);let a=new Map;return s(n);function s(u){if(a.has(u))return a.get(u);let c=o(u);return a.set(u,c),c}function o(u){switch(K$2(u)){case V$1:return r(u.map(s));case N$2:return r({...u,parts:u.parts.map(s)});case x$2:return r({...u,breakContents:s(u.breakContents),flatContents:s(u.flatContents)});case b$1:{let{expandedStates:c,contents:p}=u;return c?(c=c.map(s),p=c[0]):p=s(p),r({...u,contents:p,expandedStates:c})}case L$2:case P$2:case R$2:case T$2:case Y$2:return r({...u,contents:s(u.contents)});case G$1:case z$2:case I:case j$2:case B$1:case w$2:return r(u);default:throw new Z$1(u)}}}function Je$2(n,r,a){let s=a,o=!1;function u(c){if(o)return!1;let p=r(c);p!==void 0&&(o=!0,s=p)}return xe$2(n,u),s}function Ru$1(n){if(n.type===b$1&&n.break||n.type===B$1&&n.hard||n.type===w$2)return!0}function Sr$3(n){return Je$2(n,Ru$1,!1)}function Nr$3(n){if(n.length>0){let r=y(!1,n,-1);!r.expandedStates&&!r.break&&(r.break="propagated")}return null}function vr$3(n){let r=new Set,a=[];function s(u){if(u.type===w$2&&Nr$3(a),u.type===b$1){if(a.push(u),r.has(u))return!1;r.add(u)}}function o(u){u.type===b$1&&a.pop().break&&Nr$3(a)}xe$2(n,s,o,!0)}function Yu$1(n){return n.type===B$1&&!n.hard?n.soft?"":" ":n.type===x$2?n.flatContents:n}function Pr$2(n){return ve$2(n,Yu$1)}function Tr$3(n){for(n=[...n];n.length>=2&&y(!1,n,-2).type===B$1&&y(!1,n,-1).type===w$2;)n.length-=2;if(n.length>0){let r=Se$2(y(!1,n,-1));n[n.length-1]=r}return n}function Se$2(n){switch(K$2(n)){case P$2:case R$2:case b$1:case Y$2:case T$2:{let r=Se$2(n.contents);return{...n,contents:r}}case x$2:return{...n,breakContents:Se$2(n.breakContents),flatContents:Se$2(n.flatContents)};case N$2:return{...n,parts:Tr$3(n.parts)};case V$1:return Tr$3(n);case G$1:return n.replace(/[\n\r]*$/,"");case L$2:case z$2:case I:case j$2:case B$1:case w$2:break;default:throw new Z$1(n)}return n}function Xe$2(n){return Se$2(Mu$1(n))}function ju$1(n){switch(K$2(n)){case N$2:if(n.parts.every(r=>r===""))return"";break;case b$1:if(!n.contents&&!n.id&&!n.break&&!n.expandedStates)return"";if(n.contents.type===b$1&&n.contents.id===n.id&&n.contents.break===n.break&&n.contents.expandedStates===n.expandedStates)return n.contents;break;case L$2:case P$2:case R$2:case Y$2:if(!n.contents)return"";break;case x$2:if(!n.flatContents&&!n.breakContents)return"";break;case V$1:{let r=[];for(let a of n){if(!a)continue;let[s,...o]=Array.isArray(a)?a:[a];typeof s=="string"&&typeof y(!1,r,-1)=="string"?r[r.length-1]+=s:r.push(s),r.push(...o)}return r.length===0?"":r.length===1?r[0]:r}case G$1:case z$2:case I:case j$2:case B$1:case T$2:case w$2:break;default:throw new Z$1(n)}return n}function Mu$1(n){return ve$2(n,r=>ju$1(r))}function Lr$2(n,r=He$1){return ve$2(n,a=>typeof a=="string"?Ne$2(r,a.split(`
`)):a)}function Vu$1(n){if(n.type===B$1)return!0}function Ir$3(n){return Je$2(n,Vu$1,!1)}function Ze$2(n,r){return n.type===T$2?{...n,contents:r(n.contents)}:r(n)}var M$2=Symbol("MODE_BREAK"),J$1=Symbol("MODE_FLAT"),Pe$2=Symbol("cursor");function Rr$2(){return{value:"",length:0,queue:[]}}function $u$1(n,r){return xt$2(n,{type:"indent"},r)}function Wu$1(n,r,a){return r===Number.NEGATIVE_INFINITY?n.root||Rr$2():r<0?xt$2(n,{type:"dedent"},a):r?r.type==="root"?{...n,root:n}:xt$2(n,{type:typeof r=="string"?"stringAlign":"numberAlign",n:r},a):n}function xt$2(n,r,a){let s=r.type==="dedent"?n.queue.slice(0,-1):[...n.queue,r],o="",u=0,c=0,p=0;for(let rc of s)switch(rc.type){case"indent":ja(),a.useTabs?d(1):_(a.tabWidth);break;case"stringAlign":ja(),o+=rc.n,u+=rc.n.length;break;case"numberAlign":c+=1,p+=rc.n;break;default:throw new Error(`Unexpected type '${rc.type}'`)}return ec(),{...n,value:o,length:u,queue:s};function d(rc){o+="	".repeat(rc),u+=a.tabWidth*rc}function _(rc){o+=" ".repeat(rc),u+=rc}function ja(){a.useTabs?Ja():ec()}function Ja(){c>0&&d(c),tc()}function ec(){p>0&&_(p),tc()}function tc(){c=0,p=0}}function kt$2(n){let r=0,a=0,s=n.length;e:for(;s--;){let o=n[s];if(o===Pe$2){a++;continue}for(let u=o.length-1;u>=0;u--){let c=o[u];if(c===" "||c==="	")r++;else{n[s]=o.slice(0,u+1);break e}}}if(r>0||a>0)for(n.length=s+1;a-- >0;)n.push(Pe$2);return r}function Qe$2(n,r,a,s,o,u){if(a===Number.POSITIVE_INFINITY)return!0;let c=r.length,p=[n],d=[];for(;a>=0;){if(p.length===0){if(c===0)return!0;p.push(r[--c]);continue}let{mode:_,doc:ja}=p.pop(),Ja=K$2(ja);switch(Ja){case G$1:d.push(ja),a-=Te$2(ja);break;case V$1:case N$2:{let ec=Ja===V$1?ja:ja.parts;for(let tc=ec.length-1;tc>=0;tc--)p.push({mode:_,doc:ec[tc]});break}case P$2:case L$2:case R$2:case T$2:p.push({mode:_,doc:ja.contents});break;case I:a+=kt$2(d);break;case b$1:{if(u&&ja.break)return!1;let ec=ja.break?M$2:_,tc=ja.expandedStates&&ec===M$2?y(!1,ja.expandedStates,-1):ja.contents;p.push({mode:ec,doc:tc});break}case x$2:{let ec=(ja.groupId?o[ja.groupId]||J$1:_)===M$2?ja.breakContents:ja.flatContents;ec&&p.push({mode:_,doc:ec});break}case B$1:if(_===M$2||ja.hard)return!0;ja.soft||(d.push(" "),a--);break;case Y$2:s=!0;break;case j$2:if(s)return!1;break}}return!1}function pe$2(n,r){let a={},s=r.printWidth,o=be$3(r.endOfLine),u=0,c=[{ind:Rr$2(),mode:M$2,doc:n}],p=[],d=!1,_=[],ja=0;for(vr$3(n);c.length>0;){let{ind:ec,mode:tc,doc:rc}=c.pop();switch(K$2(rc)){case G$1:{let nc=o!==`
`?re$2(!1,rc,`
`,o):rc;p.push(nc),c.length>0&&(u+=Te$2(nc));break}case V$1:for(let nc=rc.length-1;nc>=0;nc--)c.push({ind:ec,mode:tc,doc:rc[nc]});break;case z$2:if(ja>=2)throw new Error("There are too many 'cursor' in doc.");p.push(Pe$2),ja++;break;case P$2:c.push({ind:$u$1(ec,r),mode:tc,doc:rc.contents});break;case L$2:c.push({ind:Wu$1(ec,rc.n,r),mode:tc,doc:rc.contents});break;case I:u-=kt$2(p);break;case b$1:switch(tc){case J$1:if(!d){c.push({ind:ec,mode:rc.break?M$2:J$1,doc:rc.contents});break}case M$2:{d=!1;let nc={ind:ec,mode:J$1,doc:rc.contents},ic=s-u,uc=_.length>0;if(!rc.break&&Qe$2(nc,c,ic,uc,a))c.push(nc);else if(rc.expandedStates){let eh=y(!1,rc.expandedStates,-1);if(rc.break){c.push({ind:ec,mode:M$2,doc:eh});break}else for(let rh=1;rh<rc.expandedStates.length+1;rh++)if(rh>=rc.expandedStates.length){c.push({ind:ec,mode:M$2,doc:eh});break}else{let ah=rc.expandedStates[rh],ih={ind:ec,mode:J$1,doc:ah};if(Qe$2(ih,c,ic,uc,a)){c.push(ih);break}}}else c.push({ind:ec,mode:M$2,doc:rc.contents});break}}rc.id&&(a[rc.id]=y(!1,c,-1).mode);break;case N$2:{let nc=s-u,{parts:ic}=rc;if(ic.length===0)break;let[uc,eh]=ic,rh={ind:ec,mode:J$1,doc:uc},ah={ind:ec,mode:M$2,doc:uc},ih=Qe$2(rh,[],nc,_.length>0,a,!0);if(ic.length===1){ih?c.push(rh):c.push(ah);break}let oh={ind:ec,mode:J$1,doc:eh},uh={ind:ec,mode:M$2,doc:eh};if(ic.length===2){ih?c.push(oh,rh):c.push(uh,ah);break}ic.splice(0,2);let ch={ind:ec,mode:tc,doc:ze$2(ic)},hh=ic[0];Qe$2({ind:ec,mode:J$1,doc:[uc,eh,hh]},[],nc,_.length>0,a,!0)?c.push(ch,oh,rh):ih?c.push(ch,uh,rh):c.push(ch,uh,ah);break}case x$2:case R$2:{let nc=rc.groupId?a[rc.groupId]:tc;if(nc===M$2){let ic=rc.type===x$2?rc.breakContents:rc.negate?rc.contents:De$2(rc.contents);ic&&c.push({ind:ec,mode:tc,doc:ic})}if(nc===J$1){let ic=rc.type===x$2?rc.flatContents:rc.negate?De$2(rc.contents):rc.contents;ic&&c.push({ind:ec,mode:tc,doc:ic})}break}case Y$2:_.push({ind:ec,mode:tc,doc:rc.contents});break;case j$2:_.length>0&&c.push({ind:ec,mode:tc,doc:we$2});break;case B$1:switch(tc){case J$1:if(rc.hard)d=!0;else{rc.soft||(p.push(" "),u+=1);break}case M$2:if(_.length>0){c.push({ind:ec,mode:tc,doc:rc},..._.reverse()),_.length=0;break}rc.literal?ec.root?(p.push(o,ec.root.value),u=ec.root.length):(p.push(o),u=0):(u-=kt$2(p),p.push(o+ec.value),u=ec.length);break}break;case T$2:c.push({ind:ec,mode:tc,doc:rc.contents});break;case w$2:break;default:throw new Z$1(rc)}c.length===0&&_.length>0&&(c.push(..._.reverse()),_.length=0)}let Ja=p.indexOf(Pe$2);if(Ja!==-1){let ec=p.indexOf(Pe$2,Ja+1),tc=p.slice(0,Ja).join(""),rc=p.slice(Ja+1,ec).join(""),nc=p.slice(ec+1).join("");return{formatted:tc+rc+nc,cursorNodeStart:tc.length,cursorNodeText:rc}}return{formatted:p.join("")}}function Uu$1(n,r,a=0){let s=0;for(let o=a;o<n.length;++o)n[o]==="	"?s=s+r-s%r:s++;return s}var de$2=Uu$1,ee,Ot$2,et$2,wt$2=class{constructor(r){sr$2(this,ee),this.stack=[r]}get key(){let{stack:r,siblings:a}=this;return y(!1,r,a===null?-2:-4)??null}get index(){return this.siblings===null?null:y(!1,this.stack,-2)}get node(){return y(!1,this.stack,-1)}get parent(){return this.getNode(1)}get grandparent(){return this.getNode(2)}get isInArray(){return this.siblings!==null}get siblings(){let{stack:r}=this,a=y(!1,r,-3);return Array.isArray(a)?a:null}get next(){let{siblings:r}=this;return r===null?null:r[this.index+1]}get previous(){let{siblings:r}=this;return r===null?null:r[this.index-1]}get isFirst(){return this.index===0}get isLast(){let{siblings:r,index:a}=this;return r!==null&&a===r.length-1}get isRoot(){return this.stack.length===1}get root(){return this.stack[0]}get ancestors(){return[...fe$2(this,ee,et$2).call(this)]}getName(){let{stack:r}=this,{length:a}=r;return a>1?y(!1,r,-2):null}getValue(){return y(!1,this.stack,-1)}getNode(r=0){let a=fe$2(this,ee,Ot$2).call(this,r);return a===-1?null:this.stack[a]}getParentNode(r=0){return this.getNode(r+1)}call(r,...a){let{stack:s}=this,{length:o}=s,u=y(!1,s,-1);for(let c of a)u=u[c],s.push(c,u);try{return r(this)}finally{s.length=o}}callParent(r,a=0){let s=fe$2(this,ee,Ot$2).call(this,a+1),o=this.stack.splice(s+1);try{return r(this)}finally{this.stack.push(...o)}}each(r,...a){let{stack:s}=this,{length:o}=s,u=y(!1,s,-1);for(let c of a)u=u[c],s.push(c,u);try{for(let c=0;c<u.length;++c)s.push(c,u[c]),r(this,c,u),s.length-=2}finally{s.length=o}}map(r,...a){let s=[];return this.each((o,u,c)=>{s[u]=r(o,u,c)},...a),s}match(...r){let a=this.stack.length-1,s=null,o=this.stack[a--];for(let u of r){if(o===void 0)return!1;let c=null;if(typeof s=="number"&&(c=s,s=this.stack[a--],o=this.stack[a--]),u&&!u(o,s,c))return!1;s=this.stack[a--],o=this.stack[a--]}return!0}findAncestor(r){for(let a of fe$2(this,ee,et$2).call(this))if(r(a))return a}hasAncestor(r){for(let a of fe$2(this,ee,et$2).call(this))if(r(a))return!0;return!1}};ee=new WeakSet,Ot$2=function(n){let{stack:r}=this;for(let a=r.length-1;a>=0;a-=2)if(!Array.isArray(r[a])&&--n<0)return a;return-1},et$2=function*(){let{stack:n}=this;for(let r=n.length-3;r>=0;r-=2){let a=n[r];Array.isArray(a)||(yield a)}};var Yr$2=wt$2,jr$2=new Proxy(()=>{},{get:()=>jr$2}),Le$2=jr$2;function Gu$1(n){return n!==null&&typeof n=="object"}var Mr$3=Gu$1;function*Nt$3(n,r){let{getVisitorKeys:a,filter:s=()=>!0}=r,o=u=>Mr$3(u)&&s(u);for(let u of a(n)){let c=n[u];if(Array.isArray(c))for(let p of c)o(p)&&(yield p);else o(c)&&(yield c)}}function*Vr$2(n,r){let a=[n];for(let s=0;s<a.length;s++){let o=a[s];for(let u of Nt$3(o,r))yield u,a.push(u)}}function me$2(n){return(r,a,s)=>{let o=!!(s!=null&&s.backwards);if(a===!1)return!1;let{length:u}=r,c=a;for(;c>=0&&c<u;){let p=r.charAt(c);if(n instanceof RegExp){if(!n.test(p))return c}else if(!n.includes(p))return c;o?c--:c++}return c===-1||c===u?c:!1}}var $r$1=me$2(/\s/),S$1=me$2(" 	"),tt$2=me$2(",; 	"),rt$2=me$2(/[^\n\r]/);function zu$1(n,r,a){let s=!!(a!=null&&a.backwards);if(r===!1)return!1;let o=n.charAt(r);if(s){if(n.charAt(r-1)==="\r"&&o===`
`)return r-2;if(o===`
`||o==="\r"||o==="\u2028"||o==="\u2029")return r-1}else{if(o==="\r"&&n.charAt(r+1)===`
`)return r+2;if(o===`
`||o==="\r"||o==="\u2028"||o==="\u2029")return r+1}return r}var $$2=zu$1;function Ku$1(n,r,a={}){let s=S$1(n,a.backwards?r-1:r,a),o=$$2(n,s,a);return s!==o}var U$2=Ku$1;function Hu$1(n){return Array.isArray(n)&&n.length>0}var Tt$2=Hu$1,Wr$3=new Set(["tokens","comments","parent","enclosingNode","precedingNode","followingNode"]),qu$1=n=>Object.keys(n).filter(r=>!Wr$3.has(r));function Ju$1(n){return n?r=>n(r,Wr$3):qu$1}var X$2=Ju$1;function Xu$1(n){let r=n.type||n.kind||"(unknown type)",a=String(n.name||n.id&&(typeof n.id=="object"?n.id.name:n.id)||n.key&&(typeof n.key=="object"?n.key.name:n.key)||n.value&&(typeof n.value=="object"?"":String(n.value))||n.operator||"");return a.length>20&&(a=a.slice(0,19)+"…"),r+(a?" "+a:"")}function St$2(n,r){(n.comments??(n.comments=[])).push(r),r.printed=!1,r.nodeDescription=Xu$1(n)}function ne$3(n,r){r.leading=!0,r.trailing=!1,St$2(n,r)}function te$2(n,r,a){r.leading=!1,r.trailing=!1,a&&(r.marker=a),St$2(n,r)}function ue$2(n,r){r.leading=!1,r.trailing=!0,St$2(n,r)}var vt$3=new WeakMap;function nt$2(n,r){if(vt$3.has(n))return vt$3.get(n);let{printer:{getCommentChildNodes:a,canAttachComment:s,getVisitorKeys:o},locStart:u,locEnd:c}=r;if(!s)return[];let p=((a==null?void 0:a(n,r))??[...Nt$3(n,{getVisitorKeys:X$2(o)})]).flatMap(d=>s(d)?[d]:nt$2(d,r));return p.sort((d,_)=>u(d)-u(_)||c(d)-c(_)),vt$3.set(n,p),p}function Gr$2(n,r,a,s){let{locStart:o,locEnd:u}=a,c=o(r),p=u(r),d=nt$2(n,a),_,ja,Ja=0,ec=d.length;for(;Ja<ec;){let tc=Ja+ec>>1,rc=d[tc],nc=o(rc),ic=u(rc);if(nc<=c&&p<=ic)return Gr$2(rc,r,a,rc);if(ic<=c){_=rc,Ja=tc+1;continue}if(p<=nc){ja=rc,ec=tc;continue}throw new Error("Comment location overlaps with node location")}if((s==null?void 0:s.type)==="TemplateLiteral"){let{quasis:tc}=s,rc=Lt$3(tc,r,a);_&&Lt$3(tc,_,a)!==rc&&(_=null),ja&&Lt$3(tc,ja,a)!==rc&&(ja=null)}return{enclosingNode:s,precedingNode:_,followingNode:ja}}var Pt$2=()=>!1;function zr$1(n,r){let{comments:a}=n;if(delete n.comments,!Tt$2(a)||!r.printer.canAttachComment)return;let s=[],{locStart:o,locEnd:u,printer:{experimentalFeatures:{avoidAstMutation:c=!1}={},handleComments:p={}},originalText:d}=r,{ownLine:_=Pt$2,endOfLine:ja=Pt$2,remaining:Ja=Pt$2}=p,ec=a.map((tc,rc)=>({...Gr$2(n,tc,r),comment:tc,text:d,options:r,ast:n,isLastComment:a.length-1===rc}));for(let[tc,rc]of ec.entries()){let{comment:nc,precedingNode:ic,enclosingNode:uc,followingNode:eh,text:rh,options:ah,ast:ih,isLastComment:oh}=rc;if(ah.parser==="json"||ah.parser==="json5"||ah.parser==="jsonc"||ah.parser==="__js_expression"||ah.parser==="__ts_expression"||ah.parser==="__vue_expression"||ah.parser==="__vue_ts_expression"){if(o(nc)-o(ih)<=0){ne$3(ih,nc);continue}if(u(nc)-u(ih)>=0){ue$2(ih,nc);continue}}let uh;if(c?uh=[rc]:(nc.enclosingNode=uc,nc.precedingNode=ic,nc.followingNode=eh,uh=[nc,rh,ah,ih,oh]),Zu$1(rh,ah,ec,tc))nc.placement="ownLine",_(...uh)||(eh?ne$3(eh,nc):ic?ue$2(ic,nc):te$2(uc||ih,nc));else if(Qu$1(rh,ah,ec,tc))nc.placement="endOfLine",ja(...uh)||(ic?ue$2(ic,nc):eh?ne$3(eh,nc):te$2(uc||ih,nc));else if(nc.placement="remaining",!Ja(...uh))if(ic&&eh){let ch=s.length;ch>0&&s[ch-1].followingNode!==eh&&Ur$2(s,ah),s.push(rc)}else ic?ue$2(ic,nc):eh?ne$3(eh,nc):te$2(uc||ih,nc)}if(Ur$2(s,r),!c)for(let tc of a)delete tc.precedingNode,delete tc.enclosingNode,delete tc.followingNode}var Kr$3=n=>!/[\S\n\u2028\u2029]/.test(n);function Zu$1(n,r,a,s){let{comment:o,precedingNode:u}=a[s],{locStart:c,locEnd:p}=r,d=c(o);if(u)for(let _=s-1;_>=0;_--){let{comment:ja,precedingNode:Ja}=a[_];if(Ja!==u||!Kr$3(n.slice(p(ja),d)))break;d=c(ja)}return U$2(n,d,{backwards:!0})}function Qu$1(n,r,a,s){let{comment:o,followingNode:u}=a[s],{locStart:c,locEnd:p}=r,d=p(o);if(u)for(let _=s+1;_<a.length;_++){let{comment:ja,followingNode:Ja}=a[_];if(Ja!==u||!Kr$3(n.slice(d,c(ja))))break;d=p(ja)}return U$2(n,d)}function Ur$2(n,r){var a,s;let o=n.length;if(o===0)return;let{precedingNode:u,followingNode:c}=n[0],p=r.locStart(c),d;for(d=o;d>0;--d){let{comment:_,precedingNode:ja,followingNode:Ja}=n[d-1];Le$2.strictEqual(ja,u),Le$2.strictEqual(Ja,c);let ec=r.originalText.slice(r.locEnd(_),p);if(((s=(a=r.printer).isGap)==null?void 0:s.call(a,ec,r))??/^[\s(]*$/.test(ec))p=r.locStart(_);else break}for(let[_,{comment:ja}]of n.entries())_<d?ue$2(u,ja):ne$3(c,ja);for(let _ of[u,c])_.comments&&_.comments.length>1&&_.comments.sort((ja,Ja)=>r.locStart(ja)-r.locStart(Ja));n.length=0}function Lt$3(n,r,a){let s=a.locStart(r)-1;for(let o=1;o<n.length;++o)if(s<a.locStart(n[o]))return o-1;return 0}function eo$1(n,r){let a=r-1;a=S$1(n,a,{backwards:!0}),a=$$2(n,a,{backwards:!0}),a=S$1(n,a,{backwards:!0});let s=$$2(n,a,{backwards:!0});return a!==s}var Ie$2=eo$1;function Hr$3(n,r){let a=n.node;return a.printed=!0,r.printer.printComment(n,r)}function to$1(n,r){var a;let s=n.node,o=[Hr$3(n,r)],{printer:u,originalText:c,locStart:p,locEnd:d}=r;if((a=u.isBlockComment)!=null&&a.call(u,s)){let ja=U$2(c,d(s))?U$2(c,p(s),{backwards:!0})?q$3:Ke:" ";o.push(ja)}else o.push(q$3);let _=$$2(c,S$1(c,d(s)));return _!==!1&&U$2(c,_)&&o.push(q$3),o}function ro$1(n,r,a){var s;let o=n.node,u=Hr$3(n,r),{printer:c,originalText:p,locStart:d}=r,_=(s=c.isBlockComment)==null?void 0:s.call(c,o);if(a!=null&&a.hasLineSuffix&&!(a!=null&&a.isBlock)||U$2(p,d(o),{backwards:!0})){let ja=Ie$2(p,d(o));return{doc:ke$2([q$3,ja?q$3:"",u]),isBlock:_,hasLineSuffix:!0}}return!_||a!=null&&a.hasLineSuffix?{doc:[ke$2([" ",u]),Fe$2],isBlock:_,hasLineSuffix:!0}:{doc:[" ",u],isBlock:_,hasLineSuffix:!1}}function no$1(n,r){let a=n.node;if(!a)return{};let s=r[Symbol.for("printedComments")];if((a.comments||[]).filter(p=>!s.has(p)).length===0)return{leading:"",trailing:""};let o=[],u=[],c;return n.each(()=>{let p=n.node;if(s!=null&&s.has(p))return;let{leading:d,trailing:_}=p;d?o.push(to$1(n,r)):_&&(c=ro$1(n,r,c),u.push(c.doc))},"comments"),{leading:o,trailing:u}}function qr$2(n,r,a){let{leading:s,trailing:o}=no$1(n,a);return!s&&!o?r:Ze$2(r,u=>[s,u,o])}function Jr$3(n){let{[Symbol.for("comments")]:r,[Symbol.for("printedComments")]:a}=n;for(let s of r){if(!s.printed&&!a.has(s))throw new Error('Comment "'+s.value.trim()+'" was not printed. Please report this error!');delete s.printed}}var Re$3=class extends Error{constructor(){super(...arguments);Zp(this,"name","ConfigError")}},Ye$2=class extends Error{constructor(){super(...arguments);Zp(this,"name","UndefinedParserError")}},Zr$3={cursorOffset:{category:"Special",type:"int",default:-1,range:{start:-1,end:1/0,step:1},description:"Print (to stderr) where a cursor at the given position would move to after formatting.",cliCategory:"Editor"},endOfLine:{category:"Global",type:"choice",default:"lf",description:"Which end of line characters to apply.",choices:[{value:"lf",description:"Line Feed only (\\n), common on Linux and macOS as well as inside git repos"},{value:"crlf",description:"Carriage Return + Line Feed characters (\\r\\n), common on Windows"},{value:"cr",description:"Carriage Return character only (\\r), used very rarely"},{value:"auto",description:`Maintain existing
(mixed values within one file are normalised by looking at what's used after the first line)`}]},filepath:{category:"Special",type:"path",description:"Specify the input filepath. This will be used to do parser inference.",cliName:"stdin-filepath",cliCategory:"Other",cliDescription:"Path to the file to pretend that stdin comes from."},insertPragma:{category:"Special",type:"boolean",default:!1,description:"Insert @format pragma into file's first docblock comment.",cliCategory:"Other"},parser:{category:"Global",type:"choice",default:void 0,description:"Which parser to use.",exception:n=>typeof n=="string"||typeof n=="function",choices:[{value:"flow",description:"Flow"},{value:"babel",description:"JavaScript"},{value:"babel-flow",description:"Flow"},{value:"babel-ts",description:"TypeScript"},{value:"typescript",description:"TypeScript"},{value:"acorn",description:"JavaScript"},{value:"espree",description:"JavaScript"},{value:"meriyah",description:"JavaScript"},{value:"css",description:"CSS"},{value:"less",description:"Less"},{value:"scss",description:"SCSS"},{value:"json",description:"JSON"},{value:"json5",description:"JSON5"},{value:"jsonc",description:"JSON with Comments"},{value:"json-stringify",description:"JSON.stringify"},{value:"graphql",description:"GraphQL"},{value:"markdown",description:"Markdown"},{value:"mdx",description:"MDX"},{value:"vue",description:"Vue"},{value:"yaml",description:"YAML"},{value:"glimmer",description:"Ember / Handlebars"},{value:"html",description:"HTML"},{value:"angular",description:"Angular"},{value:"lwc",description:"Lightning Web Components"}]},plugins:{type:"path",array:!0,default:[{value:[]}],category:"Global",description:"Add a plugin. Multiple plugins can be passed as separate `--plugin`s.",exception:n=>typeof n=="string"||typeof n=="object",cliName:"plugin",cliCategory:"Config"},printWidth:{category:"Global",type:"int",default:80,description:"The line length where Prettier will try wrap.",range:{start:0,end:1/0,step:1}},rangeEnd:{category:"Special",type:"int",default:1/0,range:{start:0,end:1/0,step:1},description:`Format code ending at a given character offset (exclusive).
The range will extend forwards to the end of the selected statement.`,cliCategory:"Editor"},rangeStart:{category:"Special",type:"int",default:0,range:{start:0,end:1/0,step:1},description:`Format code starting at a given character offset.
The range will extend backwards to the start of the first line containing the selected statement.`,cliCategory:"Editor"},requirePragma:{category:"Special",type:"boolean",default:!1,description:`Require either '@prettier' or '@format' to be present in the file's first docblock comment
in order for it to be formatted.`,cliCategory:"Other"},tabWidth:{type:"int",category:"Global",default:2,description:"Number of spaces per indentation level.",range:{start:0,end:1/0,step:1}},useTabs:{category:"Global",type:"boolean",default:!1,description:"Indent with tabs instead of spaces."},embeddedLanguageFormatting:{category:"Global",type:"choice",default:"auto",description:"Control how Prettier formats quoted code embedded in the file.",choices:[{value:"auto",description:"Format embedded code if Prettier can automatically identify it."},{value:"off",description:"Never automatically format embedded code."}]}};function ut$2({plugins:n=[],showDeprecated:r=!1}={}){let a=n.flatMap(o=>o.languages??[]),s=[];for(let o of io$1(Object.assign({},...n.map(({options:u})=>u),Zr$3)))!r&&o.deprecated||(Array.isArray(o.choices)&&(r||(o.choices=o.choices.filter(u=>!u.deprecated)),o.name==="parser"&&(o.choices=[...o.choices,...oo$1(o.choices,a,n)])),o.pluginDefaults=Object.fromEntries(n.filter(u=>{var c;return((c=u.defaultOptions)==null?void 0:c[o.name])!==void 0}).map(u=>[u.name,u.defaultOptions[o.name]])),s.push(o));return{languages:a,options:s}}function*oo$1(n,r,a){let s=new Set(n.map(o=>o.value));for(let o of r)if(o.parsers){for(let u of o.parsers)if(!s.has(u)){s.add(u);let c=a.find(d=>d.parsers&&Object.prototype.hasOwnProperty.call(d.parsers,u)),p=o.name;c!=null&&c.name&&(p+=` (plugin: ${c.name})`),yield{value:u,description:p}}}}function io$1(n){let r=[];for(let[a,s]of Object.entries(n)){let o={name:a,...s};Array.isArray(o.default)&&(o.default=y(!1,o.default,-1).value),r.push(o)}return r}var so$1=n=>String(n).split(/[/\\]/).pop();function Qr$3(n,r){if(!r)return;let a=so$1(r).toLowerCase();return n.find(({filenames:s})=>s==null?void 0:s.some(o=>o.toLowerCase()===a))??n.find(({extensions:s})=>s==null?void 0:s.some(o=>a.endsWith(o)))}function Do$2(n,r){if(r)return n.find(({name:a})=>a.toLowerCase()===r)??n.find(({aliases:a})=>a==null?void 0:a.includes(r))??n.find(({extensions:a})=>a==null?void 0:a.includes(`.${r}`))}function ao$1(n,r){let a=n.plugins.flatMap(o=>o.languages??[]),s=Do$2(a,r.language)??Qr$3(a,r.physicalFile)??Qr$3(a,r.file)??(r.physicalFile,void 0);return s==null?void 0:s.parsers[0]}var en$2=ao$1,oe$1={key:n=>/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(n)?n:JSON.stringify(n),value(n){if(n===null||typeof n!="object")return JSON.stringify(n);if(Array.isArray(n))return`[${n.map(a=>oe$1.value(a)).join(", ")}]`;let r=Object.keys(n);return r.length===0?"{}":`{ ${r.map(a=>`${oe$1.key(a)}: ${oe$1.value(n[a])}`).join(", ")} }`},pair:({key:n,value:r})=>oe$1.value({[n]:r})},It$3=Ae$3(ot$2()),nn$2=(n,r,{descriptor:a})=>{let s=[`${It$3.default.yellow(typeof n=="string"?a.key(n):a.pair(n))} is deprecated`];return r&&s.push(`we now treat it as ${It$3.default.blue(typeof r=="string"?a.key(r):a.pair(r))}`),s.join("; ")+"."},ae$3=Ae$3(ot$2()),it$2=Symbol.for("vnopts.VALUE_NOT_EXIST"),Ee$2=Symbol.for("vnopts.VALUE_UNCHANGED"),un$2=" ".repeat(2),sn$2=(n,r,a)=>{let{text:s,list:o}=a.normalizeExpectedResult(a.schemas[n].expected(a)),u=[];return s&&u.push(on$2(n,r,s,a.descriptor)),o&&u.push([on$2(n,r,o.title,a.descriptor)].concat(o.values.map(c=>Dn$2(c,a.loggerPrintWidth))).join(`
`)),an$2(u,a.loggerPrintWidth)};function on$2(n,r,a,s){return[`Invalid ${ae$3.default.red(s.key(n))} value.`,`Expected ${ae$3.default.blue(a)},`,`but received ${r===it$2?ae$3.default.gray("nothing"):ae$3.default.red(s.value(r))}.`].join(" ")}function Dn$2({text:n,list:r},a){let s=[];return n&&s.push(`- ${ae$3.default.blue(n)}`),r&&s.push([`- ${ae$3.default.blue(r.title)}:`].concat(r.values.map(o=>Dn$2(o,a-un$2.length).replace(/^|\n/g,`$&${un$2}`))).join(`
`)),an$2(s,a)}function an$2(n,r){if(n.length===1)return n[0];let[a,s]=n,[o,u]=n.map(c=>c.split(`
`,1)[0].length);return o>r&&o>u?s:a}var jt$1=Ae$3(ot$2()),Rt$2=[],cn$2=[];function Yt$1(n,r){if(n===r)return 0;let a=n;n.length>r.length&&(n=r,r=a);let s=n.length,o=r.length;for(;s>0&&n.charCodeAt(~-s)===r.charCodeAt(~-o);)s--,o--;let u=0;for(;u<s&&n.charCodeAt(u)===r.charCodeAt(u);)u++;if(s-=u,o-=u,s===0)return o;let c,p,d,_,ja=0,Ja=0;for(;ja<s;)cn$2[ja]=n.charCodeAt(u+ja),Rt$2[ja]=++ja;for(;Ja<o;)for(c=r.charCodeAt(u+Ja),d=Ja++,p=Ja,ja=0;ja<s;ja++)_=c===cn$2[ja]?d:d+1,d=Rt$2[ja],p=Rt$2[ja]=d>p?_>p?p+1:_:_>d?d+1:_;return p}var st$2=(n,r,{descriptor:a,logger:s,schemas:o})=>{let u=[`Ignored unknown option ${jt$1.default.yellow(a.pair({key:n,value:r}))}.`],c=Object.keys(o).sort().find(p=>Yt$1(n,p)<3);c&&u.push(`Did you mean ${jt$1.default.blue(a.key(c))}?`),s.warn(u.join(" "))},co$2=["default","expected","validate","deprecated","forward","redirect","overlap","preprocess","postprocess"];function lo$2(n,r){let a=new n(r),s=Object.create(a);for(let o of co$2)o in r&&(s[o]=fo$2(r[o],a,O$1.prototype[o].length));return s}var O$1=class{static create(r){return lo$2(this,r)}constructor(r){this.name=r.name}default(r){}expected(r){return"nothing"}validate(r,a){return!1}deprecated(r,a){return!1}forward(r,a){}redirect(r,a){}overlap(r,a,s){return r}preprocess(r,a){return r}postprocess(r,a){return Ee$2}};function fo$2(n,r,a){return typeof n=="function"?(...s)=>n(...s.slice(0,a-1),r,...s.slice(a-1)):()=>n}var Dt$3=class extends O$1{constructor(r){super(r),this._sourceName=r.sourceName}expected(r){return r.schemas[this._sourceName].expected(r)}validate(r,a){return a.schemas[this._sourceName].validate(r,a)}redirect(r,a){return this._sourceName}},at$2=class extends O$1{expected(){return"anything"}validate(){return!0}},ct$1=class extends O$1{constructor({valueSchema:r,name:a=r.name,...s}){super({...s,name:a}),this._valueSchema=r}expected(r){let{text:a,list:s}=r.normalizeExpectedResult(this._valueSchema.expected(r));return{text:a&&`an array of ${a}`,list:s&&{title:"an array of the following values",values:[{list:s}]}}}validate(r,a){if(!Array.isArray(r))return!1;let s=[];for(let o of r){let u=a.normalizeValidateResult(this._valueSchema.validate(o,a),o);u!==!0&&s.push(u.value)}return s.length===0?!0:{value:s}}deprecated(r,a){let s=[];for(let o of r){let u=a.normalizeDeprecatedResult(this._valueSchema.deprecated(o,a),o);u!==!1&&s.push(...u.map(({value:c})=>({value:[c]})))}return s}forward(r,a){let s=[];for(let o of r){let u=a.normalizeForwardResult(this._valueSchema.forward(o,a),o);s.push(...u.map(ln$2))}return s}redirect(r,a){let s=[],o=[];for(let u of r){let c=a.normalizeRedirectResult(this._valueSchema.redirect(u,a),u);"remain"in c&&s.push(c.remain),o.push(...c.redirect.map(ln$2))}return s.length===0?{redirect:o}:{redirect:o,remain:s}}overlap(r,a){return r.concat(a)}};function ln$2({from:n,to:r}){return{from:[n],to:r}}var lt$2=class extends O$1{expected(){return"true or false"}validate(r){return typeof r=="boolean"}};function Fn$2(n,r){let a=Object.create(null);for(let s of n){let o=s[r];if(a[o])throw new Error(`Duplicate ${r} ${JSON.stringify(o)}`);a[o]=s}return a}function pn$2(n,r){let a=new Map;for(let s of n){let o=s[r];if(a.has(o))throw new Error(`Duplicate ${r} ${JSON.stringify(o)}`);a.set(o,s)}return a}function dn$2(){let n=Object.create(null);return r=>{let a=JSON.stringify(r);return n[a]?!0:(n[a]=!0,!1)}}function mn$2(n,r){let a=[],s=[];for(let o of n)r(o)?a.push(o):s.push(o);return[a,s]}function En$2(n){return n===Math.floor(n)}function Cn$2(n,r){if(n===r)return 0;let a=typeof n,s=typeof r,o=["undefined","object","boolean","number","string"];return a!==s?o.indexOf(a)-o.indexOf(s):a!=="string"?Number(n)-Number(r):n.localeCompare(r)}function hn$2(n){return(...r)=>{let a=n(...r);return typeof a=="string"?new Error(a):a}}function Mt$2(n){return n===void 0?{}:n}function Vt$2(n){if(typeof n=="string")return{text:n};let{text:r,list:a}=n;return Fo$2((r||a)!==void 0,"Unexpected `expected` result, there should be at least one field."),a?{text:r,list:{title:a.title,values:a.values.map(Vt$2)}}:{text:r}}function $t$2(n,r){return n===!0?!0:n===!1?{value:r}:n}function Wt$2(n,r,a=!1){return n===!1?!1:n===!0?a?!0:[{value:r}]:"value"in n?[n]:n.length===0?!1:n}function fn$2(n,r){return typeof n=="string"||"key"in n?{from:r,to:n}:"from"in n?{from:n.from,to:n.to}:{from:r,to:n.to}}function ft$2(n,r){return n===void 0?[]:Array.isArray(n)?n.map(a=>fn$2(a,r)):[fn$2(n,r)]}function Ut$2(n,r){let a=ft$2(typeof n=="object"&&"redirect"in n?n.redirect:n,r);return a.length===0?{remain:r,redirect:a}:typeof n=="object"&&"remain"in n?{remain:n.remain,redirect:a}:{redirect:a}}function Fo$2(n,r){if(!n)throw new Error(r)}var Ft$2=class extends O$1{constructor(r){super(r),this._choices=pn$2(r.choices.map(a=>a&&typeof a=="object"?a:{value:a}),"value")}expected({descriptor:r}){let a=Array.from(this._choices.keys()).map(u=>this._choices.get(u)).filter(({hidden:u})=>!u).map(u=>u.value).sort(Cn$2).map(r.value),s=a.slice(0,-2),o=a.slice(-2);return{text:s.concat(o.join(" or ")).join(", "),list:{title:"one of the following values",values:a}}}validate(r){return this._choices.has(r)}deprecated(r){let a=this._choices.get(r);return a&&a.deprecated?{value:r}:!1}forward(r){let a=this._choices.get(r);return a?a.forward:void 0}redirect(r){let a=this._choices.get(r);return a?a.redirect:void 0}},pt$2=class extends O$1{expected(){return"a number"}validate(r,a){return typeof r=="number"}},dt$2=class extends pt$2{expected(){return"an integer"}validate(r,a){return a.normalizeValidateResult(super.validate(r,a),r)===!0&&En$2(r)}},je$2=class extends O$1{expected(){return"a string"}validate(r){return typeof r=="string"}},gn$2=oe$1,yn$2=st$2,An$2=sn$2,Bn$2=nn$2,mt$2=class{constructor(r,a){let{logger:s=console,loggerPrintWidth:o=80,descriptor:u=gn$2,unknown:c=yn$2,invalid:p=An$2,deprecated:d=Bn$2,missing:_=()=>!1,required:ja=()=>!1,preprocess:Ja=tc=>tc,postprocess:ec=()=>Ee$2}=a||{};this._utils={descriptor:u,logger:s||{warn:()=>{}},loggerPrintWidth:o,schemas:Fn$2(r,"name"),normalizeDefaultResult:Mt$2,normalizeExpectedResult:Vt$2,normalizeDeprecatedResult:Wt$2,normalizeForwardResult:ft$2,normalizeRedirectResult:Ut$2,normalizeValidateResult:$t$2},this._unknownHandler=c,this._invalidHandler=hn$2(p),this._deprecatedHandler=d,this._identifyMissing=(tc,rc)=>!(tc in rc)||_(tc,rc),this._identifyRequired=ja,this._preprocess=Ja,this._postprocess=ec,this.cleanHistory()}cleanHistory(){this._hasDeprecationWarned=dn$2()}normalize(r){let a={},s=[this._preprocess(r,this._utils)],o=()=>{for(;s.length!==0;){let u=s.shift(),c=this._applyNormalization(u,a);s.push(...c)}};o();for(let u of Object.keys(this._utils.schemas)){let c=this._utils.schemas[u];if(!(u in a)){let p=Mt$2(c.default(this._utils));"value"in p&&s.push({[u]:p.value})}}o();for(let u of Object.keys(this._utils.schemas)){if(!(u in a))continue;let c=this._utils.schemas[u],p=a[u],d=c.postprocess(p,this._utils);d!==Ee$2&&(this._applyValidation(d,u,c),a[u]=d)}return this._applyPostprocess(a),this._applyRequiredCheck(a),a}_applyNormalization(r,a){let s=[],{knownKeys:o,unknownKeys:u}=this._partitionOptionKeys(r);for(let c of o){let p=this._utils.schemas[c],d=p.preprocess(r[c],this._utils);this._applyValidation(d,c,p);let _=({from:ec,to:tc})=>{s.push(typeof tc=="string"?{[tc]:ec}:{[tc.key]:tc.value})},ja=({value:ec,redirectTo:tc})=>{let rc=Wt$2(p.deprecated(ec,this._utils),d,!0);if(rc!==!1)if(rc===!0)this._hasDeprecationWarned(c)||this._utils.logger.warn(this._deprecatedHandler(c,tc,this._utils));else for(let{value:nc}of rc){let ic={key:c,value:nc};if(!this._hasDeprecationWarned(ic)){let uc=typeof tc=="string"?{key:tc,value:nc}:tc;this._utils.logger.warn(this._deprecatedHandler(ic,uc,this._utils))}}};ft$2(p.forward(d,this._utils),d).forEach(_);let Ja=Ut$2(p.redirect(d,this._utils),d);if(Ja.redirect.forEach(_),"remain"in Ja){let ec=Ja.remain;a[c]=c in a?p.overlap(a[c],ec,this._utils):ec,ja({value:ec})}for(let{from:ec,to:tc}of Ja.redirect)ja({value:ec,redirectTo:tc})}for(let c of u){let p=r[c];this._applyUnknownHandler(c,p,a,(d,_)=>{s.push({[d]:_})})}return s}_applyRequiredCheck(r){for(let a of Object.keys(this._utils.schemas))if(this._identifyMissing(a,r)&&this._identifyRequired(a))throw this._invalidHandler(a,it$2,this._utils)}_partitionOptionKeys(r){let[a,s]=mn$2(Object.keys(r).filter(o=>!this._identifyMissing(o,r)),o=>o in this._utils.schemas);return{knownKeys:a,unknownKeys:s}}_applyValidation(r,a,s){let o=$t$2(s.validate(r,this._utils),r);if(o!==!0)throw this._invalidHandler(a,o.value,this._utils)}_applyUnknownHandler(r,a,s,o){let u=this._unknownHandler(r,a,this._utils);if(u)for(let c of Object.keys(u)){if(this._identifyMissing(c,u))continue;let p=u[c];c in this._utils.schemas?o(c,p):s[c]=p}}_applyPostprocess(r){let a=this._postprocess(r,this._utils);if(a!==Ee$2){if(a.delete)for(let s of a.delete)delete r[s];if(a.override){let{knownKeys:s,unknownKeys:o}=this._partitionOptionKeys(a.override);for(let u of s){let c=a.override[u];this._applyValidation(c,u,this._utils.schemas[u]),r[u]=c}for(let u of o){let c=a.override[u];this._applyUnknownHandler(u,c,r,(p,d)=>{let _=this._utils.schemas[p];this._applyValidation(d,p,_),r[p]=d})}}}}},Gt$2;function mo$2(n,r,{logger:a=!1,isCLI:s=!1,passThrough:o=!1,FlagSchema:u,descriptor:c}={}){if(s){if(!u)throw new Error("'FlagSchema' option is required.");if(!c)throw new Error("'descriptor' option is required.")}else c=oe$1;let p=o?Array.isArray(o)?(ec,tc)=>o.includes(ec)?{[ec]:tc}:void 0:(ec,tc)=>({[ec]:tc}):(ec,tc,rc)=>{let{_:nc,...ic}=rc.schemas;return st$2(ec,tc,{...rc,schemas:ic})},d=Eo$2(r,{isCLI:s,FlagSchema:u}),_=new mt$2(d,{logger:a,unknown:p,descriptor:c}),ja=a!==!1;ja&&Gt$2&&(_._hasDeprecationWarned=Gt$2);let Ja=_.normalize(n);return ja&&(Gt$2=_._hasDeprecationWarned),Ja}function Eo$2(n,{isCLI:r,FlagSchema:a}){let s=[];r&&s.push(at$2.create({name:"_"}));for(let o of n)s.push(Co$2(o,{isCLI:r,optionInfos:n,FlagSchema:a})),o.alias&&r&&s.push(Dt$3.create({name:o.alias,sourceName:o.name}));return s}function Co$2(n,{isCLI:r,optionInfos:a,FlagSchema:s}){let{name:o}=n,u={name:o},c,p={};switch(n.type){case"int":c=dt$2,r&&(u.preprocess=Number);break;case"string":c=je$2;break;case"choice":c=Ft$2,u.choices=n.choices.map(d=>d!=null&&d.redirect?{...d,redirect:{to:{key:n.name,value:d.redirect}}}:d);break;case"boolean":c=lt$2;break;case"flag":c=s,u.flags=a.flatMap(d=>[d.alias,d.description&&d.name,d.oppositeDescription&&`no-${d.name}`].filter(Boolean));break;case"path":c=je$2;break;default:throw new Error(`Unexpected type ${n.type}`)}if(n.exception?u.validate=(d,_,ja)=>n.exception(d)||_.validate(d,ja):u.validate=(d,_,ja)=>d===void 0||_.validate(d,ja),n.redirect&&(p.redirect=d=>d?{to:typeof n.redirect=="string"?n.redirect:{key:n.redirect.option,value:n.redirect.value}}:void 0),n.deprecated&&(p.deprecated=!0),r&&!n.array){let d=u.preprocess||(_=>_);u.preprocess=(_,ja,Ja)=>ja.preprocess(d(Array.isArray(_)?y(!1,_,-1):_),Ja)}return n.array?ct$1.create({...r?{preprocess:d=>Array.isArray(d)?d:[d]}:{},...p,valueSchema:c.create(u)}):c.create({...u,...p})}var _n$2=mo$2,ho$2=(n,r,a)=>{if(!(n&&r==null)){if(r.findLast)return r.findLast(a);for(let s=r.length-1;s>=0;s--){let o=r[s];if(a(o,s,r))return o}}},zt$1=ho$2;function Kt$2(n,r){if(!r)throw new Error("parserName is required.");let a=zt$1(!1,n,o=>o.parsers&&Object.prototype.hasOwnProperty.call(o.parsers,r));if(a)return a;let s=`Couldn't resolve parser "${r}".`;throw s+=" Plugins must be explicitly added to the standalone bundle.",new Re$3(s)}function bn$2(n,r){if(!r)throw new Error("astFormat is required.");let a=zt$1(!1,n,o=>o.printers&&Object.prototype.hasOwnProperty.call(o.printers,r));if(a)return a;let s=`Couldn't find plugin for AST format "${r}".`;throw s+=" Plugins must be explicitly added to the standalone bundle.",new Re$3(s)}function Et$3({plugins:n,parser:r}){let a=Kt$2(n,r);return Ht$2(a,r)}function Ht$2(n,r){let a=n.parsers[r];return typeof a=="function"?a():a}function xn$2(n,r){let a=n.printers[r];return typeof a=="function"?a():a}var kn$2={astFormat:"estree",printer:{},originalText:void 0,locStart:null,locEnd:null};async function go$2(n,r={}){var a;let s={...n};if(!s.parser)if(s.filepath){if(s.parser=en$2(s,{physicalFile:s.filepath}),!s.parser)throw new Ye$2(`No parser could be inferred for file "${s.filepath}".`)}else throw new Ye$2("No parser and no file path given, couldn't infer a parser.");let o=ut$2({plugins:n.plugins,showDeprecated:!0}).options,u={...kn$2,...Object.fromEntries(o.filter(ec=>ec.default!==void 0).map(ec=>[ec.name,ec.default]))},c=Kt$2(s.plugins,s.parser),p=await Ht$2(c,s.parser);s.astFormat=p.astFormat,s.locEnd=p.locEnd,s.locStart=p.locStart;let d=(a=c.printers)!=null&&a[p.astFormat]?c:bn$2(s.plugins,p.astFormat),_=await xn$2(d,p.astFormat);s.printer=_;let ja=d.defaultOptions?Object.fromEntries(Object.entries(d.defaultOptions).filter(([,ec])=>ec!==void 0)):{},Ja={...u,...ja};for(let[ec,tc]of Object.entries(Ja))(s[ec]===null||s[ec]===void 0)&&(s[ec]=tc);return s.parser==="json"&&(s.trailingComma="none"),_n$2(s,o,{passThrough:Object.keys(kn$2),...r})}var ie$1=go$2,Mn$3=Ae$3(jn$2());async function Oo$1(n,r){let a=await Et$3(r),s=a.preprocess?a.preprocess(n,r):n;r.originalText=s;let o;try{o=await a.parse(s,r,r)}catch(u){No$1(u,n)}return{text:s,ast:o}}function No$1(n,r){let{loc:a}=n;if(a){let s=(0,Mn$3.codeFrameColumns)(r,a,{highlightCode:!0});throw n.message+=`
`+s,n.codeFrame=s,n}throw n}var ce$2=Oo$1;async function Vn$2(n,r,a,s,o){let{embeddedLanguageFormatting:u,printer:{embed:c,hasPrettierIgnore:p=()=>!1,getVisitorKeys:d}}=a;if(!c||u!=="auto")return;if(c.length>2)throw new Error("printer.embed has too many parameters. The API changed in Prettier v3. Please update your plugin. See https://prettier.io/docs/en/plugins.html#optional-embed");let _=X$2(c.getVisitorKeys??d),ja=[];tc();let Ja=n.stack;for(let{print:rc,node:nc,pathStack:ic}of ja)try{n.stack=ic;let uc=await rc(ec,r,n,a);uc&&o.set(nc,uc)}catch(uc){if(globalThis.PRETTIER_DEBUG)throw uc}n.stack=Ja;function ec(rc,nc){return To$2(rc,nc,a,s)}function tc(){let{node:rc}=n;if(rc===null||typeof rc!="object"||p(n))return;for(let ic of _(rc))Array.isArray(rc[ic])?n.each(tc,ic):n.call(tc,ic);let nc=c(n,a);if(nc){if(typeof nc=="function"){ja.push({print:nc,node:rc,pathStack:[...n.stack]});return}o.set(rc,nc)}}}async function To$2(n,r,a,s){let o=await ie$1({...a,...r,parentParser:a.parser,originalText:n},{passThrough:!0}),{ast:u}=await ce$2(n,o),c=await s(u,o);return Xe$2(c)}function So$2(n,r){let{originalText:a,[Symbol.for("comments")]:s,locStart:o,locEnd:u,[Symbol.for("printedComments")]:c}=r,{node:p}=n,d=o(p),_=u(p);for(let ja of s)o(ja)>=d&&u(ja)<=_&&c.add(ja);return a.slice(d,_)}var $n$2=So$2;async function Me$2(n,r){({ast:n}=await Xt$2(n,r));let a=new Map,s=new Yr$2(n),o=new Map;await Vn$2(s,c,r,Me$2,o);let u=await Wn$2(s,r,c,void 0,o);return Jr$3(r),u;function c(d,_){return d===void 0||d===s?p(_):Array.isArray(d)?s.call(()=>p(_),...d):s.call(()=>p(_),d)}function p(d){let _=s.node;if(_==null)return"";let ja=_&&typeof _=="object"&&d===void 0;if(ja&&a.has(_))return a.get(_);let Ja=Wn$2(s,r,c,d,o);return ja&&a.set(_,Ja),Ja}}function Wn$2(n,r,a,s,o){var u;let{node:c}=n,{printer:p}=r,d;return(u=p.hasPrettierIgnore)!=null&&u.call(p,n)?d=$n$2(n,r):o.has(c)?d=o.get(c):d=p.print(n,r,a,s),c===r.cursorNode&&(d=Ze$2(d,_=>[Oe$3,_,Oe$3])),p.printComment&&(!p.willPrintOwnComments||!p.willPrintOwnComments(n,r))&&(d=qr$2(n,d,r)),d}async function Xt$2(n,r){let a=n.comments??[];r[Symbol.for("comments")]=a,r[Symbol.for("tokens")]=n.tokens??[],r[Symbol.for("printedComments")]=new Set,zr$1(n,r);let{printer:{preprocess:s}}=r;return n=s?await s(n,r):n,{ast:n,comments:a}}function vo$2(n,r){let{cursorOffset:a,locStart:s,locEnd:o}=r,u=X$2(r.printer.getVisitorKeys),c=d=>s(d)<=a&&o(d)>=a,p=n;for(let d of Vr$2(n,{getVisitorKeys:u,filter:c}))p=d;return p}var Un$2=vo$2;function Po$2(n,r){let{printer:{massageAstNode:a,getVisitorKeys:s}}=r;if(!a)return n;let o=X$2(s),u=a.ignoredProperties??new Set;return c(n);function c(p,d){if(!(p!==null&&typeof p=="object"))return p;if(Array.isArray(p))return p.map(ec=>c(ec,d)).filter(Boolean);let _={},ja=new Set(o(p));for(let ec in p)!Object.prototype.hasOwnProperty.call(p,ec)||u.has(ec)||(ja.has(ec)?_[ec]=c(p[ec],p):_[ec]=p[ec]);let Ja=a(p,_,d);if(Ja!==null)return Ja??_}}var Gn$2=Po$2,Lo$2=({parser:n})=>n==="json"||n==="json5"||n==="jsonc"||n==="json-stringify";function Io$1(n,r){let a=[n.node,...n.parentNodes],s=new Set([r.node,...r.parentNodes]);return a.find(o=>Hn$2.has(o.type)&&s.has(o))}function zn$2(n){let r=n.length-1;for(;;){let a=n[r];if((a==null?void 0:a.type)==="Program"||(a==null?void 0:a.type)==="File")r--;else break}return n.slice(0,r+1)}function Ro$1(n,r,{locStart:a,locEnd:s}){let o=n.node,u=r.node;if(o===u)return{startNode:o,endNode:u};let c=a(n.node);for(let d of zn$2(r.parentNodes))if(a(d)>=c)u=d;else break;let p=s(r.node);for(let d of zn$2(n.parentNodes)){if(s(d)<=p)o=d;else break;if(o===u)break}return{startNode:o,endNode:u}}function Zt$1(n,r,a,s,o=[],u){let{locStart:c,locEnd:p}=a,d=c(n),_=p(n);if(!(r>_||r<d||u==="rangeEnd"&&r===d||u==="rangeStart"&&r===_)){for(let ja of nt$2(n,a)){let Ja=Zt$1(ja,r,a,s,[n,...o],u);if(Ja)return Ja}if(!s||s(n,o[0]))return{node:n,parentNodes:o}}}function Yo$1(n,r){return r!=="DeclareExportDeclaration"&&n!=="TypeParameterDeclaration"&&(n==="Directive"||n==="TypeAlias"||n==="TSExportAssignment"||n.startsWith("Declare")||n.startsWith("TSDeclare")||n.endsWith("Statement")||n.endsWith("Declaration"))}var Hn$2=new Set(["JsonRoot","ObjectExpression","ArrayExpression","StringLiteral","NumericLiteral","BooleanLiteral","NullLiteral","UnaryExpression","TemplateLiteral"]),jo$1=new Set(["OperationDefinition","FragmentDefinition","VariableDefinition","TypeExtensionDefinition","ObjectTypeDefinition","FieldDefinition","DirectiveDefinition","EnumTypeDefinition","EnumValueDefinition","InputValueDefinition","InputObjectTypeDefinition","SchemaDefinition","OperationTypeDefinition","InterfaceTypeDefinition","UnionTypeDefinition","ScalarTypeDefinition"]);function Kn$2(n,r,a){if(!r)return!1;switch(n.parser){case"flow":case"babel":case"babel-flow":case"babel-ts":case"typescript":case"acorn":case"espree":case"meriyah":case"__babel_estree":return Yo$1(r.type,a==null?void 0:a.type);case"json":case"json5":case"jsonc":case"json-stringify":return Hn$2.has(r.type);case"graphql":return jo$1.has(r.kind);case"vue":return r.tag!=="root"}return!1}function qn$2(n,r,a){let{rangeStart:s,rangeEnd:o,locStart:u,locEnd:c}=r;Le$2.ok(o>s);let p=n.slice(s,o).search(/\S/),d=p===-1;if(!d)for(s+=p;o>s&&!/\S/.test(n[o-1]);--o);let _=Zt$1(a,s,r,(tc,rc)=>Kn$2(r,tc,rc),[],"rangeStart"),ja=d?_:Zt$1(a,o,r,tc=>Kn$2(r,tc),[],"rangeEnd");if(!_||!ja)return{rangeStart:0,rangeEnd:0};let Ja,ec;if(Lo$2(r)){let tc=Io$1(_,ja);Ja=tc,ec=tc}else({startNode:Ja,endNode:ec}=Ro$1(_,ja,r));return{rangeStart:Math.min(u(Ja),u(ec)),rangeEnd:Math.max(c(Ja),c(ec))}}var eu$1="\uFEFF",Jn$2=Symbol("cursor");async function tu$1(n,r,a=0){if(!n||n.trim().length===0)return{formatted:"",cursorOffset:-1,comments:[]};let{ast:s,text:o}=await ce$2(n,r);r.cursorOffset>=0&&(r.cursorNode=Un$2(s,r));let u=await Me$2(s,r);a>0&&(u=qe$2([q$3,u],a,r.tabWidth));let c=pe$2(u,r);if(a>0){let d=c.formatted.trim();c.cursorNodeStart!==void 0&&(c.cursorNodeStart-=c.formatted.indexOf(d)),c.formatted=d+be$3(r.endOfLine)}let p=r[Symbol.for("comments")];if(r.cursorOffset>=0){let d,_,ja,Ja,ec;if(r.cursorNode&&c.cursorNodeText?(d=r.locStart(r.cursorNode),_=o.slice(d,r.locEnd(r.cursorNode)),ja=r.cursorOffset-d,Ja=c.cursorNodeStart,ec=c.cursorNodeText):(d=0,_=o,ja=r.cursorOffset,Ja=0,ec=c.formatted),_===ec)return{formatted:c.formatted,cursorOffset:Ja+ja,comments:p};let tc=_.split("");tc.splice(ja,0,Jn$2);let rc=ec.split(""),nc=(0,Qn$2.diffArrays)(tc,rc),ic=Ja;for(let uc of nc)if(uc.removed){if(uc.value.includes(Jn$2))break}else ic+=uc.count;return{formatted:c.formatted,cursorOffset:ic,comments:p}}return{formatted:c.formatted,cursorOffset:-1,comments:p}}async function Mo$1(n,r){let{ast:a,text:s}=await ce$2(n,r),{rangeStart:o,rangeEnd:u}=qn$2(s,r,a),c=s.slice(o,u),p=Math.min(o,s.lastIndexOf(`
`,o)+1),d=s.slice(p,o).match(/^\s*/)[0],_=de$2(d,r.tabWidth),ja=await tu$1(c,{...r,rangeStart:0,rangeEnd:Number.POSITIVE_INFINITY,cursorOffset:r.cursorOffset>o&&r.cursorOffset<=u?r.cursorOffset-o:-1,endOfLine:"lf"},_),Ja=ja.formatted.trimEnd(),{cursorOffset:ec}=r;ec>u?ec+=Ja.length-c.length:ja.cursorOffset>=0&&(ec=ja.cursorOffset+o);let tc=s.slice(0,o)+Ja+s.slice(u);if(r.endOfLine!=="lf"){let rc=be$3(r.endOfLine);ec>=0&&rc===`\r
`&&(ec+=At$2(tc.slice(0,ec),`
`)),tc=re$2(!1,tc,`
`,rc)}return{formatted:tc,cursorOffset:ec,comments:ja.comments}}function Qt$1(n,r,a){return typeof r!="number"||Number.isNaN(r)||r<0||r>n.length?a:r}function Xn$2(n,r){let{cursorOffset:a,rangeStart:s,rangeEnd:o}=r;return a=Qt$1(n,a,-1),s=Qt$1(n,s,0),o=Qt$1(n,o,n.length),{...r,cursorOffset:a,rangeStart:s,rangeEnd:o}}function ru$1(n,r){let{cursorOffset:a,rangeStart:s,rangeEnd:o,endOfLine:u}=Xn$2(n,r),c=n.charAt(0)===eu$1;if(c&&(n=n.slice(1),a--,s--,o--),u==="auto"&&(u=lr$2(n)),n.includes("\r")){let p=d=>At$2(n.slice(0,Math.max(d,0)),`\r
`);a-=p(a),s-=p(s),o-=p(o),n=fr$2(n)}return{hasBOM:c,text:n,options:Xn$2(n,{...r,cursorOffset:a,rangeStart:s,rangeEnd:o,endOfLine:u})}}async function Zn$2(n,r){let a=await Et$3(r);return!a.hasPragma||a.hasPragma(n)}async function er$2(n,r){let{hasBOM:a,text:s,options:o}=ru$1(n,await ie$1(r));if(o.rangeStart>=o.rangeEnd&&s!==""||o.requirePragma&&!await Zn$2(s,o))return{formatted:n,cursorOffset:r.cursorOffset,comments:[]};let u;return o.rangeStart>0||o.rangeEnd<s.length?u=await Mo$1(s,o):(!o.requirePragma&&o.insertPragma&&o.printer.insertPragma&&!await Zn$2(s,o)&&(s=o.printer.insertPragma(s)),u=await tu$1(s,o)),a&&(u.formatted=eu$1+u.formatted,u.cursorOffset>=0&&u.cursorOffset++),u}async function nu$1(n,r,a){let{text:s,options:o}=ru$1(n,await ie$1(r)),u=await ce$2(s,o);return a&&(a.preprocessForPrint&&(u.ast=await Xt$2(u.ast,o)),a.massage&&(u.ast=Gn$2(u.ast,o))),u}async function uu$1(n,r){r=await ie$1(r);let a=await Me$2(n,r);return pe$2(a,r)}async function ou$1(n,r){let a=br$3(n),{formatted:s}=await er$2(a,{...r,parser:"__js_expression"});return s}async function iu$1(n,r){r=await ie$1(r);let{ast:a}=await ce$2(n,r);return Me$2(a,r)}async function su$1(n,r){return pe$2(n,await ie$1(r))}var tr$2={};We$1(tr$2,{builders:()=>$o$1,printer:()=>Wo$1,utils:()=>Uo$1});var $o$1={join:Ne$2,line:Ke,softline:Br$1,hardline:q$3,literalline:He$1,group:_t$2,conditionalGroup:Cr$3,fill:ze$2,lineSuffix:ke$2,lineSuffixBoundary:yr$2,cursor:Oe$3,breakParent:Fe$2,ifBreak:hr$2,trim:Ar$2,indent:De$2,indentIfBreak:gr$3,align:se$2,addAlignmentToDoc:qe$2,markAsRoot:mr$2,dedentToRoot:dr$1,dedent:Er$3,hardlineWithoutBreakParent:we$2,literallineWithoutBreakParent:bt$2,label:_r$2,concat:n=>n},Wo$1={printDocToString:pe$2},Uo$1={willBreak:Sr$3,traverseDoc:xe$2,findInDoc:Je$2,mapDoc:ve$2,removeLines:Pr$2,stripTrailingHardline:Xe$2,replaceEndOfLine:Lr$2,canBreak:Ir$3},Du$1="3.3.2",nr$2={};We$1(nr$2,{addDanglingComment:()=>te$2,addLeadingComment:()=>ne$3,addTrailingComment:()=>ue$2,getAlignmentSize:()=>de$2,getIndentSize:()=>au$1,getMaxContinuousCount:()=>cu$1,getNextNonSpaceNonCommentCharacter:()=>lu$1,getNextNonSpaceNonCommentCharacterIndex:()=>ri$1,getStringWidth:()=>Te$2,hasNewline:()=>U$2,hasNewlineInRange:()=>fu$1,hasSpaces:()=>Fu$1,isNextLineEmpty:()=>ii$2,isNextLineEmptyAfterIndex:()=>ht$1,isPreviousLineEmpty:()=>ui$1,makeString:()=>pu$1,skip:()=>me$2,skipEverythingButNewLine:()=>rt$2,skipInlineComment:()=>Ce$2,skipNewline:()=>$$2,skipSpaces:()=>S$1,skipToLineEnd:()=>tt$2,skipTrailingComment:()=>he$2,skipWhitespace:()=>$r$1});function Go$1(n,r){if(r===!1)return!1;if(n.charAt(r)==="/"&&n.charAt(r+1)==="*"){for(let a=r+2;a<n.length;++a)if(n.charAt(a)==="*"&&n.charAt(a+1)==="/")return a+2}return r}var Ce$2=Go$1;function zo$1(n,r){return r===!1?!1:n.charAt(r)==="/"&&n.charAt(r+1)==="/"?rt$2(n,r):r}var he$2=zo$1;function Ko$1(n,r){let a=null,s=r;for(;s!==a;)a=s,s=S$1(n,s),s=Ce$2(n,s),s=he$2(n,s),s=$$2(n,s);return s}var Ve$2=Ko$1;function Ho$1(n,r){let a=null,s=r;for(;s!==a;)a=s,s=tt$2(n,s),s=Ce$2(n,s),s=S$1(n,s);return s=he$2(n,s),s=$$2(n,s),s!==!1&&U$2(n,s)}var ht$1=Ho$1;function qo$1(n,r){let a=n.lastIndexOf(`
`);return a===-1?0:de$2(n.slice(a+1).match(/^[\t ]*/)[0],r)}var au$1=qo$1;function rr$2(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Jo$1(n,r){let a=n.match(new RegExp(`(${rr$2(r)})+`,"g"));return a===null?0:a.reduce((s,o)=>Math.max(s,o.length/r.length),0)}var cu$1=Jo$1;function Xo$1(n,r){let a=Ve$2(n,r);return a===!1?"":n.charAt(a)}var lu$1=Xo$1;function Zo$1(n,r,a){for(let s=r;s<a;++s)if(n.charAt(s)===`
`)return!0;return!1}var fu$1=Zo$1;function Qo$1(n,r,a={}){return S$1(n,a.backwards?r-1:r,a)!==r}var Fu$1=Qo$1;function ei$1(n,r,a){let s=r==='"'?"'":'"',o=re$2(!1,n,/\\(.)|(["'])/gs,(u,c,p)=>c===s?c:p===r?"\\"+p:p||(a&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/.test(c)?c:"\\"+c));return r+o+r}var pu$1=ei$1;function ti$1(n,r,a){return Ve$2(n,a(r))}function ri$1(n,r){return arguments.length===2||typeof r=="number"?Ve$2(n,r):ti$1(...arguments)}function ni$1(n,r,a){return Ie$2(n,a(r))}function ui$1(n,r){return arguments.length===2||typeof r=="number"?Ie$2(n,r):ni$1(...arguments)}function oi$2(n,r,a){return ht$1(n,a(r))}function ii$2(n,r){return arguments.length===2||typeof r=="number"?ht$1(n,r):oi$2(...arguments)}function le$2(n,r=1){return async(...a)=>{let s=a[r]??{},o=s.plugins??[];return a[r]={...s,plugins:Array.isArray(o)?o:Object.values(o)},n(...a)}}var du$1=le$2(er$2);async function mu$1(n,r){let{formatted:a}=await du$1(n,{...r,cursorOffset:-1});return a}async function si$1(n,r){return await mu$1(n,r)===n}var Di$2=le$2(ut$2,0),ai$2={parse:le$2(nu$1),formatAST:le$2(uu$1),formatDoc:le$2(ou$1),printToDoc:le$2(iu$1),printDocToString:le$2(su$1)},ei=Object.defineProperty,jr$1=n=>{throw TypeError(n)},Kr$2=(n,r)=>{for(var a in r)ei(n,a,{get:r[a],enumerable:!0})},Qr$2=(n,r,a)=>r.has(n)||jr$1("Cannot "+a),Q$1=(n,r,a)=>(Qr$2(n,r,"read from private field"),r.get(n)),Xr$2=(n,r,a)=>r.has(n)?jr$1("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,a),Jr$2=(n,r,a,s)=>(Qr$2(n,r,"write to private field"),r.set(n,a),a),Wr$2={};Kr$2(Wr$2,{languages:()=>_s$2,options:()=>As$2,parsers:()=>Ur$1,printers:()=>Po$1});var ti=(n,r,a,s)=>{if(!(n&&r==null))return r.replaceAll?r.replaceAll(a,s):a.global?r.replace(a,s):r.split(a).join(s)},w$1=ti,xe$1="string",ke$1="array",Be$2="cursor",ue$1="indent",le$1="align",Le$1="trim",te$1="group",ce$1="fill",pe$1="if-break",he$1="indent-if-break",Fe$1="line-suffix",Pe$1="line-suffix-boundary",Y$1="line",Ne$1="label",fe$1="break-parent",dt$1=new Set([Be$2,ue$1,le$1,Le$1,te$1,ce$1,pe$1,he$1,Fe$1,Pe$1,Y$1,Ne$1,fe$1]);function ri(n){if(typeof n=="string")return xe$1;if(Array.isArray(n))return ke$1;if(!n)return;let{type:r}=n;if(dt$1.has(r))return r}var Ie$1=ri,ni=n=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(n);function si(n){let r=n===null?"null":typeof n;if(r!=="string"&&r!=="object")return`Unexpected doc '${r}', 
Expected it to be 'string' or 'object'.`;if(Ie$1(n))throw new Error("doc is valid.");let a=Object.prototype.toString.call(n);if(a!=="[object Object]")return`Unexpected doc '${a}'.`;let s=ni([...dt$1].map(o=>`'${o}'`));return`Unexpected doc.type '${n.type}'.
Expected it to be ${s}.`}var nr$1=class extends Error{constructor(a){super(si(a));Zp(this,"name","InvalidDocError");this.doc=a}},gt$1=nr$1,Zr$2=()=>{},Ct$2=Zr$2;function L$1(n){return{type:ue$1,contents:n}}function en$1(n,r){return{type:le$1,contents:r,n}}function E$1(n,r={}){return Ct$2(r.expandedStates),{type:te$1,id:r.id,contents:n,break:!!r.shouldBreak,expandedStates:r.expandedStates}}function tn$1(n){return en$1(Number.NEGATIVE_INFINITY,n)}function rn$1(n){return en$1({type:"root"},n)}function St$1(n){return{type:ce$1,parts:n}}function me$1(n,r="",a={}){return{type:pe$1,breakContents:n,flatContents:r,groupId:a.groupId}}function nn$1(n,r){return{type:he$1,contents:n,groupId:r.groupId,negate:r.negate}}var ne$2={type:fe$1},ii$1={type:Y$1,hard:!0},ai$1={type:Y$1,hard:!0,literal:!0},A={type:Y$1},v={type:Y$1,soft:!0},S=[ii$1,ne$2],sn$1=[ai$1,ne$2];function M$1(n,r){let a=[];for(let s=0;s<r.length;s++)s!==0&&a.push(n),a.push(r[s]);return a}var oi$1=(n,r,a)=>{if(!(n&&r==null))return Array.isArray(r)||typeof r=="string"?r[a<0?r.length+a:a]:r.at(a)},X$1=oi$1;function _t$1(n,r){if(typeof n=="string")return r(n);let a=new Map;return s(n);function s(u){if(a.has(u))return a.get(u);let c=o(u);return a.set(u,c),c}function o(u){switch(Ie$1(u)){case ke$1:return r(u.map(s));case ce$1:return r({...u,parts:u.parts.map(s)});case pe$1:return r({...u,breakContents:s(u.breakContents),flatContents:s(u.flatContents)});case te$1:{let{expandedStates:c,contents:p}=u;return c?(c=c.map(s),p=c[0]):p=s(p),r({...u,contents:p,expandedStates:c})}case le$1:case ue$1:case he$1:case Ne$1:case Fe$1:return r({...u,contents:s(u.contents)});case xe$1:case Be$2:case Le$1:case Pe$1:case Y$1:case fe$1:return r(u);default:throw new gt$1(u)}}}function ui(n){switch(Ie$1(n)){case ce$1:if(n.parts.every(r=>r===""))return"";break;case te$1:if(!n.contents&&!n.id&&!n.break&&!n.expandedStates)return"";if(n.contents.type===te$1&&n.contents.id===n.id&&n.contents.break===n.break&&n.contents.expandedStates===n.expandedStates)return n.contents;break;case le$1:case ue$1:case he$1:case Fe$1:if(!n.contents)return"";break;case pe$1:if(!n.flatContents&&!n.breakContents)return"";break;case ke$1:{let r=[];for(let a of n){if(!a)continue;let[s,...o]=Array.isArray(a)?a:[a];typeof s=="string"&&typeof X$1(!1,r,-1)=="string"?r[r.length-1]+=s:r.push(s),r.push(...o)}return r.length===0?"":r.length===1?r[0]:r}case xe$1:case Be$2:case Le$1:case Pe$1:case Y$1:case Ne$1:case fe$1:break;default:throw new gt$1(n)}return n}function an$1(n){return _t$1(n,r=>ui(r))}function T$1(n,r=sn$1){return _t$1(n,a=>typeof a=="string"?M$1(r,a.split(`
`)):a)}var Et$2="'",on$1='"';function li$1(n,r){let a=r===!0||r===Et$2?Et$2:on$1,s=a===Et$2?on$1:Et$2,o=0,u=0;for(let c of n)c===a?o++:c===s&&u++;return o>u?s:a}var un$1=li$1;function sr$1(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}var q$2,ir$1=class{constructor(r){Xr$2(this,q$2),Jr$2(this,q$2,new Set(r))}getLeadingWhitespaceCount(r){let a=Q$1(this,q$2),s=0;for(let o=0;o<r.length&&a.has(r.charAt(o));o++)s++;return s}getTrailingWhitespaceCount(r){let a=Q$1(this,q$2),s=0;for(let o=r.length-1;o>=0&&a.has(r.charAt(o));o--)s++;return s}getLeadingWhitespace(r){let a=this.getLeadingWhitespaceCount(r);return r.slice(0,a)}getTrailingWhitespace(r){let a=this.getTrailingWhitespaceCount(r);return r.slice(r.length-a)}hasLeadingWhitespace(r){return Q$1(this,q$2).has(r.charAt(0))}hasTrailingWhitespace(r){return Q$1(this,q$2).has(X$1(!1,r,-1))}trimStart(r){let a=this.getLeadingWhitespaceCount(r);return r.slice(a)}trimEnd(r){let a=this.getTrailingWhitespaceCount(r);return r.slice(0,r.length-a)}trim(r){return this.trimEnd(this.trimStart(r))}split(r,a=!1){let s=`[${sr$1([...Q$1(this,q$2)].join(""))}]+`,o=new RegExp(a?`(${s})`:s);return r.split(o)}hasWhitespaceCharacter(r){let a=Q$1(this,q$2);return Array.prototype.some.call(r,s=>a.has(s))}hasNonWhitespaceCharacter(r){let a=Q$1(this,q$2);return Array.prototype.some.call(r,s=>!a.has(s))}isWhitespaceOnly(r){let a=Q$1(this,q$2);return Array.prototype.every.call(r,s=>a.has(s))}};q$2=new WeakMap;var ln$1=ir$1,ci$1=["	",`
`,"\f","\r"," "],pi$1=new ln$1(ci$1),F$1=pi$1,ar$1=class extends Error{constructor(a,s,o="type"){super(`Unexpected ${s} node ${o}: ${JSON.stringify(a[o])}.`);Zp(this,"name","UnexpectedNodeError");this.node=a}},cn$1=ar$1;function hi$1(n){return(n==null?void 0:n.type)==="front-matter"}var Re$2=hi$1,fi$1=new Set(["sourceSpan","startSourceSpan","endSourceSpan","nameSpan","valueSpan","keySpan","tagDefinition","tokens","valueTokens","switchValueSourceSpan","expSourceSpan","valueSourceSpan"]),mi$1=new Set(["if","else if","for","switch","case"]);function pn$1(n,r){var a;if(n.type==="text"||n.type==="comment"||Re$2(n)||n.type==="yaml"||n.type==="toml")return null;if(n.type==="attribute"&&delete r.value,n.type==="docType"&&delete r.value,n.type==="angularControlFlowBlock"&&(a=n.parameters)!=null&&a.children)for(let s of r.parameters.children)mi$1.has(n.name)?delete s.expression:s.expression=s.expression.trim();n.type==="angularIcuExpression"&&(r.switchValue=n.switchValue.trim())}pn$1.ignoredProperties=fi$1;var hn$1=pn$1;async function di$1(n,r){if(n.language==="yaml"){let a=n.value.trim(),s=a?await r(a,{parser:"yaml"}):"";return rn$1([n.startDelimiter,n.explicitLanguage,S,s,s?S:"",n.endDelimiter])}}var fn$1=di$1;function de$1(n,r=!0){return[L$1([v,n]),r?v:""]}function j$1(n,r){let a=n.type==="NGRoot"?n.node.type==="NGMicrosyntax"&&n.node.body.length===1&&n.node.body[0].type==="NGMicrosyntaxExpression"?n.node.body[0].expression:n.node:n.type==="JsExpressionRoot"?n.node:n;return a&&(a.type==="ObjectExpression"||a.type==="ArrayExpression"||(r.parser==="__vue_expression"||r.parser==="__vue_ts_expression")&&(a.type==="TemplateLiteral"||a.type==="StringLiteral"))}async function x$1(n,r,a,s){a={__isInHtmlAttribute:!0,__embeddedInHtml:!0,...a};let o=!0;s&&(a.__onHtmlBindingRoot=(c,p)=>{o=s(c,p)});let u=await r(n,a,r);return o?E$1(u):de$1(u)}function gi$1(n,r,a,s){let{node:o}=a,u=s.originalText.slice(o.sourceSpan.start.offset,o.sourceSpan.end.offset);return/^\s*$/.test(u)?"":x$1(u,n,{parser:"__ng_directive",__isInHtmlAttribute:!1},j$1)}var mn$1=gi$1,Ci$1=n=>String(n).split(/[/\\]/).pop();function dn$1(n,r){if(!r)return;let a=Ci$1(r).toLowerCase();return n.find(({filenames:s})=>s==null?void 0:s.some(o=>o.toLowerCase()===a))??n.find(({extensions:s})=>s==null?void 0:s.some(o=>a.endsWith(o)))}function Si$1(n,r){if(r)return n.find(({name:a})=>a.toLowerCase()===r)??n.find(({aliases:a})=>a==null?void 0:a.includes(r))??n.find(({extensions:a})=>a==null?void 0:a.includes(`.${r}`))}function _i$1(n,r){let a=n.plugins.flatMap(o=>o.languages??[]),s=Si$1(a,r.language)??dn$1(a,r.physicalFile)??dn$1(a,r.file)??(r.physicalFile,void 0);return s==null?void 0:s.parsers[0]}var $e$2=_i$1,gn$1="inline",Cn$1={area:"none",base:"none",basefont:"none",datalist:"none",head:"none",link:"none",meta:"none",noembed:"none",noframes:"none",param:"block",rp:"none",script:"block",style:"none",template:"inline",title:"none",html:"block",body:"block",address:"block",blockquote:"block",center:"block",dialog:"block",div:"block",figure:"block",figcaption:"block",footer:"block",form:"block",header:"block",hr:"block",legend:"block",listing:"block",main:"block",p:"block",plaintext:"block",pre:"block",search:"block",xmp:"block",slot:"contents",ruby:"ruby",rt:"ruby-text",article:"block",aside:"block",h1:"block",h2:"block",h3:"block",h4:"block",h5:"block",h6:"block",hgroup:"block",nav:"block",section:"block",dir:"block",dd:"block",dl:"block",dt:"block",menu:"block",ol:"block",ul:"block",li:"list-item",table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell",input:"inline-block",button:"inline-block",fieldset:"block",marquee:"inline-block",source:"block",track:"block",details:"block",summary:"block",meter:"inline-block",progress:"inline-block",object:"inline-block",video:"inline-block",audio:"inline-block",select:"inline-block",option:"block",optgroup:"block"},Sn$1="normal",_n$1={listing:"pre",plaintext:"pre",pre:"pre",xmp:"pre",nobr:"nowrap",table:"initial",textarea:"pre-wrap"};function Ei$1(n){return n.type==="element"&&!n.hasExplicitNamespace&&!["html","svg"].includes(n.namespace)}var ge$2=Ei$1,Ai$1=n=>w$1(!1,n,/^[\t\f\r ]*\n/g,""),or$1=n=>Ai$1(F$1.trimEnd(n)),En$1=n=>{let r=n,a=F$1.getLeadingWhitespace(r);a&&(r=r.slice(a.length));let s=F$1.getTrailingWhitespace(r);return s&&(r=r.slice(0,-s.length)),{leadingWhitespace:a,trailingWhitespace:s,text:r}};function At$1(n,r){return!!(n.type==="ieConditionalComment"&&n.lastChild&&!n.lastChild.isSelfClosing&&!n.lastChild.endSourceSpan||n.type==="ieConditionalComment"&&!n.complete||Ce$1(n)&&n.children.some(a=>a.type!=="text"&&a.type!=="interpolation")||yt$1(n,r)&&!U$1(n)&&n.type!=="interpolation")}function Se$1(n){return n.type==="attribute"||!n.parent||!n.prev?!1:Di$1(n.prev)}function Di$1(n){return n.type==="comment"&&n.value.trim()==="prettier-ignore"}function R$1(n){return n.type==="text"||n.type==="comment"}function U$1(n){return n.type==="element"&&(n.fullName==="script"||n.fullName==="style"||n.fullName==="svg:style"||n.fullName==="svg:script"||ge$2(n)&&(n.name==="script"||n.name==="style"))}function An$1(n){return n.children&&!U$1(n)}function Dn$1(n){return U$1(n)||n.type==="interpolation"||ur$1(n)}function ur$1(n){return Pn$1(n).startsWith("pre")}function vn$1(n,r){var a,s;let o=u();if(o&&!n.prev&&(s=(a=n.parent)==null?void 0:a.tagDefinition)!=null&&s.ignoreFirstLf)return n.type==="interpolation";return o;function u(){return Re$2(n)||n.type==="angularControlFlowBlock"?!1:(n.type==="text"||n.type==="interpolation")&&n.prev&&(n.prev.type==="text"||n.prev.type==="interpolation")?!0:!n.parent||n.parent.cssDisplay==="none"?!1:Ce$1(n.parent)?!0:!(!n.prev&&(n.parent.type==="root"||Ce$1(n)&&n.parent||U$1(n.parent)||Je$1(n.parent,r)||!xi$1(n.parent.cssDisplay))||n.prev&&!Li$1(n.prev.cssDisplay))}}function yn$1(n,r){return Re$2(n)||n.type==="angularControlFlowBlock"?!1:(n.type==="text"||n.type==="interpolation")&&n.next&&(n.next.type==="text"||n.next.type==="interpolation")?!0:!n.parent||n.parent.cssDisplay==="none"?!1:Ce$1(n.parent)?!0:!(!n.next&&(n.parent.type==="root"||Ce$1(n)&&n.parent||U$1(n.parent)||Je$1(n.parent,r)||!ki$1(n.parent.cssDisplay))||n.next&&!Bi$1(n.next.cssDisplay))}function wn$1(n){return Fi$1(n.cssDisplay)&&!U$1(n)}function Qe$1(n){return Re$2(n)||n.next&&n.sourceSpan.end&&n.sourceSpan.end.line+1<n.next.sourceSpan.start.line}function bn$1(n){return lr$1(n)||n.type==="element"&&n.children.length>0&&(["body","script","style"].includes(n.name)||n.children.some(r=>yi$1(r)))||n.firstChild&&n.firstChild===n.lastChild&&n.firstChild.type!=="text"&&xn$1(n.firstChild)&&(!n.lastChild.isTrailingSpaceSensitive||kn$1(n.lastChild))}function lr$1(n){return n.type==="element"&&n.children.length>0&&(["html","head","ul","ol","select"].includes(n.name)||n.cssDisplay.startsWith("table")&&n.cssDisplay!=="table-cell")}function Dt$2(n){return Bn$1(n)||n.prev&&vi$1(n.prev)||Tn$1(n)}function vi$1(n){return Bn$1(n)||n.type==="element"&&n.fullName==="br"||Tn$1(n)}function Tn$1(n){return xn$1(n)&&kn$1(n)}function xn$1(n){return n.hasLeadingSpaces&&(n.prev?n.prev.sourceSpan.end.line<n.sourceSpan.start.line:n.parent.type==="root"||n.parent.startSourceSpan.end.line<n.sourceSpan.start.line)}function kn$1(n){return n.hasTrailingSpaces&&(n.next?n.next.sourceSpan.start.line>n.sourceSpan.end.line:n.parent.type==="root"||n.parent.endSourceSpan&&n.parent.endSourceSpan.start.line>n.sourceSpan.end.line)}function Bn$1(n){switch(n.type){case"ieConditionalComment":case"comment":case"directive":return!0;case"element":return["script","select"].includes(n.name)}return!1}function vt$2(n){return n.lastChild?vt$2(n.lastChild):n}function yi$1(n){var r;return(r=n.children)==null?void 0:r.some(a=>a.type!=="text")}function Ln(n){if(n)switch(n){case"module":case"text/javascript":case"text/babel":case"application/javascript":return"babel";case"application/x-typescript":return"typescript";case"text/markdown":return"markdown";case"text/html":return"html";case"text/x-handlebars-template":return"glimmer";default:if(n.endsWith("json")||n.endsWith("importmap")||n==="speculationrules")return"json"}}function wi$1(n,r){let{name:a,attrMap:s}=n;if(a!=="script"||Object.prototype.hasOwnProperty.call(s,"src"))return;let{type:o,lang:u}=n.attrMap;return!u&&!o?"babel":$e$2(r,{language:u})??Ln(o)}function bi$1(n,r){if(!yt$1(n,r))return;let{attrMap:a}=n;if(Object.prototype.hasOwnProperty.call(a,"src"))return;let{type:s,lang:o}=a;return $e$2(r,{language:o})??Ln(s)}function Ti$1(n,r){if(n.name!=="style")return;let{lang:a}=n.attrMap;return a?$e$2(r,{language:a}):"css"}function cr$1(n,r){return wi$1(n,r)??Ti$1(n,r)??bi$1(n,r)}function Xe$1(n){return n==="block"||n==="list-item"||n.startsWith("table")}function xi$1(n){return!Xe$1(n)&&n!=="inline-block"}function ki$1(n){return!Xe$1(n)&&n!=="inline-block"}function Bi$1(n){return!Xe$1(n)}function Li$1(n){return!Xe$1(n)}function Fi$1(n){return!Xe$1(n)&&n!=="inline-block"}function Ce$1(n){return Pn$1(n).startsWith("pre")}function Pi$1(n,r){let a=n;for(;a;){if(r(a))return!0;a=a.parent}return!1}function Fn$1(n,r){var a;if(_e$2(n,r))return"block";if(((a=n.prev)==null?void 0:a.type)==="comment"){let o=n.prev.value.match(/^\s*display:\s*([a-z]+)\s*$/);if(o)return o[1]}let s=!1;if(n.type==="element"&&n.namespace==="svg")if(Pi$1(n,o=>o.fullName==="svg:foreignObject"))s=!0;else return n.name==="svg"?"inline-block":"block";switch(r.htmlWhitespaceSensitivity){case"strict":return"inline";case"ignore":return"block";default:return n.type==="element"&&(!n.namespace||s||ge$2(n))&&Cn$1[n.name]||gn$1}}function Pn$1(n){return n.type==="element"&&(!n.namespace||ge$2(n))&&_n$1[n.name]||Sn$1}function Ni$1(n){let r=Number.POSITIVE_INFINITY;for(let a of n.split(`
`)){if(a.length===0)continue;let s=F$1.getLeadingWhitespaceCount(a);if(s===0)return 0;a.length!==s&&s<r&&(r=s)}return r===Number.POSITIVE_INFINITY?0:r}function pr$1(n,r=Ni$1(n)){return r===0?n:n.split(`
`).map(a=>a.slice(r)).join(`
`)}function hr$1(n){return w$1(!1,w$1(!1,n,"&apos;","'"),"&quot;",'"')}function P$1(n){return hr$1(n.value)}var Ii$1=new Set(["template","style","script"]);function Je$1(n,r){return _e$2(n,r)&&!Ii$1.has(n.fullName)}function _e$2(n,r){return r.parser==="vue"&&n.type==="element"&&n.parent.type==="root"&&n.fullName.toLowerCase()!=="html"}function yt$1(n,r){return _e$2(n,r)&&(Je$1(n,r)||n.attrMap.lang&&n.attrMap.lang!=="html")}function Nn$1(n){let r=n.fullName;return r.charAt(0)==="#"||r==="slot-scope"||r==="v-slot"||r.startsWith("v-slot:")}function In$1(n,r){let a=n.parent;if(!_e$2(a,r))return!1;let s=a.fullName,o=n.fullName;return s==="script"&&o==="setup"||s==="style"&&o==="vars"}function wt$1(n,r=n.value){return n.parent.isWhitespaceSensitive?n.parent.isIndentationSensitive?T$1(r):T$1(pr$1(or$1(r)),S):M$1(A,F$1.split(r))}function bt$1(n,r){return _e$2(n,r)&&n.name==="script"}var fr$1=/{{(.+?)}}/s;async function Rn$1(n,r){let a=[];for(let[s,o]of n.split(fr$1).entries())if(s%2===0)a.push(T$1(o));else try{a.push(E$1(["{{",L$1([A,await x$1(o,r,{parser:"__ng_interpolation",__isInHtmlInterpolation:!0})]),A,"}}"]))}catch{a.push("{{",T$1(o),"}}")}return a}function mr$1({parser:n}){return(r,a,s)=>x$1(P$1(s.node),r,{parser:n},j$1)}var Ri$1=mr$1({parser:"__ng_action"}),$i$1=mr$1({parser:"__ng_binding"}),Oi$1=mr$1({parser:"__ng_directive"});function Mi$1(n,r){if(r.parser!=="angular")return;let{node:a}=n,s=a.fullName;if(s.startsWith("(")&&s.endsWith(")")||s.startsWith("on-"))return Ri$1;if(s.startsWith("[")&&s.endsWith("]")||/^bind(?:on)?-/.test(s)||/^ng-(?:if|show|hide|class|style)$/.test(s))return $i$1;if(s.startsWith("*"))return Oi$1;let o=P$1(a);if(/^i18n(?:-.+)?$/.test(s))return()=>de$1(St$1(wt$1(a,o.trim())),!o.includes("@@"));if(fr$1.test(o))return u=>Rn$1(o,u)}var $n$1=Mi$1;function qi$1(n,r){let{node:a}=n,s=P$1(a);if(a.fullName==="class"&&!r.parentParser&&!s.includes("{{"))return()=>s.trim().split(/\s+/).join(" ")}var On$1=qi$1;function Mn$2(n){return n==="	"||n===`
`||n==="\f"||n==="\r"||n===" "}var Hi$1=/^[ \t\n\r\u000c]+/,Vi$1=/^[, \t\n\r\u000c]+/,Ui$1=/^[^ \t\n\r\u000c]+/,Wi$1=/[,]+$/,qn$1=/^\d+$/,zi$1=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/;function Gi$1(n){let r=n.length,a,s,o,u,c,p=0,d;function _(tc){let rc,nc=tc.exec(n.substring(p));if(nc)return[rc]=nc,p+=rc.length,rc}let ja=[];for(;;){if(_(Vi$1),p>=r){if(ja.length===0)throw new Error("Must contain one or more image candidate strings.");return ja}d=p,a=_(Ui$1),s=[],a.slice(-1)===","?(a=a.replace(Wi$1,""),ec()):Ja()}function Ja(){for(_(Hi$1),o="",u="in descriptor";;){if(c=n.charAt(p),u==="in descriptor")if(Mn$2(c))o&&(s.push(o),o="",u="after descriptor");else if(c===","){p+=1,o&&s.push(o),ec();return}else if(c==="(")o+=c,u="in parens";else if(c===""){o&&s.push(o),ec();return}else o+=c;else if(u==="in parens")if(c===")")o+=c,u="in descriptor";else if(c===""){s.push(o),ec();return}else o+=c;else if(u==="after descriptor"&&!Mn$2(c))if(c===""){ec();return}else u="in descriptor",p-=1;p+=1}}function ec(){let tc=!1,rc,nc,ic,uc,eh={},rh,ah,ih,oh,uh;for(uc=0;uc<s.length;uc++)rh=s[uc],ah=rh[rh.length-1],ih=rh.substring(0,rh.length-1),oh=parseInt(ih,10),uh=parseFloat(ih),qn$1.test(ih)&&ah==="w"?((rc||nc)&&(tc=!0),oh===0?tc=!0:rc=oh):zi$1.test(ih)&&ah==="x"?((rc||nc||ic)&&(tc=!0),uh<0?tc=!0:nc=uh):qn$1.test(ih)&&ah==="h"?((ic||nc)&&(tc=!0),oh===0?tc=!0:ic=oh):tc=!0;if(!tc)eh.source={value:a,startOffset:d},rc&&(eh.width={value:rc}),nc&&(eh.density={value:nc}),ic&&(eh.height={value:ic}),ja.push(eh);else throw new Error(`Invalid srcset descriptor found in "${n}" at "${rh}".`)}}var Hn$1=Gi$1;function Yi$1(n){if(n.node.fullName==="srcset"&&(n.parent.fullName==="img"||n.parent.fullName==="source"))return()=>Ki$1(P$1(n.node))}var Vn$1={width:"w",height:"h",density:"x"},ji$1=Object.keys(Vn$1);function Ki$1(n){let r=Hn$1(n),a=ji$1.filter(ja=>r.some(Ja=>Object.prototype.hasOwnProperty.call(Ja,ja)));if(a.length>1)throw new Error("Mixed descriptor in srcset is not supported");let[s]=a,o=Vn$1[s],u=r.map(ja=>ja.source.value),c=Math.max(...u.map(ja=>ja.length)),p=r.map(ja=>ja[s]?String(ja[s].value):""),d=p.map(ja=>{let Ja=ja.indexOf(".");return Ja===-1?ja.length:Ja}),_=Math.max(...d);return de$1(M$1([",",A],u.map((ja,Ja)=>{let ec=[ja],tc=p[Ja];if(tc){let rc=c-ja.length+1,nc=_-d[Ja],ic=" ".repeat(rc+nc);ec.push(me$1(ic," "),tc+o)}return ec})))}var Un$1=Yi$1;function Wn$1(n,r){let{node:a}=n,s=P$1(n.node).trim();if(a.fullName==="style"&&!r.parentParser&&!s.includes("{{"))return async o=>de$1(await o(s,{parser:"css",__isHTMLStyleAttribute:!0}))}var dr=new WeakMap;function Qi$1(n,r){let{root:a}=n;return dr.has(a)||dr.set(a,a.children.some(s=>bt$1(s,r)&&["ts","typescript"].includes(s.attrMap.lang))),dr.get(a)}var Oe$2=Qi$1;function zn$1(n,r,a){let{node:s}=a,o=P$1(s);return x$1(`type T<${o}> = any`,n,{parser:"babel-ts",__isEmbeddedTypescriptGenericParameters:!0},j$1)}function Gn$1(n,r,{parseWithTs:a}){return x$1(`function _(${n}) {}`,r,{parser:a?"babel-ts":"babel",__isVueBindings:!0})}function Yn$1(n){let r=/^(?:[\w$]+|\([^)]*\))\s*=>|^function\s*\(/,a=/^[$_a-z][\w$]*(?:\.[$_a-z][\w$]*|\['[^']*']|\["[^"]*"]|\[\d+]|\[[$_a-z][\w$]*])*$/i,s=n.trim();return r.test(s)||a.test(s)}async function jn$1(n,r,a,s){let o=P$1(a.node),{left:u,operator:c,right:p}=Xi$1(o),d=Oe$2(a,s);return[E$1(await x$1(`function _(${u}) {}`,n,{parser:d?"babel-ts":"babel",__isVueForBindingLeft:!0}))," ",c," ",await x$1(p,n,{parser:d?"__ts_expression":"__js_expression"})]}function Xi$1(n){let r=/(.*?)\s+(in|of)\s+(.*)/s,a=/,([^,\]}]*)(?:,([^,\]}]*))?$/,s=/^\(|\)$/g,o=n.match(r);if(!o)return;let u={};if(u.for=o[3].trim(),!u.for)return;let c=w$1(!1,o[1].trim(),s,""),p=c.match(a);p?(u.alias=c.replace(a,""),u.iterator1=p[1].trim(),p[2]&&(u.iterator2=p[2].trim())):u.alias=c;let d=[u.alias,u.iterator1,u.iterator2];if(!d.some((_,ja)=>!_&&(ja===0||d.slice(ja+1).some(Boolean))))return{left:d.filter(Boolean).join(","),operator:o[2],right:u.for}}function Ji$1(n,r){if(r.parser!=="vue")return;let{node:a}=n,s=a.fullName;if(s==="v-for")return jn$1;if(s==="generic"&&bt$1(a.parent,r))return zn$1;let o=P$1(a),u=Oe$2(n,r);if(Nn$1(a)||In$1(a,r))return c=>Gn$1(o,c,{parseWithTs:u});if(s.startsWith("@")||s.startsWith("v-on:"))return c=>Zi$1(o,c,{parseWithTs:u});if(s.startsWith(":")||s.startsWith("v-bind:"))return c=>ea$2(o,c,{parseWithTs:u});if(s.startsWith("v-"))return c=>Kn$1(o,c,{parseWithTs:u})}function Zi$1(n,r,{parseWithTs:a}){return Yn$1(n)?Kn$1(n,r,{parseWithTs:a}):x$1(n,r,{parser:a?"__vue_ts_event_binding":"__vue_event_binding"},j$1)}function ea$2(n,r,{parseWithTs:a}){return x$1(n,r,{parser:a?"__vue_ts_expression":"__vue_expression"},j$1)}function Kn$1(n,r,{parseWithTs:a}){return x$1(n,r,{parser:a?"__ts_expression":"__js_expression"},j$1)}var Qn$1=Ji$1;function ta$2(n,r){let{node:a}=n;if(a.value){if(/^PRETTIER_HTML_PLACEHOLDER_\d+_\d+_IN_JS$/.test(r.originalText.slice(a.valueSpan.start.offset,a.valueSpan.end.offset))||r.parser==="lwc"&&a.value.startsWith("{")&&a.value.endsWith("}"))return[a.rawName,"=",a.value];for(let s of[Un$1,Wn$1,On$1,Qn$1,$n$1]){let o=s(n,r);if(o)return ra$1(o)}}}function ra$1(n){return async(r,a,s,o)=>{let u=await n(r,a,s,o);if(u)return u=_t$1(u,c=>typeof c=="string"?w$1(!1,c,'"',"&quot;"):c),[s.node.rawName,'="',E$1(u),'"']}}var Xn$1=ta$2,Jn$1=new Proxy(()=>{},{get:()=>Jn$1}),gr$2=Jn$1;function na$1(n){return Array.isArray(n)&&n.length>0}var Me$1=na$1;function se$1(n){return n.sourceSpan.start.offset}function ie(n){return n.sourceSpan.end.offset}function Ze$1(n,r){return[n.isSelfClosing?"":sa$2(n,r),Ee$1(n,r)]}function sa$2(n,r){return n.lastChild&&ve$1(n.lastChild)?"":[ia$2(n,r),Tt$1(n,r)]}function Ee$1(n,r){return(n.next?K$1(n.next):De$1(n.parent))?"":[Ae$2(n,r),W(n,r)]}function ia$2(n,r){return De$1(n)?Ae$2(n.lastChild,r):""}function W(n,r){return ve$1(n)?Tt$1(n.parent,r):et$1(n)?xt$1(n.next):""}function Tt$1(n,r){if(gr$2(!n.isSelfClosing),Zn$1(n,r))return"";switch(n.type){case"ieConditionalComment":return"<!";case"element":if(n.hasHtmComponentClosingTag)return"<//";default:return`</${n.rawName}`}}function Ae$2(n,r){if(Zn$1(n,r))return"";switch(n.type){case"ieConditionalComment":case"ieConditionalEndComment":return"[endif]-->";case"ieConditionalStartComment":return"]><!-->";case"interpolation":return"}}";case"angularIcuExpression":return"}";case"element":if(n.isSelfClosing)return"/>";default:return">"}}function Zn$1(n,r){return!n.isSelfClosing&&!n.endSourceSpan&&(Se$1(n)||At$1(n.parent,r))}function K$1(n){return n.prev&&n.prev.type!=="docType"&&n.type!=="angularControlFlowBlock"&&!R$1(n.prev)&&n.isLeadingSpaceSensitive&&!n.hasLeadingSpaces}function De$1(n){var r;return((r=n.lastChild)==null?void 0:r.isTrailingSpaceSensitive)&&!n.lastChild.hasTrailingSpaces&&!R$1(vt$2(n.lastChild))&&!Ce$1(n)}function ve$1(n){return!n.next&&!n.hasTrailingSpaces&&n.isTrailingSpaceSensitive&&R$1(vt$2(n))}function et$1(n){return n.next&&!R$1(n.next)&&R$1(n)&&n.isTrailingSpaceSensitive&&!n.hasTrailingSpaces}function aa$1(n){let r=n.trim().match(/^prettier-ignore-attribute(?:\s+(.+))?$/s);return r?r[1]?r[1].split(/\s+/):!0:!1}function tt$1(n){return!n.prev&&n.isLeadingSpaceSensitive&&!n.hasLeadingSpaces}function oa$1(n,r,a){var s;let{node:o}=n;if(!Me$1(o.attrs))return o.isSelfClosing?" ":"";let u=((s=o.prev)==null?void 0:s.type)==="comment"&&aa$1(o.prev.value),c=typeof u=="boolean"?()=>u:Array.isArray(u)?Ja=>u.includes(Ja.rawName):()=>!1,p=n.map(({node:Ja})=>c(Ja)?T$1(r.originalText.slice(se$1(Ja),ie(Ja))):a(),"attrs"),d=o.type==="element"&&o.fullName==="script"&&o.attrs.length===1&&o.attrs[0].fullName==="src"&&o.children.length===0,_=r.singleAttributePerLine&&o.attrs.length>1&&!_e$2(o,r)?S:A,ja=[L$1([d?" ":A,M$1(_,p)])];return o.firstChild&&tt$1(o.firstChild)||o.isSelfClosing&&De$1(o.parent)||d?ja.push(o.isSelfClosing?" ":""):ja.push(r.bracketSameLine?o.isSelfClosing?" ":"":o.isSelfClosing?A:v),ja}function ua$1(n){return n.firstChild&&tt$1(n.firstChild)?"":kt$1(n)}function rt$1(n,r,a){let{node:s}=n;return[ye$1(s,r),oa$1(n,r,a),s.isSelfClosing?"":ua$1(s)]}function ye$1(n,r){return n.prev&&et$1(n.prev)?"":[z$1(n,r),xt$1(n)]}function z$1(n,r){return tt$1(n)?kt$1(n.parent):K$1(n)?Ae$2(n.prev,r):""}function xt$1(n){switch(n.type){case"ieConditionalComment":case"ieConditionalStartComment":return`<!--[if ${n.condition}`;case"ieConditionalEndComment":return"<!--<!";case"interpolation":return"{{";case"docType":return n.value==="html"?"<!doctype":"<!DOCTYPE";case"angularIcuExpression":return"{";case"element":if(n.condition)return`<!--[if ${n.condition}]><!--><${n.rawName}`;default:return`<${n.rawName}`}}function kt$1(n){switch(gr$2(!n.isSelfClosing),n.type){case"ieConditionalComment":return"]>";case"element":if(n.condition)return"><!--<![endif]-->";default:return">"}}function la$1(n,r){if(!n.endSourceSpan)return"";let a=n.startSourceSpan.end.offset;n.firstChild&&tt$1(n.firstChild)&&(a-=kt$1(n).length);let s=n.endSourceSpan.start.offset;return n.lastChild&&ve$1(n.lastChild)?s+=Tt$1(n,r).length:De$1(n)&&(s-=Ae$2(n.lastChild,r).length),r.originalText.slice(a,s)}var Bt$1=la$1,ca$1=new Set(["if","else if","for","switch","case"]);function pa$1(n,r){let{node:a}=n;switch(a.type){case"element":if(U$1(a)||a.type==="interpolation")return;if(!a.isSelfClosing&&yt$1(a,r)){let s=cr$1(a,r);return s?async(o,u)=>{let c=Bt$1(a,r),p=/^\s*$/.test(c),d="";return p||(d=await o(or$1(c),{parser:s,__embeddedInHtml:!0}),p=d===""),[z$1(a,r),E$1(rt$1(n,r,u)),p?"":S,d,p?"":S,Ze$1(a,r),W(a,r)]}:void 0}break;case"text":if(U$1(a.parent)){let s=cr$1(a.parent,r);if(s)return async o=>{let u=s==="markdown"?pr$1(a.value.replace(/^[^\S\n]*\n/,"")):a.value,c={parser:s,__embeddedInHtml:!0};if(r.parser==="html"&&s==="babel"){let p="script",{attrMap:d}=a.parent;d&&(d.type==="module"||d.type==="text/babel"&&d["data-type"]==="module")&&(p="module"),c.__babelSourceType=p}return[ne$2,z$1(a,r),await o(u,c),W(a,r)]}}else if(a.parent.type==="interpolation")return async s=>{let o={__isInHtmlInterpolation:!0,__embeddedInHtml:!0};return r.parser==="angular"?o.parser="__ng_interpolation":r.parser==="vue"?o.parser=Oe$2(n,r)?"__vue_ts_expression":"__vue_expression":o.parser="__js_expression",[L$1([A,await s(a.value,o)]),a.parent.next&&K$1(a.parent.next)?" ":A]};break;case"attribute":return Xn$1(n,r);case"front-matter":return s=>fn$1(a,s);case"angularControlFlowBlockParameters":return ca$1.has(n.parent.name)?mn$1:void 0}}var es$1=pa$1,nt$1=null;function st$1(n){if(nt$1!==null&&typeof nt$1.property){let r=nt$1;return nt$1=st$1.prototype=null,r}return nt$1=st$1.prototype=n??Object.create(null),new st$1}var ha$1=10;for(let n=0;n<=ha$1;n++)st$1();function Cr$2(n){return st$1(n)}function fa$1(n,r="type"){Cr$2(n);function a(s){let o=s[r],u=n[o];if(!Array.isArray(u))throw Object.assign(new Error(`Missing visitor keys for '${o}'.`),{node:s});return u}return a}var ts$1=fa$1,ma$1={"front-matter":[],root:["children"],element:["attrs","children"],ieConditionalComment:["children"],ieConditionalStartComment:[],ieConditionalEndComment:[],interpolation:["children"],text:["children"],docType:[],comment:[],attribute:[],cdata:[],angularControlFlowBlock:["children","parameters"],angularControlFlowBlockParameters:["children"],angularControlFlowBlockParameter:[],angularIcuExpression:["cases"],angularIcuCase:["expression"]},rs$1=ma$1,da$1=ts$1(rs$1),ns$1=da$1;function ss$1(n){return/^\s*<!--\s*@(?:format|prettier)\s*-->/.test(n)}function is$1(n){return`<!-- @format -->

`+n}var as$1=new Map([["if",new Set(["else if","else"])],["else if",new Set(["else if","else"])],["for",new Set(["empty"])],["defer",new Set(["placeholder","error","loading"])],["placeholder",new Set(["placeholder","error","loading"])],["error",new Set(["placeholder","error","loading"])],["loading",new Set(["placeholder","error","loading"])]]);function os$1(n){let r=ie(n);return n.type==="element"&&!n.endSourceSpan&&Me$1(n.children)?Math.max(r,os$1(X$1(!1,n.children,-1))):r}function it$1(n,r,a){let s=n.node;if(Se$1(s)){let o=os$1(s);return[z$1(s,r),T$1(F$1.trimEnd(r.originalText.slice(se$1(s)+(s.prev&&et$1(s.prev)?xt$1(s).length:0),o-(s.next&&K$1(s.next)?Ae$2(s,r).length:0)))),W(s,r)]}return a()}function Lt$2(n,r){return R$1(n)&&R$1(r)?n.isTrailingSpaceSensitive?n.hasTrailingSpaces?Dt$2(r)?S:A:"":Dt$2(r)?S:v:et$1(n)&&(Se$1(r)||r.firstChild||r.isSelfClosing||r.type==="element"&&r.attrs.length>0)||n.type==="element"&&n.isSelfClosing&&K$1(r)?"":!r.isLeadingSpaceSensitive||Dt$2(r)||K$1(r)&&n.lastChild&&ve$1(n.lastChild)&&n.lastChild.lastChild&&ve$1(n.lastChild.lastChild)?S:r.hasLeadingSpaces?A:v}function qe$1(n,r,a){let{node:s}=n;if(lr$1(s))return[ne$2,...n.map(u=>{let c=u.node,p=c.prev?Lt$2(c.prev,c):"";return[p?[p,Qe$1(c.prev)?S:""]:"",it$1(u,r,a)]},"children")];let o=s.children.map(()=>Symbol(""));return n.map((u,c)=>{let p=u.node;if(R$1(p)){if(p.prev&&R$1(p.prev)){let rc=Lt$2(p.prev,p);if(rc)return Qe$1(p.prev)?[S,S,it$1(u,r,a)]:[rc,it$1(u,r,a)]}return it$1(u,r,a)}let d=[],_=[],ja=[],Ja=[],ec=p.prev?Lt$2(p.prev,p):"",tc=p.next?Lt$2(p,p.next):"";return ec&&(Qe$1(p.prev)?d.push(S,S):ec===S?d.push(S):R$1(p.prev)?_.push(ec):_.push(me$1("",v,{groupId:o[c-1]}))),tc&&(Qe$1(p)?R$1(p.next)&&Ja.push(S,S):tc===S?R$1(p.next)&&Ja.push(S):ja.push(tc)),[...d,E$1([..._,E$1([it$1(u,r,a),...ja],{id:o[c]})]),...Ja]},"children")}function us$2(n,r,a){let{node:s}=n,o=[];ga$1(n)&&o.push("} "),o.push("@",s.name),s.parameters&&o.push(" (",E$1(a("parameters")),")"),o.push(" {");let u=ls$1(s);return s.children.length>0?(s.firstChild.hasLeadingSpaces=!0,s.lastChild.hasTrailingSpaces=!0,o.push(L$1([S,qe$1(n,r,a)])),u&&o.push(S,"}")):u&&o.push("}"),E$1(o,{shouldBreak:!0})}function ls$1(n){var r,a;return!(((r=n.next)==null?void 0:r.type)==="angularControlFlowBlock"&&(a=as$1.get(n.name))!=null&&a.has(n.next.name))}function ga$1(n){let{previous:r}=n;return(r==null?void 0:r.type)==="angularControlFlowBlock"&&!Se$1(r)&&!ls$1(r)}function cs$1(n,r,a){return[L$1([v,M$1([";",A],n.map(a,"children"))]),v]}function ps$2(n,r,a){let{node:s}=n;return[ye$1(s,r),E$1([s.switchValue.trim(),", ",s.clause,s.cases.length>0?[",",L$1([A,M$1(A,n.map(a,"cases"))])]:"",v]),Ee$1(s,r)]}function hs$1(n,r,a){let{node:s}=n;return[s.value," {",E$1([L$1([v,n.map(({node:o})=>o.type==="text"&&!F$1.trim(o.value)?"":a(),"expression")]),v]),"}"]}function fs$2(n,r,a){let{node:s}=n;if(At$1(s,r))return[z$1(s,r),E$1(rt$1(n,r,a)),T$1(Bt$1(s,r)),...Ze$1(s,r),W(s,r)];let o=s.children.length===1&&(s.firstChild.type==="interpolation"||s.firstChild.type==="angularIcuExpression")&&s.firstChild.isLeadingSpaceSensitive&&!s.firstChild.hasLeadingSpaces&&s.lastChild.isTrailingSpaceSensitive&&!s.lastChild.hasTrailingSpaces,u=Symbol("element-attr-group-id"),c=ja=>E$1([E$1(rt$1(n,r,a),{id:u}),ja,Ze$1(s,r)]),p=ja=>o?nn$1(ja,{groupId:u}):(U$1(s)||Je$1(s,r))&&s.parent.type==="root"&&r.parser==="vue"&&!r.vueIndentScriptAndStyle?ja:L$1(ja),d=()=>o?me$1(v,"",{groupId:u}):s.firstChild.hasLeadingSpaces&&s.firstChild.isLeadingSpaceSensitive?A:s.firstChild.type==="text"&&s.isWhitespaceSensitive&&s.isIndentationSensitive?tn$1(v):v,_=()=>(s.next?K$1(s.next):De$1(s.parent))?s.lastChild.hasTrailingSpaces&&s.lastChild.isTrailingSpaceSensitive?" ":"":o?me$1(v,"",{groupId:u}):s.lastChild.hasTrailingSpaces&&s.lastChild.isTrailingSpaceSensitive?A:(s.lastChild.type==="comment"||s.lastChild.type==="text"&&s.isWhitespaceSensitive&&s.isIndentationSensitive)&&new RegExp(`\\n[\\t ]{${r.tabWidth*(n.ancestors.length-1)}}$`).test(s.lastChild.value)?"":v;return s.children.length===0?c(s.hasDanglingSpaces&&s.isDanglingSpaceSensitive?A:""):c([bn$1(s)?ne$2:"",p([d(),qe$1(n,r,a)]),_()])}function Ft$1(n){return n>=9&&n<=32||n==160}function Sr$2(n){return 48<=n&&n<=57}function Pt$1(n){return n>=97&&n<=122||n>=65&&n<=90}function ms$2(n){return n>=97&&n<=102||n>=65&&n<=70||Sr$2(n)}function _r$1(n){return n===10||n===13}function Er$2(n){return 48<=n&&n<=55}function Ar$1(n){return n===39||n===34||n===96}var Ca$1=/-+([a-z0-9])/g;function gs$2(n){return n.replace(Ca$1,(...r)=>r[1].toUpperCase())}var ae$2=class If{constructor(r,a,s,o){this.file=r,this.offset=a,this.line=s,this.col=o}toString(){return this.offset!=null?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(r){let a=this.file.content,s=a.length,o=this.offset,u=this.line,c=this.col;for(;o>0&&r<0;)if(o--,r++,a.charCodeAt(o)==10){u--;let p=a.substring(0,o-1).lastIndexOf(`
`);c=p>0?o-p:o}else c--;for(;o<s&&r>0;){let p=a.charCodeAt(o);o++,r--,p==10?(u++,c=0):c++}return new If(this.file,o,u,c)}getContext(r,a){let s=this.file.content,o=this.offset;if(o!=null){o>s.length-1&&(o=s.length-1);let u=o,c=0,p=0;for(;c<r&&o>0&&(o--,c++,!(s[o]==`
`&&++p==a)););for(c=0,p=0;c<r&&u<s.length-1&&(u++,c++,!(s[u]==`
`&&++p==a)););return{before:s.substring(o,this.offset),after:s.substring(this.offset,u+1)}}return null}},we$1=class{constructor(r,a){this.content=r,this.url=a}},f$1=class{constructor(r,a,s=r,o=null){this.start=r,this.end=a,this.fullStart=s,this.details=o}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}},Nt$2;(function(n){n[n.WARNING=0]="WARNING",n[n.ERROR=1]="ERROR"})(Nt$2||(Nt$2={}));var Ve$1=class{constructor(r,a,s=Nt$2.ERROR){this.span=r,this.msg=a,this.level=s}contextualMessage(){let r=this.span.start.getContext(100,3);return r?`${this.msg} ("${r.before}[${Nt$2[this.level]} ->]${r.after}")`:this.msg}toString(){let r=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${r}`}},Sa$1=[Ea$1,Aa$1,va$1,wa$1,ba$1,ka$1,Ta$1,xa$1,Ba$1,ya$1];function _a$2(n,r){for(let a of Sa$1)a(n,r);return n}function Ea$1(n){n.walk(r=>{if(r.type==="element"&&r.tagDefinition.ignoreFirstLf&&r.children.length>0&&r.children[0].type==="text"&&r.children[0].value[0]===`
`){let a=r.children[0];a.value.length===1?r.removeChild(a):a.value=a.value.slice(1)}})}function Aa$1(n){let r=a=>{var s,o;return a.type==="element"&&((s=a.prev)==null?void 0:s.type)==="ieConditionalStartComment"&&a.prev.sourceSpan.end.offset===a.startSourceSpan.start.offset&&((o=a.firstChild)==null?void 0:o.type)==="ieConditionalEndComment"&&a.firstChild.sourceSpan.start.offset===a.startSourceSpan.end.offset};n.walk(a=>{if(a.children)for(let s=0;s<a.children.length;s++){let o=a.children[s];if(!r(o))continue;let u=o.prev,c=o.firstChild;a.removeChild(u),s--;let p=new f$1(u.sourceSpan.start,c.sourceSpan.end),d=new f$1(p.start,o.sourceSpan.end);o.condition=u.condition,o.sourceSpan=d,o.startSourceSpan=p,o.removeChild(c)}})}function Da$1(n,r,a){n.walk(s=>{if(s.children)for(let o=0;o<s.children.length;o++){let u=s.children[o];if(u.type!=="text"&&!r(u))continue;u.type!=="text"&&(u.type="text",u.value=a(u));let c=u.prev;!c||c.type!=="text"||(c.value+=u.value,c.sourceSpan=new f$1(c.sourceSpan.start,u.sourceSpan.end),s.removeChild(u),o--)}})}function va$1(n){return Da$1(n,r=>r.type==="cdata",r=>`<![CDATA[${r.value}]]>`)}function ya$1(n){let r=a=>{var s,o;return a.type==="element"&&a.attrs.length===0&&a.children.length===1&&a.firstChild.type==="text"&&!F$1.hasWhitespaceCharacter(a.children[0].value)&&!a.firstChild.hasLeadingSpaces&&!a.firstChild.hasTrailingSpaces&&a.isLeadingSpaceSensitive&&!a.hasLeadingSpaces&&a.isTrailingSpaceSensitive&&!a.hasTrailingSpaces&&((s=a.prev)==null?void 0:s.type)==="text"&&((o=a.next)==null?void 0:o.type)==="text"};n.walk(a=>{if(a.children)for(let s=0;s<a.children.length;s++){let o=a.children[s];if(!r(o))continue;let u=o.prev,c=o.next;u.value+=`<${o.rawName}>`+o.firstChild.value+`</${o.rawName}>`+c.value,u.sourceSpan=new f$1(u.sourceSpan.start,c.sourceSpan.end),u.isTrailingSpaceSensitive=c.isTrailingSpaceSensitive,u.hasTrailingSpaces=c.hasTrailingSpaces,a.removeChild(o),s--,a.removeChild(c)}})}function wa$1(n,r){if(r.parser==="html")return;let a=/{{(.+?)}}/s;n.walk(s=>{if(An$1(s))for(let o of s.children){if(o.type!=="text")continue;let u=o.sourceSpan.start,c=null,p=o.value.split(a);for(let d=0;d<p.length;d++,u=c){let _=p[d];if(d%2===0){c=u.moveBy(_.length),_.length>0&&s.insertChildBefore(o,{type:"text",value:_,sourceSpan:new f$1(u,c)});continue}c=u.moveBy(_.length+4),s.insertChildBefore(o,{type:"interpolation",sourceSpan:new f$1(u,c),children:_.length===0?[]:[{type:"text",value:_,sourceSpan:new f$1(u.moveBy(2),c.moveBy(-2))}]})}s.removeChild(o)}})}function ba$1(n){n.walk(r=>{if(!r.children)return;if(r.children.length===0||r.children.length===1&&r.children[0].type==="text"&&F$1.trim(r.children[0].value).length===0){r.hasDanglingSpaces=r.children.length>0,r.children=[];return}let a=Dn$1(r),s=ur$1(r);if(!a)for(let o=0;o<r.children.length;o++){let u=r.children[o];if(u.type!=="text")continue;let{leadingWhitespace:c,text:p,trailingWhitespace:d}=En$1(u.value),_=u.prev,ja=u.next;p?(u.value=p,u.sourceSpan=new f$1(u.sourceSpan.start.moveBy(c.length),u.sourceSpan.end.moveBy(-d.length)),c&&(_&&(_.hasTrailingSpaces=!0),u.hasLeadingSpaces=!0),d&&(u.hasTrailingSpaces=!0,ja&&(ja.hasLeadingSpaces=!0))):(r.removeChild(u),o--,(c||d)&&(_&&(_.hasTrailingSpaces=!0),ja&&(ja.hasLeadingSpaces=!0)))}r.isWhitespaceSensitive=a,r.isIndentationSensitive=s})}function Ta$1(n){n.walk(r=>{r.isSelfClosing=!r.children||r.type==="element"&&(r.tagDefinition.isVoid||r.endSourceSpan&&r.startSourceSpan.start===r.endSourceSpan.start&&r.startSourceSpan.end===r.endSourceSpan.end)})}function xa$1(n,r){n.walk(a=>{a.type==="element"&&(a.hasHtmComponentClosingTag=a.endSourceSpan&&/^<\s*\/\s*\/\s*>$/.test(r.originalText.slice(a.endSourceSpan.start.offset,a.endSourceSpan.end.offset)))})}function ka$1(n,r){n.walk(a=>{a.cssDisplay=Fn$1(a,r)})}function Ba$1(n,r){n.walk(a=>{let{children:s}=a;if(s){if(s.length===0){a.isDanglingSpaceSensitive=wn$1(a);return}for(let o of s)o.isLeadingSpaceSensitive=vn$1(o,r),o.isTrailingSpaceSensitive=yn$1(o,r);for(let o=0;o<s.length;o++){let u=s[o];u.isLeadingSpaceSensitive=(o===0||u.prev.isTrailingSpaceSensitive)&&u.isLeadingSpaceSensitive,u.isTrailingSpaceSensitive=(o===s.length-1||u.next.isLeadingSpaceSensitive)&&u.isTrailingSpaceSensitive}}})}var Cs$1=_a$2;function La$1(n,r,a){let{node:s}=n;switch(s.type){case"front-matter":return T$1(s.raw);case"root":return r.__onHtmlRoot&&r.__onHtmlRoot(s),[E$1(qe$1(n,r,a)),S];case"element":case"ieConditionalComment":return fs$2(n,r,a);case"angularControlFlowBlock":return us$2(n,r,a);case"angularControlFlowBlockParameters":return cs$1(n,r,a);case"angularControlFlowBlockParameter":return F$1.trim(s.expression);case"angularIcuExpression":return ps$2(n,r,a);case"angularIcuCase":return hs$1(n,r,a);case"ieConditionalStartComment":case"ieConditionalEndComment":return[ye$1(s),Ee$1(s)];case"interpolation":return[ye$1(s,r),...n.map(a,"children"),Ee$1(s,r)];case"text":{if(s.parent.type==="interpolation"){let u=/\n[^\S\n]*$/,c=u.test(s.value),p=c?s.value.replace(u,""):s.value;return[T$1(p),c?S:""]}let o=an$1([z$1(s,r),...wt$1(s),W(s,r)]);return Array.isArray(o)?St$1(o):o}case"docType":return[E$1([ye$1(s,r)," ",w$1(!1,s.value.replace(/^html\b/i,"html"),/\s+/g," ")]),Ee$1(s,r)];case"comment":return[z$1(s,r),T$1(r.originalText.slice(se$1(s),ie(s))),W(s,r)];case"attribute":{if(s.value===null)return s.rawName;let o=hr$1(s.value),u=un$1(o,'"');return[s.rawName,"=",u,T$1(u==='"'?w$1(!1,o,'"',"&quot;"):w$1(!1,o,"'","&apos;")),u]}case"cdata":default:throw new cn$1(s,"HTML")}}var Fa$1={preprocess:Cs$1,print:La$1,insertPragma:is$1,massageAstNode:hn$1,embed:es$1,getVisitorKeys:ns$1},Ss$2=Fa$1,_s$2=[{linguistLanguageId:146,name:"Angular",type:"markup",tmScope:"text.html.basic",aceMode:"html",codemirrorMode:"htmlmixed",codemirrorMimeType:"text/html",color:"#e34c26",aliases:["xhtml"],extensions:[".component.html"],parsers:["angular"],vscodeLanguageIds:["html"],filenames:[]},{linguistLanguageId:146,name:"HTML",type:"markup",tmScope:"text.html.basic",aceMode:"html",codemirrorMode:"htmlmixed",codemirrorMimeType:"text/html",color:"#e34c26",aliases:["xhtml"],extensions:[".html",".hta",".htm",".html.hl",".inc",".xht",".xhtml",".mjml"],parsers:["html"],vscodeLanguageIds:["html"]},{linguistLanguageId:146,name:"Lightning Web Components",type:"markup",tmScope:"text.html.basic",aceMode:"html",codemirrorMode:"htmlmixed",codemirrorMimeType:"text/html",color:"#e34c26",aliases:["xhtml"],extensions:[],parsers:["lwc"],vscodeLanguageIds:["html"],filenames:[]},{linguistLanguageId:391,name:"Vue",type:"markup",color:"#41b883",extensions:[".vue"],tmScope:"text.html.vue",aceMode:"html",parsers:["vue"],vscodeLanguageIds:["vue"]}],Dr$2={bracketSpacing:{category:"Common",type:"boolean",default:!0,description:"Print spaces between brackets.",oppositeDescription:"Do not print spaces between brackets."},singleQuote:{category:"Common",type:"boolean",default:!1,description:"Use single quotes instead of double quotes."},proseWrap:{category:"Common",type:"choice",default:"preserve",description:"How to wrap prose.",choices:[{value:"always",description:"Wrap prose if it exceeds the print width."},{value:"never",description:"Do not wrap prose."},{value:"preserve",description:"Wrap prose as-is."}]},bracketSameLine:{category:"Common",type:"boolean",default:!1,description:"Put > of opening tags on the last line instead of on a new line."},singleAttributePerLine:{category:"Common",type:"boolean",default:!1,description:"Enforce single attribute per line in HTML, Vue and JSX."}},Es$1="HTML",Pa$1={bracketSameLine:Dr$2.bracketSameLine,htmlWhitespaceSensitivity:{category:Es$1,type:"choice",default:"css",description:"How to handle whitespaces in HTML.",choices:[{value:"css",description:"Respect the default value of CSS display property."},{value:"strict",description:"Whitespaces are considered sensitive."},{value:"ignore",description:"Whitespaces are considered insensitive."}]},singleAttributePerLine:Dr$2.singleAttributePerLine,vueIndentScriptAndStyle:{category:Es$1,type:"boolean",default:!1,description:"Indent script and style tags in Vue files."}},As$2=Pa$1,Ur$1={};Kr$2(Ur$1,{angular:()=>Bo$1,html:()=>ko$1,lwc:()=>Fo$1,vue:()=>Lo$1});var Ds$2;(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"})(Ds$2||(Ds$2={}));var vs$1;(function(n){n[n.OnPush=0]="OnPush",n[n.Default=1]="Default"})(vs$1||(vs$1={}));var vr$2={name:"custom-elements"},yr$1={name:"no-errors-schema"},J;(function(n){n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL"})(J||(J={}));var ys$2;(function(n){n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Ignore=2]="Ignore"})(ys$2||(ys$2={}));var N$1;(function(n){n[n.RAW_TEXT=0]="RAW_TEXT",n[n.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",n[n.PARSABLE_DATA=2]="PARSABLE_DATA"})(N$1||(N$1={}));function at$1(n){if(n[0]!=":")return[null,n];let r=n.indexOf(":",1);if(r===-1)throw new Error(`Unsupported format "${n}" expecting ":namespace:name"`);return[n.slice(1,r),n.slice(r+1)]}function wr$2(n){return at$1(n)[1]==="ng-container"}function br$2(n){return at$1(n)[1]==="ng-content"}function Ue$2(n){return n===null?null:at$1(n)[0]}function We(n,r){return n?`:${n}:${r}`:r}var Rt$1;function Tr$2(){return Rt$1||(Rt$1={},It$2(J.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),It$2(J.STYLE,["*|style"]),It$2(J.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","input|src","ins|cite","q|cite","source|src","track|src","video|poster","video|src"]),It$2(J.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),Rt$1}function It$2(n,r){for(let a of r)Rt$1[a.toLowerCase()]=n}var $t$1=class{},Na$1="boolean",Ia$1="number",Ra="string",$a$1="object",Oa$1=["[Element]|textContent,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColSpan,%ariaCurrent,%ariaDescription,%ariaDisabled,%ariaExpanded,%ariaHasPopup,%ariaHidden,%ariaKeyShortcuts,%ariaLabel,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|"],ws$2=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"})),Ma=Array.from(ws$2).reduce((n,[r,a])=>(n.set(r,a),n),new Map),Ot$1=class extends $t$1{constructor(){super(),this._schema=new Map,this._eventSchema=new Map,Oa$1.forEach(r=>{let a=new Map,s=new Set,[o,u]=r.split("|"),c=u.split(","),[p,d]=o.split("^");p.split(",").forEach(ja=>{this._schema.set(ja.toLowerCase(),a),this._eventSchema.set(ja.toLowerCase(),s)});let _=d&&this._schema.get(d.toLowerCase());if(_){for(let[ja,Ja]of _)a.set(ja,Ja);for(let ja of this._eventSchema.get(d.toLowerCase()))s.add(ja)}c.forEach(ja=>{if(ja.length>0)switch(ja[0]){case"*":s.add(ja.substring(1));break;case"!":a.set(ja.substring(1),Na$1);break;case"#":a.set(ja.substring(1),Ia$1);break;case"%":a.set(ja.substring(1),$a$1);break;default:a.set(ja,Ra)}})})}hasProperty(r,a,s){if(s.some(o=>o.name===yr$1.name))return!0;if(r.indexOf("-")>-1){if(wr$2(r)||br$2(r))return!1;if(s.some(o=>o.name===vr$2.name))return!0}return(this._schema.get(r.toLowerCase())||this._schema.get("unknown")).has(a)}hasElement(r,a){return a.some(s=>s.name===yr$1.name)||r.indexOf("-")>-1&&(wr$2(r)||br$2(r)||a.some(s=>s.name===vr$2.name))?!0:this._schema.has(r.toLowerCase())}securityContext(r,a,s){s&&(a=this.getMappedPropName(a)),r=r.toLowerCase(),a=a.toLowerCase();let o=Tr$2()[r+"|"+a];return o||(o=Tr$2()["*|"+a],o||J.NONE)}getMappedPropName(r){return ws$2.get(r)??r}getDefaultComponentElementName(){return"ng-component"}validateProperty(r){return r.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${r}' is disallowed for security reasons, please use (${r.slice(2)})=...
If '${r}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(r){return r.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${r}' is disallowed for security reasons, please use (${r.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(r){let a=this._schema.get(r.toLowerCase())||this._schema.get("unknown");return Array.from(a.keys()).map(s=>Ma.get(s)??s)}allKnownEventsOfElement(r){return Array.from(this._eventSchema.get(r.toLowerCase())??[])}normalizeAnimationStyleProperty(r){return gs$2(r)}normalizeAnimationStyleValue(r,a,s){let o="",u=s.toString().trim(),c=null;if(qa$1(r)&&s!==0&&s!=="0")if(typeof s=="number")o="px";else{let p=s.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&p[1].length==0&&(c=`Please provide a CSS unit value for ${a}:${s}`)}return{error:c,value:u+o}}};function qa$1(n){switch(n){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}var h=class{constructor({closedByChildren:n,implicitNamespacePrefix:r,contentType:a=N$1.PARSABLE_DATA,closedByParent:s=!1,isVoid:o=!1,ignoreFirstLf:u=!1,preventNamespaceInheritance:c=!1,canSelfClose:p=!1}={}){this.closedByChildren={},this.closedByParent=!1,n&&n.length>0&&n.forEach(d=>this.closedByChildren[d]=!0),this.isVoid=o,this.closedByParent=s||o,this.implicitNamespacePrefix=r||null,this.contentType=a,this.ignoreFirstLf=u,this.preventNamespaceInheritance=c,this.canSelfClose=p??o}isClosedByChild(n){return this.isVoid||n.toLowerCase()in this.closedByChildren}getContentType(n){return typeof this.contentType=="object"?(n===void 0?void 0:this.contentType[n])??this.contentType.default:this.contentType}},bs$2,ot$1;function ze$1(n){return ot$1||(bs$2=new h({canSelfClose:!0}),ot$1=Object.assign(Object.create(null),{base:new h({isVoid:!0}),meta:new h({isVoid:!0}),area:new h({isVoid:!0}),embed:new h({isVoid:!0}),link:new h({isVoid:!0}),img:new h({isVoid:!0}),input:new h({isVoid:!0}),param:new h({isVoid:!0}),hr:new h({isVoid:!0}),br:new h({isVoid:!0}),source:new h({isVoid:!0}),track:new h({isVoid:!0}),wbr:new h({isVoid:!0}),p:new h({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new h({closedByChildren:["tbody","tfoot"]}),tbody:new h({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new h({closedByChildren:["tbody"],closedByParent:!0}),tr:new h({closedByChildren:["tr"],closedByParent:!0}),td:new h({closedByChildren:["td","th"],closedByParent:!0}),th:new h({closedByChildren:["td","th"],closedByParent:!0}),col:new h({isVoid:!0}),svg:new h({implicitNamespacePrefix:"svg"}),foreignObject:new h({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new h({implicitNamespacePrefix:"math"}),li:new h({closedByChildren:["li"],closedByParent:!0}),dt:new h({closedByChildren:["dt","dd"]}),dd:new h({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new h({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new h({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new h({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new h({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new h({closedByChildren:["optgroup"],closedByParent:!0}),option:new h({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new h({ignoreFirstLf:!0}),listing:new h({ignoreFirstLf:!0}),style:new h({contentType:N$1.RAW_TEXT}),script:new h({contentType:N$1.RAW_TEXT}),title:new h({contentType:{default:N$1.ESCAPABLE_RAW_TEXT,svg:N$1.PARSABLE_DATA}}),textarea:new h({contentType:N$1.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),new Ot$1().allKnownElementNames().forEach(r=>{!ot$1[r]&&Ue$2(r)===null&&(ot$1[r]=new h({canSelfClose:!1}))})),ot$1[n]??bs$2}var be$2=class{constructor(r,a){this.sourceSpan=r,this.i18n=a}},Mt$1=class extends be$2{constructor(r,a,s,o){super(a,o),this.value=r,this.tokens=s,this.type="text"}visit(r,a){return r.visitText(this,a)}},qt$1=class extends be$2{constructor(r,a,s,o){super(a,o),this.value=r,this.tokens=s,this.type="cdata"}visit(r,a){return r.visitCdata(this,a)}},Ht$1=class extends be$2{constructor(r,a,s,o,u,c){super(o,c),this.switchValue=r,this.type=a,this.cases=s,this.switchValueSourceSpan=u}visit(r,a){return r.visitExpansion(this,a)}},Vt$1=class{constructor(r,a,s,o,u){this.value=r,this.expression=a,this.sourceSpan=s,this.valueSourceSpan=o,this.expSourceSpan=u,this.type="expansionCase"}visit(r,a){return r.visitExpansionCase(this,a)}},Ut$1=class extends be$2{constructor(r,a,s,o,u,c,p){super(s,p),this.name=r,this.value=a,this.keySpan=o,this.valueSpan=u,this.valueTokens=c,this.type="attribute"}visit(r,a){return r.visitAttribute(this,a)}get nameSpan(){return this.keySpan}},G=class extends be$2{constructor(n,r,a,s,o,u=null,c=null,p){super(s,p),this.name=n,this.attrs=r,this.children=a,this.startSourceSpan=o,this.endSourceSpan=u,this.nameSpan=c,this.type="element"}visit(n,r){return n.visitElement(this,r)}},Wt$1=class{constructor(r,a){this.value=r,this.sourceSpan=a,this.type="comment"}visit(r,a){return r.visitComment(this,a)}},zt=class{constructor(n,r){this.value=n,this.sourceSpan=r,this.type="docType"}visit(n,r){return n.visitDocType(this,r)}},Z=class{constructor(n,r,a,s,o,u=null){this.name=n,this.parameters=r,this.children=a,this.sourceSpan=s,this.startSourceSpan=o,this.endSourceSpan=u,this.type="block"}visit(n,r){return n.visitBlock(this,r)}},ut$1=class{constructor(r,a){this.expression=r,this.sourceSpan=a,this.type="blockParameter",this.startSourceSpan=null,this.endSourceSpan=null}visit(r,a){return r.visitBlockParameter(this,a)}};function Gt$1(n,r,a=null){let s=[],o=n.visit?u=>n.visit(u,a)||u.visit(n,a):u=>u.visit(n,a);return r.forEach(u=>{let c=o(u);c&&s.push(c)}),s}var lt$1=class{constructor(){}visitElement(r,a){this.visitChildren(a,s=>{s(r.attrs),s(r.children)})}visitAttribute(r,a){}visitText(r,a){}visitCdata(r,a){}visitComment(r,a){}visitDocType(r,a){}visitExpansion(r,a){return this.visitChildren(a,s=>{s(r.cases)})}visitExpansionCase(r,a){}visitBlock(r,a){this.visitChildren(a,s=>{s(r.parameters),s(r.children)})}visitBlockParameter(r,a){}visitChildren(r,a){let s=[],o=this;function u(c){c&&s.push(Gt$1(o,c,r))}return a(u),Array.prototype.concat.apply([],s)}},Ge$1={AElig:"Æ",AMP:"&",amp:"&",Aacute:"Á",Abreve:"Ă",Acirc:"Â",Acy:"А",Afr:"𝔄",Agrave:"À",Alpha:"Α",Amacr:"Ā",And:"⩓",Aogon:"Ą",Aopf:"𝔸",ApplyFunction:"⁡",af:"⁡",Aring:"Å",angst:"Å",Ascr:"𝒜",Assign:"≔",colone:"≔",coloneq:"≔",Atilde:"Ã",Auml:"Ä",Backslash:"∖",setminus:"∖",setmn:"∖",smallsetminus:"∖",ssetmn:"∖",Barv:"⫧",Barwed:"⌆",doublebarwedge:"⌆",Bcy:"Б",Because:"∵",becaus:"∵",because:"∵",Bernoullis:"ℬ",Bscr:"ℬ",bernou:"ℬ",Beta:"Β",Bfr:"𝔅",Bopf:"𝔹",Breve:"˘",breve:"˘",Bumpeq:"≎",HumpDownHump:"≎",bump:"≎",CHcy:"Ч",COPY:"©",copy:"©",Cacute:"Ć",Cap:"⋒",CapitalDifferentialD:"ⅅ",DD:"ⅅ",Cayleys:"ℭ",Cfr:"ℭ",Ccaron:"Č",Ccedil:"Ç",Ccirc:"Ĉ",Cconint:"∰",Cdot:"Ċ",Cedilla:"¸",cedil:"¸",CenterDot:"·",centerdot:"·",middot:"·",Chi:"Χ",CircleDot:"⊙",odot:"⊙",CircleMinus:"⊖",ominus:"⊖",CirclePlus:"⊕",oplus:"⊕",CircleTimes:"⊗",otimes:"⊗",ClockwiseContourIntegral:"∲",cwconint:"∲",CloseCurlyDoubleQuote:"”",rdquo:"”",rdquor:"”",CloseCurlyQuote:"’",rsquo:"’",rsquor:"’",Colon:"∷",Proportion:"∷",Colone:"⩴",Congruent:"≡",equiv:"≡",Conint:"∯",DoubleContourIntegral:"∯",ContourIntegral:"∮",conint:"∮",oint:"∮",Copf:"ℂ",complexes:"ℂ",Coproduct:"∐",coprod:"∐",CounterClockwiseContourIntegral:"∳",awconint:"∳",Cross:"⨯",Cscr:"𝒞",Cup:"⋓",CupCap:"≍",asympeq:"≍",DDotrahd:"⤑",DJcy:"Ђ",DScy:"Ѕ",DZcy:"Џ",Dagger:"‡",ddagger:"‡",Darr:"↡",Dashv:"⫤",DoubleLeftTee:"⫤",Dcaron:"Ď",Dcy:"Д",Del:"∇",nabla:"∇",Delta:"Δ",Dfr:"𝔇",DiacriticalAcute:"´",acute:"´",DiacriticalDot:"˙",dot:"˙",DiacriticalDoubleAcute:"˝",dblac:"˝",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"˜",tilde:"˜",Diamond:"⋄",diam:"⋄",diamond:"⋄",DifferentialD:"ⅆ",dd:"ⅆ",Dopf:"𝔻",Dot:"¨",DoubleDot:"¨",die:"¨",uml:"¨",DotDot:"⃜",DotEqual:"≐",doteq:"≐",esdot:"≐",DoubleDownArrow:"⇓",Downarrow:"⇓",dArr:"⇓",DoubleLeftArrow:"⇐",Leftarrow:"⇐",lArr:"⇐",DoubleLeftRightArrow:"⇔",Leftrightarrow:"⇔",hArr:"⇔",iff:"⇔",DoubleLongLeftArrow:"⟸",Longleftarrow:"⟸",xlArr:"⟸",DoubleLongLeftRightArrow:"⟺",Longleftrightarrow:"⟺",xhArr:"⟺",DoubleLongRightArrow:"⟹",Longrightarrow:"⟹",xrArr:"⟹",DoubleRightArrow:"⇒",Implies:"⇒",Rightarrow:"⇒",rArr:"⇒",DoubleRightTee:"⊨",vDash:"⊨",DoubleUpArrow:"⇑",Uparrow:"⇑",uArr:"⇑",DoubleUpDownArrow:"⇕",Updownarrow:"⇕",vArr:"⇕",DoubleVerticalBar:"∥",par:"∥",parallel:"∥",shortparallel:"∥",spar:"∥",DownArrow:"↓",ShortDownArrow:"↓",darr:"↓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",duarr:"⇵",DownBreve:"̑",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",leftharpoondown:"↽",lhard:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",rhard:"⇁",rightharpoondown:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",top:"⊤",DownTeeArrow:"↧",mapstodown:"↧",Dscr:"𝒟",Dstrok:"Đ",ENG:"Ŋ",ETH:"Ð",Eacute:"É",Ecaron:"Ě",Ecirc:"Ê",Ecy:"Э",Edot:"Ė",Efr:"𝔈",Egrave:"È",Element:"∈",in:"∈",isin:"∈",isinv:"∈",Emacr:"Ē",EmptySmallSquare:"◻",EmptyVerySmallSquare:"▫",Eogon:"Ę",Eopf:"𝔼",Epsilon:"Ε",Equal:"⩵",EqualTilde:"≂",eqsim:"≂",esim:"≂",Equilibrium:"⇌",rightleftharpoons:"⇌",rlhar:"⇌",Escr:"ℰ",expectation:"ℰ",Esim:"⩳",Eta:"Η",Euml:"Ë",Exists:"∃",exist:"∃",ExponentialE:"ⅇ",ee:"ⅇ",exponentiale:"ⅇ",Fcy:"Ф",Ffr:"𝔉",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",blacksquare:"▪",squarf:"▪",squf:"▪",Fopf:"𝔽",ForAll:"∀",forall:"∀",Fouriertrf:"ℱ",Fscr:"ℱ",GJcy:"Ѓ",GT:">",gt:">",Gamma:"Γ",Gammad:"Ϝ",Gbreve:"Ğ",Gcedil:"Ģ",Gcirc:"Ĝ",Gcy:"Г",Gdot:"Ġ",Gfr:"𝔊",Gg:"⋙",ggg:"⋙",Gopf:"𝔾",GreaterEqual:"≥",ge:"≥",geq:"≥",GreaterEqualLess:"⋛",gel:"⋛",gtreqless:"⋛",GreaterFullEqual:"≧",gE:"≧",geqq:"≧",GreaterGreater:"⪢",GreaterLess:"≷",gl:"≷",gtrless:"≷",GreaterSlantEqual:"⩾",geqslant:"⩾",ges:"⩾",GreaterTilde:"≳",gsim:"≳",gtrsim:"≳",Gscr:"𝒢",Gt:"≫",NestedGreaterGreater:"≫",gg:"≫",HARDcy:"Ъ",Hacek:"ˇ",caron:"ˇ",Hat:"^",Hcirc:"Ĥ",Hfr:"ℌ",Poincareplane:"ℌ",HilbertSpace:"ℋ",Hscr:"ℋ",hamilt:"ℋ",Hopf:"ℍ",quaternions:"ℍ",HorizontalLine:"─",boxh:"─",Hstrok:"Ħ",HumpEqual:"≏",bumpe:"≏",bumpeq:"≏",IEcy:"Е",IJlig:"Ĳ",IOcy:"Ё",Iacute:"Í",Icirc:"Î",Icy:"И",Idot:"İ",Ifr:"ℑ",Im:"ℑ",image:"ℑ",imagpart:"ℑ",Igrave:"Ì",Imacr:"Ī",ImaginaryI:"ⅈ",ii:"ⅈ",Int:"∬",Integral:"∫",int:"∫",Intersection:"⋂",bigcap:"⋂",xcap:"⋂",InvisibleComma:"⁣",ic:"⁣",InvisibleTimes:"⁢",it:"⁢",Iogon:"Į",Iopf:"𝕀",Iota:"Ι",Iscr:"ℐ",imagline:"ℐ",Itilde:"Ĩ",Iukcy:"І",Iuml:"Ï",Jcirc:"Ĵ",Jcy:"Й",Jfr:"𝔍",Jopf:"𝕁",Jscr:"𝒥",Jsercy:"Ј",Jukcy:"Є",KHcy:"Х",KJcy:"Ќ",Kappa:"Κ",Kcedil:"Ķ",Kcy:"К",Kfr:"𝔎",Kopf:"𝕂",Kscr:"𝒦",LJcy:"Љ",LT:"<",lt:"<",Lacute:"Ĺ",Lambda:"Λ",Lang:"⟪",Laplacetrf:"ℒ",Lscr:"ℒ",lagran:"ℒ",Larr:"↞",twoheadleftarrow:"↞",Lcaron:"Ľ",Lcedil:"Ļ",Lcy:"Л",LeftAngleBracket:"⟨",lang:"⟨",langle:"⟨",LeftArrow:"←",ShortLeftArrow:"←",larr:"←",leftarrow:"←",slarr:"←",LeftArrowBar:"⇤",larrb:"⇤",LeftArrowRightArrow:"⇆",leftrightarrows:"⇆",lrarr:"⇆",LeftCeiling:"⌈",lceil:"⌈",LeftDoubleBracket:"⟦",lobrk:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",dharl:"⇃",downharpoonleft:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",lfloor:"⌊",LeftRightArrow:"↔",harr:"↔",leftrightarrow:"↔",LeftRightVector:"⥎",LeftTee:"⊣",dashv:"⊣",LeftTeeArrow:"↤",mapstoleft:"↤",LeftTeeVector:"⥚",LeftTriangle:"⊲",vartriangleleft:"⊲",vltri:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",ltrie:"⊴",trianglelefteq:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",uharl:"↿",upharpoonleft:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",leftharpoonup:"↼",lharu:"↼",LeftVectorBar:"⥒",LessEqualGreater:"⋚",leg:"⋚",lesseqgtr:"⋚",LessFullEqual:"≦",lE:"≦",leqq:"≦",LessGreater:"≶",lessgtr:"≶",lg:"≶",LessLess:"⪡",LessSlantEqual:"⩽",leqslant:"⩽",les:"⩽",LessTilde:"≲",lesssim:"≲",lsim:"≲",Lfr:"𝔏",Ll:"⋘",Lleftarrow:"⇚",lAarr:"⇚",Lmidot:"Ŀ",LongLeftArrow:"⟵",longleftarrow:"⟵",xlarr:"⟵",LongLeftRightArrow:"⟷",longleftrightarrow:"⟷",xharr:"⟷",LongRightArrow:"⟶",longrightarrow:"⟶",xrarr:"⟶",Lopf:"𝕃",LowerLeftArrow:"↙",swarr:"↙",swarrow:"↙",LowerRightArrow:"↘",searr:"↘",searrow:"↘",Lsh:"↰",lsh:"↰",Lstrok:"Ł",Lt:"≪",NestedLessLess:"≪",ll:"≪",Map:"⤅",Mcy:"М",MediumSpace:" ",Mellintrf:"ℳ",Mscr:"ℳ",phmmat:"ℳ",Mfr:"𝔐",MinusPlus:"∓",mnplus:"∓",mp:"∓",Mopf:"𝕄",Mu:"Μ",NJcy:"Њ",Nacute:"Ń",Ncaron:"Ň",Ncedil:"Ņ",Ncy:"Н",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",ZeroWidthSpace:"​",NewLine:`
`,Nfr:"𝔑",NoBreak:"⁠",NonBreakingSpace:" ",nbsp:" ",Nopf:"ℕ",naturals:"ℕ",Not:"⫬",NotCongruent:"≢",nequiv:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",npar:"∦",nparallel:"∦",nshortparallel:"∦",nspar:"∦",NotElement:"∉",notin:"∉",notinva:"∉",NotEqual:"≠",ne:"≠",NotEqualTilde:"≂̸",nesim:"≂̸",NotExists:"∄",nexist:"∄",nexists:"∄",NotGreater:"≯",ngt:"≯",ngtr:"≯",NotGreaterEqual:"≱",nge:"≱",ngeq:"≱",NotGreaterFullEqual:"≧̸",ngE:"≧̸",ngeqq:"≧̸",NotGreaterGreater:"≫̸",nGtv:"≫̸",NotGreaterLess:"≹",ntgl:"≹",NotGreaterSlantEqual:"⩾̸",ngeqslant:"⩾̸",nges:"⩾̸",NotGreaterTilde:"≵",ngsim:"≵",NotHumpDownHump:"≎̸",nbump:"≎̸",NotHumpEqual:"≏̸",nbumpe:"≏̸",NotLeftTriangle:"⋪",nltri:"⋪",ntriangleleft:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",nltrie:"⋬",ntrianglelefteq:"⋬",NotLess:"≮",nless:"≮",nlt:"≮",NotLessEqual:"≰",nle:"≰",nleq:"≰",NotLessGreater:"≸",ntlg:"≸",NotLessLess:"≪̸",nLtv:"≪̸",NotLessSlantEqual:"⩽̸",nleqslant:"⩽̸",nles:"⩽̸",NotLessTilde:"≴",nlsim:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",NotPrecedes:"⊀",npr:"⊀",nprec:"⊀",NotPrecedesEqual:"⪯̸",npre:"⪯̸",npreceq:"⪯̸",NotPrecedesSlantEqual:"⋠",nprcue:"⋠",NotReverseElement:"∌",notni:"∌",notniva:"∌",NotRightTriangle:"⋫",nrtri:"⋫",ntriangleright:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",nrtrie:"⋭",ntrianglerighteq:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",nsqsube:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",nsqsupe:"⋣",NotSubset:"⊂⃒",nsubset:"⊂⃒",vnsub:"⊂⃒",NotSubsetEqual:"⊈",nsube:"⊈",nsubseteq:"⊈",NotSucceeds:"⊁",nsc:"⊁",nsucc:"⊁",NotSucceedsEqual:"⪰̸",nsce:"⪰̸",nsucceq:"⪰̸",NotSucceedsSlantEqual:"⋡",nsccue:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",nsupset:"⊃⃒",vnsup:"⊃⃒",NotSupersetEqual:"⊉",nsupe:"⊉",nsupseteq:"⊉",NotTilde:"≁",nsim:"≁",NotTildeEqual:"≄",nsime:"≄",nsimeq:"≄",NotTildeFullEqual:"≇",ncong:"≇",NotTildeTilde:"≉",nap:"≉",napprox:"≉",NotVerticalBar:"∤",nmid:"∤",nshortmid:"∤",nsmid:"∤",Nscr:"𝒩",Ntilde:"Ñ",Nu:"Ν",OElig:"Œ",Oacute:"Ó",Ocirc:"Ô",Ocy:"О",Odblac:"Ő",Ofr:"𝔒",Ograve:"Ò",Omacr:"Ō",Omega:"Ω",ohm:"Ω",Omicron:"Ο",Oopf:"𝕆",OpenCurlyDoubleQuote:"“",ldquo:"“",OpenCurlyQuote:"‘",lsquo:"‘",Or:"⩔",Oscr:"𝒪",Oslash:"Ø",Otilde:"Õ",Otimes:"⨷",Ouml:"Ö",OverBar:"‾",oline:"‾",OverBrace:"⏞",OverBracket:"⎴",tbrk:"⎴",OverParenthesis:"⏜",PartialD:"∂",part:"∂",Pcy:"П",Pfr:"𝔓",Phi:"Φ",Pi:"Π",PlusMinus:"±",plusmn:"±",pm:"±",Popf:"ℙ",primes:"ℙ",Pr:"⪻",Precedes:"≺",pr:"≺",prec:"≺",PrecedesEqual:"⪯",pre:"⪯",preceq:"⪯",PrecedesSlantEqual:"≼",prcue:"≼",preccurlyeq:"≼",PrecedesTilde:"≾",precsim:"≾",prsim:"≾",Prime:"″",Product:"∏",prod:"∏",Proportional:"∝",prop:"∝",propto:"∝",varpropto:"∝",vprop:"∝",Pscr:"𝒫",Psi:"Ψ",QUOT:'"',quot:'"',Qfr:"𝔔",Qopf:"ℚ",rationals:"ℚ",Qscr:"𝒬",RBarr:"⤐",drbkarow:"⤐",REG:"®",circledR:"®",reg:"®",Racute:"Ŕ",Rang:"⟫",Rarr:"↠",twoheadrightarrow:"↠",Rarrtl:"⤖",Rcaron:"Ř",Rcedil:"Ŗ",Rcy:"Р",Re:"ℜ",Rfr:"ℜ",real:"ℜ",realpart:"ℜ",ReverseElement:"∋",SuchThat:"∋",ni:"∋",niv:"∋",ReverseEquilibrium:"⇋",leftrightharpoons:"⇋",lrhar:"⇋",ReverseUpEquilibrium:"⥯",duhar:"⥯",Rho:"Ρ",RightAngleBracket:"⟩",rang:"⟩",rangle:"⟩",RightArrow:"→",ShortRightArrow:"→",rarr:"→",rightarrow:"→",srarr:"→",RightArrowBar:"⇥",rarrb:"⇥",RightArrowLeftArrow:"⇄",rightleftarrows:"⇄",rlarr:"⇄",RightCeiling:"⌉",rceil:"⌉",RightDoubleBracket:"⟧",robrk:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",dharr:"⇂",downharpoonright:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rfloor:"⌋",RightTee:"⊢",vdash:"⊢",RightTeeArrow:"↦",map:"↦",mapsto:"↦",RightTeeVector:"⥛",RightTriangle:"⊳",vartriangleright:"⊳",vrtri:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",rtrie:"⊵",trianglerighteq:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",uharr:"↾",upharpoonright:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",rharu:"⇀",rightharpoonup:"⇀",RightVectorBar:"⥓",Ropf:"ℝ",reals:"ℝ",RoundImplies:"⥰",Rrightarrow:"⇛",rAarr:"⇛",Rscr:"ℛ",realine:"ℛ",Rsh:"↱",rsh:"↱",RuleDelayed:"⧴",SHCHcy:"Щ",SHcy:"Ш",SOFTcy:"Ь",Sacute:"Ś",Sc:"⪼",Scaron:"Š",Scedil:"Ş",Scirc:"Ŝ",Scy:"С",Sfr:"𝔖",ShortUpArrow:"↑",UpArrow:"↑",uarr:"↑",uparrow:"↑",Sigma:"Σ",SmallCircle:"∘",compfn:"∘",Sopf:"𝕊",Sqrt:"√",radic:"√",Square:"□",squ:"□",square:"□",SquareIntersection:"⊓",sqcap:"⊓",SquareSubset:"⊏",sqsub:"⊏",sqsubset:"⊏",SquareSubsetEqual:"⊑",sqsube:"⊑",sqsubseteq:"⊑",SquareSuperset:"⊐",sqsup:"⊐",sqsupset:"⊐",SquareSupersetEqual:"⊒",sqsupe:"⊒",sqsupseteq:"⊒",SquareUnion:"⊔",sqcup:"⊔",Sscr:"𝒮",Star:"⋆",sstarf:"⋆",Sub:"⋐",Subset:"⋐",SubsetEqual:"⊆",sube:"⊆",subseteq:"⊆",Succeeds:"≻",sc:"≻",succ:"≻",SucceedsEqual:"⪰",sce:"⪰",succeq:"⪰",SucceedsSlantEqual:"≽",sccue:"≽",succcurlyeq:"≽",SucceedsTilde:"≿",scsim:"≿",succsim:"≿",Sum:"∑",sum:"∑",Sup:"⋑",Supset:"⋑",Superset:"⊃",sup:"⊃",supset:"⊃",SupersetEqual:"⊇",supe:"⊇",supseteq:"⊇",THORN:"Þ",TRADE:"™",trade:"™",TSHcy:"Ћ",TScy:"Ц",Tab:"	",Tau:"Τ",Tcaron:"Ť",Tcedil:"Ţ",Tcy:"Т",Tfr:"𝔗",Therefore:"∴",there4:"∴",therefore:"∴",Theta:"Θ",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",Tilde:"∼",sim:"∼",thicksim:"∼",thksim:"∼",TildeEqual:"≃",sime:"≃",simeq:"≃",TildeFullEqual:"≅",cong:"≅",TildeTilde:"≈",ap:"≈",approx:"≈",asymp:"≈",thickapprox:"≈",thkap:"≈",Topf:"𝕋",TripleDot:"⃛",tdot:"⃛",Tscr:"𝒯",Tstrok:"Ŧ",Uacute:"Ú",Uarr:"↟",Uarrocir:"⥉",Ubrcy:"Ў",Ubreve:"Ŭ",Ucirc:"Û",Ucy:"У",Udblac:"Ű",Ufr:"𝔘",Ugrave:"Ù",Umacr:"Ū",UnderBar:"_",lowbar:"_",UnderBrace:"⏟",UnderBracket:"⎵",bbrk:"⎵",UnderParenthesis:"⏝",Union:"⋃",bigcup:"⋃",xcup:"⋃",UnionPlus:"⊎",uplus:"⊎",Uogon:"Ų",Uopf:"𝕌",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",udarr:"⇅",UpDownArrow:"↕",updownarrow:"↕",varr:"↕",UpEquilibrium:"⥮",udhar:"⥮",UpTee:"⊥",bot:"⊥",bottom:"⊥",perp:"⊥",UpTeeArrow:"↥",mapstoup:"↥",UpperLeftArrow:"↖",nwarr:"↖",nwarrow:"↖",UpperRightArrow:"↗",nearr:"↗",nearrow:"↗",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",Uring:"Ů",Uscr:"𝒰",Utilde:"Ũ",Uuml:"Ü",VDash:"⊫",Vbar:"⫫",Vcy:"В",Vdash:"⊩",Vdashl:"⫦",Vee:"⋁",bigvee:"⋁",xvee:"⋁",Verbar:"‖",Vert:"‖",VerticalBar:"∣",mid:"∣",shortmid:"∣",smid:"∣",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"❘",VerticalTilde:"≀",wr:"≀",wreath:"≀",VeryThinSpace:" ",hairsp:" ",Vfr:"𝔙",Vopf:"𝕍",Vscr:"𝒱",Vvdash:"⊪",Wcirc:"Ŵ",Wedge:"⋀",bigwedge:"⋀",xwedge:"⋀",Wfr:"𝔚",Wopf:"𝕎",Wscr:"𝒲",Xfr:"𝔛",Xi:"Ξ",Xopf:"𝕏",Xscr:"𝒳",YAcy:"Я",YIcy:"Ї",YUcy:"Ю",Yacute:"Ý",Ycirc:"Ŷ",Ycy:"Ы",Yfr:"𝔜",Yopf:"𝕐",Yscr:"𝒴",Yuml:"Ÿ",ZHcy:"Ж",Zacute:"Ź",Zcaron:"Ž",Zcy:"З",Zdot:"Ż",Zeta:"Ζ",Zfr:"ℨ",zeetrf:"ℨ",Zopf:"ℤ",integers:"ℤ",Zscr:"𝒵",aacute:"á",abreve:"ă",ac:"∾",mstpos:"∾",acE:"∾̳",acd:"∿",acirc:"â",acy:"а",aelig:"æ",afr:"𝔞",agrave:"à",alefsym:"ℵ",aleph:"ℵ",alpha:"α",amacr:"ā",amalg:"⨿",and:"∧",wedge:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",angle:"∠",ange:"⦤",angmsd:"∡",measuredangle:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angzarr:"⍼",aogon:"ą",aopf:"𝕒",apE:"⩰",apacir:"⩯",ape:"≊",approxeq:"≊",apid:"≋",apos:"'",aring:"å",ascr:"𝒶",ast:"*",midast:"*",atilde:"ã",auml:"ä",awint:"⨑",bNot:"⫭",backcong:"≌",bcong:"≌",backepsilon:"϶",bepsi:"϶",backprime:"‵",bprime:"‵",backsim:"∽",bsim:"∽",backsimeq:"⋍",bsime:"⋍",barvee:"⊽",barwed:"⌅",barwedge:"⌅",bbrktbrk:"⎶",bcy:"б",bdquo:"„",ldquor:"„",bemptyv:"⦰",beta:"β",beth:"ℶ",between:"≬",twixt:"≬",bfr:"𝔟",bigcirc:"◯",xcirc:"◯",bigodot:"⨀",xodot:"⨀",bigoplus:"⨁",xoplus:"⨁",bigotimes:"⨂",xotime:"⨂",bigsqcup:"⨆",xsqcup:"⨆",bigstar:"★",starf:"★",bigtriangledown:"▽",xdtri:"▽",bigtriangleup:"△",xutri:"△",biguplus:"⨄",xuplus:"⨄",bkarow:"⤍",rbarr:"⤍",blacklozenge:"⧫",lozf:"⧫",blacktriangle:"▴",utrif:"▴",blacktriangledown:"▾",dtrif:"▾",blacktriangleleft:"◂",ltrif:"◂",blacktriangleright:"▸",rtrif:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bopf:"𝕓",bowtie:"⋈",boxDL:"╗",boxDR:"╔",boxDl:"╖",boxDr:"╓",boxH:"═",boxHD:"╦",boxHU:"╩",boxHd:"╤",boxHu:"╧",boxUL:"╝",boxUR:"╚",boxUl:"╜",boxUr:"╙",boxV:"║",boxVH:"╬",boxVL:"╣",boxVR:"╠",boxVh:"╫",boxVl:"╢",boxVr:"╟",boxbox:"⧉",boxdL:"╕",boxdR:"╒",boxdl:"┐",boxdr:"┌",boxhD:"╥",boxhU:"╨",boxhd:"┬",boxhu:"┴",boxminus:"⊟",minusb:"⊟",boxplus:"⊞",plusb:"⊞",boxtimes:"⊠",timesb:"⊠",boxuL:"╛",boxuR:"╘",boxul:"┘",boxur:"└",boxv:"│",boxvH:"╪",boxvL:"╡",boxvR:"╞",boxvh:"┼",boxvl:"┤",boxvr:"├",brvbar:"¦",bscr:"𝒷",bsemi:"⁏",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bumpE:"⪮",cacute:"ć",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",caps:"∩︀",caret:"⁁",ccaps:"⩍",ccaron:"č",ccedil:"ç",ccirc:"ĉ",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",cemptyv:"⦲",cent:"¢",cfr:"𝔠",chcy:"ч",check:"✓",checkmark:"✓",chi:"χ",cir:"○",cirE:"⧃",circ:"ˆ",circeq:"≗",cire:"≗",circlearrowleft:"↺",olarr:"↺",circlearrowright:"↻",orarr:"↻",circledS:"Ⓢ",oS:"Ⓢ",circledast:"⊛",oast:"⊛",circledcirc:"⊚",ocir:"⊚",circleddash:"⊝",odash:"⊝",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",clubs:"♣",clubsuit:"♣",colon:":",comma:",",commat:"@",comp:"∁",complement:"∁",congdot:"⩭",copf:"𝕔",copysr:"℗",crarr:"↵",cross:"✗",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",curlyeqprec:"⋞",cuesc:"⋟",curlyeqsucc:"⋟",cularr:"↶",curvearrowleft:"↶",cularrp:"⤽",cup:"∪",cupbrcap:"⩈",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curvearrowright:"↷",curarrm:"⤼",curlyvee:"⋎",cuvee:"⋎",curlywedge:"⋏",cuwed:"⋏",curren:"¤",cwint:"∱",cylcty:"⌭",dHar:"⥥",dagger:"†",daleth:"ℸ",dash:"‐",hyphen:"‐",dbkarow:"⤏",rBarr:"⤏",dcaron:"ď",dcy:"д",ddarr:"⇊",downdownarrows:"⇊",ddotseq:"⩷",eDDot:"⩷",deg:"°",delta:"δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",diamondsuit:"♦",diams:"♦",digamma:"ϝ",gammad:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",dlcorn:"⌞",llcorner:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",doteqdot:"≑",eDot:"≑",dotminus:"∸",minusd:"∸",dotplus:"∔",plusdo:"∔",dotsquare:"⊡",sdotb:"⊡",drcorn:"⌟",lrcorner:"⌟",drcrop:"⌌",dscr:"𝒹",dscy:"ѕ",dsol:"⧶",dstrok:"đ",dtdot:"⋱",dtri:"▿",triangledown:"▿",dwangle:"⦦",dzcy:"џ",dzigrarr:"⟿",eacute:"é",easter:"⩮",ecaron:"ě",ecir:"≖",eqcirc:"≖",ecirc:"ê",ecolon:"≕",eqcolon:"≕",ecy:"э",edot:"ė",efDot:"≒",fallingdotseq:"≒",efr:"𝔢",eg:"⪚",egrave:"è",egs:"⪖",eqslantgtr:"⪖",egsdot:"⪘",el:"⪙",elinters:"⏧",ell:"ℓ",els:"⪕",eqslantless:"⪕",elsdot:"⪗",emacr:"ē",empty:"∅",emptyset:"∅",emptyv:"∅",varnothing:"∅",emsp13:" ",emsp14:" ",emsp:" ",eng:"ŋ",ensp:" ",eogon:"ę",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",epsiv:"ϵ",straightepsilon:"ϵ",varepsilon:"ϵ",equals:"=",equest:"≟",questeq:"≟",equivDD:"⩸",eqvparsl:"⧥",erDot:"≓",risingdotseq:"≓",erarr:"⥱",escr:"ℯ",eta:"η",eth:"ð",euml:"ë",euro:"€",excl:"!",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",filig:"ﬁ",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",fork:"⋔",pitchfork:"⋔",forkv:"⫙",fpartint:"⨍",frac12:"½",half:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",sfrown:"⌢",fscr:"𝒻",gEl:"⪌",gtreqqless:"⪌",gacute:"ǵ",gamma:"γ",gap:"⪆",gtrapprox:"⪆",gbreve:"ğ",gcirc:"ĝ",gcy:"г",gdot:"ġ",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",gimel:"ℷ",gjcy:"ѓ",glE:"⪒",gla:"⪥",glj:"⪤",gnE:"≩",gneqq:"≩",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gneq:"⪈",gnsim:"⋧",gopf:"𝕘",gscr:"ℊ",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtrdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrarr:"⥸",gvertneqq:"≩︀",gvnE:"≩︀",hardcy:"ъ",harrcir:"⥈",harrw:"↭",leftrightsquigarrow:"↭",hbar:"ℏ",hslash:"ℏ",planck:"ℏ",plankv:"ℏ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",mldr:"…",hercon:"⊹",hfr:"𝔥",hksearow:"⤥",searhk:"⤥",hkswarow:"⤦",swarhk:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",larrhk:"↩",hookrightarrow:"↪",rarrhk:"↪",hopf:"𝕙",horbar:"―",hscr:"𝒽",hstrok:"ħ",hybull:"⁃",iacute:"í",icirc:"î",icy:"и",iecy:"е",iexcl:"¡",ifr:"𝔦",igrave:"ì",iiiint:"⨌",qint:"⨌",iiint:"∭",tint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",imacr:"ī",imath:"ı",inodot:"ı",imof:"⊷",imped:"Ƶ",incare:"℅",infin:"∞",infintie:"⧝",intcal:"⊺",intercal:"⊺",intlarhk:"⨗",intprod:"⨼",iprod:"⨼",iocy:"ё",iogon:"į",iopf:"𝕚",iota:"ι",iquest:"¿",iscr:"𝒾",isinE:"⋹",isindot:"⋵",isins:"⋴",isinsv:"⋳",itilde:"ĩ",iukcy:"і",iuml:"ï",jcirc:"ĵ",jcy:"й",jfr:"𝔧",jmath:"ȷ",jopf:"𝕛",jscr:"𝒿",jsercy:"ј",jukcy:"є",kappa:"κ",kappav:"ϰ",varkappa:"ϰ",kcedil:"ķ",kcy:"к",kfr:"𝔨",kgreen:"ĸ",khcy:"х",kjcy:"ќ",kopf:"𝕜",kscr:"𝓀",lAtail:"⤛",lBarr:"⤎",lEg:"⪋",lesseqqgtr:"⪋",lHar:"⥢",lacute:"ĺ",laemptyv:"⦴",lambda:"λ",langd:"⦑",lap:"⪅",lessapprox:"⪅",laquo:"«",larrbfs:"⤟",larrfs:"⤝",larrlp:"↫",looparrowleft:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",leftarrowtail:"↢",lat:"⪫",latail:"⤙",late:"⪭",lates:"⪭︀",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",lcedil:"ļ",lcy:"л",ldca:"⤶",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",leq:"≤",leftleftarrows:"⇇",llarr:"⇇",leftthreetimes:"⋋",lthree:"⋋",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessdot:"⋖",ltdot:"⋖",lfisht:"⥼",lfr:"𝔩",lgE:"⪑",lharul:"⥪",lhblk:"▄",ljcy:"љ",llhard:"⥫",lltri:"◺",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnE:"≨",lneqq:"≨",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lneq:"⪇",lnsim:"⋦",loang:"⟬",loarr:"⇽",longmapsto:"⟼",xmap:"⟼",looparrowright:"↬",rarrlp:"↬",lopar:"⦅",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",loz:"◊",lozenge:"◊",lpar:"(",lparlt:"⦓",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",lsime:"⪍",lsimg:"⪏",lsquor:"‚",sbquo:"‚",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltrPar:"⦖",ltri:"◃",triangleleft:"◃",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",mDDot:"∺",macr:"¯",strns:"¯",male:"♂",malt:"✠",maltese:"✠",marker:"▮",mcomma:"⨩",mcy:"м",mdash:"—",mfr:"𝔪",mho:"℧",micro:"µ",midcir:"⫰",minus:"−",minusdu:"⨪",mlcp:"⫛",models:"⊧",mopf:"𝕞",mscr:"𝓂",mu:"μ",multimap:"⊸",mumap:"⊸",nGg:"⋙̸",nGt:"≫⃒",nLeftarrow:"⇍",nlArr:"⇍",nLeftrightarrow:"⇎",nhArr:"⇎",nLl:"⋘̸",nLt:"≪⃒",nRightarrow:"⇏",nrArr:"⇏",nVDash:"⊯",nVdash:"⊮",nacute:"ń",nang:"∠⃒",napE:"⩰̸",napid:"≋̸",napos:"ŉ",natur:"♮",natural:"♮",ncap:"⩃",ncaron:"ň",ncedil:"ņ",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",ndash:"–",neArr:"⇗",nearhk:"⤤",nedot:"≐̸",nesear:"⤨",toea:"⤨",nfr:"𝔫",nharr:"↮",nleftrightarrow:"↮",nhpar:"⫲",nis:"⋼",nisd:"⋺",njcy:"њ",nlE:"≦̸",nleqq:"≦̸",nlarr:"↚",nleftarrow:"↚",nldr:"‥",nopf:"𝕟",not:"¬",notinE:"⋹̸",notindot:"⋵̸",notinvb:"⋷",notinvc:"⋶",notnivb:"⋾",notnivc:"⋽",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",nrarr:"↛",nrightarrow:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nscr:"𝓃",nsub:"⊄",nsubE:"⫅̸",nsubseteqq:"⫅̸",nsup:"⊅",nsupE:"⫆̸",nsupseteqq:"⫆̸",ntilde:"ñ",nu:"ν",num:"#",numero:"№",numsp:" ",nvDash:"⊭",nvHarr:"⤄",nvap:"≍⃒",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwArr:"⇖",nwarhk:"⤣",nwnear:"⤧",oacute:"ó",ocirc:"ô",ocy:"о",odblac:"ő",odiv:"⨸",odsold:"⦼",oelig:"œ",ofcir:"⦿",ofr:"𝔬",ogon:"˛",ograve:"ò",ogt:"⧁",ohbar:"⦵",olcir:"⦾",olcross:"⦻",olt:"⧀",omacr:"ō",omega:"ω",omicron:"ο",omid:"⦶",oopf:"𝕠",opar:"⦷",operp:"⦹",or:"∨",vee:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",oscr:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oslash:"ø",osol:"⊘",otilde:"õ",otimesas:"⨶",ouml:"ö",ovbar:"⌽",para:"¶",parsim:"⫳",parsl:"⫽",pcy:"п",percnt:"%",period:".",permil:"‰",pertenk:"‱",pfr:"𝔭",phi:"φ",phiv:"ϕ",straightphi:"ϕ",varphi:"ϕ",phone:"☎",pi:"π",piv:"ϖ",varpi:"ϖ",planckh:"ℎ",plus:"+",plusacir:"⨣",pluscir:"⨢",plusdu:"⨥",pluse:"⩲",plussim:"⨦",plustwo:"⨧",pointint:"⨕",popf:"𝕡",pound:"£",prE:"⪳",prap:"⪷",precapprox:"⪷",precnapprox:"⪹",prnap:"⪹",precneqq:"⪵",prnE:"⪵",precnsim:"⋨",prnsim:"⋨",prime:"′",profalar:"⌮",profline:"⌒",profsurf:"⌓",prurel:"⊰",pscr:"𝓅",psi:"ψ",puncsp:" ",qfr:"𝔮",qopf:"𝕢",qprime:"⁗",qscr:"𝓆",quatint:"⨖",quest:"?",rAtail:"⤜",rHar:"⥤",race:"∽̱",racute:"ŕ",raemptyv:"⦳",rangd:"⦒",range:"⦥",raquo:"»",rarrap:"⥵",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",rightarrowtail:"↣",rarrw:"↝",rightsquigarrow:"↝",ratail:"⤚",ratio:"∶",rbbrk:"❳",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",rcedil:"ŗ",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdsh:"↳",rect:"▭",rfisht:"⥽",rfr:"𝔯",rharul:"⥬",rho:"ρ",rhov:"ϱ",varrho:"ϱ",rightrightarrows:"⇉",rrarr:"⇉",rightthreetimes:"⋌",rthree:"⋌",ring:"˚",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",ropar:"⦆",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",rpar:")",rpargt:"⦔",rppolint:"⨒",rsaquo:"›",rscr:"𝓇",rtimes:"⋊",rtri:"▹",triangleright:"▹",rtriltri:"⧎",ruluhar:"⥨",rx:"℞",sacute:"ś",scE:"⪴",scap:"⪸",succapprox:"⪸",scaron:"š",scedil:"ş",scirc:"ŝ",scnE:"⪶",succneqq:"⪶",scnap:"⪺",succnapprox:"⪺",scnsim:"⋩",succnsim:"⋩",scpolint:"⨓",scy:"с",sdot:"⋅",sdote:"⩦",seArr:"⇘",sect:"§",semi:";",seswar:"⤩",tosa:"⤩",sext:"✶",sfr:"𝔰",sharp:"♯",shchcy:"щ",shcy:"ш",shy:"­",sigma:"σ",sigmaf:"ς",sigmav:"ς",varsigma:"ς",simdot:"⩪",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",smashp:"⨳",smeparsl:"⧤",smile:"⌣",ssmile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",spades:"♠",spadesuit:"♠",sqcaps:"⊓︀",sqcups:"⊔︀",sscr:"𝓈",star:"☆",sub:"⊂",subset:"⊂",subE:"⫅",subseteqq:"⫅",subdot:"⪽",subedot:"⫃",submult:"⫁",subnE:"⫋",subsetneqq:"⫋",subne:"⊊",subsetneq:"⊊",subplus:"⪿",subrarr:"⥹",subsim:"⫇",subsub:"⫕",subsup:"⫓",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",supE:"⫆",supseteqq:"⫆",supdot:"⪾",supdsub:"⫘",supedot:"⫄",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supsetneqq:"⫌",supne:"⊋",supsetneq:"⊋",supplus:"⫀",supsim:"⫈",supsub:"⫔",supsup:"⫖",swArr:"⇙",swnwar:"⤪",szlig:"ß",target:"⌖",tau:"τ",tcaron:"ť",tcedil:"ţ",tcy:"т",telrec:"⌕",tfr:"𝔱",theta:"θ",thetasym:"ϑ",thetav:"ϑ",vartheta:"ϑ",thorn:"þ",times:"×",timesbar:"⨱",timesd:"⨰",topbot:"⌶",topcir:"⫱",topf:"𝕥",topfork:"⫚",tprime:"‴",triangle:"▵",utri:"▵",triangleq:"≜",trie:"≜",tridot:"◬",triminus:"⨺",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",tscy:"ц",tshcy:"ћ",tstrok:"ŧ",uHar:"⥣",uacute:"ú",ubrcy:"ў",ubreve:"ŭ",ucirc:"û",ucy:"у",udblac:"ű",ufisht:"⥾",ufr:"𝔲",ugrave:"ù",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",uogon:"ų",uopf:"𝕦",upsi:"υ",upsilon:"υ",upuparrows:"⇈",uuarr:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",urtri:"◹",uscr:"𝓊",utdot:"⋰",utilde:"ũ",uuml:"ü",uwangle:"⦧",vBar:"⫨",vBarv:"⫩",vangrt:"⦜",varsubsetneq:"⊊︀",vsubne:"⊊︀",varsubsetneqq:"⫋︀",vsubnE:"⫋︀",varsupsetneq:"⊋︀",vsupne:"⊋︀",varsupsetneqq:"⫌︀",vsupnE:"⫌︀",vcy:"в",veebar:"⊻",veeeq:"≚",vellip:"⋮",vfr:"𝔳",vopf:"𝕧",vscr:"𝓋",vzigzag:"⦚",wcirc:"ŵ",wedbar:"⩟",wedgeq:"≙",weierp:"℘",wp:"℘",wfr:"𝔴",wopf:"𝕨",wscr:"𝓌",xfr:"𝔵",xi:"ξ",xnis:"⋻",xopf:"𝕩",xscr:"𝓍",yacute:"ý",yacy:"я",ycirc:"ŷ",ycy:"ы",yen:"¥",yfr:"𝔶",yicy:"ї",yopf:"𝕪",yscr:"𝓎",yucy:"ю",yuml:"ÿ",zacute:"ź",zcaron:"ž",zcy:"з",zdot:"ż",zeta:"ζ",zfr:"𝔷",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",zscr:"𝓏",zwj:"‍",zwnj:"‌"},Va$1="";Ge$1.ngsp=Va$1;var Ua$1=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function Ts$2(n,r){if(r!=null&&!(Array.isArray(r)&&r.length==2))throw new Error(`Expected '${n}' to be an array, [start, end].`);if(r!=null){let a=r[0],s=r[1];Ua$1.forEach(o=>{if(o.test(a)||o.test(s))throw new Error(`['${a}', '${s}'] contains unusable interpolation symbol.`)})}}var xr$1=class Nf{static fromArray(r){return r?(Ts$2("interpolation",r),new Nf(r[0],r[1])):kr$2}constructor(r,a){this.start=r,this.end=a}},kr$2=new xr$1("{{","}}"),pt$1=class extends Ve$1{constructor(r,a,s){super(s,r),this.tokenType=a}},Nr$2=class{constructor(r,a,s){this.tokens=r,this.errors=a,this.nonNormalizedIcuExpressions=s}};function Hs$2(n,r,a,s={}){let o=new Ir$2(new we$1(n,r),a,s);return o.tokenize(),new Nr$2(go$1(o.tokens),o.errors,o.nonNormalizedIcuExpressions)}var uo$1=/\r\n?/g;function Ye$1(n){return`Unexpected character "${n===0?"EOF":String.fromCharCode(n)}"`}function Ps$2(n){return`Unknown entity "${n}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}function lo$1(n,r){return`Unable to parse entity "${r}" - ${n} character reference entities must end with ";"`}var Kt$1;(function(n){n.HEX="hexadecimal",n.DEC="decimal"})(Kt$1||(Kt$1={}));var ht=class{constructor(n){this.error=n}},Ir$2=class{constructor(r,a,s){this._getTagContentType=a,this._currentTokenStart=null,this._currentTokenType=null,this._expansionCaseStack=[],this._inInterpolation=!1,this._fullNameStack=[],this.tokens=[],this.errors=[],this.nonNormalizedIcuExpressions=[],this._tokenizeIcu=s.tokenizeExpansionForms||!1,this._interpolationConfig=s.interpolationConfig||kr$2,this._leadingTriviaCodePoints=s.leadingTriviaChars&&s.leadingTriviaChars.map(u=>u.codePointAt(0)||0),this._canSelfClose=s.canSelfClose||!1,this._allowHtmComponentClosingTags=s.allowHtmComponentClosingTags||!1;let o=s.range||{endPos:r.content.length,startPos:0,startLine:0,startCol:0};this._cursor=s.escapedString?new Rr$1(r,o):new Qt(r,o),this._preserveLineEndings=s.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=s.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=s.tokenizeBlocks??!0;try{this._cursor.init()}catch(u){this.handleError(u)}}_processCarriageReturns(r){return this._preserveLineEndings?r:r.replace(uo$1,`
`)}tokenize(){for(;this._cursor.peek()!==0;){let r=this._cursor.clone();try{if(this._attemptCharCode(60))if(this._attemptCharCode(33))this._attemptStr("[CDATA[")?this._consumeCdata(r):this._attemptStr("--")?this._consumeComment(r):this._attemptStrCaseInsensitive("doctype")?this._consumeDocType(r):this._consumeBogusComment(r);else if(this._attemptCharCode(47))this._consumeTagClose(r);else{let a=this._cursor.clone();this._attemptCharCode(63)?(this._cursor=a,this._consumeBogusComment(r)):this._consumeTagOpen(r)}else this._tokenizeBlocks&&this._attemptCharCode(64)?this._consumeBlockStart(r):this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansionCase()&&!this._isInExpansionForm()&&this._attemptCharCode(125)?this._consumeBlockEnd(r):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart())}catch(a){this.handleError(a)}}this._beginToken(30),this._endToken([])}_getBlockName(){let r=!1,a=this._cursor.clone();return this._attemptCharCodeUntilFn(s=>Ft$1(s)?!r:Rs$1(s)?(r=!0,!1):!0),this._cursor.getChars(a).trim()}_consumeBlockStart(r){this._beginToken(25,r);let a=this._endToken([this._getBlockName()]);if(this._cursor.peek()===40)if(this._cursor.advance(),this._consumeBlockParameters(),this._attemptCharCodeUntilFn(k$1),this._attemptCharCode(41))this._attemptCharCodeUntilFn(k$1);else{a.type=29;return}this._attemptCharCode(123)?(this._beginToken(26),this._endToken([])):a.type=29}_consumeBlockEnd(r){this._beginToken(27,r),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn($s$2);this._cursor.peek()!==41&&this._cursor.peek()!==0;){this._beginToken(28);let r=this._cursor.clone(),a=null,s=0;for(;this._cursor.peek()!==59&&this._cursor.peek()!==0||a!==null;){let o=this._cursor.peek();if(o===92)this._cursor.advance();else if(o===a)a=null;else if(a===null&&Ar$1(o))a=o;else if(o===40&&a===null)s++;else if(o===41&&a===null){if(s===0)break;s>0&&s--}this._cursor.advance()}this._endToken([this._cursor.getChars(r)]),this._attemptCharCodeUntilFn($s$2)}}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(fo$1(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===125){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(r,a=this._cursor.clone()){this._currentTokenStart=a,this._currentTokenType=r}_endToken(r,a){if(this._currentTokenStart===null)throw new pt$1("Programming error - attempted to end a token when there was no start to the token",this._currentTokenType,this._cursor.getSpan(a));if(this._currentTokenType===null)throw new pt$1("Programming error - attempted to end a token which has no token type",null,this._cursor.getSpan(this._currentTokenStart));let s={type:this._currentTokenType,parts:r,sourceSpan:(a??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(s),this._currentTokenStart=null,this._currentTokenType=null,s}_createError(r,a){this._isInExpansionForm()&&(r+=` (Do you have an unescaped "{" in your template? Use "{{ '{' }}") to escape it.)`);let s=new pt$1(r,this._currentTokenType,a);return this._currentTokenStart=null,this._currentTokenType=null,new ht(s)}handleError(r){if(r instanceof ft$1&&(r=this._createError(r.msg,this._cursor.getSpan(r.cursor))),r instanceof ht)this.errors.push(r.error);else throw r}_attemptCharCode(r){return this._cursor.peek()===r?(this._cursor.advance(),!0):!1}_attemptCharCodeCaseInsensitive(r){return mo$1(this._cursor.peek(),r)?(this._cursor.advance(),!0):!1}_requireCharCode(r){let a=this._cursor.clone();if(!this._attemptCharCode(r))throw this._createError(Ye$1(this._cursor.peek()),this._cursor.getSpan(a))}_attemptStr(r){let a=r.length;if(this._cursor.charsLeft()<a)return!1;let s=this._cursor.clone();for(let o=0;o<a;o++)if(!this._attemptCharCode(r.charCodeAt(o)))return this._cursor=s,!1;return!0}_attemptStrCaseInsensitive(r){for(let a=0;a<r.length;a++)if(!this._attemptCharCodeCaseInsensitive(r.charCodeAt(a)))return!1;return!0}_requireStr(r){let a=this._cursor.clone();if(!this._attemptStr(r))throw this._createError(Ye$1(this._cursor.peek()),this._cursor.getSpan(a))}_requireStrCaseInsensitive(r){let a=this._cursor.clone();if(!this._attemptStrCaseInsensitive(r))throw this._createError(Ye$1(this._cursor.peek()),this._cursor.getSpan(a))}_attemptCharCodeUntilFn(r){for(;!r(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(r,a){let s=this._cursor.clone();if(this._attemptCharCodeUntilFn(r),this._cursor.diff(s)<a)throw this._createError(Ye$1(this._cursor.peek()),this._cursor.getSpan(s))}_attemptUntilChar(r){for(;this._cursor.peek()!==r;)this._cursor.advance()}_readChar(){let r=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),r}_consumeEntity(r){this._beginToken(9);let a=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(35)){let s=this._attemptCharCode(120)||this._attemptCharCode(88),o=this._cursor.clone();if(this._attemptCharCodeUntilFn(po$1),this._cursor.peek()!=59){this._cursor.advance();let c=s?Kt$1.HEX:Kt$1.DEC;throw this._createError(lo$1(c,this._cursor.getChars(a)),this._cursor.getSpan())}let u=this._cursor.getChars(o);this._cursor.advance();try{let c=parseInt(u,s?16:10);this._endToken([String.fromCharCode(c),this._cursor.getChars(a)])}catch{throw this._createError(Ps$2(this._cursor.getChars(a)),this._cursor.getSpan())}}else{let s=this._cursor.clone();if(this._attemptCharCodeUntilFn(ho$1),this._cursor.peek()!=59)this._beginToken(r,a),this._cursor=s,this._endToken(["&"]);else{let o=this._cursor.getChars(s);this._cursor.advance();let u=Ge$1[o];if(!u)throw this._createError(Ps$2(o),this._cursor.getSpan(a));this._endToken([u,`&${o};`])}}}_consumeRawText(r,a){this._beginToken(r?6:7);let s=[];for(;;){let o=this._cursor.clone(),u=a();if(this._cursor=o,u)break;r&&this._cursor.peek()===38?(this._endToken([this._processCarriageReturns(s.join(""))]),s.length=0,this._consumeEntity(6),this._beginToken(6)):s.push(this._readChar())}this._endToken([this._processCarriageReturns(s.join(""))])}_consumeComment(r){this._beginToken(10,r),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("-->")),this._beginToken(11),this._requireStr("-->"),this._endToken([])}_consumeBogusComment(r){this._beginToken(10,r),this._endToken([]),this._consumeRawText(!1,()=>this._cursor.peek()===62),this._beginToken(11),this._cursor.advance(),this._endToken([])}_consumeCdata(r){this._beginToken(12,r),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(r){this._beginToken(18,r),this._endToken([]),this._consumeRawText(!1,()=>this._cursor.peek()===62),this._beginToken(19),this._cursor.advance(),this._endToken([])}_consumePrefixAndName(){let r=this._cursor.clone(),a="";for(;this._cursor.peek()!==58&&!co$1(this._cursor.peek());)this._cursor.advance();let s;this._cursor.peek()===58?(a=this._cursor.getChars(r),this._cursor.advance(),s=this._cursor.clone()):s=r,this._requireCharCodeUntilFn(Ns$1,a===""?0:1);let o=this._cursor.getChars(s);return[a,o]}_consumeTagOpen(r){let a,s,o,u=[];try{if(!Pt$1(this._cursor.peek()))throw this._createError(Ye$1(this._cursor.peek()),this._cursor.getSpan(r));for(o=this._consumeTagOpenStart(r),s=o.parts[0],a=o.parts[1],this._attemptCharCodeUntilFn(k$1);this._cursor.peek()!==47&&this._cursor.peek()!==62&&this._cursor.peek()!==60&&this._cursor.peek()!==0;){let[p,d]=this._consumeAttributeName();if(this._attemptCharCodeUntilFn(k$1),this._attemptCharCode(61)){this._attemptCharCodeUntilFn(k$1);let _=this._consumeAttributeValue();u.push({prefix:p,name:d,value:_})}else u.push({prefix:p,name:d});this._attemptCharCodeUntilFn(k$1)}this._consumeTagOpenEnd()}catch(p){if(p instanceof ht){o?o.type=4:(this._beginToken(5,r),this._endToken(["<"]));return}throw p}if(this._canSelfClose&&this.tokens[this.tokens.length-1].type===2)return;let c=this._getTagContentType(a,s,this._fullNameStack.length>0,u);this._handleFullNameStackForTagOpen(s,a),c===N$1.RAW_TEXT?this._consumeRawTextWithTagClose(s,a,!1):c===N$1.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(s,a,!0)}_consumeRawTextWithTagClose(r,a,s){this._consumeRawText(s,()=>!this._attemptCharCode(60)||!this._attemptCharCode(47)||(this._attemptCharCodeUntilFn(k$1),!this._attemptStrCaseInsensitive(r?`${r}:${a}`:a))?!1:(this._attemptCharCodeUntilFn(k$1),this._attemptCharCode(62))),this._beginToken(3),this._requireCharCodeUntilFn(o=>o===62,3),this._cursor.advance(),this._endToken([r,a]),this._handleFullNameStackForTagClose(r,a)}_consumeTagOpenStart(r){this._beginToken(0,r);let a=this._consumePrefixAndName();return this._endToken(a)}_consumeAttributeName(){let r=this._cursor.peek();if(r===39||r===34)throw this._createError(Ye$1(r),this._cursor.getSpan());this._beginToken(14);let a=this._consumePrefixAndName();return this._endToken(a),a}_consumeAttributeValue(){let r;if(this._cursor.peek()===39||this._cursor.peek()===34){let a=this._cursor.peek();this._consumeQuote(a);let s=()=>this._cursor.peek()===a;r=this._consumeWithInterpolation(16,17,s,s),this._consumeQuote(a)}else{let a=()=>Ns$1(this._cursor.peek());r=this._consumeWithInterpolation(16,17,a,a)}return r}_consumeQuote(r){this._beginToken(15),this._requireCharCode(r),this._endToken([String.fromCodePoint(r)])}_consumeTagOpenEnd(){let r=this._attemptCharCode(47)?2:1;this._beginToken(r),this._requireCharCode(62),this._endToken([])}_consumeTagClose(r){if(this._beginToken(3,r),this._attemptCharCodeUntilFn(k$1),this._allowHtmComponentClosingTags&&this._attemptCharCode(47))this._attemptCharCodeUntilFn(k$1),this._requireCharCode(62),this._endToken([]);else{let[a,s]=this._consumePrefixAndName();this._attemptCharCodeUntilFn(k$1),this._requireCharCode(62),this._endToken([a,s]),this._handleFullNameStackForTagClose(a,s)}}_consumeExpansionFormStart(){this._beginToken(20),this._requireCharCode(123),this._endToken([]),this._expansionCaseStack.push(20),this._beginToken(7);let r=this._readUntil(44),a=this._processCarriageReturns(r);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([a]);else{let o=this._endToken([r]);a!==r&&this.nonNormalizedIcuExpressions.push(o)}this._requireCharCode(44),this._attemptCharCodeUntilFn(k$1),this._beginToken(7);let s=this._readUntil(44);this._endToken([s]),this._requireCharCode(44),this._attemptCharCodeUntilFn(k$1)}_consumeExpansionCaseStart(){this._beginToken(21);let r=this._readUntil(123).trim();this._endToken([r]),this._attemptCharCodeUntilFn(k$1),this._beginToken(22),this._requireCharCode(123),this._endToken([]),this._attemptCharCodeUntilFn(k$1),this._expansionCaseStack.push(22)}_consumeExpansionCaseEnd(){this._beginToken(23),this._requireCharCode(125),this._endToken([]),this._attemptCharCodeUntilFn(k$1),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(24),this._requireCharCode(125),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(r,a,s,o){this._beginToken(r);let u=[];for(;!s();){let p=this._cursor.clone();this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(this._endToken([this._processCarriageReturns(u.join(""))],p),u.length=0,this._consumeInterpolation(a,p,o),this._beginToken(r)):this._cursor.peek()===38?(this._endToken([this._processCarriageReturns(u.join(""))]),u.length=0,this._consumeEntity(r),this._beginToken(r)):u.push(this._readChar())}this._inInterpolation=!1;let c=this._processCarriageReturns(u.join(""));return this._endToken([c]),c}_consumeInterpolation(r,a,s){let o=[];this._beginToken(r,a),o.push(this._interpolationConfig.start);let u=this._cursor.clone(),c=null,p=!1;for(;this._cursor.peek()!==0&&(s===null||!s());){let d=this._cursor.clone();if(this._isTagStart()){this._cursor=d,o.push(this._getProcessedChars(u,d)),this._endToken(o);return}if(c===null)if(this._attemptStr(this._interpolationConfig.end)){o.push(this._getProcessedChars(u,d)),o.push(this._interpolationConfig.end),this._endToken(o);return}else this._attemptStr("//")&&(p=!0);let _=this._cursor.peek();this._cursor.advance(),_===92?this._cursor.advance():_===c?c=null:!p&&c===null&&Ar$1(_)&&(c=_)}o.push(this._getProcessedChars(u,this._cursor)),this._endToken(o)}_getProcessedChars(r,a){return this._processCarriageReturns(a.getChars(r))}_isTextEnd(){return!!(this._isTagStart()||this._cursor.peek()===0||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===125&&this._isInExpansionCase())||this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansion()&&(this._isBlockStart()||this._cursor.peek()===125))}_isTagStart(){if(this._cursor.peek()===60){let r=this._cursor.clone();r.advance();let a=r.peek();if(97<=a&&a<=122||65<=a&&a<=90||a===47||a===33)return!0}return!1}_isBlockStart(){if(this._tokenizeBlocks&&this._cursor.peek()===64){let r=this._cursor.clone();if(r.advance(),Rs$1(r.peek()))return!0}return!1}_readUntil(r){let a=this._cursor.clone();return this._attemptUntilChar(r),this._cursor.getChars(a)}_isInExpansion(){return this._isInExpansionCase()||this._isInExpansionForm()}_isInExpansionCase(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===22}_isInExpansionForm(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===20}isExpansionFormStart(){if(this._cursor.peek()!==123)return!1;if(this._interpolationConfig){let r=this._cursor.clone(),a=this._attemptStr(this._interpolationConfig.start);return this._cursor=r,!a}return!0}_handleFullNameStackForTagOpen(r,a){let s=We(r,a);(this._fullNameStack.length===0||this._fullNameStack[this._fullNameStack.length-1]===s)&&this._fullNameStack.push(s)}_handleFullNameStackForTagClose(r,a){let s=We(r,a);this._fullNameStack.length!==0&&this._fullNameStack[this._fullNameStack.length-1]===s&&this._fullNameStack.pop()}};function k$1(n){return!Ft$1(n)||n===0}function Ns$1(n){return Ft$1(n)||n===62||n===60||n===47||n===39||n===34||n===61||n===0}function co$1(n){return(n<97||122<n)&&(n<65||90<n)&&(n<48||n>57)}function po$1(n){return n===59||n===0||!ms$2(n)}function ho$1(n){return n===59||n===0||!Pt$1(n)}function fo$1(n){return n!==125}function mo$1(n,r){return Is$1(n)===Is$1(r)}function Is$1(n){return n>=97&&n<=122?n-97+65:n}function Rs$1(n){return Pt$1(n)||Sr$2(n)||n===95}function $s$2(n){return n!==59&&k$1(n)}function go$1(n){let r=[],a;for(let s=0;s<n.length;s++){let o=n[s];a&&a.type===5&&o.type===5||a&&a.type===16&&o.type===16?(a.parts[0]+=o.parts[0],a.sourceSpan.end=o.sourceSpan.end):(a=o,r.push(a))}return r}var Qt=class of{constructor(r,a){if(r instanceof of){this.file=r.file,this.input=r.input,this.end=r.end;let s=r.state;this.state={peek:s.peek,offset:s.offset,line:s.line,column:s.column}}else{if(!a)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=r,this.input=r.content,this.end=a.endPos,this.state={peek:-1,offset:a.startPos,line:a.startLine,column:a.startCol}}}clone(){return new of(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(r){return this.state.offset-r.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(r,a){r=r||this;let s=r;if(a)for(;this.diff(r)>0&&a.indexOf(r.peek())!==-1;)s===r&&(r=r.clone()),r.advance();let o=this.locationFromCursor(r),u=this.locationFromCursor(this),c=s!==r?this.locationFromCursor(s):o;return new f$1(o,u,c)}getChars(r){return this.input.substring(r.state.offset,this.state.offset)}charAt(r){return this.input.charCodeAt(r)}advanceState(r){if(r.offset>=this.end)throw this.state=r,new ft$1('Unexpected character "EOF"',this);let a=this.charAt(r.offset);a===10?(r.line++,r.column=0):_r$1(a)||r.column++,r.offset++,this.updatePeek(r)}updatePeek(r){r.peek=r.offset>=this.end?0:this.charAt(r.offset)}locationFromCursor(r){return new ae$2(r.file,r.state.offset,r.state.line,r.state.column)}},Rr$1=class lf extends Qt{constructor(r,a){r instanceof lf?(super(r),this.internalState={...r.internalState}):(super(r,a),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new lf(this)}getChars(r){let a=r.clone(),s="";for(;a.internalState.offset<this.internalState.offset;)s+=String.fromCodePoint(a.peek()),a.advance();return s}processEscapeSequence(){let r=()=>this.internalState.peek;if(r()===92)if(this.internalState={...this.state},this.advanceState(this.internalState),r()===110)this.state.peek=10;else if(r()===114)this.state.peek=13;else if(r()===118)this.state.peek=11;else if(r()===116)this.state.peek=9;else if(r()===98)this.state.peek=8;else if(r()===102)this.state.peek=12;else if(r()===117)if(this.advanceState(this.internalState),r()===123){this.advanceState(this.internalState);let a=this.clone(),s=0;for(;r()!==125;)this.advanceState(this.internalState),s++;this.state.peek=this.decodeHexDigits(a,s)}else{let a=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(a,4)}else if(r()===120){this.advanceState(this.internalState);let a=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(a,2)}else if(Er$2(r())){let a="",s=0,o=this.clone();for(;Er$2(r())&&s<3;)o=this.clone(),a+=String.fromCodePoint(r()),this.advanceState(this.internalState),s++;this.state.peek=parseInt(a,8),this.internalState=o.internalState}else _r$1(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(r,a){let s=this.input.slice(r.internalState.offset,r.internalState.offset+a),o=parseInt(s,16);if(isNaN(o))throw r.state=r.internalState,new ft$1("Invalid hexadecimal escape sequence",r);return o}},ft$1=class{constructor(r,a){this.msg=r,this.cursor=a}},$$1=class Lf extends Ve$1{static create(r,a,s){return new Lf(r,a,s)}constructor(r,a,s){super(a,s),this.elementName=r}},Mr$2=class{constructor(r,a){this.rootNodes=r,this.errors=a}},Xt$1=class{constructor(r){this.getTagDefinition=r}parse(r,a,s,o=!1,u){let c=rc=>(nc,...ic)=>rc(nc.toLowerCase(),...ic),p=o?this.getTagDefinition:c(this.getTagDefinition),d=rc=>p(rc).getContentType(),_=o?u:c(u),ja=Hs$2(r,a,u?(rc,nc,ic,uc)=>{let eh=_(rc,nc,ic,uc);return eh!==void 0?eh:d(rc)}:d,s),Ja=s&&s.canSelfClose||!1,ec=s&&s.allowHtmComponentClosingTags||!1,tc=new qr$1(ja.tokens,p,Ja,ec,o);return tc.build(),new Mr$2(tc.rootNodes,ja.errors.concat(tc.errors))}},qr$1=class Bf{constructor(r,a,s,o,u){this.tokens=r,this.getTagDefinition=a,this.canSelfClose=s,this.allowHtmComponentClosingTags=o,this.isTagNameCaseSensitive=u,this._index=-1,this._containerStack=[],this.rootNodes=[],this.errors=[],this._advance()}build(){for(;this._peek.type!==30;)this._peek.type===0||this._peek.type===4?this._consumeStartTag(this._advance()):this._peek.type===3?(this._closeVoidElement(),this._consumeEndTag(this._advance())):this._peek.type===12?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===10?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===5||this._peek.type===7||this._peek.type===6?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===20?this._consumeExpansion(this._advance()):this._peek.type===25?(this._closeVoidElement(),this._consumeBlockOpen(this._advance())):this._peek.type===27?(this._closeVoidElement(),this._consumeBlockClose(this._advance())):this._peek.type===29?(this._closeVoidElement(),this._consumeIncompleteBlock(this._advance())):this._peek.type===18?this._consumeDocType(this._advance()):this._advance();for(let r of this._containerStack)r instanceof Z&&this.errors.push($$1.create(r.name,r.sourceSpan,`Unclosed block "${r.name}"`))}_advance(){let r=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],r}_advanceIf(r){return this._peek.type===r?this._advance():null}_consumeCdata(r){let a=this._advance(),s=this._getText(a),o=this._advanceIf(13);this._addToParent(new qt$1(s,new f$1(r.sourceSpan.start,(o||a).sourceSpan.end),[a]))}_consumeComment(r){let a=this._advanceIf(7),s=this._advanceIf(11),o=a!=null?a.parts[0].trim():null,u=new f$1(r.sourceSpan.start,(s||a||r).sourceSpan.end);this._addToParent(new Wt$1(o,u))}_consumeDocType(r){let a=this._advanceIf(7),s=this._advanceIf(19),o=a!=null?a.parts[0].trim():null,u=new f$1(r.sourceSpan.start,(s||a||r).sourceSpan.end);this._addToParent(new zt(o,u))}_consumeExpansion(r){let a=this._advance(),s=this._advance(),o=[];for(;this._peek.type===21;){let c=this._parseExpansionCase();if(!c)return;o.push(c)}if(this._peek.type!==24){this.errors.push($$1.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));return}let u=new f$1(r.sourceSpan.start,this._peek.sourceSpan.end,r.sourceSpan.fullStart);this._addToParent(new Ht$1(a.parts[0],s.parts[0],o,u,a.sourceSpan)),this._advance()}_parseExpansionCase(){let r=this._advance();if(this._peek.type!==22)return this.errors.push($$1.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;let a=this._advance(),s=this._collectExpansionExpTokens(a);if(!s)return null;let o=this._advance();s.push({type:30,parts:[],sourceSpan:o.sourceSpan});let u=new Bf(s,this.getTagDefinition,this.canSelfClose,this.allowHtmComponentClosingTags,this.isTagNameCaseSensitive);if(u.build(),u.errors.length>0)return this.errors=this.errors.concat(u.errors),null;let c=new f$1(r.sourceSpan.start,o.sourceSpan.end,r.sourceSpan.fullStart),p=new f$1(a.sourceSpan.start,o.sourceSpan.end,a.sourceSpan.fullStart);return new Vt$1(r.parts[0],u.rootNodes,c,r.sourceSpan,p)}_collectExpansionExpTokens(r){let a=[],s=[22];for(;;){if((this._peek.type===20||this._peek.type===22)&&s.push(this._peek.type),this._peek.type===23)if(Vs$2(s,22)){if(s.pop(),s.length===0)return a}else return this.errors.push($$1.create(null,r.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===24)if(Vs$2(s,20))s.pop();else return this.errors.push($$1.create(null,r.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===30)return this.errors.push($$1.create(null,r.sourceSpan,"Invalid ICU message. Missing '}'.")),null;a.push(this._advance())}}_getText(r){let a=r.parts[0];if(a.length>0&&a[0]==`
`){let s=this._getClosestParentElement();s!=null&&s.children.length==0&&this.getTagDefinition(s.name).ignoreFirstLf&&(a=a.substring(1))}return a}_consumeText(r){let a=[r],s=r.sourceSpan,o=r.parts[0];if(o.length>0&&o[0]===`
`){let u=this._getContainer();u!=null&&u.children.length===0&&this.getTagDefinition(u.name).ignoreFirstLf&&(o=o.substring(1),a[0]={type:r.type,sourceSpan:r.sourceSpan,parts:[o]})}for(;this._peek.type===8||this._peek.type===5||this._peek.type===9;)r=this._advance(),a.push(r),r.type===8?o+=r.parts.join("").replace(/&([^;]+);/g,Us$2):r.type===9?o+=r.parts[0]:o+=r.parts.join("");if(o.length>0){let u=r.sourceSpan;this._addToParent(new Mt$1(o,new f$1(s.start,u.end,s.fullStart,s.details),a))}}_closeVoidElement(){let r=this._getContainer();r instanceof G&&this.getTagDefinition(r.name).isVoid&&this._containerStack.pop()}_consumeStartTag(r){let[a,s]=r.parts,o=[];for(;this._peek.type===14;)o.push(this._consumeAttr(this._advance()));let u=this._getElementFullName(a,s,this._getClosestParentElement()),c=!1;if(this._peek.type===2){this._advance(),c=!0;let tc=this.getTagDefinition(u);this.canSelfClose||tc.canSelfClose||Ue$2(u)!==null||tc.isVoid||this.errors.push($$1.create(u,r.sourceSpan,`Only void, custom and foreign elements can be self closed "${r.parts[1]}"`))}else this._peek.type===1&&(this._advance(),c=!1);let p=this._peek.sourceSpan.fullStart,d=new f$1(r.sourceSpan.start,p,r.sourceSpan.fullStart),_=new f$1(r.sourceSpan.start,p,r.sourceSpan.fullStart),ja=new f$1(r.sourceSpan.start.moveBy(1),r.sourceSpan.end),Ja=new G(u,o,[],d,_,void 0,ja),ec=this._getContainer();this._pushContainer(Ja,ec instanceof G&&this.getTagDefinition(ec.name).isClosedByChild(Ja.name)),c?this._popContainer(u,G,d):r.type===4&&(this._popContainer(u,G,null),this.errors.push($$1.create(u,d,`Opening tag "${u}" not terminated.`)))}_pushContainer(r,a){a&&this._containerStack.pop(),this._addToParent(r),this._containerStack.push(r)}_consumeEndTag(r){let a=this.allowHtmComponentClosingTags&&r.parts.length===0?null:this._getElementFullName(r.parts[0],r.parts[1],this._getClosestParentElement());if(a&&this.getTagDefinition(a).isVoid)this.errors.push($$1.create(a,r.sourceSpan,`Void elements do not have end tags "${r.parts[1]}"`));else if(!this._popContainer(a,G,r.sourceSpan)){let s=`Unexpected closing tag "${a}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;this.errors.push($$1.create(a,r.sourceSpan,s))}}_popContainer(r,a,s){let o=!1;for(let u=this._containerStack.length-1;u>=0;u--){let c=this._containerStack[u];if(Ue$2(c.name)?c.name===r:(r==null||c.name.toLowerCase()===r.toLowerCase())&&c instanceof a)return c.endSourceSpan=s,c.sourceSpan.end=s!==null?s.end:c.sourceSpan.end,this._containerStack.splice(u,this._containerStack.length-u),!o;(c instanceof Z||c instanceof G&&!this.getTagDefinition(c.name).closedByParent)&&(o=!0)}return!1}_consumeAttr(r){let a=We(r.parts[0],r.parts[1]),s=r.sourceSpan.end,o;this._peek.type===15&&(o=this._advance());let u="",c=[],p,d;if(this._peek.type===16)for(p=this._peek.sourceSpan,d=this._peek.sourceSpan.end;this._peek.type===16||this._peek.type===17||this._peek.type===9;){let ja=this._advance();c.push(ja),ja.type===17?u+=ja.parts.join("").replace(/&([^;]+);/g,Us$2):ja.type===9?u+=ja.parts[0]:u+=ja.parts.join(""),d=s=ja.sourceSpan.end}this._peek.type===15&&(d=s=this._advance().sourceSpan.end);let _=p&&d&&new f$1((o==null?void 0:o.sourceSpan.start)??p.start,d,(o==null?void 0:o.sourceSpan.fullStart)??p.fullStart);return new Ut$1(a,u,new f$1(r.sourceSpan.start,s,r.sourceSpan.fullStart),r.sourceSpan,_,c.length>0?c:void 0,void 0)}_consumeBlockOpen(r){let a=[];for(;this._peek.type===28;){let p=this._advance();a.push(new ut$1(p.parts[0],p.sourceSpan))}this._peek.type===26&&this._advance();let s=this._peek.sourceSpan.fullStart,o=new f$1(r.sourceSpan.start,s,r.sourceSpan.fullStart),u=new f$1(r.sourceSpan.start,s,r.sourceSpan.fullStart),c=new Z(r.parts[0],a,[],o,u);this._pushContainer(c,!1)}_consumeBlockClose(r){this._popContainer(null,Z,r.sourceSpan)||this.errors.push($$1.create(null,r.sourceSpan,'Unexpected closing block. The block may have been closed earlier. If you meant to write the } character, you should use the "&#125;" HTML entity instead.'))}_consumeIncompleteBlock(r){let a=[];for(;this._peek.type===28;){let p=this._advance();a.push(new ut$1(p.parts[0],p.sourceSpan))}let s=this._peek.sourceSpan.fullStart,o=new f$1(r.sourceSpan.start,s,r.sourceSpan.fullStart),u=new f$1(r.sourceSpan.start,s,r.sourceSpan.fullStart),c=new Z(r.parts[0],a,[],o,u);this._pushContainer(c,!1),this._popContainer(null,Z,null),this.errors.push($$1.create(r.parts[0],o,`Incomplete block "${r.parts[0]}". If you meant to write the @ character, you should use the "&#64;" HTML entity instead.`))}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestParentElement(){for(let r=this._containerStack.length-1;r>-1;r--)if(this._containerStack[r]instanceof G)return this._containerStack[r];return null}_addToParent(r){let a=this._getContainer();a===null?this.rootNodes.push(r):a.children.push(r)}_getElementFullName(r,a,s){if(r===""&&(r=this.getTagDefinition(a).implicitNamespacePrefix||"",r===""&&s!=null)){let o=at$1(s.name)[1];this.getTagDefinition(o).preventNamespaceInheritance||(r=Ue$2(s.name))}return We(r,a)}};function Vs$2(n,r){return n.length>0&&n[n.length-1]===r}function Us$2(n,r){return Ge$1[r]!==void 0?Ge$1[r]||n:/^#x[a-f0-9]+$/i.test(r)?String.fromCodePoint(parseInt(r.slice(2),16)):/^#\d+$/.test(r)?String.fromCodePoint(parseInt(r.slice(1),10)):n}var Jt$1=class extends Xt$1{constructor(){super(ze$1)}parse(r,a,s,o=!1,u){return super.parse(r,a,s,o,u)}},Hr$2=null,Co$1=()=>(Hr$2||(Hr$2=new Jt$1),Hr$2);function Vr$1(n,r={}){let{canSelfClose:a=!1,allowHtmComponentClosingTags:s=!1,isTagNameCaseSensitive:o=!1,getTagContentType:u,tokenizeAngularBlocks:c=!1}=r;return Co$1().parse(n,"angular-html-parser",{tokenizeExpansionForms:c,interpolationConfig:void 0,canSelfClose:a,allowHtmComponentClosingTags:s,tokenizeBlocks:c},o,u)}function So$1(n,r){let a=new SyntaxError(n+" ("+r.loc.start.line+":"+r.loc.start.column+")");return Object.assign(a,r)}var Ws$2=So$1,mt$1=3;function _o$1(n){let r=n.slice(0,mt$1);if(r!=="---"&&r!=="+++")return;let a=n.indexOf(`
`,mt$1);if(a===-1)return;let s=n.slice(mt$1,a).trim(),o=n.indexOf(`
${r}`,a),u=s;if(u||(u=r==="+++"?"toml":"yaml"),o===-1&&r==="---"&&u==="yaml"&&(o=n.indexOf(`
...`,a)),o===-1)return;let c=o+1+mt$1,p=n.charAt(c+1);if(!/\s?/.test(p))return;let d=n.slice(0,c);return{type:"front-matter",language:u,explicitLanguage:s,value:n.slice(a+1,o),startDelimiter:r,endDelimiter:d.slice(-mt$1),raw:d}}function Eo$1(n){let r=_o$1(n);if(!r)return{content:n};let{raw:a}=r;return{frontMatter:r,content:w$1(!1,a,/[^\n]/g," ")+n.slice(a.length)}}var zs$2=Eo$1,Zt={attrs:!0,children:!0,cases:!0,expression:!0},Gs$2=new Set(["parent"]),er$1=class Fd{constructor(r={}){for(let a of new Set([...Gs$2,...Object.keys(r)]))this.setProperty(a,r[a])}setProperty(r,a){if(this[r]!==a){if(r in Zt&&(a=a.map(s=>this.createChild(s))),!Gs$2.has(r)){this[r]=a;return}Object.defineProperty(this,r,{value:a,enumerable:!1,configurable:!0})}}map(r){let a;for(let s in Zt){let o=this[s];if(o){let u=Ao$1(o,c=>c.map(r));a!==o&&(a||(a=new Fd({parent:this.parent})),a.setProperty(s,u))}}if(a)for(let s in this)s in Zt||(a[s]=this[s]);return r(a||this)}walk(r){for(let a in Zt){let s=this[a];if(s)for(let o=0;o<s.length;o++)s[o].walk(r)}r(this)}createChild(r){let a=r instanceof Fd?r.clone():new Fd(r);return a.setProperty("parent",this),a}insertChildBefore(r,a){this.children.splice(this.children.indexOf(r),0,this.createChild(a))}removeChild(r){this.children.splice(this.children.indexOf(r),1)}replaceChild(r,a){this.children[this.children.indexOf(r)]=this.createChild(a)}clone(){return new Fd(this)}get firstChild(){var r;return(r=this.children)==null?void 0:r[0]}get lastChild(){var r;return(r=this.children)==null?void 0:r[this.children.length-1]}get prev(){var r,a;return(a=(r=this.parent)==null?void 0:r.children)==null?void 0:a[this.parent.children.indexOf(this)-1]}get next(){var r,a;return(a=(r=this.parent)==null?void 0:r.children)==null?void 0:a[this.parent.children.indexOf(this)+1]}get rawName(){return this.hasExplicitNamespace?this.fullName:this.name}get fullName(){return this.namespace?this.namespace+":"+this.name:this.name}get attrMap(){return Object.fromEntries(this.attrs.map(r=>[r.fullName,r.value]))}};function Ao$1(n,r){let a=n.map(r);return a.some((s,o)=>s!==n[o])?a:n}var Do$1=[{regex:/^(\[if([^\]]*)]>)(.*?)<!\s*\[endif]$/s,parse:vo$1},{regex:/^\[if([^\]]*)]><!$/,parse:yo$1},{regex:/^<!\s*\[endif]$/,parse:wo$1}];function Ys$2(n,r){if(n.value)for(let{regex:a,parse:s}of Do$1){let o=n.value.match(a);if(o)return s(n,r,o)}return null}function vo$1(n,r,a){let[,s,o,u]=a,c=4+s.length,p=n.sourceSpan.start.moveBy(c),d=p.moveBy(u.length),[_,ja]=(()=>{try{return[!0,r(u,p).children]}catch{return[!1,[{type:"text",value:u,sourceSpan:new f$1(p,d)}]]}})();return{type:"ieConditionalComment",complete:_,children:ja,condition:w$1(!1,o.trim(),/\s+/g," "),sourceSpan:n.sourceSpan,startSourceSpan:new f$1(n.sourceSpan.start,p),endSourceSpan:new f$1(d,n.sourceSpan.end)}}function yo$1(n,r,a){let[,s]=a;return{type:"ieConditionalStartComment",condition:w$1(!1,s.trim(),/\s+/g," "),sourceSpan:n.sourceSpan}}function wo$1(n){return{type:"ieConditionalEndComment",sourceSpan:n.sourceSpan}}var tr$1=new Map([["*",new Set(["accesskey","autocapitalize","autofocus","class","contenteditable","dir","draggable","enterkeyhint","hidden","id","inert","inputmode","is","itemid","itemprop","itemref","itemscope","itemtype","lang","nonce","popover","slot","spellcheck","style","tabindex","title","translate","writingsuggestions"])],["a",new Set(["charset","coords","download","href","hreflang","name","ping","referrerpolicy","rel","rev","shape","target","type"])],["applet",new Set(["align","alt","archive","code","codebase","height","hspace","name","object","vspace","width"])],["area",new Set(["alt","coords","download","href","hreflang","nohref","ping","referrerpolicy","rel","shape","target","type"])],["audio",new Set(["autoplay","controls","crossorigin","loop","muted","preload","src"])],["base",new Set(["href","target"])],["basefont",new Set(["color","face","size"])],["blockquote",new Set(["cite"])],["body",new Set(["alink","background","bgcolor","link","text","vlink"])],["br",new Set(["clear"])],["button",new Set(["disabled","form","formaction","formenctype","formmethod","formnovalidate","formtarget","name","popovertarget","popovertargetaction","type","value"])],["canvas",new Set(["height","width"])],["caption",new Set(["align"])],["col",new Set(["align","char","charoff","span","valign","width"])],["colgroup",new Set(["align","char","charoff","span","valign","width"])],["data",new Set(["value"])],["del",new Set(["cite","datetime"])],["details",new Set(["name","open"])],["dialog",new Set(["open"])],["dir",new Set(["compact"])],["div",new Set(["align"])],["dl",new Set(["compact"])],["embed",new Set(["height","src","type","width"])],["fieldset",new Set(["disabled","form","name"])],["font",new Set(["color","face","size"])],["form",new Set(["accept","accept-charset","action","autocomplete","enctype","method","name","novalidate","target"])],["frame",new Set(["frameborder","longdesc","marginheight","marginwidth","name","noresize","scrolling","src"])],["frameset",new Set(["cols","rows"])],["h1",new Set(["align"])],["h2",new Set(["align"])],["h3",new Set(["align"])],["h4",new Set(["align"])],["h5",new Set(["align"])],["h6",new Set(["align"])],["head",new Set(["profile"])],["hr",new Set(["align","noshade","size","width"])],["html",new Set(["manifest","version"])],["iframe",new Set(["align","allow","allowfullscreen","allowpaymentrequest","allowusermedia","frameborder","height","loading","longdesc","marginheight","marginwidth","name","referrerpolicy","sandbox","scrolling","src","srcdoc","width"])],["img",new Set(["align","alt","border","crossorigin","decoding","fetchpriority","height","hspace","ismap","loading","longdesc","name","referrerpolicy","sizes","src","srcset","usemap","vspace","width"])],["input",new Set(["accept","align","alt","autocomplete","checked","dirname","disabled","form","formaction","formenctype","formmethod","formnovalidate","formtarget","height","ismap","list","max","maxlength","min","minlength","multiple","name","pattern","placeholder","popovertarget","popovertargetaction","readonly","required","size","src","step","type","usemap","value","width"])],["ins",new Set(["cite","datetime"])],["isindex",new Set(["prompt"])],["label",new Set(["for","form"])],["legend",new Set(["align"])],["li",new Set(["type","value"])],["link",new Set(["as","blocking","charset","color","crossorigin","disabled","fetchpriority","href","hreflang","imagesizes","imagesrcset","integrity","media","referrerpolicy","rel","rev","sizes","target","type"])],["map",new Set(["name"])],["menu",new Set(["compact"])],["meta",new Set(["charset","content","http-equiv","media","name","scheme"])],["meter",new Set(["high","low","max","min","optimum","value"])],["object",new Set(["align","archive","border","classid","codebase","codetype","data","declare","form","height","hspace","name","standby","type","typemustmatch","usemap","vspace","width"])],["ol",new Set(["compact","reversed","start","type"])],["optgroup",new Set(["disabled","label"])],["option",new Set(["disabled","label","selected","value"])],["output",new Set(["for","form","name"])],["p",new Set(["align"])],["param",new Set(["name","type","value","valuetype"])],["pre",new Set(["width"])],["progress",new Set(["max","value"])],["q",new Set(["cite"])],["script",new Set(["async","blocking","charset","crossorigin","defer","fetchpriority","integrity","language","nomodule","referrerpolicy","src","type"])],["select",new Set(["autocomplete","disabled","form","multiple","name","required","size"])],["slot",new Set(["name"])],["source",new Set(["height","media","sizes","src","srcset","type","width"])],["style",new Set(["blocking","media","type"])],["table",new Set(["align","bgcolor","border","cellpadding","cellspacing","frame","rules","summary","width"])],["tbody",new Set(["align","char","charoff","valign"])],["td",new Set(["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"])],["template",new Set(["shadowrootclonable","shadowrootdelegatesfocus","shadowrootmode"])],["textarea",new Set(["autocomplete","cols","dirname","disabled","form","maxlength","minlength","name","placeholder","readonly","required","rows","wrap"])],["tfoot",new Set(["align","char","charoff","valign"])],["th",new Set(["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"])],["thead",new Set(["align","char","charoff","valign"])],["time",new Set(["datetime"])],["tr",new Set(["align","bgcolor","char","charoff","valign"])],["track",new Set(["default","kind","label","src","srclang"])],["ul",new Set(["compact","type"])],["video",new Set(["autoplay","controls","crossorigin","height","loop","muted","playsinline","poster","preload","src","width"])]]),js$2=new Set(["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"]);function bo$1(n){if(n.type==="block"){if(n.name=w$1(!1,n.name.toLowerCase(),/\s+/g," ").trim(),n.type="angularControlFlowBlock",!Me$1(n.parameters)){delete n.parameters;return}for(let r of n.parameters)r.type="angularControlFlowBlockParameter";n.parameters={type:"angularControlFlowBlockParameters",children:n.parameters,sourceSpan:new f$1(n.parameters[0].sourceSpan.start,X$1(!1,n.parameters,-1).sourceSpan.end)}}}function To$1(n){(n.type==="plural"||n.type==="select")&&(n.clause=n.type,n.type="angularIcuExpression"),n.type==="expansionCase"&&(n.type="angularIcuCase")}function Qs$2(n,r,a){let{name:s,canSelfClose:o=!0,normalizeTagName:u=!1,normalizeAttributeName:c=!1,allowHtmComponentClosingTags:p=!1,isTagNameCaseSensitive:d=!1,shouldParseAsRawText:_}=r,{rootNodes:ja,errors:Ja}=Vr$1(n,{canSelfClose:o,allowHtmComponentClosingTags:p,isTagNameCaseSensitive:d,getTagContentType:_?(...eh)=>_(...eh)?N$1.RAW_TEXT:void 0:void 0,tokenizeAngularBlocks:s==="angular"?!0:void 0});if(s==="vue"){if(ja.some(ih=>ih.type==="docType"&&ih.value==="html"||ih.type==="element"&&ih.name.toLowerCase()==="html"))return Qs$2(n,Js$1,a);let eh,rh=()=>eh??(eh=Vr$1(n,{canSelfClose:o,allowHtmComponentClosingTags:p,isTagNameCaseSensitive:d})),ah=ih=>rh().rootNodes.find(({startSourceSpan:oh})=>oh&&oh.start.offset===ih.startSourceSpan.start.offset)??ih;for(let[ih,oh]of ja.entries()){let{endSourceSpan:uh,startSourceSpan:ch}=oh;if(uh===null)Ja=rh().errors,ja[ih]=ah(oh);else if(xo$1(oh,a)){let hh=rh().errors.find(dh=>dh.span.start.offset>ch.start.offset&&dh.span.start.offset<uh.end.offset);hh&&Ks$2(hh),ja[ih]=ah(oh)}}}Ja.length>0&&Ks$2(Ja[0]);let ec=eh=>{let rh=eh.name.startsWith(":")?eh.name.slice(1).split(":")[0]:null,ah=eh.nameSpan.toString(),ih=rh!==null&&ah.startsWith(`${rh}:`),oh=ih?ah.slice(rh.length+1):ah;eh.name=oh,eh.namespace=rh,eh.hasExplicitNamespace=ih},tc=eh=>{switch(eh.type){case"element":ec(eh);for(let rh of eh.attrs)ec(rh),rh.valueSpan?(rh.value=rh.valueSpan.toString(),/["']/.test(rh.value[0])&&(rh.value=rh.value.slice(1,-1))):rh.value=null;break;case"comment":eh.value=eh.sourceSpan.toString().slice(4,-3);break;case"text":eh.value=eh.sourceSpan.toString();break}},rc=(eh,rh)=>{let ah=eh.toLowerCase();return rh(ah)?ah:eh},nc=eh=>{if(eh.type==="element"&&(u&&(!eh.namespace||eh.namespace===eh.tagDefinition.implicitNamespacePrefix||ge$2(eh))&&(eh.name=rc(eh.name,rh=>js$2.has(rh))),c))for(let rh of eh.attrs)rh.namespace||(rh.name=rc(rh.name,ah=>tr$1.has(eh.name)&&(tr$1.get("*").has(ah)||tr$1.get(eh.name).has(ah))))},ic=eh=>{eh.sourceSpan&&eh.endSourceSpan&&(eh.sourceSpan=new f$1(eh.sourceSpan.start,eh.endSourceSpan.end))},uc=eh=>{if(eh.type==="element"){let rh=ze$1(d?eh.name:eh.name.toLowerCase());!eh.namespace||eh.namespace===rh.implicitNamespacePrefix||ge$2(eh)?eh.tagDefinition=rh:eh.tagDefinition=ze$1("")}};return Gt$1(new class extends lt$1{visitExpansionCase(eh,rh){s==="angular"&&this.visitChildren(rh,ah=>{ah(eh.expression)})}visit(eh){tc(eh),uc(eh),nc(eh),ic(eh)}},ja),ja}function xo$1(n,r){var a;if(n.type!=="element"||n.name!=="template")return!1;let s=(a=n.attrs.find(o=>o.name==="lang"))==null?void 0:a.value;return!s||$e$2(r,{language:s})==="html"}function Ks$2(n){let{msg:r,span:{start:a,end:s}}=n;throw Ws$2(r,{loc:{start:{line:a.line+1,column:a.col+1},end:{line:s.line+1,column:s.col+1}},cause:n})}function Xs$2(n,r,a={},s=!0){let{frontMatter:o,content:u}=s?zs$2(n):{frontMatter:null,content:n},c=new we$1(n,a.filepath),p=new ae$2(c,0,0,0),d=p.moveBy(n.length),_={type:"root",sourceSpan:new f$1(p,d),children:Qs$2(u,r,a)};if(o){let ec=new ae$2(c,0,0,0),tc=ec.moveBy(o.raw.length);o.sourceSpan=new f$1(ec,tc),_.children.unshift(o)}let ja=new er$1(_),Ja=(ec,tc)=>{let{offset:rc}=tc,nc=w$1(!1,n.slice(0,rc),/[^\n\r]/g," "),ic=Xs$2(nc+ec,r,a,!1);ic.sourceSpan=new f$1(tc,X$1(!1,ic.children,-1).sourceSpan.end);let uc=ic.children[0];return uc.length===rc?ic.children.shift():(uc.sourceSpan=new f$1(uc.sourceSpan.start.moveBy(rc),uc.sourceSpan.end),uc.value=uc.value.slice(rc)),ic};return ja.walk(ec=>{if(ec.type==="comment"){let tc=Ys$2(ec,Ja);tc&&ec.parent.replaceChild(ec,tc)}bo$1(ec),To$1(ec)}),ja}function rr$1(n){return{parse:(r,a)=>Xs$2(r,n,a),hasPragma:ss$1,astFormat:"html",locStart:se$1,locEnd:ie}}var Js$1={name:"html",normalizeTagName:!0,normalizeAttributeName:!0,allowHtmComponentClosingTags:!0},ko$1=rr$1(Js$1),Bo$1=rr$1({name:"angular"}),Lo$1=rr$1({name:"vue",isTagNameCaseSensitive:!0,shouldParseAsRawText(n,r,a,s){return n.toLowerCase()!=="html"&&!a&&(n!=="template"||s.some(({name:o,value:u})=>o==="lang"&&u!=="html"&&u!==""&&u!==void 0))}}),Fo$1=rr$1({name:"lwc",canSelfClose:!1}),Po$1={html:Ss$2},Bh=Wr$2;const prettierPluginHtml=Object.freeze(Object.defineProperty({__proto__:null,default:Bh,languages:_s$2,options:As$2,parsers:Ur$1,printers:Po$1},Symbol.toStringTag,{value:"Module"}));var Hs$1=Object.create,$e$1=Object.defineProperty,Ws$1=Object.getOwnPropertyDescriptor,Js=Object.getOwnPropertyNames,Xs$1=Object.getPrototypeOf,Gs$1=Object.prototype.hasOwnProperty,Dt$1=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),Ys$1=(n,r)=>{for(var a in r)$e$1(n,a,{get:r[a],enumerable:!0})},Qs$1=(n,r,a,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Js(r))!Gs$1.call(n,o)&&o!==a&&$e$1(n,o,{get:()=>r[o],enumerable:!(s=Ws$1(r,o))||s.enumerable});return n},qe=(n,r,a)=>(a=n!=null?Hs$1(Xs$1(n)):{},Qs$1($e$1(a,"default",{value:n,enumerable:!0}),n)),wt=Dt$1(n=>{Object.defineProperty(n,"__esModule",{value:!0});function r(th,sc){if(th==null)return{};var nh={},lh=Object.keys(th),mh,Ah;for(Ah=0;Ah<lh.length;Ah++)mh=lh[Ah],!(sc.indexOf(mh)>=0)&&(nh[mh]=th[mh]);return nh}var a=class{constructor(th,sc,nh){this.line=void 0,this.column=void 0,this.index=void 0,this.line=th,this.column=sc,this.index=nh}},s=class{constructor(th,sc){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=th,this.end=sc}};function o(th,sc){let{line:nh,column:lh,index:mh}=th;return new a(nh,lh+sc,mh+sc)}var u="BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED",c={ImportMetaOutsideModule:{message:`import.meta may appear only with 'sourceType: "module"'`,code:u},ImportOutsideModule:{message:`'import' and 'export' may appear only with 'sourceType: "module"'`,code:u}},p={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},d=th=>th.type==="UpdateExpression"?p.UpdateExpression[`${th.prefix}`]:p[th.type],_={AccessorIsGenerator:({kind:th})=>`A ${th}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitUsingNotInAsyncContext:"'await using' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:th})=>`Missing initializer in ${th} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeferImportRequiresNamespace:'Only `import defer * as x from "./module"` is valid.',DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:th})=>`\`${th}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",DynamicImportPhaseRequiresImportExpressions:({phase:th})=>`'import.${th}(...)' can only be parsed when using the 'createImportExpressions' option.`,ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:th,exportName:sc})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${th}' as '${sc}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:th})=>`'${th==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:th})=>`Unsyntactic ${th==="BreakStatement"?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportAttributesUseAssert:"The `assert` keyword in import attributes is deprecated and it has been replaced by the `with` keyword. You can enable the `deprecatedAssertSyntax: true` option in the import attributes plugin to suppress this error.",ImportBindingIsString:({importName:th})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${th}" as foo }\`?`,ImportCallArgumentTrailingComma:"Trailing comma is disallowed inside import(...) arguments.",ImportCallArity:({maxArgumentCount:th})=>`\`import()\` requires exactly ${th===1?"one argument":"one or two arguments"}.`,ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:th})=>`Expected number in radix ${th}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:th})=>`Escape sequence in keyword ${th}.`,InvalidIdentifier:({identifierName:th})=>`Invalid identifier ${th}.`,InvalidLhs:({ancestor:th})=>`Invalid left-hand side in ${d(th)}.`,InvalidLhsBinding:({ancestor:th})=>`Binding invalid left-hand side in ${d(th)}.`,InvalidLhsOptionalChaining:({ancestor:th})=>`Invalid optional chaining in the left-hand side of ${d(th)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:th})=>`Unexpected character '${th}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:th})=>`Private name #${th} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:th})=>`Label '${th}' is already declared.`,LetInLexicalBinding:"'let' is disallowed as a lexically bound name.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:th})=>`This experimental syntax requires enabling the parser plugin: ${th.map(sc=>JSON.stringify(sc)).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:th})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${th.map(sc=>JSON.stringify(sc)).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:th})=>`Duplicate key "${th}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:th})=>`An export name cannot include a lone surrogate, found '\\u${th.toString(16)}'.`,ModuleExportUndefined:({localName:th})=>`Export '${th}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:th})=>`Private names are only allowed in property accesses (\`obj.#${th}\`) or in \`in\` expressions (\`#${th} in obj\`).`,PrivateNameRedeclaration:({identifierName:th})=>`Duplicate private name #${th}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",SourcePhaseImportRequiresDefault:'Only `import source x from "./module"` is valid.',StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:th})=>`Unexpected keyword '${th}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:th})=>`Unexpected reserved word '${th}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:th,unexpected:sc})=>`Unexpected token${sc?` '${sc}'.`:""}${th?`, expected "${th}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script`.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:th,onlyValidPropertyName:sc})=>`The only valid meta property for ${th} is ${th}.${sc}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationExport:"Using declaration cannot be exported.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:th})=>`Identifier '${th}' has already been declared.`,YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},ja={StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:th})=>`Assigning to '${th}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:th})=>`Binding '${th}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."},Ja=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]),ec={PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:th})=>`Invalid topic token ${th}. In order to use ${th} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${th}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:th})=>`Hack-style pipe body cannot be an unparenthesized ${d({type:th})}; please wrap it in parentheses.`,PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'},tc=["toMessage"],rc=["message"];function nc(th,sc,nh){Object.defineProperty(th,sc,{enumerable:!1,configurable:!0,value:nh})}function ic(th){let{toMessage:sc}=th,nh=r(th,tc);return function lh(mh,Ah){let Eh=new SyntaxError;return Object.assign(Eh,nh,{loc:mh,pos:mh.index}),"missingPlugin"in Ah&&Object.assign(Eh,{missingPlugin:Ah.missingPlugin}),nc(Eh,"clone",function(Oh={}){var Ih;let{line:Mh,column:Yh,index:Qp}=(Ih=Oh.loc)!=null?Ih:mh;return lh(new a(Mh,Yh,Qp),Object.assign({},Ah,Oh.details))}),nc(Eh,"details",Ah),Object.defineProperty(Eh,"message",{configurable:!0,get(){let Oh=`${sc(Ah)} (${mh.line}:${mh.column})`;return this.message=Oh,Oh},set(Oh){Object.defineProperty(this,"message",{value:Oh,writable:!0})}}),Eh}}function uc(th,sc){if(Array.isArray(th))return lh=>uc(lh,th[0]);let nh={};for(let lh of Object.keys(th)){let mh=th[lh],Ah=typeof mh=="string"?{message:()=>mh}:typeof mh=="function"?{message:mh}:mh,{message:Eh}=Ah,Oh=r(Ah,rc),Ih=typeof Eh=="string"?()=>Eh:Eh;nh[lh]=ic(Object.assign({code:"BABEL_PARSER_SYNTAX_ERROR",reasonCode:lh,toMessage:Ih},sc?{syntaxPlugin:sc}:{},Oh))}return nh}var eh=Object.assign({},uc(c),uc(_),uc(ja),uc`pipelineOperator`(ec)),{defineProperty:rh}=Object,ah=(th,sc)=>rh(th,sc,{enumerable:!1,value:th[sc]});function ih(th){return th.loc.start&&ah(th.loc.start,"index"),th.loc.end&&ah(th.loc.end,"index"),th}var oh=th=>class extends th{parse(){let sc=ih(super.parse());return this.options.tokens&&(sc.tokens=sc.tokens.map(ih)),sc}parseRegExpLiteral({pattern:sc,flags:nh}){let lh=null;try{lh=new RegExp(sc,nh)}catch{}let mh=this.estreeParseLiteral(lh);return mh.regex={pattern:sc,flags:nh},mh}parseBigIntLiteral(sc){let nh;try{nh=BigInt(sc)}catch{nh=null}let lh=this.estreeParseLiteral(nh);return lh.bigint=String(lh.value||sc),lh}parseDecimalLiteral(sc){let nh=this.estreeParseLiteral(null);return nh.decimal=String(nh.value||sc),nh}estreeParseLiteral(sc){return this.parseLiteral(sc,"Literal")}parseStringLiteral(sc){return this.estreeParseLiteral(sc)}parseNumericLiteral(sc){return this.estreeParseLiteral(sc)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(sc){return this.estreeParseLiteral(sc)}directiveToStmt(sc){let nh=sc.value;delete sc.value,nh.type="Literal",nh.raw=nh.extra.raw,nh.value=nh.extra.expressionValue;let lh=sc;return lh.type="ExpressionStatement",lh.expression=nh,lh.directive=nh.extra.rawValue,delete nh.extra,lh}initFunction(sc,nh){super.initFunction(sc,nh),sc.expression=!1}checkDeclaration(sc){sc!=null&&this.isObjectProperty(sc)?this.checkDeclaration(sc.value):super.checkDeclaration(sc)}getObjectOrClassMethodParams(sc){return sc.value.params}isValidDirective(sc){var nh;return sc.type==="ExpressionStatement"&&sc.expression.type==="Literal"&&typeof sc.expression.value=="string"&&!((nh=sc.expression.extra)!=null&&nh.parenthesized)}parseBlockBody(sc,nh,lh,mh,Ah){super.parseBlockBody(sc,nh,lh,mh,Ah);let Eh=sc.directives.map(Oh=>this.directiveToStmt(Oh));sc.body=Eh.concat(sc.body),delete sc.directives}pushClassMethod(sc,nh,lh,mh,Ah,Eh){this.parseMethod(nh,lh,mh,Ah,Eh,"ClassMethod",!0),nh.typeParameters&&(nh.value.typeParameters=nh.typeParameters,delete nh.typeParameters),sc.body.push(nh)}parsePrivateName(){let sc=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(sc):sc}convertPrivateNameToPrivateIdentifier(sc){let nh=super.getPrivateNameSV(sc);return sc=sc,delete sc.id,sc.name=nh,sc.type="PrivateIdentifier",sc}isPrivateName(sc){return this.getPluginOption("estree","classFeatures")?sc.type==="PrivateIdentifier":super.isPrivateName(sc)}getPrivateNameSV(sc){return this.getPluginOption("estree","classFeatures")?sc.name:super.getPrivateNameSV(sc)}parseLiteral(sc,nh){let lh=super.parseLiteral(sc,nh);return lh.raw=lh.extra.raw,delete lh.extra,lh}parseFunctionBody(sc,nh,lh=!1){super.parseFunctionBody(sc,nh,lh),sc.expression=sc.body.type!=="BlockStatement"}parseMethod(sc,nh,lh,mh,Ah,Eh,Oh=!1){let Ih=this.startNode();return Ih.kind=sc.kind,Ih=super.parseMethod(Ih,nh,lh,mh,Ah,Eh,Oh),Ih.type="FunctionExpression",delete Ih.kind,sc.value=Ih,Eh==="ClassPrivateMethod"&&(sc.computed=!1),this.finishNode(sc,"MethodDefinition")}nameIsConstructor(sc){return sc.type==="Literal"?sc.value==="constructor":super.nameIsConstructor(sc)}parseClassProperty(...sc){let nh=super.parseClassProperty(...sc);return this.getPluginOption("estree","classFeatures")&&(nh.type="PropertyDefinition"),nh}parseClassPrivateProperty(...sc){let nh=super.parseClassPrivateProperty(...sc);return this.getPluginOption("estree","classFeatures")&&(nh.type="PropertyDefinition",nh.computed=!1),nh}parseObjectMethod(sc,nh,lh,mh,Ah){let Eh=super.parseObjectMethod(sc,nh,lh,mh,Ah);return Eh&&(Eh.type="Property",Eh.kind==="method"&&(Eh.kind="init"),Eh.shorthand=!1),Eh}parseObjectProperty(sc,nh,lh,mh){let Ah=super.parseObjectProperty(sc,nh,lh,mh);return Ah&&(Ah.kind="init",Ah.type="Property"),Ah}isValidLVal(sc,nh,lh){return sc==="Property"?"value":super.isValidLVal(sc,nh,lh)}isAssignable(sc,nh){return sc!=null&&this.isObjectProperty(sc)?this.isAssignable(sc.value,nh):super.isAssignable(sc,nh)}toAssignable(sc,nh=!1){if(sc!=null&&this.isObjectProperty(sc)){let{key:lh,value:mh}=sc;this.isPrivateName(lh)&&this.classScope.usePrivateName(this.getPrivateNameSV(lh),lh.loc.start),this.toAssignable(mh,nh)}else super.toAssignable(sc,nh)}toAssignableObjectExpressionProp(sc,nh,lh){sc.type==="Property"&&(sc.kind==="get"||sc.kind==="set")?this.raise(eh.PatternHasAccessor,sc.key):sc.type==="Property"&&sc.method?this.raise(eh.PatternHasMethod,sc.key):super.toAssignableObjectExpressionProp(sc,nh,lh)}finishCallExpression(sc,nh){let lh=super.finishCallExpression(sc,nh);if(lh.callee.type==="Import"){if(lh.type="ImportExpression",lh.source=lh.arguments[0],this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions")){var mh,Ah;lh.options=(mh=lh.arguments[1])!=null?mh:null,lh.attributes=(Ah=lh.arguments[1])!=null?Ah:null}delete lh.arguments,delete lh.callee}return lh}toReferencedArguments(sc){sc.type!=="ImportExpression"&&super.toReferencedArguments(sc)}parseExport(sc,nh){let lh=this.state.lastTokStartLoc,mh=super.parseExport(sc,nh);switch(mh.type){case"ExportAllDeclaration":mh.exported=null;break;case"ExportNamedDeclaration":mh.specifiers.length===1&&mh.specifiers[0].type==="ExportNamespaceSpecifier"&&(mh.type="ExportAllDeclaration",mh.exported=mh.specifiers[0].exported,delete mh.specifiers);case"ExportDefaultDeclaration":{var Ah;let{declaration:Eh}=mh;(Eh==null?void 0:Eh.type)==="ClassDeclaration"&&((Ah=Eh.decorators)==null?void 0:Ah.length)>0&&Eh.start===mh.start&&this.resetStartLocation(mh,lh)}break}return mh}parseSubscript(sc,nh,lh,mh){let Ah=super.parseSubscript(sc,nh,lh,mh);if(mh.optionalChainMember){if((Ah.type==="OptionalMemberExpression"||Ah.type==="OptionalCallExpression")&&(Ah.type=Ah.type.substring(8)),mh.stop){let Eh=this.startNodeAtNode(Ah);return Eh.expression=Ah,this.finishNode(Eh,"ChainExpression")}}else(Ah.type==="MemberExpression"||Ah.type==="CallExpression")&&(Ah.optional=!1);return Ah}isOptionalMemberExpression(sc){return sc.type==="ChainExpression"?sc.expression.type==="MemberExpression":super.isOptionalMemberExpression(sc)}hasPropertyAsPrivateName(sc){return sc.type==="ChainExpression"&&(sc=sc.expression),super.hasPropertyAsPrivateName(sc)}isObjectProperty(sc){return sc.type==="Property"&&sc.kind==="init"&&!sc.method}isObjectMethod(sc){return sc.type==="Property"&&(sc.method||sc.kind==="get"||sc.kind==="set")}finishNodeAt(sc,nh,lh){return ih(super.finishNodeAt(sc,nh,lh))}resetStartLocation(sc,nh){super.resetStartLocation(sc,nh),ih(sc)}resetEndLocation(sc,nh=this.state.lastTokEndLoc){super.resetEndLocation(sc,nh),ih(sc)}},uh=class{constructor(th,sc){this.token=void 0,this.preserveSpace=void 0,this.token=th,this.preserveSpace=!!sc}},ch={brace:new uh("{"),j_oTag:new uh("<tag"),j_cTag:new uh("</tag"),j_expr:new uh("<tag>...</tag>",!0)};ch.template=new uh("`",!0);var hh=!0,dh=!0,gh=!0,fh=!0,vh=!0,ph=!0,yh=class{constructor(th,sc={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=th,this.keyword=sc.keyword,this.beforeExpr=!!sc.beforeExpr,this.startsExpr=!!sc.startsExpr,this.rightAssociative=!!sc.rightAssociative,this.isLoop=!!sc.isLoop,this.isAssign=!!sc.isAssign,this.prefix=!!sc.prefix,this.postfix=!!sc.postfix,this.binop=sc.binop!=null?sc.binop:null,this.updateContext=null}},xh=new Map;function _h(th,sc={}){sc.keyword=th;let nh=Lh(th,sc);return xh.set(th,nh),nh}function bh(th,sc){return Lh(th,{beforeExpr:hh,binop:sc})}var Dh=-1,Th=[],Ch=[],wh=[],Nh=[],Rh=[],kh=[];function Lh(th,sc={}){var nh,lh,mh,Ah;return++Dh,Ch.push(th),wh.push((nh=sc.binop)!=null?nh:-1),Nh.push((lh=sc.beforeExpr)!=null?lh:!1),Rh.push((mh=sc.startsExpr)!=null?mh:!1),kh.push((Ah=sc.prefix)!=null?Ah:!1),Th.push(new yh(th,sc)),Dh}function Fh(th,sc={}){var nh,lh,mh,Ah;return++Dh,xh.set(th,Dh),Ch.push(th),wh.push((nh=sc.binop)!=null?nh:-1),Nh.push((lh=sc.beforeExpr)!=null?lh:!1),Rh.push((mh=sc.startsExpr)!=null?mh:!1),kh.push((Ah=sc.prefix)!=null?Ah:!1),Th.push(new yh("name",sc)),Dh}var Wh={bracketL:Lh("[",{beforeExpr:hh,startsExpr:dh}),bracketHashL:Lh("#[",{beforeExpr:hh,startsExpr:dh}),bracketBarL:Lh("[|",{beforeExpr:hh,startsExpr:dh}),bracketR:Lh("]"),bracketBarR:Lh("|]"),braceL:Lh("{",{beforeExpr:hh,startsExpr:dh}),braceBarL:Lh("{|",{beforeExpr:hh,startsExpr:dh}),braceHashL:Lh("#{",{beforeExpr:hh,startsExpr:dh}),braceR:Lh("}"),braceBarR:Lh("|}"),parenL:Lh("(",{beforeExpr:hh,startsExpr:dh}),parenR:Lh(")"),comma:Lh(",",{beforeExpr:hh}),semi:Lh(";",{beforeExpr:hh}),colon:Lh(":",{beforeExpr:hh}),doubleColon:Lh("::",{beforeExpr:hh}),dot:Lh("."),question:Lh("?",{beforeExpr:hh}),questionDot:Lh("?."),arrow:Lh("=>",{beforeExpr:hh}),template:Lh("template"),ellipsis:Lh("...",{beforeExpr:hh}),backQuote:Lh("`",{startsExpr:dh}),dollarBraceL:Lh("${",{beforeExpr:hh,startsExpr:dh}),templateTail:Lh("...`",{startsExpr:dh}),templateNonTail:Lh("...${",{beforeExpr:hh,startsExpr:dh}),at:Lh("@"),hash:Lh("#",{startsExpr:dh}),interpreterDirective:Lh("#!..."),eq:Lh("=",{beforeExpr:hh,isAssign:fh}),assign:Lh("_=",{beforeExpr:hh,isAssign:fh}),slashAssign:Lh("_=",{beforeExpr:hh,isAssign:fh}),xorAssign:Lh("_=",{beforeExpr:hh,isAssign:fh}),moduloAssign:Lh("_=",{beforeExpr:hh,isAssign:fh}),incDec:Lh("++/--",{prefix:vh,postfix:ph,startsExpr:dh}),bang:Lh("!",{beforeExpr:hh,prefix:vh,startsExpr:dh}),tilde:Lh("~",{beforeExpr:hh,prefix:vh,startsExpr:dh}),doubleCaret:Lh("^^",{startsExpr:dh}),doubleAt:Lh("@@",{startsExpr:dh}),pipeline:bh("|>",0),nullishCoalescing:bh("??",1),logicalOR:bh("||",1),logicalAND:bh("&&",2),bitwiseOR:bh("|",3),bitwiseXOR:bh("^",4),bitwiseAND:bh("&",5),equality:bh("==/!=/===/!==",6),lt:bh("</>/<=/>=",7),gt:bh("</>/<=/>=",7),relational:bh("</>/<=/>=",7),bitShift:bh("<</>>/>>>",8),bitShiftL:bh("<</>>/>>>",8),bitShiftR:bh("<</>>/>>>",8),plusMin:Lh("+/-",{beforeExpr:hh,binop:9,prefix:vh,startsExpr:dh}),modulo:Lh("%",{binop:10,startsExpr:dh}),star:Lh("*",{binop:10}),slash:bh("/",10),exponent:Lh("**",{beforeExpr:hh,binop:11,rightAssociative:!0}),_in:_h("in",{beforeExpr:hh,binop:7}),_instanceof:_h("instanceof",{beforeExpr:hh,binop:7}),_break:_h("break"),_case:_h("case",{beforeExpr:hh}),_catch:_h("catch"),_continue:_h("continue"),_debugger:_h("debugger"),_default:_h("default",{beforeExpr:hh}),_else:_h("else",{beforeExpr:hh}),_finally:_h("finally"),_function:_h("function",{startsExpr:dh}),_if:_h("if"),_return:_h("return",{beforeExpr:hh}),_switch:_h("switch"),_throw:_h("throw",{beforeExpr:hh,prefix:vh,startsExpr:dh}),_try:_h("try"),_var:_h("var"),_const:_h("const"),_with:_h("with"),_new:_h("new",{beforeExpr:hh,startsExpr:dh}),_this:_h("this",{startsExpr:dh}),_super:_h("super",{startsExpr:dh}),_class:_h("class",{startsExpr:dh}),_extends:_h("extends",{beforeExpr:hh}),_export:_h("export"),_import:_h("import",{startsExpr:dh}),_null:_h("null",{startsExpr:dh}),_true:_h("true",{startsExpr:dh}),_false:_h("false",{startsExpr:dh}),_typeof:_h("typeof",{beforeExpr:hh,prefix:vh,startsExpr:dh}),_void:_h("void",{beforeExpr:hh,prefix:vh,startsExpr:dh}),_delete:_h("delete",{beforeExpr:hh,prefix:vh,startsExpr:dh}),_do:_h("do",{isLoop:gh,beforeExpr:hh}),_for:_h("for",{isLoop:gh}),_while:_h("while",{isLoop:gh}),_as:Fh("as",{startsExpr:dh}),_assert:Fh("assert",{startsExpr:dh}),_async:Fh("async",{startsExpr:dh}),_await:Fh("await",{startsExpr:dh}),_defer:Fh("defer",{startsExpr:dh}),_from:Fh("from",{startsExpr:dh}),_get:Fh("get",{startsExpr:dh}),_let:Fh("let",{startsExpr:dh}),_meta:Fh("meta",{startsExpr:dh}),_of:Fh("of",{startsExpr:dh}),_sent:Fh("sent",{startsExpr:dh}),_set:Fh("set",{startsExpr:dh}),_source:Fh("source",{startsExpr:dh}),_static:Fh("static",{startsExpr:dh}),_using:Fh("using",{startsExpr:dh}),_yield:Fh("yield",{startsExpr:dh}),_asserts:Fh("asserts",{startsExpr:dh}),_checks:Fh("checks",{startsExpr:dh}),_exports:Fh("exports",{startsExpr:dh}),_global:Fh("global",{startsExpr:dh}),_implements:Fh("implements",{startsExpr:dh}),_intrinsic:Fh("intrinsic",{startsExpr:dh}),_infer:Fh("infer",{startsExpr:dh}),_is:Fh("is",{startsExpr:dh}),_mixins:Fh("mixins",{startsExpr:dh}),_proto:Fh("proto",{startsExpr:dh}),_require:Fh("require",{startsExpr:dh}),_satisfies:Fh("satisfies",{startsExpr:dh}),_keyof:Fh("keyof",{startsExpr:dh}),_readonly:Fh("readonly",{startsExpr:dh}),_unique:Fh("unique",{startsExpr:dh}),_abstract:Fh("abstract",{startsExpr:dh}),_declare:Fh("declare",{startsExpr:dh}),_enum:Fh("enum",{startsExpr:dh}),_module:Fh("module",{startsExpr:dh}),_namespace:Fh("namespace",{startsExpr:dh}),_interface:Fh("interface",{startsExpr:dh}),_type:Fh("type",{startsExpr:dh}),_opaque:Fh("opaque",{startsExpr:dh}),name:Lh("name",{startsExpr:dh}),string:Lh("string",{startsExpr:dh}),num:Lh("num",{startsExpr:dh}),bigint:Lh("bigint",{startsExpr:dh}),decimal:Lh("decimal",{startsExpr:dh}),regexp:Lh("regexp",{startsExpr:dh}),privateName:Lh("#name",{startsExpr:dh}),eof:Lh("eof"),jsxName:Lh("jsxName"),jsxText:Lh("jsxText",{beforeExpr:!0}),jsxTagStart:Lh("jsxTagStart",{startsExpr:!0}),jsxTagEnd:Lh("jsxTagEnd"),placeholder:Lh("%%",{startsExpr:!0})};function Qh(th){return th>=93&&th<=132}function jh(th){return th<=92}function Hh(th){return th>=58&&th<=132}function qh(th){return th>=58&&th<=136}function nd(th){return Nh[th]}function Sh(th){return Rh[th]}function Gh(th){return th>=29&&th<=33}function zh(th){return th>=129&&th<=131}function $h(th){return th>=90&&th<=92}function Ph(th){return th>=58&&th<=92}function Vh(th){return th>=39&&th<=59}function Xh(th){return th===34}function Zh(th){return kh[th]}function Uh(th){return th>=121&&th<=123}function Kh(th){return th>=124&&th<=130}function ed(th){return Ch[th]}function Jh(th){return wh[th]}function od(th){return th===57}function ud(th){return th>=24&&th<=25}function ld(th){return Th[th]}Th[8].updateContext=th=>{th.pop()},Th[5].updateContext=Th[7].updateContext=Th[23].updateContext=th=>{th.push(ch.brace)},Th[22].updateContext=th=>{th[th.length-1]===ch.template?th.pop():th.push(ch.template)},Th[142].updateContext=th=>{th.push(ch.j_expr,ch.j_oTag)};var vd="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",_d="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",Ad=new RegExp("["+vd+"]"),Td=new RegExp("["+vd+_d+"]");vd=_d=null;var pd=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],$d=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function wd(th,sc){let nh=65536;for(let lh=0,mh=sc.length;lh<mh;lh+=2){if(nh+=sc[lh],nh>th)return!1;if(nh+=sc[lh+1],nh>=th)return!0}return!1}function md(th){return th<65?th===36:th<=90?!0:th<97?th===95:th<=122?!0:th<=65535?th>=170&&Ad.test(String.fromCharCode(th)):wd(th,pd)}function xd(th){return th<48?th===36:th<58?!0:th<65?!1:th<=90?!0:th<97?th===95:th<=122?!0:th<=65535?th>=170&&Td.test(String.fromCharCode(th)):wd(th,pd)||wd(th,$d)}var Id={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},jd=new Set(Id.keyword),Xd=new Set(Id.strict),Vd=new Set(Id.strictBind);function bd(th,sc){return sc&&th==="await"||th==="enum"}function Cd(th,sc){return bd(th,sc)||Xd.has(th)}function uf(th){return Vd.has(th)}function cf(th,sc){return Cd(th,sc)||uf(th)}function kf(th){return jd.has(th)}function Ff(th,sc,nh){return th===64&&sc===64&&md(nh)}var Vf=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function zf(th){return Vf.has(th)}var Zd=class{constructor(th){this.flags=0,this.names=new Map,this.firstLexicalName="",this.flags=th}},qd=class{constructor(th,sc){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=th,this.inModule=sc}get inTopLevel(){return(this.currentScope().flags&1)>0}get inFunction(){return(this.currentVarScopeFlags()&2)>0}get allowSuper(){return(this.currentThisScopeFlags()&16)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&32)>0}get inClass(){return(this.currentThisScopeFlags()&64)>0}get inClassAndNotInNonArrowFunction(){let th=this.currentThisScopeFlags();return(th&64)>0&&(th&2)===0}get inStaticBlock(){for(let th=this.scopeStack.length-1;;th--){let{flags:sc}=this.scopeStack[th];if(sc&128)return!0;if(sc&451)return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&2)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(th){return new Zd(th)}enter(th){this.scopeStack.push(this.createScope(th))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(th){return!!(th.flags&130||!this.parser.inModule&&th.flags&1)}declareName(th,sc,nh){let lh=this.currentScope();if(sc&8||sc&16){this.checkRedeclarationInScope(lh,th,sc,nh);let mh=lh.names.get(th)||0;sc&16?mh=mh|4:(lh.firstLexicalName||(lh.firstLexicalName=th),mh=mh|2),lh.names.set(th,mh),sc&8&&this.maybeExportDefined(lh,th)}else if(sc&4)for(let mh=this.scopeStack.length-1;mh>=0&&(lh=this.scopeStack[mh],this.checkRedeclarationInScope(lh,th,sc,nh),lh.names.set(th,(lh.names.get(th)||0)|1),this.maybeExportDefined(lh,th),!(lh.flags&387));--mh);this.parser.inModule&&lh.flags&1&&this.undefinedExports.delete(th)}maybeExportDefined(th,sc){this.parser.inModule&&th.flags&1&&this.undefinedExports.delete(sc)}checkRedeclarationInScope(th,sc,nh,lh){this.isRedeclaredInScope(th,sc,nh)&&this.parser.raise(eh.VarRedeclaration,lh,{identifierName:sc})}isRedeclaredInScope(th,sc,nh){if(!(nh&1))return!1;if(nh&8)return th.names.has(sc);let lh=th.names.get(sc);return nh&16?(lh&2)>0||!this.treatFunctionsAsVarInScope(th)&&(lh&1)>0:(lh&2)>0&&!(th.flags&8&&th.firstLexicalName===sc)||!this.treatFunctionsAsVarInScope(th)&&(lh&4)>0}checkLocalExport(th){let{name:sc}=th;this.scopeStack[0].names.has(sc)||this.undefinedExports.set(sc,th.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let th=this.scopeStack.length-1;;th--){let{flags:sc}=this.scopeStack[th];if(sc&387)return sc}}currentThisScopeFlags(){for(let th=this.scopeStack.length-1;;th--){let{flags:sc}=this.scopeStack[th];if(sc&451&&!(sc&4))return sc}}},Gf=class extends Zd{constructor(...th){super(...th),this.declareFunctions=new Set}},Uf=class extends qd{createScope(th){return new Gf(th)}declareName(th,sc,nh){let lh=this.currentScope();if(sc&2048){this.checkRedeclarationInScope(lh,th,sc,nh),this.maybeExportDefined(lh,th),lh.declareFunctions.add(th);return}super.declareName(th,sc,nh)}isRedeclaredInScope(th,sc,nh){if(super.isRedeclaredInScope(th,sc,nh))return!0;if(nh&2048&&!th.declareFunctions.has(sc)){let lh=th.names.get(sc);return(lh&4)>0||(lh&2)>0}return!1}checkLocalExport(th){this.scopeStack[0].declareFunctions.has(th.name)||super.checkLocalExport(th)}},Qf=class{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}hasPlugin(th){if(typeof th=="string")return this.plugins.has(th);{let[sc,nh]=th;if(!this.hasPlugin(sc))return!1;let lh=this.plugins.get(sc);for(let mh of Object.keys(nh))if((lh==null?void 0:lh[mh])!==nh[mh])return!1;return!0}}getPluginOption(th,sc){var nh;return(nh=this.plugins.get(th))==null?void 0:nh[sc]}};function hf(th,sc){th.trailingComments===void 0?th.trailingComments=sc:th.trailingComments.unshift(...sc)}function Hf(th,sc){th.leadingComments===void 0?th.leadingComments=sc:th.leadingComments.unshift(...sc)}function Nd(th,sc){th.innerComments===void 0?th.innerComments=sc:th.innerComments.unshift(...sc)}function Ld(th,sc,nh){let lh=null,mh=sc.length;for(;lh===null&&mh>0;)lh=sc[--mh];lh===null||lh.start>nh.start?Nd(th,nh.comments):hf(lh,nh.comments)}var Wf=class extends Qf{addComment(th){this.filename&&(th.loc.filename=this.filename);let{commentsLen:sc}=this.state;this.comments.length!==sc&&(this.comments.length=sc),this.comments.push(th),this.state.commentsLen++}processComment(th){let{commentStack:sc}=this.state,nh=sc.length;if(nh===0)return;let lh=nh-1,mh=sc[lh];mh.start===th.end&&(mh.leadingNode=th,lh--);let{start:Ah}=th;for(;lh>=0;lh--){let Eh=sc[lh],Oh=Eh.end;if(Oh>Ah)Eh.containingNode=th,this.finalizeComment(Eh),sc.splice(lh,1);else{Oh===Ah&&(Eh.trailingNode=th);break}}}finalizeComment(th){let{comments:sc}=th;if(th.leadingNode!==null||th.trailingNode!==null)th.leadingNode!==null&&hf(th.leadingNode,sc),th.trailingNode!==null&&Hf(th.trailingNode,sc);else{let{containingNode:nh,start:lh}=th;if(this.input.charCodeAt(lh-1)===44)switch(nh.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":Ld(nh,nh.properties,th);break;case"CallExpression":case"OptionalCallExpression":Ld(nh,nh.arguments,th);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":Ld(nh,nh.params,th);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":Ld(nh,nh.elements,th);break;case"ExportNamedDeclaration":case"ImportDeclaration":Ld(nh,nh.specifiers,th);break;default:Nd(nh,sc)}else Nd(nh,sc)}}finalizeRemainingComments(){let{commentStack:th}=this.state;for(let sc=th.length-1;sc>=0;sc--)this.finalizeComment(th[sc]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(th){let{commentStack:sc}=this.state,{length:nh}=sc;if(nh===0)return;let lh=sc[nh-1];lh.leadingNode===th&&(lh.leadingNode=null)}resetPreviousIdentifierLeadingComments(th){let{commentStack:sc}=this.state,{length:nh}=sc;nh!==0&&(sc[nh-1].trailingNode===th?sc[nh-1].trailingNode=null:nh>=2&&sc[nh-2].trailingNode===th&&(sc[nh-2].trailingNode=null))}takeSurroundingComments(th,sc,nh){let{commentStack:lh}=this.state,mh=lh.length;if(mh===0)return;let Ah=mh-1;for(;Ah>=0;Ah--){let Eh=lh[Ah],Oh=Eh.end;if(Eh.start===nh)Eh.leadingNode=th;else if(Oh===sc)Eh.trailingNode=th;else if(Oh<sc)break}}},pf=/\r\n?|[\n\u2028\u2029]/,zd=new RegExp(pf.source,"g");function Bd(th){switch(th){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}var Kd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Gd=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g,df=new RegExp("(?=("+Gd.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y");function Yf(th){switch(th){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}var jf=class Rf{constructor(){this.flags=1024,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.labels=[],this.commentsLen=0,this.commentStack=[],this.pos=0,this.type=139,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.context=[ch.brace],this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}get strict(){return(this.flags&1)>0}set strict(sc){sc?this.flags|=1:this.flags&=-2}init({strictMode:sc,sourceType:nh,startLine:lh,startColumn:mh}){this.strict=sc===!1?!1:sc===!0?!0:nh==="module",this.curLine=lh,this.lineStart=-mh,this.startLoc=this.endLoc=new a(lh,mh,0)}get maybeInArrowParameters(){return(this.flags&2)>0}set maybeInArrowParameters(sc){sc?this.flags|=2:this.flags&=-3}get inType(){return(this.flags&4)>0}set inType(sc){sc?this.flags|=4:this.flags&=-5}get noAnonFunctionType(){return(this.flags&8)>0}set noAnonFunctionType(sc){sc?this.flags|=8:this.flags&=-9}get hasFlowComment(){return(this.flags&16)>0}set hasFlowComment(sc){sc?this.flags|=16:this.flags&=-17}get isAmbientContext(){return(this.flags&32)>0}set isAmbientContext(sc){sc?this.flags|=32:this.flags&=-33}get inAbstractClass(){return(this.flags&64)>0}set inAbstractClass(sc){sc?this.flags|=64:this.flags&=-65}get inDisallowConditionalTypesContext(){return(this.flags&128)>0}set inDisallowConditionalTypesContext(sc){sc?this.flags|=128:this.flags&=-129}get soloAwait(){return(this.flags&256)>0}set soloAwait(sc){sc?this.flags|=256:this.flags&=-257}get inFSharpPipelineDirectBody(){return(this.flags&512)>0}set inFSharpPipelineDirectBody(sc){sc?this.flags|=512:this.flags&=-513}get canStartJSXElement(){return(this.flags&1024)>0}set canStartJSXElement(sc){sc?this.flags|=1024:this.flags&=-1025}get containsEsc(){return(this.flags&2048)>0}set containsEsc(sc){sc?this.flags|=2048:this.flags&=-2049}curPosition(){return new a(this.curLine,this.pos-this.lineStart,this.pos)}clone(){let sc=new Rf;return sc.flags=this.flags,sc.curLine=this.curLine,sc.lineStart=this.lineStart,sc.startLoc=this.startLoc,sc.endLoc=this.endLoc,sc.errors=this.errors.slice(),sc.potentialArrowAt=this.potentialArrowAt,sc.noArrowAt=this.noArrowAt.slice(),sc.noArrowParamsConversionAt=this.noArrowParamsConversionAt.slice(),sc.topicContext=this.topicContext,sc.labels=this.labels.slice(),sc.commentsLen=this.commentsLen,sc.commentStack=this.commentStack.slice(),sc.pos=this.pos,sc.type=this.type,sc.value=this.value,sc.start=this.start,sc.end=this.end,sc.lastTokEndLoc=this.lastTokEndLoc,sc.lastTokStartLoc=this.lastTokStartLoc,sc.context=this.context.slice(),sc.firstInvalidTemplateEscapePos=this.firstInvalidTemplateEscapePos,sc.strictErrors=this.strictErrors,sc.tokensLength=this.tokensLength,sc}},Xf=function(th){return th>=48&&th<=57},ff={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},Ud={bin:th=>th===48||th===49,oct:th=>th>=48&&th<=55,dec:th=>th>=48&&th<=57,hex:th=>th>=48&&th<=57||th>=65&&th<=70||th>=97&&th<=102};function mf(th,sc,nh,lh,mh,Ah){let Eh=nh,Oh=lh,Ih=mh,Mh="",Yh=null,Qp=nh,{length:td}=sc;for(;;){if(nh>=td){Ah.unterminated(Eh,Oh,Ih),Mh+=sc.slice(Qp,nh);break}let rd=sc.charCodeAt(nh);if(Zf(th,rd,sc,nh)){Mh+=sc.slice(Qp,nh);break}if(rd===92){Mh+=sc.slice(Qp,nh);let cd=qf(sc,nh,lh,mh,th==="template",Ah);cd.ch===null&&!Yh?Yh={pos:nh,lineStart:lh,curLine:mh}:Mh+=cd.ch,{pos:nh,lineStart:lh,curLine:mh}=cd,Qp=nh}else rd===8232||rd===8233?(++nh,++mh,lh=nh):rd===10||rd===13?th==="template"?(Mh+=sc.slice(Qp,nh)+`
`,++nh,rd===13&&sc.charCodeAt(nh)===10&&++nh,++mh,Qp=lh=nh):Ah.unterminated(Eh,Oh,Ih):++nh}return{pos:nh,str:Mh,firstInvalidLoc:Yh,lineStart:lh,curLine:mh,containsInvalid:!!Yh}}function Zf(th,sc,nh,lh){return th==="template"?sc===96||sc===36&&nh.charCodeAt(lh+1)===123:sc===(th==="double"?34:39)}function qf(th,sc,nh,lh,mh,Ah){let Eh=!mh;sc++;let Oh=Mh=>({pos:sc,ch:Mh,lineStart:nh,curLine:lh}),Ih=th.charCodeAt(sc++);switch(Ih){case 110:return Oh(`
`);case 114:return Oh("\r");case 120:{let Mh;return{code:Mh,pos:sc}=Jd(th,sc,nh,lh,2,!1,Eh,Ah),Oh(Mh===null?null:String.fromCharCode(Mh))}case 117:{let Mh;return{code:Mh,pos:sc}=vf(th,sc,nh,lh,Eh,Ah),Oh(Mh===null?null:String.fromCodePoint(Mh))}case 116:return Oh("	");case 98:return Oh("\b");case 118:return Oh("\v");case 102:return Oh("\f");case 13:th.charCodeAt(sc)===10&&++sc;case 10:nh=sc,++lh;case 8232:case 8233:return Oh("");case 56:case 57:if(mh)return Oh(null);Ah.strictNumericEscape(sc-1,nh,lh);default:if(Ih>=48&&Ih<=55){let Mh=sc-1,Yh=th.slice(Mh,sc+2).match(/^[0-7]+/)[0],Qp=parseInt(Yh,8);Qp>255&&(Yh=Yh.slice(0,-1),Qp=parseInt(Yh,8)),sc+=Yh.length-1;let td=th.charCodeAt(sc);if(Yh!=="0"||td===56||td===57){if(mh)return Oh(null);Ah.strictNumericEscape(Mh,nh,lh)}return Oh(String.fromCharCode(Qp))}return Oh(String.fromCharCode(Ih))}}function Jd(th,sc,nh,lh,mh,Ah,Eh,Oh){let Ih=sc,Mh;return{n:Mh,pos:sc}=gf(th,sc,nh,lh,16,mh,Ah,!1,Oh,!Eh),Mh===null&&(Eh?Oh.invalidEscapeSequence(Ih,nh,lh):sc=Ih-1),{code:Mh,pos:sc}}function gf(th,sc,nh,lh,mh,Ah,Eh,Oh,Ih,Mh){let Yh=sc,Qp=mh===16?ff.hex:ff.decBinOct,td=mh===16?Ud.hex:mh===10?Ud.dec:mh===8?Ud.oct:Ud.bin,rd=!1,cd=0;for(let gd=0,hd=Ah??1/0;gd<hd;++gd){let dd=th.charCodeAt(sc),yd;if(dd===95&&Oh!=="bail"){let af=th.charCodeAt(sc-1),sf=th.charCodeAt(sc+1);if(Oh){if(Number.isNaN(sf)||!td(sf)||Qp.has(af)||Qp.has(sf)){if(Mh)return{n:null,pos:sc};Ih.unexpectedNumericSeparator(sc,nh,lh)}}else{if(Mh)return{n:null,pos:sc};Ih.numericSeparatorInEscapeSequence(sc,nh,lh)}++sc;continue}if(dd>=97?yd=dd-97+10:dd>=65?yd=dd-65+10:Xf(dd)?yd=dd-48:yd=1/0,yd>=mh){if(yd<=9&&Mh)return{n:null,pos:sc};if(yd<=9&&Ih.invalidDigit(sc,nh,lh,mh))yd=0;else if(Eh)yd=0,rd=!0;else break}++sc,cd=cd*mh+yd}return sc===Yh||Ah!=null&&sc-Yh!==Ah||rd?{n:null,pos:sc}:{n:cd,pos:sc}}function vf(th,sc,nh,lh,mh,Ah){let Eh=th.charCodeAt(sc),Oh;if(Eh===123){if(++sc,{code:Oh,pos:sc}=Jd(th,sc,nh,lh,th.indexOf("}",sc)-sc,!0,mh,Ah),++sc,Oh!==null&&Oh>1114111)if(mh)Ah.invalidCodePoint(sc,nh,lh);else return{code:null,pos:sc}}else({code:Oh,pos:sc}=Jd(th,sc,nh,lh,4,!1,mh,Ah));return{code:Oh,pos:sc}}function Rd(th,sc,nh){return new a(nh,th-sc,th)}var Kf=new Set([103,109,115,105,121,117,100,118]),Ed=class{constructor(th){this.type=th.type,this.value=th.value,this.start=th.start,this.end=th.end,this.loc=new s(th.startLoc,th.endLoc)}},Jf=class extends Wf{constructor(th,sc){super(),this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(nh,lh,mh,Ah)=>this.options.errorRecovery?(this.raise(eh.InvalidDigit,Rd(nh,lh,mh),{radix:Ah}),!0):!1,numericSeparatorInEscapeSequence:this.errorBuilder(eh.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(eh.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(eh.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(eh.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(nh,lh,mh)=>{this.recordStrictModeErrors(eh.StrictNumericEscape,Rd(nh,lh,mh))},unterminated:(nh,lh,mh)=>{throw this.raise(eh.UnterminatedString,Rd(nh-1,lh,mh))}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(eh.StrictNumericEscape),unterminated:(nh,lh,mh)=>{throw this.raise(eh.UnterminatedTemplate,Rd(nh,lh,mh))}}),this.state=new jf,this.state.init(th),this.input=sc,this.length=sc.length,this.comments=[],this.isLookahead=!1}pushToken(th){this.tokens.length=this.state.tokensLength,this.tokens.push(th),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.options.tokens&&this.pushToken(new Ed(this.state)),this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(th){return this.match(th)?(this.next(),!0):!1}match(th){return this.state.type===th}createLookaheadState(th){return{pos:th.pos,value:null,type:th.type,start:th.start,end:th.end,context:[this.curContext()],inType:th.inType,startLoc:th.startLoc,lastTokEndLoc:th.lastTokEndLoc,curLine:th.curLine,lineStart:th.lineStart,curPosition:th.curPosition}}lookahead(){let th=this.state;this.state=this.createLookaheadState(th),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;let sc=this.state;return this.state=th,sc}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(th){return Kd.lastIndex=th,Kd.test(this.input)?Kd.lastIndex:th}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(th){return Gd.lastIndex=th,Gd.test(this.input)?Gd.lastIndex:th}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(th){let sc=this.input.charCodeAt(th);if((sc&64512)===55296&&++th<this.input.length){let nh=this.input.charCodeAt(th);(nh&64512)===56320&&(sc=65536+((sc&1023)<<10)+(nh&1023))}return sc}setStrict(th){this.state.strict=th,th&&(this.state.strictErrors.forEach(([sc,nh])=>this.raise(sc,nh)),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){if(this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length){this.finishToken(139);return}this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(th){let sc;this.isLookahead||(sc=this.state.curPosition());let nh=this.state.pos,lh=this.input.indexOf(th,nh+2);if(lh===-1)throw this.raise(eh.UnterminatedComment,this.state.curPosition());for(this.state.pos=lh+th.length,zd.lastIndex=nh+2;zd.test(this.input)&&zd.lastIndex<=lh;)++this.state.curLine,this.state.lineStart=zd.lastIndex;if(this.isLookahead)return;let mh={type:"CommentBlock",value:this.input.slice(nh+2,lh),start:nh,end:lh+th.length,loc:new s(sc,this.state.curPosition())};return this.options.tokens&&this.pushToken(mh),mh}skipLineComment(th){let sc=this.state.pos,nh;this.isLookahead||(nh=this.state.curPosition());let lh=this.input.charCodeAt(this.state.pos+=th);if(this.state.pos<this.length)for(;!Bd(lh)&&++this.state.pos<this.length;)lh=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;let mh=this.state.pos,Ah={type:"CommentLine",value:this.input.slice(sc+th,mh),start:sc,end:mh,loc:new s(nh,this.state.curPosition())};return this.options.tokens&&this.pushToken(Ah),Ah}skipSpace(){let th=this.state.pos,sc=[];e:for(;this.state.pos<this.length;){let nh=this.input.charCodeAt(this.state.pos);switch(nh){case 32:case 160:case 9:++this.state.pos;break;case 13:this.input.charCodeAt(this.state.pos+1)===10&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{let lh=this.skipBlockComment("*/");lh!==void 0&&(this.addComment(lh),this.options.attachComment&&sc.push(lh));break}case 47:{let lh=this.skipLineComment(2);lh!==void 0&&(this.addComment(lh),this.options.attachComment&&sc.push(lh));break}default:break e}break;default:if(Yf(nh))++this.state.pos;else if(nh===45&&!this.inModule&&this.options.annexB){let lh=this.state.pos;if(this.input.charCodeAt(lh+1)===45&&this.input.charCodeAt(lh+2)===62&&(th===0||this.state.lineStart>th)){let mh=this.skipLineComment(3);mh!==void 0&&(this.addComment(mh),this.options.attachComment&&sc.push(mh))}else break e}else if(nh===60&&!this.inModule&&this.options.annexB){let lh=this.state.pos;if(this.input.charCodeAt(lh+1)===33&&this.input.charCodeAt(lh+2)===45&&this.input.charCodeAt(lh+3)===45){let mh=this.skipLineComment(4);mh!==void 0&&(this.addComment(mh),this.options.attachComment&&sc.push(mh))}else break e}else break e}}if(sc.length>0){let nh=this.state.pos,lh={start:th,end:nh,comments:sc,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(lh)}}finishToken(th,sc){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();let nh=this.state.type;this.state.type=th,this.state.value=sc,this.isLookahead||this.updateContext(nh)}replaceToken(th){this.state.type=th,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;let th=this.state.pos+1,sc=this.codePointAtPos(th);if(sc>=48&&sc<=57)throw this.raise(eh.UnexpectedDigitAfterHash,this.state.curPosition());if(sc===123||sc===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")==="bar")throw this.raise(sc===123?eh.RecordExpressionHashIncorrectStartSyntaxType:eh.TupleExpressionHashIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,sc===123?this.finishToken(7):this.finishToken(1)}else md(sc)?(++this.state.pos,this.finishToken(138,this.readWord1(sc))):sc===92?(++this.state.pos,this.finishToken(138,this.readWord1())):this.finishOp(27,1)}readToken_dot(){let th=this.input.charCodeAt(this.state.pos+1);if(th>=48&&th<=57){this.readNumber(!0);return}th===46&&this.input.charCodeAt(this.state.pos+2)===46?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){this.input.charCodeAt(this.state.pos+1)===61?this.finishOp(31,2):this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let th=this.input.charCodeAt(this.state.pos+1);if(th!==33)return!1;let sc=this.state.pos;for(this.state.pos+=1;!Bd(th)&&++this.state.pos<this.length;)th=this.input.charCodeAt(this.state.pos);let nh=this.input.slice(sc+2,this.state.pos);return this.finishToken(28,nh),!0}readToken_mult_modulo(th){let sc=th===42?55:54,nh=1,lh=this.input.charCodeAt(this.state.pos+1);th===42&&lh===42&&(nh++,lh=this.input.charCodeAt(this.state.pos+2),sc=57),lh===61&&!this.state.inType&&(nh++,sc=th===37?33:30),this.finishOp(sc,nh)}readToken_pipe_amp(th){let sc=this.input.charCodeAt(this.state.pos+1);if(sc===th){this.input.charCodeAt(this.state.pos+2)===61?this.finishOp(30,3):this.finishOp(th===124?41:42,2);return}if(th===124){if(sc===62){this.finishOp(39,2);return}if(this.hasPlugin("recordAndTuple")&&sc===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(eh.RecordExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&sc===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(eh.TupleExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(4);return}}if(sc===61){this.finishOp(30,2);return}this.finishOp(th===124?43:45,1)}readToken_caret(){let th=this.input.charCodeAt(this.state.pos+1);th===61&&!this.state.inType?this.finishOp(32,2):th===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])?(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94&&this.unexpected()):this.finishOp(44,1)}readToken_atSign(){this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}])?this.finishOp(38,2):this.finishOp(26,1)}readToken_plus_min(th){let sc=this.input.charCodeAt(this.state.pos+1);if(sc===th){this.finishOp(34,2);return}sc===61?this.finishOp(30,2):this.finishOp(53,1)}readToken_lt(){let{pos:th}=this.state,sc=this.input.charCodeAt(th+1);if(sc===60){if(this.input.charCodeAt(th+2)===61){this.finishOp(30,3);return}this.finishOp(51,2);return}if(sc===61){this.finishOp(49,2);return}this.finishOp(47,1)}readToken_gt(){let{pos:th}=this.state,sc=this.input.charCodeAt(th+1);if(sc===62){let nh=this.input.charCodeAt(th+2)===62?3:2;if(this.input.charCodeAt(th+nh)===61){this.finishOp(30,nh+1);return}this.finishOp(52,nh);return}if(sc===61){this.finishOp(49,2);return}this.finishOp(48,1)}readToken_eq_excl(th){let sc=this.input.charCodeAt(this.state.pos+1);if(sc===61){this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(th===61&&sc===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(th===61?29:35,1)}readToken_question(){let th=this.input.charCodeAt(this.state.pos+1),sc=this.input.charCodeAt(this.state.pos+2);th===63?sc===61?this.finishOp(30,3):this.finishOp(40,2):th===46&&!(sc>=48&&sc<=57)?(this.state.pos+=2,this.finishToken(18)):(++this.state.pos,this.finishToken(17))}getTokenFromCode(th){switch(th){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(eh.TupleExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(eh.RecordExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58?this.finishOp(15,2):(++this.state.pos,this.finishToken(14));return;case 63:this.readToken_question();return;case 96:this.readTemplateToken();return;case 48:{let sc=this.input.charCodeAt(this.state.pos+1);if(sc===120||sc===88){this.readRadixNumber(16);return}if(sc===111||sc===79){this.readRadixNumber(8);return}if(sc===98||sc===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(th);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(th);return;case 124:case 38:this.readToken_pipe_amp(th);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(th);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(th);return;case 126:this.finishOp(36,1);return;case 64:this.readToken_atSign();return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(md(th)){this.readWord(th);return}}throw this.raise(eh.InvalidOrUnexpectedToken,this.state.curPosition(),{unexpected:String.fromCodePoint(th)})}finishOp(th,sc){let nh=this.input.slice(this.state.pos,this.state.pos+sc);this.state.pos+=sc,this.finishToken(th,nh)}readRegexp(){let th=this.state.startLoc,sc=this.state.start+1,nh,lh,{pos:mh}=this.state;for(;;++mh){if(mh>=this.length)throw this.raise(eh.UnterminatedRegExp,o(th,1));let Ih=this.input.charCodeAt(mh);if(Bd(Ih))throw this.raise(eh.UnterminatedRegExp,o(th,1));if(nh)nh=!1;else{if(Ih===91)lh=!0;else if(Ih===93&&lh)lh=!1;else if(Ih===47&&!lh)break;nh=Ih===92}}let Ah=this.input.slice(sc,mh);++mh;let Eh="",Oh=()=>o(th,mh+2-sc);for(;mh<this.length;){let Ih=this.codePointAtPos(mh),Mh=String.fromCharCode(Ih);if(Kf.has(Ih))Ih===118?Eh.includes("u")&&this.raise(eh.IncompatibleRegExpUVFlags,Oh()):Ih===117&&Eh.includes("v")&&this.raise(eh.IncompatibleRegExpUVFlags,Oh()),Eh.includes(Mh)&&this.raise(eh.DuplicateRegExpFlags,Oh());else if(xd(Ih)||Ih===92)this.raise(eh.MalformedRegExpFlags,Oh());else break;++mh,Eh+=Mh}this.state.pos=mh,this.finishToken(137,{pattern:Ah,flags:Eh})}readInt(th,sc,nh=!1,lh=!0){let{n:mh,pos:Ah}=gf(this.input,this.state.pos,this.state.lineStart,this.state.curLine,th,sc,nh,lh,this.errorHandlers_readInt,!1);return this.state.pos=Ah,mh}readRadixNumber(th){let sc=this.state.curPosition(),nh=!1;this.state.pos+=2;let lh=this.readInt(th);lh==null&&this.raise(eh.InvalidDigit,o(sc,2),{radix:th});let mh=this.input.charCodeAt(this.state.pos);if(mh===110)++this.state.pos,nh=!0;else if(mh===109)throw this.raise(eh.InvalidDecimal,sc);if(md(this.codePointAtPos(this.state.pos)))throw this.raise(eh.NumberIdentifier,this.state.curPosition());if(nh){let Ah=this.input.slice(sc.index,this.state.pos).replace(/[_n]/g,"");this.finishToken(135,Ah);return}this.finishToken(134,lh)}readNumber(th){let sc=this.state.pos,nh=this.state.curPosition(),lh=!1,mh=!1,Ah=!1,Eh=!1,Oh=!1;!th&&this.readInt(10)===null&&this.raise(eh.InvalidNumber,this.state.curPosition());let Ih=this.state.pos-sc>=2&&this.input.charCodeAt(sc)===48;if(Ih){let td=this.input.slice(sc,this.state.pos);if(this.recordStrictModeErrors(eh.StrictOctalLiteral,nh),!this.state.strict){let rd=td.indexOf("_");rd>0&&this.raise(eh.ZeroDigitNumericSeparator,o(nh,rd))}Oh=Ih&&!/[89]/.test(td)}let Mh=this.input.charCodeAt(this.state.pos);if(Mh===46&&!Oh&&(++this.state.pos,this.readInt(10),lh=!0,Mh=this.input.charCodeAt(this.state.pos)),(Mh===69||Mh===101)&&!Oh&&(Mh=this.input.charCodeAt(++this.state.pos),(Mh===43||Mh===45)&&++this.state.pos,this.readInt(10)===null&&this.raise(eh.InvalidOrMissingExponent,nh),lh=!0,Eh=!0,Mh=this.input.charCodeAt(this.state.pos)),Mh===110&&((lh||Ih)&&this.raise(eh.InvalidBigIntLiteral,nh),++this.state.pos,mh=!0),Mh===109&&(this.expectPlugin("decimal",this.state.curPosition()),(Eh||Ih)&&this.raise(eh.InvalidDecimal,nh),++this.state.pos,Ah=!0),md(this.codePointAtPos(this.state.pos)))throw this.raise(eh.NumberIdentifier,this.state.curPosition());let Yh=this.input.slice(sc,this.state.pos).replace(/[_mn]/g,"");if(mh){this.finishToken(135,Yh);return}if(Ah){this.finishToken(136,Yh);return}let Qp=Oh?parseInt(Yh,8):parseFloat(Yh);this.finishToken(134,Qp)}readCodePoint(th){let{code:sc,pos:nh}=vf(this.input,this.state.pos,this.state.lineStart,this.state.curLine,th,this.errorHandlers_readCodePoint);return this.state.pos=nh,sc}readString(th){let{str:sc,pos:nh,curLine:lh,lineStart:mh}=mf(th===34?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=nh+1,this.state.lineStart=mh,this.state.curLine=lh,this.finishToken(133,sc)}readTemplateContinuation(){this.match(8)||this.unexpected(null,8),this.state.pos--,this.readTemplateToken()}readTemplateToken(){let th=this.input[this.state.pos],{str:sc,firstInvalidLoc:nh,pos:lh,curLine:mh,lineStart:Ah}=mf("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);this.state.pos=lh+1,this.state.lineStart=Ah,this.state.curLine=mh,nh&&(this.state.firstInvalidTemplateEscapePos=new a(nh.curLine,nh.pos-nh.lineStart,nh.pos)),this.input.codePointAt(lh)===96?this.finishToken(24,nh?null:th+sc+"`"):(this.state.pos++,this.finishToken(25,nh?null:th+sc+"${"))}recordStrictModeErrors(th,sc){let nh=sc.index;this.state.strict&&!this.state.strictErrors.has(nh)?this.raise(th,sc):this.state.strictErrors.set(nh,[th,sc])}readWord1(th){this.state.containsEsc=!1;let sc="",nh=this.state.pos,lh=this.state.pos;for(th!==void 0&&(this.state.pos+=th<=65535?1:2);this.state.pos<this.length;){let mh=this.codePointAtPos(this.state.pos);if(xd(mh))this.state.pos+=mh<=65535?1:2;else if(mh===92){this.state.containsEsc=!0,sc+=this.input.slice(lh,this.state.pos);let Ah=this.state.curPosition(),Eh=this.state.pos===nh?md:xd;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(eh.MissingUnicodeEscape,this.state.curPosition()),lh=this.state.pos-1;continue}++this.state.pos;let Oh=this.readCodePoint(!0);Oh!==null&&(Eh(Oh)||this.raise(eh.EscapedCharNotAnIdentifier,Ah),sc+=String.fromCodePoint(Oh)),lh=this.state.pos}else break}return sc+this.input.slice(lh,this.state.pos)}readWord(th){let sc=this.readWord1(th),nh=xh.get(sc);nh!==void 0?this.finishToken(nh,ed(nh)):this.finishToken(132,sc)}checkKeywordEscapes(){let{type:th}=this.state;Ph(th)&&this.state.containsEsc&&this.raise(eh.InvalidEscapedReservedWord,this.state.startLoc,{reservedWord:ed(th)})}raise(th,sc,nh={}){let lh=sc instanceof a?sc:sc.loc.start,mh=th(lh,nh);if(!this.options.errorRecovery)throw mh;return this.isLookahead||this.state.errors.push(mh),mh}raiseOverwrite(th,sc,nh={}){let lh=sc instanceof a?sc:sc.loc.start,mh=lh.index,Ah=this.state.errors;for(let Eh=Ah.length-1;Eh>=0;Eh--){let Oh=Ah[Eh];if(Oh.loc.index===mh)return Ah[Eh]=th(lh,nh);if(Oh.loc.index<mh)break}return this.raise(th,sc,nh)}updateContext(th){}unexpected(th,sc){throw this.raise(eh.UnexpectedToken,th??this.state.startLoc,{expected:sc?ed(sc):null})}expectPlugin(th,sc){if(this.hasPlugin(th))return!0;throw this.raise(eh.MissingPlugin,sc??this.state.startLoc,{missingPlugin:[th]})}expectOnePlugin(th){if(!th.some(sc=>this.hasPlugin(sc)))throw this.raise(eh.MissingOneOfPlugins,this.state.startLoc,{missingPlugin:th})}errorBuilder(th){return(sc,nh,lh)=>{this.raise(th,Rd(sc,nh,lh))}}},hm=class{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}},dm=class{constructor(th){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=th}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new hm)}exit(){let th=this.stack.pop(),sc=this.current();for(let[nh,lh]of Array.from(th.undefinedPrivateNames))sc?sc.undefinedPrivateNames.has(nh)||sc.undefinedPrivateNames.set(nh,lh):this.parser.raise(eh.InvalidPrivateFieldResolution,lh,{identifierName:nh})}declarePrivateName(th,sc,nh){let{privateNames:lh,loneAccessors:mh,undefinedPrivateNames:Ah}=this.current(),Eh=lh.has(th);if(sc&3){let Oh=Eh&&mh.get(th);if(Oh){let Ih=Oh&4,Mh=sc&4,Yh=Oh&3,Qp=sc&3;Eh=Yh===Qp||Ih!==Mh,Eh||mh.delete(th)}else Eh||mh.set(th,sc)}Eh&&this.parser.raise(eh.PrivateNameRedeclaration,nh,{identifierName:th}),lh.add(th),Ah.delete(th)}usePrivateName(th,sc){let nh;for(nh of this.stack)if(nh.privateNames.has(th))return;nh?nh.undefinedPrivateNames.set(th,sc):this.parser.raise(eh.InvalidPrivateFieldResolution,sc,{identifierName:th})}},Qd=class{constructor(th=0){this.type=th}canBeArrowParameterDeclaration(){return this.type===2||this.type===1}isCertainlyParameterDeclaration(){return this.type===3}},yf=class extends Qd{constructor(th){super(th),this.declarationErrors=new Map}recordDeclarationError(th,sc){let nh=sc.index;this.declarationErrors.set(nh,[th,sc])}clearDeclarationError(th){this.declarationErrors.delete(th)}iterateErrors(th){this.declarationErrors.forEach(th)}},fm=class{constructor(th){this.parser=void 0,this.stack=[new Qd],this.parser=th}enter(th){this.stack.push(th)}exit(){this.stack.pop()}recordParameterInitializerError(th,sc){let nh=sc.loc.start,{stack:lh}=this,mh=lh.length-1,Ah=lh[mh];for(;!Ah.isCertainlyParameterDeclaration();){if(Ah.canBeArrowParameterDeclaration())Ah.recordDeclarationError(th,nh);else return;Ah=lh[--mh]}this.parser.raise(th,nh)}recordArrowParameterBindingError(th,sc){let{stack:nh}=this,lh=nh[nh.length-1],mh=sc.loc.start;if(lh.isCertainlyParameterDeclaration())this.parser.raise(th,mh);else if(lh.canBeArrowParameterDeclaration())lh.recordDeclarationError(th,mh);else return}recordAsyncArrowParametersError(th){let{stack:sc}=this,nh=sc.length-1,lh=sc[nh];for(;lh.canBeArrowParameterDeclaration();)lh.type===2&&lh.recordDeclarationError(eh.AwaitBindingIdentifier,th),lh=sc[--nh]}validateAsPattern(){let{stack:th}=this,sc=th[th.length-1];sc.canBeArrowParameterDeclaration()&&sc.iterateErrors(([nh,lh])=>{this.parser.raise(nh,lh);let mh=th.length-2,Ah=th[mh];for(;Ah.canBeArrowParameterDeclaration();)Ah.clearDeclarationError(lh.index),Ah=th[--mh]})}};function gm(){return new Qd(3)}function vm(){return new yf(1)}function ym(){return new yf(2)}function Af(){return new Qd}var Am=class{constructor(){this.stacks=[]}enter(th){this.stacks.push(th)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&2)>0}get hasYield(){return(this.currentFlags()&1)>0}get hasReturn(){return(this.currentFlags()&4)>0}get hasIn(){return(this.currentFlags()&8)>0}};function Hd(th,sc){return(th?2:0)|(sc?1:0)}var xm=class extends Jf{addExtra(th,sc,nh,lh=!0){if(!th)return;let mh=th.extra=th.extra||{};lh?mh[sc]=nh:Object.defineProperty(mh,sc,{enumerable:lh,value:nh})}isContextual(th){return this.state.type===th&&!this.state.containsEsc}isUnparsedContextual(th,sc){let nh=th+sc.length;if(this.input.slice(th,nh)===sc){let lh=this.input.charCodeAt(nh);return!(xd(lh)||(lh&64512)===55296)}return!1}isLookaheadContextual(th){let sc=this.nextTokenStart();return this.isUnparsedContextual(sc,th)}eatContextual(th){return this.isContextual(th)?(this.next(),!0):!1}expectContextual(th,sc){if(!this.eatContextual(th)){if(sc!=null)throw this.raise(sc,this.state.startLoc);this.unexpected(null,th)}}canInsertSemicolon(){return this.match(139)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return pf.test(this.input.slice(this.state.lastTokEndLoc.index,this.state.start))}hasFollowingLineBreak(){return df.lastIndex=this.state.end,df.test(this.input)}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(th=!0){(th?this.isLineTerminator():this.eat(13))||this.raise(eh.MissingSemicolon,this.state.lastTokEndLoc)}expect(th,sc){this.eat(th)||this.unexpected(sc,th)}tryParse(th,sc=this.state.clone()){let nh={node:null};try{let lh=th((mh=null)=>{throw nh.node=mh,nh});if(this.state.errors.length>sc.errors.length){let mh=this.state;return this.state=sc,this.state.tokensLength=mh.tokensLength,{node:lh,error:mh.errors[sc.errors.length],thrown:!1,aborted:!1,failState:mh}}return{node:lh,error:null,thrown:!1,aborted:!1,failState:null}}catch(lh){let mh=this.state;if(this.state=sc,lh instanceof SyntaxError)return{node:null,error:lh,thrown:!0,aborted:!1,failState:mh};if(lh===nh)return{node:nh.node,error:null,thrown:!1,aborted:!0,failState:mh};throw lh}}checkExpressionErrors(th,sc){if(!th)return!1;let{shorthandAssignLoc:nh,doubleProtoLoc:lh,privateKeyLoc:mh,optionalParametersLoc:Ah}=th,Eh=!!nh||!!lh||!!Ah||!!mh;if(!sc)return Eh;nh!=null&&this.raise(eh.InvalidCoverInitializedName,nh),lh!=null&&this.raise(eh.DuplicateProto,lh),mh!=null&&this.raise(eh.UnexpectedPrivateField,mh),Ah!=null&&this.unexpected(Ah)}isLiteralPropertyName(){return qh(this.state.type)}isPrivateName(th){return th.type==="PrivateName"}getPrivateNameSV(th){return th.id.name}hasPropertyAsPrivateName(th){return(th.type==="MemberExpression"||th.type==="OptionalMemberExpression")&&this.isPrivateName(th.property)}isObjectProperty(th){return th.type==="ObjectProperty"}isObjectMethod(th){return th.type==="ObjectMethod"}initializeScopes(th=this.options.sourceType==="module"){let sc=this.state.labels;this.state.labels=[];let nh=this.exportedIdentifiers;this.exportedIdentifiers=new Set;let lh=this.inModule;this.inModule=th;let mh=this.scope,Ah=this.getScopeHandler();this.scope=new Ah(this,th);let Eh=this.prodParam;this.prodParam=new Am;let Oh=this.classScope;this.classScope=new dm(this);let Ih=this.expressionScope;return this.expressionScope=new fm(this),()=>{this.state.labels=sc,this.exportedIdentifiers=nh,this.inModule=lh,this.scope=mh,this.prodParam=Eh,this.classScope=Oh,this.expressionScope=Ih}}enterInitialScopes(){let th=0;this.inModule&&(th|=2),this.scope.enter(1),this.prodParam.enter(th)}checkDestructuringPrivate(th){let{privateKeyLoc:sc}=th;sc!==null&&this.expectPlugin("destructuringPrivate",sc)}},Wd=class{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null}},Yd=class{constructor(th,sc,nh){this.type="",this.start=sc,this.end=0,this.loc=new s(nh),th!=null&&th.options.ranges&&(this.range=[sc,0]),th!=null&&th.filename&&(this.loc.filename=th.filename)}},ef=Yd.prototype;ef.__clone=function(){let th=new Yd(void 0,this.start,this.loc.start),sc=Object.keys(this);for(let nh=0,lh=sc.length;nh<lh;nh++){let mh=sc[nh];mh!=="leadingComments"&&mh!=="trailingComments"&&mh!=="innerComments"&&(th[mh]=this[mh])}return th};function Sm(th){return Sd(th)}function Sd(th){let{type:sc,start:nh,end:lh,loc:mh,range:Ah,extra:Eh,name:Oh}=th,Ih=Object.create(ef);return Ih.type=sc,Ih.start=nh,Ih.end=lh,Ih.loc=mh,Ih.range=Ah,Ih.extra=Eh,Ih.name=Oh,sc==="Placeholder"&&(Ih.expectedNode=th.expectedNode),Ih}function _m(th){let{type:sc,start:nh,end:lh,loc:mh,range:Ah,extra:Eh}=th;if(sc==="Placeholder")return Sm(th);let Oh=Object.create(ef);return Oh.type=sc,Oh.start=nh,Oh.end=lh,Oh.loc=mh,Oh.range=Ah,th.raw!==void 0?Oh.raw=th.raw:Oh.extra=Eh,Oh.value=th.value,Oh}var bm=class extends xm{startNode(){let th=this.state.startLoc;return new Yd(this,th.index,th)}startNodeAt(th){return new Yd(this,th.index,th)}startNodeAtNode(th){return this.startNodeAt(th.loc.start)}finishNode(th,sc){return this.finishNodeAt(th,sc,this.state.lastTokEndLoc)}finishNodeAt(th,sc,nh){return th.type=sc,th.end=nh.index,th.loc.end=nh,this.options.ranges&&(th.range[1]=nh.index),this.options.attachComment&&this.processComment(th),th}resetStartLocation(th,sc){th.start=sc.index,th.loc.start=sc,this.options.ranges&&(th.range[0]=sc.index)}resetEndLocation(th,sc=this.state.lastTokEndLoc){th.end=sc.index,th.loc.end=sc,this.options.ranges&&(th.range[1]=sc.index)}resetStartLocationFromNode(th,sc){this.resetStartLocation(th,sc.loc.start)}},Em=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),sd=uc`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:th})=>`Cannot overwrite reserved type ${th}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:th,enumName:sc})=>`Boolean enum members need to be initialized. Use either \`${th} = true,\` or \`${th} = false,\` in enum \`${sc}\`.`,EnumDuplicateMemberName:({memberName:th,enumName:sc})=>`Enum member names need to be unique, but the name \`${th}\` has already been used before in enum \`${sc}\`.`,EnumInconsistentMemberValues:({enumName:th})=>`Enum \`${th}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:th,enumName:sc})=>`Enum type \`${th}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${sc}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:th})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${th}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:th,memberName:sc,explicitType:nh})=>`Enum \`${th}\` has type \`${nh}\`, so the initializer of \`${sc}\` needs to be a ${nh} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:th,memberName:sc})=>`Symbol enum members cannot be initialized. Use \`${sc},\` in enum \`${th}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:th,memberName:sc})=>`The enum member initializer for \`${sc}\` needs to be a literal (either a boolean, number, or string) in enum \`${th}\`.`,EnumInvalidMemberName:({enumName:th,memberName:sc,suggestion:nh})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${sc}\`, consider using \`${nh}\`, in enum \`${th}\`.`,EnumNumberMemberNotInitialized:({enumName:th,memberName:sc})=>`Number enum members need to be initialized, e.g. \`${sc} = 1\` in enum \`${th}\`.`,EnumStringMemberInconsistentlyInitialized:({enumName:th})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${th}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:th})=>`Unexpected reserved type ${th}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:th,suggestion:sc})=>`\`declare export ${th}\` is not supported. Use \`${sc}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function Dm(th){return th.type==="DeclareExportAllDeclaration"||th.type==="DeclareExportDeclaration"&&(!th.declaration||th.declaration.type!=="TypeAlias"&&th.declaration.type!=="InterfaceDeclaration")}function xf(th){return th.importKind==="type"||th.importKind==="typeof"}var Tm={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function wm(th,sc){let nh=[],lh=[];for(let mh=0;mh<th.length;mh++)(sc(th[mh],mh,th)?nh:lh).push(th[mh]);return[nh,lh]}var Cm=/\*?\s*@((?:no)?flow)\b/,Om=th=>class extends th{constructor(...sc){super(...sc),this.flowPragma=void 0}getScopeHandler(){return Uf}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}shouldParseEnums(){return!!this.getPluginOption("flow","enums")}finishToken(sc,nh){sc!==133&&sc!==13&&sc!==28&&this.flowPragma===void 0&&(this.flowPragma=null),super.finishToken(sc,nh)}addComment(sc){if(this.flowPragma===void 0){let nh=Cm.exec(sc.value);if(nh)if(nh[1]==="flow")this.flowPragma="flow";else if(nh[1]==="noflow")this.flowPragma="noflow";else throw new Error("Unexpected flow pragma")}super.addComment(sc)}flowParseTypeInitialiser(sc){let nh=this.state.inType;this.state.inType=!0,this.expect(sc||14);let lh=this.flowParseType();return this.state.inType=nh,lh}flowParsePredicate(){let sc=this.startNode(),nh=this.state.startLoc;return this.next(),this.expectContextual(110),this.state.lastTokStartLoc.index>nh.index+1&&this.raise(sd.UnexpectedSpaceBetweenModuloChecks,nh),this.eat(10)?(sc.value=super.parseExpression(),this.expect(11),this.finishNode(sc,"DeclaredPredicate")):this.finishNode(sc,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){let sc=this.state.inType;this.state.inType=!0,this.expect(14);let nh=null,lh=null;return this.match(54)?(this.state.inType=sc,lh=this.flowParsePredicate()):(nh=this.flowParseType(),this.state.inType=sc,this.match(54)&&(lh=this.flowParsePredicate())),[nh,lh]}flowParseDeclareClass(sc){return this.next(),this.flowParseInterfaceish(sc,!0),this.finishNode(sc,"DeclareClass")}flowParseDeclareFunction(sc){this.next();let nh=sc.id=this.parseIdentifier(),lh=this.startNode(),mh=this.startNode();this.match(47)?lh.typeParameters=this.flowParseTypeParameterDeclaration():lh.typeParameters=null,this.expect(10);let Ah=this.flowParseFunctionTypeParams();return lh.params=Ah.params,lh.rest=Ah.rest,lh.this=Ah._this,this.expect(11),[lh.returnType,sc.predicate]=this.flowParseTypeAndPredicateInitialiser(),mh.typeAnnotation=this.finishNode(lh,"FunctionTypeAnnotation"),nh.typeAnnotation=this.finishNode(mh,"TypeAnnotation"),this.resetEndLocation(nh),this.semicolon(),this.scope.declareName(sc.id.name,2048,sc.id.loc.start),this.finishNode(sc,"DeclareFunction")}flowParseDeclare(sc,nh){if(this.match(80))return this.flowParseDeclareClass(sc);if(this.match(68))return this.flowParseDeclareFunction(sc);if(this.match(74))return this.flowParseDeclareVariable(sc);if(this.eatContextual(127))return this.match(16)?this.flowParseDeclareModuleExports(sc):(nh&&this.raise(sd.NestedDeclareModule,this.state.lastTokStartLoc),this.flowParseDeclareModule(sc));if(this.isContextual(130))return this.flowParseDeclareTypeAlias(sc);if(this.isContextual(131))return this.flowParseDeclareOpaqueType(sc);if(this.isContextual(129))return this.flowParseDeclareInterface(sc);if(this.match(82))return this.flowParseDeclareExportDeclaration(sc,nh);this.unexpected()}flowParseDeclareVariable(sc){return this.next(),sc.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(sc.id.name,5,sc.id.loc.start),this.semicolon(),this.finishNode(sc,"DeclareVariable")}flowParseDeclareModule(sc){this.scope.enter(0),this.match(133)?sc.id=super.parseExprAtom():sc.id=this.parseIdentifier();let nh=sc.body=this.startNode(),lh=nh.body=[];for(this.expect(5);!this.match(8);){let Eh=this.startNode();this.match(83)?(this.next(),!this.isContextual(130)&&!this.match(87)&&this.raise(sd.InvalidNonTypeImportInDeclareModule,this.state.lastTokStartLoc),super.parseImport(Eh)):(this.expectContextual(125,sd.UnsupportedStatementInDeclareModule),Eh=this.flowParseDeclare(Eh,!0)),lh.push(Eh)}this.scope.exit(),this.expect(8),this.finishNode(nh,"BlockStatement");let mh=null,Ah=!1;return lh.forEach(Eh=>{Dm(Eh)?(mh==="CommonJS"&&this.raise(sd.AmbiguousDeclareModuleKind,Eh),mh="ES"):Eh.type==="DeclareModuleExports"&&(Ah&&this.raise(sd.DuplicateDeclareModuleExports,Eh),mh==="ES"&&this.raise(sd.AmbiguousDeclareModuleKind,Eh),mh="CommonJS",Ah=!0)}),sc.kind=mh||"CommonJS",this.finishNode(sc,"DeclareModule")}flowParseDeclareExportDeclaration(sc,nh){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?sc.declaration=this.flowParseDeclare(this.startNode()):(sc.declaration=this.flowParseType(),this.semicolon()),sc.default=!0,this.finishNode(sc,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(130)||this.isContextual(129))&&!nh){let lh=this.state.value;throw this.raise(sd.UnsupportedDeclareExportKind,this.state.startLoc,{unsupportedExportKind:lh,suggestion:Tm[lh]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(131))return sc.declaration=this.flowParseDeclare(this.startNode()),sc.default=!1,this.finishNode(sc,"DeclareExportDeclaration");if(this.match(55)||this.match(5)||this.isContextual(129)||this.isContextual(130)||this.isContextual(131))return sc=this.parseExport(sc,null),sc.type==="ExportNamedDeclaration"&&(sc.type="ExportDeclaration",sc.default=!1,delete sc.exportKind),sc.type="Declare"+sc.type,sc;this.unexpected()}flowParseDeclareModuleExports(sc){return this.next(),this.expectContextual(111),sc.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(sc,"DeclareModuleExports")}flowParseDeclareTypeAlias(sc){this.next();let nh=this.flowParseTypeAlias(sc);return nh.type="DeclareTypeAlias",nh}flowParseDeclareOpaqueType(sc){this.next();let nh=this.flowParseOpaqueType(sc,!0);return nh.type="DeclareOpaqueType",nh}flowParseDeclareInterface(sc){return this.next(),this.flowParseInterfaceish(sc,!1),this.finishNode(sc,"DeclareInterface")}flowParseInterfaceish(sc,nh){if(sc.id=this.flowParseRestrictedIdentifier(!nh,!0),this.scope.declareName(sc.id.name,nh?17:8201,sc.id.loc.start),this.match(47)?sc.typeParameters=this.flowParseTypeParameterDeclaration():sc.typeParameters=null,sc.extends=[],this.eat(81))do sc.extends.push(this.flowParseInterfaceExtends());while(!nh&&this.eat(12));if(nh){if(sc.implements=[],sc.mixins=[],this.eatContextual(117))do sc.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12));if(this.eatContextual(113))do sc.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}sc.body=this.flowParseObjectType({allowStatic:nh,allowExact:!1,allowSpread:!1,allowProto:nh,allowInexact:!1})}flowParseInterfaceExtends(){let sc=this.startNode();return sc.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?sc.typeParameters=this.flowParseTypeParameterInstantiation():sc.typeParameters=null,this.finishNode(sc,"InterfaceExtends")}flowParseInterface(sc){return this.flowParseInterfaceish(sc,!1),this.finishNode(sc,"InterfaceDeclaration")}checkNotUnderscore(sc){sc==="_"&&this.raise(sd.UnexpectedReservedUnderscore,this.state.startLoc)}checkReservedType(sc,nh,lh){Em.has(sc)&&this.raise(lh?sd.AssignReservedType:sd.UnexpectedReservedType,nh,{reservedType:sc})}flowParseRestrictedIdentifier(sc,nh){return this.checkReservedType(this.state.value,this.state.startLoc,nh),this.parseIdentifier(sc)}flowParseTypeAlias(sc){return sc.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(sc.id.name,8201,sc.id.loc.start),this.match(47)?sc.typeParameters=this.flowParseTypeParameterDeclaration():sc.typeParameters=null,sc.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(sc,"TypeAlias")}flowParseOpaqueType(sc,nh){return this.expectContextual(130),sc.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(sc.id.name,8201,sc.id.loc.start),this.match(47)?sc.typeParameters=this.flowParseTypeParameterDeclaration():sc.typeParameters=null,sc.supertype=null,this.match(14)&&(sc.supertype=this.flowParseTypeInitialiser(14)),sc.impltype=null,nh||(sc.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(sc,"OpaqueType")}flowParseTypeParameter(sc=!1){let nh=this.state.startLoc,lh=this.startNode(),mh=this.flowParseVariance(),Ah=this.flowParseTypeAnnotatableIdentifier();return lh.name=Ah.name,lh.variance=mh,lh.bound=Ah.typeAnnotation,this.match(29)?(this.eat(29),lh.default=this.flowParseType()):sc&&this.raise(sd.MissingTypeParamDefault,nh),this.finishNode(lh,"TypeParameter")}flowParseTypeParameterDeclaration(){let sc=this.state.inType,nh=this.startNode();nh.params=[],this.state.inType=!0,this.match(47)||this.match(142)?this.next():this.unexpected();let lh=!1;do{let mh=this.flowParseTypeParameter(lh);nh.params.push(mh),mh.default&&(lh=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=sc,this.finishNode(nh,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){let sc=this.startNode(),nh=this.state.inType;sc.params=[],this.state.inType=!0,this.expect(47);let lh=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)sc.params.push(this.flowParseType()),this.match(48)||this.expect(12);return this.state.noAnonFunctionType=lh,this.expect(48),this.state.inType=nh,this.finishNode(sc,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){let sc=this.startNode(),nh=this.state.inType;for(sc.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)sc.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=nh,this.finishNode(sc,"TypeParameterInstantiation")}flowParseInterfaceType(){let sc=this.startNode();if(this.expectContextual(129),sc.extends=[],this.eat(81))do sc.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return sc.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(sc,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(134)||this.match(133)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(sc,nh,lh){return sc.static=nh,this.lookahead().type===14?(sc.id=this.flowParseObjectPropertyKey(),sc.key=this.flowParseTypeInitialiser()):(sc.id=null,sc.key=this.flowParseType()),this.expect(3),sc.value=this.flowParseTypeInitialiser(),sc.variance=lh,this.finishNode(sc,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(sc,nh){return sc.static=nh,sc.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(sc.method=!0,sc.optional=!1,sc.value=this.flowParseObjectTypeMethodish(this.startNodeAt(sc.loc.start))):(sc.method=!1,this.eat(17)&&(sc.optional=!0),sc.value=this.flowParseTypeInitialiser()),this.finishNode(sc,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(sc){for(sc.params=[],sc.rest=null,sc.typeParameters=null,sc.this=null,this.match(47)&&(sc.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(sc.this=this.flowParseFunctionTypeParam(!0),sc.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)sc.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(sc.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),sc.returnType=this.flowParseTypeInitialiser(),this.finishNode(sc,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(sc,nh){let lh=this.startNode();return sc.static=nh,sc.value=this.flowParseObjectTypeMethodish(lh),this.finishNode(sc,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:sc,allowExact:nh,allowSpread:lh,allowProto:mh,allowInexact:Ah}){let Eh=this.state.inType;this.state.inType=!0;let Oh=this.startNode();Oh.callProperties=[],Oh.properties=[],Oh.indexers=[],Oh.internalSlots=[];let Ih,Mh,Yh=!1;for(nh&&this.match(6)?(this.expect(6),Ih=9,Mh=!0):(this.expect(5),Ih=8,Mh=!1),Oh.exact=Mh;!this.match(Ih);){let td=!1,rd=null,cd=null,gd=this.startNode();if(mh&&this.isContextual(118)){let dd=this.lookahead();dd.type!==14&&dd.type!==17&&(this.next(),rd=this.state.startLoc,sc=!1)}if(sc&&this.isContextual(106)){let dd=this.lookahead();dd.type!==14&&dd.type!==17&&(this.next(),td=!0)}let hd=this.flowParseVariance();if(this.eat(0))rd!=null&&this.unexpected(rd),this.eat(0)?(hd&&this.unexpected(hd.loc.start),Oh.internalSlots.push(this.flowParseObjectTypeInternalSlot(gd,td))):Oh.indexers.push(this.flowParseObjectTypeIndexer(gd,td,hd));else if(this.match(10)||this.match(47))rd!=null&&this.unexpected(rd),hd&&this.unexpected(hd.loc.start),Oh.callProperties.push(this.flowParseObjectTypeCallProperty(gd,td));else{let dd="init";if(this.isContextual(99)||this.isContextual(104)){let af=this.lookahead();qh(af.type)&&(dd=this.state.value,this.next())}let yd=this.flowParseObjectTypeProperty(gd,td,rd,hd,dd,lh,Ah??!Mh);yd===null?(Yh=!0,cd=this.state.lastTokStartLoc):Oh.properties.push(yd)}this.flowObjectTypeSemicolon(),cd&&!this.match(8)&&!this.match(9)&&this.raise(sd.UnexpectedExplicitInexactInObject,cd)}this.expect(Ih),lh&&(Oh.inexact=Yh);let Qp=this.finishNode(Oh,"ObjectTypeAnnotation");return this.state.inType=Eh,Qp}flowParseObjectTypeProperty(sc,nh,lh,mh,Ah,Eh,Oh){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(Eh?Oh||this.raise(sd.InexactInsideExact,this.state.lastTokStartLoc):this.raise(sd.InexactInsideNonObject,this.state.lastTokStartLoc),mh&&this.raise(sd.InexactVariance,mh),null):(Eh||this.raise(sd.UnexpectedSpreadType,this.state.lastTokStartLoc),lh!=null&&this.unexpected(lh),mh&&this.raise(sd.SpreadVariance,mh),sc.argument=this.flowParseType(),this.finishNode(sc,"ObjectTypeSpreadProperty"));{sc.key=this.flowParseObjectPropertyKey(),sc.static=nh,sc.proto=lh!=null,sc.kind=Ah;let Ih=!1;return this.match(47)||this.match(10)?(sc.method=!0,lh!=null&&this.unexpected(lh),mh&&this.unexpected(mh.loc.start),sc.value=this.flowParseObjectTypeMethodish(this.startNodeAt(sc.loc.start)),(Ah==="get"||Ah==="set")&&this.flowCheckGetterSetterParams(sc),!Eh&&sc.key.name==="constructor"&&sc.value.this&&this.raise(sd.ThisParamBannedInConstructor,sc.value.this)):(Ah!=="init"&&this.unexpected(),sc.method=!1,this.eat(17)&&(Ih=!0),sc.value=this.flowParseTypeInitialiser(),sc.variance=mh),sc.optional=Ih,this.finishNode(sc,"ObjectTypeProperty")}}flowCheckGetterSetterParams(sc){let nh=sc.kind==="get"?0:1,lh=sc.value.params.length+(sc.value.rest?1:0);sc.value.this&&this.raise(sc.kind==="get"?sd.GetterMayNotHaveThisParam:sd.SetterMayNotHaveThisParam,sc.value.this),lh!==nh&&this.raise(sc.kind==="get"?eh.BadGetterArity:eh.BadSetterArity,sc),sc.kind==="set"&&sc.value.rest&&this.raise(eh.BadSetterRestParameter,sc)}flowObjectTypeSemicolon(){!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9)&&this.unexpected()}flowParseQualifiedTypeIdentifier(sc,nh){sc!=null||(sc=this.state.startLoc);let lh=nh||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){let mh=this.startNodeAt(sc);mh.qualification=lh,mh.id=this.flowParseRestrictedIdentifier(!0),lh=this.finishNode(mh,"QualifiedTypeIdentifier")}return lh}flowParseGenericType(sc,nh){let lh=this.startNodeAt(sc);return lh.typeParameters=null,lh.id=this.flowParseQualifiedTypeIdentifier(sc,nh),this.match(47)&&(lh.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(lh,"GenericTypeAnnotation")}flowParseTypeofType(){let sc=this.startNode();return this.expect(87),sc.argument=this.flowParsePrimaryType(),this.finishNode(sc,"TypeofTypeAnnotation")}flowParseTupleType(){let sc=this.startNode();for(sc.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(sc.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(sc,"TupleTypeAnnotation")}flowParseFunctionTypeParam(sc){let nh=null,lh=!1,mh=null,Ah=this.startNode(),Eh=this.lookahead(),Oh=this.state.type===78;return Eh.type===14||Eh.type===17?(Oh&&!sc&&this.raise(sd.ThisParamMustBeFirst,Ah),nh=this.parseIdentifier(Oh),this.eat(17)&&(lh=!0,Oh&&this.raise(sd.ThisParamMayNotBeOptional,Ah)),mh=this.flowParseTypeInitialiser()):mh=this.flowParseType(),Ah.name=nh,Ah.optional=lh,Ah.typeAnnotation=mh,this.finishNode(Ah,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(sc){let nh=this.startNodeAt(sc.loc.start);return nh.name=null,nh.optional=!1,nh.typeAnnotation=sc,this.finishNode(nh,"FunctionTypeParam")}flowParseFunctionTypeParams(sc=[]){let nh=null,lh=null;for(this.match(78)&&(lh=this.flowParseFunctionTypeParam(!0),lh.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)sc.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(nh=this.flowParseFunctionTypeParam(!1)),{params:sc,rest:nh,_this:lh}}flowIdentToTypeAnnotation(sc,nh,lh){switch(lh.name){case"any":return this.finishNode(nh,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(nh,"BooleanTypeAnnotation");case"mixed":return this.finishNode(nh,"MixedTypeAnnotation");case"empty":return this.finishNode(nh,"EmptyTypeAnnotation");case"number":return this.finishNode(nh,"NumberTypeAnnotation");case"string":return this.finishNode(nh,"StringTypeAnnotation");case"symbol":return this.finishNode(nh,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(lh.name),this.flowParseGenericType(sc,lh)}}flowParsePrimaryType(){let sc=this.state.startLoc,nh=this.startNode(),lh,mh,Ah=!1,Eh=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,mh=this.flowParseTupleType(),this.state.noAnonFunctionType=Eh,mh;case 47:{let Oh=this.startNode();return Oh.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),lh=this.flowParseFunctionTypeParams(),Oh.params=lh.params,Oh.rest=lh.rest,Oh.this=lh._this,this.expect(11),this.expect(19),Oh.returnType=this.flowParseType(),this.finishNode(Oh,"FunctionTypeAnnotation")}case 10:{let Oh=this.startNode();if(this.next(),!this.match(11)&&!this.match(21))if(Qh(this.state.type)||this.match(78)){let Ih=this.lookahead().type;Ah=Ih!==17&&Ih!==14}else Ah=!0;if(Ah){if(this.state.noAnonFunctionType=!1,mh=this.flowParseType(),this.state.noAnonFunctionType=Eh,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),mh;this.eat(12)}return mh?lh=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(mh)]):lh=this.flowParseFunctionTypeParams(),Oh.params=lh.params,Oh.rest=lh.rest,Oh.this=lh._this,this.expect(11),this.expect(19),Oh.returnType=this.flowParseType(),Oh.typeParameters=null,this.finishNode(Oh,"FunctionTypeAnnotation")}case 133:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return nh.value=this.match(85),this.next(),this.finishNode(nh,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(134))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",nh);if(this.match(135))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",nh);throw this.raise(sd.UnexpectedSubtractionOperand,this.state.startLoc)}this.unexpected();return;case 134:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 135:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(nh,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(nh,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(nh,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(nh,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(Ph(this.state.type)){let Oh=ed(this.state.type);return this.next(),super.createIdentifier(nh,Oh)}else if(Qh(this.state.type))return this.isContextual(129)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(sc,nh,this.parseIdentifier())}this.unexpected()}flowParsePostfixType(){let sc=this.state.startLoc,nh=this.flowParsePrimaryType(),lh=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){let mh=this.startNodeAt(sc),Ah=this.eat(18);lh=lh||Ah,this.expect(0),!Ah&&this.match(3)?(mh.elementType=nh,this.next(),nh=this.finishNode(mh,"ArrayTypeAnnotation")):(mh.objectType=nh,mh.indexType=this.flowParseType(),this.expect(3),lh?(mh.optional=Ah,nh=this.finishNode(mh,"OptionalIndexedAccessType")):nh=this.finishNode(mh,"IndexedAccessType"))}return nh}flowParsePrefixType(){let sc=this.startNode();return this.eat(17)?(sc.typeAnnotation=this.flowParsePrefixType(),this.finishNode(sc,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){let sc=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){let nh=this.startNodeAt(sc.loc.start);return nh.params=[this.reinterpretTypeAsFunctionTypeParam(sc)],nh.rest=null,nh.this=null,nh.returnType=this.flowParseType(),nh.typeParameters=null,this.finishNode(nh,"FunctionTypeAnnotation")}return sc}flowParseIntersectionType(){let sc=this.startNode();this.eat(45);let nh=this.flowParseAnonFunctionWithoutParens();for(sc.types=[nh];this.eat(45);)sc.types.push(this.flowParseAnonFunctionWithoutParens());return sc.types.length===1?nh:this.finishNode(sc,"IntersectionTypeAnnotation")}flowParseUnionType(){let sc=this.startNode();this.eat(43);let nh=this.flowParseIntersectionType();for(sc.types=[nh];this.eat(43);)sc.types.push(this.flowParseIntersectionType());return sc.types.length===1?nh:this.finishNode(sc,"UnionTypeAnnotation")}flowParseType(){let sc=this.state.inType;this.state.inType=!0;let nh=this.flowParseUnionType();return this.state.inType=sc,nh}flowParseTypeOrImplicitInstantiation(){if(this.state.type===132&&this.state.value==="_"){let sc=this.state.startLoc,nh=this.parseIdentifier();return this.flowParseGenericType(sc,nh)}else return this.flowParseType()}flowParseTypeAnnotation(){let sc=this.startNode();return sc.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(sc,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(sc){let nh=sc?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(nh.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(nh)),nh}typeCastToParameter(sc){return sc.expression.typeAnnotation=sc.typeAnnotation,this.resetEndLocation(sc.expression,sc.typeAnnotation.loc.end),sc.expression}flowParseVariance(){let sc=null;return this.match(53)?(sc=this.startNode(),this.state.value==="+"?sc.kind="plus":sc.kind="minus",this.next(),this.finishNode(sc,"Variance")):sc}parseFunctionBody(sc,nh,lh=!1){if(nh){this.forwardNoArrowParamsConversionAt(sc,()=>super.parseFunctionBody(sc,!0,lh));return}super.parseFunctionBody(sc,!1,lh)}parseFunctionBodyAndFinish(sc,nh,lh=!1){if(this.match(14)){let mh=this.startNode();[mh.typeAnnotation,sc.predicate]=this.flowParseTypeAndPredicateInitialiser(),sc.returnType=mh.typeAnnotation?this.finishNode(mh,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(sc,nh,lh)}parseStatementLike(sc){if(this.state.strict&&this.isContextual(129)){let lh=this.lookahead();if(Hh(lh.type)){let mh=this.startNode();return this.next(),this.flowParseInterface(mh)}}else if(this.shouldParseEnums()&&this.isContextual(126)){let lh=this.startNode();return this.next(),this.flowParseEnumDeclaration(lh)}let nh=super.parseStatementLike(sc);return this.flowPragma===void 0&&!this.isValidDirective(nh)&&(this.flowPragma=null),nh}parseExpressionStatement(sc,nh,lh){if(nh.type==="Identifier"){if(nh.name==="declare"){if(this.match(80)||Qh(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(sc)}else if(Qh(this.state.type)){if(nh.name==="interface")return this.flowParseInterface(sc);if(nh.name==="type")return this.flowParseTypeAlias(sc);if(nh.name==="opaque")return this.flowParseOpaqueType(sc,!1)}}return super.parseExpressionStatement(sc,nh,lh)}shouldParseExportDeclaration(){let{type:sc}=this.state;return zh(sc)||this.shouldParseEnums()&&sc===126?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){let{type:sc}=this.state;return zh(sc)||this.shouldParseEnums()&&sc===126?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.shouldParseEnums()&&this.isContextual(126)){let sc=this.startNode();return this.next(),this.flowParseEnumDeclaration(sc)}return super.parseExportDefaultExpression()}parseConditional(sc,nh,lh){if(!this.match(17))return sc;if(this.state.maybeInArrowParameters){let Qp=this.lookaheadCharCode();if(Qp===44||Qp===61||Qp===58||Qp===41)return this.setOptionalParametersError(lh),sc}this.expect(17);let mh=this.state.clone(),Ah=this.state.noArrowAt,Eh=this.startNodeAt(nh),{consequent:Oh,failed:Ih}=this.tryParseConditionalConsequent(),[Mh,Yh]=this.getArrowLikeExpressions(Oh);if(Ih||Yh.length>0){let Qp=[...Ah];if(Yh.length>0){this.state=mh,this.state.noArrowAt=Qp;for(let td=0;td<Yh.length;td++)Qp.push(Yh[td].start);({consequent:Oh,failed:Ih}=this.tryParseConditionalConsequent()),[Mh,Yh]=this.getArrowLikeExpressions(Oh)}Ih&&Mh.length>1&&this.raise(sd.AmbiguousConditionalArrow,mh.startLoc),Ih&&Mh.length===1&&(this.state=mh,Qp.push(Mh[0].start),this.state.noArrowAt=Qp,{consequent:Oh,failed:Ih}=this.tryParseConditionalConsequent())}return this.getArrowLikeExpressions(Oh,!0),this.state.noArrowAt=Ah,this.expect(14),Eh.test=sc,Eh.consequent=Oh,Eh.alternate=this.forwardNoArrowParamsConversionAt(Eh,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(Eh,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);let sc=this.parseMaybeAssignAllowIn(),nh=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:sc,failed:nh}}getArrowLikeExpressions(sc,nh){let lh=[sc],mh=[];for(;lh.length!==0;){let Ah=lh.pop();Ah.type==="ArrowFunctionExpression"&&Ah.body.type!=="BlockStatement"?(Ah.typeParameters||!Ah.returnType?this.finishArrowValidation(Ah):mh.push(Ah),lh.push(Ah.body)):Ah.type==="ConditionalExpression"&&(lh.push(Ah.consequent),lh.push(Ah.alternate))}return nh?(mh.forEach(Ah=>this.finishArrowValidation(Ah)),[mh,[]]):wm(mh,Ah=>Ah.params.every(Eh=>this.isAssignable(Eh,!0)))}finishArrowValidation(sc){var nh;this.toAssignableList(sc.params,(nh=sc.extra)==null?void 0:nh.trailingCommaLoc,!1),this.scope.enter(6),super.checkParams(sc,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(sc,nh){let lh;return this.state.noArrowParamsConversionAt.indexOf(sc.start)!==-1?(this.state.noArrowParamsConversionAt.push(this.state.start),lh=nh(),this.state.noArrowParamsConversionAt.pop()):lh=nh(),lh}parseParenItem(sc,nh){let lh=super.parseParenItem(sc,nh);if(this.eat(17)&&(lh.optional=!0,this.resetEndLocation(sc)),this.match(14)){let mh=this.startNodeAt(nh);return mh.expression=lh,mh.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(mh,"TypeCastExpression")}return lh}assertModuleNodeAllowed(sc){sc.type==="ImportDeclaration"&&(sc.importKind==="type"||sc.importKind==="typeof")||sc.type==="ExportNamedDeclaration"&&sc.exportKind==="type"||sc.type==="ExportAllDeclaration"&&sc.exportKind==="type"||super.assertModuleNodeAllowed(sc)}parseExportDeclaration(sc){if(this.isContextual(130)){sc.exportKind="type";let nh=this.startNode();return this.next(),this.match(5)?(sc.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(sc),null):this.flowParseTypeAlias(nh)}else if(this.isContextual(131)){sc.exportKind="type";let nh=this.startNode();return this.next(),this.flowParseOpaqueType(nh,!1)}else if(this.isContextual(129)){sc.exportKind="type";let nh=this.startNode();return this.next(),this.flowParseInterface(nh)}else if(this.shouldParseEnums()&&this.isContextual(126)){sc.exportKind="value";let nh=this.startNode();return this.next(),this.flowParseEnumDeclaration(nh)}else return super.parseExportDeclaration(sc)}eatExportStar(sc){return super.eatExportStar(sc)?!0:this.isContextual(130)&&this.lookahead().type===55?(sc.exportKind="type",this.next(),this.next(),!0):!1}maybeParseExportNamespaceSpecifier(sc){let{startLoc:nh}=this.state,lh=super.maybeParseExportNamespaceSpecifier(sc);return lh&&sc.exportKind==="type"&&this.unexpected(nh),lh}parseClassId(sc,nh,lh){super.parseClassId(sc,nh,lh),this.match(47)&&(sc.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(sc,nh,lh){let{startLoc:mh}=this.state;if(this.isContextual(125)){if(super.parseClassMemberFromModifier(sc,nh))return;nh.declare=!0}super.parseClassMember(sc,nh,lh),nh.declare&&(nh.type!=="ClassProperty"&&nh.type!=="ClassPrivateProperty"&&nh.type!=="PropertyDefinition"?this.raise(sd.DeclareClassElement,mh):nh.value&&this.raise(sd.DeclareClassFieldInitializer,nh.value))}isIterator(sc){return sc==="iterator"||sc==="asyncIterator"}readIterator(){let sc=super.readWord1(),nh="@@"+sc;(!this.isIterator(sc)||!this.state.inType)&&this.raise(eh.InvalidIdentifier,this.state.curPosition(),{identifierName:nh}),this.finishToken(132,nh)}getTokenFromCode(sc){let nh=this.input.charCodeAt(this.state.pos+1);sc===123&&nh===124?this.finishOp(6,2):this.state.inType&&(sc===62||sc===60)?this.finishOp(sc===62?48:47,1):this.state.inType&&sc===63?nh===46?this.finishOp(18,2):this.finishOp(17,1):Ff(sc,nh,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(sc)}isAssignable(sc,nh){return sc.type==="TypeCastExpression"?this.isAssignable(sc.expression,nh):super.isAssignable(sc,nh)}toAssignable(sc,nh=!1){!nh&&sc.type==="AssignmentExpression"&&sc.left.type==="TypeCastExpression"&&(sc.left=this.typeCastToParameter(sc.left)),super.toAssignable(sc,nh)}toAssignableList(sc,nh,lh){for(let mh=0;mh<sc.length;mh++){let Ah=sc[mh];(Ah==null?void 0:Ah.type)==="TypeCastExpression"&&(sc[mh]=this.typeCastToParameter(Ah))}super.toAssignableList(sc,nh,lh)}toReferencedList(sc,nh){for(let mh=0;mh<sc.length;mh++){var lh;let Ah=sc[mh];Ah&&Ah.type==="TypeCastExpression"&&!((lh=Ah.extra)!=null&&lh.parenthesized)&&(sc.length>1||!nh)&&this.raise(sd.TypeCastInPattern,Ah.typeAnnotation)}return sc}parseArrayLike(sc,nh,lh,mh){let Ah=super.parseArrayLike(sc,nh,lh,mh);return nh&&!this.state.maybeInArrowParameters&&this.toReferencedList(Ah.elements),Ah}isValidLVal(sc,nh,lh){return sc==="TypeCastExpression"||super.isValidLVal(sc,nh,lh)}parseClassProperty(sc){return this.match(14)&&(sc.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(sc)}parseClassPrivateProperty(sc){return this.match(14)&&(sc.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(sc)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(sc){return!this.match(14)&&super.isNonstaticConstructor(sc)}pushClassMethod(sc,nh,lh,mh,Ah,Eh){if(nh.variance&&this.unexpected(nh.variance.loc.start),delete nh.variance,this.match(47)&&(nh.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(sc,nh,lh,mh,Ah,Eh),nh.params&&Ah){let Oh=nh.params;Oh.length>0&&this.isThisParam(Oh[0])&&this.raise(sd.ThisParamBannedInConstructor,nh)}else if(nh.type==="MethodDefinition"&&Ah&&nh.value.params){let Oh=nh.value.params;Oh.length>0&&this.isThisParam(Oh[0])&&this.raise(sd.ThisParamBannedInConstructor,nh)}}pushClassPrivateMethod(sc,nh,lh,mh){nh.variance&&this.unexpected(nh.variance.loc.start),delete nh.variance,this.match(47)&&(nh.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(sc,nh,lh,mh)}parseClassSuper(sc){if(super.parseClassSuper(sc),sc.superClass&&this.match(47)&&(sc.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(113)){this.next();let nh=sc.implements=[];do{let lh=this.startNode();lh.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?lh.typeParameters=this.flowParseTypeParameterInstantiation():lh.typeParameters=null,nh.push(this.finishNode(lh,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(sc){super.checkGetterSetterParams(sc);let nh=this.getObjectOrClassMethodParams(sc);if(nh.length>0){let lh=nh[0];this.isThisParam(lh)&&sc.kind==="get"?this.raise(sd.GetterMayNotHaveThisParam,lh):this.isThisParam(lh)&&this.raise(sd.SetterMayNotHaveThisParam,lh)}}parsePropertyNamePrefixOperator(sc){sc.variance=this.flowParseVariance()}parseObjPropValue(sc,nh,lh,mh,Ah,Eh,Oh){sc.variance&&this.unexpected(sc.variance.loc.start),delete sc.variance;let Ih;this.match(47)&&!Eh&&(Ih=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected());let Mh=super.parseObjPropValue(sc,nh,lh,mh,Ah,Eh,Oh);return Ih&&((Mh.value||Mh).typeParameters=Ih),Mh}parseAssignableListItemTypes(sc){return this.eat(17)&&(sc.type!=="Identifier"&&this.raise(sd.PatternIsOptional,sc),this.isThisParam(sc)&&this.raise(sd.ThisParamMayNotBeOptional,sc),sc.optional=!0),this.match(14)?sc.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(sc)&&this.raise(sd.ThisParamAnnotationRequired,sc),this.match(29)&&this.isThisParam(sc)&&this.raise(sd.ThisParamNoDefault,sc),this.resetEndLocation(sc),sc}parseMaybeDefault(sc,nh){let lh=super.parseMaybeDefault(sc,nh);return lh.type==="AssignmentPattern"&&lh.typeAnnotation&&lh.right.start<lh.typeAnnotation.start&&this.raise(sd.TypeBeforeInitializer,lh.typeAnnotation),lh}checkImportReflection(sc){super.checkImportReflection(sc),sc.module&&sc.importKind!=="value"&&this.raise(sd.ImportReflectionHasImportType,sc.specifiers[0].loc.start)}parseImportSpecifierLocal(sc,nh,lh){nh.local=xf(sc)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),sc.specifiers.push(this.finishImportSpecifier(nh,lh))}isPotentialImportPhase(sc){if(super.isPotentialImportPhase(sc))return!0;if(this.isContextual(130)){if(!sc)return!0;let nh=this.lookaheadCharCode();return nh===123||nh===42}return!sc&&this.isContextual(87)}applyImportPhase(sc,nh,lh,mh){if(super.applyImportPhase(sc,nh,lh,mh),nh){if(!lh&&this.match(65))return;sc.exportKind=lh==="type"?lh:"value"}else lh==="type"&&this.match(55)&&this.unexpected(),sc.importKind=lh==="type"||lh==="typeof"?lh:"value"}parseImportSpecifier(sc,nh,lh,mh,Ah){let Eh=sc.imported,Oh=null;Eh.type==="Identifier"&&(Eh.name==="type"?Oh="type":Eh.name==="typeof"&&(Oh="typeof"));let Ih=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){let Yh=this.parseIdentifier(!0);Oh!==null&&!Hh(this.state.type)?(sc.imported=Yh,sc.importKind=Oh,sc.local=Sd(Yh)):(sc.imported=Eh,sc.importKind=null,sc.local=this.parseIdentifier())}else{if(Oh!==null&&Hh(this.state.type))sc.imported=this.parseIdentifier(!0),sc.importKind=Oh;else{if(nh)throw this.raise(eh.ImportBindingIsString,sc,{importName:Eh.value});sc.imported=Eh,sc.importKind=null}this.eatContextual(93)?sc.local=this.parseIdentifier():(Ih=!0,sc.local=Sd(sc.imported))}let Mh=xf(sc);return lh&&Mh&&this.raise(sd.ImportTypeShorthandOnlyInPureImport,sc),(lh||Mh)&&this.checkReservedType(sc.local.name,sc.local.loc.start,!0),Ih&&!lh&&!Mh&&this.checkReservedWord(sc.local.name,sc.loc.start,!0,!0),this.finishImportSpecifier(sc,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(sc,nh){let lh=sc.kind;lh!=="get"&&lh!=="set"&&this.match(47)&&(sc.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(sc,nh)}parseVarId(sc,nh){super.parseVarId(sc,nh),this.match(14)&&(sc.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(sc.id))}parseAsyncArrowFromCallExpression(sc,nh){if(this.match(14)){let lh=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,sc.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=lh}return super.parseAsyncArrowFromCallExpression(sc,nh)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(sc,nh){var lh;let mh=null,Ah;if(this.hasPlugin("jsx")&&(this.match(142)||this.match(47))){if(mh=this.state.clone(),Ah=this.tryParse(()=>super.parseMaybeAssign(sc,nh),mh),!Ah.error)return Ah.node;let{context:Ih}=this.state,Mh=Ih[Ih.length-1];(Mh===ch.j_oTag||Mh===ch.j_expr)&&Ih.pop()}if((lh=Ah)!=null&&lh.error||this.match(47)){var Eh,Oh;mh=mh||this.state.clone();let Ih,Mh=this.tryParse(Qp=>{var td;Ih=this.flowParseTypeParameterDeclaration();let rd=this.forwardNoArrowParamsConversionAt(Ih,()=>{let gd=super.parseMaybeAssign(sc,nh);return this.resetStartLocationFromNode(gd,Ih),gd});(td=rd.extra)!=null&&td.parenthesized&&Qp();let cd=this.maybeUnwrapTypeCastExpression(rd);return cd.type!=="ArrowFunctionExpression"&&Qp(),cd.typeParameters=Ih,this.resetStartLocationFromNode(cd,Ih),rd},mh),Yh=null;if(Mh.node&&this.maybeUnwrapTypeCastExpression(Mh.node).type==="ArrowFunctionExpression"){if(!Mh.error&&!Mh.aborted)return Mh.node.async&&this.raise(sd.UnexpectedTypeParameterBeforeAsyncArrowFunction,Ih),Mh.node;Yh=Mh.node}if((Eh=Ah)!=null&&Eh.node)return this.state=Ah.failState,Ah.node;if(Yh)return this.state=Mh.failState,Yh;throw(Oh=Ah)!=null&&Oh.thrown?Ah.error:Mh.thrown?Mh.error:this.raise(sd.UnexpectedTokenAfterTypeParameter,Ih)}return super.parseMaybeAssign(sc,nh)}parseArrow(sc){if(this.match(14)){let nh=this.tryParse(()=>{let lh=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;let mh=this.startNode();return[mh.typeAnnotation,sc.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=lh,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),mh});if(nh.thrown)return null;nh.error&&(this.state=nh.failState),sc.returnType=nh.node.typeAnnotation?this.finishNode(nh.node,"TypeAnnotation"):null}return super.parseArrow(sc)}shouldParseArrow(sc){return this.match(14)||super.shouldParseArrow(sc)}setArrowFunctionParameters(sc,nh){this.state.noArrowParamsConversionAt.indexOf(sc.start)!==-1?sc.params=nh:super.setArrowFunctionParameters(sc,nh)}checkParams(sc,nh,lh,mh=!0){if(!(lh&&this.state.noArrowParamsConversionAt.indexOf(sc.start)!==-1)){for(let Ah=0;Ah<sc.params.length;Ah++)this.isThisParam(sc.params[Ah])&&Ah>0&&this.raise(sd.ThisParamMustBeFirst,sc.params[Ah]);super.checkParams(sc,nh,lh,mh)}}parseParenAndDistinguishExpression(sc){return super.parseParenAndDistinguishExpression(sc&&this.state.noArrowAt.indexOf(this.state.start)===-1)}parseSubscripts(sc,nh,lh){if(sc.type==="Identifier"&&sc.name==="async"&&this.state.noArrowAt.indexOf(nh.index)!==-1){this.next();let mh=this.startNodeAt(nh);mh.callee=sc,mh.arguments=super.parseCallExpressionArguments(11,!1),sc=this.finishNode(mh,"CallExpression")}else if(sc.type==="Identifier"&&sc.name==="async"&&this.match(47)){let mh=this.state.clone(),Ah=this.tryParse(Oh=>this.parseAsyncArrowWithTypeParameters(nh)||Oh(),mh);if(!Ah.error&&!Ah.aborted)return Ah.node;let Eh=this.tryParse(()=>super.parseSubscripts(sc,nh,lh),mh);if(Eh.node&&!Eh.error)return Eh.node;if(Ah.node)return this.state=Ah.failState,Ah.node;if(Eh.node)return this.state=Eh.failState,Eh.node;throw Ah.error||Eh.error}return super.parseSubscripts(sc,nh,lh)}parseSubscript(sc,nh,lh,mh){if(this.match(18)&&this.isLookaheadToken_lt()){if(mh.optionalChainMember=!0,lh)return mh.stop=!0,sc;this.next();let Ah=this.startNodeAt(nh);return Ah.callee=sc,Ah.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),Ah.arguments=this.parseCallExpressionArguments(11,!1),Ah.optional=!0,this.finishCallExpression(Ah,!0)}else if(!lh&&this.shouldParseTypes()&&this.match(47)){let Ah=this.startNodeAt(nh);Ah.callee=sc;let Eh=this.tryParse(()=>(Ah.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),Ah.arguments=super.parseCallExpressionArguments(11,!1),mh.optionalChainMember&&(Ah.optional=!1),this.finishCallExpression(Ah,mh.optionalChainMember)));if(Eh.node)return Eh.error&&(this.state=Eh.failState),Eh.node}return super.parseSubscript(sc,nh,lh,mh)}parseNewCallee(sc){super.parseNewCallee(sc);let nh=null;this.shouldParseTypes()&&this.match(47)&&(nh=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node),sc.typeArguments=nh}parseAsyncArrowWithTypeParameters(sc){let nh=this.startNodeAt(sc);if(this.parseFunctionParams(nh,!1),!!this.parseArrow(nh))return super.parseArrowExpression(nh,void 0,!0)}readToken_mult_modulo(sc){let nh=this.input.charCodeAt(this.state.pos+1);if(sc===42&&nh===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(sc)}readToken_pipe_amp(sc){let nh=this.input.charCodeAt(this.state.pos+1);if(sc===124&&nh===125){this.finishOp(9,2);return}super.readToken_pipe_amp(sc)}parseTopLevel(sc,nh){let lh=super.parseTopLevel(sc,nh);return this.state.hasFlowComment&&this.raise(sd.UnterminatedFlowComment,this.state.curPosition()),lh}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(sd.NestedFlowComment,this.state.startLoc);this.hasFlowCommentCompletion();let sc=this.skipFlowComment();sc&&(this.state.pos+=sc,this.state.hasFlowComment=!0);return}return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/")}skipFlowComment(){let{pos:sc}=this.state,nh=2;for(;[32,9].includes(this.input.charCodeAt(sc+nh));)nh++;let lh=this.input.charCodeAt(nh+sc),mh=this.input.charCodeAt(nh+sc+1);return lh===58&&mh===58?nh+2:this.input.slice(nh+sc,nh+sc+12)==="flow-include"?nh+12:lh===58&&mh!==58?nh:!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(eh.UnterminatedComment,this.state.curPosition())}flowEnumErrorBooleanMemberNotInitialized(sc,{enumName:nh,memberName:lh}){this.raise(sd.EnumBooleanMemberNotInitialized,sc,{memberName:lh,enumName:nh})}flowEnumErrorInvalidMemberInitializer(sc,nh){return this.raise(nh.explicitType?nh.explicitType==="symbol"?sd.EnumInvalidMemberInitializerSymbolType:sd.EnumInvalidMemberInitializerPrimaryType:sd.EnumInvalidMemberInitializerUnknownType,sc,nh)}flowEnumErrorNumberMemberNotInitialized(sc,nh){this.raise(sd.EnumNumberMemberNotInitialized,sc,nh)}flowEnumErrorStringMemberInconsistentlyInitialized(sc,nh){this.raise(sd.EnumStringMemberInconsistentlyInitialized,sc,nh)}flowEnumMemberInit(){let sc=this.state.startLoc,nh=()=>this.match(12)||this.match(8);switch(this.state.type){case 134:{let lh=this.parseNumericLiteral(this.state.value);return nh()?{type:"number",loc:lh.loc.start,value:lh}:{type:"invalid",loc:sc}}case 133:{let lh=this.parseStringLiteral(this.state.value);return nh()?{type:"string",loc:lh.loc.start,value:lh}:{type:"invalid",loc:sc}}case 85:case 86:{let lh=this.parseBooleanLiteral(this.match(85));return nh()?{type:"boolean",loc:lh.loc.start,value:lh}:{type:"invalid",loc:sc}}default:return{type:"invalid",loc:sc}}}flowEnumMemberRaw(){let sc=this.state.startLoc,nh=this.parseIdentifier(!0),lh=this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:sc};return{id:nh,init:lh}}flowEnumCheckExplicitTypeMismatch(sc,nh,lh){let{explicitType:mh}=nh;mh!==null&&mh!==lh&&this.flowEnumErrorInvalidMemberInitializer(sc,nh)}flowEnumMembers({enumName:sc,explicitType:nh}){let lh=new Set,mh={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]},Ah=!1;for(;!this.match(8);){if(this.eat(21)){Ah=!0;break}let Eh=this.startNode(),{id:Oh,init:Ih}=this.flowEnumMemberRaw(),Mh=Oh.name;if(Mh==="")continue;/^[a-z]/.test(Mh)&&this.raise(sd.EnumInvalidMemberName,Oh,{memberName:Mh,suggestion:Mh[0].toUpperCase()+Mh.slice(1),enumName:sc}),lh.has(Mh)&&this.raise(sd.EnumDuplicateMemberName,Oh,{memberName:Mh,enumName:sc}),lh.add(Mh);let Yh={enumName:sc,explicitType:nh,memberName:Mh};switch(Eh.id=Oh,Ih.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(Ih.loc,Yh,"boolean"),Eh.init=Ih.value,mh.booleanMembers.push(this.finishNode(Eh,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(Ih.loc,Yh,"number"),Eh.init=Ih.value,mh.numberMembers.push(this.finishNode(Eh,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(Ih.loc,Yh,"string"),Eh.init=Ih.value,mh.stringMembers.push(this.finishNode(Eh,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(Ih.loc,Yh);case"none":switch(nh){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(Ih.loc,Yh);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(Ih.loc,Yh);break;default:mh.defaultedMembers.push(this.finishNode(Eh,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:mh,hasUnknownMembers:Ah}}flowEnumStringMembers(sc,nh,{enumName:lh}){if(sc.length===0)return nh;if(nh.length===0)return sc;if(nh.length>sc.length){for(let mh of sc)this.flowEnumErrorStringMemberInconsistentlyInitialized(mh,{enumName:lh});return nh}else{for(let mh of nh)this.flowEnumErrorStringMemberInconsistentlyInitialized(mh,{enumName:lh});return sc}}flowEnumParseExplicitType({enumName:sc}){if(!this.eatContextual(102))return null;if(!Qh(this.state.type))throw this.raise(sd.EnumInvalidExplicitTypeUnknownSupplied,this.state.startLoc,{enumName:sc});let{value:nh}=this.state;return this.next(),nh!=="boolean"&&nh!=="number"&&nh!=="string"&&nh!=="symbol"&&this.raise(sd.EnumInvalidExplicitType,this.state.startLoc,{enumName:sc,invalidEnumType:nh}),nh}flowEnumBody(sc,nh){let lh=nh.name,mh=nh.loc.start,Ah=this.flowEnumParseExplicitType({enumName:lh});this.expect(5);let{members:Eh,hasUnknownMembers:Oh}=this.flowEnumMembers({enumName:lh,explicitType:Ah});switch(sc.hasUnknownMembers=Oh,Ah){case"boolean":return sc.explicitType=!0,sc.members=Eh.booleanMembers,this.expect(8),this.finishNode(sc,"EnumBooleanBody");case"number":return sc.explicitType=!0,sc.members=Eh.numberMembers,this.expect(8),this.finishNode(sc,"EnumNumberBody");case"string":return sc.explicitType=!0,sc.members=this.flowEnumStringMembers(Eh.stringMembers,Eh.defaultedMembers,{enumName:lh}),this.expect(8),this.finishNode(sc,"EnumStringBody");case"symbol":return sc.members=Eh.defaultedMembers,this.expect(8),this.finishNode(sc,"EnumSymbolBody");default:{let Ih=()=>(sc.members=[],this.expect(8),this.finishNode(sc,"EnumStringBody"));sc.explicitType=!1;let Mh=Eh.booleanMembers.length,Yh=Eh.numberMembers.length,Qp=Eh.stringMembers.length,td=Eh.defaultedMembers.length;if(!Mh&&!Yh&&!Qp&&!td)return Ih();if(!Mh&&!Yh)return sc.members=this.flowEnumStringMembers(Eh.stringMembers,Eh.defaultedMembers,{enumName:lh}),this.expect(8),this.finishNode(sc,"EnumStringBody");if(!Yh&&!Qp&&Mh>=td){for(let rd of Eh.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(rd.loc.start,{enumName:lh,memberName:rd.id.name});return sc.members=Eh.booleanMembers,this.expect(8),this.finishNode(sc,"EnumBooleanBody")}else if(!Mh&&!Qp&&Yh>=td){for(let rd of Eh.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(rd.loc.start,{enumName:lh,memberName:rd.id.name});return sc.members=Eh.numberMembers,this.expect(8),this.finishNode(sc,"EnumNumberBody")}else return this.raise(sd.EnumInconsistentMemberValues,mh,{enumName:lh}),Ih()}}}flowParseEnumDeclaration(sc){let nh=this.parseIdentifier();return sc.id=nh,sc.body=this.flowEnumBody(this.startNode(),nh),this.finishNode(sc,"EnumDeclaration")}isLookaheadToken_lt(){let sc=this.nextTokenStart();if(this.input.charCodeAt(sc)===60){let nh=this.input.charCodeAt(sc+1);return nh!==60&&nh!==61}return!1}maybeUnwrapTypeCastExpression(sc){return sc.type==="TypeCastExpression"?sc.expression:sc}},Od=uc`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:th})=>`Expected corresponding JSX closing tag for <${th}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:th,HTMLEntity:sc})=>`Unexpected token \`${th}\`. Did you mean \`${sc}\` or \`{'${th}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function Dd(th){return th?th.type==="JSXOpeningFragment"||th.type==="JSXClosingFragment":!1}function Md(th){if(th.type==="JSXIdentifier")return th.name;if(th.type==="JSXNamespacedName")return th.namespace.name+":"+th.name.name;if(th.type==="JSXMemberExpression")return Md(th.object)+"."+Md(th.property);throw new Error("Node had unexpected type: "+th.type)}var Pm=th=>class extends th{jsxReadToken(){let sc="",nh=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(Od.UnterminatedJsxContent,this.state.startLoc);let lh=this.input.charCodeAt(this.state.pos);switch(lh){case 60:case 123:if(this.state.pos===this.state.start){lh===60&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(142)):super.getTokenFromCode(lh);return}sc+=this.input.slice(nh,this.state.pos),this.finishToken(141,sc);return;case 38:sc+=this.input.slice(nh,this.state.pos),sc+=this.jsxReadEntity(),nh=this.state.pos;break;case 62:case 125:default:Bd(lh)?(sc+=this.input.slice(nh,this.state.pos),sc+=this.jsxReadNewLine(!0),nh=this.state.pos):++this.state.pos}}}jsxReadNewLine(sc){let nh=this.input.charCodeAt(this.state.pos),lh;return++this.state.pos,nh===13&&this.input.charCodeAt(this.state.pos)===10?(++this.state.pos,lh=sc?`
`:`\r
`):lh=String.fromCharCode(nh),++this.state.curLine,this.state.lineStart=this.state.pos,lh}jsxReadString(sc){let nh="",lh=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(eh.UnterminatedString,this.state.startLoc);let mh=this.input.charCodeAt(this.state.pos);if(mh===sc)break;mh===38?(nh+=this.input.slice(lh,this.state.pos),nh+=this.jsxReadEntity(),lh=this.state.pos):Bd(mh)?(nh+=this.input.slice(lh,this.state.pos),nh+=this.jsxReadNewLine(!1),lh=this.state.pos):++this.state.pos}nh+=this.input.slice(lh,this.state.pos++),this.finishToken(133,nh)}jsxReadEntity(){let sc=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let nh=10;this.codePointAtPos(this.state.pos)===120&&(nh=16,++this.state.pos);let lh=this.readInt(nh,void 0,!1,"bail");if(lh!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(lh)}else{let nh=0,lh=!1;for(;nh++<10&&this.state.pos<this.length&&!(lh=this.codePointAtPos(this.state.pos)===59);)++this.state.pos;if(lh){this.input.slice(sc,this.state.pos);let mh;++this.state.pos}}return this.state.pos=sc,"&"}jsxReadWord(){let sc,nh=this.state.pos;do sc=this.input.charCodeAt(++this.state.pos);while(xd(sc)||sc===45);this.finishToken(140,this.input.slice(nh,this.state.pos))}jsxParseIdentifier(){let sc=this.startNode();return this.match(140)?sc.name=this.state.value:Ph(this.state.type)?sc.name=ed(this.state.type):this.unexpected(),this.next(),this.finishNode(sc,"JSXIdentifier")}jsxParseNamespacedName(){let sc=this.state.startLoc,nh=this.jsxParseIdentifier();if(!this.eat(14))return nh;let lh=this.startNodeAt(sc);return lh.namespace=nh,lh.name=this.jsxParseIdentifier(),this.finishNode(lh,"JSXNamespacedName")}jsxParseElementName(){let sc=this.state.startLoc,nh=this.jsxParseNamespacedName();if(nh.type==="JSXNamespacedName")return nh;for(;this.eat(16);){let lh=this.startNodeAt(sc);lh.object=nh,lh.property=this.jsxParseIdentifier(),nh=this.finishNode(lh,"JSXMemberExpression")}return nh}jsxParseAttributeValue(){let sc;switch(this.state.type){case 5:return sc=this.startNode(),this.setContext(ch.brace),this.next(),sc=this.jsxParseExpressionContainer(sc,ch.j_oTag),sc.expression.type==="JSXEmptyExpression"&&this.raise(Od.AttributeIsEmpty,sc),sc;case 142:case 133:return this.parseExprAtom();default:throw this.raise(Od.UnsupportedJsxValue,this.state.startLoc)}}jsxParseEmptyExpression(){let sc=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(sc,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(sc){return this.next(),sc.expression=this.parseExpression(),this.setContext(ch.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(sc,"JSXSpreadChild")}jsxParseExpressionContainer(sc,nh){if(this.match(8))sc.expression=this.jsxParseEmptyExpression();else{let lh=this.parseExpression();sc.expression=lh}return this.setContext(nh),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(sc,"JSXExpressionContainer")}jsxParseAttribute(){let sc=this.startNode();return this.match(5)?(this.setContext(ch.brace),this.next(),this.expect(21),sc.argument=this.parseMaybeAssignAllowIn(),this.setContext(ch.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(sc,"JSXSpreadAttribute")):(sc.name=this.jsxParseNamespacedName(),sc.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(sc,"JSXAttribute"))}jsxParseOpeningElementAt(sc){let nh=this.startNodeAt(sc);return this.eat(143)?this.finishNode(nh,"JSXOpeningFragment"):(nh.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(nh))}jsxParseOpeningElementAfterName(sc){let nh=[];for(;!this.match(56)&&!this.match(143);)nh.push(this.jsxParseAttribute());return sc.attributes=nh,sc.selfClosing=this.eat(56),this.expect(143),this.finishNode(sc,"JSXOpeningElement")}jsxParseClosingElementAt(sc){let nh=this.startNodeAt(sc);return this.eat(143)?this.finishNode(nh,"JSXClosingFragment"):(nh.name=this.jsxParseElementName(),this.expect(143),this.finishNode(nh,"JSXClosingElement"))}jsxParseElementAt(sc){let nh=this.startNodeAt(sc),lh=[],mh=this.jsxParseOpeningElementAt(sc),Ah=null;if(!mh.selfClosing){e:for(;;)switch(this.state.type){case 142:if(sc=this.state.startLoc,this.next(),this.eat(56)){Ah=this.jsxParseClosingElementAt(sc);break e}lh.push(this.jsxParseElementAt(sc));break;case 141:lh.push(this.parseLiteral(this.state.value,"JSXText"));break;case 5:{let Eh=this.startNode();this.setContext(ch.brace),this.next(),this.match(21)?lh.push(this.jsxParseSpreadChild(Eh)):lh.push(this.jsxParseExpressionContainer(Eh,ch.j_expr));break}default:this.unexpected()}Dd(mh)&&!Dd(Ah)&&Ah!==null?this.raise(Od.MissingClosingTagFragment,Ah):!Dd(mh)&&Dd(Ah)?this.raise(Od.MissingClosingTagElement,Ah,{openingTagName:Md(mh.name)}):!Dd(mh)&&!Dd(Ah)&&Md(Ah.name)!==Md(mh.name)&&this.raise(Od.MissingClosingTagElement,Ah,{openingTagName:Md(mh.name)})}if(Dd(mh)?(nh.openingFragment=mh,nh.closingFragment=Ah):(nh.openingElement=mh,nh.closingElement=Ah),nh.children=lh,this.match(47))throw this.raise(Od.UnwrappedAdjacentJSXElements,this.state.startLoc);return Dd(mh)?this.finishNode(nh,"JSXFragment"):this.finishNode(nh,"JSXElement")}jsxParseElement(){let sc=this.state.startLoc;return this.next(),this.jsxParseElementAt(sc)}setContext(sc){let{context:nh}=this.state;nh[nh.length-1]=sc}parseExprAtom(sc){return this.match(142)?this.jsxParseElement():this.match(47)&&this.input.charCodeAt(this.state.pos)!==33?(this.replaceToken(142),this.jsxParseElement()):super.parseExprAtom(sc)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(sc){let nh=this.curContext();if(nh===ch.j_expr){this.jsxReadToken();return}if(nh===ch.j_oTag||nh===ch.j_cTag){if(md(sc)){this.jsxReadWord();return}if(sc===62){++this.state.pos,this.finishToken(143);return}if((sc===34||sc===39)&&nh===ch.j_oTag){this.jsxReadString(sc);return}}if(sc===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33){++this.state.pos,this.finishToken(142);return}super.getTokenFromCode(sc)}updateContext(sc){let{context:nh,type:lh}=this.state;if(lh===56&&sc===142)nh.splice(-2,2,ch.j_cTag),this.state.canStartJSXElement=!1;else if(lh===142)nh.push(ch.j_oTag);else if(lh===143){let mh=nh[nh.length-1];mh===ch.j_oTag&&sc===56||mh===ch.j_cTag?(nh.pop(),this.state.canStartJSXElement=nh[nh.length-1]===ch.j_expr):(this.setContext(ch.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=nd(lh)}},$m=class extends Zd{constructor(...th){super(...th),this.tsNames=new Map}},Mm=class extends qd{constructor(...th){super(...th),this.importsStack=[]}createScope(th){return this.importsStack.push(new Set),new $m(th)}enter(th){th===256&&this.importsStack.push(new Set),super.enter(th)}exit(){let th=super.exit();return th===256&&this.importsStack.pop(),th}hasImport(th,sc){let nh=this.importsStack.length;if(this.importsStack[nh-1].has(th))return!0;if(!sc&&nh>1){for(let lh=0;lh<nh-1;lh++)if(this.importsStack[lh].has(th))return!0}return!1}declareName(th,sc,nh){if(sc&4096){this.hasImport(th,!0)&&this.parser.raise(eh.VarRedeclaration,nh,{identifierName:th}),this.importsStack[this.importsStack.length-1].add(th);return}let lh=this.currentScope(),mh=lh.tsNames.get(th)||0;if(sc&1024){this.maybeExportDefined(lh,th),lh.tsNames.set(th,mh|16);return}super.declareName(th,sc,nh),sc&2&&(sc&1||(this.checkRedeclarationInScope(lh,th,sc,nh),this.maybeExportDefined(lh,th)),mh=mh|1),sc&256&&(mh=mh|2),sc&512&&(mh=mh|4),sc&128&&(mh=mh|8),mh&&lh.tsNames.set(th,mh)}isRedeclaredInScope(th,sc,nh){let lh=th.tsNames.get(sc);if((lh&2)>0){if(nh&256){let mh=!!(nh&512),Ah=(lh&4)>0;return mh!==Ah}return!0}return nh&128&&(lh&8)>0?th.names.get(sc)&2?!!(nh&1):!1:nh&2&&(lh&1)>0?!0:super.isRedeclaredInScope(th,sc,nh)}checkLocalExport(th){let{name:sc}=th;if(this.hasImport(sc))return;let nh=this.scopeStack.length;for(let lh=nh-1;lh>=0;lh--){let mh=this.scopeStack[lh].tsNames.get(sc);if((mh&1)>0||(mh&16)>0)return}super.checkLocalExport(th)}},Im=(th,sc)=>hasOwnProperty.call(th,sc)&&th[sc],Sf=th=>th.type==="ParenthesizedExpression"?Sf(th.expression):th,Nm=class extends bm{toAssignable(th,sc=!1){var nh,lh;let mh;switch((th.type==="ParenthesizedExpression"||(nh=th.extra)!=null&&nh.parenthesized)&&(mh=Sf(th),sc?mh.type==="Identifier"?this.expressionScope.recordArrowParameterBindingError(eh.InvalidParenthesizedAssignment,th):mh.type!=="MemberExpression"&&!this.isOptionalMemberExpression(mh)&&this.raise(eh.InvalidParenthesizedAssignment,th):this.raise(eh.InvalidParenthesizedAssignment,th)),th.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":th.type="ObjectPattern";for(let Eh=0,Oh=th.properties.length,Ih=Oh-1;Eh<Oh;Eh++){var Ah;let Mh=th.properties[Eh],Yh=Eh===Ih;this.toAssignableObjectExpressionProp(Mh,Yh,sc),Yh&&Mh.type==="RestElement"&&(Ah=th.extra)!=null&&Ah.trailingCommaLoc&&this.raise(eh.RestTrailingComma,th.extra.trailingCommaLoc)}break;case"ObjectProperty":{let{key:Eh,value:Oh}=th;this.isPrivateName(Eh)&&this.classScope.usePrivateName(this.getPrivateNameSV(Eh),Eh.loc.start),this.toAssignable(Oh,sc);break}case"SpreadElement":throw new Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":th.type="ArrayPattern",this.toAssignableList(th.elements,(lh=th.extra)==null?void 0:lh.trailingCommaLoc,sc);break;case"AssignmentExpression":th.operator!=="="&&this.raise(eh.MissingEqInAssignment,th.left.loc.end),th.type="AssignmentPattern",delete th.operator,this.toAssignable(th.left,sc);break;case"ParenthesizedExpression":this.toAssignable(mh,sc);break}}toAssignableObjectExpressionProp(th,sc,nh){if(th.type==="ObjectMethod")this.raise(th.kind==="get"||th.kind==="set"?eh.PatternHasAccessor:eh.PatternHasMethod,th.key);else if(th.type==="SpreadElement"){th.type="RestElement";let lh=th.argument;this.checkToRestConversion(lh,!1),this.toAssignable(lh,nh),sc||this.raise(eh.RestTrailingComma,th)}else this.toAssignable(th,nh)}toAssignableList(th,sc,nh){let lh=th.length-1;for(let mh=0;mh<=lh;mh++){let Ah=th[mh];if(Ah){if(Ah.type==="SpreadElement"){Ah.type="RestElement";let Eh=Ah.argument;this.checkToRestConversion(Eh,!0),this.toAssignable(Eh,nh)}else this.toAssignable(Ah,nh);Ah.type==="RestElement"&&(mh<lh?this.raise(eh.RestTrailingComma,Ah):sc&&this.raise(eh.RestTrailingComma,sc))}}}isAssignable(th,sc){switch(th.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{let nh=th.properties.length-1;return th.properties.every((lh,mh)=>lh.type!=="ObjectMethod"&&(mh===nh||lh.type!=="SpreadElement")&&this.isAssignable(lh))}case"ObjectProperty":return this.isAssignable(th.value);case"SpreadElement":return this.isAssignable(th.argument);case"ArrayExpression":return th.elements.every(nh=>nh===null||this.isAssignable(nh));case"AssignmentExpression":return th.operator==="=";case"ParenthesizedExpression":return this.isAssignable(th.expression);case"MemberExpression":case"OptionalMemberExpression":return!sc;default:return!1}}toReferencedList(th,sc){return th}toReferencedListDeep(th,sc){this.toReferencedList(th,sc);for(let nh of th)(nh==null?void 0:nh.type)==="ArrayExpression"&&this.toReferencedListDeep(nh.elements)}parseSpread(th){let sc=this.startNode();return this.next(),sc.argument=this.parseMaybeAssignAllowIn(th,void 0),this.finishNode(sc,"SpreadElement")}parseRestBinding(){let th=this.startNode();return this.next(),th.argument=this.parseBindingAtom(),this.finishNode(th,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{let th=this.startNode();return this.next(),th.elements=this.parseBindingList(3,93,1),this.finishNode(th,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(th,sc,nh){let lh=nh&1,mh=[],Ah=!0;for(;!this.eat(th);)if(Ah?Ah=!1:this.expect(12),lh&&this.match(12))mh.push(null);else{if(this.eat(th))break;if(this.match(21)){if(mh.push(this.parseAssignableListItemTypes(this.parseRestBinding(),nh)),!this.checkCommaAfterRest(sc)){this.expect(th);break}}else{let Eh=[];for(this.match(26)&&this.hasPlugin("decorators")&&this.raise(eh.UnsupportedParameterDecorator,this.state.startLoc);this.match(26);)Eh.push(this.parseDecorator());mh.push(this.parseAssignableListItem(nh,Eh))}}return mh}parseBindingRestProperty(th){return this.next(),th.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(th,"RestElement")}parseBindingProperty(){let{type:th,startLoc:sc}=this.state;if(th===21)return this.parseBindingRestProperty(this.startNode());let nh=this.startNode();return th===138?(this.expectPlugin("destructuringPrivate",sc),this.classScope.usePrivateName(this.state.value,sc),nh.key=this.parsePrivateName()):this.parsePropertyName(nh),nh.method=!1,this.parseObjPropValue(nh,sc,!1,!1,!0,!1)}parseAssignableListItem(th,sc){let nh=this.parseMaybeDefault();this.parseAssignableListItemTypes(nh,th);let lh=this.parseMaybeDefault(nh.loc.start,nh);return sc.length&&(nh.decorators=sc),lh}parseAssignableListItemTypes(th,sc){return th}parseMaybeDefault(th,sc){var nh;if(th!=null||(th=this.state.startLoc),sc=(nh=sc)!=null?nh:this.parseBindingAtom(),!this.eat(29))return sc;let lh=this.startNodeAt(th);return lh.left=sc,lh.right=this.parseMaybeAssignAllowIn(),this.finishNode(lh,"AssignmentPattern")}isValidLVal(th,sc,nh){return Im({AssignmentPattern:"left",RestElement:"argument",ObjectProperty:"value",ParenthesizedExpression:"expression",ArrayPattern:"elements",ObjectPattern:"properties"},th)}isOptionalMemberExpression(th){return th.type==="OptionalMemberExpression"}checkLVal(th,{in:sc,binding:nh=64,checkClashes:lh=!1,strictModeChanged:mh=!1,hasParenthesizedAncestor:Ah=!1}){var Eh;let Oh=th.type;if(this.isObjectMethod(th))return;let Ih=this.isOptionalMemberExpression(th);if(Ih||Oh==="MemberExpression"){Ih&&(this.expectPlugin("optionalChainingAssign",th.loc.start),sc.type!=="AssignmentExpression"&&this.raise(eh.InvalidLhsOptionalChaining,th,{ancestor:sc})),nh!==64&&this.raise(eh.InvalidPropertyBindingPattern,th);return}if(Oh==="Identifier"){this.checkIdentifier(th,nh,mh);let{name:rd}=th;lh&&(lh.has(rd)?this.raise(eh.ParamDupe,th):lh.add(rd));return}let Mh=this.isValidLVal(Oh,!(Ah||(Eh=th.extra)!=null&&Eh.parenthesized)&&sc.type==="AssignmentExpression",nh);if(Mh===!0)return;if(Mh===!1){let rd=nh===64?eh.InvalidLhs:eh.InvalidLhsBinding;this.raise(rd,th,{ancestor:sc});return}let[Yh,Qp]=Array.isArray(Mh)?Mh:[Mh,Oh==="ParenthesizedExpression"],td=Oh==="ArrayPattern"||Oh==="ObjectPattern"?{type:Oh}:sc;for(let rd of[].concat(th[Yh]))rd&&this.checkLVal(rd,{in:td,binding:nh,checkClashes:lh,strictModeChanged:mh,hasParenthesizedAncestor:Qp})}checkIdentifier(th,sc,nh=!1){this.state.strict&&(nh?cf(th.name,this.inModule):uf(th.name))&&(sc===64?this.raise(eh.StrictEvalArguments,th,{referenceName:th.name}):this.raise(eh.StrictEvalArgumentsBinding,th,{bindingName:th.name})),sc&8192&&th.name==="let"&&this.raise(eh.LetInLexicalBinding,th),sc&64||this.declareNameFromIdentifier(th,sc)}declareNameFromIdentifier(th,sc){this.scope.declareName(th.name,sc,th.loc.start)}checkToRestConversion(th,sc){switch(th.type){case"ParenthesizedExpression":this.checkToRestConversion(th.expression,sc);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(sc)break;default:this.raise(eh.InvalidRestAssignmentPattern,th)}}checkCommaAfterRest(th){return this.match(12)?(this.raise(this.lookaheadCharCode()===th?eh.RestTrailingComma:eh.ElementAfterRest,this.state.startLoc),!0):!1}},Lm=(th,sc)=>hasOwnProperty.call(th,sc)&&th[sc];function Bm(th){if(th==null)throw new Error(`Unexpected ${th} value.`);return th}function _f(th){if(!th)throw new Error("Assert fail")}var ad=uc`typescript`({AbstractMethodHasImplementation:({methodName:th})=>`Method '${th}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:th})=>`Property '${th}' cannot have an initializer because it is marked abstract.`,AccesorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccesorCannotHaveTypeParameters:"An accessor cannot have type parameters.",AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:th})=>`'declare' is not allowed in ${th}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:th})=>"Accessibility modifier already seen.",DuplicateModifier:({modifier:th})=>`Duplicate modifier: '${th}'.`,EmptyHeritageClauseType:({token:th})=>`'${th}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:th})=>`'${th[0]}' modifier cannot be used with '${th[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:th})=>`Index signatures cannot have an accessibility modifier ('${th}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:({modifier:th})=>`'${th}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:th})=>`'${th}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:th})=>`'${th}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifiersOrder:({orderedModifiers:th})=>`'${th[0]}' modifier must precede '${th[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:th})=>`Private elements cannot have an accessibility modifier ('${th}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccesorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccesorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccesorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:th})=>`Single type parameter ${th} should have a trailing comma. Example usage: <${th},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:th})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${th}.`});function Rm(th){switch(th){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function bf(th){return th==="private"||th==="public"||th==="protected"}function km(th){return th==="in"||th==="out"}var Fm=th=>class extends th{constructor(...sc){super(...sc),this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:ad.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:ad.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:ad.InvalidModifierOnTypeParameter})}getScopeHandler(){return Mm}tsIsIdentifier(){return Qh(this.state.type)}tsTokenCanFollowModifier(){return(this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(138)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()}tsNextTokenCanFollowModifier(){return this.next(),this.tsTokenCanFollowModifier()}tsParseModifier(sc,nh){if(!Qh(this.state.type)&&this.state.type!==58&&this.state.type!==75)return;let lh=this.state.value;if(sc.indexOf(lh)!==-1){if(nh&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return lh}}tsParseModifiers({allowedModifiers:sc,disallowedModifiers:nh,stopOnStartOfClassStaticBlock:lh,errorTemplate:mh=ad.InvalidModifierOnTypeMember},Ah){let Eh=(Ih,Mh,Yh,Qp)=>{Mh===Yh&&Ah[Qp]&&this.raise(ad.InvalidModifiersOrder,Ih,{orderedModifiers:[Yh,Qp]})},Oh=(Ih,Mh,Yh,Qp)=>{(Ah[Yh]&&Mh===Qp||Ah[Qp]&&Mh===Yh)&&this.raise(ad.IncompatibleModifiers,Ih,{modifiers:[Yh,Qp]})};for(;;){let{startLoc:Ih}=this.state,Mh=this.tsParseModifier(sc.concat(nh??[]),lh);if(!Mh)break;bf(Mh)?Ah.accessibility?this.raise(ad.DuplicateAccessibilityModifier,Ih,{modifier:Mh}):(Eh(Ih,Mh,Mh,"override"),Eh(Ih,Mh,Mh,"static"),Eh(Ih,Mh,Mh,"readonly"),Ah.accessibility=Mh):km(Mh)?(Ah[Mh]&&this.raise(ad.DuplicateModifier,Ih,{modifier:Mh}),Ah[Mh]=!0,Eh(Ih,Mh,"in","out")):(hasOwnProperty.call(Ah,Mh)?this.raise(ad.DuplicateModifier,Ih,{modifier:Mh}):(Eh(Ih,Mh,"static","readonly"),Eh(Ih,Mh,"static","override"),Eh(Ih,Mh,"override","readonly"),Eh(Ih,Mh,"abstract","override"),Oh(Ih,Mh,"declare","override"),Oh(Ih,Mh,"static","abstract")),Ah[Mh]=!0),nh!=null&&nh.includes(Mh)&&this.raise(mh,Ih,{modifier:Mh})}}tsIsListTerminator(sc){switch(sc){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(sc,nh){let lh=[];for(;!this.tsIsListTerminator(sc);)lh.push(nh());return lh}tsParseDelimitedList(sc,nh,lh){return Bm(this.tsParseDelimitedListWorker(sc,nh,!0,lh))}tsParseDelimitedListWorker(sc,nh,lh,mh){let Ah=[],Eh=-1;for(;!this.tsIsListTerminator(sc);){Eh=-1;let Oh=nh();if(Oh==null)return;if(Ah.push(Oh),this.eat(12)){Eh=this.state.lastTokStartLoc.index;continue}if(this.tsIsListTerminator(sc))break;lh&&this.expect(12);return}return mh&&(mh.value=Eh),Ah}tsParseBracketedList(sc,nh,lh,mh,Ah){mh||(lh?this.expect(0):this.expect(47));let Eh=this.tsParseDelimitedList(sc,nh,Ah);return lh?this.expect(3):this.expect(48),Eh}tsParseImportType(){let sc=this.startNode();return this.expect(83),this.expect(10),this.match(133)||this.raise(ad.UnsupportedImportTypeArgument,this.state.startLoc),sc.argument=super.parseExprAtom(),(this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions"))&&(sc.options=null),this.eat(12)&&(this.expectImportAttributesPlugin(),this.match(11)||(sc.options=super.parseMaybeAssignAllowIn(),this.eat(12))),this.expect(11),this.eat(16)&&(sc.qualifier=this.tsParseEntityName()),this.match(47)&&(sc.typeParameters=this.tsParseTypeArguments()),this.finishNode(sc,"TSImportType")}tsParseEntityName(sc=!0){let nh=this.parseIdentifier(sc);for(;this.eat(16);){let lh=this.startNodeAtNode(nh);lh.left=nh,lh.right=this.parseIdentifier(sc),nh=this.finishNode(lh,"TSQualifiedName")}return nh}tsParseTypeReference(){let sc=this.startNode();return sc.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(sc.typeParameters=this.tsParseTypeArguments()),this.finishNode(sc,"TSTypeReference")}tsParseThisTypePredicate(sc){this.next();let nh=this.startNodeAtNode(sc);return nh.parameterName=sc,nh.typeAnnotation=this.tsParseTypeAnnotation(!1),nh.asserts=!1,this.finishNode(nh,"TSTypePredicate")}tsParseThisTypeNode(){let sc=this.startNode();return this.next(),this.finishNode(sc,"TSThisType")}tsParseTypeQuery(){let sc=this.startNode();return this.expect(87),this.match(83)?sc.exprName=this.tsParseImportType():sc.exprName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(sc.typeParameters=this.tsParseTypeArguments()),this.finishNode(sc,"TSTypeQuery")}tsParseTypeParameter(sc){let nh=this.startNode();return sc(nh),nh.name=this.tsParseTypeParameterName(),nh.constraint=this.tsEatThenParseType(81),nh.default=this.tsEatThenParseType(29),this.finishNode(nh,"TSTypeParameter")}tsTryParseTypeParameters(sc){if(this.match(47))return this.tsParseTypeParameters(sc)}tsParseTypeParameters(sc){let nh=this.startNode();this.match(47)||this.match(142)?this.next():this.unexpected();let lh={value:-1};return nh.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,sc),!1,!0,lh),nh.params.length===0&&this.raise(ad.EmptyTypeParameters,nh),lh.value!==-1&&this.addExtra(nh,"trailingComma",lh.value),this.finishNode(nh,"TSTypeParameterDeclaration")}tsFillSignature(sc,nh){let lh=sc===19,mh="parameters",Ah="typeAnnotation";nh.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),nh[mh]=this.tsParseBindingListForSignature(),lh?nh[Ah]=this.tsParseTypeOrTypePredicateAnnotation(sc):this.match(sc)&&(nh[Ah]=this.tsParseTypeOrTypePredicateAnnotation(sc))}tsParseBindingListForSignature(){let sc=super.parseBindingList(11,41,2);for(let nh of sc){let{type:lh}=nh;(lh==="AssignmentPattern"||lh==="TSParameterProperty")&&this.raise(ad.UnsupportedSignatureParameterKind,nh,{type:lh})}return sc}tsParseTypeMemberSemicolon(){!this.eat(12)&&!this.isLineTerminator()&&this.expect(13)}tsParseSignatureMember(sc,nh){return this.tsFillSignature(14,nh),this.tsParseTypeMemberSemicolon(),this.finishNode(nh,sc)}tsIsUnambiguouslyIndexSignature(){return this.next(),Qh(this.state.type)?(this.next(),this.match(14)):!1}tsTryParseIndexSignature(sc){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);let nh=this.parseIdentifier();nh.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(nh),this.expect(3),sc.parameters=[nh];let lh=this.tsTryParseTypeAnnotation();return lh&&(sc.typeAnnotation=lh),this.tsParseTypeMemberSemicolon(),this.finishNode(sc,"TSIndexSignature")}tsParsePropertyOrMethodSignature(sc,nh){this.eat(17)&&(sc.optional=!0);let lh=sc;if(this.match(10)||this.match(47)){nh&&this.raise(ad.ReadonlyForMethodSignature,sc);let mh=lh;mh.kind&&this.match(47)&&this.raise(ad.AccesorCannotHaveTypeParameters,this.state.curPosition()),this.tsFillSignature(14,mh),this.tsParseTypeMemberSemicolon();let Ah="parameters",Eh="typeAnnotation";if(mh.kind==="get")mh[Ah].length>0&&(this.raise(eh.BadGetterArity,this.state.curPosition()),this.isThisParam(mh[Ah][0])&&this.raise(ad.AccesorCannotDeclareThisParameter,this.state.curPosition()));else if(mh.kind==="set"){if(mh[Ah].length!==1)this.raise(eh.BadSetterArity,this.state.curPosition());else{let Oh=mh[Ah][0];this.isThisParam(Oh)&&this.raise(ad.AccesorCannotDeclareThisParameter,this.state.curPosition()),Oh.type==="Identifier"&&Oh.optional&&this.raise(ad.SetAccesorCannotHaveOptionalParameter,this.state.curPosition()),Oh.type==="RestElement"&&this.raise(ad.SetAccesorCannotHaveRestParameter,this.state.curPosition())}mh[Eh]&&this.raise(ad.SetAccesorCannotHaveReturnType,mh[Eh])}else mh.kind="method";return this.finishNode(mh,"TSMethodSignature")}else{let mh=lh;nh&&(mh.readonly=!0);let Ah=this.tsTryParseTypeAnnotation();return Ah&&(mh.typeAnnotation=Ah),this.tsParseTypeMemberSemicolon(),this.finishNode(mh,"TSPropertySignature")}}tsParseTypeMember(){let sc=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",sc);if(this.match(77)){let lh=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",sc):(sc.key=this.createIdentifier(lh,"new"),this.tsParsePropertyOrMethodSignature(sc,!1))}return this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},sc),this.tsTryParseIndexSignature(sc)||(super.parsePropertyName(sc),!sc.computed&&sc.key.type==="Identifier"&&(sc.key.name==="get"||sc.key.name==="set")&&this.tsTokenCanFollowModifier()&&(sc.kind=sc.key.name,super.parsePropertyName(sc)),this.tsParsePropertyOrMethodSignature(sc,!!sc.readonly))}tsParseTypeLiteral(){let sc=this.startNode();return sc.members=this.tsParseObjectTypeMembers(),this.finishNode(sc,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);let sc=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),sc}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(122):(this.isContextual(122)&&this.next(),!this.match(0)||(this.next(),!this.tsIsIdentifier())?!1:(this.next(),this.match(58)))}tsParseMappedTypeParameter(){let sc=this.startNode();return sc.name=this.tsParseTypeParameterName(),sc.constraint=this.tsExpectThenParseType(58),this.finishNode(sc,"TSTypeParameter")}tsParseMappedType(){let sc=this.startNode();return this.expect(5),this.match(53)?(sc.readonly=this.state.value,this.next(),this.expectContextual(122)):this.eatContextual(122)&&(sc.readonly=!0),this.expect(0),sc.typeParameter=this.tsParseMappedTypeParameter(),sc.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(sc.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(sc.optional=!0),sc.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(sc,"TSMappedType")}tsParseTupleType(){let sc=this.startNode();sc.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let nh=!1;return sc.elementTypes.forEach(lh=>{let{type:mh}=lh;nh&&mh!=="TSRestType"&&mh!=="TSOptionalType"&&!(mh==="TSNamedTupleMember"&&lh.optional)&&this.raise(ad.OptionalTypeBeforeRequired,lh),nh||(nh=mh==="TSNamedTupleMember"&&lh.optional||mh==="TSOptionalType")}),this.finishNode(sc,"TSTupleType")}tsParseTupleElementType(){let{startLoc:sc}=this.state,nh=this.eat(21),lh,mh,Ah,Eh,Oh=Hh(this.state.type)?this.lookaheadCharCode():null;if(Oh===58)lh=!0,Ah=!1,mh=this.parseIdentifier(!0),this.expect(14),Eh=this.tsParseType();else if(Oh===63){Ah=!0;let Ih=this.state.startLoc,Mh=this.state.value,Yh=this.tsParseNonArrayType();this.lookaheadCharCode()===58?(lh=!0,mh=this.createIdentifier(this.startNodeAt(Ih),Mh),this.expect(17),this.expect(14),Eh=this.tsParseType()):(lh=!1,Eh=Yh,this.expect(17))}else Eh=this.tsParseType(),Ah=this.eat(17),lh=this.eat(14);if(lh){let Ih;mh?(Ih=this.startNodeAtNode(mh),Ih.optional=Ah,Ih.label=mh,Ih.elementType=Eh,this.eat(17)&&(Ih.optional=!0,this.raise(ad.TupleOptionalAfterType,this.state.lastTokStartLoc))):(Ih=this.startNodeAtNode(Eh),Ih.optional=Ah,this.raise(ad.InvalidTupleMemberLabel,Eh),Ih.label=Eh,Ih.elementType=this.tsParseType()),Eh=this.finishNode(Ih,"TSNamedTupleMember")}else if(Ah){let Ih=this.startNodeAtNode(Eh);Ih.typeAnnotation=Eh,Eh=this.finishNode(Ih,"TSOptionalType")}if(nh){let Ih=this.startNodeAt(sc);Ih.typeAnnotation=Eh,Eh=this.finishNode(Ih,"TSRestType")}return Eh}tsParseParenthesizedType(){let sc=this.startNode();return this.expect(10),sc.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(sc,"TSParenthesizedType")}tsParseFunctionOrConstructorType(sc,nh){let lh=this.startNode();return sc==="TSConstructorType"&&(lh.abstract=!!nh,nh&&this.next(),this.next()),this.tsInAllowConditionalTypesContext(()=>this.tsFillSignature(19,lh)),this.finishNode(lh,sc)}tsParseLiteralTypeNode(){let sc=this.startNode();switch(this.state.type){case 134:case 135:case 133:case 85:case 86:sc.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(sc,"TSLiteralType")}tsParseTemplateLiteralType(){let sc=this.startNode();return sc.literal=super.parseTemplate(!1),this.finishNode(sc,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){let sc=this.tsParseThisTypeNode();return this.isContextual(116)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(sc):sc}tsParseNonArrayType(){switch(this.state.type){case 133:case 134:case 135:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){let sc=this.startNode(),nh=this.lookahead();return nh.type!==134&&nh.type!==135&&this.unexpected(),sc.literal=this.parseMaybeUnary(),this.finishNode(sc,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{let{type:sc}=this.state;if(Qh(sc)||sc===88||sc===84){let nh=sc===88?"TSVoidKeyword":sc===84?"TSNullKeyword":Rm(this.state.value);if(nh!==void 0&&this.lookaheadCharCode()!==46){let lh=this.startNode();return this.next(),this.finishNode(lh,nh)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let sc=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){let nh=this.startNodeAtNode(sc);nh.elementType=sc,this.expect(3),sc=this.finishNode(nh,"TSArrayType")}else{let nh=this.startNodeAtNode(sc);nh.objectType=sc,nh.indexType=this.tsParseType(),this.expect(3),sc=this.finishNode(nh,"TSIndexedAccessType")}return sc}tsParseTypeOperator(){let sc=this.startNode(),nh=this.state.value;return this.next(),sc.operator=nh,sc.typeAnnotation=this.tsParseTypeOperatorOrHigher(),nh==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(sc),this.finishNode(sc,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(sc){switch(sc.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(ad.UnexpectedReadonly,sc)}}tsParseInferType(){let sc=this.startNode();this.expectContextual(115);let nh=this.startNode();return nh.name=this.tsParseTypeParameterName(),nh.constraint=this.tsTryParse(()=>this.tsParseConstraintForInferType()),sc.typeParameter=this.finishNode(nh,"TSTypeParameter"),this.finishNode(sc,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){let sc=this.tsInDisallowConditionalTypesContext(()=>this.tsParseType());if(this.state.inDisallowConditionalTypesContext||!this.match(17))return sc}}tsParseTypeOperatorOrHigher(){return Uh(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(115)?this.tsParseInferType():this.tsInAllowConditionalTypesContext(()=>this.tsParseArrayTypeOrHigher())}tsParseUnionOrIntersectionType(sc,nh,lh){let mh=this.startNode(),Ah=this.eat(lh),Eh=[];do Eh.push(nh());while(this.eat(lh));return Eh.length===1&&!Ah?Eh[0]:(mh.types=Eh,this.finishNode(mh,sc))}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return this.match(47)?!0:this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(Qh(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){let{errors:sc}=this.state,nh=sc.length;try{return this.parseObjectLike(8,!0),sc.length===nh}catch{return!1}}if(this.match(0)){this.next();let{errors:sc}=this.state,nh=sc.length;try{return super.parseBindingList(3,93,1),sc.length===nh}catch{return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){return this.next(),!!(this.match(11)||this.match(21)||this.tsSkipParameterStart()&&(this.match(14)||this.match(12)||this.match(17)||this.match(29)||this.match(11)&&(this.next(),this.match(19))))}tsParseTypeOrTypePredicateAnnotation(sc){return this.tsInType(()=>{let nh=this.startNode();this.expect(sc);let lh=this.startNode(),mh=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(mh&&this.match(78)){let Oh=this.tsParseThisTypeOrThisTypePredicate();return Oh.type==="TSThisType"?(lh.parameterName=Oh,lh.asserts=!0,lh.typeAnnotation=null,Oh=this.finishNode(lh,"TSTypePredicate")):(this.resetStartLocationFromNode(Oh,lh),Oh.asserts=!0),nh.typeAnnotation=Oh,this.finishNode(nh,"TSTypeAnnotation")}let Ah=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!Ah)return mh?(lh.parameterName=this.parseIdentifier(),lh.asserts=mh,lh.typeAnnotation=null,nh.typeAnnotation=this.finishNode(lh,"TSTypePredicate"),this.finishNode(nh,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,nh);let Eh=this.tsParseTypeAnnotation(!1);return lh.parameterName=Ah,lh.typeAnnotation=Eh,lh.asserts=mh,nh.typeAnnotation=this.finishNode(lh,"TSTypePredicate"),this.finishNode(nh,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){let sc=this.parseIdentifier();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.next(),sc}tsParseTypePredicateAsserts(){if(this.state.type!==109)return!1;let sc=this.state.containsEsc;return this.next(),!Qh(this.state.type)&&!this.match(78)?!1:(sc&&this.raise(eh.InvalidEscapedReservedWord,this.state.lastTokStartLoc,{reservedWord:"asserts"}),!0)}tsParseTypeAnnotation(sc=!0,nh=this.startNode()){return this.tsInType(()=>{sc&&this.expect(14),nh.typeAnnotation=this.tsParseType()}),this.finishNode(nh,"TSTypeAnnotation")}tsParseType(){_f(this.state.inType);let sc=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return sc;let nh=this.startNodeAtNode(sc);return nh.checkType=sc,nh.extendsType=this.tsInDisallowConditionalTypesContext(()=>this.tsParseNonConditionalType()),this.expect(17),nh.trueType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.expect(14),nh.falseType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.finishNode(nh,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(124)&&this.lookahead().type===77}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(ad.ReservedTypeAssertion,this.state.startLoc);let sc=this.startNode();return sc.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType())),this.expect(48),sc.expression=this.parseMaybeUnary(),this.finishNode(sc,"TSTypeAssertion")}tsParseHeritageClause(sc){let nh=this.state.startLoc,lh=this.tsParseDelimitedList("HeritageClauseElement",()=>{let mh=this.startNode();return mh.expression=this.tsParseEntityName(),this.match(47)&&(mh.typeParameters=this.tsParseTypeArguments()),this.finishNode(mh,"TSExpressionWithTypeArguments")});return lh.length||this.raise(ad.EmptyHeritageClauseType,nh,{token:sc}),lh}tsParseInterfaceDeclaration(sc,nh={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(129),nh.declare&&(sc.declare=!0),Qh(this.state.type)?(sc.id=this.parseIdentifier(),this.checkIdentifier(sc.id,130)):(sc.id=null,this.raise(ad.MissingInterfaceName,this.state.startLoc)),sc.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81)&&(sc.extends=this.tsParseHeritageClause("extends"));let lh=this.startNode();return lh.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),sc.body=this.finishNode(lh,"TSInterfaceBody"),this.finishNode(sc,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(sc){return sc.id=this.parseIdentifier(),this.checkIdentifier(sc.id,2),sc.typeAnnotation=this.tsInType(()=>{if(sc.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(114)&&this.lookahead().type!==16){let nh=this.startNode();return this.next(),this.finishNode(nh,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(sc,"TSTypeAliasDeclaration")}tsInNoContext(sc){let nh=this.state.context;this.state.context=[nh[0]];try{return sc()}finally{this.state.context=nh}}tsInType(sc){let nh=this.state.inType;this.state.inType=!0;try{return sc()}finally{this.state.inType=nh}}tsInDisallowConditionalTypesContext(sc){let nh=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return sc()}finally{this.state.inDisallowConditionalTypesContext=nh}}tsInAllowConditionalTypesContext(sc){let nh=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return sc()}finally{this.state.inDisallowConditionalTypesContext=nh}}tsEatThenParseType(sc){if(this.match(sc))return this.tsNextThenParseType()}tsExpectThenParseType(sc){return this.tsInType(()=>(this.expect(sc),this.tsParseType()))}tsNextThenParseType(){return this.tsInType(()=>(this.next(),this.tsParseType()))}tsParseEnumMember(){let sc=this.startNode();return sc.id=this.match(133)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29)&&(sc.initializer=super.parseMaybeAssignAllowIn()),this.finishNode(sc,"TSEnumMember")}tsParseEnumDeclaration(sc,nh={}){return nh.const&&(sc.const=!0),nh.declare&&(sc.declare=!0),this.expectContextual(126),sc.id=this.parseIdentifier(),this.checkIdentifier(sc.id,sc.const?8971:8459),this.expect(5),sc.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(sc,"TSEnumDeclaration")}tsParseModuleBlock(){let sc=this.startNode();return this.scope.enter(0),this.expect(5),super.parseBlockOrModuleBlockBody(sc.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(sc,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(sc,nh=!1){if(sc.id=this.parseIdentifier(),nh||this.checkIdentifier(sc.id,1024),this.eat(16)){let lh=this.startNode();this.tsParseModuleOrNamespaceDeclaration(lh,!0),sc.body=lh}else this.scope.enter(256),this.prodParam.enter(0),sc.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(sc,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(sc){return this.isContextual(112)?(sc.global=!0,sc.id=this.parseIdentifier()):this.match(133)?sc.id=super.parseStringLiteral(this.state.value):this.unexpected(),this.match(5)?(this.scope.enter(256),this.prodParam.enter(0),sc.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(sc,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(sc,nh,lh){sc.isExport=lh||!1,sc.id=nh||this.parseIdentifier(),this.checkIdentifier(sc.id,4096),this.expect(29);let mh=this.tsParseModuleReference();return sc.importKind==="type"&&mh.type!=="TSExternalModuleReference"&&this.raise(ad.ImportAliasHasImportType,mh),sc.moduleReference=mh,this.semicolon(),this.finishNode(sc,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(119)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){let sc=this.startNode();return this.expectContextual(119),this.expect(10),this.match(133)||this.unexpected(),sc.expression=super.parseExprAtom(),this.expect(11),this.sawUnambiguousESM=!0,this.finishNode(sc,"TSExternalModuleReference")}tsLookAhead(sc){let nh=this.state.clone(),lh=sc();return this.state=nh,lh}tsTryParseAndCatch(sc){let nh=this.tryParse(lh=>sc()||lh());if(!(nh.aborted||!nh.node))return nh.error&&(this.state=nh.failState),nh.node}tsTryParse(sc){let nh=this.state.clone(),lh=sc();if(lh!==void 0&&lh!==!1)return lh;this.state=nh}tsTryParseDeclare(sc){if(this.isLineTerminator())return;let nh=this.state.type,lh;return this.isContextual(100)&&(nh=74,lh="let"),this.tsInAmbientContext(()=>{switch(nh){case 68:return sc.declare=!0,super.parseFunctionStatement(sc,!1,!1);case 80:return sc.declare=!0,this.parseClass(sc,!0,!1);case 126:return this.tsParseEnumDeclaration(sc,{declare:!0});case 112:return this.tsParseAmbientExternalModuleDeclaration(sc);case 75:case 74:return!this.match(75)||!this.isLookaheadContextual("enum")?(sc.declare=!0,this.parseVarStatement(sc,lh||this.state.value,!0)):(this.expect(75),this.tsParseEnumDeclaration(sc,{const:!0,declare:!0}));case 129:{let mh=this.tsParseInterfaceDeclaration(sc,{declare:!0});if(mh)return mh}default:if(Qh(nh))return this.tsParseDeclaration(sc,this.state.value,!0,null)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(sc,nh,lh){switch(nh.name){case"declare":{let mh=this.tsTryParseDeclare(sc);return mh&&(mh.declare=!0),mh}case"global":if(this.match(5)){this.scope.enter(256),this.prodParam.enter(0);let mh=sc;return mh.global=!0,mh.id=nh,mh.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(mh,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(sc,nh.name,!1,lh)}}tsParseDeclaration(sc,nh,lh,mh){switch(nh){case"abstract":if(this.tsCheckLineTerminator(lh)&&(this.match(80)||Qh(this.state.type)))return this.tsParseAbstractDeclaration(sc,mh);break;case"module":if(this.tsCheckLineTerminator(lh)){if(this.match(133))return this.tsParseAmbientExternalModuleDeclaration(sc);if(Qh(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(sc)}break;case"namespace":if(this.tsCheckLineTerminator(lh)&&Qh(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(sc);break;case"type":if(this.tsCheckLineTerminator(lh)&&Qh(this.state.type))return this.tsParseTypeAliasDeclaration(sc);break}}tsCheckLineTerminator(sc){return sc?this.hasFollowingLineBreak()?!1:(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(sc){if(!this.match(47))return;let nh=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;let lh=this.tsTryParseAndCatch(()=>{let mh=this.startNodeAt(sc);return mh.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams(mh),mh.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),mh});if(this.state.maybeInArrowParameters=nh,!!lh)return super.parseArrowExpression(lh,null,!0)}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()===47)return this.tsParseTypeArguments()}tsParseTypeArguments(){let sc=this.startNode();return sc.params=this.tsInType(()=>this.tsInNoContext(()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),sc.params.length===0?this.raise(ad.EmptyTypeArguments,sc):!this.state.inType&&this.curContext()===ch.brace&&this.reScan_lt_gt(),this.expect(48),this.finishNode(sc,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return Kh(this.state.type)}isExportDefaultSpecifier(){return this.tsIsDeclarationStart()?!1:super.isExportDefaultSpecifier()}parseAssignableListItem(sc,nh){let lh=this.state.startLoc,mh={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},mh);let Ah=mh.accessibility,Eh=mh.override,Oh=mh.readonly;!(sc&4)&&(Ah||Oh||Eh)&&this.raise(ad.UnexpectedParameterModifier,lh);let Ih=this.parseMaybeDefault();this.parseAssignableListItemTypes(Ih,sc);let Mh=this.parseMaybeDefault(Ih.loc.start,Ih);if(Ah||Oh||Eh){let Yh=this.startNodeAt(lh);return nh.length&&(Yh.decorators=nh),Ah&&(Yh.accessibility=Ah),Oh&&(Yh.readonly=Oh),Eh&&(Yh.override=Eh),Mh.type!=="Identifier"&&Mh.type!=="AssignmentPattern"&&this.raise(ad.UnsupportedParameterPropertyKind,Yh),Yh.parameter=Mh,this.finishNode(Yh,"TSParameterProperty")}return nh.length&&(Ih.decorators=nh),Mh}isSimpleParameter(sc){return sc.type==="TSParameterProperty"&&super.isSimpleParameter(sc.parameter)||super.isSimpleParameter(sc)}tsDisallowOptionalPattern(sc){for(let nh of sc.params)nh.type!=="Identifier"&&nh.optional&&!this.state.isAmbientContext&&this.raise(ad.PatternIsOptional,nh)}setArrowFunctionParameters(sc,nh,lh){super.setArrowFunctionParameters(sc,nh,lh),this.tsDisallowOptionalPattern(sc)}parseFunctionBodyAndFinish(sc,nh,lh=!1){this.match(14)&&(sc.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));let mh=nh==="FunctionDeclaration"?"TSDeclareFunction":nh==="ClassMethod"||nh==="ClassPrivateMethod"?"TSDeclareMethod":void 0;return mh&&!this.match(5)&&this.isLineTerminator()?this.finishNode(sc,mh):mh==="TSDeclareFunction"&&this.state.isAmbientContext&&(this.raise(ad.DeclareFunctionHasImplementation,sc),sc.declare)?super.parseFunctionBodyAndFinish(sc,mh,lh):(this.tsDisallowOptionalPattern(sc),super.parseFunctionBodyAndFinish(sc,nh,lh))}registerFunctionStatementId(sc){!sc.body&&sc.id?this.checkIdentifier(sc.id,1024):super.registerFunctionStatementId(sc)}tsCheckForInvalidTypeCasts(sc){sc.forEach(nh=>{(nh==null?void 0:nh.type)==="TSTypeCastExpression"&&this.raise(ad.UnexpectedTypeAnnotation,nh.typeAnnotation)})}toReferencedList(sc,nh){return this.tsCheckForInvalidTypeCasts(sc),sc}parseArrayLike(sc,nh,lh,mh){let Ah=super.parseArrayLike(sc,nh,lh,mh);return Ah.type==="ArrayExpression"&&this.tsCheckForInvalidTypeCasts(Ah.elements),Ah}parseSubscript(sc,nh,lh,mh){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();let Eh=this.startNodeAt(nh);return Eh.expression=sc,this.finishNode(Eh,"TSNonNullExpression")}let Ah=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(lh)return mh.stop=!0,sc;mh.optionalChainMember=Ah=!0,this.next()}if(this.match(47)||this.match(51)){let Eh,Oh=this.tsTryParseAndCatch(()=>{if(!lh&&this.atPossibleAsyncArrow(sc)){let Qp=this.tsTryParseGenericAsyncArrowFunction(nh);if(Qp)return Qp}let Ih=this.tsParseTypeArgumentsInExpression();if(!Ih)return;if(Ah&&!this.match(10)){Eh=this.state.curPosition();return}if(ud(this.state.type)){let Qp=super.parseTaggedTemplateExpression(sc,nh,mh);return Qp.typeParameters=Ih,Qp}if(!lh&&this.eat(10)){let Qp=this.startNodeAt(nh);return Qp.callee=sc,Qp.arguments=this.parseCallExpressionArguments(11,!1),this.tsCheckForInvalidTypeCasts(Qp.arguments),Qp.typeParameters=Ih,mh.optionalChainMember&&(Qp.optional=Ah),this.finishCallExpression(Qp,mh.optionalChainMember)}let Mh=this.state.type;if(Mh===48||Mh===52||Mh!==10&&Sh(Mh)&&!this.hasPrecedingLineBreak())return;let Yh=this.startNodeAt(nh);return Yh.expression=sc,Yh.typeParameters=Ih,this.finishNode(Yh,"TSInstantiationExpression")});if(Eh&&this.unexpected(Eh,10),Oh)return Oh.type==="TSInstantiationExpression"&&(this.match(16)||this.match(18)&&this.lookaheadCharCode()!==40)&&this.raise(ad.InvalidPropertyAccessAfterInstantiationExpression,this.state.startLoc),Oh}return super.parseSubscript(sc,nh,lh,mh)}parseNewCallee(sc){var nh;super.parseNewCallee(sc);let{callee:lh}=sc;lh.type==="TSInstantiationExpression"&&!((nh=lh.extra)!=null&&nh.parenthesized)&&(sc.typeParameters=lh.typeParameters,sc.callee=lh.expression)}parseExprOp(sc,nh,lh){let mh;if(Jh(58)>lh&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||(mh=this.isContextual(120)))){let Ah=this.startNodeAt(nh);return Ah.expression=sc,Ah.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?(mh&&this.raise(eh.UnexpectedKeyword,this.state.startLoc,{keyword:"const"}),this.tsParseTypeReference()):this.tsParseType())),this.finishNode(Ah,mh?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(Ah,nh,lh)}return super.parseExprOp(sc,nh,lh)}checkReservedWord(sc,nh,lh,mh){this.state.isAmbientContext||super.checkReservedWord(sc,nh,lh,mh)}checkImportReflection(sc){super.checkImportReflection(sc),sc.module&&sc.importKind!=="value"&&this.raise(ad.ImportReflectionHasImportType,sc.specifiers[0].loc.start)}checkDuplicateExports(){}isPotentialImportPhase(sc){if(super.isPotentialImportPhase(sc))return!0;if(this.isContextual(130)){let nh=this.lookaheadCharCode();return sc?nh===123||nh===42:nh!==61}return!sc&&this.isContextual(87)}applyImportPhase(sc,nh,lh,mh){super.applyImportPhase(sc,nh,lh,mh),nh?sc.exportKind=lh==="type"?"type":"value":sc.importKind=lh==="type"||lh==="typeof"?lh:"value"}parseImport(sc){if(this.match(133))return sc.importKind="value",super.parseImport(sc);let nh;if(Qh(this.state.type)&&this.lookaheadCharCode()===61)return sc.importKind="value",this.tsParseImportEqualsDeclaration(sc);if(this.isContextual(130)){let lh=this.parseMaybeImportPhase(sc,!1);if(this.lookaheadCharCode()===61)return this.tsParseImportEqualsDeclaration(sc,lh);nh=super.parseImportSpecifiersAndAfter(sc,lh)}else nh=super.parseImport(sc);return nh.importKind==="type"&&nh.specifiers.length>1&&nh.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(ad.TypeImportCannotSpecifyDefaultAndNamed,nh),nh}parseExport(sc,nh){if(this.match(83)){this.next();let lh=sc,mh=null;return this.isContextual(130)&&this.isPotentialImportPhase(!1)?mh=this.parseMaybeImportPhase(lh,!1):lh.importKind="value",this.tsParseImportEqualsDeclaration(lh,mh,!0)}else if(this.eat(29)){let lh=sc;return lh.expression=super.parseExpression(),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(lh,"TSExportAssignment")}else if(this.eatContextual(93)){let lh=sc;return this.expectContextual(128),lh.id=this.parseIdentifier(),this.semicolon(),this.finishNode(lh,"TSNamespaceExportDeclaration")}else return super.parseExport(sc,nh)}isAbstractClass(){return this.isContextual(124)&&this.lookahead().type===80}parseExportDefaultExpression(){if(this.isAbstractClass()){let sc=this.startNode();return this.next(),sc.abstract=!0,this.parseClass(sc,!0,!0)}if(this.match(129)){let sc=this.tsParseInterfaceDeclaration(this.startNode());if(sc)return sc}return super.parseExportDefaultExpression()}parseVarStatement(sc,nh,lh=!1){let{isAmbientContext:mh}=this.state,Ah=super.parseVarStatement(sc,nh,lh||mh);if(!mh)return Ah;for(let{id:Eh,init:Oh}of Ah.declarations)Oh&&(nh!=="const"||Eh.typeAnnotation?this.raise(ad.InitializerNotAllowedInAmbientContext,Oh):zm(Oh,this.hasPlugin("estree"))||this.raise(ad.ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference,Oh));return Ah}parseStatementContent(sc,nh){if(this.match(75)&&this.isLookaheadContextual("enum")){let lh=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(lh,{const:!0})}if(this.isContextual(126))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(129)){let lh=this.tsParseInterfaceDeclaration(this.startNode());if(lh)return lh}return super.parseStatementContent(sc,nh)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(sc,nh){return nh.some(lh=>bf(lh)?sc.accessibility===lh:!!sc[lh])}tsIsStartOfStaticBlocks(){return this.isContextual(106)&&this.lookaheadCharCode()===123}parseClassMember(sc,nh,lh){let mh=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:mh,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:ad.InvalidModifierOnTypeParameterPositions},nh);let Ah=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(nh,mh)&&this.raise(ad.StaticBlockCannotHaveModifier,this.state.curPosition()),super.parseClassStaticBlock(sc,nh)):this.parseClassMemberWithIsStatic(sc,nh,lh,!!nh.static)};nh.declare?this.tsInAmbientContext(Ah):Ah()}parseClassMemberWithIsStatic(sc,nh,lh,mh){let Ah=this.tsTryParseIndexSignature(nh);if(Ah){sc.body.push(Ah),nh.abstract&&this.raise(ad.IndexSignatureHasAbstract,nh),nh.accessibility&&this.raise(ad.IndexSignatureHasAccessibility,nh,{modifier:nh.accessibility}),nh.declare&&this.raise(ad.IndexSignatureHasDeclare,nh),nh.override&&this.raise(ad.IndexSignatureHasOverride,nh);return}!this.state.inAbstractClass&&nh.abstract&&this.raise(ad.NonAbstractClassHasAbstractMethod,nh),nh.override&&(lh.hadSuperClass||this.raise(ad.OverrideNotInSubClass,nh)),super.parseClassMemberWithIsStatic(sc,nh,lh,mh)}parsePostMemberNameModifiers(sc){this.eat(17)&&(sc.optional=!0),sc.readonly&&this.match(10)&&this.raise(ad.ClassMethodHasReadonly,sc),sc.declare&&this.match(10)&&this.raise(ad.ClassMethodHasDeclare,sc)}parseExpressionStatement(sc,nh,lh){return(nh.type==="Identifier"?this.tsParseExpressionStatement(sc,nh,lh):void 0)||super.parseExpressionStatement(sc,nh,lh)}shouldParseExportDeclaration(){return this.tsIsDeclarationStart()?!0:super.shouldParseExportDeclaration()}parseConditional(sc,nh,lh){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(sc,nh,lh);let mh=this.tryParse(()=>super.parseConditional(sc,nh));return mh.node?(mh.error&&(this.state=mh.failState),mh.node):(mh.error&&super.setOptionalParametersError(lh,mh.error),sc)}parseParenItem(sc,nh){let lh=super.parseParenItem(sc,nh);if(this.eat(17)&&(lh.optional=!0,this.resetEndLocation(sc)),this.match(14)){let mh=this.startNodeAt(nh);return mh.expression=sc,mh.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(mh,"TSTypeCastExpression")}return sc}parseExportDeclaration(sc){if(!this.state.isAmbientContext&&this.isContextual(125))return this.tsInAmbientContext(()=>this.parseExportDeclaration(sc));let nh=this.state.startLoc,lh=this.eatContextual(125);if(lh&&(this.isContextual(125)||!this.shouldParseExportDeclaration()))throw this.raise(ad.ExpectedAmbientAfterExportDeclare,this.state.startLoc);let mh=Qh(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(sc);return mh?((mh.type==="TSInterfaceDeclaration"||mh.type==="TSTypeAliasDeclaration"||lh)&&(sc.exportKind="type"),lh&&(this.resetStartLocation(mh,nh),mh.declare=!0),mh):null}parseClassId(sc,nh,lh,mh){if((!nh||lh)&&this.isContextual(113))return;super.parseClassId(sc,nh,lh,sc.declare?1024:8331);let Ah=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);Ah&&(sc.typeParameters=Ah)}parseClassPropertyAnnotation(sc){sc.optional||(this.eat(35)?sc.definite=!0:this.eat(17)&&(sc.optional=!0));let nh=this.tsTryParseTypeAnnotation();nh&&(sc.typeAnnotation=nh)}parseClassProperty(sc){if(this.parseClassPropertyAnnotation(sc),this.state.isAmbientContext&&!(sc.readonly&&!sc.typeAnnotation)&&this.match(29)&&this.raise(ad.DeclareClassFieldHasInitializer,this.state.startLoc),sc.abstract&&this.match(29)){let{key:nh}=sc;this.raise(ad.AbstractPropertyHasInitializer,this.state.startLoc,{propertyName:nh.type==="Identifier"&&!sc.computed?nh.name:`[${this.input.slice(nh.start,nh.end)}]`})}return super.parseClassProperty(sc)}parseClassPrivateProperty(sc){return sc.abstract&&this.raise(ad.PrivateElementHasAbstract,sc),sc.accessibility&&this.raise(ad.PrivateElementHasAccessibility,sc,{modifier:sc.accessibility}),this.parseClassPropertyAnnotation(sc),super.parseClassPrivateProperty(sc)}parseClassAccessorProperty(sc){return this.parseClassPropertyAnnotation(sc),sc.optional&&this.raise(ad.AccessorCannotBeOptional,sc),super.parseClassAccessorProperty(sc)}pushClassMethod(sc,nh,lh,mh,Ah,Eh){let Oh=this.tsTryParseTypeParameters(this.tsParseConstModifier);Oh&&Ah&&this.raise(ad.ConstructorHasTypeParameters,Oh);let{declare:Ih=!1,kind:Mh}=nh;Ih&&(Mh==="get"||Mh==="set")&&this.raise(ad.DeclareAccessor,nh,{kind:Mh}),Oh&&(nh.typeParameters=Oh),super.pushClassMethod(sc,nh,lh,mh,Ah,Eh)}pushClassPrivateMethod(sc,nh,lh,mh){let Ah=this.tsTryParseTypeParameters(this.tsParseConstModifier);Ah&&(nh.typeParameters=Ah),super.pushClassPrivateMethod(sc,nh,lh,mh)}declareClassPrivateMethodInScope(sc,nh){sc.type!=="TSDeclareMethod"&&(sc.type==="MethodDefinition"&&!hasOwnProperty.call(sc.value,"body")||super.declareClassPrivateMethodInScope(sc,nh))}parseClassSuper(sc){super.parseClassSuper(sc),sc.superClass&&(this.match(47)||this.match(51))&&(sc.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(113)&&(sc.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(sc,nh,lh,mh,Ah,Eh,Oh){let Ih=this.tsTryParseTypeParameters(this.tsParseConstModifier);return Ih&&(sc.typeParameters=Ih),super.parseObjPropValue(sc,nh,lh,mh,Ah,Eh,Oh)}parseFunctionParams(sc,nh){let lh=this.tsTryParseTypeParameters(this.tsParseConstModifier);lh&&(sc.typeParameters=lh),super.parseFunctionParams(sc,nh)}parseVarId(sc,nh){super.parseVarId(sc,nh),sc.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(sc.definite=!0);let lh=this.tsTryParseTypeAnnotation();lh&&(sc.id.typeAnnotation=lh,this.resetEndLocation(sc.id))}parseAsyncArrowFromCallExpression(sc,nh){return this.match(14)&&(sc.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(sc,nh)}parseMaybeAssign(sc,nh){var lh,mh,Ah,Eh,Oh;let Ih,Mh,Yh;if(this.hasPlugin("jsx")&&(this.match(142)||this.match(47))){if(Ih=this.state.clone(),Mh=this.tryParse(()=>super.parseMaybeAssign(sc,nh),Ih),!Mh.error)return Mh.node;let{context:rd}=this.state,cd=rd[rd.length-1];(cd===ch.j_oTag||cd===ch.j_expr)&&rd.pop()}if(!((lh=Mh)!=null&&lh.error)&&!this.match(47))return super.parseMaybeAssign(sc,nh);(!Ih||Ih===this.state)&&(Ih=this.state.clone());let Qp,td=this.tryParse(rd=>{var cd,gd;Qp=this.tsParseTypeParameters(this.tsParseConstModifier);let hd=super.parseMaybeAssign(sc,nh);return(hd.type!=="ArrowFunctionExpression"||(cd=hd.extra)!=null&&cd.parenthesized)&&rd(),((gd=Qp)==null?void 0:gd.params.length)!==0&&this.resetStartLocationFromNode(hd,Qp),hd.typeParameters=Qp,hd},Ih);if(!td.error&&!td.aborted)return Qp&&this.reportReservedArrowTypeParam(Qp),td.node;if(!Mh&&(_f(!this.hasPlugin("jsx")),Yh=this.tryParse(()=>super.parseMaybeAssign(sc,nh),Ih),!Yh.error))return Yh.node;if((mh=Mh)!=null&&mh.node)return this.state=Mh.failState,Mh.node;if(td.node)return this.state=td.failState,Qp&&this.reportReservedArrowTypeParam(Qp),td.node;if((Ah=Yh)!=null&&Ah.node)return this.state=Yh.failState,Yh.node;throw((Eh=Mh)==null?void 0:Eh.error)||td.error||((Oh=Yh)==null?void 0:Oh.error)}reportReservedArrowTypeParam(sc){var nh;sc.params.length===1&&!sc.params[0].constraint&&!((nh=sc.extra)!=null&&nh.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(ad.ReservedArrowTypeParam,sc)}parseMaybeUnary(sc,nh){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(sc,nh)}parseArrow(sc){if(this.match(14)){let nh=this.tryParse(lh=>{let mh=this.tsParseTypeOrTypePredicateAnnotation(14);return(this.canInsertSemicolon()||!this.match(19))&&lh(),mh});if(nh.aborted)return;nh.thrown||(nh.error&&(this.state=nh.failState),sc.returnType=nh.node)}return super.parseArrow(sc)}parseAssignableListItemTypes(sc,nh){if(!(nh&2))return sc;this.eat(17)&&(sc.optional=!0);let lh=this.tsTryParseTypeAnnotation();return lh&&(sc.typeAnnotation=lh),this.resetEndLocation(sc),sc}isAssignable(sc,nh){switch(sc.type){case"TSTypeCastExpression":return this.isAssignable(sc.expression,nh);case"TSParameterProperty":return!0;default:return super.isAssignable(sc,nh)}}toAssignable(sc,nh=!1){switch(sc.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(sc,nh);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":nh?this.expressionScope.recordArrowParameterBindingError(ad.UnexpectedTypeCastInParameter,sc):this.raise(ad.UnexpectedTypeCastInParameter,sc),this.toAssignable(sc.expression,nh);break;case"AssignmentExpression":!nh&&sc.left.type==="TSTypeCastExpression"&&(sc.left=this.typeCastToParameter(sc.left));default:super.toAssignable(sc,nh)}}toAssignableParenthesizedExpression(sc,nh){switch(sc.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(sc.expression,nh);break;default:super.toAssignable(sc,nh)}}checkToRestConversion(sc,nh){switch(sc.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(sc.expression,!1);break;default:super.checkToRestConversion(sc,nh)}}isValidLVal(sc,nh,lh){return Lm({TSTypeCastExpression:!0,TSParameterProperty:"parameter",TSNonNullExpression:"expression",TSInstantiationExpression:"expression",TSAsExpression:(lh!==64||!nh)&&["expression",!0],TSSatisfiesExpression:(lh!==64||!nh)&&["expression",!0],TSTypeAssertion:(lh!==64||!nh)&&["expression",!0]},sc)||super.isValidLVal(sc,nh,lh)}parseBindingAtom(){return this.state.type===78?this.parseIdentifier(!0):super.parseBindingAtom()}parseMaybeDecoratorArguments(sc){if(this.match(47)||this.match(51)){let nh=this.tsParseTypeArgumentsInExpression();if(this.match(10)){let lh=super.parseMaybeDecoratorArguments(sc);return lh.typeParameters=nh,lh}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(sc)}checkCommaAfterRest(sc){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===sc?(this.next(),!1):super.checkCommaAfterRest(sc)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(sc,nh){let lh=super.parseMaybeDefault(sc,nh);return lh.type==="AssignmentPattern"&&lh.typeAnnotation&&lh.right.start<lh.typeAnnotation.start&&this.raise(ad.TypeAnnotationAfterAssign,lh.typeAnnotation),lh}getTokenFromCode(sc){if(this.state.inType){if(sc===62){this.finishOp(48,1);return}if(sc===60){this.finishOp(47,1);return}}super.getTokenFromCode(sc)}reScan_lt_gt(){let{type:sc}=this.state;sc===47?(this.state.pos-=1,this.readToken_lt()):sc===48&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){let{type:sc}=this.state;return sc===51?(this.state.pos-=2,this.finishOp(47,1),47):sc}toAssignableList(sc,nh,lh){for(let mh=0;mh<sc.length;mh++){let Ah=sc[mh];(Ah==null?void 0:Ah.type)==="TSTypeCastExpression"&&(sc[mh]=this.typeCastToParameter(Ah))}super.toAssignableList(sc,nh,lh)}typeCastToParameter(sc){return sc.expression.typeAnnotation=sc.typeAnnotation,this.resetEndLocation(sc.expression,sc.typeAnnotation.loc.end),sc.expression}shouldParseArrow(sc){return this.match(14)?sc.every(nh=>this.isAssignable(nh,!0)):super.shouldParseArrow(sc)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(sc){if(this.match(47)||this.match(51)){let nh=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());nh&&(sc.typeParameters=nh)}return super.jsxParseOpeningElementAfterName(sc)}getGetterSetterExpectedParamCount(sc){let nh=super.getGetterSetterExpectedParamCount(sc),lh=this.getObjectOrClassMethodParams(sc)[0];return lh&&this.isThisParam(lh)?nh+1:nh}parseCatchClauseParam(){let sc=super.parseCatchClauseParam(),nh=this.tsTryParseTypeAnnotation();return nh&&(sc.typeAnnotation=nh,this.resetEndLocation(sc)),sc}tsInAmbientContext(sc){let nh=this.state.isAmbientContext;this.state.isAmbientContext=!0;try{return sc()}finally{this.state.isAmbientContext=nh}}parseClass(sc,nh,lh){let mh=this.state.inAbstractClass;this.state.inAbstractClass=!!sc.abstract;try{return super.parseClass(sc,nh,lh)}finally{this.state.inAbstractClass=mh}}tsParseAbstractDeclaration(sc,nh){if(this.match(80))return sc.abstract=!0,this.maybeTakeDecorators(nh,this.parseClass(sc,!0,!1));if(this.isContextual(129)){if(!this.hasFollowingLineBreak())return sc.abstract=!0,this.raise(ad.NonClassMethodPropertyHasAbstractModifer,sc),this.tsParseInterfaceDeclaration(sc)}else this.unexpected(null,80)}parseMethod(sc,nh,lh,mh,Ah,Eh,Oh){let Ih=super.parseMethod(sc,nh,lh,mh,Ah,Eh,Oh);if(Ih.abstract&&(this.hasPlugin("estree")?Ih.value.body:Ih.body)){let{key:Mh}=Ih;this.raise(ad.AbstractMethodHasImplementation,Ih,{methodName:Mh.type==="Identifier"&&!Ih.computed?Mh.name:`[${this.input.slice(Mh.start,Mh.end)}]`})}return Ih}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(sc,nh,lh,mh){return!nh&&mh?(this.parseTypeOnlyImportExportSpecifier(sc,!1,lh),this.finishNode(sc,"ExportSpecifier")):(sc.exportKind="value",super.parseExportSpecifier(sc,nh,lh,mh))}parseImportSpecifier(sc,nh,lh,mh,Ah){return!nh&&mh?(this.parseTypeOnlyImportExportSpecifier(sc,!0,lh),this.finishNode(sc,"ImportSpecifier")):(sc.importKind="value",super.parseImportSpecifier(sc,nh,lh,mh,lh?4098:4096))}parseTypeOnlyImportExportSpecifier(sc,nh,lh){let mh=nh?"imported":"local",Ah=nh?"local":"exported",Eh=sc[mh],Oh,Ih=!1,Mh=!0,Yh=Eh.loc.start;if(this.isContextual(93)){let td=this.parseIdentifier();if(this.isContextual(93)){let rd=this.parseIdentifier();Hh(this.state.type)?(Ih=!0,Eh=td,Oh=nh?this.parseIdentifier():this.parseModuleExportName(),Mh=!1):(Oh=rd,Mh=!1)}else Hh(this.state.type)?(Mh=!1,Oh=nh?this.parseIdentifier():this.parseModuleExportName()):(Ih=!0,Eh=td)}else Hh(this.state.type)&&(Ih=!0,nh?(Eh=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(Eh.name,Eh.loc.start,!0,!0)):Eh=this.parseModuleExportName());Ih&&lh&&this.raise(nh?ad.TypeModifierIsUsedInTypeImports:ad.TypeModifierIsUsedInTypeExports,Yh),sc[mh]=Eh,sc[Ah]=Oh;let Qp=nh?"importKind":"exportKind";sc[Qp]=Ih?"type":"value",Mh&&this.eatContextual(93)&&(sc[Ah]=nh?this.parseIdentifier():this.parseModuleExportName()),sc[Ah]||(sc[Ah]=Sd(sc[mh])),nh&&this.checkIdentifier(sc[Ah],Ih?4098:4096)}};function Vm(th){if(th.type!=="MemberExpression")return!1;let{computed:sc,property:nh}=th;return sc&&nh.type!=="StringLiteral"&&(nh.type!=="TemplateLiteral"||nh.expressions.length>0)?!1:Df(th.object)}function zm(th,sc){var nh;let{type:lh}=th;if((nh=th.extra)!=null&&nh.parenthesized)return!1;if(sc){if(lh==="Literal"){let{value:mh}=th;if(typeof mh=="string"||typeof mh=="boolean")return!0}}else if(lh==="StringLiteral"||lh==="BooleanLiteral")return!0;return!!(Ef(th,sc)||Gm(th,sc)||lh==="TemplateLiteral"&&th.expressions.length===0||Vm(th))}function Ef(th,sc){return sc?th.type==="Literal"&&(typeof th.value=="number"||"bigint"in th):th.type==="NumericLiteral"||th.type==="BigIntLiteral"}function Gm(th,sc){if(th.type==="UnaryExpression"){let{operator:nh,argument:lh}=th;if(nh==="-"&&Ef(lh,sc))return!0}return!1}function Df(th){return th.type==="Identifier"?!0:th.type!=="MemberExpression"||th.computed?!1:Df(th.object)}var Tf=uc`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."}),Um=th=>class extends th{parsePlaceholder(sc){if(this.match(144)){let nh=this.startNode();return this.next(),this.assertNoSpace(),nh.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(144),this.finishPlaceholder(nh,sc)}}finishPlaceholder(sc,nh){let lh=sc;return(!lh.expectedNode||!lh.type)&&(lh=this.finishNode(lh,"Placeholder")),lh.expectedNode=nh,lh}getTokenFromCode(sc){sc===37&&this.input.charCodeAt(this.state.pos+1)===37?this.finishOp(144,2):super.getTokenFromCode(sc)}parseExprAtom(sc){return this.parsePlaceholder("Expression")||super.parseExprAtom(sc)}parseIdentifier(sc){return this.parsePlaceholder("Identifier")||super.parseIdentifier(sc)}checkReservedWord(sc,nh,lh,mh){sc!==void 0&&super.checkReservedWord(sc,nh,lh,mh)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(sc,nh,lh){return sc==="Placeholder"||super.isValidLVal(sc,nh,lh)}toAssignable(sc,nh){sc&&sc.type==="Placeholder"&&sc.expectedNode==="Expression"?sc.expectedNode="Pattern":super.toAssignable(sc,nh)}chStartsBindingIdentifier(sc,nh){return!!(super.chStartsBindingIdentifier(sc,nh)||this.lookahead().type===144)}verifyBreakContinue(sc,nh){sc.label&&sc.label.type==="Placeholder"||super.verifyBreakContinue(sc,nh)}parseExpressionStatement(sc,nh){var lh;if(nh.type!=="Placeholder"||(lh=nh.extra)!=null&&lh.parenthesized)return super.parseExpressionStatement(sc,nh);if(this.match(14)){let Ah=sc;return Ah.label=this.finishPlaceholder(nh,"Identifier"),this.next(),Ah.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode(Ah,"LabeledStatement")}this.semicolon();let mh=sc;return mh.name=nh.name,this.finishPlaceholder(mh,"Statement")}parseBlock(sc,nh,lh){return this.parsePlaceholder("BlockStatement")||super.parseBlock(sc,nh,lh)}parseFunctionId(sc){return this.parsePlaceholder("Identifier")||super.parseFunctionId(sc)}parseClass(sc,nh,lh){let mh=nh?"ClassDeclaration":"ClassExpression";this.next();let Ah=this.state.strict,Eh=this.parsePlaceholder("Identifier");if(Eh)if(this.match(81)||this.match(144)||this.match(5))sc.id=Eh;else{if(lh||!nh)return sc.id=null,sc.body=this.finishPlaceholder(Eh,"ClassBody"),this.finishNode(sc,mh);throw this.raise(Tf.ClassNameIsRequired,this.state.startLoc)}else this.parseClassId(sc,nh,lh);return super.parseClassSuper(sc),sc.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!sc.superClass,Ah),this.finishNode(sc,mh)}parseExport(sc,nh){let lh=this.parsePlaceholder("Identifier");if(!lh)return super.parseExport(sc,nh);let mh=sc;if(!this.isContextual(98)&&!this.match(12))return mh.specifiers=[],mh.source=null,mh.declaration=this.finishPlaceholder(lh,"Declaration"),this.finishNode(mh,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");let Ah=this.startNode();return Ah.exported=lh,mh.specifiers=[this.finishNode(Ah,"ExportDefaultSpecifier")],super.parseExport(mh,nh)}isExportDefaultSpecifier(){if(this.match(65)){let sc=this.nextTokenStart();if(this.isUnparsedContextual(sc,"from")&&this.input.startsWith(ed(144),this.nextTokenStartSince(sc+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(sc,nh){var lh;return(lh=sc.specifiers)!=null&&lh.length?!0:super.maybeParseExportDefaultSpecifier(sc,nh)}checkExport(sc){let{specifiers:nh}=sc;nh!=null&&nh.length&&(sc.specifiers=nh.filter(lh=>lh.exported.type==="Placeholder")),super.checkExport(sc),sc.specifiers=nh}parseImport(sc){let nh=this.parsePlaceholder("Identifier");if(!nh)return super.parseImport(sc);if(sc.specifiers=[],!this.isContextual(98)&&!this.match(12))return sc.source=this.finishPlaceholder(nh,"StringLiteral"),this.semicolon(),this.finishNode(sc,"ImportDeclaration");let lh=this.startNodeAtNode(nh);return lh.local=nh,sc.specifiers.push(this.finishNode(lh,"ImportDefaultSpecifier")),this.eat(12)&&(this.maybeParseStarImportSpecifier(sc)||this.parseNamedImportSpecifiers(sc)),this.expectContextual(98),sc.source=this.parseImportSource(),this.semicolon(),this.finishNode(sc,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){this.state.start>this.state.lastTokEndLoc.index&&this.raise(Tf.UnexpectedSpace,this.state.lastTokEndLoc)}},Qm=th=>class extends th{parseV8Intrinsic(){if(this.match(54)){let sc=this.state.startLoc,nh=this.startNode();if(this.next(),Qh(this.state.type)){let lh=this.parseIdentifierName(),mh=this.createIdentifier(nh,lh);if(mh.type="V8IntrinsicIdentifier",this.match(10))return mh}this.unexpected(sc)}}parseExprAtom(sc){return this.parseV8Intrinsic()||super.parseExprAtom(sc)}};function fd(th,sc){let[nh,lh]=typeof sc=="string"?[sc,{}]:sc,mh=Object.keys(lh),Ah=mh.length===0;return th.some(Eh=>{if(typeof Eh=="string")return Ah&&Eh===nh;{let[Oh,Ih]=Eh;if(Oh!==nh)return!1;for(let Mh of mh)if(Ih[Mh]!==lh[Mh])return!1;return!0}})}function Pd(th,sc,nh){let lh=th.find(mh=>Array.isArray(mh)?mh[0]===sc:mh===sc);return lh&&Array.isArray(lh)&&lh.length>1?lh[1][nh]:null}var wf=["minimal","fsharp","hack","smart"],Cf=["^^","@@","^","%","#"];function Hm(th){if(fd(th,"decorators")){if(fd(th,"decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");let sc=Pd(th,"decorators","decoratorsBeforeExport");if(sc!=null&&typeof sc!="boolean")throw new Error("'decoratorsBeforeExport' must be a boolean, if specified.");let nh=Pd(th,"decorators","allowCallParenthesized");if(nh!=null&&typeof nh!="boolean")throw new Error("'allowCallParenthesized' must be a boolean.")}if(fd(th,"flow")&&fd(th,"typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(fd(th,"placeholders")&&fd(th,"v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(fd(th,"pipelineOperator")){let sc=Pd(th,"pipelineOperator","proposal");if(!wf.includes(sc)){let mh=wf.map(Ah=>`"${Ah}"`).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${mh}.`)}let nh=["recordAndTuple",{syntaxType:"hash"}],lh=fd(th,nh);if(sc==="hack"){if(fd(th,"placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(fd(th,"v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");let mh=Pd(th,"pipelineOperator","topicToken");if(!Cf.includes(mh)){let Ah=Cf.map(Eh=>`"${Eh}"`).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${Ah}.`)}if(mh==="#"&&lh)throw new Error(`Plugin conflict between \`["pipelineOperator", { proposal: "hack", topicToken: "#" }]\` and \`${JSON.stringify(nh)}\`.`)}else if(sc==="smart"&&lh)throw new Error(`Plugin conflict between \`["pipelineOperator", { proposal: "smart" }]\` and \`${JSON.stringify(nh)}\`.`)}if(fd(th,"moduleAttributes")){if(fd(th,"importAssertions")||fd(th,"importAttributes"))throw new Error("Cannot combine importAssertions, importAttributes and moduleAttributes plugins.");if(Pd(th,"moduleAttributes","version")!=="may-2020")throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(fd(th,"importAssertions")&&fd(th,"importAttributes"))throw new Error("Cannot combine importAssertions and importAttributes plugins.");if(fd(th,"recordAndTuple")){let sc=Pd(th,"recordAndTuple","syntaxType");if(sc!=null){let nh=["hash","bar"];if(!nh.includes(sc))throw new Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+nh.map(lh=>`'${lh}'`).join(", "))}}if(fd(th,"asyncDoExpressions")&&!fd(th,"doExpressions")){let sc=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw sc.missingPlugins="doExpressions",sc}if(fd(th,"optionalChainingAssign")&&Pd(th,"optionalChainingAssign","version")!=="2023-07")throw new Error("The 'optionalChainingAssign' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is '2023-07'.")}var Of={estree:oh,jsx:Pm,flow:Om,typescript:Fm,v8intrinsic:Qm,placeholders:Um},Wm=Object.keys(Of),tf={sourceType:"script",sourceFilename:void 0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createImportExpressions:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0};function Ym(th){if(th==null)return Object.assign({},tf);if(th.annexB!=null&&th.annexB!==!1)throw new Error("The `annexB` option can only be set to `false`.");let sc={};for(let lh of Object.keys(tf)){var nh;sc[lh]=(nh=th[lh])!=null?nh:tf[lh]}return sc}var jm=class extends Nm{checkProto(th,sc,nh,lh){if(th.type==="SpreadElement"||this.isObjectMethod(th)||th.computed||th.shorthand)return;let mh=th.key;if((mh.type==="Identifier"?mh.name:mh.value)==="__proto__"){if(sc){this.raise(eh.RecordNoProto,mh);return}nh.used&&(lh?lh.doubleProtoLoc===null&&(lh.doubleProtoLoc=mh.loc.start):this.raise(eh.DuplicateProto,mh)),nh.used=!0}}shouldExitDescending(th,sc){return th.type==="ArrowFunctionExpression"&&th.start===sc}getExpression(){this.enterInitialScopes(),this.nextToken();let th=this.parseExpression();return this.match(139)||this.unexpected(),this.finalizeRemainingComments(),th.comments=this.comments,th.errors=this.state.errors,this.options.tokens&&(th.tokens=this.tokens),th}parseExpression(th,sc){return th?this.disallowInAnd(()=>this.parseExpressionBase(sc)):this.allowInAnd(()=>this.parseExpressionBase(sc))}parseExpressionBase(th){let sc=this.state.startLoc,nh=this.parseMaybeAssign(th);if(this.match(12)){let lh=this.startNodeAt(sc);for(lh.expressions=[nh];this.eat(12);)lh.expressions.push(this.parseMaybeAssign(th));return this.toReferencedList(lh.expressions),this.finishNode(lh,"SequenceExpression")}return nh}parseMaybeAssignDisallowIn(th,sc){return this.disallowInAnd(()=>this.parseMaybeAssign(th,sc))}parseMaybeAssignAllowIn(th,sc){return this.allowInAnd(()=>this.parseMaybeAssign(th,sc))}setOptionalParametersError(th,sc){var nh;th.optionalParametersLoc=(nh=sc==null?void 0:sc.loc)!=null?nh:this.state.startLoc}parseMaybeAssign(th,sc){let nh=this.state.startLoc;if(this.isContextual(108)&&this.prodParam.hasYield){let Eh=this.parseYield();return sc&&(Eh=sc.call(this,Eh,nh)),Eh}let lh;th?lh=!1:(th=new Wd,lh=!0);let{type:mh}=this.state;(mh===10||Qh(mh))&&(this.state.potentialArrowAt=this.state.start);let Ah=this.parseMaybeConditional(th);if(sc&&(Ah=sc.call(this,Ah,nh)),Gh(this.state.type)){let Eh=this.startNodeAt(nh),Oh=this.state.value;if(Eh.operator=Oh,this.match(29)){this.toAssignable(Ah,!0),Eh.left=Ah;let Ih=nh.index;th.doubleProtoLoc!=null&&th.doubleProtoLoc.index>=Ih&&(th.doubleProtoLoc=null),th.shorthandAssignLoc!=null&&th.shorthandAssignLoc.index>=Ih&&(th.shorthandAssignLoc=null),th.privateKeyLoc!=null&&th.privateKeyLoc.index>=Ih&&(this.checkDestructuringPrivate(th),th.privateKeyLoc=null)}else Eh.left=Ah;return this.next(),Eh.right=this.parseMaybeAssign(),this.checkLVal(Ah,{in:this.finishNode(Eh,"AssignmentExpression")}),Eh}else lh&&this.checkExpressionErrors(th,!0);return Ah}parseMaybeConditional(th){let sc=this.state.startLoc,nh=this.state.potentialArrowAt,lh=this.parseExprOps(th);return this.shouldExitDescending(lh,nh)?lh:this.parseConditional(lh,sc,th)}parseConditional(th,sc,nh){if(this.eat(17)){let lh=this.startNodeAt(sc);return lh.test=th,lh.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),lh.alternate=this.parseMaybeAssign(),this.finishNode(lh,"ConditionalExpression")}return th}parseMaybeUnaryOrPrivate(th){return this.match(138)?this.parsePrivateName():this.parseMaybeUnary(th)}parseExprOps(th){let sc=this.state.startLoc,nh=this.state.potentialArrowAt,lh=this.parseMaybeUnaryOrPrivate(th);return this.shouldExitDescending(lh,nh)?lh:this.parseExprOp(lh,sc,-1)}parseExprOp(th,sc,nh){if(this.isPrivateName(th)){let mh=this.getPrivateNameSV(th);(nh>=Jh(58)||!this.prodParam.hasIn||!this.match(58))&&this.raise(eh.PrivateInExpectedIn,th,{identifierName:mh}),this.classScope.usePrivateName(mh,th.loc.start)}let lh=this.state.type;if(Vh(lh)&&(this.prodParam.hasIn||!this.match(58))){let mh=Jh(lh);if(mh>nh){if(lh===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return th;this.checkPipelineAtInfixOperator(th,sc)}let Ah=this.startNodeAt(sc);Ah.left=th,Ah.operator=this.state.value;let Eh=lh===41||lh===42,Oh=lh===40;if(Oh&&(mh=Jh(42)),this.next(),lh===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])&&this.state.type===96&&this.prodParam.hasAwait)throw this.raise(eh.UnexpectedAwaitAfterPipelineBody,this.state.startLoc);Ah.right=this.parseExprOpRightExpr(lh,mh);let Ih=this.finishNode(Ah,Eh||Oh?"LogicalExpression":"BinaryExpression"),Mh=this.state.type;if(Oh&&(Mh===41||Mh===42)||Eh&&Mh===40)throw this.raise(eh.MixingCoalesceWithLogical,this.state.startLoc);return this.parseExprOp(Ih,sc,nh)}}return th}parseExprOpRightExpr(th,sc){let nh=this.state.startLoc;switch(th){case 39:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>this.parseHackPipeBody());case"smart":return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(108))throw this.raise(eh.PipeBodyIsTighter,this.state.startLoc);return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(th,sc),nh)});case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(sc))}default:return this.parseExprOpBaseRightExpr(th,sc)}}parseExprOpBaseRightExpr(th,sc){let nh=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),nh,od(th)?sc-1:sc)}parseHackPipeBody(){var th;let{startLoc:sc}=this.state,nh=this.parseMaybeAssign();return Ja.has(nh.type)&&!((th=nh.extra)!=null&&th.parenthesized)&&this.raise(eh.PipeUnparenthesizedBody,sc,{type:nh.type}),this.topicReferenceWasUsedInCurrentContext()||this.raise(eh.PipeTopicUnused,sc),nh}checkExponentialAfterUnary(th){this.match(57)&&this.raise(eh.UnexpectedTokenUnaryExponentiation,th.argument)}parseMaybeUnary(th,sc){let nh=this.state.startLoc,lh=this.isContextual(96);if(lh&&this.isAwaitAllowed()){this.next();let Oh=this.parseAwait(nh);return sc||this.checkExponentialAfterUnary(Oh),Oh}let mh=this.match(34),Ah=this.startNode();if(Zh(this.state.type)){Ah.operator=this.state.value,Ah.prefix=!0,this.match(72)&&this.expectPlugin("throwExpressions");let Oh=this.match(89);if(this.next(),Ah.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(th,!0),this.state.strict&&Oh){let Ih=Ah.argument;Ih.type==="Identifier"?this.raise(eh.StrictDelete,Ah):this.hasPropertyAsPrivateName(Ih)&&this.raise(eh.DeletePrivateField,Ah)}if(!mh)return sc||this.checkExponentialAfterUnary(Ah),this.finishNode(Ah,"UnaryExpression")}let Eh=this.parseUpdate(Ah,mh,th);if(lh){let{type:Oh}=this.state;if((this.hasPlugin("v8intrinsic")?Sh(Oh):Sh(Oh)&&!this.match(54))&&!this.isAmbiguousAwait())return this.raiseOverwrite(eh.AwaitNotInAsyncContext,nh),this.parseAwait(nh)}return Eh}parseUpdate(th,sc,nh){if(sc){let Ah=th;return this.checkLVal(Ah.argument,{in:this.finishNode(Ah,"UpdateExpression")}),th}let lh=this.state.startLoc,mh=this.parseExprSubscripts(nh);if(this.checkExpressionErrors(nh,!1))return mh;for(;Xh(this.state.type)&&!this.canInsertSemicolon();){let Ah=this.startNodeAt(lh);Ah.operator=this.state.value,Ah.prefix=!1,Ah.argument=mh,this.next(),this.checkLVal(mh,{in:mh=this.finishNode(Ah,"UpdateExpression")})}return mh}parseExprSubscripts(th){let sc=this.state.startLoc,nh=this.state.potentialArrowAt,lh=this.parseExprAtom(th);return this.shouldExitDescending(lh,nh)?lh:this.parseSubscripts(lh,sc)}parseSubscripts(th,sc,nh){let lh={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(th),stop:!1};do th=this.parseSubscript(th,sc,nh,lh),lh.maybeAsyncArrow=!1;while(!lh.stop);return th}parseSubscript(th,sc,nh,lh){let{type:mh}=this.state;if(!nh&&mh===15)return this.parseBind(th,sc,nh,lh);if(ud(mh))return this.parseTaggedTemplateExpression(th,sc,lh);let Ah=!1;if(mh===18){if(nh&&(this.raise(eh.OptionalChainingNoNew,this.state.startLoc),this.lookaheadCharCode()===40))return lh.stop=!0,th;lh.optionalChainMember=Ah=!0,this.next()}if(!nh&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(th,sc,lh,Ah);{let Eh=this.eat(0);return Eh||Ah||this.eat(16)?this.parseMember(th,sc,lh,Eh,Ah):(lh.stop=!0,th)}}parseMember(th,sc,nh,lh,mh){let Ah=this.startNodeAt(sc);return Ah.object=th,Ah.computed=lh,lh?(Ah.property=this.parseExpression(),this.expect(3)):this.match(138)?(th.type==="Super"&&this.raise(eh.SuperPrivateField,sc),this.classScope.usePrivateName(this.state.value,this.state.startLoc),Ah.property=this.parsePrivateName()):Ah.property=this.parseIdentifier(!0),nh.optionalChainMember?(Ah.optional=mh,this.finishNode(Ah,"OptionalMemberExpression")):this.finishNode(Ah,"MemberExpression")}parseBind(th,sc,nh,lh){let mh=this.startNodeAt(sc);return mh.object=th,this.next(),mh.callee=this.parseNoCallExpr(),lh.stop=!0,this.parseSubscripts(this.finishNode(mh,"BindExpression"),sc,nh)}parseCoverCallAndAsyncArrowHead(th,sc,nh,lh){let mh=this.state.maybeInArrowParameters,Ah=null;this.state.maybeInArrowParameters=!0,this.next();let Eh=this.startNodeAt(sc);Eh.callee=th;let{maybeAsyncArrow:Oh,optionalChainMember:Ih}=nh;Oh&&(this.expressionScope.enter(ym()),Ah=new Wd),Ih&&(Eh.optional=lh),lh?Eh.arguments=this.parseCallExpressionArguments(11):Eh.arguments=this.parseCallExpressionArguments(11,th.type==="Import",th.type!=="Super",Eh,Ah);let Mh=this.finishCallExpression(Eh,Ih);return Oh&&this.shouldParseAsyncArrow()&&!lh?(nh.stop=!0,this.checkDestructuringPrivate(Ah),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),Mh=this.parseAsyncArrowFromCallExpression(this.startNodeAt(sc),Mh)):(Oh&&(this.checkExpressionErrors(Ah,!0),this.expressionScope.exit()),this.toReferencedArguments(Mh)),this.state.maybeInArrowParameters=mh,Mh}toReferencedArguments(th,sc){this.toReferencedListDeep(th.arguments,sc)}parseTaggedTemplateExpression(th,sc,nh){let lh=this.startNodeAt(sc);return lh.tag=th,lh.quasi=this.parseTemplate(!0),nh.optionalChainMember&&this.raise(eh.OptionalChainingNoTemplate,sc),this.finishNode(lh,"TaggedTemplateExpression")}atPossibleAsyncArrow(th){return th.type==="Identifier"&&th.name==="async"&&this.state.lastTokEndLoc.index===th.end&&!this.canInsertSemicolon()&&th.end-th.start===5&&th.start===this.state.potentialArrowAt}expectImportAttributesPlugin(){this.hasPlugin("importAssertions")||this.expectPlugin("importAttributes")}finishCallExpression(th,sc){if(th.callee.type==="Import")if(th.arguments.length===2&&(this.hasPlugin("moduleAttributes")||this.expectImportAttributesPlugin()),th.arguments.length===0||th.arguments.length>2)this.raise(eh.ImportCallArity,th,{maxArgumentCount:this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions")||this.hasPlugin("moduleAttributes")?2:1});else for(let nh of th.arguments)nh.type==="SpreadElement"&&this.raise(eh.ImportCallSpreadArgument,nh);return this.finishNode(th,sc?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(th,sc,nh,lh,mh){let Ah=[],Eh=!0,Oh=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(th);){if(Eh)Eh=!1;else if(this.expect(12),this.match(th)){sc&&!this.hasPlugin("importAttributes")&&!this.hasPlugin("importAssertions")&&!this.hasPlugin("moduleAttributes")&&this.raise(eh.ImportCallArgumentTrailingComma,this.state.lastTokStartLoc),lh&&this.addTrailingCommaExtraToNode(lh),this.next();break}Ah.push(this.parseExprListItem(!1,mh,nh))}return this.state.inFSharpPipelineDirectBody=Oh,Ah}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(th,sc){var nh;return this.resetPreviousNodeTrailingComments(sc),this.expect(19),this.parseArrowExpression(th,sc.arguments,!0,(nh=sc.extra)==null?void 0:nh.trailingCommaLoc),sc.innerComments&&Nd(th,sc.innerComments),sc.callee.trailingComments&&Nd(th,sc.callee.trailingComments),th}parseNoCallExpr(){let th=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),th,!0)}parseExprAtom(th){let sc,nh=null,{type:lh}=this.state;switch(lh){case 79:return this.parseSuper();case 83:return sc=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(sc):this.match(10)?this.options.createImportExpressions?this.parseImportCall(sc):this.finishNode(sc,"Import"):(this.raise(eh.UnsupportedImport,this.state.lastTokStartLoc),this.finishNode(sc,"Import"));case 78:return sc=this.startNode(),this.next(),this.finishNode(sc,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 134:return this.parseNumericLiteral(this.state.value);case 135:return this.parseBigIntLiteral(this.state.value);case 136:return this.parseDecimalLiteral(this.state.value);case 133:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{let mh=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(mh)}case 2:case 1:return this.parseArrayLike(this.state.type===2?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,th);case 6:case 7:return this.parseObjectLike(this.state.type===6?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,th);case 68:return this.parseFunctionOrFunctionSent();case 26:nh=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(nh,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{sc=this.startNode(),this.next(),sc.object=null;let mh=sc.callee=this.parseNoCallExpr();if(mh.type==="MemberExpression")return this.finishNode(sc,"BindExpression");throw this.raise(eh.UnsupportedBind,mh)}case 138:return this.raise(eh.PrivateInExpectedIn,this.state.startLoc,{identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{let mh=this.getPluginOption("pipelineOperator","proposal");if(mh)return this.parseTopicReference(mh);this.unexpected();break}case 47:{let mh=this.input.codePointAt(this.nextTokenStart());md(mh)||mh===62?this.expectOnePlugin(["jsx","flow","typescript"]):this.unexpected();break}default:if(Qh(lh)){if(this.isContextual(127)&&this.lookaheadInLineCharCode()===123)return this.parseModuleExpression();let mh=this.state.potentialArrowAt===this.state.start,Ah=this.state.containsEsc,Eh=this.parseIdentifier();if(!Ah&&Eh.name==="async"&&!this.canInsertSemicolon()){let{type:Oh}=this.state;if(Oh===68)return this.resetPreviousNodeTrailingComments(Eh),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(Eh));if(Qh(Oh))return this.lookaheadCharCode()===61?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(Eh)):Eh;if(Oh===90)return this.resetPreviousNodeTrailingComments(Eh),this.parseDo(this.startNodeAtNode(Eh),!0)}return mh&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(Eh),[Eh],!1)):Eh}else this.unexpected()}}parseTopicReferenceThenEqualsSign(th,sc){let nh=this.getPluginOption("pipelineOperator","proposal");if(nh)return this.state.type=th,this.state.value=sc,this.state.pos--,this.state.end--,this.state.endLoc=o(this.state.endLoc,-1),this.parseTopicReference(nh);this.unexpected()}parseTopicReference(th){let sc=this.startNode(),nh=this.state.startLoc,lh=this.state.type;return this.next(),this.finishTopicReference(sc,nh,th,lh)}finishTopicReference(th,sc,nh,lh){if(this.testTopicReferenceConfiguration(nh,sc,lh)){let mh=nh==="smart"?"PipelinePrimaryTopicReference":"TopicReference";return this.topicReferenceIsAllowedInCurrentContext()||this.raise(nh==="smart"?eh.PrimaryTopicNotAllowed:eh.PipeTopicUnbound,sc),this.registerTopicReference(),this.finishNode(th,mh)}else throw this.raise(eh.PipeTopicUnconfiguredToken,sc,{token:ed(lh)})}testTopicReferenceConfiguration(th,sc,nh){switch(th){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:ed(nh)}]);case"smart":return nh===27;default:throw this.raise(eh.PipeTopicRequiresHackPipes,sc)}}parseAsyncArrowUnaryFunction(th){this.prodParam.enter(Hd(!0,this.prodParam.hasYield));let sc=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(eh.LineTerminatorBeforeArrow,this.state.curPosition()),this.expect(19),this.parseArrowExpression(th,sc,!0)}parseDo(th,sc){this.expectPlugin("doExpressions"),sc&&this.expectPlugin("asyncDoExpressions"),th.async=sc,this.next();let nh=this.state.labels;return this.state.labels=[],sc?(this.prodParam.enter(2),th.body=this.parseBlock(),this.prodParam.exit()):th.body=this.parseBlock(),this.state.labels=nh,this.finishNode(th,"DoExpression")}parseSuper(){let th=this.startNode();return this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!this.options.allowSuperOutsideMethod?this.raise(eh.SuperNotAllowed,th):!this.scope.allowSuper&&!this.options.allowSuperOutsideMethod&&this.raise(eh.UnexpectedSuper,th),!this.match(10)&&!this.match(0)&&!this.match(16)&&this.raise(eh.UnsupportedSuper,th),this.finishNode(th,"Super")}parsePrivateName(){let th=this.startNode(),sc=this.startNodeAt(o(this.state.startLoc,1)),nh=this.state.value;return this.next(),th.id=this.createIdentifier(sc,nh),this.finishNode(th,"PrivateName")}parseFunctionOrFunctionSent(){let th=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){let sc=this.createIdentifier(this.startNodeAtNode(th),"function");return this.next(),this.match(103)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(th,sc,"sent")}return this.parseFunction(th)}parseMetaProperty(th,sc,nh){th.meta=sc;let lh=this.state.containsEsc;return th.property=this.parseIdentifier(!0),(th.property.name!==nh||lh)&&this.raise(eh.UnsupportedMetaProperty,th.property,{target:sc.name,onlyValidPropertyName:nh}),this.finishNode(th,"MetaProperty")}parseImportMetaProperty(th){let sc=this.createIdentifier(this.startNodeAtNode(th),"import");if(this.next(),this.isContextual(101))this.inModule||this.raise(eh.ImportMetaOutsideModule,sc),this.sawUnambiguousESM=!0;else if(this.isContextual(105)||this.isContextual(97)){let nh=this.isContextual(105);if(nh||this.unexpected(),this.expectPlugin(nh?"sourcePhaseImports":"deferredImportEvaluation"),!this.options.createImportExpressions)throw this.raise(eh.DynamicImportPhaseRequiresImportExpressions,this.state.startLoc,{phase:this.state.value});return this.next(),th.phase=nh?"source":"defer",this.parseImportCall(th)}return this.parseMetaProperty(th,sc,"meta")}parseLiteralAtNode(th,sc,nh){return this.addExtra(nh,"rawValue",th),this.addExtra(nh,"raw",this.input.slice(nh.start,this.state.end)),nh.value=th,this.next(),this.finishNode(nh,sc)}parseLiteral(th,sc){let nh=this.startNode();return this.parseLiteralAtNode(th,sc,nh)}parseStringLiteral(th){return this.parseLiteral(th,"StringLiteral")}parseNumericLiteral(th){return this.parseLiteral(th,"NumericLiteral")}parseBigIntLiteral(th){return this.parseLiteral(th,"BigIntLiteral")}parseDecimalLiteral(th){return this.parseLiteral(th,"DecimalLiteral")}parseRegExpLiteral(th){let sc=this.parseLiteral(th.value,"RegExpLiteral");return sc.pattern=th.pattern,sc.flags=th.flags,sc}parseBooleanLiteral(th){let sc=this.startNode();return sc.value=th,this.next(),this.finishNode(sc,"BooleanLiteral")}parseNullLiteral(){let th=this.startNode();return this.next(),this.finishNode(th,"NullLiteral")}parseParenAndDistinguishExpression(th){let sc=this.state.startLoc,nh;this.next(),this.expressionScope.enter(vm());let lh=this.state.maybeInArrowParameters,mh=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;let Ah=this.state.startLoc,Eh=[],Oh=new Wd,Ih=!0,Mh,Yh;for(;!this.match(11);){if(Ih)Ih=!1;else if(this.expect(12,Oh.optionalParametersLoc===null?null:Oh.optionalParametersLoc),this.match(11)){Yh=this.state.startLoc;break}if(this.match(21)){let rd=this.state.startLoc;if(Mh=this.state.startLoc,Eh.push(this.parseParenItem(this.parseRestBinding(),rd)),!this.checkCommaAfterRest(41))break}else Eh.push(this.parseMaybeAssignAllowIn(Oh,this.parseParenItem))}let Qp=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=lh,this.state.inFSharpPipelineDirectBody=mh;let td=this.startNodeAt(sc);return th&&this.shouldParseArrow(Eh)&&(td=this.parseArrow(td))?(this.checkDestructuringPrivate(Oh),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(td,Eh,!1),td):(this.expressionScope.exit(),Eh.length||this.unexpected(this.state.lastTokStartLoc),Yh&&this.unexpected(Yh),Mh&&this.unexpected(Mh),this.checkExpressionErrors(Oh,!0),this.toReferencedListDeep(Eh,!0),Eh.length>1?(nh=this.startNodeAt(Ah),nh.expressions=Eh,this.finishNode(nh,"SequenceExpression"),this.resetEndLocation(nh,Qp)):nh=Eh[0],this.wrapParenthesis(sc,nh))}wrapParenthesis(th,sc){if(!this.options.createParenthesizedExpressions)return this.addExtra(sc,"parenthesized",!0),this.addExtra(sc,"parenStart",th.index),this.takeSurroundingComments(sc,th.index,this.state.lastTokEndLoc.index),sc;let nh=this.startNodeAt(th);return nh.expression=sc,this.finishNode(nh,"ParenthesizedExpression")}shouldParseArrow(th){return!this.canInsertSemicolon()}parseArrow(th){if(this.eat(19))return th}parseParenItem(th,sc){return th}parseNewOrNewTarget(){let th=this.startNode();if(this.next(),this.match(16)){let sc=this.createIdentifier(this.startNodeAtNode(th),"new");this.next();let nh=this.parseMetaProperty(th,sc,"target");return!this.scope.inNonArrowFunction&&!this.scope.inClass&&!this.options.allowNewTargetOutsideFunction&&this.raise(eh.UnexpectedNewTarget,nh),nh}return this.parseNew(th)}parseNew(th){if(this.parseNewCallee(th),this.eat(10)){let sc=this.parseExprList(11);this.toReferencedList(sc),th.arguments=sc}else th.arguments=[];return this.finishNode(th,"NewExpression")}parseNewCallee(th){let sc=this.match(83),nh=this.parseNoCallExpr();th.callee=nh,sc&&(nh.type==="Import"||nh.type==="ImportExpression")&&this.raise(eh.ImportCallNotNewExpression,nh)}parseTemplateElement(th){let{start:sc,startLoc:nh,end:lh,value:mh}=this.state,Ah=sc+1,Eh=this.startNodeAt(o(nh,1));mh===null&&(th||this.raise(eh.InvalidEscapeSequenceTemplate,o(this.state.firstInvalidTemplateEscapePos,1)));let Oh=this.match(24),Ih=Oh?-1:-2,Mh=lh+Ih;Eh.value={raw:this.input.slice(Ah,Mh).replace(/\r\n?/g,`
`),cooked:mh===null?null:mh.slice(1,Ih)},Eh.tail=Oh,this.next();let Yh=this.finishNode(Eh,"TemplateElement");return this.resetEndLocation(Yh,o(this.state.lastTokEndLoc,Ih)),Yh}parseTemplate(th){let sc=this.startNode(),nh=this.parseTemplateElement(th),lh=[nh],mh=[];for(;!nh.tail;)mh.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),lh.push(nh=this.parseTemplateElement(th));return sc.expressions=mh,sc.quasis=lh,this.finishNode(sc,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(th,sc,nh,lh){nh&&this.expectPlugin("recordAndTuple");let mh=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let Ah=Object.create(null),Eh=!0,Oh=this.startNode();for(Oh.properties=[],this.next();!this.match(th);){if(Eh)Eh=!1;else if(this.expect(12),this.match(th)){this.addTrailingCommaExtraToNode(Oh);break}let Mh;sc?Mh=this.parseBindingProperty():(Mh=this.parsePropertyDefinition(lh),this.checkProto(Mh,nh,Ah,lh)),nh&&!this.isObjectProperty(Mh)&&Mh.type!=="SpreadElement"&&this.raise(eh.InvalidRecordProperty,Mh),Mh.shorthand&&this.addExtra(Mh,"shorthand",!0),Oh.properties.push(Mh)}this.next(),this.state.inFSharpPipelineDirectBody=mh;let Ih="ObjectExpression";return sc?Ih="ObjectPattern":nh&&(Ih="RecordExpression"),this.finishNode(Oh,Ih)}addTrailingCommaExtraToNode(th){this.addExtra(th,"trailingComma",this.state.lastTokStartLoc.index),this.addExtra(th,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(th){return!th.computed&&th.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(th){let sc=[];if(this.match(26))for(this.hasPlugin("decorators")&&this.raise(eh.UnsupportedPropertyDecorator,this.state.startLoc);this.match(26);)sc.push(this.parseDecorator());let nh=this.startNode(),lh=!1,mh=!1,Ah;if(this.match(21))return sc.length&&this.unexpected(),this.parseSpread();sc.length&&(nh.decorators=sc,sc=[]),nh.method=!1,th&&(Ah=this.state.startLoc);let Eh=this.eat(55);this.parsePropertyNamePrefixOperator(nh);let Oh=this.state.containsEsc;if(this.parsePropertyName(nh,th),!Eh&&!Oh&&this.maybeAsyncOrAccessorProp(nh)){let{key:Ih}=nh,Mh=Ih.name;Mh==="async"&&!this.hasPrecedingLineBreak()&&(lh=!0,this.resetPreviousNodeTrailingComments(Ih),Eh=this.eat(55),this.parsePropertyName(nh)),(Mh==="get"||Mh==="set")&&(mh=!0,this.resetPreviousNodeTrailingComments(Ih),nh.kind=Mh,this.match(55)&&(Eh=!0,this.raise(eh.AccessorIsGenerator,this.state.curPosition(),{kind:Mh}),this.next()),this.parsePropertyName(nh))}return this.parseObjPropValue(nh,Ah,Eh,lh,!1,mh,th)}getGetterSetterExpectedParamCount(th){return th.kind==="get"?0:1}getObjectOrClassMethodParams(th){return th.params}checkGetterSetterParams(th){var sc;let nh=this.getGetterSetterExpectedParamCount(th),lh=this.getObjectOrClassMethodParams(th);lh.length!==nh&&this.raise(th.kind==="get"?eh.BadGetterArity:eh.BadSetterArity,th),th.kind==="set"&&((sc=lh[lh.length-1])==null?void 0:sc.type)==="RestElement"&&this.raise(eh.BadSetterRestParameter,th)}parseObjectMethod(th,sc,nh,lh,mh){if(mh){let Ah=this.parseMethod(th,sc,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(Ah),Ah}if(nh||sc||this.match(10))return lh&&this.unexpected(),th.kind="method",th.method=!0,this.parseMethod(th,sc,nh,!1,!1,"ObjectMethod")}parseObjectProperty(th,sc,nh,lh){if(th.shorthand=!1,this.eat(14))return th.value=nh?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowIn(lh),this.finishNode(th,"ObjectProperty");if(!th.computed&&th.key.type==="Identifier"){if(this.checkReservedWord(th.key.name,th.key.loc.start,!0,!1),nh)th.value=this.parseMaybeDefault(sc,Sd(th.key));else if(this.match(29)){let mh=this.state.startLoc;lh!=null?lh.shorthandAssignLoc===null&&(lh.shorthandAssignLoc=mh):this.raise(eh.InvalidCoverInitializedName,mh),th.value=this.parseMaybeDefault(sc,Sd(th.key))}else th.value=Sd(th.key);return th.shorthand=!0,this.finishNode(th,"ObjectProperty")}}parseObjPropValue(th,sc,nh,lh,mh,Ah,Eh){let Oh=this.parseObjectMethod(th,nh,lh,mh,Ah)||this.parseObjectProperty(th,sc,mh,Eh);return Oh||this.unexpected(),Oh}parsePropertyName(th,sc){if(this.eat(0))th.computed=!0,th.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{let{type:nh,value:lh}=this.state,mh;if(Hh(nh))mh=this.parseIdentifier(!0);else switch(nh){case 134:mh=this.parseNumericLiteral(lh);break;case 133:mh=this.parseStringLiteral(lh);break;case 135:mh=this.parseBigIntLiteral(lh);break;case 136:mh=this.parseDecimalLiteral(lh);break;case 138:{let Ah=this.state.startLoc;sc!=null?sc.privateKeyLoc===null&&(sc.privateKeyLoc=Ah):this.raise(eh.UnexpectedPrivateField,Ah),mh=this.parsePrivateName();break}default:this.unexpected()}th.key=mh,nh!==138&&(th.computed=!1)}}initFunction(th,sc){th.id=null,th.generator=!1,th.async=sc}parseMethod(th,sc,nh,lh,mh,Ah,Eh=!1){this.initFunction(th,nh),th.generator=sc,this.scope.enter(18|(Eh?64:0)|(mh?32:0)),this.prodParam.enter(Hd(nh,th.generator)),this.parseFunctionParams(th,lh);let Oh=this.parseFunctionBodyAndFinish(th,Ah,!0);return this.prodParam.exit(),this.scope.exit(),Oh}parseArrayLike(th,sc,nh,lh){nh&&this.expectPlugin("recordAndTuple");let mh=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let Ah=this.startNode();return this.next(),Ah.elements=this.parseExprList(th,!nh,lh,Ah),this.state.inFSharpPipelineDirectBody=mh,this.finishNode(Ah,nh?"TupleExpression":"ArrayExpression")}parseArrowExpression(th,sc,nh,lh){this.scope.enter(6);let mh=Hd(nh,!1);!this.match(5)&&this.prodParam.hasIn&&(mh|=8),this.prodParam.enter(mh),this.initFunction(th,nh);let Ah=this.state.maybeInArrowParameters;return sc&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(th,sc,lh)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(th,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=Ah,this.finishNode(th,"ArrowFunctionExpression")}setArrowFunctionParameters(th,sc,nh){this.toAssignableList(sc,nh,!1),th.params=sc}parseFunctionBodyAndFinish(th,sc,nh=!1){return this.parseFunctionBody(th,!1,nh),this.finishNode(th,sc)}parseFunctionBody(th,sc,nh=!1){let lh=sc&&!this.match(5);if(this.expressionScope.enter(Af()),lh)th.body=this.parseMaybeAssign(),this.checkParams(th,!1,sc,!1);else{let mh=this.state.strict,Ah=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|4),th.body=this.parseBlock(!0,!1,Eh=>{let Oh=!this.isSimpleParamList(th.params);Eh&&Oh&&this.raise(eh.IllegalLanguageModeDirective,(th.kind==="method"||th.kind==="constructor")&&th.key?th.key.loc.end:th);let Ih=!mh&&this.state.strict;this.checkParams(th,!this.state.strict&&!sc&&!nh&&!Oh,sc,Ih),this.state.strict&&th.id&&this.checkIdentifier(th.id,65,Ih)}),this.prodParam.exit(),this.state.labels=Ah}this.expressionScope.exit()}isSimpleParameter(th){return th.type==="Identifier"}isSimpleParamList(th){for(let sc=0,nh=th.length;sc<nh;sc++)if(!this.isSimpleParameter(th[sc]))return!1;return!0}checkParams(th,sc,nh,lh=!0){let mh=!sc&&new Set,Ah={type:"FormalParameters"};for(let Eh of th.params)this.checkLVal(Eh,{in:Ah,binding:5,checkClashes:mh,strictModeChanged:lh})}parseExprList(th,sc,nh,lh){let mh=[],Ah=!0;for(;!this.eat(th);){if(Ah)Ah=!1;else if(this.expect(12),this.match(th)){lh&&this.addTrailingCommaExtraToNode(lh),this.next();break}mh.push(this.parseExprListItem(sc,nh))}return mh}parseExprListItem(th,sc,nh){let lh;if(this.match(12))th||this.raise(eh.UnexpectedToken,this.state.curPosition(),{unexpected:","}),lh=null;else if(this.match(21)){let mh=this.state.startLoc;lh=this.parseParenItem(this.parseSpread(sc),mh)}else if(this.match(17)){this.expectPlugin("partialApplication"),nh||this.raise(eh.UnexpectedArgumentPlaceholder,this.state.startLoc);let mh=this.startNode();this.next(),lh=this.finishNode(mh,"ArgumentPlaceholder")}else lh=this.parseMaybeAssignAllowIn(sc,this.parseParenItem);return lh}parseIdentifier(th){let sc=this.startNode(),nh=this.parseIdentifierName(th);return this.createIdentifier(sc,nh)}createIdentifier(th,sc){return th.name=sc,th.loc.identifierName=sc,this.finishNode(th,"Identifier")}parseIdentifierName(th){let sc,{startLoc:nh,type:lh}=this.state;Hh(lh)?sc=this.state.value:this.unexpected();let mh=jh(lh);return th?mh&&this.replaceToken(132):this.checkReservedWord(sc,nh,mh,!1),this.next(),sc}checkReservedWord(th,sc,nh,lh){if(!(th.length>10||!zf(th))){if(nh&&kf(th)){this.raise(eh.UnexpectedKeyword,sc,{keyword:th});return}if((this.state.strict?lh?cf:Cd:bd)(th,this.inModule)){this.raise(eh.UnexpectedReservedWord,sc,{reservedWord:th});return}else if(th==="yield"){if(this.prodParam.hasYield){this.raise(eh.YieldBindingIdentifier,sc);return}}else if(th==="await"){if(this.prodParam.hasAwait){this.raise(eh.AwaitBindingIdentifier,sc);return}if(this.scope.inStaticBlock){this.raise(eh.AwaitBindingIdentifierInStaticBlock,sc);return}this.expressionScope.recordAsyncArrowParametersError(sc)}else if(th==="arguments"&&this.scope.inClassAndNotInNonArrowFunction){this.raise(eh.ArgumentsInClass,sc);return}}}isAwaitAllowed(){return!!(this.prodParam.hasAwait||this.options.allowAwaitOutsideFunction&&!this.scope.inFunction)}parseAwait(th){let sc=this.startNodeAt(th);return this.expressionScope.recordParameterInitializerError(eh.AwaitExpressionFormalParameter,sc),this.eat(55)&&this.raise(eh.ObsoleteAwaitStar,sc),!this.scope.inFunction&&!this.options.allowAwaitOutsideFunction&&(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(sc.argument=this.parseMaybeUnary(null,!0)),this.finishNode(sc,"AwaitExpression")}isAmbiguousAwait(){if(this.hasPrecedingLineBreak())return!0;let{type:th}=this.state;return th===53||th===10||th===0||ud(th)||th===102&&!this.state.containsEsc||th===137||th===56||this.hasPlugin("v8intrinsic")&&th===54}parseYield(){let th=this.startNode();this.expressionScope.recordParameterInitializerError(eh.YieldInParameter,th),this.next();let sc=!1,nh=null;if(!this.hasPrecedingLineBreak())switch(sc=this.eat(55),this.state.type){case 13:case 139:case 8:case 11:case 3:case 9:case 14:case 12:if(!sc)break;default:nh=this.parseMaybeAssign()}return th.delegate=sc,th.argument=nh,this.finishNode(th,"YieldExpression")}parseImportCall(th){return this.next(),th.source=this.parseMaybeAssignAllowIn(),(this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions"))&&(th.options=null),this.eat(12)&&(this.expectImportAttributesPlugin(),this.match(11)||(th.options=this.parseMaybeAssignAllowIn(),this.eat(12))),this.expect(11),this.finishNode(th,"ImportExpression")}checkPipelineAtInfixOperator(th,sc){this.hasPlugin(["pipelineOperator",{proposal:"smart"}])&&th.type==="SequenceExpression"&&this.raise(eh.PipelineHeadSequenceExpression,sc)}parseSmartPipelineBodyInStyle(th,sc){if(this.isSimpleReference(th)){let nh=this.startNodeAt(sc);return nh.callee=th,this.finishNode(nh,"PipelineBareFunction")}else{let nh=this.startNodeAt(sc);return this.checkSmartPipeTopicBodyEarlyErrors(sc),nh.expression=th,this.finishNode(nh,"PipelineTopicExpression")}}isSimpleReference(th){switch(th.type){case"MemberExpression":return!th.computed&&this.isSimpleReference(th.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(th){if(this.match(19))throw this.raise(eh.PipelineBodyNoArrow,this.state.startLoc);this.topicReferenceWasUsedInCurrentContext()||this.raise(eh.PipelineTopicUnused,th)}withTopicBindingContext(th){let sc=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return th()}finally{this.state.topicContext=sc}}withSmartMixTopicForbiddingContext(th){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){let sc=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return th()}finally{this.state.topicContext=sc}}else return th()}withSoloAwaitPermittingContext(th){let sc=this.state.soloAwait;this.state.soloAwait=!0;try{return th()}finally{this.state.soloAwait=sc}}allowInAnd(th){let sc=this.prodParam.currentFlags();if(8&~sc){this.prodParam.enter(sc|8);try{return th()}finally{this.prodParam.exit()}}return th()}disallowInAnd(th){let sc=this.prodParam.currentFlags();if(8&sc){this.prodParam.enter(sc&-9);try{return th()}finally{this.prodParam.exit()}}return th()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(th){let sc=this.state.startLoc;this.state.potentialArrowAt=this.state.start;let nh=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;let lh=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),sc,th);return this.state.inFSharpPipelineDirectBody=nh,lh}parseModuleExpression(){this.expectPlugin("moduleBlocks");let th=this.startNode();this.next(),this.match(5)||this.unexpected(null,5);let sc=this.startNodeAt(this.state.endLoc);this.next();let nh=this.initializeScopes(!0);this.enterInitialScopes();try{th.body=this.parseProgram(sc,8,"module")}finally{nh()}return this.finishNode(th,"ModuleExpression")}parsePropertyNamePrefixOperator(th){}},rf={kind:1},Xm={kind:2},Zm=/[\uD800-\uDFFF]/u,nf=/in(?:stanceof)?/y;function qm(th,sc){for(let nh=0;nh<th.length;nh++){let lh=th[nh],{type:mh}=lh;if(typeof mh=="number"){{if(mh===138){let{loc:Ah,start:Eh,value:Oh,end:Ih}=lh,Mh=Eh+1,Yh=o(Ah.start,1);th.splice(nh,1,new Ed({type:ld(27),value:"#",start:Eh,end:Mh,startLoc:Ah.start,endLoc:Yh}),new Ed({type:ld(132),value:Oh,start:Mh,end:Ih,startLoc:Yh,endLoc:Ah.end})),nh++;continue}if(ud(mh)){let{loc:Ah,start:Eh,value:Oh,end:Ih}=lh,Mh=Eh+1,Yh=o(Ah.start,1),Qp;sc.charCodeAt(Eh)===96?Qp=new Ed({type:ld(22),value:"`",start:Eh,end:Mh,startLoc:Ah.start,endLoc:Yh}):Qp=new Ed({type:ld(8),value:"}",start:Eh,end:Mh,startLoc:Ah.start,endLoc:Yh});let td,rd,cd,gd;mh===24?(rd=Ih-1,cd=o(Ah.end,-1),td=Oh===null?null:Oh.slice(1,-1),gd=new Ed({type:ld(22),value:"`",start:rd,end:Ih,startLoc:cd,endLoc:Ah.end})):(rd=Ih-2,cd=o(Ah.end,-2),td=Oh===null?null:Oh.slice(1,-2),gd=new Ed({type:ld(23),value:"${",start:rd,end:Ih,startLoc:cd,endLoc:Ah.end})),th.splice(nh,1,Qp,new Ed({type:ld(20),value:td,start:Mh,end:rd,startLoc:Yh,endLoc:cd}),gd),nh+=2;continue}}lh.type=ld(mh)}}return th}var Km=class extends jm{parseTopLevel(th,sc){return th.program=this.parseProgram(sc),th.comments=this.comments,this.options.tokens&&(th.tokens=qm(this.tokens,this.input)),this.finishNode(th,"File")}parseProgram(th,sc=139,nh=this.options.sourceType){if(th.sourceType=nh,th.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(th,!0,!0,sc),this.inModule&&!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(let[mh,Ah]of Array.from(this.scope.undefinedExports))this.raise(eh.ModuleExportUndefined,Ah,{localName:mh});let lh;return sc===139?lh=this.finishNode(th,"Program"):lh=this.finishNodeAt(th,"Program",o(this.state.startLoc,-1)),lh}stmtToDirective(th){let sc=th;sc.type="Directive",sc.value=sc.expression,delete sc.expression;let nh=sc.value,lh=nh.value,mh=this.input.slice(nh.start,nh.end),Ah=nh.value=mh.slice(1,-1);return this.addExtra(nh,"raw",mh),this.addExtra(nh,"rawValue",Ah),this.addExtra(nh,"expressionValue",lh),nh.type="DirectiveLiteral",sc}parseInterpreterDirective(){if(!this.match(28))return null;let th=this.startNode();return th.value=this.state.value,this.next(),this.finishNode(th,"InterpreterDirective")}isLet(){return this.isContextual(100)?this.hasFollowingBindingAtom():!1}chStartsBindingIdentifier(th,sc){if(md(th)){if(nf.lastIndex=sc,nf.test(this.input)){let nh=this.codePointAtPos(nf.lastIndex);if(!xd(nh)&&nh!==92)return!1}return!0}else return th===92}chStartsBindingPattern(th){return th===91||th===123}hasFollowingBindingAtom(){let th=this.nextTokenStart(),sc=this.codePointAtPos(th);return this.chStartsBindingPattern(sc)||this.chStartsBindingIdentifier(sc,th)}hasInLineFollowingBindingIdentifier(){let th=this.nextTokenInLineStart(),sc=this.codePointAtPos(th);return this.chStartsBindingIdentifier(sc,th)}startsUsingForOf(){let{type:th,containsEsc:sc}=this.lookahead();if(th===102&&!sc)return!1;if(Qh(th)&&!this.hasFollowingLineBreak())return this.expectPlugin("explicitResourceManagement"),!0}startsAwaitUsing(){let th=this.nextTokenInLineStart();if(this.isUnparsedContextual(th,"using")){th=this.nextTokenInLineStartSince(th+5);let sc=this.codePointAtPos(th);if(this.chStartsBindingIdentifier(sc,th))return this.expectPlugin("explicitResourceManagement"),!0}return!1}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(th=!1){let sc=0;return this.options.annexB&&!this.state.strict&&(sc|=4,th&&(sc|=8)),this.parseStatementLike(sc)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(th){let sc=null;return this.match(26)&&(sc=this.parseDecorators(!0)),this.parseStatementContent(th,sc)}parseStatementContent(th,sc){let nh=this.state.type,lh=this.startNode(),mh=!!(th&2),Ah=!!(th&4),Eh=th&1;switch(nh){case 60:return this.parseBreakContinueStatement(lh,!0);case 63:return this.parseBreakContinueStatement(lh,!1);case 64:return this.parseDebuggerStatement(lh);case 90:return this.parseDoWhileStatement(lh);case 91:return this.parseForStatement(lh);case 68:if(this.lookaheadCharCode()===46)break;return Ah||this.raise(this.state.strict?eh.StrictFunction:this.options.annexB?eh.SloppyFunctionAnnexB:eh.SloppyFunction,this.state.startLoc),this.parseFunctionStatement(lh,!1,!mh&&Ah);case 80:return mh||this.unexpected(),this.parseClass(this.maybeTakeDecorators(sc,lh),!0);case 69:return this.parseIfStatement(lh);case 70:return this.parseReturnStatement(lh);case 71:return this.parseSwitchStatement(lh);case 72:return this.parseThrowStatement(lh);case 73:return this.parseTryStatement(lh);case 96:if(!this.state.containsEsc&&this.startsAwaitUsing())return this.isAwaitAllowed()?mh||this.raise(eh.UnexpectedLexicalDeclaration,lh):this.raise(eh.AwaitUsingNotInAsyncContext,lh),this.next(),this.parseVarStatement(lh,"await using");break;case 107:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifier())break;return this.expectPlugin("explicitResourceManagement"),!this.scope.inModule&&this.scope.inTopLevel?this.raise(eh.UnexpectedUsingDeclaration,this.state.startLoc):mh||this.raise(eh.UnexpectedLexicalDeclaration,this.state.startLoc),this.parseVarStatement(lh,"using");case 100:{if(this.state.containsEsc)break;let Mh=this.nextTokenStart(),Yh=this.codePointAtPos(Mh);if(Yh!==91&&(!mh&&this.hasFollowingLineBreak()||!this.chStartsBindingIdentifier(Yh,Mh)&&Yh!==123))break}case 75:mh||this.raise(eh.UnexpectedLexicalDeclaration,this.state.startLoc);case 74:{let Mh=this.state.value;return this.parseVarStatement(lh,Mh)}case 92:return this.parseWhileStatement(lh);case 76:return this.parseWithStatement(lh);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(lh);case 83:{let Mh=this.lookaheadCharCode();if(Mh===40||Mh===46)break}case 82:{!this.options.allowImportExportEverywhere&&!Eh&&this.raise(eh.UnexpectedImportExport,this.state.startLoc),this.next();let Mh;return nh===83?(Mh=this.parseImport(lh),Mh.type==="ImportDeclaration"&&(!Mh.importKind||Mh.importKind==="value")&&(this.sawUnambiguousESM=!0)):(Mh=this.parseExport(lh,sc),(Mh.type==="ExportNamedDeclaration"&&(!Mh.exportKind||Mh.exportKind==="value")||Mh.type==="ExportAllDeclaration"&&(!Mh.exportKind||Mh.exportKind==="value")||Mh.type==="ExportDefaultDeclaration")&&(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(Mh),Mh}default:if(this.isAsyncFunction())return mh||this.raise(eh.AsyncFunctionInSingleStatementContext,this.state.startLoc),this.next(),this.parseFunctionStatement(lh,!0,!mh&&Ah)}let Oh=this.state.value,Ih=this.parseExpression();return Qh(nh)&&Ih.type==="Identifier"&&this.eat(14)?this.parseLabeledStatement(lh,Oh,Ih,th):this.parseExpressionStatement(lh,Ih,sc)}assertModuleNodeAllowed(th){!this.options.allowImportExportEverywhere&&!this.inModule&&this.raise(eh.ImportOutsideModule,th)}decoratorsEnabledBeforeExport(){return this.hasPlugin("decorators-legacy")?!0:this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")!==!1}maybeTakeDecorators(th,sc,nh){return th&&(sc.decorators&&sc.decorators.length>0?(typeof this.getPluginOption("decorators","decoratorsBeforeExport")!="boolean"&&this.raise(eh.DecoratorsBeforeAfterExport,sc.decorators[0]),sc.decorators.unshift(...th)):sc.decorators=th,this.resetStartLocationFromNode(sc,th[0]),nh&&this.resetStartLocationFromNode(nh,sc)),sc}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(th){let sc=[];do sc.push(this.parseDecorator());while(this.match(26));if(this.match(82))th||this.unexpected(),this.decoratorsEnabledBeforeExport()||this.raise(eh.DecoratorExportClass,this.state.startLoc);else if(!this.canHaveLeadingDecorator())throw this.raise(eh.UnexpectedLeadingDecorator,this.state.startLoc);return sc}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);let th=this.startNode();if(this.next(),this.hasPlugin("decorators")){let sc=this.state.startLoc,nh;if(this.match(10)){let lh=this.state.startLoc;this.next(),nh=this.parseExpression(),this.expect(11),nh=this.wrapParenthesis(lh,nh);let mh=this.state.startLoc;th.expression=this.parseMaybeDecoratorArguments(nh),this.getPluginOption("decorators","allowCallParenthesized")===!1&&th.expression!==nh&&this.raise(eh.DecoratorArgumentsOutsideParentheses,mh)}else{for(nh=this.parseIdentifier(!1);this.eat(16);){let lh=this.startNodeAt(sc);lh.object=nh,this.match(138)?(this.classScope.usePrivateName(this.state.value,this.state.startLoc),lh.property=this.parsePrivateName()):lh.property=this.parseIdentifier(!0),lh.computed=!1,nh=this.finishNode(lh,"MemberExpression")}th.expression=this.parseMaybeDecoratorArguments(nh)}}else th.expression=this.parseExprSubscripts();return this.finishNode(th,"Decorator")}parseMaybeDecoratorArguments(th){if(this.eat(10)){let sc=this.startNodeAtNode(th);return sc.callee=th,sc.arguments=this.parseCallExpressionArguments(11,!1),this.toReferencedList(sc.arguments),this.finishNode(sc,"CallExpression")}return th}parseBreakContinueStatement(th,sc){return this.next(),this.isLineTerminator()?th.label=null:(th.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(th,sc),this.finishNode(th,sc?"BreakStatement":"ContinueStatement")}verifyBreakContinue(th,sc){let nh;for(nh=0;nh<this.state.labels.length;++nh){let lh=this.state.labels[nh];if((th.label==null||lh.name===th.label.name)&&(lh.kind!=null&&(sc||lh.kind===1)||th.label&&sc))break}if(nh===this.state.labels.length){let lh=sc?"BreakStatement":"ContinueStatement";this.raise(eh.IllegalBreakContinue,th,{type:lh})}}parseDebuggerStatement(th){return this.next(),this.semicolon(),this.finishNode(th,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);let th=this.parseExpression();return this.expect(11),th}parseDoWhileStatement(th){return this.next(),this.state.labels.push(rf),th.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.expect(92),th.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(th,"DoWhileStatement")}parseForStatement(th){this.next(),this.state.labels.push(rf);let sc=null;if(this.isAwaitAllowed()&&this.eatContextual(96)&&(sc=this.state.lastTokStartLoc),this.scope.enter(0),this.expect(10),this.match(13))return sc!==null&&this.unexpected(sc),this.parseFor(th,null);let nh=this.isContextual(100);{let Oh=this.isContextual(96)&&this.startsAwaitUsing(),Ih=Oh||this.isContextual(107)&&this.startsUsingForOf(),Mh=nh&&this.hasFollowingBindingAtom()||Ih;if(this.match(74)||this.match(75)||Mh){let Yh=this.startNode(),Qp;Oh?(Qp="await using",this.isAwaitAllowed()||this.raise(eh.AwaitUsingNotInAsyncContext,this.state.startLoc),this.next()):Qp=this.state.value,this.next(),this.parseVar(Yh,!0,Qp);let td=this.finishNode(Yh,"VariableDeclaration"),rd=this.match(58);return rd&&Ih&&this.raise(eh.ForInUsing,td),(rd||this.isContextual(102))&&td.declarations.length===1?this.parseForIn(th,td,sc):(sc!==null&&this.unexpected(sc),this.parseFor(th,td))}}let lh=this.isContextual(95),mh=new Wd,Ah=this.parseExpression(!0,mh),Eh=this.isContextual(102);if(Eh&&(nh&&this.raise(eh.ForOfLet,Ah),sc===null&&lh&&Ah.type==="Identifier"&&this.raise(eh.ForOfAsync,Ah)),Eh||this.match(58)){this.checkDestructuringPrivate(mh),this.toAssignable(Ah,!0);let Oh=Eh?"ForOfStatement":"ForInStatement";return this.checkLVal(Ah,{in:{type:Oh}}),this.parseForIn(th,Ah,sc)}else this.checkExpressionErrors(mh,!0);return sc!==null&&this.unexpected(sc),this.parseFor(th,Ah)}parseFunctionStatement(th,sc,nh){return this.next(),this.parseFunction(th,1|(nh?2:0)|(sc?8:0))}parseIfStatement(th){return this.next(),th.test=this.parseHeaderExpression(),th.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),th.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(th,"IfStatement")}parseReturnStatement(th){return!this.prodParam.hasReturn&&!this.options.allowReturnOutsideFunction&&this.raise(eh.IllegalReturn,this.state.startLoc),this.next(),this.isLineTerminator()?th.argument=null:(th.argument=this.parseExpression(),this.semicolon()),this.finishNode(th,"ReturnStatement")}parseSwitchStatement(th){this.next(),th.discriminant=this.parseHeaderExpression();let sc=th.cases=[];this.expect(5),this.state.labels.push(Xm),this.scope.enter(0);let nh;for(let lh;!this.match(8);)if(this.match(61)||this.match(65)){let mh=this.match(61);nh&&this.finishNode(nh,"SwitchCase"),sc.push(nh=this.startNode()),nh.consequent=[],this.next(),mh?nh.test=this.parseExpression():(lh&&this.raise(eh.MultipleDefaultsInSwitch,this.state.lastTokStartLoc),lh=!0,nh.test=null),this.expect(14)}else nh?nh.consequent.push(this.parseStatementListItem()):this.unexpected();return this.scope.exit(),nh&&this.finishNode(nh,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(th,"SwitchStatement")}parseThrowStatement(th){return this.next(),this.hasPrecedingLineBreak()&&this.raise(eh.NewlineAfterThrow,this.state.lastTokEndLoc),th.argument=this.parseExpression(),this.semicolon(),this.finishNode(th,"ThrowStatement")}parseCatchClauseParam(){let th=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&th.type==="Identifier"?8:0),this.checkLVal(th,{in:{type:"CatchClause"},binding:9}),th}parseTryStatement(th){if(this.next(),th.block=this.parseBlock(),th.handler=null,this.match(62)){let sc=this.startNode();this.next(),this.match(10)?(this.expect(10),sc.param=this.parseCatchClauseParam(),this.expect(11)):(sc.param=null,this.scope.enter(0)),sc.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),th.handler=this.finishNode(sc,"CatchClause")}return th.finalizer=this.eat(67)?this.parseBlock():null,!th.handler&&!th.finalizer&&this.raise(eh.NoCatchOrFinally,th),this.finishNode(th,"TryStatement")}parseVarStatement(th,sc,nh=!1){return this.next(),this.parseVar(th,!1,sc,nh),this.semicolon(),this.finishNode(th,"VariableDeclaration")}parseWhileStatement(th){return this.next(),th.test=this.parseHeaderExpression(),this.state.labels.push(rf),th.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.finishNode(th,"WhileStatement")}parseWithStatement(th){return this.state.strict&&this.raise(eh.StrictWith,this.state.startLoc),this.next(),th.object=this.parseHeaderExpression(),th.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.finishNode(th,"WithStatement")}parseEmptyStatement(th){return this.next(),this.finishNode(th,"EmptyStatement")}parseLabeledStatement(th,sc,nh,lh){for(let Ah of this.state.labels)Ah.name===sc&&this.raise(eh.LabelRedeclaration,nh,{labelName:sc});let mh=$h(this.state.type)?1:this.match(71)?2:null;for(let Ah=this.state.labels.length-1;Ah>=0;Ah--){let Eh=this.state.labels[Ah];if(Eh.statementStart===th.start)Eh.statementStart=this.state.start,Eh.kind=mh;else break}return this.state.labels.push({name:sc,kind:mh,statementStart:this.state.start}),th.body=lh&8?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),th.label=nh,this.finishNode(th,"LabeledStatement")}parseExpressionStatement(th,sc,nh){return th.expression=sc,this.semicolon(),this.finishNode(th,"ExpressionStatement")}parseBlock(th=!1,sc=!0,nh){let lh=this.startNode();return th&&this.state.strictErrors.clear(),this.expect(5),sc&&this.scope.enter(0),this.parseBlockBody(lh,th,!1,8,nh),sc&&this.scope.exit(),this.finishNode(lh,"BlockStatement")}isValidDirective(th){return th.type==="ExpressionStatement"&&th.expression.type==="StringLiteral"&&!th.expression.extra.parenthesized}parseBlockBody(th,sc,nh,lh,mh){let Ah=th.body=[],Eh=th.directives=[];this.parseBlockOrModuleBlockBody(Ah,sc?Eh:void 0,nh,lh,mh)}parseBlockOrModuleBlockBody(th,sc,nh,lh,mh){let Ah=this.state.strict,Eh=!1,Oh=!1;for(;!this.match(lh);){let Ih=nh?this.parseModuleItem():this.parseStatementListItem();if(sc&&!Oh){if(this.isValidDirective(Ih)){let Mh=this.stmtToDirective(Ih);sc.push(Mh),!Eh&&Mh.value.value==="use strict"&&(Eh=!0,this.setStrict(!0));continue}Oh=!0,this.state.strictErrors.clear()}th.push(Ih)}mh==null||mh.call(this,Eh),Ah||this.setStrict(!1),this.next()}parseFor(th,sc){return th.init=sc,this.semicolon(!1),th.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),th.update=this.match(11)?null:this.parseExpression(),this.expect(11),th.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(th,"ForStatement")}parseForIn(th,sc,nh){let lh=this.match(58);return this.next(),lh?nh!==null&&this.unexpected(nh):th.await=nh!==null,sc.type==="VariableDeclaration"&&sc.declarations[0].init!=null&&(!lh||!this.options.annexB||this.state.strict||sc.kind!=="var"||sc.declarations[0].id.type!=="Identifier")&&this.raise(eh.ForInOfLoopInitializer,sc,{type:lh?"ForInStatement":"ForOfStatement"}),sc.type==="AssignmentPattern"&&this.raise(eh.InvalidLhs,sc,{ancestor:{type:"ForStatement"}}),th.left=sc,th.right=lh?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),th.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(th,lh?"ForInStatement":"ForOfStatement")}parseVar(th,sc,nh,lh=!1){let mh=th.declarations=[];for(th.kind=nh;;){let Ah=this.startNode();if(this.parseVarId(Ah,nh),Ah.init=this.eat(29)?sc?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():null,Ah.init===null&&!lh&&(Ah.id.type!=="Identifier"&&!(sc&&(this.match(58)||this.isContextual(102)))?this.raise(eh.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:"destructuring"}):(nh==="const"||nh==="using"||nh==="await using")&&!(this.match(58)||this.isContextual(102))&&this.raise(eh.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:nh})),mh.push(this.finishNode(Ah,"VariableDeclarator")),!this.eat(12))break}return th}parseVarId(th,sc){let nh=this.parseBindingAtom();this.checkLVal(nh,{in:{type:"VariableDeclarator"},binding:sc==="var"?5:8201}),th.id=nh}parseAsyncFunctionExpression(th){return this.parseFunction(th,8)}parseFunction(th,sc=0){let nh=sc&2,lh=!!(sc&1),mh=lh&&!(sc&4),Ah=!!(sc&8);this.initFunction(th,Ah),this.match(55)&&(nh&&this.raise(eh.GeneratorInSingleStatementContext,this.state.startLoc),this.next(),th.generator=!0),lh&&(th.id=this.parseFunctionId(mh));let Eh=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter(2),this.prodParam.enter(Hd(Ah,th.generator)),lh||(th.id=this.parseFunctionId()),this.parseFunctionParams(th,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(th,lh?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),lh&&!nh&&this.registerFunctionStatementId(th),this.state.maybeInArrowParameters=Eh,th}parseFunctionId(th){return th||Qh(this.state.type)?this.parseIdentifier():null}parseFunctionParams(th,sc){this.expect(10),this.expressionScope.enter(gm()),th.params=this.parseBindingList(11,41,2|(sc?4:0)),this.expressionScope.exit()}registerFunctionStatementId(th){th.id&&this.scope.declareName(th.id.name,!this.options.annexB||this.state.strict||th.generator||th.async?this.scope.treatFunctionsAsVar?5:8201:17,th.id.loc.start)}parseClass(th,sc,nh){this.next();let lh=this.state.strict;return this.state.strict=!0,this.parseClassId(th,sc,nh),this.parseClassSuper(th),th.body=this.parseClassBody(!!th.superClass,lh),this.finishNode(th,sc?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}nameIsConstructor(th){return th.type==="Identifier"&&th.name==="constructor"||th.type==="StringLiteral"&&th.value==="constructor"}isNonstaticConstructor(th){return!th.computed&&!th.static&&this.nameIsConstructor(th.key)}parseClassBody(th,sc){this.classScope.enter();let nh={hadConstructor:!1,hadSuperClass:th},lh=[],mh=this.startNode();if(mh.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{for(;!this.match(8);){if(this.eat(13)){if(lh.length>0)throw this.raise(eh.DecoratorSemicolon,this.state.lastTokEndLoc);continue}if(this.match(26)){lh.push(this.parseDecorator());continue}let Ah=this.startNode();lh.length&&(Ah.decorators=lh,this.resetStartLocationFromNode(Ah,lh[0]),lh=[]),this.parseClassMember(mh,Ah,nh),Ah.kind==="constructor"&&Ah.decorators&&Ah.decorators.length>0&&this.raise(eh.DecoratorConstructor,Ah)}}),this.state.strict=sc,this.next(),lh.length)throw this.raise(eh.TrailingDecorator,this.state.startLoc);return this.classScope.exit(),this.finishNode(mh,"ClassBody")}parseClassMemberFromModifier(th,sc){let nh=this.parseIdentifier(!0);if(this.isClassMethod()){let lh=sc;return lh.kind="method",lh.computed=!1,lh.key=nh,lh.static=!1,this.pushClassMethod(th,lh,!1,!1,!1,!1),!0}else if(this.isClassProperty()){let lh=sc;return lh.computed=!1,lh.key=nh,lh.static=!1,th.body.push(this.parseClassProperty(lh)),!0}return this.resetPreviousNodeTrailingComments(nh),!1}parseClassMember(th,sc,nh){let lh=this.isContextual(106);if(lh){if(this.parseClassMemberFromModifier(th,sc))return;if(this.eat(5)){this.parseClassStaticBlock(th,sc);return}}this.parseClassMemberWithIsStatic(th,sc,nh,lh)}parseClassMemberWithIsStatic(th,sc,nh,lh){let mh=sc,Ah=sc,Eh=sc,Oh=sc,Ih=sc,Mh=mh,Yh=mh;if(sc.static=lh,this.parsePropertyNamePrefixOperator(sc),this.eat(55)){Mh.kind="method";let hd=this.match(138);if(this.parseClassElementName(Mh),hd){this.pushClassPrivateMethod(th,Ah,!0,!1);return}this.isNonstaticConstructor(mh)&&this.raise(eh.ConstructorIsGenerator,mh.key),this.pushClassMethod(th,mh,!0,!1,!1,!1);return}let Qp=!this.state.containsEsc&&Qh(this.state.type),td=this.parseClassElementName(sc),rd=Qp?td.name:null,cd=this.isPrivateName(td),gd=this.state.startLoc;if(this.parsePostMemberNameModifiers(Yh),this.isClassMethod()){if(Mh.kind="method",cd){this.pushClassPrivateMethod(th,Ah,!1,!1);return}let hd=this.isNonstaticConstructor(mh),dd=!1;hd&&(mh.kind="constructor",nh.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(eh.DuplicateConstructor,td),hd&&this.hasPlugin("typescript")&&sc.override&&this.raise(eh.OverrideOnConstructor,td),nh.hadConstructor=!0,dd=nh.hadSuperClass),this.pushClassMethod(th,mh,!1,!1,hd,dd)}else if(this.isClassProperty())cd?this.pushClassPrivateProperty(th,Oh):this.pushClassProperty(th,Eh);else if(rd==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(td);let hd=this.eat(55);Yh.optional&&this.unexpected(gd),Mh.kind="method";let dd=this.match(138);this.parseClassElementName(Mh),this.parsePostMemberNameModifiers(Yh),dd?this.pushClassPrivateMethod(th,Ah,hd,!0):(this.isNonstaticConstructor(mh)&&this.raise(eh.ConstructorIsAsync,mh.key),this.pushClassMethod(th,mh,hd,!0,!1,!1))}else if((rd==="get"||rd==="set")&&!(this.match(55)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(td),Mh.kind=rd;let hd=this.match(138);this.parseClassElementName(mh),hd?this.pushClassPrivateMethod(th,Ah,!1,!1):(this.isNonstaticConstructor(mh)&&this.raise(eh.ConstructorIsAccessor,mh.key),this.pushClassMethod(th,mh,!1,!1,!1,!1)),this.checkGetterSetterParams(mh)}else if(rd==="accessor"&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(td);let hd=this.match(138);this.parseClassElementName(Eh),this.pushClassAccessorProperty(th,Ih,hd)}else this.isLineTerminator()?cd?this.pushClassPrivateProperty(th,Oh):this.pushClassProperty(th,Eh):this.unexpected()}parseClassElementName(th){let{type:sc,value:nh}=this.state;if((sc===132||sc===133)&&th.static&&nh==="prototype"&&this.raise(eh.StaticPrototype,this.state.startLoc),sc===138){nh==="constructor"&&this.raise(eh.ConstructorClassPrivateField,this.state.startLoc);let lh=this.parsePrivateName();return th.key=lh,lh}return this.parsePropertyName(th),th.key}parseClassStaticBlock(th,sc){var nh;this.scope.enter(208);let lh=this.state.labels;this.state.labels=[],this.prodParam.enter(0);let mh=sc.body=[];this.parseBlockOrModuleBlockBody(mh,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=lh,th.body.push(this.finishNode(sc,"StaticBlock")),(nh=sc.decorators)!=null&&nh.length&&this.raise(eh.DecoratorStaticBlock,sc)}pushClassProperty(th,sc){!sc.computed&&this.nameIsConstructor(sc.key)&&this.raise(eh.ConstructorClassField,sc.key),th.body.push(this.parseClassProperty(sc))}pushClassPrivateProperty(th,sc){let nh=this.parseClassPrivateProperty(sc);th.body.push(nh),this.classScope.declarePrivateName(this.getPrivateNameSV(nh.key),0,nh.key.loc.start)}pushClassAccessorProperty(th,sc,nh){!nh&&!sc.computed&&this.nameIsConstructor(sc.key)&&this.raise(eh.ConstructorClassField,sc.key);let lh=this.parseClassAccessorProperty(sc);th.body.push(lh),nh&&this.classScope.declarePrivateName(this.getPrivateNameSV(lh.key),0,lh.key.loc.start)}pushClassMethod(th,sc,nh,lh,mh,Ah){th.body.push(this.parseMethod(sc,nh,lh,mh,Ah,"ClassMethod",!0))}pushClassPrivateMethod(th,sc,nh,lh){let mh=this.parseMethod(sc,nh,lh,!1,!1,"ClassPrivateMethod",!0);th.body.push(mh);let Ah=mh.kind==="get"?mh.static?6:2:mh.kind==="set"?mh.static?5:1:0;this.declareClassPrivateMethodInScope(mh,Ah)}declareClassPrivateMethodInScope(th,sc){this.classScope.declarePrivateName(this.getPrivateNameSV(th.key),sc,th.key.loc.start)}parsePostMemberNameModifiers(th){}parseClassPrivateProperty(th){return this.parseInitializer(th),this.semicolon(),this.finishNode(th,"ClassPrivateProperty")}parseClassProperty(th){return this.parseInitializer(th),this.semicolon(),this.finishNode(th,"ClassProperty")}parseClassAccessorProperty(th){return this.parseInitializer(th),this.semicolon(),this.finishNode(th,"ClassAccessorProperty")}parseInitializer(th){this.scope.enter(80),this.expressionScope.enter(Af()),this.prodParam.enter(0),th.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(th,sc,nh,lh=8331){if(Qh(this.state.type))th.id=this.parseIdentifier(),sc&&this.declareNameFromIdentifier(th.id,lh);else if(nh||!sc)th.id=null;else throw this.raise(eh.MissingClassName,this.state.startLoc)}parseClassSuper(th){th.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(th,sc){let nh=this.parseMaybeImportPhase(th,!0),lh=this.maybeParseExportDefaultSpecifier(th,nh),mh=!lh||this.eat(12),Ah=mh&&this.eatExportStar(th),Eh=Ah&&this.maybeParseExportNamespaceSpecifier(th),Oh=mh&&(!Eh||this.eat(12)),Ih=lh||Ah;if(Ah&&!Eh){if(lh&&this.unexpected(),sc)throw this.raise(eh.UnsupportedDecoratorExport,th);return this.parseExportFrom(th,!0),this.finishNode(th,"ExportAllDeclaration")}let Mh=this.maybeParseExportNamedSpecifiers(th);lh&&mh&&!Ah&&!Mh&&this.unexpected(null,5),Eh&&Oh&&this.unexpected(null,98);let Yh;if(Ih||Mh){if(Yh=!1,sc)throw this.raise(eh.UnsupportedDecoratorExport,th);this.parseExportFrom(th,Ih)}else Yh=this.maybeParseExportDeclaration(th);if(Ih||Mh||Yh){var Qp;let td=th;if(this.checkExport(td,!0,!1,!!td.source),((Qp=td.declaration)==null?void 0:Qp.type)==="ClassDeclaration")this.maybeTakeDecorators(sc,td.declaration,td);else if(sc)throw this.raise(eh.UnsupportedDecoratorExport,th);return this.finishNode(td,"ExportNamedDeclaration")}if(this.eat(65)){let td=th,rd=this.parseExportDefaultExpression();if(td.declaration=rd,rd.type==="ClassDeclaration")this.maybeTakeDecorators(sc,rd,td);else if(sc)throw this.raise(eh.UnsupportedDecoratorExport,th);return this.checkExport(td,!0,!0),this.finishNode(td,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(th){return this.eat(55)}maybeParseExportDefaultSpecifier(th,sc){if(sc||this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom",sc==null?void 0:sc.loc.start);let nh=sc||this.parseIdentifier(!0),lh=this.startNodeAtNode(nh);return lh.exported=nh,th.specifiers=[this.finishNode(lh,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(th){if(this.isContextual(93)){var sc;(sc=th).specifiers!=null||(sc.specifiers=[]);let nh=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),nh.exported=this.parseModuleExportName(),th.specifiers.push(this.finishNode(nh,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(th){if(this.match(5)){let sc=th;sc.specifiers||(sc.specifiers=[]);let nh=sc.exportKind==="type";return sc.specifiers.push(...this.parseExportSpecifiers(nh)),sc.source=null,sc.declaration=null,this.hasPlugin("importAssertions")&&(sc.assertions=[]),!0}return!1}maybeParseExportDeclaration(th){return this.shouldParseExportDeclaration()?(th.specifiers=[],th.source=null,this.hasPlugin("importAssertions")&&(th.assertions=[]),th.declaration=this.parseExportDeclaration(th),!0):!1}isAsyncFunction(){if(!this.isContextual(95))return!1;let th=this.nextTokenInLineStart();return this.isUnparsedContextual(th,"function")}parseExportDefaultExpression(){let th=this.startNode();if(this.match(68))return this.next(),this.parseFunction(th,5);if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(th,13);if(this.match(80))return this.parseClass(th,!0,!0);if(this.match(26))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(eh.DecoratorBeforeExport,this.state.startLoc),this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0);if(this.match(75)||this.match(74)||this.isLet())throw this.raise(eh.UnsupportedDefaultExport,this.state.startLoc);let sc=this.parseMaybeAssignAllowIn();return this.semicolon(),sc}parseExportDeclaration(th){return this.match(80)?this.parseClass(this.startNode(),!0,!1):this.parseStatementListItem()}isExportDefaultSpecifier(){let{type:th}=this.state;if(Qh(th)){if(th===95&&!this.state.containsEsc||th===100)return!1;if((th===130||th===129)&&!this.state.containsEsc){let{type:lh}=this.lookahead();if(Qh(lh)&&lh!==98||lh===5)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;let sc=this.nextTokenStart(),nh=this.isUnparsedContextual(sc,"from");if(this.input.charCodeAt(sc)===44||Qh(this.state.type)&&nh)return!0;if(this.match(65)&&nh){let lh=this.input.charCodeAt(this.nextTokenStartSince(sc+4));return lh===34||lh===39}return!1}parseExportFrom(th,sc){this.eatContextual(98)?(th.source=this.parseImportSource(),this.checkExport(th),this.maybeParseImportAttributes(th),this.checkJSONModuleImport(th)):sc&&this.unexpected(),this.semicolon()}shouldParseExportDeclaration(){let{type:th}=this.state;return th===26&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))?(this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(eh.DecoratorBeforeExport,this.state.startLoc),!0):this.isContextual(107)?(this.raise(eh.UsingDeclarationExport,this.state.startLoc),!0):this.isContextual(96)&&this.startsAwaitUsing()?(this.raise(eh.UsingDeclarationExport,this.state.startLoc),!0):th===74||th===75||th===68||th===80||this.isLet()||this.isAsyncFunction()}checkExport(th,sc,nh,lh){if(sc){var mh;if(nh){if(this.checkDuplicateExports(th,"default"),this.hasPlugin("exportDefaultFrom")){var Ah;let Eh=th.declaration;Eh.type==="Identifier"&&Eh.name==="from"&&Eh.end-Eh.start===4&&!((Ah=Eh.extra)!=null&&Ah.parenthesized)&&this.raise(eh.ExportDefaultFromAsIdentifier,Eh)}}else if((mh=th.specifiers)!=null&&mh.length)for(let Eh of th.specifiers){let{exported:Oh}=Eh,Ih=Oh.type==="Identifier"?Oh.name:Oh.value;if(this.checkDuplicateExports(Eh,Ih),!lh&&Eh.local){let{local:Mh}=Eh;Mh.type!=="Identifier"?this.raise(eh.ExportBindingIsString,Eh,{localName:Mh.value,exportName:Ih}):(this.checkReservedWord(Mh.name,Mh.loc.start,!0,!1),this.scope.checkLocalExport(Mh))}}else if(th.declaration){let Eh=th.declaration;if(Eh.type==="FunctionDeclaration"||Eh.type==="ClassDeclaration"){let{id:Oh}=Eh;if(!Oh)throw new Error("Assertion failure");this.checkDuplicateExports(th,Oh.name)}else if(Eh.type==="VariableDeclaration")for(let Oh of Eh.declarations)this.checkDeclaration(Oh.id)}}}checkDeclaration(th){if(th.type==="Identifier")this.checkDuplicateExports(th,th.name);else if(th.type==="ObjectPattern")for(let sc of th.properties)this.checkDeclaration(sc);else if(th.type==="ArrayPattern")for(let sc of th.elements)sc&&this.checkDeclaration(sc);else th.type==="ObjectProperty"?this.checkDeclaration(th.value):th.type==="RestElement"?this.checkDeclaration(th.argument):th.type==="AssignmentPattern"&&this.checkDeclaration(th.left)}checkDuplicateExports(th,sc){this.exportedIdentifiers.has(sc)&&(sc==="default"?this.raise(eh.DuplicateDefaultExport,th):this.raise(eh.DuplicateExport,th,{exportName:sc})),this.exportedIdentifiers.add(sc)}parseExportSpecifiers(th){let sc=[],nh=!0;for(this.expect(5);!this.eat(8);){if(nh)nh=!1;else if(this.expect(12),this.eat(8))break;let lh=this.isContextual(130),mh=this.match(133),Ah=this.startNode();Ah.local=this.parseModuleExportName(),sc.push(this.parseExportSpecifier(Ah,mh,th,lh))}return sc}parseExportSpecifier(th,sc,nh,lh){return this.eatContextual(93)?th.exported=this.parseModuleExportName():sc?th.exported=_m(th.local):th.exported||(th.exported=Sd(th.local)),this.finishNode(th,"ExportSpecifier")}parseModuleExportName(){if(this.match(133)){let th=this.parseStringLiteral(this.state.value),sc=th.value.match(Zm);return sc&&this.raise(eh.ModuleExportNameHasLoneSurrogate,th,{surrogateCharCode:sc[0].charCodeAt(0)}),th}return this.parseIdentifier(!0)}isJSONModuleImport(th){return th.assertions!=null?th.assertions.some(({key:sc,value:nh})=>nh.value==="json"&&(sc.type==="Identifier"?sc.name==="type":sc.value==="type")):!1}checkImportReflection(th){let{specifiers:sc}=th,nh=sc.length===1?sc[0].type:null;if(th.phase==="source")nh!=="ImportDefaultSpecifier"&&this.raise(eh.SourcePhaseImportRequiresDefault,sc[0].loc.start);else if(th.phase==="defer")nh!=="ImportNamespaceSpecifier"&&this.raise(eh.DeferImportRequiresNamespace,sc[0].loc.start);else if(th.module){var lh;nh!=="ImportDefaultSpecifier"&&this.raise(eh.ImportReflectionNotBinding,sc[0].loc.start),((lh=th.assertions)==null?void 0:lh.length)>0&&this.raise(eh.ImportReflectionHasAssertion,sc[0].loc.start)}}checkJSONModuleImport(th){if(this.isJSONModuleImport(th)&&th.type!=="ExportAllDeclaration"){let{specifiers:sc}=th;if(sc!=null){let nh=sc.find(lh=>{let mh;if(lh.type==="ExportSpecifier"?mh=lh.local:lh.type==="ImportSpecifier"&&(mh=lh.imported),mh!==void 0)return mh.type==="Identifier"?mh.name!=="default":mh.value!=="default"});nh!==void 0&&this.raise(eh.ImportJSONBindingNotDefault,nh.loc.start)}}}isPotentialImportPhase(th){return th?!1:this.isContextual(105)||this.isContextual(97)||this.isContextual(127)}applyImportPhase(th,sc,nh,lh){sc||(nh==="module"?(this.expectPlugin("importReflection",lh),th.module=!0):this.hasPlugin("importReflection")&&(th.module=!1),nh==="source"?(this.expectPlugin("sourcePhaseImports",lh),th.phase="source"):nh==="defer"?(this.expectPlugin("deferredImportEvaluation",lh),th.phase="defer"):this.hasPlugin("sourcePhaseImports")&&(th.phase=null))}parseMaybeImportPhase(th,sc){if(!this.isPotentialImportPhase(sc))return this.applyImportPhase(th,sc,null),null;let nh=this.parseIdentifier(!0),{type:lh}=this.state;return(Hh(lh)?lh!==98||this.lookaheadCharCode()===102:lh!==12)?(this.resetPreviousIdentifierLeadingComments(nh),this.applyImportPhase(th,sc,nh.name,nh.loc.start),null):(this.applyImportPhase(th,sc,null),nh)}isPrecedingIdImportPhase(th){let{type:sc}=this.state;return Qh(sc)?sc!==98||this.lookaheadCharCode()===102:sc!==12}parseImport(th){return this.match(133)?this.parseImportSourceAndAttributes(th):this.parseImportSpecifiersAndAfter(th,this.parseMaybeImportPhase(th,!1))}parseImportSpecifiersAndAfter(th,sc){th.specifiers=[];let nh=!this.maybeParseDefaultImportSpecifier(th,sc)||this.eat(12),lh=nh&&this.maybeParseStarImportSpecifier(th);return nh&&!lh&&this.parseNamedImportSpecifiers(th),this.expectContextual(98),this.parseImportSourceAndAttributes(th)}parseImportSourceAndAttributes(th){return th.specifiers!=null||(th.specifiers=[]),th.source=this.parseImportSource(),this.maybeParseImportAttributes(th),this.checkImportReflection(th),this.checkJSONModuleImport(th),this.semicolon(),this.finishNode(th,"ImportDeclaration")}parseImportSource(){return this.match(133)||this.unexpected(),this.parseExprAtom()}parseImportSpecifierLocal(th,sc,nh){sc.local=this.parseIdentifier(),th.specifiers.push(this.finishImportSpecifier(sc,nh))}finishImportSpecifier(th,sc,nh=8201){return this.checkLVal(th.local,{in:{type:sc},binding:nh}),this.finishNode(th,sc)}parseImportAttributes(){this.expect(5);let th=[],sc=new Set;do{if(this.match(8))break;let nh=this.startNode(),lh=this.state.value;if(sc.has(lh)&&this.raise(eh.ModuleAttributesWithDuplicateKeys,this.state.startLoc,{key:lh}),sc.add(lh),this.match(133)?nh.key=this.parseStringLiteral(lh):nh.key=this.parseIdentifier(!0),this.expect(14),!this.match(133))throw this.raise(eh.ModuleAttributeInvalidValue,this.state.startLoc);nh.value=this.parseStringLiteral(this.state.value),th.push(this.finishNode(nh,"ImportAttribute"))}while(this.eat(12));return this.expect(8),th}parseModuleAttributes(){let th=[],sc=new Set;do{let nh=this.startNode();if(nh.key=this.parseIdentifier(!0),nh.key.name!=="type"&&this.raise(eh.ModuleAttributeDifferentFromType,nh.key),sc.has(nh.key.name)&&this.raise(eh.ModuleAttributesWithDuplicateKeys,nh.key,{key:nh.key.name}),sc.add(nh.key.name),this.expect(14),!this.match(133))throw this.raise(eh.ModuleAttributeInvalidValue,this.state.startLoc);nh.value=this.parseStringLiteral(this.state.value),th.push(this.finishNode(nh,"ImportAttribute"))}while(this.eat(12));return th}maybeParseImportAttributes(th){let sc,nh=!1;if(this.match(76)){if(this.hasPrecedingLineBreak()&&this.lookaheadCharCode()===40)return;this.next(),this.hasPlugin("moduleAttributes")?sc=this.parseModuleAttributes():(this.expectImportAttributesPlugin(),sc=this.parseImportAttributes()),nh=!0}else if(this.isContextual(94)&&!this.hasPrecedingLineBreak())this.hasPlugin("importAttributes")?(this.getPluginOption("importAttributes","deprecatedAssertSyntax")!==!0&&this.raise(eh.ImportAttributesUseAssert,this.state.startLoc),this.addExtra(th,"deprecatedAssertSyntax",!0)):this.expectOnePlugin(["importAttributes","importAssertions"]),this.next(),sc=this.parseImportAttributes();else if(this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions"))sc=[];else if(this.hasPlugin("moduleAttributes"))sc=[];else return;!nh&&this.hasPlugin("importAssertions")?th.assertions=sc:th.attributes=sc}maybeParseDefaultImportSpecifier(th,sc){if(sc){let nh=this.startNodeAtNode(sc);return nh.local=sc,th.specifiers.push(this.finishImportSpecifier(nh,"ImportDefaultSpecifier")),!0}else if(Hh(this.state.type))return this.parseImportSpecifierLocal(th,this.startNode(),"ImportDefaultSpecifier"),!0;return!1}maybeParseStarImportSpecifier(th){if(this.match(55)){let sc=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(th,sc,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(th){let sc=!0;for(this.expect(5);!this.eat(8);){if(sc)sc=!1;else{if(this.eat(14))throw this.raise(eh.DestructureNamedImport,this.state.startLoc);if(this.expect(12),this.eat(8))break}let nh=this.startNode(),lh=this.match(133),mh=this.isContextual(130);nh.imported=this.parseModuleExportName();let Ah=this.parseImportSpecifier(nh,lh,th.importKind==="type"||th.importKind==="typeof",mh,void 0);th.specifiers.push(Ah)}}parseImportSpecifier(th,sc,nh,lh,mh){if(this.eatContextual(93))th.local=this.parseIdentifier();else{let{imported:Ah}=th;if(sc)throw this.raise(eh.ImportBindingIsString,th,{importName:Ah.value});this.checkReservedWord(Ah.name,th.loc.start,!0,!0),th.local||(th.local=Sd(Ah))}return this.finishImportSpecifier(th,"ImportSpecifier",mh)}isThisParam(th){return th.type==="Identifier"&&th.name==="this"}},Pf=class extends Km{constructor(th,sc){th=Ym(th),super(th,sc),this.options=th,this.initializeScopes(),this.plugins=Jm(this.options.plugins),this.filename=th.sourceFilename}getScopeHandler(){return qd}parse(){this.enterInitialScopes();let th=this.startNode(),sc=this.startNode();return this.nextToken(),th.errors=null,this.parseTopLevel(th,sc),th.errors=this.state.errors,th.comments.length=this.state.commentsLen,th}};function Jm(th){let sc=new Map;for(let nh of th){let[lh,mh]=Array.isArray(nh)?nh:[nh,{}];sc.has(lh)||sc.set(lh,mh||{})}return sc}function eg(th,sc){var nh;if(((nh=sc)==null?void 0:nh.sourceType)==="unambiguous"){sc=Object.assign({},sc);try{sc.sourceType="module";let lh=kd(sc,th),mh=lh.parse();if(lh.sawUnambiguousESM)return mh;if(lh.ambiguousScriptDifferentAst)try{return sc.sourceType="script",kd(sc,th).parse()}catch{}else mh.program.sourceType="script";return mh}catch(lh){try{return sc.sourceType="script",kd(sc,th).parse()}catch{}throw lh}}else return kd(sc,th).parse()}function tg(th,sc){let nh=kd(sc,th);return nh.options.strictMode&&(nh.state.strict=!0),nh.getExpression()}function rg(th){let sc={};for(let nh of Object.keys(th))sc[nh]=ld(th[nh]);return sc}var ng=rg(Wh);function kd(th,sc){let nh=Pf;return th!=null&&th.plugins&&(Hm(th.plugins),nh=ag(th.plugins)),new nh(th,sc)}var $f={};function ag(th){let sc=Wm.filter(mh=>fd(th,mh)),nh=sc.join("/"),lh=$f[nh];if(!lh){lh=Pf;for(let mh of sc)lh=Of[mh](lh);$f[nh]=lh}return lh}n.parse=eg,n.parseExpression=tg,n.tokTypes=ng}),Ls$1=Dt$1(n=>{Object.defineProperty(n,"__esModule",{value:!0}),n.extract=ja,n.parse=ec,n.parseWithComments=tc,n.print=rc,n.strip=Ja;var r=/\*\/$/,a=/^\/\*\*?/,s=/^\s*(\/\*\*?(.|\r?\n)*?\*\/)/,o=/(^|\s+)\/\/([^\r\n]*)/g,u=/^(\r?\n)+/,c=/(?:^|\r?\n) *(@[^\r\n]*?) *\r?\n *(?![^@\r\n]*\/\/[^]*)([^@\r\n\s][^@\r\n]+?) *\r?\n/g,p=/(?:^|\r?\n) *@(\S+) *([^\r\n]*)/g,d=/(\r?\n|^) *\* ?/g,_=[];function ja(ic){let uc=ic.match(s);return uc?uc[0].trimLeft():""}function Ja(ic){let uc=ic.match(s);return uc&&uc[0]?ic.substring(uc[0].length):ic}function ec(ic){return tc(ic).pragmas}function tc(ic){let uc=`
`;ic=ic.replace(a,"").replace(r,"").replace(d,"$1");let eh="";for(;eh!==ic;)eh=ic,ic=ic.replace(c,`${uc}$1 $2${uc}`);ic=ic.replace(u,"").trimRight();let rh=Object.create(null),ah=ic.replace(p,"").replace(u,"").trimRight(),ih;for(;ih=p.exec(ic);){let oh=ih[2].replace(o,"");typeof rh[ih[1]]=="string"||Array.isArray(rh[ih[1]])?rh[ih[1]]=_.concat(rh[ih[1]],oh):rh[ih[1]]=oh}return{comments:ah,pragmas:rh}}function rc({comments:ic="",pragmas:uc={}}){let eh=`
`,rh="/**",ah=" *",ih=" */",oh=Object.keys(uc),uh=oh.flatMap(hh=>nc(hh,uc[hh])).map(hh=>`${ah} ${hh}${eh}`).join("");if(!ic){if(oh.length===0)return"";if(oh.length===1&&!Array.isArray(uc[oh[0]])){let hh=uc[oh[0]];return`${rh} ${nc(oh[0],hh)[0]}${ih}`}}let ch=ic.split(eh).map(hh=>`${ah} ${hh}`).join(eh)+eh;return rh+eh+(ic?ch:"")+(ic&&oh.length?ah+eh:"")+uh+ih}function nc(ic,uc){return _.concat(uc).map(eh=>`@${ic} ${eh}`.trim())}}),Lt$1={};Ys$1(Lt$1,{parsers:()=>ia$1});var je$1=qe(wt());function Oe$1(n){return(r,a,s)=>{let o=!!(s!=null&&s.backwards);if(a===!1)return!1;let{length:u}=r,c=a;for(;c>=0&&c<u;){let p=r.charAt(c);if(n instanceof RegExp){if(!n.test(p))return c}else if(!n.includes(p))return c;o?c--:c++}return c===-1||c===u?c:!1}}var ps$1=Oe$1(" 	"),us$1=Oe$1(/[^\n\r]/);function Pr$1(n,r){if(r===!1)return!1;if(n.charAt(r)==="/"&&n.charAt(r+1)==="*"){for(let a=r+2;a<n.length;++a)if(n.charAt(a)==="*"&&n.charAt(a+1)==="/")return a+2}return r}var fs$1=Pr$1;function gr$1(n,r,a){let s=!!(a!=null&&a.backwards);if(r===!1)return!1;let o=n.charAt(r);if(s){if(n.charAt(r-1)==="\r"&&o===`
`)return r-2;if(o===`
`||o==="\r"||o==="\u2028"||o==="\u2029")return r-1}else{if(o==="\r"&&n.charAt(r+1)===`
`)return r+2;if(o===`
`||o==="\r"||o==="\u2028"||o==="\u2029")return r+1}return r}var ds$1=gr$1;function Tr$1(n,r){return r===!1?!1:n.charAt(r)==="/"&&n.charAt(r+1)==="/"?us$1(n,r):r}var ms$1=Tr$1;function br$1(n,r){let a=null,s=r;for(;s!==a;)a=s,s=ps$1(n,s),s=fs$1(n,s),s=ms$1(n,s),s=ds$1(n,s);return s}var ys$1=br$1;function Ar(n){let r=[];for(let a of n)try{return a()}catch(s){r.push(s)}throw Object.assign(new Error("All combinations failed"),{errors:r})}var xs$1=Ar;function Sr$1(n){if(!n.startsWith("#!"))return"";let r=n.indexOf(`
`);return r===-1?n:n.slice(0,r)}var Fe=Sr$1,wr$1=(n,r,a)=>{if(!(n&&r==null))return Array.isArray(r)||typeof r=="string"?r[a<0?r.length+a:a]:r.at(a)},Ct$1=wr$1;function Cr$1(n){return Array.isArray(n)&&n.length>0}var ge$1=Cr$1;function D(n){var r,a,s;let o=((r=n.range)==null?void 0:r[0])??n.start,u=(s=((a=n.declaration)==null?void 0:a.decorators)??n.decorators)==null?void 0:s[0];return u?Math.min(D(u),o):o}function B(n){var r;return((r=n.range)==null?void 0:r[1])??n.end}function Er$1(n){let r=new Set(n);return a=>r.has(a==null?void 0:a.type)}var Ps$1=Er$1,Ir$1=Ps$1(["Block","CommentBlock","MultiLine"]),Te$1=Ir$1;function Nr$1(n){let r=`*${n.value}*`.split(`
`);return r.length>1&&r.every(a=>a.trimStart()[0]==="*")}var Et$1=Nr$1;function kr$1(n){return Te$1(n)&&n.value[0]==="*"&&/@(?:type|satisfies)\b/.test(n.value)}var gs$1=kr$1,be$1=null;function Ae$1(n){if(be$1!==null&&typeof be$1.property){let r=be$1;return be$1=Ae$1.prototype=null,r}return be$1=Ae$1.prototype=n??Object.create(null),new Ae$1}var vr$1=10;for(let n=0;n<=vr$1;n++)Ae$1();function It$1(n){return Ae$1(n)}function Lr$1(n,r="type"){It$1(n);function a(s){let o=s[r],u=n[o];if(!Array.isArray(u))throw Object.assign(new Error(`Missing visitor keys for '${o}'.`),{node:s});return u}return a}var Ts$1=Lr$1,bs$1={ArrayExpression:["elements"],AssignmentExpression:["left","right"],BinaryExpression:["left","right"],InterpreterDirective:[],Directive:["value"],DirectiveLiteral:[],BlockStatement:["directives","body"],BreakStatement:["label"],CallExpression:["callee","arguments","typeParameters","typeArguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["test","body"],EmptyStatement:[],ExpressionStatement:["expression"],File:["program"],ForInStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body","returnType","typeParameters","predicate"],FunctionExpression:["id","params","body","returnType","typeParameters"],Identifier:["typeAnnotation","decorators"],IfStatement:["test","consequent","alternate"],LabeledStatement:["label","body"],StringLiteral:[],NumericLiteral:[],NullLiteral:[],BooleanLiteral:[],RegExpLiteral:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments","typeParameters","typeArguments"],Program:["directives","body"],ObjectExpression:["properties"],ObjectMethod:["key","params","body","decorators","returnType","typeParameters"],ObjectProperty:["key","value","decorators"],RestElement:["argument","typeAnnotation","decorators"],ReturnStatement:["argument"],SequenceExpression:["expressions"],ParenthesizedExpression:["expression"],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],AssignmentPattern:["left","right","decorators","typeAnnotation"],ArrayPattern:["elements","typeAnnotation","decorators"],ArrowFunctionExpression:["params","body","returnType","typeParameters","predicate"],ClassBody:["body"],ClassExpression:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators","superTypeArguments"],ClassDeclaration:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators","superTypeArguments"],ExportAllDeclaration:["source","attributes","exported"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source","attributes"],ExportSpecifier:["local","exported"],ForOfStatement:["left","right","body"],ImportDeclaration:["specifiers","source","attributes"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["local","imported"],ImportExpression:["source","options","attributes"],MetaProperty:["meta","property"],ClassMethod:["key","params","body","decorators","returnType","typeParameters"],ObjectPattern:["properties","typeAnnotation","decorators"],SpreadElement:["argument"],Super:[],TaggedTemplateExpression:["tag","quasi","typeParameters","typeArguments"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],YieldExpression:["argument"],AwaitExpression:["argument"],Import:[],BigIntLiteral:[],ExportNamespaceSpecifier:["exported"],OptionalMemberExpression:["object","property"],OptionalCallExpression:["callee","arguments","typeParameters","typeArguments"],ClassProperty:["key","value","typeAnnotation","decorators","variance"],ClassAccessorProperty:["key","value","typeAnnotation","decorators"],ClassPrivateProperty:["key","value","decorators","typeAnnotation","variance"],ClassPrivateMethod:["key","params","body","decorators","returnType","typeParameters"],PrivateName:["id"],StaticBlock:["body"],AnyTypeAnnotation:[],ArrayTypeAnnotation:["elementType"],BooleanTypeAnnotation:[],BooleanLiteralTypeAnnotation:[],NullLiteralTypeAnnotation:[],ClassImplements:["id","typeParameters"],DeclareClass:["id","typeParameters","extends","mixins","implements","body"],DeclareFunction:["id","predicate"],DeclareInterface:["id","typeParameters","extends","body"],DeclareModule:["id","body"],DeclareModuleExports:["typeAnnotation"],DeclareTypeAlias:["id","typeParameters","right"],DeclareOpaqueType:["id","typeParameters","supertype"],DeclareVariable:["id"],DeclareExportDeclaration:["declaration","specifiers","source"],DeclareExportAllDeclaration:["source"],DeclaredPredicate:["value"],ExistsTypeAnnotation:[],FunctionTypeAnnotation:["typeParameters","params","rest","returnType","this"],FunctionTypeParam:["name","typeAnnotation"],GenericTypeAnnotation:["id","typeParameters"],InferredPredicate:[],InterfaceExtends:["id","typeParameters"],InterfaceDeclaration:["id","typeParameters","extends","body"],InterfaceTypeAnnotation:["extends","body"],IntersectionTypeAnnotation:["types"],MixedTypeAnnotation:[],EmptyTypeAnnotation:[],NullableTypeAnnotation:["typeAnnotation"],NumberLiteralTypeAnnotation:[],NumberTypeAnnotation:[],ObjectTypeAnnotation:["properties","indexers","callProperties","internalSlots"],ObjectTypeInternalSlot:["id","value","optional","static","method"],ObjectTypeCallProperty:["value"],ObjectTypeIndexer:["id","key","value","variance"],ObjectTypeProperty:["key","value","variance"],ObjectTypeSpreadProperty:["argument"],OpaqueType:["id","typeParameters","supertype","impltype"],QualifiedTypeIdentifier:["id","qualification"],StringLiteralTypeAnnotation:[],StringTypeAnnotation:[],SymbolTypeAnnotation:[],ThisTypeAnnotation:[],TupleTypeAnnotation:["types","elementTypes"],TypeofTypeAnnotation:["argument","typeArguments"],TypeAlias:["id","typeParameters","right"],TypeAnnotation:["typeAnnotation"],TypeCastExpression:["expression","typeAnnotation"],TypeParameter:["bound","default","variance"],TypeParameterDeclaration:["params"],TypeParameterInstantiation:["params"],UnionTypeAnnotation:["types"],Variance:[],VoidTypeAnnotation:[],EnumDeclaration:["id","body"],EnumBooleanBody:["members"],EnumNumberBody:["members"],EnumStringBody:["members"],EnumSymbolBody:["members"],EnumBooleanMember:["id","init"],EnumNumberMember:["id","init"],EnumStringMember:["id","init"],EnumDefaultedMember:["id"],IndexedAccessType:["objectType","indexType"],OptionalIndexedAccessType:["objectType","indexType"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXSpreadChild:["expression"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes","typeArguments","typeParameters"],JSXSpreadAttribute:["argument"],JSXText:[],JSXFragment:["openingFragment","children","closingFragment"],JSXOpeningFragment:[],JSXClosingFragment:[],Noop:[],Placeholder:[],V8IntrinsicIdentifier:[],ArgumentPlaceholder:[],BindExpression:["object","callee"],ImportAttribute:["key","value"],Decorator:["expression"],DoExpression:["body"],ExportDefaultSpecifier:["exported"],RecordExpression:["properties"],TupleExpression:["elements"],DecimalLiteral:[],ModuleExpression:["body"],TopicReference:[],PipelineTopicExpression:["expression"],PipelineBareFunction:["callee"],PipelinePrimaryTopicReference:[],TSParameterProperty:["parameter","decorators"],TSDeclareFunction:["id","typeParameters","params","returnType","body"],TSDeclareMethod:["decorators","key","typeParameters","params","returnType"],TSQualifiedName:["left","right"],TSCallSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSPropertySignature:["key","typeAnnotation"],TSMethodSignature:["key","typeParameters","parameters","typeAnnotation","params","returnType"],TSIndexSignature:["parameters","typeAnnotation"],TSAnyKeyword:[],TSBooleanKeyword:[],TSBigIntKeyword:[],TSIntrinsicKeyword:[],TSNeverKeyword:[],TSNullKeyword:[],TSNumberKeyword:[],TSObjectKeyword:[],TSStringKeyword:[],TSSymbolKeyword:[],TSUndefinedKeyword:[],TSUnknownKeyword:[],TSVoidKeyword:[],TSThisType:[],TSFunctionType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructorType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSTypeReference:["typeName","typeParameters","typeArguments"],TSTypePredicate:["parameterName","typeAnnotation"],TSTypeQuery:["exprName","typeParameters","typeArguments"],TSTypeLiteral:["members"],TSArrayType:["elementType"],TSTupleType:["elementTypes"],TSOptionalType:["typeAnnotation"],TSRestType:["typeAnnotation"],TSNamedTupleMember:["label","elementType"],TSUnionType:["types"],TSIntersectionType:["types"],TSConditionalType:["checkType","extendsType","trueType","falseType"],TSInferType:["typeParameter"],TSParenthesizedType:["typeAnnotation"],TSTypeOperator:["typeAnnotation"],TSIndexedAccessType:["objectType","indexType"],TSMappedType:["typeParameter","typeAnnotation","nameType"],TSLiteralType:["literal"],TSExpressionWithTypeArguments:["expression","typeParameters"],TSInterfaceDeclaration:["id","typeParameters","extends","body"],TSInterfaceBody:["body"],TSTypeAliasDeclaration:["id","typeParameters","typeAnnotation"],TSInstantiationExpression:["expression","typeParameters","typeArguments"],TSAsExpression:["expression","typeAnnotation"],TSSatisfiesExpression:["expression","typeAnnotation"],TSTypeAssertion:["typeAnnotation","expression"],TSEnumDeclaration:["id","members"],TSEnumMember:["id","initializer"],TSModuleDeclaration:["id","body"],TSModuleBlock:["body"],TSImportType:["argument","qualifier","typeParameters","typeArguments"],TSImportEqualsDeclaration:["id","moduleReference"],TSExternalModuleReference:["expression"],TSNonNullExpression:["expression"],TSExportAssignment:["expression"],TSNamespaceExportDeclaration:["id"],TSTypeAnnotation:["typeAnnotation"],TSTypeParameterInstantiation:["params"],TSTypeParameterDeclaration:["params"],TSTypeParameter:["constraint","default","name"],ChainExpression:["expression"],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],Literal:[],MethodDefinition:["decorators","key","value"],PrivateIdentifier:[],Property:["key","value"],PropertyDefinition:["decorators","key","typeAnnotation","value","variance"],AccessorProperty:["decorators","key","typeAnnotation","value"],TSAbstractAccessorProperty:["decorators","key","typeAnnotation"],TSAbstractKeyword:[],TSAbstractMethodDefinition:["key","value"],TSAbstractPropertyDefinition:["decorators","key","typeAnnotation"],TSAsyncKeyword:[],TSClassImplements:["expression","typeArguments","typeParameters"],TSDeclareKeyword:[],TSEmptyBodyFunctionExpression:["id","typeParameters","params","returnType"],TSExportKeyword:[],TSInterfaceHeritage:["expression","typeArguments","typeParameters"],TSPrivateKeyword:[],TSProtectedKeyword:[],TSPublicKeyword:[],TSReadonlyKeyword:[],TSStaticKeyword:[],TSTemplateLiteralType:["quasis","types"],AsConstExpression:["expression"],AsExpression:["expression","typeAnnotation"],BigIntLiteralTypeAnnotation:[],BigIntTypeAnnotation:[],ComponentDeclaration:["id","params","body","typeParameters","rendersType"],ComponentParameter:["name","local"],ComponentTypeAnnotation:["params","rest","typeParameters","rendersType"],ComponentTypeParameter:["name","typeAnnotation"],ConditionalTypeAnnotation:["checkType","extendsType","trueType","falseType"],DeclareComponent:["id","params","rest","typeParameters","rendersType"],DeclareEnum:["id","body"],DeclareHook:["id"],DeclareNamespace:["id","body"],EnumBigIntBody:["members"],EnumBigIntMember:["id","init"],HookDeclaration:["id","params","body","typeParameters","returnType"],HookTypeAnnotation:["params","returnType","rest","typeParameters"],InferTypeAnnotation:["typeParameter"],KeyofTypeAnnotation:["argument"],ObjectTypeMappedTypeProperty:["keyTparam","propType","sourceType","variance"],QualifiedTypeofIdentifier:["qualification","id"],TupleTypeLabeledElement:["label","elementType","variance"],TupleTypeSpreadElement:["label","typeAnnotation"],TypeOperator:["typeAnnotation"],TypePredicate:["parameterName","typeAnnotation","asserts"],NGRoot:["node"],NGPipeExpression:["left","right","arguments"],NGChainedExpression:["expressions"],NGEmptyExpression:[],NGMicrosyntax:["body"],NGMicrosyntaxKey:[],NGMicrosyntaxExpression:["expression","alias"],NGMicrosyntaxKeyedExpression:["key","expression"],NGMicrosyntaxLet:["key","value"],NGMicrosyntaxAs:["key","alias"],JsExpressionRoot:["node"],JsonRoot:["node"],TSJSDocAllType:[],TSJSDocUnknownType:[],TSJSDocNullableType:["typeAnnotation"],TSJSDocNonNullableType:["typeAnnotation"],NeverTypeAnnotation:[],UndefinedTypeAnnotation:[],UnknownTypeAnnotation:[],SatisfiesExpression:["expression","typeAnnotation"]},Dr$1=Ts$1(bs$1),As$1=Dr$1;function Nt$1(n,r){if(!(n!==null&&typeof n=="object"))return n;if(Array.isArray(n)){for(let s=0;s<n.length;s++)n[s]=Nt$1(n[s],r);return n}let a=As$1(n);for(let s=0;s<a.length;s++)n[a[s]]=Nt$1(n[a[s]],r);return r(n)||n}var Be$1=Nt$1;function Mr$1(n,r){let{parser:a,text:s}=r;if(n.type==="File"&&n.program.interpreter){let{program:{interpreter:o},comments:u}=n;delete n.program.interpreter,u.unshift(o)}if(a==="babel"){let o=new Set;n=Be$1(n,u=>{var c;(c=u.leadingComments)!=null&&c.some(gs$1)&&o.add(D(u))}),n=Be$1(n,u=>{if(u.type==="ParenthesizedExpression"){let{expression:c}=u;if(c.type==="TypeCastExpression")return c.range=[...u.range],c;let p=D(u);if(!o.has(p))return c.extra={...c.extra,parenthesized:!0},c}})}if(n=Be$1(n,o=>{var u;switch(o.type){case"LogicalExpression":if(Ss$1(o))return kt(o);break;case"VariableDeclaration":{let c=Ct$1(!1,o.declarations,-1);c!=null&&c.init&&s[B(c)]!==";"&&(o.range=[D(o),B(c)]);break}case"TSParenthesizedType":return o.typeAnnotation;case"TSTypeParameter":if(typeof o.name=="string"){let c=D(o);o.name={type:"Identifier",name:o.name,range:[c,c+o.name.length]}}break;case"TopicReference":n.extra={...n.extra,__isUsingHackPipeline:!0};break;case"ExportAllDeclaration":if(a==="meriyah"&&((u=o.exported)==null?void 0:u.type)==="Identifier"){let{exported:c}=o,p=s.slice(D(c),B(c));(p.startsWith('"')||p.startsWith("'"))&&(o.exported={...o.exported,type:"Literal",value:o.exported.name,raw:p})}break;case"TSUnionType":case"TSIntersectionType":if(o.types.length===1)return o.types[0];break}}),ge$1(n.comments)){let o=Ct$1(!1,n.comments,-1);for(let u=n.comments.length-2;u>=0;u--){let c=n.comments[u];B(c)===D(o)&&Te$1(c)&&Te$1(o)&&Et$1(c)&&Et$1(o)&&(n.comments.splice(u+1,1),c.value+="*//*"+o.value,c.range=[D(c),B(o)]),o=c}}return n.type==="Program"&&(n.range=[0,s.length]),n}function Ss$1(n){return n.type==="LogicalExpression"&&n.right.type==="LogicalExpression"&&n.operator===n.right.operator}function kt(n){return Ss$1(n)?kt({type:"LogicalExpression",operator:n.operator,left:kt({type:"LogicalExpression",operator:n.operator,left:n.left,right:n.right.left,range:[D(n.left),B(n.right.left)]}),right:n.right.right,range:[D(n),B(n)]}):n}var ws$1=Mr$1;function Or$1(n,r){let a=new SyntaxError(n+" ("+r.loc.start.line+":"+r.loc.start.column+")");return Object.assign(a,r)}var Re$1=Or$1;function Fr$1(n){let{message:r,loc:{line:a,column:s},reasonCode:o}=n,u=n;(o==="MissingPlugin"||o==="MissingOneOfPlugins")&&(r="Unexpected token.",u=void 0);let c=` (${a}:${s})`;return r.endsWith(c)&&(r=r.slice(0,-c.length)),Re$1(r,{loc:{start:{line:a,column:s+1}},cause:u})}var Ue$1=Fr$1,re$1=qe(Ls$1());function Kr$1(n){let r=Fe(n);r&&(n=n.slice(r.length+1));let a=(0,re$1.extract)(n),{pragmas:s,comments:o}=(0,re$1.parseWithComments)(a);return{shebang:r,text:n,pragmas:s,comments:o}}function Ds$1(n){let{pragmas:r}=Kr$1(n);return Object.prototype.hasOwnProperty.call(r,"prettier")||Object.prototype.hasOwnProperty.call(r,"format")}function Hr$1(n){return n=typeof n=="function"?{parse:n}:n,{astFormat:"estree",hasPragma:Ds$1,locStart:D,locEnd:B,...n}}var Y=Hr$1;function Wr$1(n){let{filepath:r}=n;if(r){if(r=r.toLowerCase(),r.endsWith(".cjs"))return"script";if(r.endsWith(".mjs"))return"module"}}var Ms=Wr$1;function Jr$1(n,r){let{type:a="JsExpressionRoot",rootMarker:s,text:o}=r,{tokens:u,comments:c}=n;return delete n.tokens,delete n.comments,{tokens:u,comments:c,type:a,node:n,range:[0,o.length],rootMarker:s}}var _e$1=Jr$1,ae$1=n=>Y(Zr$1(n)),Xr$1={sourceType:"module",allowImportExportEverywhere:!0,allowReturnOutsideFunction:!0,allowNewTargetOutsideFunction:!0,allowSuperOutsideMethod:!0,allowUndeclaredExports:!0,errorRecovery:!0,createParenthesizedExpressions:!0,createImportExpressions:!0,plugins:["doExpressions","exportDefaultFrom","functionBind","functionSent","throwExpressions","partialApplication","decorators","decimal","moduleBlocks","asyncDoExpressions","regexpUnicodeSets","destructuringPrivate","decoratorAutoAccessors","importReflection","explicitResourceManagement",["importAttributes",{deprecatedAssertSyntax:!0}],"sourcePhaseImports","deferredImportEvaluation",["optionalChainingAssign",{version:"2023-07"}],"recordAndTuple"],tokens:!0,ranges:!0},Os$1="v8intrinsic",Fs$1=[["pipelineOperator",{proposal:"hack",topicToken:"%"}],["pipelineOperator",{proposal:"minimal"}],["pipelineOperator",{proposal:"fsharp"}]],q$1=(n,r=Xr$1)=>({...r,plugins:[...r.plugins,...n]}),Gr$1=/@(?:no)?flow\b/;function Yr$1(n,r){var a;if((a=r.filepath)!=null&&a.endsWith(".js.flow"))return!0;let s=Fe(n);s&&(n=n.slice(s.length));let o=ys$1(n,0);return o!==!1&&(n=n.slice(0,o)),Gr$1.test(n)}function Qr$1(n,r,a){let s=n(r,a),o=s.errors.find(u=>!ea$1.has(u.reasonCode));if(o)throw o;return s}function Zr$1({isExpression:n=!1,optionsCombinations:r}){return(a,s={})=>{if((s.parser==="babel"||s.parser==="__babel_estree")&&Yr$1(a,s))return s.parser="babel-flow",$s$1.parse(a,s);let o=r;(s.__babelSourceType??Ms(s))==="script"&&(o=o.map(d=>({...d,sourceType:"script"})));let u=/%[A-Z]/.test(a);a.includes("|>")?o=(u?[...Fs$1,Os$1]:Fs$1).flatMap(d=>o.map(_=>q$1([d],_))):u&&(o=o.map(d=>q$1([Os$1],d)));let c=n?je$1.parseExpression:je$1.parse,p;try{p=xs$1(o.map(d=>()=>Qr$1(c,a,d)))}catch({errors:[d]}){throw Ue$1(d)}return n&&(p=_e$1(p,{text:a,rootMarker:s.rootMarker})),ws$1(p,{parser:"babel",text:a})}}var ea$1=new Set(["StrictNumericEscape","StrictWith","StrictOctalLiteral","StrictDelete","StrictEvalArguments","StrictEvalArgumentsBinding","StrictFunction","EmptyTypeArguments","EmptyTypeParameters","ConstructorHasTypeParameters","UnsupportedParameterPropertyKind","DecoratorExportClass","ParamDupe","InvalidDecimal","RestTrailingComma","UnsupportedParameterDecorator","UnterminatedJsxContent","UnexpectedReservedWord","ModuleAttributesWithDuplicateKeys","LineTerminatorBeforeArrow","InvalidEscapeSequenceTemplate","NonAbstractClassHasAbstractMethod","OptionalTypeBeforeRequired","PatternIsOptional","OptionalBindingPattern","DeclareClassFieldHasInitializer","TypeImportCannotSpecifyDefaultAndNamed","ConstructorClassField","VarRedeclaration","InvalidPrivateFieldResolution","DuplicateExport"]),js$1=[q$1(["jsx"])],Bs$1=ae$1({optionsCombinations:js$1}),Rs=ae$1({optionsCombinations:[q$1(["jsx","typescript"]),q$1(["typescript"])]}),Us$1=ae$1({isExpression:!0,optionsCombinations:[q$1(["jsx"])]}),_s$1=ae$1({isExpression:!0,optionsCombinations:[q$1(["typescript"])]}),$s$1=ae$1({optionsCombinations:[q$1(["jsx",["flow",{all:!0,enums:!0}],"flowComments"])]}),ta$1=ae$1({optionsCombinations:js$1.map(n=>q$1(["estree"],n))}),qs={babel:Bs$1,"babel-flow":$s$1,"babel-ts":Rs,__js_expression:Us$1,__ts_expression:_s$1,__vue_expression:Us$1,__vue_ts_expression:_s$1,__vue_event_binding:Bs$1,__vue_ts_event_binding:Rs,__babel_estree:ta$1},Vs$1=qe(wt());function zs$1(n={}){let{allowComments:r=!0}=n;return function(a){let s;try{s=(0,Vs$1.parseExpression)(a,{tokens:!0,ranges:!0,attachComment:!1})}catch(o){throw Ue$1(o)}if(!r&&ge$1(s.comments))throw H$1(s.comments[0],"Comment");return ne$1(s),_e$1(s,{type:"JsonRoot",text:a})}}function H$1(n,r){let[a,s]=[n.loc.start,n.loc.end].map(({line:o,column:u})=>({line:o,column:u+1}));return Re$1(`${r} is not allowed in JSON.`,{loc:{start:a,end:s}})}function ne$1(n){switch(n.type){case"ArrayExpression":for(let r of n.elements)r!==null&&ne$1(r);return;case"ObjectExpression":for(let r of n.properties)ne$1(r);return;case"ObjectProperty":if(n.computed)throw H$1(n.key,"Computed key");if(n.shorthand)throw H$1(n.key,"Shorthand property");n.key.type!=="Identifier"&&ne$1(n.key),ne$1(n.value);return;case"UnaryExpression":{let{operator:r,argument:a}=n;if(r!=="+"&&r!=="-")throw H$1(n,`Operator '${n.operator}'`);if(a.type==="NumericLiteral"||a.type==="Identifier"&&(a.name==="Infinity"||a.name==="NaN"))return;throw H$1(a,`Operator '${r}' before '${a.type}'`)}case"Identifier":if(n.name!=="Infinity"&&n.name!=="NaN"&&n.name!=="undefined")throw H$1(n,`Identifier '${n.name}'`);return;case"TemplateLiteral":if(ge$1(n.expressions))throw H$1(n.expressions[0],"'TemplateLiteral' with expression");for(let r of n.quasis)ne$1(r);return;case"NullLiteral":case"BooleanLiteral":case"NumericLiteral":case"StringLiteral":case"TemplateElement":return;default:throw H$1(n,`'${n.type}'`)}}var vt$1=zs$1(),sa$1={json:Y({parse:vt$1,hasPragma(){return!0}}),json5:Y(vt$1),jsonc:Y(vt$1),"json-stringify":Y({parse:zs$1({allowComments:!1}),astFormat:"estree-json"})},Ks$1=sa$1,ia$1={...qs,...Ks$1},Mn$1=Lt$1;const prettierPluginBabel=Object.freeze(Object.defineProperty({__proto__:null,default:Mn$1,parsers:ia$1},Symbol.toStringTag,{value:"Module"}));var qa=Object.create,wn=Object.defineProperty,Wa=Object.getOwnPropertyDescriptor,Ga=Object.getOwnPropertyNames,Ua=Object.getPrototypeOf,Na=Object.prototype.hasOwnProperty,Ws=n=>{throw TypeError(n)},Xa=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),Tr=(n,r)=>{for(var a in r)wn(n,a,{get:r[a],enumerable:!0})},Ya=(n,r,a,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Ga(r))!Na.call(n,o)&&o!==a&&wn(n,o,{get:()=>r[o],enumerable:!(s=Wa(r,o))||s.enumerable});return n},Ha=(n,r,a)=>(a=n!=null?qa(Ua(n)):{},Ya(wn(a,"default",{value:n,enumerable:!0}),n)),Gs=(n,r,a)=>r.has(n)||Ws("Cannot "+a),pt=(n,r,a)=>(Gs(n,r,"read from private field"),r.get(n)),Us=(n,r,a)=>r.has(n)?Ws("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,a),Ns=(n,r,a,s)=>(Gs(n,r,"write to private field"),r.set(n,a),a),ii=Xa(n=>{Object.defineProperty(n,"__esModule",{value:!0}),n.extract=ja,n.parse=ec,n.parseWithComments=tc,n.print=rc,n.strip=Ja;var r=/\*\/$/,a=/^\/\*\*?/,s=/^\s*(\/\*\*?(.|\r?\n)*?\*\/)/,o=/(^|\s+)\/\/([^\r\n]*)/g,u=/^(\r?\n)+/,c=/(?:^|\r?\n) *(@[^\r\n]*?) *\r?\n *(?![^@\r\n]*\/\/[^]*)([^@\r\n\s][^@\r\n]+?) *\r?\n/g,p=/(?:^|\r?\n) *@(\S+) *([^\r\n]*)/g,d=/(\r?\n|^) *\* ?/g,_=[];function ja(ic){let uc=ic.match(s);return uc?uc[0].trimLeft():""}function Ja(ic){let uc=ic.match(s);return uc&&uc[0]?ic.substring(uc[0].length):ic}function ec(ic){return tc(ic).pragmas}function tc(ic){let uc=`
`;ic=ic.replace(a,"").replace(r,"").replace(d,"$1");let eh="";for(;eh!==ic;)eh=ic,ic=ic.replace(c,`${uc}$1 $2${uc}`);ic=ic.replace(u,"").trimRight();let rh=Object.create(null),ah=ic.replace(p,"").replace(u,"").trimRight(),ih;for(;ih=p.exec(ic);){let oh=ih[2].replace(o,"");typeof rh[ih[1]]=="string"||Array.isArray(rh[ih[1]])?rh[ih[1]]=_.concat(rh[ih[1]],oh):rh[ih[1]]=oh}return{comments:ah,pragmas:rh}}function rc({comments:ic="",pragmas:uc={}}){let eh=`
`,rh="/**",ah=" *",ih=" */",oh=Object.keys(uc),uh=oh.flatMap(hh=>nc(hh,uc[hh])).map(hh=>`${ah} ${hh}${eh}`).join("");if(!ic){if(oh.length===0)return"";if(oh.length===1&&!Array.isArray(uc[oh[0]])){let hh=uc[oh[0]];return`${rh} ${nc(oh[0],hh)[0]}${ih}`}}let ch=ic.split(eh).map(hh=>`${ah} ${hh}`).join(eh)+eh;return rh+eh+(ic?ch:"")+(ic&&oh.length?ah+eh:"")+uh+ih}function nc(ic,uc){return _.concat(uc).map(eh=>`@${ic} ${eh}`.trim())}}),js={};Tr(js,{languages:()=>mm,options:()=>va,printers:()=>lm});var Xs=[{linguistLanguageId:183,name:"JavaScript",type:"programming",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",color:"#f1e05a",aliases:["js","node"],extensions:[".js","._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib",".wxs"],filenames:["Jakefile"],interpreters:["chakra","d8","gjs","js","node","nodejs","qjs","rhino","v8","v8-shell","zx"],parsers:["babel","acorn","espree","meriyah","babel-flow","babel-ts","flow","typescript"],vscodeLanguageIds:["javascript","mongo"]},{linguistLanguageId:183,name:"Flow",type:"programming",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",color:"#f1e05a",aliases:[],extensions:[".js.flow"],filenames:[],interpreters:["chakra","d8","gjs","js","node","nodejs","qjs","rhino","v8","v8-shell"],parsers:["flow","babel-flow"],vscodeLanguageIds:["javascript"]},{linguistLanguageId:183,name:"JSX",type:"programming",tmScope:"source.js.jsx",aceMode:"javascript",codemirrorMode:"jsx",codemirrorMimeType:"text/jsx",color:void 0,aliases:void 0,extensions:[".jsx"],filenames:void 0,interpreters:void 0,parsers:["babel","babel-flow","babel-ts","flow","typescript","espree","meriyah"],vscodeLanguageIds:["javascriptreact"],group:"JavaScript"},{linguistLanguageId:378,name:"TypeScript",type:"programming",color:"#3178c6",aliases:["ts"],interpreters:["deno","ts-node"],extensions:[".ts",".cts",".mts"],tmScope:"source.ts",aceMode:"typescript",codemirrorMode:"javascript",codemirrorMimeType:"application/typescript",parsers:["typescript","babel-ts"],vscodeLanguageIds:["typescript"]},{linguistLanguageId:94901924,name:"TSX",type:"programming",color:"#3178c6",group:"TypeScript",extensions:[".tsx"],tmScope:"source.tsx",aceMode:"javascript",codemirrorMode:"jsx",codemirrorMimeType:"text/jsx",parsers:["typescript","babel-ts"],vscodeLanguageIds:["typescriptreact"]}],_s={};Tr(_s,{canAttachComment:()=>Tp,embed:()=>Zu,experimentalFeatures:()=>um,getCommentChildNodes:()=>xp,getVisitorKeys:()=>Br,handleComments:()=>Zn,insertPragma:()=>oi,isBlockComment:()=>re,isGap:()=>hp,massageAstNode:()=>Au,print:()=>ka,printComment:()=>ku,willPrintOwnComments:()=>es});var Va=(n,r,a,s)=>{if(!(n&&r==null))return r.replaceAll?r.replaceAll(a,s):a.global?r.replace(a,s):r.split(a).join(s)},Q=Va,$a=(n,r,a)=>{if(!(n&&r==null))return Array.isArray(r)||typeof r=="string"?r[a<0?r.length+a:a]:r.at(a)},O=$a;function Ka(n){return n!==null&&typeof n=="object"}var Ys=Ka;function*za(n,r){let{getVisitorKeys:a,filter:s=()=>!0}=r,o=u=>Ys(u)&&s(u);for(let u of a(n)){let c=n[u];if(Array.isArray(c))for(let p of c)o(p)&&(yield p);else o(c)&&(yield c)}}function*Qa(n,r){let a=[n];for(let s=0;s<a.length;s++){let o=a[s];for(let u of za(o,r))yield u,a.push(u)}}function Hs(n,{getVisitorKeys:r,predicate:a}){for(let s of Qa(n,{getVisitorKeys:r}))if(a(s))return!0;return!1}var Vs=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function $s(n){return n===12288||n>=65281&&n<=65376||n>=65504&&n<=65510}function Ks(n){return n>=4352&&n<=4447||n===8986||n===8987||n===9001||n===9002||n>=9193&&n<=9196||n===9200||n===9203||n===9725||n===9726||n===9748||n===9749||n>=9800&&n<=9811||n===9855||n===9875||n===9889||n===9898||n===9899||n===9917||n===9918||n===9924||n===9925||n===9934||n===9940||n===9962||n===9970||n===9971||n===9973||n===9978||n===9981||n===9989||n===9994||n===9995||n===10024||n===10060||n===10062||n>=10067&&n<=10069||n===10071||n>=10133&&n<=10135||n===10160||n===10175||n===11035||n===11036||n===11088||n===11093||n>=11904&&n<=11929||n>=11931&&n<=12019||n>=12032&&n<=12245||n>=12272&&n<=12287||n>=12289&&n<=12350||n>=12353&&n<=12438||n>=12441&&n<=12543||n>=12549&&n<=12591||n>=12593&&n<=12686||n>=12688&&n<=12771||n>=12783&&n<=12830||n>=12832&&n<=12871||n>=12880&&n<=19903||n>=19968&&n<=42124||n>=42128&&n<=42182||n>=43360&&n<=43388||n>=44032&&n<=55203||n>=63744&&n<=64255||n>=65040&&n<=65049||n>=65072&&n<=65106||n>=65108&&n<=65126||n>=65128&&n<=65131||n>=94176&&n<=94180||n===94192||n===94193||n>=94208&&n<=100343||n>=100352&&n<=101589||n>=101632&&n<=101640||n>=110576&&n<=110579||n>=110581&&n<=110587||n===110589||n===110590||n>=110592&&n<=110882||n===110898||n>=110928&&n<=110930||n===110933||n>=110948&&n<=110951||n>=110960&&n<=111355||n===126980||n===127183||n===127374||n>=127377&&n<=127386||n>=127488&&n<=127490||n>=127504&&n<=127547||n>=127552&&n<=127560||n===127568||n===127569||n>=127584&&n<=127589||n>=127744&&n<=127776||n>=127789&&n<=127797||n>=127799&&n<=127868||n>=127870&&n<=127891||n>=127904&&n<=127946||n>=127951&&n<=127955||n>=127968&&n<=127984||n===127988||n>=127992&&n<=128062||n===128064||n>=128066&&n<=128252||n>=128255&&n<=128317||n>=128331&&n<=128334||n>=128336&&n<=128359||n===128378||n===128405||n===128406||n===128420||n>=128507&&n<=128591||n>=128640&&n<=128709||n===128716||n>=128720&&n<=128722||n>=128725&&n<=128727||n>=128732&&n<=128735||n===128747||n===128748||n>=128756&&n<=128764||n>=128992&&n<=129003||n===129008||n>=129292&&n<=129338||n>=129340&&n<=129349||n>=129351&&n<=129535||n>=129648&&n<=129660||n>=129664&&n<=129672||n>=129680&&n<=129725||n>=129727&&n<=129733||n>=129742&&n<=129755||n>=129760&&n<=129768||n>=129776&&n<=129784||n>=131072&&n<=196605||n>=196608&&n<=262141}var zs=n=>!($s(n)||Ks(n)),Za=/[^\x20-\x7F]/;function eo(n){if(!n)return 0;if(!Za.test(n))return n.length;n=n.replace(Vs(),"  ");let r=0;for(let a of n){let s=a.codePointAt(0);s<=31||s>=127&&s<=159||s>=768&&s<=879||(r+=zs(s)?1:2)}return r}var et=eo;function xr(n){return(r,a,s)=>{let o=!!(s!=null&&s.backwards);if(a===!1)return!1;let{length:u}=r,c=a;for(;c>=0&&c<u;){let p=r.charAt(c);if(n instanceof RegExp){if(!n.test(p))return c}else if(!n.includes(p))return c;o?c--:c++}return c===-1||c===u?c:!1}}var Ge=xr(" 	"),Qs=xr(",; 	"),Zs=xr(/[^\n\r]/);function to(n,r,a){let s=!!(a!=null&&a.backwards);if(r===!1)return!1;let o=n.charAt(r);if(s){if(n.charAt(r-1)==="\r"&&o===`
`)return r-2;if(o===`
`||o==="\r"||o==="\u2028"||o==="\u2029")return r-1}else{if(o==="\r"&&n.charAt(r+1)===`
`)return r+2;if(o===`
`||o==="\r"||o==="\u2028"||o==="\u2029")return r+1}return r}var Ue=to;function ro(n,r,a={}){let s=Ge(n,a.backwards?r-1:r,a),o=Ue(n,s,a);return s!==o}var te=ro;function no(n,r){if(r===!1)return!1;if(n.charAt(r)==="/"&&n.charAt(r+1)==="*"){for(let a=r+2;a<n.length;++a)if(n.charAt(a)==="*"&&n.charAt(a+1)==="/")return a+2}return r}var Ot=no;function so(n,r){return r===!1?!1:n.charAt(r)==="/"&&n.charAt(r+1)==="/"?Zs(n,r):r}var _t=so;function uo(n,r){let a=null,s=r;for(;s!==a;)a=s,s=Qs(n,s),s=Ot(n,s),s=Ge(n,s);return s=_t(n,s),s=Ue(n,s),s!==!1&&te(n,s)}var vt=uo;function io(n){return Array.isArray(n)&&n.length>0}var L=io,hr="'",eu='"';function ao(n,r){let a=r===!0||r===hr?hr:eu,s=a===hr?eu:hr,o=0,u=0;for(let c of n)c===a?o++:c===s&&u++;return o>u?s:a}var gr=ao;function oo(n,r,a){let s=r==='"'?"'":'"',o=Q(!1,n,/\\(.)|(["'])/gs,(u,c,p)=>c===s?c:p===r?"\\"+p:p||(a&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/.test(c)?c:"\\"+c));return r+o+r}var tu=oo;function po(n,r){let a=n.slice(1,-1),s=r.parser==="json"||r.parser==="jsonc"||r.parser==="json5"&&r.quoteProps==="preserve"&&!r.singleQuote?'"':r.__isInHtmlAttribute?"'":gr(a,r.singleQuote);return tu(a,s,!(r.parser==="css"||r.parser==="less"||r.parser==="scss"||r.__embeddedInHtml))}var tt=po;function R(n){var r,a,s;let o=((r=n.range)==null?void 0:r[0])??n.start,u=(s=((a=n.declaration)==null?void 0:a.decorators)??n.decorators)==null?void 0:s[0];return u?Math.min(R(u),o):o}function k(n){var r;return((r=n.range)==null?void 0:r[1])??n.end}function gt(n,r){let a=R(n);return Number.isInteger(a)&&a===R(r)}function co(n,r){let a=k(n);return Number.isInteger(a)&&a===k(r)}function ru(n,r){return gt(n,r)&&co(n,r)}var er=null;function tr(n){if(er!==null&&typeof er.property){let r=er;return er=tr.prototype=null,r}return er=tr.prototype=n??Object.create(null),new tr}var lo=10;for(let n=0;n<=lo;n++)tr();function On(n){return tr(n)}function mo(n,r="type"){On(n);function a(s){let o=s[r],u=n[o];if(!Array.isArray(u))throw Object.assign(new Error(`Missing visitor keys for '${o}'.`),{node:s});return u}return a}var Sr=mo,nu={ArrayExpression:["elements"],AssignmentExpression:["left","right"],BinaryExpression:["left","right"],InterpreterDirective:[],Directive:["value"],DirectiveLiteral:[],BlockStatement:["directives","body"],BreakStatement:["label"],CallExpression:["callee","arguments","typeParameters","typeArguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["test","body"],EmptyStatement:[],ExpressionStatement:["expression"],File:["program"],ForInStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body","returnType","typeParameters","predicate"],FunctionExpression:["id","params","body","returnType","typeParameters"],Identifier:["typeAnnotation","decorators"],IfStatement:["test","consequent","alternate"],LabeledStatement:["label","body"],StringLiteral:[],NumericLiteral:[],NullLiteral:[],BooleanLiteral:[],RegExpLiteral:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments","typeParameters","typeArguments"],Program:["directives","body"],ObjectExpression:["properties"],ObjectMethod:["key","params","body","decorators","returnType","typeParameters"],ObjectProperty:["key","value","decorators"],RestElement:["argument","typeAnnotation","decorators"],ReturnStatement:["argument"],SequenceExpression:["expressions"],ParenthesizedExpression:["expression"],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],AssignmentPattern:["left","right","decorators","typeAnnotation"],ArrayPattern:["elements","typeAnnotation","decorators"],ArrowFunctionExpression:["params","body","returnType","typeParameters","predicate"],ClassBody:["body"],ClassExpression:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators","superTypeArguments"],ClassDeclaration:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators","superTypeArguments"],ExportAllDeclaration:["source","attributes","exported"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source","attributes"],ExportSpecifier:["local","exported"],ForOfStatement:["left","right","body"],ImportDeclaration:["specifiers","source","attributes"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["local","imported"],ImportExpression:["source","options","attributes"],MetaProperty:["meta","property"],ClassMethod:["key","params","body","decorators","returnType","typeParameters"],ObjectPattern:["properties","typeAnnotation","decorators"],SpreadElement:["argument"],Super:[],TaggedTemplateExpression:["tag","quasi","typeParameters","typeArguments"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],YieldExpression:["argument"],AwaitExpression:["argument"],Import:[],BigIntLiteral:[],ExportNamespaceSpecifier:["exported"],OptionalMemberExpression:["object","property"],OptionalCallExpression:["callee","arguments","typeParameters","typeArguments"],ClassProperty:["key","value","typeAnnotation","decorators","variance"],ClassAccessorProperty:["key","value","typeAnnotation","decorators"],ClassPrivateProperty:["key","value","decorators","typeAnnotation","variance"],ClassPrivateMethod:["key","params","body","decorators","returnType","typeParameters"],PrivateName:["id"],StaticBlock:["body"],AnyTypeAnnotation:[],ArrayTypeAnnotation:["elementType"],BooleanTypeAnnotation:[],BooleanLiteralTypeAnnotation:[],NullLiteralTypeAnnotation:[],ClassImplements:["id","typeParameters"],DeclareClass:["id","typeParameters","extends","mixins","implements","body"],DeclareFunction:["id","predicate"],DeclareInterface:["id","typeParameters","extends","body"],DeclareModule:["id","body"],DeclareModuleExports:["typeAnnotation"],DeclareTypeAlias:["id","typeParameters","right"],DeclareOpaqueType:["id","typeParameters","supertype"],DeclareVariable:["id"],DeclareExportDeclaration:["declaration","specifiers","source"],DeclareExportAllDeclaration:["source"],DeclaredPredicate:["value"],ExistsTypeAnnotation:[],FunctionTypeAnnotation:["typeParameters","params","rest","returnType","this"],FunctionTypeParam:["name","typeAnnotation"],GenericTypeAnnotation:["id","typeParameters"],InferredPredicate:[],InterfaceExtends:["id","typeParameters"],InterfaceDeclaration:["id","typeParameters","extends","body"],InterfaceTypeAnnotation:["extends","body"],IntersectionTypeAnnotation:["types"],MixedTypeAnnotation:[],EmptyTypeAnnotation:[],NullableTypeAnnotation:["typeAnnotation"],NumberLiteralTypeAnnotation:[],NumberTypeAnnotation:[],ObjectTypeAnnotation:["properties","indexers","callProperties","internalSlots"],ObjectTypeInternalSlot:["id","value","optional","static","method"],ObjectTypeCallProperty:["value"],ObjectTypeIndexer:["id","key","value","variance"],ObjectTypeProperty:["key","value","variance"],ObjectTypeSpreadProperty:["argument"],OpaqueType:["id","typeParameters","supertype","impltype"],QualifiedTypeIdentifier:["id","qualification"],StringLiteralTypeAnnotation:[],StringTypeAnnotation:[],SymbolTypeAnnotation:[],ThisTypeAnnotation:[],TupleTypeAnnotation:["types","elementTypes"],TypeofTypeAnnotation:["argument","typeArguments"],TypeAlias:["id","typeParameters","right"],TypeAnnotation:["typeAnnotation"],TypeCastExpression:["expression","typeAnnotation"],TypeParameter:["bound","default","variance"],TypeParameterDeclaration:["params"],TypeParameterInstantiation:["params"],UnionTypeAnnotation:["types"],Variance:[],VoidTypeAnnotation:[],EnumDeclaration:["id","body"],EnumBooleanBody:["members"],EnumNumberBody:["members"],EnumStringBody:["members"],EnumSymbolBody:["members"],EnumBooleanMember:["id","init"],EnumNumberMember:["id","init"],EnumStringMember:["id","init"],EnumDefaultedMember:["id"],IndexedAccessType:["objectType","indexType"],OptionalIndexedAccessType:["objectType","indexType"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXSpreadChild:["expression"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes","typeArguments","typeParameters"],JSXSpreadAttribute:["argument"],JSXText:[],JSXFragment:["openingFragment","children","closingFragment"],JSXOpeningFragment:[],JSXClosingFragment:[],Noop:[],Placeholder:[],V8IntrinsicIdentifier:[],ArgumentPlaceholder:[],BindExpression:["object","callee"],ImportAttribute:["key","value"],Decorator:["expression"],DoExpression:["body"],ExportDefaultSpecifier:["exported"],RecordExpression:["properties"],TupleExpression:["elements"],DecimalLiteral:[],ModuleExpression:["body"],TopicReference:[],PipelineTopicExpression:["expression"],PipelineBareFunction:["callee"],PipelinePrimaryTopicReference:[],TSParameterProperty:["parameter","decorators"],TSDeclareFunction:["id","typeParameters","params","returnType","body"],TSDeclareMethod:["decorators","key","typeParameters","params","returnType"],TSQualifiedName:["left","right"],TSCallSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSPropertySignature:["key","typeAnnotation"],TSMethodSignature:["key","typeParameters","parameters","typeAnnotation","params","returnType"],TSIndexSignature:["parameters","typeAnnotation"],TSAnyKeyword:[],TSBooleanKeyword:[],TSBigIntKeyword:[],TSIntrinsicKeyword:[],TSNeverKeyword:[],TSNullKeyword:[],TSNumberKeyword:[],TSObjectKeyword:[],TSStringKeyword:[],TSSymbolKeyword:[],TSUndefinedKeyword:[],TSUnknownKeyword:[],TSVoidKeyword:[],TSThisType:[],TSFunctionType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructorType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSTypeReference:["typeName","typeParameters","typeArguments"],TSTypePredicate:["parameterName","typeAnnotation"],TSTypeQuery:["exprName","typeParameters","typeArguments"],TSTypeLiteral:["members"],TSArrayType:["elementType"],TSTupleType:["elementTypes"],TSOptionalType:["typeAnnotation"],TSRestType:["typeAnnotation"],TSNamedTupleMember:["label","elementType"],TSUnionType:["types"],TSIntersectionType:["types"],TSConditionalType:["checkType","extendsType","trueType","falseType"],TSInferType:["typeParameter"],TSParenthesizedType:["typeAnnotation"],TSTypeOperator:["typeAnnotation"],TSIndexedAccessType:["objectType","indexType"],TSMappedType:["typeParameter","typeAnnotation","nameType"],TSLiteralType:["literal"],TSExpressionWithTypeArguments:["expression","typeParameters"],TSInterfaceDeclaration:["id","typeParameters","extends","body"],TSInterfaceBody:["body"],TSTypeAliasDeclaration:["id","typeParameters","typeAnnotation"],TSInstantiationExpression:["expression","typeParameters","typeArguments"],TSAsExpression:["expression","typeAnnotation"],TSSatisfiesExpression:["expression","typeAnnotation"],TSTypeAssertion:["typeAnnotation","expression"],TSEnumDeclaration:["id","members"],TSEnumMember:["id","initializer"],TSModuleDeclaration:["id","body"],TSModuleBlock:["body"],TSImportType:["argument","qualifier","typeParameters","typeArguments"],TSImportEqualsDeclaration:["id","moduleReference"],TSExternalModuleReference:["expression"],TSNonNullExpression:["expression"],TSExportAssignment:["expression"],TSNamespaceExportDeclaration:["id"],TSTypeAnnotation:["typeAnnotation"],TSTypeParameterInstantiation:["params"],TSTypeParameterDeclaration:["params"],TSTypeParameter:["constraint","default","name"],ChainExpression:["expression"],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],Literal:[],MethodDefinition:["decorators","key","value"],PrivateIdentifier:[],Property:["key","value"],PropertyDefinition:["decorators","key","typeAnnotation","value","variance"],AccessorProperty:["decorators","key","typeAnnotation","value"],TSAbstractAccessorProperty:["decorators","key","typeAnnotation"],TSAbstractKeyword:[],TSAbstractMethodDefinition:["key","value"],TSAbstractPropertyDefinition:["decorators","key","typeAnnotation"],TSAsyncKeyword:[],TSClassImplements:["expression","typeArguments","typeParameters"],TSDeclareKeyword:[],TSEmptyBodyFunctionExpression:["id","typeParameters","params","returnType"],TSExportKeyword:[],TSInterfaceHeritage:["expression","typeArguments","typeParameters"],TSPrivateKeyword:[],TSProtectedKeyword:[],TSPublicKeyword:[],TSReadonlyKeyword:[],TSStaticKeyword:[],TSTemplateLiteralType:["quasis","types"],AsConstExpression:["expression"],AsExpression:["expression","typeAnnotation"],BigIntLiteralTypeAnnotation:[],BigIntTypeAnnotation:[],ComponentDeclaration:["id","params","body","typeParameters","rendersType"],ComponentParameter:["name","local"],ComponentTypeAnnotation:["params","rest","typeParameters","rendersType"],ComponentTypeParameter:["name","typeAnnotation"],ConditionalTypeAnnotation:["checkType","extendsType","trueType","falseType"],DeclareComponent:["id","params","rest","typeParameters","rendersType"],DeclareEnum:["id","body"],DeclareHook:["id"],DeclareNamespace:["id","body"],EnumBigIntBody:["members"],EnumBigIntMember:["id","init"],HookDeclaration:["id","params","body","typeParameters","returnType"],HookTypeAnnotation:["params","returnType","rest","typeParameters"],InferTypeAnnotation:["typeParameter"],KeyofTypeAnnotation:["argument"],ObjectTypeMappedTypeProperty:["keyTparam","propType","sourceType","variance"],QualifiedTypeofIdentifier:["qualification","id"],TupleTypeLabeledElement:["label","elementType","variance"],TupleTypeSpreadElement:["label","typeAnnotation"],TypeOperator:["typeAnnotation"],TypePredicate:["parameterName","typeAnnotation","asserts"],NGRoot:["node"],NGPipeExpression:["left","right","arguments"],NGChainedExpression:["expressions"],NGEmptyExpression:[],NGMicrosyntax:["body"],NGMicrosyntaxKey:[],NGMicrosyntaxExpression:["expression","alias"],NGMicrosyntaxKeyedExpression:["key","expression"],NGMicrosyntaxLet:["key","value"],NGMicrosyntaxAs:["key","alias"],JsExpressionRoot:["node"],JsonRoot:["node"],TSJSDocAllType:[],TSJSDocUnknownType:[],TSJSDocNullableType:["typeAnnotation"],TSJSDocNonNullableType:["typeAnnotation"],NeverTypeAnnotation:[],UndefinedTypeAnnotation:[],UnknownTypeAnnotation:[],SatisfiesExpression:["expression","typeAnnotation"]},yo=Sr(nu),Br=yo;function Do(n){let r=new Set(n);return a=>r.has(a==null?void 0:a.type)}var j=Do,fo=j(["Block","CommentBlock","MultiLine"]),re=fo,Eo=j(["AnyTypeAnnotation","ThisTypeAnnotation","NumberTypeAnnotation","VoidTypeAnnotation","BooleanTypeAnnotation","BigIntTypeAnnotation","SymbolTypeAnnotation","StringTypeAnnotation","NeverTypeAnnotation","UndefinedTypeAnnotation","UnknownTypeAnnotation","EmptyTypeAnnotation","MixedTypeAnnotation"]),br=Eo;function Fo(n,r){let a=r.split(".");for(let s=a.length-1;s>=0;s--){let o=a[s];if(s===0)return n.type==="Identifier"&&n.name===o;if(n.type!=="MemberExpression"||n.optional||n.computed||n.property.type!=="Identifier"||n.property.name!==o)return!1;n=n.object}}function Co(n,r){return r.some(a=>Fo(n,a))}var su=Co;function Ao({type:n}){return n.startsWith("TS")&&n.endsWith("Keyword")}var Pr=Ao;function nr(n,r){return r(n)||Hs(n,{getVisitorKeys:Br,predicate:r})}function Mt(n){return n.type==="AssignmentExpression"||n.type==="BinaryExpression"||n.type==="LogicalExpression"||n.type==="NGPipeExpression"||n.type==="ConditionalExpression"||w(n)||q(n)||n.type==="SequenceExpression"||n.type==="TaggedTemplateExpression"||n.type==="BindExpression"||n.type==="UpdateExpression"&&!n.prefix||de(n)||n.type==="TSNonNullExpression"||n.type==="ChainExpression"}function au(n){return n.expressions?n.expressions[0]:n.left??n.test??n.callee??n.object??n.tag??n.argument??n.expression}function Ir(n){if(n.expressions)return["expressions",0];if(n.left)return["left"];if(n.test)return["test"];if(n.object)return["object"];if(n.callee)return["callee"];if(n.tag)return["tag"];if(n.argument)return["argument"];if(n.expression)return["expression"];throw new Error("Unexpected node has no left side.")}var Rt=j(["Line","CommentLine","SingleLine","HashbangComment","HTMLOpen","HTMLClose","Hashbang","InterpreterDirective"]),ou=j(["ExportDefaultDeclaration","DeclareExportDeclaration","ExportNamedDeclaration","ExportAllDeclaration","DeclareExportAllDeclaration"]),U=j(["ArrayExpression","TupleExpression"]),se=j(["ObjectExpression","RecordExpression"]);function Ce(n){return n.type==="NumericLiteral"||n.type==="Literal"&&typeof n.value=="number"}function Rn(n){return n.type==="UnaryExpression"&&(n.operator==="+"||n.operator==="-")&&Ce(n.argument)}function z(n){return!!(n&&(n.type==="StringLiteral"||n.type==="Literal"&&typeof n.value=="string"))}function Jn(n){return n.type==="RegExpLiteral"||n.type==="Literal"&&!!n.regex}var Lr=j(["Literal","BooleanLiteral","BigIntLiteral","DecimalLiteral","DirectiveLiteral","NullLiteral","NumericLiteral","RegExpLiteral","StringLiteral"]),To=j(["Identifier","ThisExpression","Super","PrivateName","PrivateIdentifier","Import"]),we=j(["ObjectTypeAnnotation","TSTypeLiteral","TSMappedType"]),jt=j(["FunctionExpression","ArrowFunctionExpression"]);function xo(n){return n.type==="FunctionExpression"||n.type==="ArrowFunctionExpression"&&n.body.type==="BlockStatement"}function _n(n){return w(n)&&n.callee.type==="Identifier"&&["async","inject","fakeAsync","waitForAsync"].includes(n.callee.name)}var N=j(["JSXElement","JSXFragment"]);function St(n){return n.method&&n.kind==="init"||n.kind==="get"||n.kind==="set"}function wr(n){return(n.type==="ObjectTypeProperty"||n.type==="ObjectTypeInternalSlot")&&!n.static&&!n.method&&n.kind!=="get"&&n.kind!=="set"&&n.value.type==="FunctionTypeAnnotation"}function pu(n){return(n.type==="TypeAnnotation"||n.type==="TSTypeAnnotation")&&n.typeAnnotation.type==="FunctionTypeAnnotation"&&!n.static&&!gt(n,n.typeAnnotation)}var De=j(["BinaryExpression","LogicalExpression","NGPipeExpression"]);function Ft(n){return q(n)||n.type==="BindExpression"&&!!n.object}var ho=j(["TSThisType","NullLiteralTypeAnnotation","BooleanLiteralTypeAnnotation","StringLiteralTypeAnnotation","BigIntLiteralTypeAnnotation","NumberLiteralTypeAnnotation","TSLiteralType","TSTemplateLiteralType"]);function Jt(n){return Pr(n)||br(n)||ho(n)||(n.type==="GenericTypeAnnotation"||n.type==="TSTypeReference")&&!n.typeParameters}function go(n){return n.type==="Identifier"&&(n.name==="beforeEach"||n.name==="beforeAll"||n.name==="afterEach"||n.name==="afterAll")}var So=["it","it.only","it.skip","describe","describe.only","describe.skip","test","test.only","test.skip","test.step","test.describe","test.describe.only","test.describe.parallel","test.describe.parallel.only","test.describe.serial","test.describe.serial.only","skip","xit","xdescribe","xtest","fit","fdescribe","ftest"];function Bo(n){return su(n,So)}function Bt(n,r){if(n.type!=="CallExpression"||n.optional)return!1;let a=ue(n);if(a.length===1){if(_n(n)&&r&&Bt(r))return jt(a[0]);if(go(n.callee))return _n(a[0])}else if((a.length===2||a.length===3)&&(a[0].type==="TemplateLiteral"||z(a[0]))&&Bo(n.callee))return a[2]&&!Ce(a[2])?!1:(a.length===2?jt(a[1]):xo(a[1])&&$(a[1]).length<=1)||_n(a[1]);return!1}var cu=n=>r=>((r==null?void 0:r.type)==="ChainExpression"&&(r=r.expression),n(r)),w=cu(j(["CallExpression","OptionalCallExpression"])),q=cu(j(["MemberExpression","OptionalMemberExpression"]));function qn(n,r=5){return lu(n,r)<=r}function lu(n,r){let a=0;for(let s in n){let o=n[s];if(o&&typeof o=="object"&&typeof o.type=="string"&&(a++,a+=lu(o,r-a)),a>r)return a}return a}var bo=.25;function sr(n,r){let{printWidth:a}=r;if(T(n))return!1;let s=a*bo;if(n.type==="ThisExpression"||n.type==="Identifier"&&n.name.length<=s||Rn(n)&&!T(n.argument))return!0;let o=n.type==="Literal"&&"regex"in n&&n.regex.pattern||n.type==="RegExpLiteral"&&n.pattern;return o?o.length<=s:z(n)?tt(fe(n),r).length<=s:n.type==="TemplateLiteral"?n.expressions.length===0&&n.quasis[0].value.raw.length<=s&&!n.quasis[0].value.raw.includes(`
`):n.type==="UnaryExpression"?sr(n.argument,{printWidth:a}):n.type==="CallExpression"&&n.arguments.length===0&&n.callee.type==="Identifier"?n.callee.name.length<=s-2:Lr(n)}function Oe(n,r){return N(r)?bt(r):T(r,g.Leading,a=>te(n,k(a)))}function uu(n){return n.quasis.some(r=>r.value.raw.includes(`
`))}function Or(n,r){return(n.type==="TemplateLiteral"&&uu(n)||n.type==="TaggedTemplateExpression"&&uu(n.quasi))&&!te(r,R(n),{backwards:!0})}function _r(n){if(!T(n))return!1;let r=O(!1,ct(n,g.Dangling),-1);return r&&!re(r)}function mu(n){if(n.length<=1)return!1;let r=0;for(let a of n)if(jt(a)){if(r+=1,r>1)return!0}else if(w(a)){for(let s of ue(a))if(jt(s))return!0}return!1}function vr(n){let{node:r,parent:a,key:s}=n;return s==="callee"&&w(r)&&w(a)&&a.arguments.length>0&&r.arguments.length>a.arguments.length}var Po=new Set(["!","-","+","~"]);function be(n,r=2){if(r<=0)return!1;if(n.type==="ChainExpression"||n.type==="TSNonNullExpression")return be(n.expression,r);let a=s=>be(s,r-1);if(Jn(n))return et(n.pattern??n.regex.pattern)<=5;if(Lr(n)||To(n)||n.type==="ArgumentPlaceholder")return!0;if(n.type==="TemplateLiteral")return n.quasis.every(s=>!s.value.raw.includes(`
`))&&n.expressions.every(a);if(se(n))return n.properties.every(s=>!s.computed&&(s.shorthand||s.value&&a(s.value)));if(U(n))return n.elements.every(s=>s===null||a(s));if(lt(n)){if(n.type==="ImportExpression"||be(n.callee,r)){let s=ue(n);return s.length<=r&&s.every(a)}return!1}return q(n)?be(n.object,r)&&be(n.property,r):n.type==="UnaryExpression"&&Po.has(n.operator)||n.type==="UpdateExpression"?be(n.argument,r):!1}function fe(n){var r;return((r=n.extra)==null?void 0:r.raw)??n.raw}function yu(n){return n}function oe(n,r="es5"){return n.trailingComma==="es5"&&r==="es5"||n.trailingComma==="all"&&(r==="all"||r==="es5")}function ae(n,r){switch(n.type){case"BinaryExpression":case"LogicalExpression":case"AssignmentExpression":case"NGPipeExpression":return ae(n.left,r);case"MemberExpression":case"OptionalMemberExpression":return ae(n.object,r);case"TaggedTemplateExpression":return n.tag.type==="FunctionExpression"?!1:ae(n.tag,r);case"CallExpression":case"OptionalCallExpression":return n.callee.type==="FunctionExpression"?!1:ae(n.callee,r);case"ConditionalExpression":return ae(n.test,r);case"UpdateExpression":return!n.prefix&&ae(n.argument,r);case"BindExpression":return n.object&&ae(n.object,r);case"SequenceExpression":return ae(n.expressions[0],r);case"ChainExpression":case"TSSatisfiesExpression":case"TSAsExpression":case"TSNonNullExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return ae(n.expression,r);default:return r(n)}}var iu={"==":!0,"!=":!0,"===":!0,"!==":!0},kr={"*":!0,"/":!0,"%":!0},Mn={">>":!0,">>>":!0,"<<":!0};function ur(n,r){return!(rr(r)!==rr(n)||n==="**"||iu[n]&&iu[r]||r==="%"&&kr[n]||n==="%"&&kr[r]||r!==n&&kr[r]&&kr[n]||Mn[n]&&Mn[r])}var ko=new Map([["|>"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]].flatMap((n,r)=>n.map(a=>[a,r])));function rr(n){return ko.get(n)}function Du(n){return!!Mn[n]||n==="|"||n==="^"||n==="&"}function fu(n){var r;if(n.rest)return!0;let a=$(n);return((r=O(!1,a,-1))==null?void 0:r.type)==="RestElement"}var vn=new WeakMap;function $(n){if(vn.has(n))return vn.get(n);let r=[];return n.this&&r.push(n.this),Array.isArray(n.parameters)?r.push(...n.parameters):Array.isArray(n.params)&&r.push(...n.params),n.rest&&r.push(n.rest),vn.set(n,r),r}function Eu(n,r){let{node:a}=n,s=0,o=u=>r(u,s++);a.this&&n.call(o,"this"),Array.isArray(a.parameters)?n.each(o,"parameters"):Array.isArray(a.params)&&n.each(o,"params"),a.rest&&n.call(o,"rest")}var jn=new WeakMap;function ue(n){if(jn.has(n))return jn.get(n);if(n.type==="ChainExpression")return ue(n.expression);let r=n.arguments;return n.type==="ImportExpression"&&(r=[n.source],n.attributes&&r.push(n.attributes),n.options&&r.push(n.options)),jn.set(n,r),r}function qt(n,r){let{node:a}=n;if(a.type==="ChainExpression")return n.call(()=>qt(n,r),"expression");a.type==="ImportExpression"?(n.call(s=>r(s,0),"source"),a.attributes&&n.call(s=>r(s,1),"attributes"),a.options&&n.call(s=>r(s,1),"options")):n.each(r,"arguments")}function Wn(n,r){let a=[];if(n.type==="ChainExpression"&&(n=n.expression,a.push("expression")),n.type==="ImportExpression"){if(r===0||r===(n.attributes||n.options?-2:-1))return[...a,"source"];if(n.attributes&&(r===1||r===-1))return[...a,"attributes"];if(n.options&&(r===1||r===-1))return[...a,"options"];throw new RangeError("Invalid argument index")}if(r<0&&(r=n.arguments.length+r),r<0||r>=n.arguments.length)throw new RangeError("Invalid argument index");return[...a,"arguments",r]}function ir(n){return n.value.trim()==="prettier-ignore"&&!n.unignore}function bt(n){return(n==null?void 0:n.prettierIgnore)||T(n,g.PrettierIgnore)}var g={Leading:2,Trailing:4,Dangling:8,Block:16,Line:32,PrettierIgnore:64,First:128,Last:256},Fu=(n,r)=>{if(typeof n=="function"&&(r=n,n=0),n||r)return(a,s,o)=>!(n&g.Leading&&!a.leading||n&g.Trailing&&!a.trailing||n&g.Dangling&&(a.leading||a.trailing)||n&g.Block&&!re(a)||n&g.Line&&!Rt(a)||n&g.First&&s!==0||n&g.Last&&s!==o.length-1||n&g.PrettierIgnore&&!ir(a)||r&&!r(a))};function T(n,r,a){if(!L(n==null?void 0:n.comments))return!1;let s=Fu(r,a);return s?n.comments.some(s):!0}function ct(n,r,a){if(!Array.isArray(n==null?void 0:n.comments))return[];let s=Fu(r,a);return s?n.comments.filter(s):n.comments}var pe=(n,{originalText:r})=>vt(r,k(n));function lt(n){return w(n)||n.type==="NewExpression"||n.type==="ImportExpression"}function Ae(n){return n&&(n.type==="ObjectProperty"||n.type==="Property"&&!St(n))}var de=j(["TSAsExpression","TSSatisfiesExpression","AsExpression","AsConstExpression","SatisfiesExpression"]),Ne=j(["UnionTypeAnnotation","TSUnionType"]),jr=j(["IntersectionTypeAnnotation","TSIntersectionType"]),Io=new Set(["range","raw","comments","leadingComments","trailingComments","innerComments","extra","start","end","loc","flags","errors","tokens"]),Wt=n=>{for(let r of n.quasis)delete r.value};function Cu(n,r,a){var s,o;if(n.type==="Program"&&delete r.sourceType,(n.type==="BigIntLiteral"||n.type==="BigIntLiteralTypeAnnotation")&&n.value&&(r.value=n.value.toLowerCase()),(n.type==="BigIntLiteral"||n.type==="Literal")&&n.bigint&&(r.bigint=n.bigint.toLowerCase()),n.type==="DecimalLiteral"&&(r.value=Number(n.value)),n.type==="Literal"&&r.decimal&&(r.decimal=Number(n.decimal)),n.type==="EmptyStatement"||n.type==="JSXText"||n.type==="JSXExpressionContainer"&&(n.expression.type==="Literal"||n.expression.type==="StringLiteral")&&n.expression.value===" ")return null;if((n.type==="Property"||n.type==="ObjectProperty"||n.type==="MethodDefinition"||n.type==="ClassProperty"||n.type==="ClassMethod"||n.type==="PropertyDefinition"||n.type==="TSDeclareMethod"||n.type==="TSPropertySignature"||n.type==="ObjectTypeProperty"||n.type==="ImportAttribute")&&n.key&&!n.computed){let{key:c}=n;z(c)||Ce(c)?r.key=String(c.value):c.type==="Identifier"&&(r.key=c.name)}if(n.type==="JSXElement"&&n.openingElement.name.name==="style"&&n.openingElement.attributes.some(c=>c.type==="JSXAttribute"&&c.name.name==="jsx"))for(let{type:c,expression:p}of r.children)c==="JSXExpressionContainer"&&p.type==="TemplateLiteral"&&Wt(p);n.type==="JSXAttribute"&&n.name.name==="css"&&n.value.type==="JSXExpressionContainer"&&n.value.expression.type==="TemplateLiteral"&&Wt(r.value.expression),n.type==="JSXAttribute"&&((s=n.value)==null?void 0:s.type)==="Literal"&&/["']|&quot;|&apos;/.test(n.value.value)&&(r.value.value=Q(!1,n.value.value,/["']|&quot;|&apos;/g,'"'));let u=n.expression||n.callee;if(n.type==="Decorator"&&u.type==="CallExpression"&&u.callee.name==="Component"&&u.arguments.length===1){let c=n.expression.arguments[0].properties;for(let[p,d]of r.expression.arguments[0].properties.entries())switch(c[p].key.name){case"styles":U(d.value)&&Wt(d.value.elements[0]);break;case"template":d.value.type==="TemplateLiteral"&&Wt(d.value);break}}n.type==="TaggedTemplateExpression"&&(n.tag.type==="MemberExpression"||n.tag.type==="Identifier"&&(n.tag.name==="gql"||n.tag.name==="graphql"||n.tag.name==="css"||n.tag.name==="md"||n.tag.name==="markdown"||n.tag.name==="html")||n.tag.type==="CallExpression")&&Wt(r.quasi),n.type==="TemplateLiteral"&&((o=n.leadingComments)!=null&&o.some(c=>re(c)&&["GraphQL","HTML"].some(p=>c.value===` ${p} `))||a.type==="CallExpression"&&a.callee.name==="graphql"||!n.leadingComments)&&Wt(r),n.type==="ChainExpression"&&n.expression.type==="TSNonNullExpression"&&(r.type="TSNonNullExpression",r.expression.type="ChainExpression")}Cu.ignoredProperties=Io;var Au=Cu,rt="string",_e="array",nt="cursor",Xe="indent",Ye="align",st="trim",le="group",Pe="fill",xe="if-break",He="indent-if-break",Ve="line-suffix",$e="line-suffix-boundary",me="line",ve="label",je="break-parent",Mr=new Set([nt,Xe,Ye,st,le,Pe,xe,He,Ve,$e,me,ve,je]);function Lo(n){if(typeof n=="string")return rt;if(Array.isArray(n))return _e;if(!n)return;let{type:r}=n;if(Mr.has(r))return r}var ut=Lo,wo=n=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(n);function Oo(n){let r=n===null?"null":typeof n;if(r!=="string"&&r!=="object")return`Unexpected doc '${r}', 
Expected it to be 'string' or 'object'.`;if(ut(n))throw new Error("doc is valid.");let a=Object.prototype.toString.call(n);if(a!=="[object Object]")return`Unexpected doc '${a}'.`;let s=wo([...Mr].map(o=>`'${o}'`));return`Unexpected doc.type '${n.type}'.
Expected it to be ${s}.`}var Gn=class extends Error{constructor(r){super(Oo(r));Zp(this,"name","InvalidDocError");this.doc=r}},Ct=Gn,du={};function _o(n,r,a,s){let o=[n];for(;o.length>0;){let u=o.pop();if(u===du){a(o.pop());continue}a&&o.push(u,du);let c=ut(u);if(!c)throw new Ct(u);if((r==null?void 0:r(u))!==!1)switch(c){case _e:case Pe:{let p=c===_e?u:u.parts;for(let d=p.length,_=d-1;_>=0;--_)o.push(p[_]);break}case xe:o.push(u.flatContents,u.breakContents);break;case le:if(s&&u.expandedStates)for(let p=u.expandedStates.length,d=p-1;d>=0;--d)o.push(u.expandedStates[d]);else o.push(u.contents);break;case Ye:case Xe:case He:case ve:case Ve:o.push(u.contents);break;case rt:case nt:case st:case $e:case me:case je:break;default:throw new Ct(u)}}}var Un=_o,Tu=()=>{},Rr=Tu;function f(n){return{type:Xe,contents:n}}function he(n,r){return{type:Ye,contents:r,n}}function l(n,r={}){return Rr(r.expandedStates),{type:le,id:r.id,contents:n,break:!!r.shouldBreak,expandedStates:r.expandedStates}}function xu(n){return he(Number.NEGATIVE_INFINITY,n)}function Jr(n){return he(-1,n)}function ze(n,r){return l(n[0],{...r,expandedStates:n})}function Gt(n){return{type:Pe,parts:n}}function b(n,r="",a={}){return{type:xe,breakContents:n,flatContents:r,groupId:a.groupId}}function At(n,r){return{type:He,contents:n,groupId:r.groupId,negate:r.negate}}function Nn(n){return{type:Ve,contents:n}}var ke={type:$e},Ee={type:je},Xn={type:me,hard:!0},vo={type:me,hard:!0,literal:!0},x={type:me},E={type:me,soft:!0},F=[Xn,Ee],qr=[vo,Ee],Yn={type:nt};function P(n,r){let a=[];for(let s=0;s<r.length;s++)s!==0&&a.push(n),a.push(r[s]);return a}function hu(n,r,a){let s=n;if(r>0){for(let o=0;o<Math.floor(r/a);++o)s=f(s);s=he(r%a,s),s=he(Number.NEGATIVE_INFINITY,s)}return s}function it(n,r){return n?{type:ve,label:n,contents:r}:r}function mt(n,r){if(typeof n=="string")return r(n);let a=new Map;return s(n);function s(u){if(a.has(u))return a.get(u);let c=o(u);return a.set(u,c),c}function o(u){switch(ut(u)){case _e:return r(u.map(s));case Pe:return r({...u,parts:u.parts.map(s)});case xe:return r({...u,breakContents:s(u.breakContents),flatContents:s(u.flatContents)});case le:{let{expandedStates:c,contents:p}=u;return c?(c=c.map(s),p=c[0]):p=s(p),r({...u,contents:p,expandedStates:c})}case Ye:case Xe:case He:case ve:case Ve:return r({...u,contents:s(u.contents)});case rt:case nt:case st:case $e:case me:case je:return r(u);default:throw new Ct(u)}}}function Su(n,r,a){let s=a,o=!1;function u(c){if(o)return!1;let p=r(c);p!==void 0&&(o=!0,s=p)}return Un(n,u),s}function jo(n){if(n.type===le&&n.break||n.type===me&&n.hard||n.type===je)return!0}function ne(n){return Su(n,jo,!1)}function gu(n){if(n.length>0){let r=O(!1,n,-1);!r.expandedStates&&!r.break&&(r.break="propagated")}return null}function Bu(n){let r=new Set,a=[];function s(u){if(u.type===je&&gu(a),u.type===le){if(a.push(u),r.has(u))return!1;r.add(u)}}function o(u){u.type===le&&a.pop().break&&gu(a)}Un(n,s,o,!0)}function Mo(n){return n.type===me&&!n.hard?n.soft?"":" ":n.type===xe?n.flatContents:n}function ar(n){return mt(n,Mo)}function Ro(n){switch(ut(n)){case Pe:if(n.parts.every(r=>r===""))return"";break;case le:if(!n.contents&&!n.id&&!n.break&&!n.expandedStates)return"";if(n.contents.type===le&&n.contents.id===n.id&&n.contents.break===n.break&&n.contents.expandedStates===n.expandedStates)return n.contents;break;case Ye:case Xe:case He:case Ve:if(!n.contents)return"";break;case xe:if(!n.flatContents&&!n.breakContents)return"";break;case _e:{let r=[];for(let a of n){if(!a)continue;let[s,...o]=Array.isArray(a)?a:[a];typeof s=="string"&&typeof O(!1,r,-1)=="string"?r[r.length-1]+=s:r.push(s),r.push(...o)}return r.length===0?"":r.length===1?r[0]:r}case rt:case nt:case st:case $e:case me:case ve:case je:break;default:throw new Ct(n)}return n}function Ut(n){return mt(n,r=>Ro(r))}function Ie(n,r=qr){return mt(n,a=>typeof a=="string"?P(r,a.split(`
`)):a)}function Jo(n){if(n.type===me)return!0}function bu(n){return Su(n,Jo,!1)}function or(n,r){return n.type===ve?{...n,contents:r(n.contents)}:r(n)}function qo(n){let r=`*${n.value}*`.split(`
`);return r.length>1&&r.every(a=>a.trimStart()[0]==="*")}var Pu=qo;function ku(n,r){let a=n.node;if(Rt(a))return r.originalText.slice(R(a),k(a)).trimEnd();if(re(a))return Pu(a)?Wo(a):["/*",Ie(a.value),"*/"];throw new Error("Not a comment: "+JSON.stringify(a))}function Wo(n){let r=n.value.split(`
`);return["/*",P(F,r.map((a,s)=>s===0?a.trimEnd():" "+(s<r.length-1?a.trim():a.trimStart()))),"*/"]}var Zn={};Tr(Zn,{endOfLine:()=>Vo,ownLine:()=>Ho,remaining:()=>$o});function Go(n){let r=n.type||n.kind||"(unknown type)",a=String(n.name||n.id&&(typeof n.id=="object"?n.id.name:n.id)||n.key&&(typeof n.key=="object"?n.key.name:n.key)||n.value&&(typeof n.value=="object"?"":String(n.value))||n.operator||"");return a.length>20&&(a=a.slice(0,19)+"…"),r+(a?" "+a:"")}function Hn(n,r){(n.comments??(n.comments=[])).push(r),r.printed=!1,r.nodeDescription=Go(n)}function ce(n,r){r.leading=!0,r.trailing=!1,Hn(n,r)}function Le(n,r,a){r.leading=!1,r.trailing=!1,a&&(r.marker=a),Hn(n,r)}function K(n,r){r.leading=!1,r.trailing=!0,Hn(n,r)}function Uo(n,r){let a=null,s=r;for(;s!==a;)a=s,s=Ge(n,s),s=Ot(n,s),s=_t(n,s),s=Ue(n,s);return s}var yt=Uo;function No(n,r){let a=yt(n,r);return a===!1?"":n.charAt(a)}var ge=No;function Xo(n,r,a){for(let s=r;s<a;++s)if(n.charAt(s)===`
`)return!0;return!1}var Te=Xo;function Yo(n){return re(n)&&n.value[0]==="*"&&/@(?:type|satisfies)\b/.test(n.value)}var Iu=Yo;function Ho(n){return[Ru,wu,vu,ip,zo,$n,Kn,Lu,Ou,cp,op,Qn,Mu,lp,_u,ju,zn,Qo,Ap].some(r=>r(n))}function Vo(n){return[Ko,vu,wu,Mu,$n,Kn,Lu,Ou,ju,ap,pp,Qn,Dp,zn,Fp,Cp].some(r=>r(n))}function $o(n){return[Ru,$n,Kn,Zo,up,_u,Qn,sp,np,Ep,zn,fp].some(r=>r(n))}function Pt(n,r){let a=(n.body||n.properties).find(({type:s})=>s!=="EmptyStatement");a?ce(a,r):Le(n,r)}function Vn(n,r){n.type==="BlockStatement"?Pt(n,r):ce(n,r)}function Ko({comment:n,followingNode:r}){return r&&Iu(n)?(ce(r,n),!0):!1}function $n({comment:n,precedingNode:r,enclosingNode:a,followingNode:s,text:o}){if((a==null?void 0:a.type)!=="IfStatement"||!s)return!1;if(ge(o,k(n))===")")return K(r,n),!0;if(r===a.consequent&&s===a.alternate){if(r.type==="BlockStatement")K(r,n);else{let u=Rt(n)||n.loc.start.line===n.loc.end.line,c=n.loc.start.line===r.loc.start.line;u&&c?K(r,n):Le(a,n)}return!0}return s.type==="BlockStatement"?(Pt(s,n),!0):s.type==="IfStatement"?(Vn(s.consequent,n),!0):a.consequent===s?(ce(s,n),!0):!1}function Kn({comment:n,precedingNode:r,enclosingNode:a,followingNode:s,text:o}){return(a==null?void 0:a.type)!=="WhileStatement"||!s?!1:ge(o,k(n))===")"?(K(r,n),!0):s.type==="BlockStatement"?(Pt(s,n),!0):a.body===s?(ce(s,n),!0):!1}function Lu({comment:n,precedingNode:r,enclosingNode:a,followingNode:s}){return(a==null?void 0:a.type)!=="TryStatement"&&(a==null?void 0:a.type)!=="CatchClause"||!s?!1:a.type==="CatchClause"&&r?(K(r,n),!0):s.type==="BlockStatement"?(Pt(s,n),!0):s.type==="TryStatement"?(Vn(s.finalizer,n),!0):s.type==="CatchClause"?(Vn(s.body,n),!0):!1}function zo({comment:n,enclosingNode:r,followingNode:a}){return q(r)&&(a==null?void 0:a.type)==="Identifier"?(ce(r,n),!0):!1}function Qo({comment:n,enclosingNode:r,followingNode:a,options:s}){return!s.experimentalTernaries||!((r==null?void 0:r.type)==="ConditionalExpression"||(r==null?void 0:r.type)==="ConditionalTypeAnnotation"||(r==null?void 0:r.type)==="TSConditionalType")?!1:(a==null?void 0:a.type)==="ConditionalExpression"||(a==null?void 0:a.type)==="ConditionalTypeAnnotation"||(a==null?void 0:a.type)==="TSConditionalType"?(Le(r,n),!0):!1}function wu({comment:n,precedingNode:r,enclosingNode:a,followingNode:s,text:o,options:u}){let c=r&&!Te(o,k(r),R(n));return(!r||!c)&&((a==null?void 0:a.type)==="ConditionalExpression"||(a==null?void 0:a.type)==="ConditionalTypeAnnotation"||(a==null?void 0:a.type)==="TSConditionalType")&&s?u.experimentalTernaries&&a.alternate===s&&!(re(n)&&!Te(u.originalText,R(n),k(n)))?(Le(a,n),!0):(ce(s,n),!0):!1}function Zo({comment:n,precedingNode:r,enclosingNode:a}){return Ae(a)&&a.shorthand&&a.key===r&&a.value.type==="AssignmentPattern"?(K(a.value.left,n),!0):!1}var ep=new Set(["ClassDeclaration","ClassExpression","DeclareClass","DeclareInterface","InterfaceDeclaration","TSInterfaceDeclaration"]);function Ou({comment:n,precedingNode:r,enclosingNode:a,followingNode:s}){if(ep.has(a==null?void 0:a.type)){if(L(a.decorators)&&(s==null?void 0:s.type)!=="Decorator")return K(O(!1,a.decorators,-1),n),!0;if(a.body&&s===a.body)return Pt(a.body,n),!0;if(s){if(a.superClass&&s===a.superClass&&r&&(r===a.id||r===a.typeParameters))return K(r,n),!0;for(let o of["implements","extends","mixins"])if(a[o]&&s===a[o][0])return r&&(r===a.id||r===a.typeParameters||r===a.superClass)?K(r,n):Le(a,n,o),!0}}return!1}var tp=new Set(["ClassMethod","ClassProperty","PropertyDefinition","TSAbstractPropertyDefinition","TSAbstractMethodDefinition","TSDeclareMethod","MethodDefinition","ClassAccessorProperty","AccessorProperty","TSAbstractAccessorProperty"]);function _u({comment:n,precedingNode:r,enclosingNode:a,text:s}){return a&&r&&ge(s,k(n))==="("&&(a.type==="Property"||a.type==="TSDeclareMethod"||a.type==="TSAbstractMethodDefinition")&&r.type==="Identifier"&&a.key===r&&ge(s,k(r))!==":"||(r==null?void 0:r.type)==="Decorator"&&tp.has(a==null?void 0:a.type)?(K(r,n),!0):!1}var rp=new Set(["FunctionDeclaration","FunctionExpression","ClassMethod","MethodDefinition","ObjectMethod"]);function np({comment:n,precedingNode:r,enclosingNode:a,text:s}){return ge(s,k(n))!=="("?!1:r&&rp.has(a==null?void 0:a.type)?(K(r,n),!0):!1}function sp({comment:n,enclosingNode:r,text:a}){if((r==null?void 0:r.type)!=="ArrowFunctionExpression")return!1;let s=yt(a,k(n));return s!==!1&&a.slice(s,s+2)==="=>"?(Le(r,n),!0):!1}function up({comment:n,enclosingNode:r,text:a}){return ge(a,k(n))!==")"?!1:r&&(Ju(r)&&$(r).length===0||lt(r)&&ue(r).length===0)?(Le(r,n),!0):((r==null?void 0:r.type)==="MethodDefinition"||(r==null?void 0:r.type)==="TSAbstractMethodDefinition")&&$(r.value).length===0?(Le(r.value,n),!0):!1}function ip({comment:n,precedingNode:r,enclosingNode:a,followingNode:s,text:o}){return(r==null?void 0:r.type)==="ComponentTypeParameter"&&((a==null?void 0:a.type)==="DeclareComponent"||(a==null?void 0:a.type)==="ComponentTypeAnnotation")&&(s==null?void 0:s.type)!=="ComponentTypeParameter"||((r==null?void 0:r.type)==="ComponentParameter"||(r==null?void 0:r.type)==="RestElement")&&(a==null?void 0:a.type)==="ComponentDeclaration"&&ge(o,k(n))===")"?(K(r,n),!0):!1}function vu({comment:n,precedingNode:r,enclosingNode:a,followingNode:s,text:o}){return(r==null?void 0:r.type)==="FunctionTypeParam"&&(a==null?void 0:a.type)==="FunctionTypeAnnotation"&&(s==null?void 0:s.type)!=="FunctionTypeParam"||((r==null?void 0:r.type)==="Identifier"||(r==null?void 0:r.type)==="AssignmentPattern"||(r==null?void 0:r.type)==="ObjectPattern"||(r==null?void 0:r.type)==="ArrayPattern"||(r==null?void 0:r.type)==="RestElement"||(r==null?void 0:r.type)==="TSParameterProperty")&&Ju(a)&&ge(o,k(n))===")"?(K(r,n),!0):!re(n)&&((a==null?void 0:a.type)==="FunctionDeclaration"||(a==null?void 0:a.type)==="FunctionExpression"||(a==null?void 0:a.type)==="ObjectMethod")&&(s==null?void 0:s.type)==="BlockStatement"&&a.body===s&&yt(o,k(n))===R(s)?(Pt(s,n),!0):!1}function ju({comment:n,enclosingNode:r}){return(r==null?void 0:r.type)==="LabeledStatement"?(ce(r,n),!0):!1}function zn({comment:n,enclosingNode:r}){return((r==null?void 0:r.type)==="ContinueStatement"||(r==null?void 0:r.type)==="BreakStatement")&&!r.label?(K(r,n),!0):!1}function ap({comment:n,precedingNode:r,enclosingNode:a}){return w(a)&&r&&a.callee===r&&a.arguments.length>0?(ce(a.arguments[0],n),!0):!1}function op({comment:n,precedingNode:r,enclosingNode:a,followingNode:s}){return Ne(a)?(ir(n)&&(s.prettierIgnore=!0,n.unignore=!0),r?(K(r,n),!0):!1):(Ne(s)&&ir(n)&&(s.types[0].prettierIgnore=!0,n.unignore=!0),!1)}function pp({comment:n,enclosingNode:r}){return Ae(r)?(ce(r,n),!0):!1}function Qn({comment:n,enclosingNode:r,ast:a,isLastComment:s}){var o;return((o=a==null?void 0:a.body)==null?void 0:o.length)===0?(s?Le(a,n):ce(a,n),!0):(r==null?void 0:r.type)==="Program"&&r.body.length===0&&!L(r.directives)?(s?Le(r,n):ce(r,n),!0):!1}function cp({comment:n,enclosingNode:r}){return(r==null?void 0:r.type)==="ForInStatement"||(r==null?void 0:r.type)==="ForOfStatement"?(ce(r,n),!0):!1}function Mu({comment:n,precedingNode:r,enclosingNode:a,text:s}){if((a==null?void 0:a.type)==="ImportSpecifier"||(a==null?void 0:a.type)==="ExportSpecifier")return ce(a,n),!0;let o=(r==null?void 0:r.type)==="ImportSpecifier"&&(a==null?void 0:a.type)==="ImportDeclaration",u=(r==null?void 0:r.type)==="ExportSpecifier"&&(a==null?void 0:a.type)==="ExportNamedDeclaration";return(o||u)&&te(s,k(n))?(K(r,n),!0):!1}function lp({comment:n,enclosingNode:r}){return(r==null?void 0:r.type)==="AssignmentPattern"?(ce(r,n),!0):!1}var mp=new Set(["VariableDeclarator","AssignmentExpression","TypeAlias","TSTypeAliasDeclaration"]),yp=new Set(["ObjectExpression","RecordExpression","ArrayExpression","TupleExpression","TemplateLiteral","TaggedTemplateExpression","ObjectTypeAnnotation","TSTypeLiteral"]);function Dp({comment:n,enclosingNode:r,followingNode:a}){return mp.has(r==null?void 0:r.type)&&a&&(yp.has(a.type)||re(n))?(ce(a,n),!0):!1}function fp({comment:n,enclosingNode:r,followingNode:a,text:s}){return!a&&((r==null?void 0:r.type)==="TSMethodSignature"||(r==null?void 0:r.type)==="TSDeclareFunction"||(r==null?void 0:r.type)==="TSAbstractMethodDefinition")&&ge(s,k(n))===";"?(K(r,n),!0):!1}function Ru({comment:n,enclosingNode:r,followingNode:a}){if(ir(n)&&(r==null?void 0:r.type)==="TSMappedType"&&(a==null?void 0:a.type)==="TSTypeParameter"&&a.constraint)return r.prettierIgnore=!0,n.unignore=!0,!0}function Ep({comment:n,precedingNode:r,enclosingNode:a,followingNode:s}){return(a==null?void 0:a.type)!=="TSMappedType"?!1:(s==null?void 0:s.type)==="TSTypeParameter"&&s.name?(ce(s.name,n),!0):(r==null?void 0:r.type)==="TSTypeParameter"&&r.constraint?(K(r.constraint,n),!0):!1}function Fp({comment:n,enclosingNode:r,followingNode:a}){return!r||r.type!=="SwitchCase"||r.test||!a||a!==r.consequent[0]?!1:(a.type==="BlockStatement"&&Rt(n)?Pt(a,n):Le(r,n),!0)}function Cp({comment:n,precedingNode:r,enclosingNode:a,followingNode:s}){return Ne(r)&&((a.type==="TSArrayType"||a.type==="ArrayTypeAnnotation")&&!s||jr(a))?(K(O(!1,r.types,-1),n),!0):!1}function Ap({comment:n,enclosingNode:r,precedingNode:a,followingNode:s}){if(((r==null?void 0:r.type)==="ObjectPattern"||(r==null?void 0:r.type)==="ArrayPattern")&&(s==null?void 0:s.type)==="TSTypeAnnotation")return a?K(a,n):Le(r,n),!0}var Ju=j(["ArrowFunctionExpression","FunctionExpression","FunctionDeclaration","ObjectMethod","ClassMethod","TSDeclareFunction","TSCallSignatureDeclaration","TSConstructSignatureDeclaration","TSMethodSignature","TSConstructorType","TSFunctionType","TSDeclareMethod"]),dp=new Set(["EmptyStatement","TemplateElement","Import","TSEmptyBodyFunctionExpression","ChainExpression"]);function Tp(n){return!dp.has(n.type)}function xp(n,r){var a;if((r.parser==="typescript"||r.parser==="flow"||r.parser==="acorn"||r.parser==="espree"||r.parser==="meriyah"||r.parser==="__babel_estree")&&n.type==="MethodDefinition"&&((a=n.value)==null?void 0:a.type)==="FunctionExpression"&&$(n.value).length===0&&!n.value.returnType&&!L(n.value.typeParameters)&&n.value.body)return[...n.decorators||[],n.key,n.value.body]}function es(n){let{node:r,parent:a}=n;return(N(r)||a&&(a.type==="JSXSpreadAttribute"||a.type==="JSXSpreadChild"||Ne(a)||(a.type==="ClassDeclaration"||a.type==="ClassExpression")&&a.superClass===r))&&(!bt(r)||Ne(a))}function hp(n,{parser:r}){if(r==="flow"||r==="babel-flow")return n=Q(!1,n,/[\s(]/g,""),n===""||n==="/*"||n==="/*::"}function qu(n){switch(n){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}var Se=Symbol("MODE_BREAK"),at=Symbol("MODE_FLAT"),pr=Symbol("cursor");function Wu(){return{value:"",length:0,queue:[]}}function gp(n,r){return ts(n,{type:"indent"},r)}function Sp(n,r,a){return r===Number.NEGATIVE_INFINITY?n.root||Wu():r<0?ts(n,{type:"dedent"},a):r?r.type==="root"?{...n,root:n}:ts(n,{type:typeof r=="string"?"stringAlign":"numberAlign",n:r},a):n}function ts(n,r,a){let s=r.type==="dedent"?n.queue.slice(0,-1):[...n.queue,r],o="",u=0,c=0,p=0;for(let rc of s)switch(rc.type){case"indent":ja(),a.useTabs?d(1):_(a.tabWidth);break;case"stringAlign":ja(),o+=rc.n,u+=rc.n.length;break;case"numberAlign":c+=1,p+=rc.n;break;default:throw new Error(`Unexpected type '${rc.type}'`)}return ec(),{...n,value:o,length:u,queue:s};function d(rc){o+="	".repeat(rc),u+=a.tabWidth*rc}function _(rc){o+=" ".repeat(rc),u+=rc}function ja(){a.useTabs?Ja():ec()}function Ja(){c>0&&d(c),tc()}function ec(){p>0&&_(p),tc()}function tc(){c=0,p=0}}function rs(n){let r=0,a=0,s=n.length;e:for(;s--;){let o=n[s];if(o===pr){a++;continue}for(let u=o.length-1;u>=0;u--){let c=o[u];if(c===" "||c==="	")r++;else{n[s]=o.slice(0,u+1);break e}}}if(r>0||a>0)for(n.length=s+1;a-- >0;)n.push(pr);return r}function Wr(n,r,a,s,o,u){if(a===Number.POSITIVE_INFINITY)return!0;let c=r.length,p=[n],d=[];for(;a>=0;){if(p.length===0){if(c===0)return!0;p.push(r[--c]);continue}let{mode:_,doc:ja}=p.pop(),Ja=ut(ja);switch(Ja){case rt:d.push(ja),a-=et(ja);break;case _e:case Pe:{let ec=Ja===_e?ja:ja.parts;for(let tc=ec.length-1;tc>=0;tc--)p.push({mode:_,doc:ec[tc]});break}case Xe:case Ye:case He:case ve:p.push({mode:_,doc:ja.contents});break;case st:a+=rs(d);break;case le:{if(u&&ja.break)return!1;let ec=ja.break?Se:_,tc=ja.expandedStates&&ec===Se?O(!1,ja.expandedStates,-1):ja.contents;p.push({mode:ec,doc:tc});break}case xe:{let ec=(ja.groupId?o[ja.groupId]||at:_)===Se?ja.breakContents:ja.flatContents;ec&&p.push({mode:_,doc:ec});break}case me:if(_===Se||ja.hard)return!0;ja.soft||(d.push(" "),a--);break;case Ve:s=!0;break;case $e:if(s)return!1;break}}return!1}function ns(n,r){let a={},s=r.printWidth,o=qu(r.endOfLine),u=0,c=[{ind:Wu(),mode:Se,doc:n}],p=[],d=!1,_=[],ja=0;for(Bu(n);c.length>0;){let{ind:ec,mode:tc,doc:rc}=c.pop();switch(ut(rc)){case rt:{let nc=o!==`
`?Q(!1,rc,`
`,o):rc;p.push(nc),c.length>0&&(u+=et(nc));break}case _e:for(let nc=rc.length-1;nc>=0;nc--)c.push({ind:ec,mode:tc,doc:rc[nc]});break;case nt:if(ja>=2)throw new Error("There are too many 'cursor' in doc.");p.push(pr),ja++;break;case Xe:c.push({ind:gp(ec,r),mode:tc,doc:rc.contents});break;case Ye:c.push({ind:Sp(ec,rc.n,r),mode:tc,doc:rc.contents});break;case st:u-=rs(p);break;case le:switch(tc){case at:if(!d){c.push({ind:ec,mode:rc.break?Se:at,doc:rc.contents});break}case Se:{d=!1;let nc={ind:ec,mode:at,doc:rc.contents},ic=s-u,uc=_.length>0;if(!rc.break&&Wr(nc,c,ic,uc,a))c.push(nc);else if(rc.expandedStates){let eh=O(!1,rc.expandedStates,-1);if(rc.break){c.push({ind:ec,mode:Se,doc:eh});break}else for(let rh=1;rh<rc.expandedStates.length+1;rh++)if(rh>=rc.expandedStates.length){c.push({ind:ec,mode:Se,doc:eh});break}else{let ah=rc.expandedStates[rh],ih={ind:ec,mode:at,doc:ah};if(Wr(ih,c,ic,uc,a)){c.push(ih);break}}}else c.push({ind:ec,mode:Se,doc:rc.contents});break}}rc.id&&(a[rc.id]=O(!1,c,-1).mode);break;case Pe:{let nc=s-u,{parts:ic}=rc;if(ic.length===0)break;let[uc,eh]=ic,rh={ind:ec,mode:at,doc:uc},ah={ind:ec,mode:Se,doc:uc},ih=Wr(rh,[],nc,_.length>0,a,!0);if(ic.length===1){ih?c.push(rh):c.push(ah);break}let oh={ind:ec,mode:at,doc:eh},uh={ind:ec,mode:Se,doc:eh};if(ic.length===2){ih?c.push(oh,rh):c.push(uh,ah);break}ic.splice(0,2);let ch={ind:ec,mode:tc,doc:Gt(ic)},hh=ic[0];Wr({ind:ec,mode:at,doc:[uc,eh,hh]},[],nc,_.length>0,a,!0)?c.push(ch,oh,rh):ih?c.push(ch,uh,rh):c.push(ch,uh,ah);break}case xe:case He:{let nc=rc.groupId?a[rc.groupId]:tc;if(nc===Se){let ic=rc.type===xe?rc.breakContents:rc.negate?rc.contents:f(rc.contents);ic&&c.push({ind:ec,mode:tc,doc:ic})}if(nc===at){let ic=rc.type===xe?rc.flatContents:rc.negate?f(rc.contents):rc.contents;ic&&c.push({ind:ec,mode:tc,doc:ic})}break}case Ve:_.push({ind:ec,mode:tc,doc:rc.contents});break;case $e:_.length>0&&c.push({ind:ec,mode:tc,doc:Xn});break;case me:switch(tc){case at:if(rc.hard)d=!0;else{rc.soft||(p.push(" "),u+=1);break}case Se:if(_.length>0){c.push({ind:ec,mode:tc,doc:rc},..._.reverse()),_.length=0;break}rc.literal?ec.root?(p.push(o,ec.root.value),u=ec.root.length):(p.push(o),u=0):(u-=rs(p),p.push(o+ec.value),u=ec.length);break}break;case ve:c.push({ind:ec,mode:tc,doc:rc.contents});break;case je:break;default:throw new Ct(rc)}c.length===0&&_.length>0&&(c.push(..._.reverse()),_.length=0)}let Ja=p.indexOf(pr);if(Ja!==-1){let ec=p.indexOf(pr,Ja+1),tc=p.slice(0,Ja).join(""),rc=p.slice(Ja+1,ec).join(""),nc=p.slice(ec+1).join("");return{formatted:tc+rc+nc,cursorNodeStart:tc.length,cursorNodeText:rc}}return{formatted:p.join("")}}function Bp(n,r,a=0){let s=0;for(let o=a;o<n.length;++o)n[o]==="	"?s=s+r-s%r:s++;return s}var Gu=Bp;function bp(n,r){let a=n.lastIndexOf(`
`);return a===-1?0:Gu(n.slice(a+1).match(/^[\t ]*/)[0],r)}var Uu=bp;function Gr(n,r,a){let{node:s}=n;if(s.type==="TemplateLiteral"&&Ip(n)){let d=Pp(n,a,r);if(d)return d}let o="expressions";s.type==="TSTemplateLiteralType"&&(o="types");let u=[],c=n.map(r,o);u.push(ke,"`");let p=0;return n.each(({index:d,node:_})=>{if(u.push(r()),_.tail)return;let{tabWidth:ja}=a,Ja=_.value.raw,ec=Ja.includes(`
`)?Uu(Ja,ja):p;p=ec;let tc=c[d],rc=s[o][d],nc=Te(a.originalText,k(_),R(s.quasis[d+1]));if(!nc){let uc=ns(tc,{...a,printWidth:Number.POSITIVE_INFINITY}).formatted;uc.includes(`
`)?nc=!0:tc=uc}nc&&(T(rc)||rc.type==="Identifier"||q(rc)||rc.type==="ConditionalExpression"||rc.type==="SequenceExpression"||de(rc)||De(rc))&&(tc=[f([E,tc]),E]);let ic=ec===0&&Ja.endsWith(`
`)?he(Number.NEGATIVE_INFINITY,tc):hu(tc,ec,ja);u.push(l(["${",ic,ke,"}"]))},"quasis"),u.push("`"),u}function Nu(n){let r=n("quasi");return it(r.label&&{tagged:!0,...r.label},[n("tag"),n("typeParameters"),ke,r])}function Pp(n,r,a){let{node:s}=n,o=s.quasis[0].value.raw.trim().split(/\s*\|\s*/);if(o.length>1||o.some(u=>u.length>0)){r.__inJestEach=!0;let u=n.map(a,"expressions");r.__inJestEach=!1;let c=[],p=u.map(ec=>"${"+ns(ec,{...r,printWidth:Number.POSITIVE_INFINITY,endOfLine:"lf"}).formatted+"}"),d=[{hasLineBreak:!1,cells:[]}];for(let ec=1;ec<s.quasis.length;ec++){let tc=O(!1,d,-1),rc=p[ec-1];tc.cells.push(rc),rc.includes(`
`)&&(tc.hasLineBreak=!0),s.quasis[ec].value.raw.includes(`
`)&&d.push({hasLineBreak:!1,cells:[]})}let _=Math.max(o.length,...d.map(ec=>ec.cells.length)),ja=Array.from({length:_}).fill(0),Ja=[{cells:o},...d.filter(ec=>ec.cells.length>0)];for(let{cells:ec}of Ja.filter(tc=>!tc.hasLineBreak))for(let[tc,rc]of ec.entries())ja[tc]=Math.max(ja[tc],et(rc));return c.push(ke,"`",f([F,P(F,Ja.map(ec=>P(" | ",ec.cells.map((tc,rc)=>ec.hasLineBreak?tc:tc+" ".repeat(ja[rc]-et(tc))))))]),F,"`"),c}}function kp(n,r){let{node:a}=n,s=r();return T(a)&&(s=l([f([E,s]),E])),["${",s,ke,"}"]}function Nt(n,r){return n.map(a=>kp(a,r),"expressions")}function Ur(n,r){return mt(n,a=>typeof a=="string"?r?Q(!1,a,/(\\*)`/g,"$1$1\\`"):ss(a):a)}function ss(n){return Q(!1,n,/([\\`]|\${)/g,String.raw`\$1`)}function Ip({node:n,parent:r}){let a=/^[fx]?(?:describe|it|test)$/;return r.type==="TaggedTemplateExpression"&&r.quasi===n&&r.tag.type==="MemberExpression"&&r.tag.property.type==="Identifier"&&r.tag.property.name==="each"&&(r.tag.object.type==="Identifier"&&a.test(r.tag.object.name)||r.tag.object.type==="MemberExpression"&&r.tag.object.property.type==="Identifier"&&(r.tag.object.property.name==="only"||r.tag.object.property.name==="skip")&&r.tag.object.object.type==="Identifier"&&a.test(r.tag.object.object.name))}var is=[(n,r)=>n.type==="ObjectExpression"&&r==="properties",(n,r)=>n.type==="CallExpression"&&n.callee.type==="Identifier"&&n.callee.name==="Component"&&r==="arguments",(n,r)=>n.type==="Decorator"&&r==="expression"];function Xu(n){let r=s=>s.type==="TemplateLiteral",a=(s,o)=>Ae(s)&&!s.computed&&s.key.type==="Identifier"&&s.key.name==="styles"&&o==="value";return n.match(r,(s,o)=>U(s)&&o==="elements",a,...is)||n.match(r,a,...is)}function Yu(n){return n.match(r=>r.type==="TemplateLiteral",(r,a)=>Ae(r)&&!r.computed&&r.key.type==="Identifier"&&r.key.name==="template"&&a==="value",...is)}function us(n,r){return T(n,g.Block|g.Leading,({value:a})=>a===` ${r} `)}function Nr({node:n,parent:r},a){return us(n,a)||Lp(r)&&us(r,a)||r.type==="ExpressionStatement"&&us(r,a)}function Lp(n){return n.type==="AsConstExpression"||n.type==="TSAsExpression"&&n.typeAnnotation.type==="TSTypeReference"&&n.typeAnnotation.typeName.type==="Identifier"&&n.typeAnnotation.typeName.name==="const"}async function wp(n,r,a){let{node:s}=a,o=s.quasis.map(ja=>ja.value.raw),u=0,c=o.reduce((ja,Ja,ec)=>ec===0?Ja:ja+"@prettier-placeholder-"+u+++"-id"+Ja,""),p=await n(c,{parser:"scss"}),d=Nt(a,r),_=Op(p,d);if(!_)throw new Error("Couldn't insert all the expressions");return["`",f([F,_]),E,"`"]}function Op(n,r){if(!L(r))return n;let a=0,s=mt(Ut(n),o=>typeof o!="string"||!o.includes("@prettier-placeholder")?o:o.split(/@prettier-placeholder-(\d+)-id/).map((u,c)=>c%2===0?Ie(u):(a++,r[u])));return r.length===a?s:null}function _p({node:n,parent:r,grandparent:a}){return a&&n.quasis&&r.type==="JSXExpressionContainer"&&a.type==="JSXElement"&&a.openingElement.name.name==="style"&&a.openingElement.attributes.some(s=>s.type==="JSXAttribute"&&s.name.name==="jsx")||(r==null?void 0:r.type)==="TaggedTemplateExpression"&&r.tag.type==="Identifier"&&r.tag.name==="css"||(r==null?void 0:r.type)==="TaggedTemplateExpression"&&r.tag.type==="MemberExpression"&&r.tag.object.name==="css"&&(r.tag.property.name==="global"||r.tag.property.name==="resolve")}function Xr(n){return n.type==="Identifier"&&n.name==="styled"}function Hu(n){return/^[A-Z]/.test(n.object.name)&&n.property.name==="extend"}function vp({parent:n}){if(!n||n.type!=="TaggedTemplateExpression")return!1;let r=n.tag.type==="ParenthesizedExpression"?n.tag.expression:n.tag;switch(r.type){case"MemberExpression":return Xr(r.object)||Hu(r);case"CallExpression":return Xr(r.callee)||r.callee.type==="MemberExpression"&&(r.callee.object.type==="MemberExpression"&&(Xr(r.callee.object.object)||Hu(r.callee.object))||r.callee.object.type==="CallExpression"&&Xr(r.callee.object.callee));case"Identifier":return r.name==="css";default:return!1}}function jp({parent:n,grandparent:r}){return(r==null?void 0:r.type)==="JSXAttribute"&&n.type==="JSXExpressionContainer"&&r.name.type==="JSXIdentifier"&&r.name.name==="css"}function Mp(n){if(_p(n)||vp(n)||jp(n)||Xu(n))return wp}var Vu=Mp;async function Rp(n,r,a){let{node:s}=a,o=s.quasis.length,u=Nt(a,r),c=[];for(let p=0;p<o;p++){let d=s.quasis[p],_=p===0,ja=p===o-1,Ja=d.value.cooked,ec=Ja.split(`
`),tc=ec.length,rc=u[p],nc=tc>2&&ec[0].trim()===""&&ec[1].trim()==="",ic=tc>2&&ec[tc-1].trim()===""&&ec[tc-2].trim()==="",uc=ec.every(rh=>/^\s*(?:#[^\n\r]*)?$/.test(rh));if(!ja&&/#[^\n\r]*$/.test(ec[tc-1]))return null;let eh=null;uc?eh=Jp(ec):eh=await n(Ja,{parser:"graphql"}),eh?(eh=Ur(eh,!1),!_&&nc&&c.push(""),c.push(eh),!ja&&ic&&c.push("")):!_&&!ja&&nc&&c.push(""),rc&&c.push(rc)}return["`",f([F,P(F,c)]),F,"`"]}function Jp(n){let r=[],a=!1,s=n.map(o=>o.trim());for(let[o,u]of s.entries())u!==""&&(s[o-1]===""&&a?r.push([F,u]):r.push(u),a=!0);return r.length===0?null:P(F,r)}function qp({node:n,parent:r}){return Nr({node:n,parent:r},"GraphQL")||r&&(r.type==="TaggedTemplateExpression"&&(r.tag.type==="MemberExpression"&&r.tag.object.name==="graphql"&&r.tag.property.name==="experimental"||r.tag.type==="Identifier"&&(r.tag.name==="gql"||r.tag.name==="graphql"))||r.type==="CallExpression"&&r.callee.type==="Identifier"&&r.callee.name==="graphql")}function Wp(n){if(qp(n))return Rp}var $u=Wp,as=0;async function Ku(n,r,a,s,o){let{node:u}=s,c=as;as=as+1>>>0;let p=uc=>`PRETTIER_HTML_PLACEHOLDER_${uc}_${c}_IN_JS`,d=u.quasis.map((uc,eh,rh)=>eh===rh.length-1?uc.value.cooked:uc.value.cooked+p(eh)).join(""),_=Nt(s,a),ja=new RegExp(p(String.raw`(\d+)`),"g"),Ja=0,ec=await r(d,{parser:n,__onHtmlRoot(uc){Ja=uc.children.length}}),tc=mt(ec,uc=>{if(typeof uc!="string")return uc;let eh=[],rh=uc.split(ja);for(let ah=0;ah<rh.length;ah++){let ih=rh[ah];if(ah%2===0){ih&&(ih=ss(ih),o.__embeddedInHtml&&(ih=Q(!1,ih,/<\/(?=script\b)/gi,String.raw`<\/`)),eh.push(ih));continue}let oh=Number(ih);eh.push(_[oh])}return eh}),rc=/^\s/.test(d)?" ":"",nc=/\s$/.test(d)?" ":"",ic=o.htmlWhitespaceSensitivity==="ignore"?F:rc&&nc?x:null;return ic?l(["`",f([ic,l(tc)]),ic,"`"]):it({hug:!1},l(["`",rc,Ja>1?f(l(tc)):l(tc),nc,"`"]))}function Gp(n){return Nr(n,"HTML")||n.match(r=>r.type==="TemplateLiteral",(r,a)=>r.type==="TaggedTemplateExpression"&&r.tag.type==="Identifier"&&r.tag.name==="html"&&a==="quasi")}var Up=Ku.bind(void 0,"html"),Np=Ku.bind(void 0,"angular");function Xp(n){if(Gp(n))return Up;if(Yu(n))return Np}var zu=Xp;async function Yp(n,r,a){let{node:s}=a,o=Q(!1,s.quasis[0].value.raw,/((?:\\\\)*)\\`/g,(d,_)=>"\\".repeat(_.length/2)+"`"),u=Hp(o),c=u!=="";c&&(o=Q(!1,o,new RegExp(`^${u}`,"gm"),""));let p=Ur(await n(o,{parser:"markdown",__inJsTemplate:!0}),!0);return["`",c?f([E,p]):[qr,xu(p)],E,"`"]}function Hp(n){let r=n.match(/^([^\S\n]*)\S/m);return r===null?"":r[1]}function Vp(n){if($p(n))return Yp}function $p({node:n,parent:r}){return(r==null?void 0:r.type)==="TaggedTemplateExpression"&&n.quasis.length===1&&r.tag.type==="Identifier"&&(r.tag.name==="md"||r.tag.name==="markdown")}var Qu=Vp;function Kp(n){let{node:r}=n;if(r.type!=="TemplateLiteral"||zp(r))return;let a;for(let s of[Vu,$u,zu,Qu])if(a=s(n),!!a)return r.quasis.length===1&&r.quasis[0].value.raw.trim()===""?"``":async(...o)=>{let u=await a(...o);return u&&it({embed:!0,...u.label},u)}}function zp({quasis:n}){return n.some(({value:{cooked:r}})=>r===null)}var Zu=Kp,dt=Ha(ii());function ac(n){if(!n.startsWith("#!"))return"";let r=n.indexOf(`
`);return r===-1?n:n.slice(0,r)}var ai=ac;function oc(n){let r=ai(n);r&&(n=n.slice(r.length+1));let a=(0,dt.extract)(n),{pragmas:s,comments:o}=(0,dt.parseWithComments)(a);return{shebang:r,text:n,pragmas:s,comments:o}}function oi(n){let{shebang:r,text:a,pragmas:s,comments:o}=oc(n),u=(0,dt.strip)(a),c=(0,dt.print)({pragmas:{format:"",...s},comments:o.trimStart()});return(r?`${r}
`:"")+c+(u.startsWith(`
`)?`
`:`

`)+u}function pc(n,r){let{originalText:a,[Symbol.for("comments")]:s,locStart:o,locEnd:u,[Symbol.for("printedComments")]:c}=r,{node:p}=n,d=o(p),_=u(p);for(let ja of s)o(ja)>=d&&u(ja)<=_&&c.add(ja);return a.slice(d,_)}var pi=pc;function os(n,r){var a,s,o,u,c,p,d,_,ja;if(n.isRoot)return!1;let{node:Ja,key:ec,parent:tc}=n;if(r.__isInHtmlInterpolation&&!r.bracketSpacing&&yc(Ja)&&cr(n))return!0;if(cc(Ja))return!1;if(Ja.type==="Identifier"){if((a=Ja.extra)!=null&&a.parenthesized&&/^PRETTIER_HTML_PLACEHOLDER_\d+_\d+_IN_JS$/.test(Ja.name)||ec==="left"&&(Ja.name==="async"&&!tc.await||Ja.name==="let")&&tc.type==="ForOfStatement")return!0;if(Ja.name==="let"){let rc=(s=n.findAncestor(nc=>nc.type==="ForOfStatement"))==null?void 0:s.left;if(rc&&ae(rc,nc=>nc===Ja))return!0}if(ec==="object"&&Ja.name==="let"&&tc.type==="MemberExpression"&&tc.computed&&!tc.optional){let rc=n.findAncestor(ic=>ic.type==="ExpressionStatement"||ic.type==="ForStatement"||ic.type==="ForInStatement"),nc=rc?rc.type==="ExpressionStatement"?rc.expression:rc.type==="ForStatement"?rc.init:rc.left:void 0;if(nc&&ae(nc,ic=>ic===Ja))return!0}if(ec==="expression")switch(Ja.name){case"await":case"interface":case"module":case"using":case"yield":case"let":case"component":case"hook":case"type":{let rc=n.findAncestor(nc=>!de(nc));if(rc!==tc&&rc.type==="ExpressionStatement")return!0}}return!1}if(Ja.type==="ObjectExpression"||Ja.type==="FunctionExpression"||Ja.type==="ClassExpression"||Ja.type==="DoExpression"){let rc=(o=n.findAncestor(nc=>nc.type==="ExpressionStatement"))==null?void 0:o.expression;if(rc&&ae(rc,nc=>nc===Ja))return!0}if(Ja.type==="ObjectExpression"){let rc=(u=n.findAncestor(nc=>nc.type==="ArrowFunctionExpression"))==null?void 0:u.body;if(rc&&rc.type!=="SequenceExpression"&&rc.type!=="AssignmentExpression"&&ae(rc,nc=>nc===Ja))return!0}switch(tc.type){case"ParenthesizedExpression":return!1;case"ClassDeclaration":case"ClassExpression":if(ec==="superClass"&&(Ja.type==="ArrowFunctionExpression"||Ja.type==="AssignmentExpression"||Ja.type==="AwaitExpression"||Ja.type==="BinaryExpression"||Ja.type==="ConditionalExpression"||Ja.type==="LogicalExpression"||Ja.type==="NewExpression"||Ja.type==="ObjectExpression"||Ja.type==="SequenceExpression"||Ja.type==="TaggedTemplateExpression"||Ja.type==="UnaryExpression"||Ja.type==="UpdateExpression"||Ja.type==="YieldExpression"||Ja.type==="TSNonNullExpression"||Ja.type==="ClassExpression"&&L(Ja.decorators)))return!0;break;case"ExportDefaultDeclaration":return ci(n,r)||Ja.type==="SequenceExpression";case"Decorator":if(ec==="expression"){if(q(Ja)&&Ja.computed)return!0;let rc=!1,nc=!1,ic=Ja;for(;ic;)switch(ic.type){case"MemberExpression":nc=!0,ic=ic.object;break;case"CallExpression":if(nc||rc)return r.parser!=="typescript";rc=!0,ic=ic.callee;break;case"Identifier":return!1;case"TaggedTemplateExpression":return r.parser!=="typescript";default:return!0}return!0}break;case"TypeAnnotation":if(n.match(void 0,void 0,(rc,nc)=>nc==="returnType"&&rc.type==="ArrowFunctionExpression")&&mc(Ja))return!0;break;case"BinaryExpression":if(ec==="left"&&(tc.operator==="in"||tc.operator==="instanceof")&&Ja.type==="UnaryExpression")return!0;break}switch(Ja.type){case"UpdateExpression":if(tc.type==="UnaryExpression")return Ja.prefix&&(Ja.operator==="++"&&tc.operator==="+"||Ja.operator==="--"&&tc.operator==="-");case"UnaryExpression":switch(tc.type){case"UnaryExpression":return Ja.operator===tc.operator&&(Ja.operator==="+"||Ja.operator==="-");case"BindExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return ec==="object";case"TaggedTemplateExpression":return!0;case"NewExpression":case"CallExpression":case"OptionalCallExpression":return ec==="callee";case"BinaryExpression":return ec==="left"&&tc.operator==="**";case"TSNonNullExpression":return!0;default:return!1}case"BinaryExpression":if(tc.type==="UpdateExpression"||Ja.operator==="in"&&lc(n))return!0;if(Ja.operator==="|>"&&(c=Ja.extra)!=null&&c.parenthesized){let rc=n.grandparent;if(rc.type==="BinaryExpression"&&rc.operator==="|>")return!0}case"TSTypeAssertion":case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"LogicalExpression":switch(tc.type){case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return!de(Ja);case"ConditionalExpression":return de(Ja);case"CallExpression":case"NewExpression":case"OptionalCallExpression":return ec==="callee";case"ClassExpression":case"ClassDeclaration":return ec==="superClass";case"TSTypeAssertion":case"TaggedTemplateExpression":case"UnaryExpression":case"JSXSpreadAttribute":case"SpreadElement":case"BindExpression":case"AwaitExpression":case"TSNonNullExpression":case"UpdateExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return ec==="object";case"AssignmentExpression":case"AssignmentPattern":return ec==="left"&&(Ja.type==="TSTypeAssertion"||de(Ja));case"LogicalExpression":if(Ja.type==="LogicalExpression")return tc.operator!==Ja.operator;case"BinaryExpression":{let{operator:rc,type:nc}=Ja;if(!rc&&nc!=="TSTypeAssertion")return!0;let ic=rr(rc),uc=tc.operator,eh=rr(uc);return eh>ic||ec==="right"&&eh===ic||eh===ic&&!ur(uc,rc)?!0:eh<ic&&rc==="%"?uc==="+"||uc==="-":!!Du(uc)}default:return!1}case"SequenceExpression":switch(tc.type){case"ReturnStatement":return!1;case"ForStatement":return!1;case"ExpressionStatement":return ec!=="expression";case"ArrowFunctionExpression":return ec!=="body";default:return!0}case"YieldExpression":if(tc.type==="AwaitExpression"||tc.type==="TSTypeAssertion")return!0;case"AwaitExpression":switch(tc.type){case"TaggedTemplateExpression":case"UnaryExpression":case"LogicalExpression":case"SpreadElement":case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"BindExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return ec==="object";case"NewExpression":case"CallExpression":case"OptionalCallExpression":return ec==="callee";case"ConditionalExpression":return ec==="test";case"BinaryExpression":return!(!Ja.argument&&tc.operator==="|>");default:return!1}case"TSFunctionType":if(n.match(rc=>rc.type==="TSFunctionType",(rc,nc)=>nc==="typeAnnotation"&&rc.type==="TSTypeAnnotation",(rc,nc)=>nc==="returnType"&&rc.type==="ArrowFunctionExpression"))return!0;case"TSConditionalType":case"TSConstructorType":if(ec==="extendsType"&&tc.type==="TSConditionalType"){if(Ja.type==="TSConditionalType")return!0;let{typeAnnotation:rc}=Ja.returnType||Ja.typeAnnotation;if(rc.type==="TSTypePredicate"&&rc.typeAnnotation&&(rc=rc.typeAnnotation.typeAnnotation),rc.type==="TSInferType"&&rc.typeParameter.constraint)return!0}if(ec==="checkType"&&tc.type==="TSConditionalType")return!0;case"TSUnionType":case"TSIntersectionType":if((tc.type==="TSUnionType"||tc.type==="TSIntersectionType")&&tc.types.length>1&&(!Ja.types||Ja.types.length>1))return!0;case"TSInferType":if(Ja.type==="TSInferType"){if(tc.type==="TSRestType")return!1;if(ec==="types"&&(tc.type==="TSUnionType"||tc.type==="TSIntersectionType")&&Ja.typeParameter.type==="TSTypeParameter"&&Ja.typeParameter.constraint)return!0}case"TSTypeOperator":return tc.type==="TSArrayType"||tc.type==="TSOptionalType"||tc.type==="TSRestType"||ec==="objectType"&&tc.type==="TSIndexedAccessType"||tc.type==="TSTypeOperator"||tc.type==="TSTypeAnnotation"&&n.grandparent.type.startsWith("TSJSDoc");case"TSTypeQuery":return ec==="objectType"&&tc.type==="TSIndexedAccessType"||ec==="elementType"&&tc.type==="TSArrayType";case"TypeOperator":return tc.type==="ArrayTypeAnnotation"||tc.type==="NullableTypeAnnotation"||ec==="objectType"&&(tc.type==="IndexedAccessType"||tc.type==="OptionalIndexedAccessType")||tc.type==="TypeOperator";case"TypeofTypeAnnotation":return ec==="objectType"&&(tc.type==="IndexedAccessType"||tc.type==="OptionalIndexedAccessType")||ec==="elementType"&&tc.type==="ArrayTypeAnnotation";case"ArrayTypeAnnotation":return tc.type==="NullableTypeAnnotation";case"IntersectionTypeAnnotation":case"UnionTypeAnnotation":return tc.type==="TypeOperator"||tc.type==="ArrayTypeAnnotation"||tc.type==="NullableTypeAnnotation"||tc.type==="IntersectionTypeAnnotation"||tc.type==="UnionTypeAnnotation"||ec==="objectType"&&(tc.type==="IndexedAccessType"||tc.type==="OptionalIndexedAccessType");case"InferTypeAnnotation":case"NullableTypeAnnotation":return tc.type==="ArrayTypeAnnotation"||ec==="objectType"&&(tc.type==="IndexedAccessType"||tc.type==="OptionalIndexedAccessType");case"ComponentTypeAnnotation":case"FunctionTypeAnnotation":{if(Ja.type==="ComponentTypeAnnotation"&&(Ja.rendersType===null||Ja.rendersType===void 0))return!1;if(n.match(void 0,(nc,ic)=>ic==="typeAnnotation"&&nc.type==="TypeAnnotation",(nc,ic)=>ic==="returnType"&&nc.type==="ArrowFunctionExpression")||n.match(void 0,(nc,ic)=>ic==="typeAnnotation"&&nc.type==="TypePredicate",(nc,ic)=>ic==="typeAnnotation"&&nc.type==="TypeAnnotation",(nc,ic)=>ic==="returnType"&&nc.type==="ArrowFunctionExpression"))return!0;let rc=tc.type==="NullableTypeAnnotation"?n.grandparent:tc;return rc.type==="UnionTypeAnnotation"||rc.type==="IntersectionTypeAnnotation"||rc.type==="ArrayTypeAnnotation"||ec==="objectType"&&(rc.type==="IndexedAccessType"||rc.type==="OptionalIndexedAccessType")||ec==="checkType"&&tc.type==="ConditionalTypeAnnotation"||ec==="extendsType"&&tc.type==="ConditionalTypeAnnotation"&&((p=Ja.returnType)==null?void 0:p.type)==="InferTypeAnnotation"&&((d=Ja.returnType)==null?void 0:d.typeParameter.bound)||rc.type==="NullableTypeAnnotation"||tc.type==="FunctionTypeParam"&&tc.name===null&&$(Ja).some(nc=>{var ic;return((ic=nc.typeAnnotation)==null?void 0:ic.type)==="NullableTypeAnnotation"})}case"ConditionalTypeAnnotation":if(ec==="extendsType"&&tc.type==="ConditionalTypeAnnotation"&&Ja.type==="ConditionalTypeAnnotation"||ec==="checkType"&&tc.type==="ConditionalTypeAnnotation")return!0;case"OptionalIndexedAccessType":return ec==="objectType"&&tc.type==="IndexedAccessType";case"StringLiteral":case"NumericLiteral":case"Literal":if(typeof Ja.value=="string"&&tc.type==="ExpressionStatement"&&!tc.directive){let rc=n.grandparent;return rc.type==="Program"||rc.type==="BlockStatement"}return ec==="object"&&tc.type==="MemberExpression"&&typeof Ja.value=="number";case"AssignmentExpression":{let rc=n.grandparent;return ec==="body"&&tc.type==="ArrowFunctionExpression"?!0:ec==="key"&&(tc.type==="ClassProperty"||tc.type==="PropertyDefinition")&&tc.computed||(ec==="init"||ec==="update")&&tc.type==="ForStatement"?!1:tc.type==="ExpressionStatement"?Ja.left.type==="ObjectPattern":!(ec==="key"&&tc.type==="TSPropertySignature"||tc.type==="AssignmentExpression"||tc.type==="SequenceExpression"&&rc.type==="ForStatement"&&(rc.init===tc||rc.update===tc)||ec==="value"&&tc.type==="Property"&&rc.type==="ObjectPattern"&&rc.properties.includes(tc)||tc.type==="NGChainedExpression")}case"ConditionalExpression":switch(tc.type){case"TaggedTemplateExpression":case"UnaryExpression":case"SpreadElement":case"BinaryExpression":case"LogicalExpression":case"NGPipeExpression":case"ExportDefaultDeclaration":case"AwaitExpression":case"JSXSpreadAttribute":case"TSTypeAssertion":case"TypeCastExpression":case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"TSNonNullExpression":return!0;case"NewExpression":case"CallExpression":case"OptionalCallExpression":return ec==="callee";case"ConditionalExpression":return r.experimentalTernaries?!1:ec==="test";case"MemberExpression":case"OptionalMemberExpression":return ec==="object";default:return!1}case"FunctionExpression":switch(tc.type){case"NewExpression":case"CallExpression":case"OptionalCallExpression":return ec==="callee";case"TaggedTemplateExpression":return!0;default:return!1}case"ArrowFunctionExpression":switch(tc.type){case"BinaryExpression":return tc.operator!=="|>"||((_=Ja.extra)==null?void 0:_.parenthesized);case"NewExpression":case"CallExpression":case"OptionalCallExpression":return ec==="callee";case"MemberExpression":case"OptionalMemberExpression":return ec==="object";case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"TSNonNullExpression":case"BindExpression":case"TaggedTemplateExpression":case"UnaryExpression":case"LogicalExpression":case"AwaitExpression":case"TSTypeAssertion":return!0;case"ConditionalExpression":return ec==="test";default:return!1}case"ClassExpression":switch(tc.type){case"NewExpression":return ec==="callee";default:return!1}case"OptionalMemberExpression":case"OptionalCallExpression":case"CallExpression":case"MemberExpression":if(Dc(n))return!0;case"TaggedTemplateExpression":case"TSNonNullExpression":if(ec==="callee"&&(tc.type==="BindExpression"||tc.type==="NewExpression")){let rc=Ja;for(;rc;)switch(rc.type){case"CallExpression":case"OptionalCallExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":case"BindExpression":rc=rc.object;break;case"TaggedTemplateExpression":rc=rc.tag;break;case"TSNonNullExpression":rc=rc.expression;break;default:return!1}}return!1;case"BindExpression":return ec==="callee"&&(tc.type==="BindExpression"||tc.type==="NewExpression")||ec==="object"&&q(tc);case"NGPipeExpression":return!(tc.type==="NGRoot"||tc.type==="NGMicrosyntaxExpression"||tc.type==="ObjectProperty"&&!((ja=Ja.extra)!=null&&ja.parenthesized)||U(tc)||ec==="arguments"&&w(tc)||ec==="right"&&tc.type==="NGPipeExpression"||ec==="property"&&tc.type==="MemberExpression"||tc.type==="AssignmentExpression");case"JSXFragment":case"JSXElement":return ec==="callee"||ec==="left"&&tc.type==="BinaryExpression"&&tc.operator==="<"||!U(tc)&&tc.type!=="ArrowFunctionExpression"&&tc.type!=="AssignmentExpression"&&tc.type!=="AssignmentPattern"&&tc.type!=="BinaryExpression"&&tc.type!=="NewExpression"&&tc.type!=="ConditionalExpression"&&tc.type!=="ExpressionStatement"&&tc.type!=="JsExpressionRoot"&&tc.type!=="JSXAttribute"&&tc.type!=="JSXElement"&&tc.type!=="JSXExpressionContainer"&&tc.type!=="JSXFragment"&&tc.type!=="LogicalExpression"&&!w(tc)&&!Ae(tc)&&tc.type!=="ReturnStatement"&&tc.type!=="ThrowStatement"&&tc.type!=="TypeCastExpression"&&tc.type!=="VariableDeclarator"&&tc.type!=="YieldExpression";case"TSInstantiationExpression":return ec==="object"&&q(tc)}return!1}var cc=j(["BlockStatement","BreakStatement","ComponentDeclaration","ClassBody","ClassDeclaration","ClassMethod","ClassProperty","PropertyDefinition","ClassPrivateProperty","ContinueStatement","DebuggerStatement","DeclareComponent","DeclareClass","DeclareExportAllDeclaration","DeclareExportDeclaration","DeclareFunction","DeclareHook","DeclareInterface","DeclareModule","DeclareModuleExports","DeclareNamespace","DeclareVariable","DeclareEnum","DoWhileStatement","EnumDeclaration","ExportAllDeclaration","ExportDefaultDeclaration","ExportNamedDeclaration","ExpressionStatement","ForInStatement","ForOfStatement","ForStatement","FunctionDeclaration","HookDeclaration","IfStatement","ImportDeclaration","InterfaceDeclaration","LabeledStatement","MethodDefinition","ReturnStatement","SwitchStatement","ThrowStatement","TryStatement","TSDeclareFunction","TSEnumDeclaration","TSImportEqualsDeclaration","TSInterfaceDeclaration","TSModuleDeclaration","TSNamespaceExportDeclaration","TypeAlias","VariableDeclaration","WhileStatement","WithStatement"]);function lc(n){let r=0,{node:a}=n;for(;a;){let s=n.getParentNode(r++);if((s==null?void 0:s.type)==="ForStatement"&&s.init===a)return!0;a=s}return!1}function mc(n){return nr(n,r=>r.type==="ObjectTypeAnnotation"&&nr(r,a=>a.type==="FunctionTypeAnnotation"))}function yc(n){return se(n)}function cr(n){let{parent:r,key:a}=n;switch(r.type){case"NGPipeExpression":if(a==="arguments"&&n.isLast)return n.callParent(cr);break;case"ObjectProperty":if(a==="value")return n.callParent(()=>n.key==="properties"&&n.isLast);break;case"BinaryExpression":case"LogicalExpression":if(a==="right")return n.callParent(cr);break;case"ConditionalExpression":if(a==="alternate")return n.callParent(cr);break;case"UnaryExpression":if(r.prefix)return n.callParent(cr);break}return!1}function ci(n,r){let{node:a,parent:s}=n;return a.type==="FunctionExpression"||a.type==="ClassExpression"?s.type==="ExportDefaultDeclaration"||!os(n,r):!Mt(a)||s.type!=="ExportDefaultDeclaration"&&os(n,r)?!1:n.call(()=>ci(n,r),...Ir(a))}function Dc(n){let{node:r,parent:a,grandparent:s,key:o}=n;return!!((r.type==="OptionalMemberExpression"||r.type==="OptionalCallExpression")&&(o==="object"&&a.type==="MemberExpression"||o==="callee"&&(a.type==="CallExpression"||a.type==="NewExpression")||a.type==="TSNonNullExpression"&&s.type==="MemberExpression"&&s.object===a)||n.match(()=>r.type==="CallExpression"||r.type==="MemberExpression",(u,c)=>c==="expression"&&u.type==="ChainExpression")&&(n.match(void 0,void 0,(u,c)=>c==="callee"&&(u.type==="CallExpression"&&!u.optional||u.type==="NewExpression")||c==="object"&&u.type==="MemberExpression"&&!u.optional)||n.match(void 0,void 0,(u,c)=>c==="expression"&&u.type==="TSNonNullExpression",(u,c)=>c==="object"&&u.type==="MemberExpression"))||n.match(()=>r.type==="CallExpression"||r.type==="MemberExpression",(u,c)=>c==="expression"&&u.type==="TSNonNullExpression",(u,c)=>c==="expression"&&u.type==="ChainExpression",(u,c)=>c==="object"&&u.type==="MemberExpression"))}var Be=os;function fc(n,r){let a=r-1;a=Ge(n,a,{backwards:!0}),a=Ue(n,a,{backwards:!0}),a=Ge(n,a,{backwards:!0});let s=Ue(n,a,{backwards:!0});return a!==s}var li=fc,Ec=()=>!0;function ps(n,r){let a=n.node;return a.printed=!0,r.printer.printComment(n,r)}function Fc(n,r){var a;let s=n.node,o=[ps(n,r)],{printer:u,originalText:c,locStart:p,locEnd:d}=r;if((a=u.isBlockComment)!=null&&a.call(u,s)){let ja=te(c,d(s))?te(c,p(s),{backwards:!0})?F:x:" ";o.push(ja)}else o.push(F);let _=Ue(c,Ge(c,d(s)));return _!==!1&&te(c,_)&&o.push(F),o}function Cc(n,r,a){var s;let o=n.node,u=ps(n,r),{printer:c,originalText:p,locStart:d}=r,_=(s=c.isBlockComment)==null?void 0:s.call(c,o);if(a!=null&&a.hasLineSuffix&&!(a!=null&&a.isBlock)||te(p,d(o),{backwards:!0})){let ja=li(p,d(o));return{doc:Nn([F,ja?F:"",u]),isBlock:_,hasLineSuffix:!0}}return!_||a!=null&&a.hasLineSuffix?{doc:[Nn([" ",u]),Ee],isBlock:_,hasLineSuffix:!0}:{doc:[" ",u],isBlock:_,hasLineSuffix:!1}}function M(n,r,a={}){let{node:s}=n;if(!L(s==null?void 0:s.comments))return"";let{indent:o=!1,marker:u,filter:c=Ec}=a,p=[];if(n.each(({node:_})=>{_.leading||_.trailing||_.marker!==u||!c(_)||p.push(ps(n,r))},"comments"),p.length===0)return"";let d=P(F,p);return o?f([F,d]):d}function cs(n,r){let a=n.node;if(!a)return{};let s=r[Symbol.for("printedComments")];if((a.comments||[]).filter(p=>!s.has(p)).length===0)return{leading:"",trailing:""};let o=[],u=[],c;return n.each(()=>{let p=n.node;if(s!=null&&s.has(p))return;let{leading:d,trailing:_}=p;d?o.push(Fc(n,r)):_&&(c=Cc(n,r,c),u.push(c.doc))},"comments"),{leading:o,trailing:u}}function ye(n,r,a){let{leading:s,trailing:o}=cs(n,a);return!s&&!o?r:or(r,u=>[s,u,o])}var ls=class extends Error{constructor(r,a,s="type"){super(`Unexpected ${a} node ${s}: ${JSON.stringify(r[s])}.`);Zp(this,"name","UnexpectedNodeError");this.node=r}},Me=ls;function ms(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}var Re,ys=class{constructor(n){Us(this,Re),Ns(this,Re,new Set(n))}getLeadingWhitespaceCount(n){let r=pt(this,Re),a=0;for(let s=0;s<n.length&&r.has(n.charAt(s));s++)a++;return a}getTrailingWhitespaceCount(n){let r=pt(this,Re),a=0;for(let s=n.length-1;s>=0&&r.has(n.charAt(s));s--)a++;return a}getLeadingWhitespace(n){let r=this.getLeadingWhitespaceCount(n);return n.slice(0,r)}getTrailingWhitespace(n){let r=this.getTrailingWhitespaceCount(n);return n.slice(n.length-r)}hasLeadingWhitespace(n){return pt(this,Re).has(n.charAt(0))}hasTrailingWhitespace(n){return pt(this,Re).has(O(!1,n,-1))}trimStart(n){let r=this.getLeadingWhitespaceCount(n);return n.slice(r)}trimEnd(n){let r=this.getTrailingWhitespaceCount(n);return n.slice(0,n.length-r)}trim(n){return this.trimEnd(this.trimStart(n))}split(n,r=!1){let a=`[${ms([...pt(this,Re)].join(""))}]+`,s=new RegExp(r?`(${a})`:a);return n.split(s)}hasWhitespaceCharacter(n){let r=pt(this,Re);return Array.prototype.some.call(n,a=>r.has(a))}hasNonWhitespaceCharacter(n){let r=pt(this,Re);return Array.prototype.some.call(n,a=>!r.has(a))}isWhitespaceOnly(n){let r=pt(this,Re);return Array.prototype.every.call(n,a=>r.has(a))}};Re=new WeakMap;var mi=ys,Yr=new mi(` 
\r	`),Ds=n=>n===""||n===x||n===F||n===E;function Ac(n,r,a){var s,o,u;let{node:c}=n;if(c.type==="JSXElement"&&Oc(c))return[a("openingElement"),a("closingElement")];let p=c.type==="JSXElement"?a("openingElement"):a("openingFragment"),d=c.type==="JSXElement"?a("closingElement"):a("closingFragment");if(c.children.length===1&&c.children[0].type==="JSXExpressionContainer"&&(c.children[0].expression.type==="TemplateLiteral"||c.children[0].expression.type==="TaggedTemplateExpression"))return[p,...n.map(a,"children"),d];c.children=c.children.map(oh=>_c(oh)?{type:"JSXText",value:" ",raw:" "}:oh);let _=c.children.some(N),ja=c.children.filter(oh=>oh.type==="JSXExpressionContainer").length>1,Ja=c.type==="JSXElement"&&c.openingElement.attributes.length>1,ec=ne(p)||_||Ja||ja,tc=n.parent.rootMarker==="mdx",rc=r.singleQuote?"{' '}":'{" "}',nc=tc?" ":b([rc,E]," "),ic=((o=(s=c.openingElement)==null?void 0:s.name)==null?void 0:o.name)==="fbt",uc=dc(n,r,a,nc,ic),eh=c.children.some(oh=>lr(oh));for(let oh=uc.length-2;oh>=0;oh--){let uh=uc[oh]===""&&uc[oh+1]==="",ch=uc[oh]===F&&uc[oh+1]===""&&uc[oh+2]===F,hh=(uc[oh]===E||uc[oh]===F)&&uc[oh+1]===""&&uc[oh+2]===nc,dh=uc[oh]===nc&&uc[oh+1]===""&&(uc[oh+2]===E||uc[oh+2]===F),gh=uc[oh]===nc&&uc[oh+1]===""&&uc[oh+2]===nc,fh=uc[oh]===E&&uc[oh+1]===""&&uc[oh+2]===F||uc[oh]===F&&uc[oh+1]===""&&uc[oh+2]===E;ch&&eh||uh||hh||gh||fh?uc.splice(oh,2):dh&&uc.splice(oh+1,2)}for(;uc.length>0&&Ds(O(!1,uc,-1));)uc.pop();for(;uc.length>1&&Ds(uc[0])&&Ds(uc[1]);)uc.shift(),uc.shift();let rh=[];for(let[oh,uh]of uc.entries()){if(uh===nc){if(oh===1&&uc[oh-1]===""){if(uc.length===2){rh.push(rc);continue}rh.push([rc,F]);continue}else if(oh===uc.length-1){rh.push(rc);continue}else if(uc[oh-1]===""&&uc[oh-2]===F){rh.push(rc);continue}}rh.push(uh),ne(uh)&&(ec=!0)}let ah=eh?Gt(rh):l(rh,{shouldBreak:!0});if(((u=r.cursorNode)==null?void 0:u.type)==="JSXText"&&c.children.includes(r.cursorNode)&&(ah=[Yn,ah,Yn]),tc)return ah;let ih=l([p,f([F,ah]),F,d]);return ec?ih:ze([l([p,...uc,d]),ih])}function dc(n,r,a,s,o){let u=[];return n.each(({node:c,next:p})=>{if(c.type==="JSXText"){let d=fe(c);if(lr(c)){let _=Yr.split(d,!0);_[0]===""&&(u.push(""),_.shift(),/\n/.test(_[0])?u.push(Di(o,_[1],c,p)):u.push(s),_.shift());let ja;if(O(!1,_,-1)===""&&(_.pop(),ja=_.pop()),_.length===0)return;for(let[Ja,ec]of _.entries())Ja%2===1?u.push(x):u.push(ec);ja!==void 0?/\n/.test(ja)?u.push(Di(o,O(!1,u,-1),c,p)):u.push(s):u.push(yi(o,O(!1,u,-1),c,p))}else/\n/.test(d)?d.match(/\n/g).length>1&&u.push("",F):u.push("",s)}else{let d=a();if(u.push(d),p&&lr(p)){let _=Yr.trim(fe(p)),[ja]=Yr.split(_);u.push(yi(o,ja,c,p))}else u.push(F)}},"children"),u}function yi(n,r,a,s){return n?"":a.type==="JSXElement"&&!a.closingElement||(s==null?void 0:s.type)==="JSXElement"&&!s.closingElement?r.length===1?E:F:E}function Di(n,r,a,s){return n?F:r.length===1?a.type==="JSXElement"&&!a.closingElement||(s==null?void 0:s.type)==="JSXElement"&&!s.closingElement?F:E:F}var Tc=new Set(["ArrayExpression","TupleExpression","JSXAttribute","JSXElement","JSXExpressionContainer","JSXFragment","ExpressionStatement","CallExpression","OptionalCallExpression","ConditionalExpression","JsExpressionRoot"]);function xc(n,r,a){let{parent:s}=n;if(Tc.has(s.type))return r;let o=n.match(void 0,c=>c.type==="ArrowFunctionExpression",w,c=>c.type==="JSXExpressionContainer"),u=Be(n,a);return l([u?"":b("("),f([E,r]),E,u?"":b(")")],{shouldBreak:o})}function hc(n,r,a){let{node:s}=n,o=[];if(o.push(a("name")),s.value){let u;if(z(s.value)){let c=fe(s.value),p=Q(!1,Q(!1,c.slice(1,-1),"&apos;","'"),"&quot;",'"'),d=gr(p,r.jsxSingleQuote);p=d==='"'?Q(!1,p,'"',"&quot;"):Q(!1,p,"'","&apos;"),u=n.call(()=>ye(n,Ie(d+p+d),r),"value")}else u=a("value");o.push("=",u)}return o}function gc(n,r,a){let{node:s}=n,o=(u,c)=>u.type==="JSXEmptyExpression"||!T(u)&&(U(u)||se(u)||u.type==="ArrowFunctionExpression"||u.type==="AwaitExpression"&&(o(u.argument,u)||u.argument.type==="JSXElement")||w(u)||u.type==="ChainExpression"&&w(u.expression)||u.type==="FunctionExpression"||u.type==="TemplateLiteral"||u.type==="TaggedTemplateExpression"||u.type==="DoExpression"||N(c)&&(u.type==="ConditionalExpression"||De(u)));return o(s.expression,n.parent)?l(["{",a("expression"),ke,"}"]):l(["{",f([E,a("expression")]),E,ke,"}"])}function Sc(n,r,a){var s,o;let{node:u}=n,c=T(u.name)||T(u.typeParameters)||T(u.typeArguments);if(u.selfClosing&&u.attributes.length===0&&!c)return["<",a("name"),u.typeArguments?a("typeArguments"):a("typeParameters")," />"];if(((s=u.attributes)==null?void 0:s.length)===1&&z(u.attributes[0].value)&&!u.attributes[0].value.value.includes(`
`)&&!c&&!T(u.attributes[0]))return l(["<",a("name"),u.typeArguments?a("typeArguments"):a("typeParameters")," ",...n.map(a,"attributes"),u.selfClosing?" />":">"]);let p=(o=u.attributes)==null?void 0:o.some(_=>z(_.value)&&_.value.value.includes(`
`)),d=r.singleAttributePerLine&&u.attributes.length>1?F:x;return l(["<",a("name"),u.typeArguments?a("typeArguments"):a("typeParameters"),f(n.map(()=>[d,a()],"attributes")),...Bc(u,r,c)],{shouldBreak:p})}function Bc(n,r,a){return n.selfClosing?[x,"/>"]:bc(n,r,a)?[">"]:[E,">"]}function bc(n,r,a){let s=n.attributes.length>0&&T(O(!1,n.attributes,-1),g.Trailing);return n.attributes.length===0&&!a||(r.bracketSameLine||r.jsxBracketSameLine)&&(!a||n.attributes.length>0)&&!s}function Pc(n,r,a){let{node:s}=n,o=[];o.push("</");let u=a("name");return T(s.name,g.Leading|g.Line)?o.push(f([F,u]),F):T(s.name,g.Leading|g.Block)?o.push(" ",u):o.push(u),o.push(">"),o}function kc(n,r){let{node:a}=n,s=T(a),o=T(a,g.Line),u=a.type==="JSXOpeningFragment";return[u?"<":"</",f([o?F:s&&!u?" ":"",M(n,r)]),o?F:"",">"]}function Ic(n,r,a){let s=ye(n,Ac(n,r,a),r);return xc(n,s,r)}function Lc(n,r){let{node:a}=n,s=T(a,g.Line);return[M(n,r,{indent:s}),s?F:""]}function wc(n,r,a){let{node:s}=n;return["{",n.call(({node:o})=>{let u=["...",a()];return!T(o)||!es(n)?u:[f([E,ye(n,u,r)]),E]},s.type==="JSXSpreadAttribute"?"argument":"expression"),"}"]}function fi(n,r,a){let{node:s}=n;if(s.type.startsWith("JSX"))switch(s.type){case"JSXAttribute":return hc(n,r,a);case"JSXIdentifier":return s.name;case"JSXNamespacedName":return P(":",[a("namespace"),a("name")]);case"JSXMemberExpression":return P(".",[a("object"),a("property")]);case"JSXSpreadAttribute":case"JSXSpreadChild":return wc(n,r,a);case"JSXExpressionContainer":return gc(n,r,a);case"JSXFragment":case"JSXElement":return Ic(n,r,a);case"JSXOpeningElement":return Sc(n,r,a);case"JSXClosingElement":return Pc(n,r,a);case"JSXOpeningFragment":case"JSXClosingFragment":return kc(n,r);case"JSXEmptyExpression":return Lc(n,r);case"JSXText":throw new Error("JSXText should be handled by JSXElement");default:throw new Me(s,"JSX")}}function Oc(n){if(n.children.length===0)return!0;if(n.children.length>1)return!1;let r=n.children[0];return r.type==="JSXText"&&!lr(r)}function lr(n){return n.type==="JSXText"&&(Yr.hasNonWhitespaceCharacter(fe(n))||!/\n/.test(fe(n)))}function _c(n){return n.type==="JSXExpressionContainer"&&z(n.expression)&&n.expression.value===" "&&!T(n.expression)}function Ei(n){let{node:r,parent:a}=n;if(!N(r)||!N(a))return!1;let{index:s,siblings:o}=n,u;for(let c=s;c>0;c--){let p=o[c-1];if(!(p.type==="JSXText"&&!lr(p))){u=p;break}}return(u==null?void 0:u.type)==="JSXExpressionContainer"&&u.expression.type==="JSXEmptyExpression"&&bt(u.expression)}function vc(n){return bt(n.node)||Ei(n)}var Hr=vc,jc=0;function Vr(n,r,a){var s;let{node:o,parent:u,grandparent:c,key:p}=n,d=p!=="body"&&(u.type==="IfStatement"||u.type==="WhileStatement"||u.type==="SwitchStatement"||u.type==="DoWhileStatement"),_=o.operator==="|>"&&((s=n.root.extra)==null?void 0:s.__isUsingHackPipeline),ja=fs(n,a,r,!1,d);if(d)return ja;if(_)return l(ja);if(w(u)&&u.callee===o||u.type==="UnaryExpression"||q(u)&&!u.computed)return l([f([E,...ja]),E]);let Ja=u.type==="ReturnStatement"||u.type==="ThrowStatement"||u.type==="JSXExpressionContainer"&&c.type==="JSXAttribute"||o.operator!=="|"&&u.type==="JsExpressionRoot"||o.type!=="NGPipeExpression"&&(u.type==="NGRoot"&&r.parser==="__ng_binding"||u.type==="NGMicrosyntaxExpression"&&c.type==="NGMicrosyntax"&&c.body.length===1)||o===u.body&&u.type==="ArrowFunctionExpression"||o!==u.body&&u.type==="ForStatement"||u.type==="ConditionalExpression"&&c.type!=="ReturnStatement"&&c.type!=="ThrowStatement"&&!w(c)||u.type==="TemplateLiteral",ec=u.type==="AssignmentExpression"||u.type==="VariableDeclarator"||u.type==="ClassProperty"||u.type==="PropertyDefinition"||u.type==="TSAbstractPropertyDefinition"||u.type==="ClassPrivateProperty"||Ae(u),tc=De(o.left)&&ur(o.operator,o.left.operator);if(Ja||Xt(o)&&!tc||!Xt(o)&&ec)return l(ja);if(ja.length===0)return"";let rc=N(o.right),nc=ja.findIndex(ih=>typeof ih!="string"&&!Array.isArray(ih)&&ih.type===le),ic=ja.slice(0,nc===-1?1:nc+1),uc=ja.slice(ic.length,rc?-1:void 0),eh=Symbol("logicalChain-"+ ++jc),rh=l([...ic,f(uc)],{id:eh});if(!rc)return rh;let ah=O(!1,ja,-1);return l([rh,At(ah,{groupId:eh})])}function fs(n,r,a,s,o){var u;let{node:c}=n;if(!De(c))return[l(r())];let p=[];ur(c.operator,c.left.operator)?p=n.call(ic=>fs(ic,r,a,!0,o),"left"):p.push(l(r("left")));let d=Xt(c),_=(c.operator==="|>"||c.type==="NGPipeExpression"||Mc(n,a))&&!Oe(a.originalText,c.right),ja=c.type==="NGPipeExpression"?"|":c.operator,Ja=c.type==="NGPipeExpression"&&c.arguments.length>0?l(f([E,": ",P([x,": "],n.map(()=>he(2,l(r())),"arguments"))])):"",ec;if(d)ec=[ja," ",r("right"),Ja];else{let ic=ja==="|>"&&((u=n.root.extra)!=null&&u.__isUsingHackPipeline)?n.call(uc=>fs(uc,r,a,!0,o),"right"):r("right");ec=[_?x:"",ja,_?" ":x,ic,Ja]}let{parent:tc}=n,rc=T(c.left,g.Trailing|g.Line),nc=rc||!(o&&c.type==="LogicalExpression")&&tc.type!==c.type&&c.left.type!==c.type&&c.right.type!==c.type;if(p.push(_?"":" ",nc?l(ec,{shouldBreak:rc}):ec),s&&T(c)){let ic=Ut(ye(n,p,a));return ic.type===Pe?ic.parts:Array.isArray(ic)?ic:[ic]}return p}function Xt(n){return n.type!=="LogicalExpression"?!1:!!(se(n.right)&&n.right.properties.length>0||U(n.right)&&n.right.elements.length>0||N(n.right))}var Fi=n=>n.type==="BinaryExpression"&&n.operator==="|";function Mc(n,r){return(r.parser==="__vue_expression"||r.parser==="__vue_ts_expression")&&Fi(n.node)&&!n.hasAncestor(a=>!Fi(a)&&a.type!=="JsExpressionRoot")}function Ai(n,r,a){let{node:s}=n;if(s.type.startsWith("NG"))switch(s.type){case"NGRoot":return[a("node"),T(s.node)?" //"+ct(s.node)[0].value.trimEnd():""];case"NGPipeExpression":return Vr(n,r,a);case"NGChainedExpression":return l(P([";",x],n.map(()=>Jc(n)?a():["(",a(),")"],"expressions")));case"NGEmptyExpression":return"";case"NGMicrosyntax":return n.map(()=>[n.isFirst?"":Ci(n)?" ":[";",x],a()],"body");case"NGMicrosyntaxKey":return/^[$_a-z][\w$]*(?:-[$_a-z][\w$])*$/i.test(s.name)?s.name:JSON.stringify(s.name);case"NGMicrosyntaxExpression":return[a("expression"),s.alias===null?"":[" as ",a("alias")]];case"NGMicrosyntaxKeyedExpression":{let{index:o,parent:u}=n,c=Ci(n)||(o===1&&(s.key.name==="then"||s.key.name==="else"||s.key.name==="as")||(o===2||o===3)&&(s.key.name==="else"&&u.body[o-1].type==="NGMicrosyntaxKeyedExpression"&&u.body[o-1].key.name==="then"||s.key.name==="track"))&&u.body[0].type==="NGMicrosyntaxExpression";return[a("key"),c?" ":": ",a("expression")]}case"NGMicrosyntaxLet":return["let ",a("key"),s.value===null?"":[" = ",a("value")]];case"NGMicrosyntaxAs":return[a("key")," as ",a("alias")];default:throw new Me(s,"Angular")}}function Ci({node:n,index:r}){return n.type==="NGMicrosyntaxKeyedExpression"&&n.key.name==="of"&&r===1}var Rc=j(["CallExpression","OptionalCallExpression","AssignmentExpression"]);function Jc({node:n}){return nr(n,Rc)}function Es(n,r,a){let{node:s}=n;return l([P(x,n.map(a,"decorators")),xi(s,r)?F:x])}function di(n,r,a){return hi(n.node)?[P(F,n.map(a,"declaration","decorators")),F]:""}function Ti(n,r,a){let{node:s,parent:o}=n,{decorators:u}=s;if(!L(u)||hi(o)||Hr(n))return"";let c=s.type==="ClassExpression"||s.type==="ClassDeclaration"||xi(s,r);return[n.key==="declaration"&&ou(o)?F:c?Ee:"",P(x,n.map(a,"decorators")),x]}function xi(n,r){return n.decorators.some(a=>te(r.originalText,k(a)))}function hi(n){var r;if(n.type!=="ExportDefaultDeclaration"&&n.type!=="ExportNamedDeclaration"&&n.type!=="DeclareExportDeclaration")return!1;let a=(r=n.declaration)==null?void 0:r.decorators;return L(a)&&gt(n,a[0])}var Dt=class extends Error{constructor(){super(...arguments);Zp(this,"name","ArgExpansionBailout")}};function qc(n,r,a){let{node:s}=n,o=ue(s);if(o.length===0)return["(",M(n,r),")"];let u=o.length-1;if(Uc(o)){let ec=["("];return qt(n,(tc,rc)=>{ec.push(a()),rc!==u&&ec.push(", ")}),ec.push(")"),ec}let c=!1,p=[];qt(n,({node:ec},tc)=>{let rc=a();tc===u||(pe(ec,r)?(c=!0,rc=[rc,",",F,F]):rc=[rc,",",x]),p.push(rc)});let d=s.type==="ImportExpression"||s.callee.type==="Import",_=!r.parser.startsWith("__ng_")&&!d&&oe(r,"all")?",":"";function ja(){return l(["(",f([x,...p]),_,x,")"],{shouldBreak:!0})}if(c||n.parent.type!=="Decorator"&&mu(o))return ja();if(Gc(o)){let ec=p.slice(1);if(ec.some(ne))return ja();let tc;try{tc=a(Wn(s,0),{expandFirstArg:!0})}catch(rc){if(rc instanceof Dt)return ja();throw rc}return ne(tc)?[Ee,ze([["(",l(tc,{shouldBreak:!0}),", ",...ec,")"],ja()])]:ze([["(",tc,", ",...ec,")"],["(",l(tc,{shouldBreak:!0}),", ",...ec,")"],ja()])}if(Wc(o,p,r)){let ec=p.slice(0,-1);if(ec.some(ne))return ja();let tc;try{tc=a(Wn(s,-1),{expandLastArg:!0})}catch(rc){if(rc instanceof Dt)return ja();throw rc}return ne(tc)?[Ee,ze([["(",...ec,l(tc,{shouldBreak:!0}),")"],ja()])]:ze([["(",...ec,tc,")"],["(",...ec,l(tc,{shouldBreak:!0}),")"],ja()])}let Ja=["(",f([E,...p]),b(_),E,")"];return vr(n)?Ja:l(Ja,{shouldBreak:p.some(ne)||c})}function mr(n,r=!1){return se(n)&&(n.properties.length>0||T(n))||U(n)&&(n.elements.length>0||T(n))||n.type==="TSTypeAssertion"&&mr(n.expression)||de(n)&&mr(n.expression)||n.type==="FunctionExpression"||n.type==="ArrowFunctionExpression"&&(!n.returnType||!n.returnType.typeAnnotation||n.returnType.typeAnnotation.type!=="TSTypeReference"||Nc(n.body))&&(n.body.type==="BlockStatement"||n.body.type==="ArrowFunctionExpression"&&mr(n.body,!0)||se(n.body)||U(n.body)||!r&&(w(n.body)||n.body.type==="ConditionalExpression")||N(n.body))||n.type==="DoExpression"||n.type==="ModuleExpression"}function Wc(n,r,a){var s,o;let u=O(!1,n,-1);if(n.length===1){let p=O(!1,r,-1);if((s=p.label)!=null&&s.embed&&((o=p.label)==null?void 0:o.hug)!==!1)return!0}let c=O(!1,n,-2);return!T(u,g.Leading)&&!T(u,g.Trailing)&&mr(u)&&(!c||c.type!==u.type)&&(n.length!==2||c.type!=="ArrowFunctionExpression"||!U(u))&&!(n.length>1&&Fs(u,a))}function Gc(n){if(n.length!==2)return!1;let[r,a]=n;return r.type==="ModuleExpression"&&Xc(a)?!0:!T(r)&&(r.type==="FunctionExpression"||r.type==="ArrowFunctionExpression"&&r.body.type==="BlockStatement")&&a.type!=="FunctionExpression"&&a.type!=="ArrowFunctionExpression"&&a.type!=="ConditionalExpression"&&Si(a)&&!mr(a)}function Si(n){var r;if(n.type==="ParenthesizedExpression")return Si(n.expression);if(de(n)||n.type==="TypeCastExpression"){let{typeAnnotation:a}=n;return a.type==="TypeAnnotation"&&(a=a.typeAnnotation),a.type==="TSArrayType"&&(a=a.elementType,a.type==="TSArrayType"&&(a=a.elementType)),(a.type==="GenericTypeAnnotation"||a.type==="TSTypeReference")&&((r=a.typeParameters)==null?void 0:r.params.length)===1&&(a=a.typeParameters.params[0]),Jt(a)&&be(n.expression,1)}return lt(n)&&ue(n).length>1?!1:De(n)?be(n.left,1)&&be(n.right,1):Jn(n)||be(n)}function Uc(n){return n.length===2?gi(n,0):n.length===3?n[0].type==="Identifier"&&gi(n,1):!1}function gi(n,r){let a=n[r],s=n[r+1];return a.type==="ArrowFunctionExpression"&&$(a).length===0&&a.body.type==="BlockStatement"&&s.type==="ArrayExpression"&&!n.some(o=>T(o))}function Nc(n){return n.type==="BlockStatement"&&(n.body.some(r=>r.type!=="EmptyStatement")||T(n,g.Dangling))}function Xc(n){return n.type==="ObjectExpression"&&n.properties.length===1&&Ae(n.properties[0])&&n.properties[0].key.type==="Identifier"&&n.properties[0].key.name==="type"&&z(n.properties[0].value)&&n.properties[0].value.value==="module"}var yr=qc,Yc=n=>((n.type==="ChainExpression"||n.type==="TSNonNullExpression")&&(n=n.expression),w(n)&&ue(n).length>0);function Bi(n,r,a){var s;let o=a("object"),u=Cs(n,r,a),{node:c}=n,p=n.findAncestor(ja=>!(q(ja)||ja.type==="TSNonNullExpression")),d=n.findAncestor(ja=>!(ja.type==="ChainExpression"||ja.type==="TSNonNullExpression")),_=p&&(p.type==="NewExpression"||p.type==="BindExpression"||p.type==="AssignmentExpression"&&p.left.type!=="Identifier")||c.computed||c.object.type==="Identifier"&&c.property.type==="Identifier"&&!q(d)||(d.type==="AssignmentExpression"||d.type==="VariableDeclarator")&&(Yc(c.object)||((s=o.label)==null?void 0:s.memberChain));return it(o.label,[o,_?u:l(f([E,u]))])}function Cs(n,r,a){let s=a("property"),{node:o}=n,u=H(n);return o.computed?!o.property||Ce(o.property)?[u,"[",s,"]"]:l([u,"[",f([E,s]),E,"]"]):[u,".",s]}function bi(n,r,a){if(n.node.type==="ChainExpression")return n.call(()=>bi(n,r,a),"expression");let{parent:s}=n,o=!s||s.type==="ExpressionStatement",u=[];function c(ph){let{originalText:yh}=r,xh=yt(yh,k(ph));return yh.charAt(xh)===")"?xh!==!1&&vt(yh,xh+1):pe(ph,r)}function p(ph){let{node:yh}=ph;if(yh.type==="ChainExpression")return ph.call(()=>p(ph),"expression");if(w(yh)&&(Ft(yh.callee)||w(yh.callee))){let xh=c(yh);u.unshift({node:yh,hasTrailingEmptyLine:xh,printed:[ye(ph,[H(ph),Qe(ph,r,a),yr(ph,r,a)],r),xh?F:""]}),ph.call(_h=>p(_h),"callee")}else Ft(yh)?(u.unshift({node:yh,needsParens:Be(ph,r),printed:ye(ph,q(yh)?Cs(ph,r,a):$r(ph,r,a),r)}),ph.call(xh=>p(xh),"object")):yh.type==="TSNonNullExpression"?(u.unshift({node:yh,printed:ye(ph,"!",r)}),ph.call(xh=>p(xh),"expression")):u.unshift({node:yh,printed:a()})}let{node:d}=n;u.unshift({node:d,printed:[H(n),Qe(n,r,a),yr(n,r,a)]}),d.callee&&n.call(ph=>p(ph),"callee");let _=[],ja=[u[0]],Ja=1;for(;Ja<u.length&&(u[Ja].node.type==="TSNonNullExpression"||w(u[Ja].node)||q(u[Ja].node)&&u[Ja].node.computed&&Ce(u[Ja].node.property));++Ja)ja.push(u[Ja]);if(!w(u[0].node))for(;Ja+1<u.length&&Ft(u[Ja].node)&&Ft(u[Ja+1].node);++Ja)ja.push(u[Ja]);_.push(ja),ja=[];let ec=!1;for(;Ja<u.length;++Ja){if(ec&&Ft(u[Ja].node)){if(u[Ja].node.computed&&Ce(u[Ja].node.property)){ja.push(u[Ja]);continue}_.push(ja),ja=[],ec=!1}(w(u[Ja].node)||u[Ja].node.type==="ImportExpression")&&(ec=!0),ja.push(u[Ja]),T(u[Ja].node,g.Trailing)&&(_.push(ja),ja=[],ec=!1)}ja.length>0&&_.push(ja);function tc(ph){return/^[A-Z]|^[$_]+$/.test(ph)}function rc(ph){return ph.length<=r.tabWidth}function nc(ph){var yh;let xh=(yh=ph[1][0])==null?void 0:yh.node.computed;if(ph[0].length===1){let bh=ph[0][0].node;return bh.type==="ThisExpression"||bh.type==="Identifier"&&(tc(bh.name)||o&&rc(bh.name)||xh)}let _h=O(!1,ph[0],-1).node;return q(_h)&&_h.property.type==="Identifier"&&(tc(_h.property.name)||xh)}let ic=_.length>=2&&!T(_[1][0].node)&&nc(_);function uc(ph){let yh=ph.map(xh=>xh.printed);return ph.length>0&&O(!1,ph,-1).needsParens?["(",...yh,")"]:yh}function eh(ph){return ph.length===0?"":f([F,P(F,ph.map(uc))])}let rh=_.map(uc),ah=rh,ih=ic?3:2,oh=_.flat(),uh=oh.slice(1,-1).some(ph=>T(ph.node,g.Leading))||oh.slice(0,-1).some(ph=>T(ph.node,g.Trailing))||_[ih]&&T(_[ih][0].node,g.Leading);if(_.length<=ih&&!uh&&!_.some(ph=>O(!1,ph,-1).hasTrailingEmptyLine))return vr(n)?ah:l(ah);let ch=O(!1,_[ic?1:0],-1).node,hh=!w(ch)&&c(ch),dh=[uc(_[0]),ic?_.slice(1,2).map(uc):"",hh?F:"",eh(_.slice(ic?2:1))],gh=u.map(({node:ph})=>ph).filter(w);function fh(){let ph=O(!1,O(!1,_,-1),-1).node,yh=O(!1,rh,-1);return w(ph)&&ne(yh)&&gh.slice(0,-1).some(xh=>xh.arguments.some(jt))}let vh;return uh||gh.length>2&&gh.some(ph=>!ph.arguments.every(yh=>be(yh)))||rh.slice(0,-1).some(ne)||fh()?vh=l(dh):vh=[ne(ah)||hh?Ee:"",ze([ah,dh])],it({memberChain:!0},vh)}var Pi=bi;function Kr(n,r,a){var s;let{node:o,parent:u}=n,c=o.type==="NewExpression",p=o.type==="ImportExpression",d=H(n),_=ue(o),ja=_.length===1&&Or(_[0],r.originalText);if(ja||_.length>0&&!c&&!p&&(Hc(o,u)||Bt(o,u))){let ec=[];if(qt(n,()=>{ec.push(a())}),!(ja&&(s=ec[0].label)!=null&&s.embed))return[c?"new ":"",p?ki(o):a("callee"),d,Qe(n,r,a),"(",P(", ",ec),")"]}if(!p&&!c&&Ft(o.callee)&&!n.call(ec=>Be(ec,r),"callee",...o.callee.type==="ChainExpression"?["expression"]:[]))return Pi(n,r,a);let Ja=[c?"new ":"",p?ki(o):a("callee"),d,Qe(n,r,a),yr(n,r,a)];return p||w(o.callee)?l(Ja):Ja}function ki(n){return n.phase?`import.${n.phase}`:"import"}function Hc(n,r){if(n.callee.type!=="Identifier")return!1;if(n.callee.name==="require"){let a=ue(n);return a.length===1&&z(a[0])||a.length>1}if(n.callee.name==="define"){let a=ue(n);return r.type==="ExpressionStatement"&&(a.length===1||a.length===2&&a[0].type==="ArrayExpression"||a.length===3&&z(a[0])&&a[1].type==="ArrayExpression")}return!1}function Tt(n,r,a,s,o,u){let c=Vc(n,r,a,s,u),p=u?a(u,{assignmentLayout:c}):"";switch(c){case"break-after-operator":return l([l(s),o,l(f([x,p]))]);case"never-break-after-operator":return l([l(s),o," ",p]);case"fluid":{let d=Symbol("assignment");return l([l(s),o,l(f(x),{id:d}),ke,At(p,{groupId:d})])}case"break-lhs":return l([s,o," ",l(p)]);case"chain":return[l(s),o,x,p];case"chain-tail":return[l(s),o,f([x,p])];case"chain-tail-arrow-chain":return[l(s),o,p];case"only-left":return s}}function Li(n,r,a){let{node:s}=n;return Tt(n,r,a,a("left"),[" ",s.operator],"right")}function wi(n,r,a){return Tt(n,r,a,a("id")," =","init")}function Vc(n,r,a,s,o){let{node:u}=n,c=u[o];if(!c)return"only-left";let p=!zr(c);if(n.match(zr,Oi,ja=>!p||ja.type!=="ExpressionStatement"&&ja.type!=="VariableDeclaration"))return p?c.type==="ArrowFunctionExpression"&&c.body.type==="ArrowFunctionExpression"?"chain-tail-arrow-chain":"chain-tail":"chain";if(!p&&zr(c.right)||Oe(r.originalText,c))return"break-after-operator";if(u.type==="ImportAttribute"||c.type==="CallExpression"&&c.callee.name==="require"||r.parser==="json5"||r.parser==="jsonc"||r.parser==="json")return"never-break-after-operator";let d=bu(s);if(Kc(u)||el(u)||As(u)&&d)return"break-lhs";let _=rl(u,s,r);return n.call(()=>$c(n,r,a,_),o)?"break-after-operator":zc(u)?"break-lhs":!d&&(_||c.type==="TemplateLiteral"||c.type==="TaggedTemplateExpression"||c.type==="BooleanLiteral"||Ce(c)||c.type==="ClassExpression")?"never-break-after-operator":"fluid"}function $c(n,r,a,s){let o=n.node;if(De(o)&&!Xt(o))return!0;switch(o.type){case"StringLiteralTypeAnnotation":case"SequenceExpression":return!0;case"TSConditionalType":case"ConditionalTypeAnnotation":if(!r.experimentalTernaries&&!ul(o))break;return!0;case"ConditionalExpression":{if(!r.experimentalTernaries){let{test:_}=o;return De(_)&&!Xt(_)}let{consequent:p,alternate:d}=o;return p.type==="ConditionalExpression"||d.type==="ConditionalExpression"}case"ClassExpression":return L(o.decorators)}if(s)return!1;let u=o,c=[];for(;;)if(u.type==="UnaryExpression"||u.type==="AwaitExpression"||u.type==="YieldExpression"&&u.argument!==null)u=u.argument,c.push("argument");else if(u.type==="TSNonNullExpression")u=u.expression,c.push("expression");else break;return!!(z(u)||n.call(()=>_i(n,r,a),...c))}function Kc(n){if(Oi(n)){let r=n.left||n.id;return r.type==="ObjectPattern"&&r.properties.length>2&&r.properties.some(a=>{var s;return Ae(a)&&(!a.shorthand||((s=a.value)==null?void 0:s.type)==="AssignmentPattern")})}return!1}function zr(n){return n.type==="AssignmentExpression"}function Oi(n){return zr(n)||n.type==="VariableDeclarator"}function zc(n){let r=Zc(n);if(L(r)){let a=n.type==="TSTypeAliasDeclaration"?"constraint":"bound";if(r.length>1&&r.some(s=>s[a]||s.default))return!0}return!1}var Qc=j(["TSTypeAliasDeclaration","TypeAlias"]);function Zc(n){var r;if(Qc(n))return(r=n.typeParameters)==null?void 0:r.params}function el(n){if(n.type!=="VariableDeclarator")return!1;let{typeAnnotation:r}=n.id;if(!r||!r.typeAnnotation)return!1;let a=Ii(r.typeAnnotation);return L(a)&&a.length>1&&a.some(s=>L(Ii(s))||s.type==="TSConditionalType")}function As(n){var r;return n.type==="VariableDeclarator"&&((r=n.init)==null?void 0:r.type)==="ArrowFunctionExpression"}var tl=j(["TSTypeReference","GenericTypeAnnotation"]);function Ii(n){var r;if(tl(n))return(r=n.typeParameters)==null?void 0:r.params}function _i(n,r,a,s=!1){var o;let{node:u}=n,c=()=>_i(n,r,a,!0);if(u.type==="ChainExpression"||u.type==="TSNonNullExpression")return n.call(c,"expression");if(w(u)){if((o=Kr(n,r,a).label)!=null&&o.memberChain)return!1;let p=ue(u);return!(p.length===0||p.length===1&&sr(p[0],r))||nl(u,a)?!1:n.call(c,"callee")}return q(u)?n.call(c,"object"):s&&(u.type==="Identifier"||u.type==="ThisExpression")}function rl(n,r,a){return Ae(n)?(r=Ut(r),typeof r=="string"&&et(r)<a.tabWidth+3):!1}function nl(n,r){let a=sl(n);if(L(a)){if(a.length>1)return!0;if(a.length===1){let o=a[0];if(Ne(o)||jr(o)||o.type==="TSTypeLiteral"||o.type==="ObjectTypeAnnotation")return!0}let s=n.typeParameters?"typeParameters":"typeArguments";if(ne(r(s)))return!0}return!1}function sl(n){var r;return(r=n.typeParameters??n.typeArguments)==null?void 0:r.params}function ul(n){function r(a){switch(a.type){case"FunctionTypeAnnotation":case"GenericTypeAnnotation":case"TSFunctionType":case"TSTypeReference":return!!a.typeParameters;default:return!1}}return r(n.checkType)||r(n.extendsType)}function Je(n,r,a,s,o){let u=n.node,c=$(u),p=o?Qe(n,a,r):"";if(c.length===0)return[p,"(",M(n,a,{filter:tc=>ge(a.originalText,k(tc))===")"}),")"];let{parent:d}=n,_=Bt(d),ja=ds(u),Ja=[];if(Eu(n,(tc,rc)=>{let nc=rc===c.length-1;nc&&u.rest&&Ja.push("..."),Ja.push(r()),!nc&&(Ja.push(","),_||ja?Ja.push(" "):pe(c[rc],a)?Ja.push(F,F):Ja.push(x))}),s&&!al(n)){if(ne(p)||ne(Ja))throw new Dt;return l([ar(p),"(",ar(Ja),")"])}let ec=c.every(tc=>!L(tc.decorators));return ja&&ec?[p,"(",...Ja,")"]:_?[p,"(",...Ja,")"]:(wr(d)||pu(d)||d.type==="TypeAlias"||d.type==="UnionTypeAnnotation"||d.type==="IntersectionTypeAnnotation"||d.type==="FunctionTypeAnnotation"&&d.returnType===u)&&c.length===1&&c[0].name===null&&u.this!==c[0]&&c[0].typeAnnotation&&u.typeParameters===null&&Jt(c[0].typeAnnotation)&&!u.rest?a.arrowParens==="always"||u.type==="HookTypeAnnotation"?["(",...Ja,")"]:Ja:[p,"(",f([E,...Ja]),b(!fu(u)&&oe(a,"all")?",":""),E,")"]}function ds(n){if(!n)return!1;let r=$(n);if(r.length!==1)return!1;let[a]=r;return!T(a)&&(a.type==="ObjectPattern"||a.type==="ArrayPattern"||a.type==="Identifier"&&a.typeAnnotation&&(a.typeAnnotation.type==="TypeAnnotation"||a.typeAnnotation.type==="TSTypeAnnotation")&&we(a.typeAnnotation.typeAnnotation)||a.type==="FunctionTypeParam"&&we(a.typeAnnotation)&&a!==n.rest||a.type==="AssignmentPattern"&&(a.left.type==="ObjectPattern"||a.left.type==="ArrayPattern")&&(a.right.type==="Identifier"||se(a.right)&&a.right.properties.length===0||U(a.right)&&a.right.elements.length===0))}function il(n){let r;return n.returnType?(r=n.returnType,r.typeAnnotation&&(r=r.typeAnnotation)):n.typeAnnotation&&(r=n.typeAnnotation),r}function ot(n,r){var a;let s=il(n);if(!s)return!1;let o=(a=n.typeParameters)==null?void 0:a.params;if(o){if(o.length>1)return!1;if(o.length===1){let u=o[0];if(u.constraint||u.default)return!1}}return $(n).length===1&&(we(s)||ne(r))}function al(n){return n.match(r=>r.type==="ArrowFunctionExpression"&&r.body.type==="BlockStatement",(r,a)=>{if(r.type==="CallExpression"&&a==="arguments"&&r.arguments.length===1&&r.callee.type==="CallExpression"){let s=r.callee.callee;return s.type==="Identifier"||s.type==="MemberExpression"&&!s.computed&&s.object.type==="Identifier"&&s.property.type==="Identifier"}return!1},(r,a)=>r.type==="VariableDeclarator"&&a==="init"||r.type==="ExportDefaultDeclaration"&&a==="declaration"||r.type==="TSExportAssignment"&&a==="expression"||r.type==="AssignmentExpression"&&a==="right"&&r.left.type==="MemberExpression"&&r.left.object.type==="Identifier"&&r.left.object.name==="module"&&r.left.property.type==="Identifier"&&r.left.property.name==="exports",r=>r.type!=="VariableDeclaration"||r.kind==="const"&&r.declarations.length===1)}function vi(n){let r=$(n);return r.length>1&&r.some(a=>a.type==="TSParameterProperty")}var ol=j(["VoidTypeAnnotation","TSVoidKeyword","NullLiteralTypeAnnotation","TSNullKeyword"]),pl=j(["ObjectTypeAnnotation","TSTypeLiteral","GenericTypeAnnotation","TSTypeReference"]);function cl(n){let{types:r}=n;if(r.some(s=>T(s)))return!1;let a=r.find(s=>pl(s));return a?r.every(s=>s===a||ol(s)):!1}function Ts(n){return Jt(n)||we(n)?!0:Ne(n)?cl(n):!1}function ji(n,r,a){let s=r.semi?";":"",{node:o}=n,u=[V(n),"opaque type ",a("id"),a("typeParameters")];return o.supertype&&u.push(": ",a("supertype")),o.impltype&&u.push(" = ",a("impltype")),u.push(s),u}function Qr(n,r,a){let s=r.semi?";":"",{node:o}=n,u=[V(n)];u.push("type ",a("id"),a("typeParameters"));let c=o.type==="TSTypeAliasDeclaration"?"typeAnnotation":"right";return[Tt(n,r,a,u," =",c),s]}function Zr(n,r,a){let s=!1;return l(n.map(({isFirst:o,previous:u,node:c,index:p})=>{let d=a();if(o)return d;let _=we(c),ja=we(u);return ja&&_?[" & ",s?f(d):d]:!ja&&!_?f([" &",x,d]):(p>1&&(s=!0),[" & ",p>1?f(d):d])},"types"))}function en(n,r,a){let{node:s}=n,{parent:o}=n,u=o.type!=="TypeParameterInstantiation"&&(o.type!=="TSConditionalType"||!r.experimentalTernaries)&&(o.type!=="ConditionalTypeAnnotation"||!r.experimentalTernaries)&&o.type!=="TSTypeParameterInstantiation"&&o.type!=="GenericTypeAnnotation"&&o.type!=="TSTypeReference"&&o.type!=="TSTypeAssertion"&&o.type!=="TupleTypeAnnotation"&&o.type!=="TSTupleType"&&!(o.type==="FunctionTypeParam"&&!o.name&&n.grandparent.this!==o)&&!((o.type==="TypeAlias"||o.type==="VariableDeclarator"||o.type==="TSTypeAliasDeclaration")&&Oe(r.originalText,s)),c=Ts(s),p=n.map(ja=>{let Ja=a();return c||(Ja=he(2,Ja)),ye(ja,Ja,r)},"types");if(c)return P(" | ",p);let d=u&&!Oe(r.originalText,s),_=[b([d?x:"","| "]),P([x,"| "],p)];return Be(n,r)?l([f(_),E]):(o.type==="TupleTypeAnnotation"||o.type==="TSTupleType")&&o[o.type==="TupleTypeAnnotation"&&o.types?"types":"elementTypes"].length>1?l([f([b(["(",E]),_]),E,b(")")]):l(u?f(_):_)}function ll(n){var r;let{node:a,parent:s}=n;return a.type==="FunctionTypeAnnotation"&&(wr(s)||!((s.type==="ObjectTypeProperty"||s.type==="ObjectTypeInternalSlot")&&!s.variance&&!s.optional&&gt(s,a)||s.type==="ObjectTypeCallProperty"||((r=n.getParentNode(2))==null?void 0:r.type)==="DeclareFunction"))}function tn(n,r,a){let{node:s}=n,o=[Yt(n)];(s.type==="TSConstructorType"||s.type==="TSConstructSignatureDeclaration")&&o.push("new ");let u=Je(n,a,r,!1,!0),c=[];return s.type==="FunctionTypeAnnotation"?c.push(ll(n)?" => ":": ",a("returnType")):c.push(X(n,a,s.returnType?"returnType":"typeAnnotation")),ot(s,c)&&(u=l(u)),o.push(u,c),l(o)}function rn(n,r,a){return[a("objectType"),H(n),"[",a("indexType"),"]"]}function nn(n,r,a){return["infer ",a("typeParameter")]}function xs(n,r,a){let{node:s}=n;return[s.postfix?"":a,X(n,r),s.postfix?a:""]}function sn(n,r,a){let{node:s}=n;return["...",...s.type==="TupleTypeSpreadElement"&&s.label?[a("label"),": "]:[],a("typeAnnotation")]}function un(n,r,a){let{node:s}=n;return[s.variance?a("variance"):"",a("label"),s.optional?"?":"",": ",a("elementType")]}var ml=new WeakSet;function X(n,r,a="typeAnnotation"){let{node:{[a]:s}}=n;if(!s)return"";let o=!1;if(s.type==="TSTypeAnnotation"||s.type==="TypeAnnotation"){let u=n.call(Mi,a);(u==="=>"||u===":"&&T(s,g.Leading))&&(o=!0),ml.add(s)}return o?[" ",r(a)]:r(a)}var Mi=n=>n.match(r=>r.type==="TSTypeAnnotation",(r,a)=>(a==="returnType"||a==="typeAnnotation")&&(r.type==="TSFunctionType"||r.type==="TSConstructorType"))?"=>":n.match(r=>r.type==="TSTypeAnnotation",(r,a)=>a==="typeAnnotation"&&(r.type==="TSJSDocNullableType"||r.type==="TSJSDocNonNullableType"||r.type==="TSTypePredicate"))||n.match(r=>r.type==="TypeAnnotation",(r,a)=>a==="typeAnnotation"&&r.type==="Identifier",(r,a)=>a==="id"&&r.type==="DeclareFunction")||n.match(r=>r.type==="TypeAnnotation",(r,a)=>a==="typeAnnotation"&&r.type==="Identifier",(r,a)=>a==="id"&&r.type==="DeclareHook")||n.match(r=>r.type==="TypeAnnotation",(r,a)=>a==="bound"&&r.type==="TypeParameter"&&r.usesExtendsBound)?"":":";function an(n,r,a){let s=Mi(n);return s?[s," ",a("typeAnnotation")]:a("typeAnnotation")}function on(n){return[n("elementType"),"[]"]}function pn({node:n},r){let a=n.type==="TSTypeQuery"?"exprName":"argument",s=n.type==="TSTypeQuery"?"typeParameters":"typeArguments";return["typeof ",r(a),r(s)]}function cn(n,r){let{node:a}=n;return[a.type==="TSTypePredicate"&&a.asserts?"asserts ":a.type==="TypePredicate"&&a.kind?`${a.kind} `:"",r("parameterName"),a.typeAnnotation?[" is ",X(n,r)]:""]}function H(n){let{node:r}=n;return!r.optional||r.type==="Identifier"&&r===n.parent.key?"":w(r)||q(r)&&r.computed||r.type==="OptionalIndexedAccessType"?"?.":"?"}function ln(n){return n.node.definite||n.match(void 0,(r,a)=>a==="id"&&r.type==="VariableDeclarator"&&r.definite)?"!":""}var yl=new Set(["DeclareClass","DeclareComponent","DeclareFunction","DeclareHook","DeclareVariable","DeclareExportDeclaration","DeclareExportAllDeclaration","DeclareOpaqueType","DeclareTypeAlias","DeclareEnum","DeclareInterface"]);function V(n){let{node:r}=n;return r.declare||yl.has(r.type)&&n.parent.type!=="DeclareExportDeclaration"?"declare ":""}var Dl=new Set(["TSAbstractMethodDefinition","TSAbstractPropertyDefinition","TSAbstractAccessorProperty"]);function Yt({node:n}){return n.abstract||Dl.has(n.type)?"abstract ":""}function Qe(n,r,a){let s=n.node;return s.typeArguments?a("typeArguments"):s.typeParameters?a("typeParameters"):""}function $r(n,r,a){return["::",a("callee")]}function ft(n,r,a){return n.type==="EmptyStatement"?";":n.type==="BlockStatement"||a?[" ",r]:f([x,r])}function mn(n,r){return["...",r("argument"),X(n,r)]}function Ht(n){return n.accessibility?n.accessibility+" ":""}function fl(n,r,a,s){let{node:o}=n,u=o.inexact?"...":"";return T(o,g.Dangling)?l([a,u,M(n,r,{indent:!0}),E,s]):[a,u,s]}function Vt(n,r,a){let{node:s}=n,o=[],u=s.type==="TupleExpression"?"#[":"[",c="]",p=s.type==="TupleTypeAnnotation"&&s.types?"types":s.type==="TSTupleType"||s.type==="TupleTypeAnnotation"?"elementTypes":"elements",d=s[p];if(d.length===0)o.push(fl(n,r,u,c));else{let _=O(!1,d,-1),ja=(_==null?void 0:_.type)!=="RestElement"&&!s.inexact,Ja=_===null,ec=Symbol("array"),tc=!r.__inJestEach&&d.length>1&&d.every((ic,uc,eh)=>{let rh=ic==null?void 0:ic.type;if(!U(ic)&&!se(ic))return!1;let ah=eh[uc+1];if(ah&&rh!==ah.type)return!1;let ih=U(ic)?"elements":"properties";return ic[ih]&&ic[ih].length>1}),rc=Fs(s,r),nc=ja?Ja?",":oe(r)?rc?b(",","",{groupId:ec}):b(","):"":"";o.push(l([u,f([E,rc?Fl(n,r,a,nc):[El(n,r,p,s.inexact,a),nc],M(n,r)]),E,c],{shouldBreak:tc,id:ec}))}return o.push(H(n),X(n,a)),o}function Fs(n,r){return U(n)&&n.elements.length>1&&n.elements.every(a=>a&&(Ce(a)||Rn(a)&&!T(a.argument))&&!T(a,g.Trailing|g.Line,s=>!te(r.originalText,R(s),{backwards:!0})))}function Ri({node:n},{originalText:r}){let a=o=>Ot(r,_t(r,o)),s=o=>r[o]===","?o:s(a(o+1));return vt(r,s(k(n)))}function El(n,r,a,s,o){let u=[];return n.each(({node:c,isLast:p})=>{u.push(c?l(o()):""),(!p||s)&&u.push([",",x,c&&Ri(n,r)?E:""])},a),s&&u.push("..."),u}function Fl(n,r,a,s){let o=[];return n.each(({isLast:u,next:c})=>{o.push([a(),u?s:","]),u||o.push(Ri(n,r)?[F,F]:T(c,g.Leading|g.Line)?F:x)},"elements"),Gt(o)}var Ji=new Proxy(()=>{},{get:()=>Ji}),yn=Ji,Cl=/^[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC][\$0-9A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]*$/,Al=n=>Cl.test(n),qi=Al;function dl(n){return n.length===1?n:n.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(?=\d)/,"$1$2").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e|$)/,"")}var Ze=dl,Dn=new WeakMap;function Gi(n){return/^(?:\d+|\d+\.\d+)$/.test(n)}function Wi(n,r){return r.parser==="json"||r.parser==="jsonc"||!z(n.key)||tt(fe(n.key),r).slice(1,-1)!==n.key.value?!1:!!(qi(n.key.value)&&!(r.parser==="babel-ts"&&n.type==="ClassProperty"||r.parser==="typescript"&&n.type==="PropertyDefinition")||Gi(n.key.value)&&String(Number(n.key.value))===n.key.value&&n.type!=="ImportAttribute"&&(r.parser==="babel"||r.parser==="acorn"||r.parser==="espree"||r.parser==="meriyah"||r.parser==="__babel_estree"))}function Tl(n,r){let{key:a}=n.node;return(a.type==="Identifier"||Ce(a)&&Gi(Ze(fe(a)))&&String(a.value)===Ze(fe(a))&&!(r.parser==="typescript"||r.parser==="babel-ts"))&&(r.parser==="json"||r.parser==="jsonc"||r.quoteProps==="consistent"&&Dn.get(n.parent))}function Et(n,r,a){let{node:s}=n;if(s.computed)return["[",a("key"),"]"];let{parent:o}=n,{key:u}=s;if(r.quoteProps==="consistent"&&!Dn.has(o)){let c=n.siblings.some(p=>!p.computed&&z(p.key)&&!Wi(p,r));Dn.set(o,c)}if(Tl(n,r)){let c=tt(JSON.stringify(u.type==="Identifier"?u.name:u.value.toString()),r);return n.call(p=>ye(p,c,r),"key")}return Wi(s,r)&&(r.quoteProps==="as-needed"||r.quoteProps==="consistent"&&!Dn.get(o))?n.call(c=>ye(c,/^\d/.test(u.value)?Ze(u.value):u.value,r),"key"):a("key")}function fn(n,r,a){let{node:s}=n;return s.shorthand?a("value"):Tt(n,r,a,Et(n,r,a),":","value")}var xl=({node:n,key:r,parent:a})=>r==="value"&&n.type==="FunctionExpression"&&(a.type==="ObjectMethod"||a.type==="ClassMethod"||a.type==="ClassPrivateMethod"||a.type==="MethodDefinition"||a.type==="TSAbstractMethodDefinition"||a.type==="TSDeclareMethod"||a.type==="Property"&&St(a));function En(n,r,a,s){if(xl(n))return Fn(n,a,r);let{node:o}=n,u=!1;if((o.type==="FunctionDeclaration"||o.type==="FunctionExpression")&&s!=null&&s.expandLastArg){let{parent:ja}=n;w(ja)&&(ue(ja).length>1||$(o).every(Ja=>Ja.type==="Identifier"&&!Ja.typeAnnotation))&&(u=!0)}let c=[V(n),o.async?"async ":"",`function${o.generator?"*":""} `,o.id?r("id"):""],p=Je(n,r,a,u),d=$t(n,r),_=ot(o,d);return c.push(Qe(n,a,r),l([_?l(p):p,d]),o.body?" ":"",r("body")),a.semi&&(o.declare||!o.body)&&c.push(";"),c}function Dr(n,r,a){let{node:s}=n,{kind:o}=s,u=s.value||s,c=[];return!o||o==="init"||o==="method"||o==="constructor"?u.async&&c.push("async "):(yn.ok(o==="get"||o==="set"),c.push(o," ")),u.generator&&c.push("*"),c.push(Et(n,r,a),s.optional||s.key.optional?"?":"",s===u?Fn(n,r,a):a("value")),c}function Fn(n,r,a){let{node:s}=n,o=Je(n,a,r),u=$t(n,a),c=vi(s),p=ot(s,u),d=[Qe(n,r,a),l([c?l(o,{shouldBreak:!0}):p?l(o):o,u])];return s.body?d.push(" ",a("body")):d.push(r.semi?";":""),d}function hl(n){let r=$(n);return r.length===1&&!n.typeParameters&&!T(n,g.Dangling)&&r[0].type==="Identifier"&&!r[0].typeAnnotation&&!T(r[0])&&!r[0].optional&&!n.predicate&&!n.returnType}function Cn(n,r){if(r.arrowParens==="always")return!1;if(r.arrowParens==="avoid"){let{node:a}=n;return hl(a)}return!1}function $t(n,r){let{node:a}=n,s=[X(n,r,"returnType")];return a.predicate&&s.push(r("predicate")),s}function Ui(n,r,a){let{node:s}=n,o=r.semi?";":"",u=[];if(s.argument){let d=a("argument");gl(r,s.argument)?d=["(",f([F,d]),F,")"]:(De(s.argument)||s.argument.type==="SequenceExpression"||r.experimentalTernaries&&s.argument.type==="ConditionalExpression"&&(s.argument.consequent.type==="ConditionalExpression"||s.argument.alternate.type==="ConditionalExpression"))&&(d=l([b("("),f([E,d]),E,b(")")])),u.push(" ",d)}let c=T(s,g.Dangling),p=o&&c&&T(s,g.Last|g.Line);return p&&u.push(o),c&&u.push(" ",M(n,r)),p||u.push(o),u}function Ni(n,r,a){return["return",Ui(n,r,a)]}function Xi(n,r,a){return["throw",Ui(n,r,a)]}function gl(n,r){if(Oe(n.originalText,r)||T(r,g.Leading,a=>Te(n.originalText,R(a),k(a)))&&!N(r))return!0;if(Mt(r)){let a=r,s;for(;s=au(a);)if(a=s,Oe(n.originalText,a))return!0}return!1}var hs=new WeakMap;function Yi(n){return hs.has(n)||hs.set(n,n.type==="ConditionalExpression"&&!ae(n,r=>r.type==="ObjectExpression")),hs.get(n)}var Hi=n=>n.type==="SequenceExpression";function Vi(n,r,a,s={}){let o=[],u,c=[],p=!1,d=!s.expandLastArg&&n.node.body.type==="ArrowFunctionExpression",_;(function ic(){let{node:uc}=n,eh=Sl(n,r,a,s);if(o.length===0)o.push(eh);else{let{leading:rh,trailing:ah}=cs(n,r);o.push([rh,eh]),c.unshift(ah)}d&&(p||(p=uc.returnType&&$(uc).length>0||uc.typeParameters||$(uc).some(rh=>rh.type!=="Identifier"))),!d||uc.body.type!=="ArrowFunctionExpression"?(u=a("body",s),_=uc.body):n.call(ic,"body")})();let ja=!Oe(r.originalText,_)&&(Hi(_)||Bl(_,u,r)||!p&&Yi(_)),Ja=n.key==="callee"&&lt(n.parent),ec=Symbol("arrow-chain"),tc=bl(n,s,{signatureDocs:o,shouldBreak:p}),rc,nc=!1;return d&&(Ja||s.assignmentLayout)&&(nc=!0,rc=s.assignmentLayout==="chain-tail-arrow-chain"||Ja&&!ja),u=Pl(n,r,s,{bodyDoc:u,bodyComments:c,functionBody:_,shouldPutBodyOnSameLine:ja}),l([l(nc?f([E,tc]):tc,{shouldBreak:rc,id:ec})," =>",d?At(u,{groupId:ec}):l(u),d&&Ja?b(E,"",{groupId:ec}):""])}function Sl(n,r,a,s){let{node:o}=n,u=[];if(o.async&&u.push("async "),Cn(n,r))u.push(a(["params",0]));else{let p=s.expandLastArg||s.expandFirstArg,d=$t(n,a);if(p){if(ne(d))throw new Dt;d=l(ar(d))}u.push(l([Je(n,a,r,p,!0),d]))}let c=M(n,r,{filter(p){let d=yt(r.originalText,k(p));return d!==!1&&r.originalText.slice(d,d+2)==="=>"}});return c&&u.push(" ",c),u}function Bl(n,r,a){var s,o;return U(n)||se(n)||n.type==="ArrowFunctionExpression"||n.type==="DoExpression"||n.type==="BlockStatement"||N(n)||((s=r.label)==null?void 0:s.hug)!==!1&&(((o=r.label)==null?void 0:o.embed)||Or(n,a.originalText))}function bl(n,r,{signatureDocs:a,shouldBreak:s}){if(a.length===1)return a[0];let{parent:o,key:u}=n;return u!=="callee"&&lt(o)||De(o)?l([a[0]," =>",f([x,P([" =>",x],a.slice(1))])],{shouldBreak:s}):u==="callee"&&lt(o)||r.assignmentLayout?l(P([" =>",x],a),{shouldBreak:s}):l(f(P([" =>",x],a)),{shouldBreak:s})}function Pl(n,r,a,{bodyDoc:s,bodyComments:o,functionBody:u,shouldPutBodyOnSameLine:c}){let{node:p,parent:d}=n,_=a.expandLastArg&&oe(r,"all")?b(","):"",ja=(a.expandLastArg||d.type==="JSXExpressionContainer")&&!T(p)?E:"";return c&&Yi(u)?[" ",l([b("","("),f([E,s]),b("",")"),_,ja]),o]:(Hi(u)&&(s=l(["(",f([E,s]),E,")"])),c?[" ",s,o]:[f([x,s,o]),_,ja])}var kl=(n,r,a)=>{if(!(n&&r==null)){if(r.findLast)return r.findLast(a);for(let s=r.length-1;s>=0;s--){let o=r[s];if(a(o,s,r))return o}}},$i=kl;function fr(n,r,a,s){let{node:o}=n,u=[],c=$i(!1,o[s],p=>p.type!=="EmptyStatement");return n.each(({node:p})=>{p.type!=="EmptyStatement"&&(u.push(a()),p!==c&&(u.push(F),pe(p,r)&&u.push(F)))},s),u}function An(n,r,a){let s=Il(n,r,a),{node:o,parent:u}=n;if(o.type==="Program"&&(u==null?void 0:u.type)!=="ModuleExpression")return s?[s,F]:"";let c=[];if(o.type==="StaticBlock"&&c.push("static "),c.push("{"),s)c.push(f([F,s]),F);else{let p=n.grandparent;u.type==="ArrowFunctionExpression"||u.type==="FunctionExpression"||u.type==="FunctionDeclaration"||u.type==="ComponentDeclaration"||u.type==="HookDeclaration"||u.type==="ObjectMethod"||u.type==="ClassMethod"||u.type==="ClassPrivateMethod"||u.type==="ForStatement"||u.type==="WhileStatement"||u.type==="DoWhileStatement"||u.type==="DoExpression"||u.type==="ModuleExpression"||u.type==="CatchClause"&&!p.finalizer||u.type==="TSModuleDeclaration"||o.type==="StaticBlock"||c.push(F)}return c.push("}"),c}function Il(n,r,a){let{node:s}=n,o=L(s.directives),u=s.body.some(d=>d.type!=="EmptyStatement"),c=T(s,g.Dangling);if(!o&&!u&&!c)return"";let p=[];return o&&(p.push(fr(n,r,a,"directives")),(u||c)&&(p.push(F),pe(O(!1,s.directives,-1),r)&&p.push(F))),u&&p.push(fr(n,r,a,"body")),c&&p.push(M(n,r)),p}function Ll(n){let r=new WeakMap;return function(a){return r.has(a)||r.set(a,Symbol(n)),r.get(a)}}var dn=Ll;function wl(n){switch(n){case null:return"";case"PlusOptional":return"+?";case"MinusOptional":return"-?";case"Optional":return"?"}}function Ki(n,r,a){let{node:s}=n;return l([s.variance?a("variance"):"","[",f([a("keyTparam")," in ",a("sourceType")]),"]",wl(s.optional),": ",a("propType")])}function gs(n,r){return n==="+"||n==="-"?n+r:r}function zi(n,r,a){let{node:s}=n,o=Te(r.originalText,R(s),R(s.typeParameter));return l(["{",f([r.bracketSpacing?x:E,l([a("typeParameter"),s.optional?gs(s.optional,"?"):"",s.typeAnnotation?": ":"",a("typeAnnotation")]),r.semi?b(";"):""]),M(n,r),r.bracketSpacing?x:E,"}"],{shouldBreak:o})}var Er=dn("typeParameters");function Ol(n,r,a){let{node:s}=n;return $(s).length===1&&s.type.startsWith("TS")&&!s[a][0].constraint&&n.parent.type==="ArrowFunctionExpression"&&!(r.filepath&&/\.ts$/.test(r.filepath))}function It(n,r,a,s){let{node:o}=n;if(!o[s])return"";if(!Array.isArray(o[s]))return a(s);let u=n.getNode(2),c=u&&Bt(u),p=n.match(_=>!(_[s].length===1&&we(_[s][0])),void 0,(_,ja)=>ja==="typeAnnotation",_=>_.type==="Identifier",As);if(o[s].length===0||!p&&(c||o[s].length===1&&(o[s][0].type==="NullableTypeAnnotation"||Ts(o[s][0]))))return["<",P(", ",n.map(a,s)),_l(n,r),">"];let d=o.type==="TSTypeParameterInstantiation"?"":Ol(n,r,s)?",":oe(r)?b(","):"";return l(["<",f([E,P([",",x],n.map(a,s))]),d,E,">"],{id:Er(o)})}function _l(n,r){let{node:a}=n;if(!T(a,g.Dangling))return"";let s=!T(a,g.Line),o=M(n,r,{indent:!s});return s?o:[o,F]}function Tn(n,r,a){let{node:s,parent:o}=n,u=[s.type==="TSTypeParameter"&&s.const?"const ":""],c=s.type==="TSTypeParameter"?a("name"):s.name;if(o.type==="TSMappedType")return o.readonly&&u.push(gs(o.readonly,"readonly")," "),u.push("[",c),s.constraint&&u.push(" in ",a("constraint")),o.nameType&&u.push(" as ",n.callParent(()=>a("nameType"))),u.push("]"),u;if(s.variance&&u.push(a("variance")),s.in&&u.push("in "),s.out&&u.push("out "),u.push(c),s.bound&&(s.usesExtendsBound&&u.push(" extends "),u.push(X(n,a,"bound"))),s.constraint){let p=Symbol("constraint");u.push(" extends",l(f(x),{id:p}),ke,At(a("constraint"),{groupId:p}))}return s.default&&u.push(" = ",a("default")),l(u)}var Qi=j(["ClassProperty","PropertyDefinition","ClassPrivateProperty","ClassAccessorProperty","AccessorProperty","TSAbstractPropertyDefinition","TSAbstractAccessorProperty"]);function xn(n,r,a){let{node:s}=n,o=[V(n),Yt(n),"class"],u=T(s.id,g.Trailing)||T(s.typeParameters,g.Trailing)||T(s.superClass)||L(s.extends)||L(s.mixins)||L(s.implements),c=[],p=[];if(s.id&&c.push(" ",a("id")),c.push(a("typeParameters")),s.superClass){let d=[jl(n,r,a),a("superTypeParameters")],_=n.call(ja=>["extends ",ye(ja,d,r)],"superClass");u?p.push(x,l(_)):p.push(" ",_)}else p.push(Ss(n,r,a,"extends"));if(p.push(Ss(n,r,a,"mixins"),Ss(n,r,a,"implements")),u){let d;ea(s)?d=[...c,f(p)]:d=f([...c,p]),o.push(l(d,{id:Zi(s)}))}else o.push(...c,...p);return o.push(" ",a("body")),o}var Zi=dn("heritageGroup");function Bs(n){return b(F,"",{groupId:Zi(n)})}function vl(n){return["extends","mixins","implements"].reduce((r,a)=>r+(Array.isArray(n[a])?n[a].length:0),n.superClass?1:0)>1}function ea(n){return n.typeParameters&&!T(n.typeParameters,g.Trailing|g.Line)&&!vl(n)}function Ss(n,r,a,s){let{node:o}=n;if(!L(o[s]))return"";let u=M(n,r,{marker:s});return[ea(o)?b(" ",x,{groupId:Er(o.typeParameters)}):x,u,u&&F,s,l(f([x,P([",",x],n.map(a,s))]))]}function jl(n,r,a){let s=a("superClass"),{parent:o}=n;return o.type==="AssignmentExpression"?l(b(["(",f([E,s]),E,")"],s)):s}function hn(n,r,a){let{node:s}=n,o=[];return L(s.decorators)&&o.push(Es(n,r,a)),o.push(Ht(s)),s.static&&o.push("static "),o.push(Yt(n)),s.override&&o.push("override "),o.push(Dr(n,r,a)),o}function gn(n,r,a){let{node:s}=n,o=[],u=r.semi?";":"";L(s.decorators)&&o.push(Es(n,r,a)),o.push(Ht(s),V(n)),s.static&&o.push("static "),o.push(Yt(n)),s.override&&o.push("override "),s.readonly&&o.push("readonly "),s.variance&&o.push(a("variance")),(s.type==="ClassAccessorProperty"||s.type==="AccessorProperty"||s.type==="TSAbstractAccessorProperty")&&o.push("accessor "),o.push(Et(n,r,a),H(n),ln(n),X(n,a));let c=s.type==="TSAbstractPropertyDefinition"||s.type==="TSAbstractAccessorProperty";return[Tt(n,r,a,o," =",c?void 0:"value"),u]}function ta(n,r,a){let{node:s}=n,o=[];return n.each(({node:u,next:c,isLast:p})=>{o.push(a()),!r.semi&&Qi(u)&&Ml(u,c)&&o.push(";"),p||(o.push(F),pe(u,r)&&o.push(F))},"body"),T(s,g.Dangling)&&o.push(M(n,r)),[L(s.body)?Bs(n.parent):"","{",o.length>0?[f([F,o]),F]:"","}"]}function Ml(n,r){var a;let{type:s,name:o}=n.key;if(!n.computed&&s==="Identifier"&&(o==="static"||o==="get"||o==="set")&&!n.value&&!n.typeAnnotation)return!0;if(!r||r.static||r.accessibility||r.readonly)return!1;if(!r.computed){let u=(a=r.key)==null?void 0:a.name;if(u==="in"||u==="instanceof")return!0}if(Qi(r)&&r.variance&&!r.static&&!r.declare)return!0;switch(r.type){case"ClassProperty":case"PropertyDefinition":case"TSAbstractPropertyDefinition":return r.computed;case"MethodDefinition":case"TSAbstractMethodDefinition":case"ClassMethod":case"ClassPrivateMethod":{if((r.value?r.value.async:r.async)||r.kind==="get"||r.kind==="set")return!1;let u=r.value?r.value.generator:r.generator;return!!(r.computed||u)}case"TSIndexSignature":return!0}return!1}function ra(n,r){if(r.semi||bs(n,r)||ks(n,r))return!1;let{node:a,key:s,parent:o}=n;return!!(a.type==="ExpressionStatement"&&(s==="body"&&(o.type==="Program"||o.type==="BlockStatement"||o.type==="StaticBlock"||o.type==="TSModuleBlock")||s==="consequent"&&o.type==="SwitchCase")&&n.call(()=>na(n,r),"expression"))}function na(n,r){let{node:a}=n;switch(a.type){case"ParenthesizedExpression":case"TypeCastExpression":case"ArrayExpression":case"ArrayPattern":case"TemplateLiteral":case"TemplateElement":case"RegExpLiteral":return!0;case"ArrowFunctionExpression":if(!Cn(n,r))return!0;break;case"UnaryExpression":{let{prefix:s,operator:o}=a;if(s&&(o==="+"||o==="-"))return!0;break}case"BindExpression":if(!a.object)return!0;break;case"Literal":if(a.regex)return!0;break;default:if(N(a))return!0}return Be(n,r)?!0:Mt(a)?n.call(()=>na(n,r),...Ir(a)):!1}function bs({node:n,parent:r},a){return(a.parentParser==="markdown"||a.parentParser==="mdx")&&n.type==="ExpressionStatement"&&N(n.expression)&&r.type==="Program"&&r.body.length===1}function Ps(n){switch(n.type){case"MemberExpression":switch(n.property.type){case"Identifier":case"NumericLiteral":case"StringLiteral":return Ps(n.object)}return!1;case"Identifier":return!0;default:return!1}}function ks({node:n,parent:r},a){return(a.parser==="__vue_event_binding"||a.parser==="__vue_ts_event_binding")&&n.type==="ExpressionStatement"&&r.type==="Program"&&r.body.length===1}function sa(n,r,a){let s=[a("expression")];return ks(n,r)?Ps(n.node.expression)&&s.push(";"):bs(n,r)||r.semi&&s.push(";"),s}function ua(n,r,a){if(r.__isVueBindings||r.__isVueForBindingLeft){let s=n.map(a,"program","body",0,"params");if(s.length===1)return s[0];let o=P([",",x],s);return r.__isVueForBindingLeft?["(",f([E,l(o)]),E,")"]:o}if(r.__isEmbeddedTypescriptGenericParameters){let s=n.map(a,"program","body",0,"typeParameters","params");return P([",",x],s)}}function oa(n,r){let{node:a}=n;switch(a.type){case"RegExpLiteral":return ia(a);case"BigIntLiteral":return Sn(a.extra.raw);case"NumericLiteral":return Ze(a.extra.raw);case"StringLiteral":return Ie(tt(a.extra.raw,r));case"NullLiteral":return"null";case"BooleanLiteral":return String(a.value);case"DecimalLiteral":return Ze(a.value)+"m";case"DirectiveLiteral":return aa(a.extra.raw,r);case"Literal":{if(a.regex)return ia(a.regex);if(a.bigint)return Sn(a.raw);if(a.decimal)return Ze(a.decimal)+"m";let{value:s}=a;return typeof s=="number"?Ze(a.raw):typeof s=="string"?Rl(n)?aa(a.raw,r):Ie(tt(a.raw,r)):String(s)}}}function Rl(n){if(n.key!=="expression")return;let{parent:r}=n;return r.type==="ExpressionStatement"&&r.directive}function Sn(n){return n.toLowerCase()}function ia({pattern:n,flags:r}){return r=[...r].sort().join(""),`/${n}/${r}`}function aa(n,r){let a=n.slice(1,-1);if(a.includes('"')||a.includes("'"))return n;let s=r.singleQuote?"'":'"';return s+a+s}function Jl(n,r,a){let s=n.originalText.slice(r,a);for(let o of n[Symbol.for("comments")]){let u=R(o);if(u>a)break;let c=k(o);if(c<r)continue;let p=c-u;s=s.slice(0,u-r)+" ".repeat(p)+s.slice(c-r)}return s}var Fr=Jl;function pa(n,r,a){let{node:s}=n;return["import",s.module?" module":"",s.phase?` ${s.phase}`:"",Ls(s),ma(n,r,a),la(n,r,a),Da(n,r,a),r.semi?";":""]}var ca=n=>n.type==="ExportDefaultDeclaration"||n.type==="DeclareExportDeclaration"&&n.default;function Bn(n,r,a){let{node:s}=n,o=[di(n,r,a),V(n),"export",ca(s)?" default":""],{declaration:u,exported:c}=s;return T(s,g.Dangling)&&(o.push(" ",M(n,r)),_r(s)&&o.push(F)),u?o.push(" ",a("declaration")):(o.push(Gl(s)),s.type==="ExportAllDeclaration"||s.type==="DeclareExportAllDeclaration"?(o.push(" *"),c&&o.push(" as ",a("exported"))):o.push(ma(n,r,a)),o.push(la(n,r,a),Da(n,r,a))),o.push(Wl(s,r)),o}var ql=j(["ClassDeclaration","ComponentDeclaration","FunctionDeclaration","TSInterfaceDeclaration","DeclareClass","DeclareComponent","DeclareFunction","DeclareHook","HookDeclaration","TSDeclareFunction","EnumDeclaration"]);function Wl(n,r){return r.semi&&(!n.declaration||ca(n)&&!ql(n.declaration))?";":""}function Is(n,r=!0){return n&&n!=="value"?`${r?" ":""}${n}${r?"":" "}`:""}function Ls(n,r){return Is(n.importKind,r)}function Gl(n){return Is(n.exportKind)}function la(n,r,a){let{node:s}=n;if(!s.source)return"";let o=[];return ya(s,r)&&o.push(" from"),o.push(" ",a("source")),o}function ma(n,r,a){let{node:s}=n;if(!ya(s,r))return"";let o=[" "];if(L(s.specifiers)){let u=[],c=[];n.each(()=>{let p=n.node.type;if(p==="ExportNamespaceSpecifier"||p==="ExportDefaultSpecifier"||p==="ImportNamespaceSpecifier"||p==="ImportDefaultSpecifier")u.push(a());else if(p==="ExportSpecifier"||p==="ImportSpecifier")c.push(a());else throw new Me(s,"specifier")},"specifiers"),o.push(P(", ",u)),c.length>0&&(u.length>0&&o.push(", "),c.length>1||u.length>0||s.specifiers.some(p=>T(p))?o.push(l(["{",f([r.bracketSpacing?x:E,P([",",x],c)]),b(oe(r)?",":""),r.bracketSpacing?x:E,"}"])):o.push(["{",r.bracketSpacing?" ":"",...c,r.bracketSpacing?" ":"","}"]))}else o.push("{}");return o}function ya(n,r){return n.type!=="ImportDeclaration"||L(n.specifiers)||n.importKind==="type"?!0:Fr(r,R(n),R(n.source)).trimEnd().endsWith("from")}function Ul(n,r){var a,s;if((a=n.extra)!=null&&a.deprecatedAssertSyntax)return"assert";let o=Fr(r,k(n.source),(s=n.attributes)!=null&&s[0]?R(n.attributes[0]):k(n)).trimStart();return o.startsWith("assert")?"assert":o.startsWith("with")||L(n.attributes)?"with":void 0}function Da(n,r,a){let{node:s}=n;if(!s.source)return"";let o=Ul(s,r);if(!o)return"";let u=[` ${o} {`];return L(s.attributes)&&(r.bracketSpacing&&u.push(" "),u.push(P(", ",n.map(a,"attributes"))),r.bracketSpacing&&u.push(" ")),u.push("}"),u}function fa(n,r,a){let{node:s}=n,{type:o}=s,u=o.startsWith("Import"),c=u?"imported":"local",p=u?"local":"exported",d=s[c],_=s[p],ja="",Ja="";return o==="ExportNamespaceSpecifier"||o==="ImportNamespaceSpecifier"?ja="*":d&&(ja=a(c)),_&&!Nl(s)&&(Ja=a(p)),[Is(o==="ImportSpecifier"?s.importKind:s.exportKind,!1),ja,ja&&Ja?" as ":"",Ja]}function Nl(n){if(n.type!=="ImportSpecifier"&&n.type!=="ExportSpecifier")return!1;let{local:r,[n.type==="ImportSpecifier"?"imported":"exported"]:a}=n;if(r.type!==a.type||!ru(r,a))return!1;if(z(r))return r.value===a.value&&fe(r)===fe(a);switch(r.type){case"Identifier":return r.name===a.name;default:return!1}}function xt(n,r,a){var s;let o=r.semi?";":"",{node:u}=n,c=u.type==="ObjectTypeAnnotation",p=u.type==="TSEnumDeclaration"||u.type==="EnumBooleanBody"||u.type==="EnumNumberBody"||u.type==="EnumBigIntBody"||u.type==="EnumStringBody"||u.type==="EnumSymbolBody",d=[u.type==="TSTypeLiteral"||p?"members":u.type==="TSInterfaceBody"?"body":"properties"];c&&d.push("indexers","callProperties","internalSlots");let _=d.flatMap(oh=>n.map(({node:uh})=>({node:uh,printed:a(),loc:R(uh)}),oh));d.length>1&&_.sort((oh,uh)=>oh.loc-uh.loc);let{parent:ja,key:Ja}=n,ec=c&&Ja==="body"&&(ja.type==="InterfaceDeclaration"||ja.type==="DeclareInterface"||ja.type==="DeclareClass"),tc=u.type==="TSInterfaceBody"||p||ec||u.type==="ObjectPattern"&&ja.type!=="FunctionDeclaration"&&ja.type!=="FunctionExpression"&&ja.type!=="ArrowFunctionExpression"&&ja.type!=="ObjectMethod"&&ja.type!=="ClassMethod"&&ja.type!=="ClassPrivateMethod"&&ja.type!=="AssignmentPattern"&&ja.type!=="CatchClause"&&u.properties.some(oh=>oh.value&&(oh.value.type==="ObjectPattern"||oh.value.type==="ArrayPattern"))||u.type!=="ObjectPattern"&&_.length>0&&Te(r.originalText,R(u),_[0].loc),rc=ec?";":u.type==="TSInterfaceBody"||u.type==="TSTypeLiteral"?b(o,";"):",",nc=u.type==="RecordExpression"?"#{":u.exact?"{|":"{",ic=u.exact?"|}":"}",uc=[],eh=_.map(oh=>{let uh=[...uc,l(oh.printed)];return uc=[rc,x],(oh.node.type==="TSPropertySignature"||oh.node.type==="TSMethodSignature"||oh.node.type==="TSConstructSignatureDeclaration"||oh.node.type==="TSCallSignatureDeclaration")&&T(oh.node,g.PrettierIgnore)&&uc.shift(),pe(oh.node,r)&&uc.push(F),uh});if(u.inexact||u.hasUnknownMembers){let oh;if(T(u,g.Dangling)){let uh=T(u,g.Line);oh=[M(n,r),uh||te(r.originalText,k(O(!1,ct(u),-1)))?F:x,"..."]}else oh=["..."];eh.push([...uc,...oh])}let rh=(s=O(!1,_,-1))==null?void 0:s.node,ah=!(u.inexact||u.hasUnknownMembers||rh&&(rh.type==="RestElement"||(rh.type==="TSPropertySignature"||rh.type==="TSCallSignatureDeclaration"||rh.type==="TSMethodSignature"||rh.type==="TSConstructSignatureDeclaration")&&T(rh,g.PrettierIgnore))),ih;if(eh.length===0){if(!T(u,g.Dangling))return[nc,ic,X(n,a)];ih=l([nc,M(n,r,{indent:!0}),E,ic,H(n),X(n,a)])}else ih=[ec&&L(u.properties)?Bs(ja):"",nc,f([r.bracketSpacing?x:E,...eh]),b(ah&&(rc!==","||oe(r))?rc:""),r.bracketSpacing?x:E,ic,H(n),X(n,a)];return n.match(oh=>oh.type==="ObjectPattern"&&!L(oh.decorators),ws)||we(u)&&(n.match(void 0,(oh,uh)=>uh==="typeAnnotation",(oh,uh)=>uh==="typeAnnotation",ws)||n.match(void 0,(oh,uh)=>oh.type==="FunctionTypeParam"&&uh==="typeAnnotation",ws))||!tc&&n.match(oh=>oh.type==="ObjectPattern",oh=>oh.type==="AssignmentExpression"||oh.type==="VariableDeclarator")?ih:l(ih,{shouldBreak:tc})}function ws(n,r){return(r==="params"||r==="parameters"||r==="this"||r==="rest")&&ds(n)}function Xl(n){let r=[n];for(let a=0;a<r.length;a++){let s=r[a];for(let o of["test","consequent","alternate"]){let u=s[o];if(N(u))return!0;u.type==="ConditionalExpression"&&r.push(u)}}return!1}function Yl(n,r,a){let{node:s}=n,o=s.type==="ConditionalExpression",u=o?"alternate":"falseType",{parent:c}=n,p=o?a("test"):[a("checkType")," ","extends"," ",a("extendsType")];return c.type===s.type&&c[u]===s?he(2,p):p}var Hl=new Map([["AssignmentExpression","right"],["VariableDeclarator","init"],["ReturnStatement","argument"],["ThrowStatement","argument"],["UnaryExpression","argument"],["YieldExpression","argument"],["AwaitExpression","argument"]]);function Vl(n){let{node:r}=n;if(r.type!=="ConditionalExpression")return!1;let a,s=r;for(let o=0;!a;o++){let u=n.getParentNode(o);if(u.type==="ChainExpression"&&u.expression===s||w(u)&&u.callee===s||q(u)&&u.object===s||u.type==="TSNonNullExpression"&&u.expression===s){s=u;continue}u.type==="NewExpression"&&u.callee===s||de(u)&&u.expression===s?(a=n.getParentNode(o+1),s=u):a=u}return s===r?!1:a[Hl.get(a.type)]===s}function Ea(n,r,a){let{node:s}=n,o=s.type==="ConditionalExpression",u=o?"consequent":"trueType",c=o?"alternate":"falseType",p=o?["test"]:["checkType","extendsType"],d=s[u],_=s[c],ja=[],Ja=!1,{parent:ec}=n,tc=ec.type===s.type&&p.some(hh=>ec[hh]===s),rc=ec.type===s.type&&!tc,nc,ic,uc=0;do ic=nc||s,nc=n.getParentNode(uc),uc++;while(nc&&nc.type===s.type&&p.every(hh=>nc[hh]!==ic));let eh=nc||ec,rh=ic;if(o&&(N(s[p[0]])||N(d)||N(_)||Xl(rh))){Ja=!0,rc=!0;let hh=gh=>[b("("),f([E,gh]),E,b(")")],dh=gh=>gh.type==="NullLiteral"||gh.type==="Literal"&&gh.value===null||gh.type==="Identifier"&&gh.name==="undefined";ja.push(" ? ",dh(d)?a(u):hh(a(u))," : ",_.type===s.type||dh(_)?a(c):hh(a(c)))}else{let hh=gh=>r.useTabs?f(a(gh)):he(2,a(gh)),dh=[x,"? ",d.type===s.type?b("","("):"",hh(u),d.type===s.type?b("",")"):"",x,": ",hh(c)];ja.push(ec.type!==s.type||ec[c]===s||tc?dh:r.useTabs?Jr(f(dh)):he(Math.max(0,r.tabWidth-2),dh))}let ah=[u,c,...p].some(hh=>T(s[hh],dh=>re(dh)&&Te(r.originalText,R(dh),k(dh)))),ih=hh=>ec===eh?l(hh,{shouldBreak:ah}):ah?[hh,Ee]:hh,oh=!Ja&&(q(ec)||ec.type==="NGPipeExpression"&&ec.left===s)&&!ec.computed,uh=Vl(n),ch=ih([Yl(n,r,a),rc?ja:f(ja),o&&oh&&!uh?E:""]);return tc||uh?l([f([E,ch]),E]):ch}function $l(n,r){return(q(r)||r.type==="NGPipeExpression"&&r.left===n)&&!r.computed}function Kl(n,r,a,s){return[...n.map(o=>ct(o)),ct(r),ct(a)].flat().some(o=>re(o)&&Te(s.originalText,R(o),k(o)))}var zl=new Map([["AssignmentExpression","right"],["VariableDeclarator","init"],["ReturnStatement","argument"],["ThrowStatement","argument"],["UnaryExpression","argument"],["YieldExpression","argument"],["AwaitExpression","argument"]]);function Ql(n){let{node:r}=n;if(r.type!=="ConditionalExpression")return!1;let a,s=r;for(let o=0;!a;o++){let u=n.getParentNode(o);if(u.type==="ChainExpression"&&u.expression===s||w(u)&&u.callee===s||q(u)&&u.object===s||u.type==="TSNonNullExpression"&&u.expression===s){s=u;continue}u.type==="NewExpression"&&u.callee===s||de(u)&&u.expression===s?(a=n.getParentNode(o+1),s=u):a=u}return s===r?!1:a[zl.get(a.type)]===s}var Os=n=>[b("("),f([E,n]),E,b(")")];function Kt(n,r,a,s){if(!r.experimentalTernaries)return Ea(n,r,a);let{node:o}=n,u=o.type==="ConditionalExpression",c=o.type==="TSConditionalType"||o.type==="ConditionalTypeAnnotation",p=u?"consequent":"trueType",d=u?"alternate":"falseType",_=u?["test"]:["checkType","extendsType"],ja=o[p],Ja=o[d],ec=_.map(qh=>o[qh]),{parent:tc}=n,rc=tc.type===o.type,nc=rc&&_.some(qh=>tc[qh]===o),ic=rc&&tc[d]===o,uc=ja.type===o.type,eh=Ja.type===o.type,rh=eh||ic,ah=r.tabWidth>2||r.useTabs,ih,oh,uh=0;do oh=ih||o,ih=n.getParentNode(uh),uh++;while(ih&&ih.type===o.type&&_.every(qh=>ih[qh]!==oh));let ch=ih||tc,hh=s&&s.assignmentLayout&&s.assignmentLayout!=="break-after-operator"&&(tc.type==="AssignmentExpression"||tc.type==="VariableDeclarator"||tc.type==="ClassProperty"||tc.type==="PropertyDefinition"||tc.type==="ClassPrivateProperty"||tc.type==="ObjectProperty"||tc.type==="Property"),dh=(tc.type==="ReturnStatement"||tc.type==="ThrowStatement")&&!(uc||eh),gh=u&&ch.type==="JSXExpressionContainer"&&n.grandparent.type!=="JSXAttribute",fh=Ql(n),vh=$l(o,tc),ph=c&&Be(n,r),yh=ah?r.useTabs?"	":" ".repeat(r.tabWidth-1):"",xh=Kl(ec,ja,Ja,r)||uc||eh,_h=!rh&&!rc&&!c&&(gh?ja.type==="NullLiteral"||ja.type==="Literal"&&ja.value===null:sr(ja,r)&&qn(o.test,3)),bh=rh||ic||c&&!rc||rc&&u&&qn(o.test,1)||_h,Dh=[];!uc&&T(ja,g.Dangling)&&n.call(qh=>{Dh.push(M(qh,r),F)},"consequent");let Th=[];T(o.test,g.Dangling)&&n.call(qh=>{Th.push(M(qh,r))},"test"),!eh&&T(Ja,g.Dangling)&&n.call(qh=>{Th.push(M(qh,r))},"alternate"),T(o,g.Dangling)&&Th.push(M(n,r));let Ch=Symbol("test"),wh=Symbol("consequent"),Nh=Symbol("test-and-consequent"),Rh=u?[Os(a("test")),o.test.type==="ConditionalExpression"?Ee:""]:[a("checkType")," ","extends"," ",o.extendsType.type==="TSConditionalType"||o.extendsType.type==="ConditionalTypeAnnotation"||o.extendsType.type==="TSMappedType"?a("extendsType"):l(Os(a("extendsType")))],kh=l([Rh," ?"],{id:Ch}),Lh=a(p),Fh=f([uc||gh&&(N(ja)||rc||rh)?F:x,Dh,Lh]),Wh=bh?l([kh,rh?Fh:b(Fh,l(Fh,{id:wh}),{groupId:Ch})],{id:Nh}):[kh,Fh],Qh=a(d),jh=_h?b(Qh,Jr(Os(Qh)),{groupId:Nh}):Qh,Hh=[Wh,Th.length>0?[f([F,Th]),F]:eh?F:_h?b(x," ",{groupId:Nh}):x,":",eh?" ":ah?bh?b(yh,b(rh||_h?" ":yh," "),{groupId:Nh}):b(yh," "):" ",eh?jh:l([f(jh),gh&&!_h?E:""]),vh&&!fh?E:"",xh?Ee:""];return hh&&!xh?l(f([E,l(Hh)])):hh||dh?l(f(Hh)):fh||c&&nc?l([f([E,Hh]),ph?E:""]):tc===ch?l(Hh):Hh}function Fa(n,r,a,s){let{node:o}=n;if(Lr(o))return oa(n,r);let u=r.semi?";":"",c=[];switch(o.type){case"JsExpressionRoot":return a("node");case"JsonRoot":return[a("node"),F];case"File":return ua(n,r,a)??a("program");case"EmptyStatement":return"";case"ExpressionStatement":return sa(n,r,a);case"ChainExpression":return a("expression");case"ParenthesizedExpression":return!T(o.expression)&&(se(o.expression)||U(o.expression))?["(",a("expression"),")"]:l(["(",f([E,a("expression")]),E,")"]);case"AssignmentExpression":return Li(n,r,a);case"VariableDeclarator":return wi(n,r,a);case"BinaryExpression":case"LogicalExpression":return Vr(n,r,a);case"AssignmentPattern":return[a("left")," = ",a("right")];case"OptionalMemberExpression":case"MemberExpression":return Bi(n,r,a);case"MetaProperty":return[a("meta"),".",a("property")];case"BindExpression":return o.object&&c.push(a("object")),c.push(l(f([E,$r(n,r,a)]))),c;case"Identifier":return[o.name,H(n),ln(n),X(n,a)];case"V8IntrinsicIdentifier":return["%",o.name];case"SpreadElement":case"SpreadElementPattern":case"SpreadPropertyPattern":case"RestElement":return mn(n,a);case"FunctionDeclaration":case"FunctionExpression":return En(n,a,r,s);case"ArrowFunctionExpression":return Vi(n,r,a,s);case"YieldExpression":return c.push("yield"),o.delegate&&c.push("*"),o.argument&&c.push(" ",a("argument")),c;case"AwaitExpression":if(c.push("await"),o.argument){c.push(" ",a("argument"));let{parent:p}=n;if(w(p)&&p.callee===o||q(p)&&p.object===o){c=[f([E,...c]),E];let d=n.findAncestor(_=>_.type==="AwaitExpression"||_.type==="BlockStatement");if((d==null?void 0:d.type)!=="AwaitExpression"||!ae(d.argument,_=>_===o))return l(c)}}return c;case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ExportAllDeclaration":return Bn(n,r,a);case"ImportDeclaration":return pa(n,r,a);case"ImportSpecifier":case"ExportSpecifier":case"ImportNamespaceSpecifier":case"ExportNamespaceSpecifier":case"ImportDefaultSpecifier":case"ExportDefaultSpecifier":return fa(n,r,a);case"ImportAttribute":return fn(n,r,a);case"Import":return"import";case"Program":case"BlockStatement":case"StaticBlock":return An(n,r,a);case"ClassBody":return ta(n,r,a);case"ThrowStatement":return Xi(n,r,a);case"ReturnStatement":return Ni(n,r,a);case"NewExpression":case"ImportExpression":case"OptionalCallExpression":case"CallExpression":return Kr(n,r,a);case"ObjectExpression":case"ObjectPattern":case"RecordExpression":return xt(n,r,a);case"Property":return St(o)?Dr(n,r,a):fn(n,r,a);case"ObjectProperty":return fn(n,r,a);case"ObjectMethod":return Dr(n,r,a);case"Decorator":return["@",a("expression")];case"ArrayExpression":case"ArrayPattern":case"TupleExpression":return Vt(n,r,a);case"SequenceExpression":{let{parent:p}=n;if(p.type==="ExpressionStatement"||p.type==="ForStatement"){let d=[];return n.each(({isFirst:_})=>{_?d.push(a()):d.push(",",f([x,a()]))},"expressions"),l(d)}return l(P([",",x],n.map(a,"expressions")))}case"ThisExpression":return"this";case"Super":return"super";case"Directive":return[a("value"),u];case"UnaryExpression":return c.push(o.operator),/[a-z]$/.test(o.operator)&&c.push(" "),T(o.argument)?c.push(l(["(",f([E,a("argument")]),E,")"])):c.push(a("argument")),c;case"UpdateExpression":return[o.prefix?o.operator:"",a("argument"),o.prefix?"":o.operator];case"ConditionalExpression":return Kt(n,r,a,s);case"VariableDeclaration":{let p=n.map(a,"declarations"),d=n.parent,_=d.type==="ForStatement"||d.type==="ForInStatement"||d.type==="ForOfStatement",ja=o.declarations.some(ec=>ec.init),Ja;return p.length===1&&!T(o.declarations[0])?Ja=p[0]:p.length>0&&(Ja=f(p[0])),c=[V(n),o.kind,Ja?[" ",Ja]:"",f(p.slice(1).map(ec=>[",",ja&&!_?F:x,ec]))],_&&d.body!==o||c.push(u),l(c)}case"WithStatement":return l(["with (",a("object"),")",ft(o.body,a("body"))]);case"IfStatement":{let p=ft(o.consequent,a("consequent")),d=l(["if (",l([f([E,a("test")]),E]),")",p]);if(c.push(d),o.alternate){let _=T(o.consequent,g.Trailing|g.Line)||_r(o),ja=o.consequent.type==="BlockStatement"&&!_;c.push(ja?" ":F),T(o,g.Dangling)&&c.push(M(n,r),_?F:" "),c.push("else",l(ft(o.alternate,a("alternate"),o.alternate.type==="IfStatement")))}return c}case"ForStatement":{let p=ft(o.body,a("body")),d=M(n,r),_=d?[d,E]:"";return!o.init&&!o.test&&!o.update?[_,l(["for (;;)",p])]:[_,l(["for (",l([f([E,a("init"),";",x,a("test"),";",x,a("update")]),E]),")",p])]}case"WhileStatement":return l(["while (",l([f([E,a("test")]),E]),")",ft(o.body,a("body"))]);case"ForInStatement":return l(["for (",a("left")," in ",a("right"),")",ft(o.body,a("body"))]);case"ForOfStatement":return l(["for",o.await?" await":""," (",a("left")," of ",a("right"),")",ft(o.body,a("body"))]);case"DoWhileStatement":{let p=ft(o.body,a("body"));return c=[l(["do",p])],o.body.type==="BlockStatement"?c.push(" "):c.push(F),c.push("while (",l([f([E,a("test")]),E]),")",u),c}case"DoExpression":return[o.async?"async ":"","do ",a("body")];case"BreakStatement":case"ContinueStatement":return c.push(o.type==="BreakStatement"?"break":"continue"),o.label&&c.push(" ",a("label")),c.push(u),c;case"LabeledStatement":return o.body.type==="EmptyStatement"?[a("label"),":;"]:[a("label"),": ",a("body")];case"TryStatement":return["try ",a("block"),o.handler?[" ",a("handler")]:"",o.finalizer?[" finally ",a("finalizer")]:""];case"CatchClause":if(o.param){let p=T(o.param,_=>!re(_)||_.leading&&te(r.originalText,k(_))||_.trailing&&te(r.originalText,R(_),{backwards:!0})),d=a("param");return["catch ",p?["(",f([E,d]),E,") "]:["(",d,") "],a("body")]}return["catch ",a("body")];case"SwitchStatement":return[l(["switch (",f([E,a("discriminant")]),E,")"])," {",o.cases.length>0?f([F,P(F,n.map(({node:p,isLast:d})=>[a(),!d&&pe(p,r)?F:""],"cases"))]):"",F,"}"];case"SwitchCase":{o.test?c.push("case ",a("test"),":"):c.push("default:"),T(o,g.Dangling)&&c.push(" ",M(n,r));let p=o.consequent.filter(d=>d.type!=="EmptyStatement");if(p.length>0){let d=fr(n,r,a,"consequent");c.push(p.length===1&&p[0].type==="BlockStatement"?[" ",d]:f([F,d]))}return c}case"DebuggerStatement":return["debugger",u];case"ClassDeclaration":case"ClassExpression":return xn(n,r,a);case"ClassMethod":case"ClassPrivateMethod":case"MethodDefinition":return hn(n,r,a);case"ClassProperty":case"PropertyDefinition":case"ClassPrivateProperty":case"ClassAccessorProperty":case"AccessorProperty":return gn(n,r,a);case"TemplateElement":return Ie(o.value.raw);case"TemplateLiteral":return Gr(n,a,r);case"TaggedTemplateExpression":return Nu(a);case"PrivateIdentifier":return["#",o.name];case"PrivateName":return["#",a("id")];case"TopicReference":return"%";case"ArgumentPlaceholder":return"?";case"ModuleExpression":return["module ",a("body")];case"InterpreterDirective":default:throw new Me(o,"ESTree")}}function bn(n,r,a){let{parent:s,node:o,key:u}=n,c=[a("expression")];switch(o.type){case"AsConstExpression":c.push(" as const");break;case"AsExpression":case"TSAsExpression":c.push(" as ",a("typeAnnotation"));break;case"SatisfiesExpression":case"TSSatisfiesExpression":c.push(" satisfies ",a("typeAnnotation"));break}return u==="callee"&&w(s)||u==="object"&&q(s)?l([f([E,...c]),E]):c}function Ca(n,r,a){let{node:s}=n,o=[V(n),"component"];s.id&&o.push(" ",a("id")),o.push(a("typeParameters"));let u=Zl(n,a,r);return s.rendersType?o.push(l([u," ",a("rendersType")])):o.push(l([u])),s.body&&o.push(" ",a("body")),r.semi&&s.type==="DeclareComponent"&&o.push(";"),o}function Zl(n,r,a){let{node:s}=n,o=s.params;if(s.rest&&(o=[...o,s.rest]),o.length===0)return["(",M(n,a,{filter:c=>ge(a.originalText,k(c))===")"}),")"];let u=[];return tm(n,(c,p)=>{let d=p===o.length-1;d&&s.rest&&u.push("..."),u.push(r()),!d&&(u.push(","),pe(o[p],a)?u.push(F,F):u.push(x))}),["(",f([E,...u]),b(oe(a,"all")&&!em(s,o)?",":""),E,")"]}function em(n,r){var a;return n.rest||((a=O(!1,r,-1))==null?void 0:a.type)==="RestElement"}function tm(n,r){let{node:a}=n,s=0,o=u=>r(u,s++);n.each(o,"params"),a.rest&&n.call(o,"rest")}function Aa(n,r,a){let{node:s}=n;return s.shorthand?a("local"):[a("name")," as ",a("local")]}function da(n,r,a){let{node:s}=n,o=[];return s.name&&o.push(a("name"),s.optional?"?: ":": "),o.push(a("typeAnnotation")),o}function Ta(n,r,a){return xt(n,a,r)}function Pn(n,r){let{node:a}=n,s=r("id");a.computed&&(s=["[",s,"]"]);let o="";return a.initializer&&(o=r("initializer")),a.init&&(o=r("init")),o?[s," = ",o]:s}function xa(n,r,a){let{node:s}=n,o;if(s.type==="EnumSymbolBody"||s.explicitType)switch(s.type){case"EnumBooleanBody":o="boolean";break;case"EnumNumberBody":o="number";break;case"EnumBigIntBody":o="bigint";break;case"EnumStringBody":o="string";break;case"EnumSymbolBody":o="symbol";break}return[o?`of ${o} `:"",Ta(n,r,a)]}function kn(n,r,a){let{node:s}=n;return[V(n),s.const?"const ":"","enum ",r("id")," ",s.type==="TSEnumDeclaration"?Ta(n,r,a):r("body")]}function ga(n,r,a){let{node:s}=n,o=["hook"];s.id&&o.push(" ",a("id"));let u=Je(n,a,r,!1,!0),c=$t(n,a),p=ot(s,c);return o.push(l([p?l(u):u,c]),s.body?" ":"",a("body")),o}function Sa(n,r,a){let{node:s}=n,o=[V(n),"hook"];return s.id&&o.push(" ",a("id")),r.semi&&o.push(";"),o}function ha(n){var r;let{node:a}=n;return a.type==="HookTypeAnnotation"&&((r=n.getParentNode(2))==null?void 0:r.type)==="DeclareHook"}function Ba(n,r,a){let{node:s}=n,o=[];o.push(ha(n)?"":"hook ");let u=Je(n,a,r,!1,!0),c=[];return c.push(ha(n)?": ":" => ",a("returnType")),ot(s,c)&&(u=l(u)),o.push(u,c),l(o)}function In(n,r,a){let{node:s}=n,o=[V(n),"interface"],u=[],c=[];s.type!=="InterfaceTypeAnnotation"&&u.push(" ",a("id"),a("typeParameters"));let p=s.typeParameters&&!T(s.typeParameters,g.Trailing|g.Line);return L(s.extends)&&c.push(p?b(" ",x,{groupId:Er(s.typeParameters)}):x,"extends ",(s.extends.length===1?yu:f)(P([",",x],n.map(a,"extends")))),T(s.id,g.Trailing)||L(s.extends)?p?o.push(l([...u,f(c)])):o.push(l(f([...u,...c]))):o.push(...u,...c),o.push(" ",a("body")),l(o)}function ba(n,r,a){let{node:s}=n;if(br(s))return s.type.slice(0,-14).toLowerCase();let o=r.semi?";":"";switch(s.type){case"ComponentDeclaration":case"DeclareComponent":case"ComponentTypeAnnotation":return Ca(n,r,a);case"ComponentParameter":return Aa(n,r,a);case"ComponentTypeParameter":return da(n,r,a);case"HookDeclaration":return ga(n,r,a);case"DeclareHook":return Sa(n,r,a);case"HookTypeAnnotation":return Ba(n,r,a);case"DeclareClass":return xn(n,r,a);case"DeclareFunction":return[V(n),"function ",a("id"),a("predicate"),o];case"DeclareModule":return["declare module ",a("id")," ",a("body")];case"DeclareModuleExports":return["declare module.exports",X(n,a),o];case"DeclareNamespace":return["declare namespace ",a("id")," ",a("body")];case"DeclareVariable":return[V(n),s.kind??"var"," ",a("id"),o];case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":return Bn(n,r,a);case"DeclareOpaqueType":case"OpaqueType":return ji(n,r,a);case"DeclareTypeAlias":case"TypeAlias":return Qr(n,r,a);case"IntersectionTypeAnnotation":return Zr(n,r,a);case"UnionTypeAnnotation":return en(n,r,a);case"ConditionalTypeAnnotation":return Kt(n,r,a);case"InferTypeAnnotation":return nn(n,r,a);case"FunctionTypeAnnotation":return tn(n,r,a);case"TupleTypeAnnotation":return Vt(n,r,a);case"TupleTypeLabeledElement":return un(n,r,a);case"TupleTypeSpreadElement":return sn(n,r,a);case"GenericTypeAnnotation":return[a("id"),It(n,r,a,"typeParameters")];case"IndexedAccessType":case"OptionalIndexedAccessType":return rn(n,r,a);case"TypeAnnotation":return an(n,r,a);case"TypeParameter":return Tn(n,r,a);case"TypeofTypeAnnotation":return pn(n,a);case"ExistsTypeAnnotation":return"*";case"ArrayTypeAnnotation":return on(a);case"DeclareEnum":case"EnumDeclaration":return kn(n,a,r);case"EnumBooleanBody":case"EnumNumberBody":case"EnumBigIntBody":case"EnumStringBody":case"EnumSymbolBody":return xa(n,a,r);case"EnumBooleanMember":case"EnumNumberMember":case"EnumBigIntMember":case"EnumStringMember":case"EnumDefaultedMember":return Pn(n,a);case"FunctionTypeParam":{let u=s.name?a("name"):n.parent.this===s?"this":"";return[u,H(n),u?": ":"",a("typeAnnotation")]}case"DeclareInterface":case"InterfaceDeclaration":case"InterfaceTypeAnnotation":return In(n,r,a);case"ClassImplements":case"InterfaceExtends":return[a("id"),a("typeParameters")];case"NullableTypeAnnotation":return["?",a("typeAnnotation")];case"Variance":{let{kind:u}=s;return yn.ok(u==="plus"||u==="minus"),u==="plus"?"+":"-"}case"KeyofTypeAnnotation":return["keyof ",a("argument")];case"ObjectTypeCallProperty":return[s.static?"static ":"",a("value")];case"ObjectTypeMappedTypeProperty":return Ki(n,r,a);case"ObjectTypeIndexer":return[s.static?"static ":"",s.variance?a("variance"):"","[",a("id"),s.id?": ":"",a("key"),"]: ",a("value")];case"ObjectTypeProperty":{let u="";return s.proto?u="proto ":s.static&&(u="static "),[u,s.kind!=="init"?s.kind+" ":"",s.variance?a("variance"):"",Et(n,r,a),H(n),St(s)?"":": ",a("value")]}case"ObjectTypeAnnotation":return xt(n,r,a);case"ObjectTypeInternalSlot":return[s.static?"static ":"","[[",a("id"),"]]",H(n),s.method?"":": ",a("value")];case"ObjectTypeSpreadProperty":return mn(n,a);case"QualifiedTypeofIdentifier":case"QualifiedTypeIdentifier":return[a("qualification"),".",a("id")];case"NullLiteralTypeAnnotation":return"null";case"BooleanLiteralTypeAnnotation":return String(s.value);case"StringLiteralTypeAnnotation":return Ie(tt(fe(s),r));case"NumberLiteralTypeAnnotation":return Ze(s.raw??s.extra.raw);case"BigIntLiteralTypeAnnotation":return Sn(s.raw??s.extra.raw);case"TypeCastExpression":return["(",a("expression"),X(n,a),")"];case"TypePredicate":return cn(n,a);case"TypeOperator":return[s.operator," ",a("typeAnnotation")];case"TypeParameterDeclaration":case"TypeParameterInstantiation":return It(n,r,a,"params");case"InferredPredicate":case"DeclaredPredicate":return[n.key==="predicate"&&n.parent.type!=="DeclareFunction"&&!n.parent.returnType?": ":" ","%checks",...s.type==="DeclaredPredicate"?["(",a("value"),")"]:[]];case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return bn(n,r,a)}}function Pa(n,r,a){var s;let{node:o}=n;if(!o.type.startsWith("TS"))return;if(Pr(o))return o.type.slice(2,-7).toLowerCase();let u=r.semi?";":"",c=[];switch(o.type){case"TSThisType":return"this";case"TSTypeAssertion":{let p=!(U(o.expression)||se(o.expression)),d=l(["<",f([E,a("typeAnnotation")]),E,">"]),_=[b("("),f([E,a("expression")]),E,b(")")];return p?ze([[d,a("expression")],[d,l(_,{shouldBreak:!0})],[d,a("expression")]]):l([d,a("expression")])}case"TSDeclareFunction":return En(n,a,r);case"TSExportAssignment":return["export = ",a("expression"),u];case"TSModuleBlock":return An(n,r,a);case"TSInterfaceBody":case"TSTypeLiteral":return xt(n,r,a);case"TSTypeAliasDeclaration":return Qr(n,r,a);case"TSQualifiedName":return[a("left"),".",a("right")];case"TSAbstractMethodDefinition":case"TSDeclareMethod":return hn(n,r,a);case"TSAbstractAccessorProperty":case"TSAbstractPropertyDefinition":return gn(n,r,a);case"TSInterfaceHeritage":case"TSClassImplements":case"TSExpressionWithTypeArguments":case"TSInstantiationExpression":return[a("expression"),a("typeParameters")];case"TSTemplateLiteralType":return Gr(n,a,r);case"TSNamedTupleMember":return un(n,r,a);case"TSRestType":return sn(n,r,a);case"TSOptionalType":return[a("typeAnnotation"),"?"];case"TSInterfaceDeclaration":return In(n,r,a);case"TSTypeParameterDeclaration":case"TSTypeParameterInstantiation":return It(n,r,a,"params");case"TSTypeParameter":return Tn(n,r,a);case"TSAsExpression":case"TSSatisfiesExpression":return bn(n,r,a);case"TSArrayType":return on(a);case"TSPropertySignature":return[o.readonly?"readonly ":"",Et(n,r,a),H(n),X(n,a)];case"TSParameterProperty":return[Ht(o),o.static?"static ":"",o.override?"override ":"",o.readonly?"readonly ":"",a("parameter")];case"TSTypeQuery":return pn(n,a);case"TSIndexSignature":{let p=o.parameters.length>1?b(oe(r)?",":""):"",d=l([f([E,P([", ",E],n.map(a,"parameters"))]),p,E]),_=n.parent.type==="ClassBody"&&n.key==="body";return[_&&o.static?"static ":"",o.readonly?"readonly ":"","[",o.parameters?d:"","]",X(n,a),_?u:""]}case"TSTypePredicate":return cn(n,a);case"TSNonNullExpression":return[a("expression"),"!"];case"TSImportType":return[o.isTypeOf?"typeof ":"","import(",a("argument"),")",o.qualifier?[".",a("qualifier")]:"",It(n,r,a,o.typeArguments?"typeArguments":"typeParameters")];case"TSLiteralType":return a("literal");case"TSIndexedAccessType":return rn(n,r,a);case"TSTypeOperator":return[o.operator," ",a("typeAnnotation")];case"TSMappedType":return zi(n,r,a);case"TSMethodSignature":{let p=o.kind&&o.kind!=="method"?`${o.kind} `:"";c.push(Ht(o),p,o.computed?"[":"",a("key"),o.computed?"]":"",H(n));let d=Je(n,a,r,!1,!0),_=o.returnType?"returnType":"typeAnnotation",ja=o[_],Ja=ja?X(n,a,_):"",ec=ot(o,Ja);return c.push(ec?l(d):d),ja&&c.push(l(Ja)),l(c)}case"TSNamespaceExportDeclaration":return["export as namespace ",a("id"),r.semi?";":""];case"TSEnumDeclaration":return kn(n,a,r);case"TSEnumMember":return Pn(n,a);case"TSImportEqualsDeclaration":return[o.isExport?"export ":"","import ",Ls(o,!1),a("id")," = ",a("moduleReference"),r.semi?";":""];case"TSExternalModuleReference":return["require(",a("expression"),")"];case"TSModuleDeclaration":{let{parent:p}=n,d=p.type==="TSModuleDeclaration",_=((s=o.body)==null?void 0:s.type)==="TSModuleDeclaration";if(d)c.push(".");else if(c.push(V(n)),!(o.kind==="global"||o.global)){let ja=o.kind??(z(o.id)||Fr(r,R(o),R(o.id)).trim().endsWith("module")?"module":"namespace");c.push(ja," ")}return c.push(a("id")),_?c.push(a("body")):o.body?c.push(" ",l(a("body"))):c.push(u),c}case"TSConditionalType":return Kt(n,r,a);case"TSInferType":return nn(n,r,a);case"TSIntersectionType":return Zr(n,r,a);case"TSUnionType":return en(n,r,a);case"TSFunctionType":case"TSCallSignatureDeclaration":case"TSConstructorType":case"TSConstructSignatureDeclaration":return tn(n,r,a);case"TSTupleType":return Vt(n,r,a);case"TSTypeReference":return[a("typeName"),It(n,r,a,"typeParameters")];case"TSTypeAnnotation":return an(n,r,a);case"TSEmptyBodyFunctionExpression":return Fn(n,r,a);case"TSJSDocAllType":return"*";case"TSJSDocUnknownType":return"?";case"TSJSDocNullableType":return xs(n,a,"?");case"TSJSDocNonNullableType":return xs(n,a,"!");case"TSParenthesizedType":default:throw new Me(o,"TypeScript")}}function rm(n,r,a,s){if(Hr(n))return pi(n,r);for(let o of[Ai,fi,ba,Pa,Fa]){let u=o(n,r,a,s);if(u!==void 0)return u}}var nm=j(["ClassMethod","ClassPrivateMethod","ClassProperty","ClassAccessorProperty","AccessorProperty","TSAbstractAccessorProperty","PropertyDefinition","TSAbstractPropertyDefinition","ClassPrivateProperty","MethodDefinition","TSAbstractMethodDefinition","TSDeclareMethod"]);function sm(n,r,a,s){var o;n.isRoot&&((o=r.__onHtmlBindingRoot)==null||o.call(r,n.node,r));let u=rm(n,r,a,s);if(!u)return"";let{node:c}=n;if(nm(c))return u;let p=L(c.decorators),d=Ti(n,r,a),_=c.type==="ClassExpression";if(p&&!_)return or(u,ec=>l([d,ec]));let ja=Be(n,r),Ja=ra(n,r);return!d&&!ja&&!Ja?u:or(u,ec=>[Ja?";":"",ja?"(":"",ja&&_&&p?[f([x,d,ec]),x]:[d,ec],ja?")":""])}var ka=sm,um={avoidAstMutation:!0},Ia=[{linguistLanguageId:174,name:"JSON.stringify",type:"data",color:"#292929",tmScope:"source.json",aceMode:"json",codemirrorMode:"javascript",codemirrorMimeType:"application/json",aliases:["geojson","jsonl","topojson"],extensions:[".importmap"],filenames:["package.json","package-lock.json","composer.json"],parsers:["json-stringify"],vscodeLanguageIds:["json"]},{linguistLanguageId:174,name:"JSON",type:"data",color:"#292929",tmScope:"source.json",aceMode:"json",codemirrorMode:"javascript",codemirrorMimeType:"application/json",aliases:["geojson","jsonl","topojson"],extensions:[".json",".4DForm",".4DProject",".avsc",".geojson",".gltf",".har",".ice",".JSON-tmLanguage",".mcmeta",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","Pipfile.lock","composer.lock","flake.lock","mcmod.info",".babelrc",".jscsrc",".jshintrc",".jslintrc",".swcrc"],parsers:["json"],vscodeLanguageIds:["json"]},{linguistLanguageId:423,name:"JSON with Comments",type:"data",color:"#292929",group:"JSON",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",aliases:["jsonc"],extensions:[".jsonc",".code-snippets",".code-workspace",".sublime-build",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[],parsers:["jsonc"],vscodeLanguageIds:["jsonc"]},{linguistLanguageId:175,name:"JSON5",type:"data",color:"#267CB9",extensions:[".json5"],tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"application/json",parsers:["json5"],vscodeLanguageIds:["json5"]}],vs={};Tr(vs,{getVisitorKeys:()=>wa,massageAstNode:()=>_a$1,print:()=>om});var im={JsonRoot:["node"],ArrayExpression:["elements"],ObjectExpression:["properties"],ObjectProperty:["key","value"],UnaryExpression:["argument"],NullLiteral:[],BooleanLiteral:[],StringLiteral:[],NumericLiteral:[],Identifier:[],TemplateLiteral:["quasis"],TemplateElement:[]},La=im,am=Sr(La),wa=am;function om(n,r,a){let{node:s}=n;switch(s.type){case"JsonRoot":return[a("node"),F];case"ArrayExpression":{if(s.elements.length===0)return"[]";let o=n.map(()=>n.node===null?"null":a(),"elements");return["[",f([F,P([",",F],o)]),F,"]"]}case"ObjectExpression":return s.properties.length===0?"{}":["{",f([F,P([",",F],n.map(a,"properties"))]),F,"}"];case"ObjectProperty":return[a("key"),": ",a("value")];case"UnaryExpression":return[s.operator==="+"?"":s.operator,a("argument")];case"NullLiteral":return"null";case"BooleanLiteral":return s.value?"true":"false";case"StringLiteral":return JSON.stringify(s.value);case"NumericLiteral":return Oa(n)?JSON.stringify(String(s.value)):JSON.stringify(s.value);case"Identifier":return Oa(n)?JSON.stringify(s.name):s.name;case"TemplateLiteral":return a(["quasis",0]);case"TemplateElement":return JSON.stringify(s.value.cooked);default:throw new Me(s,"JSON")}}function Oa(n){return n.key==="key"&&n.parent.type==="ObjectProperty"}var pm=new Set(["start","end","extra","loc","comments","leadingComments","trailingComments","innerComments","errors","range","tokens"]);function _a$1(n,r){let{type:a}=n;if(a==="ObjectProperty"){let{key:s}=n;s.type==="Identifier"?r.key={type:"StringLiteral",value:s.name}:s.type==="NumericLiteral"&&(r.key={type:"StringLiteral",value:String(s.value)});return}if(a==="UnaryExpression"&&n.operator==="+")return r.argument;if(a==="ArrayExpression"){for(let[s,o]of n.elements.entries())o===null&&r.elements.splice(s,0,{type:"NullLiteral"});return}if(a==="TemplateLiteral")return{type:"StringLiteral",value:n.quasis[0].value.cooked}}_a$1.ignoredProperties=pm;var Cr={bracketSpacing:{category:"Common",type:"boolean",default:!0,description:"Print spaces between brackets.",oppositeDescription:"Do not print spaces between brackets."},singleQuote:{category:"Common",type:"boolean",default:!1,description:"Use single quotes instead of double quotes."},proseWrap:{category:"Common",type:"choice",default:"preserve",description:"How to wrap prose.",choices:[{value:"always",description:"Wrap prose if it exceeds the print width."},{value:"never",description:"Do not wrap prose."},{value:"preserve",description:"Wrap prose as-is."}]},bracketSameLine:{category:"Common",type:"boolean",default:!1,description:"Put > of opening tags on the last line instead of on a new line."},singleAttributePerLine:{category:"Common",type:"boolean",default:!1,description:"Enforce single attribute per line in HTML, Vue and JSX."}},Lt="JavaScript",cm={arrowParens:{category:Lt,type:"choice",default:"always",description:"Include parentheses around a sole arrow function parameter.",choices:[{value:"always",description:"Always include parens. Example: `(x) => x`"},{value:"avoid",description:"Omit parens when possible. Example: `x => x`"}]},bracketSameLine:Cr.bracketSameLine,bracketSpacing:Cr.bracketSpacing,jsxBracketSameLine:{category:Lt,type:"boolean",description:"Put > on the last line instead of at a new line.",deprecated:"2.4.0"},semi:{category:Lt,type:"boolean",default:!0,description:"Print semicolons.",oppositeDescription:"Do not print semicolons, except at the beginning of lines which may need them."},experimentalTernaries:{category:Lt,type:"boolean",default:!1,description:"Use curious ternaries, with the question mark after the condition.",oppositeDescription:"Default behavior of ternaries; keep question marks on the same line as the consequent."},singleQuote:Cr.singleQuote,jsxSingleQuote:{category:Lt,type:"boolean",default:!1,description:"Use single quotes in JSX."},quoteProps:{category:Lt,type:"choice",default:"as-needed",description:"Change when properties in objects are quoted.",choices:[{value:"as-needed",description:"Only add quotes around object properties where required."},{value:"consistent",description:"If at least one property in an object requires quotes, quote all properties."},{value:"preserve",description:"Respect the input use of quotes in object properties."}]},trailingComma:{category:Lt,type:"choice",default:"all",description:"Print trailing commas wherever possible when multi-line.",choices:[{value:"all",description:"Trailing commas wherever possible (including function arguments)."},{value:"es5",description:"Trailing commas where valid in ES5 (objects, arrays, etc.)"},{value:"none",description:"No trailing commas."}]},singleAttributePerLine:Cr.singleAttributePerLine},va=cm,lm={estree:_s,"estree-json":vs},mm=[...Xs,...Ia],rx=js;const prettierPluginEstree=Object.freeze(Object.defineProperty({__proto__:null,default:rx,languages:mm,options:va,printers:lm},Symbol.toStringTag,{value:"Module"}));var __freeze=Object.freeze,__defProp=Object.defineProperty,__template=(n,r)=>__freeze(__defProp(n,"raw",{value:__freeze(n.slice())})),_a;const modules=Object.assign({"./components/NBarChart/NBarChart.tsx":NBarChart,"./components/NCard/NCard.tsx":NCard,"./components/NCarousel/NCarousel.tsx":NCarousel,"./components/NCartesianChart/NCartesianChart.tsx":NCartesianChart,"./components/NCheckbox/NCheckbox.tsx":NCheckbox,"./components/NDatePicker/NDatePicker.tsx":NDatePicker,"./components/NDivider/NDivider.tsx":NDivider,"./components/NFlex/NFlex.tsx":NFlex,"./components/NForm/NForm.tsx":NForm,"./components/NFunnelChart/NFunnelChart.tsx":NFunnelChart,"./components/NImage/NImage.tsx":NImage,"./components/NInput/NInput.tsx":NInput,"./components/NInputNumber/NInputNumber.tsx":NInputNumber,"./components/NLineChart/NLineChart.tsx":NLineChart,"./components/NMap/NMap.tsx":NMap,"./components/NPage/NPage.tsx":NPage,"./components/NPieChart/NPieChart.tsx":NPieChart,"./components/NRadio/NRadio.tsx":NRadio,"./components/NRouterLink/NRouterLink.tsx":NRouterLink,"./components/NRow/NRow.tsx":NRow,"./components/NSelect/NSelect.tsx":NSelect,"./components/NStatistic/NStatistic.tsx":NStatistic,"./components/NTable/NTable.tsx":NTable,"./components/NTabs/NTabs.tsx":NTabs,"./components/NText/NText.tsx":NText,"./components/NTreeSelect/NTreeSelect.tsx":NTreeSelect,"./components/NUpload/NUpload.tsx":NUpload});function toJson(n){return JSON.stringify(n,(r,a)=>{if(!isComponent(a)&&r!=="parent")return isRef(a)?unref(a):isReactive(a)?toRaw(a):a},2)}function fromJson(n){const r=a=>{const s=modules[a.path];return new s(a)};return JSON.parse(n,function(a,s){return s!=null&&s.isItemNode?r(s):s})}async function toVue(n){const r=new JSZip,a=r.folder("imports");let s=null;n.traverse(c=>{const p=c.toVue();if(c.isNPage)s=p;else{const{uuid:d,imports:_,script:ja,importFiles:Ja,template:ec,style:tc}=p;if(_)for(const rc in _){const nc=_[rc];s.imports[rc]?Object.assign(s.imports[rc],nc):s.imports[rc]=nc}ja&&(s.script+=ja.trim()+`

`),Ja&&Object.assign(s.importFiles,Ja),s.template=s.template.replace(d,`${ec.trim()}`),s.style+=`
${tc.trim()}
`}});for(const c in s.importFiles)a.file(c,s.importFiles[c]);let u=((c,p,d,_,ja)=>{let Ja="";for(const[ec,tc]of Object.entries(p)){const rc=tc.default||"",nc=[];for(const[uc,eh]of Object.entries(tc))uc!=="default"&&nc.push(eh);const ic=nc.join(", ");Ja+=`import ${rc&&rc}${rc&&ic&&", "}${ic&&`{ ${ic} }`} from '${ec}'
`}return`${c[0]}${Ja}${c[1]}${d}${c[2]}${_}${c[3]}${ja}${c[4]}`})(_a||(_a=__template([`
<script setup>
import 'element-plus/dist/index.css'
`,`
`,`
<\/script>

<template>
  `,`
</template>

<style scoped>
`,`
</style>
  `])),s.imports,s.script,s.template,s.style);return u=await mu$1(u,{parser:"vue",plugins:[prettierPluginBabel,prettierPluginEstree,prettierPluginHtml],semi:!1,tabWidth:2}),r.file("Page.vue",u),r.generateAsync({type:"blob"})}export{ElCollapseItem as E,NPage as N,UndoHistory as U,ElCollapse as a,toJson as b,config as c,getVisibleRect as d,toVue as e,fromJson as f,generateUUID as g,downloadFile as h,ElTabs as i,ElTabPane as j,debounce as k,modules as m,pushState as p,routerState as r,setElStylePos as s,throttle$1 as t,uploadFile as u};
