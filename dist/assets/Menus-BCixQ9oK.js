import{b as oe,aE as ae,d as L,z as y,a as le,r as c,g as t,c as b,k as D,w as n,e as P,n as re,t as F,N as O,f as q,O as $,P as ne,aV as se,q as ie,o as pe,X as z,M as a,l as H,G as de,H as ue,a6 as me,aW as j,aX as ce,ab as fe}from"./index-B2ff-rFN.js";/* empty css                   *//* empty css                     */import"./index-CDp5nt-z.js";import"./el-tag-5atBDTvJ.js";import"./el-checkbox-TOO-gUmm.js";import{E as ve}from"./el-tree-select-Z4eI8kLg.js";import{E as be}from"./el-popover-Jjy_ri4S.js";import{E as ge}from"./el-switch-Doigem6F.js";/* empty css                  */import{E as _e}from"./el-divider-Ca7wRDPx.js";import{f as he,d as we,i as ye,a as Ee}from"./permission-CAa-2GWk.js";import{u as Ve}from"./menus-B2ciZQin.js";import{S as ke}from"./SytTable-DNxFVgPQ.js";import{E as S}from"./index-Bfj94Vt0.js";import{a as Ce,f as Se,E as De}from"./index-CvnddM-F.js";import{E as Pe}from"./index-CQNAlFu8.js";import{E as Ue,a as Ie}from"./index-BIK7ipUj.js";import{a as X,u as v,E as Re}from"./index-DxdYCs-v.js";import{d as T}from"./dropdown-BsEavdxC.js";import{_ as Be}from"./plugin-vue_export-helper-CqGSI99y.js";import{b as Me}from"./index-CjBM1FRY.js";import{_ as Ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BWwQj9eg.js";import"./_Uint8Array-CLf01t9B.js";import"./typescript-PpV26QSH.js";import"./isEqual-B5Vhr8lN.js";import"./focus-trap-VkXHYWcf.js";import"./scroll-JHJnPUrU.js";import"./castArray-D7uxE5bV.js";import"./index-CJ4UhsCw.js";import"./el-tooltip-l0sNRNKZ.js";import"./_baseClone-CmqJW0qa.js";import"./vnode-CgXj8ZtL.js";const Te=oe({trigger:X.trigger,placement:T.placement,disabled:X.disabled,visible:v.visible,transition:v.transition,popperOptions:T.popperOptions,tabindex:T.tabindex,content:v.content,popperStyle:v.popperStyle,popperClass:v.popperClass,enterable:{...v.enterable,default:!0},effect:{...v.effect,default:"light"},teleported:v.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),$e={"update:visible":d=>ae(d),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Le="onUpdate:visible",Ae=L({name:"ElPopover"}),Fe=L({...Ae,props:Te,emits:$e,setup(d,{expose:u,emit:m}){const i=d,U=y(()=>i[Le]),p=le("popover"),g=c(),_=y(()=>{var e;return(e=t(g))==null?void 0:e.popperRef}),I=y(()=>[{width:Ce(i.width)},i.popperStyle]),E=y(()=>[p.b(),i.popperClass,{[p.m("plain")]:!!i.content}]),l=y(()=>i.transition===`${p.namespace.value}-fade-in-linear`),h=()=>{var e;(e=g.value)==null||e.hide()},R=()=>{m("before-enter")},B=()=>{m("before-leave")},M=()=>{m("after-enter")},N=()=>{m("update:visible",!1),m("after-leave")};return u({popperRef:_,hide:h}),(e,A)=>(b(),D(t(Re),ne({ref_key:"tooltipRef",ref:g},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":t(E),"popper-style":t(I),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":t(l),"onUpdate:visible":t(U),onBeforeShow:R,onBeforeHide:B,onShow:M,onHide:N}),{content:n(()=>[e.title?(b(),P("div",{key:0,class:re(t(p).e("title")),role:"title"},F(e.title),3)):O("v-if",!0),q(e.$slots,"default",{},()=>[$(F(e.content),1)])]),default:n(()=>[e.$slots.reference?q(e.$slots,"reference",{key:0}):O("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Oe=Be(Fe,[["__file","popover.vue"]]);const G=(d,u)=>{const m=u.arg||u.value,i=m==null?void 0:m.popperRef;i&&(i.triggerRef=d)};var qe={mounted(d,u){G(d,u)},updated(d,u){G(d,u)}};const ze="popover",He=se(qe,ze),je=ie(Oe,{directive:He}),Xe={class:"container"},Ge={key:1,class:"icon-select-text"},Ke=L({__name:"Menus",setup(d){const u=c([{title:"路由名",dataIndex:"name"},{title:"路由路径",dataIndex:"path"},{title:"组件路径",dataIndex:"component"},{title:"菜单名",dataIndex:"meta.title"},{title:"显示菜单",dataIndex:"meta.showLink"}]),m=Ve();let i=c([]),U=c(!0),p=c(!1),g=c(null),_=c("");const I=c({name:[{required:!0,message:"请输入路由名",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],component:[{required:!0,message:"请输入组件路径",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单名",trigger:"blur"}],"meta.showLink":[{required:!0,message:"显示菜单",trigger:"change"}]});let E=()=>({pid:"",path:"",name:"",component:"",meta:{icon:"",title:"",showLink:!0}}),l=c(E());const h=async()=>{await he().then(s=>{s.code===200&&(s.data.forEach(o=>{var w;o.iconComponent=j[(w=o.meta)==null?void 0:w.icon]}),i.value=ce(s.data),m.SAVE_MENUS(s.data))}),U.value=!1},R=()=>{_.value="添加",p.value=!0,l.value=E()},B=s=>{_.value="编辑",p.value=!0,l.value=fe(s)},M=async()=>{let s=Object.assign({},l.value);ye(s).then(o=>{o.code==200&&(S({type:"success",message:"添加成功"}),h())})},N=async()=>{let s=Object.assign({},l.value);Ee(s).then(o=>{o.code==200&&(S({type:"success",message:"编辑成功"}),h())})},e=s=>{s._id?we({_id:s._id}).then(o=>{o.code==200&&(S({type:"success",message:"删除成功"}),h())}):S({type:"error",message:"不存在的_id"})},A=s=>{s&&s.validate(o=>{o?(_.value==="添加"?M():N(),p.value=!1):console.log("验证失败!")})};return pe(()=>{h()}),(s,o)=>{const w=Se,K=_e,W=z("Edit"),V=De,J=z("Delete"),Q=be,k=Pe,f=Ue,Y=ge,Z=je,x=ve,ee=Ie,te=Me;return b(),P("div",Xe,[a(w,{onClick:R},{default:n(()=>[$("添加菜单")]),_:1}),a(K),a(ke,{columns:u.value,data:t(i)},{operations:n(({row:r})=>[a(V,{class:"icon",onClick:C=>B(r),color:"#0af"},{default:n(()=>[a(W)]),_:2},1032,["onClick"]),a(Q,{title:"确定删除?",onConfirm:C=>e(r)},{reference:n(()=>[a(V,{class:"icon",color:"#f00"},{default:n(()=>[a(J)]),_:1})]),_:2},1032,["onConfirm"])]),_:1},8,["columns","data"]),a(te,{modelValue:t(p),"onUpdate:modelValue":o[7]||(o[7]=r=>me(p)?p.value=r:p=r),title:t(_),width:"35vw"},{default:n(()=>[a(ee,{ref_key:"ruleFormRef",ref:g,model:t(l),rules:I.value,size:"large",class:"w-full","label-width":"auto"},{default:n(()=>[a(f,{label:"路由名",prop:"name"},{default:n(()=>[a(k,{modelValue:t(l).name,"onUpdate:modelValue":o[0]||(o[0]=r=>t(l).name=r),placeholder:"路由名"},null,8,["modelValue"])]),_:1}),a(f,{label:"路由路径",prop:"path"},{default:n(()=>[a(k,{modelValue:t(l).path,"onUpdate:modelValue":o[1]||(o[1]=r=>t(l).path=r),placeholder:"需包含上级菜单的路径"},null,8,["modelValue"])]),_:1}),a(f,{label:"组件路径",prop:"component"},{default:n(()=>[a(k,{modelValue:t(l).component,"onUpdate:modelValue":o[2]||(o[2]=r=>t(l).component=r),placeholder:"/src/views/**.vue"},null,8,["modelValue"])]),_:1}),a(f,{label:"菜单名",prop:"meta.title"},{default:n(()=>[a(k,{modelValue:t(l).meta.title,"onUpdate:modelValue":o[3]||(o[3]=r=>t(l).meta.title=r),placeholder:"菜单名"},null,8,["modelValue"])]),_:1}),a(f,{label:"显示菜单",prop:"meta.showLink"},{default:n(()=>[a(Y,{modelValue:t(l).meta.showLink,"onUpdate:modelValue":o[4]||(o[4]=r=>t(l).meta.showLink=r)},null,8,["modelValue"])]),_:1}),a(f,{label:"菜单图标",prop:"meta.icon"},{default:n(()=>[a(Z,{title:"图标",width:300,trigger:"click"},{reference:n(()=>[t(l).meta.icon?(b(),D(V,{key:0,size:20,class:"icon"},{default:n(()=>[(b(),D(H(t(l).meta.icon)))]),_:1})):(b(),P("span",Ge,"选择图标"))]),default:n(()=>[(b(),P(de,null,ue(j,(r,C)=>a(V,{class:"icon",key:C,size:15,onClick:We=>t(l).meta.icon=C},{default:n(()=>[(b(),D(H(r)))]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),a(f,{label:"上级菜单"},{default:n(()=>[a(x,{modelValue:t(l).pid,"onUpdate:modelValue":o[5]||(o[5]=r=>t(l).pid=r),data:t(i),props:{label:r=>r.meta.title,value:"id"},"check-strictly":"","render-after-expand":!1,clearable:"",style:{width:"240px"}},null,8,["modelValue","data","props"])]),_:1}),a(f,null,{default:n(()=>[a(w,{class:"w-full",type:"primary",onClick:o[6]||(o[6]=r=>A(t(g)))},{default:n(()=>[$(" 保存 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),Ut=Ne(Ke,[["__scopeId","data-v-42913533"]]);export{Ut as default};
