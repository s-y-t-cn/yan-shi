import{t as _e,u as X,a as Fe}from"./typescript-gghwE45V.js";import{o as $,v as G,_ as W,b as ee,d as U,i as Ee,a as be,r as E,z as N,W as ne,c as H,k as J,w as he,K as Pe,j as Q,n as B,g as S,A as Z,Q as Le,T as Ce,e as ye,M as ae,G as ze,h as Re,am as A,y as I,J as x,p as Se,I as Ne,aN as Oe,f as ge,l as ke,N as Ae,a2 as He,q as Be,D as Ie,C as Ue}from"./index-3lwVo2y0.js";import{_ as V}from"./plugin-vue_export-helper-CqGSI99y.js";import{b as Te,u as Ke}from"./index-sCpGYuuU.js";import{a as re}from"./index-DlwHQsx5.js";function yt(e){return e===void 0}let R=[];const le=e=>{const o=e;o.key===Te.esc&&R.forEach(n=>n(o))},De=e=>{$(()=>{R.length===0&&document.addEventListener("keydown",le),G&&R.push(e)}),W(()=>{R=R.filter(o=>o!==e),R.length===0&&G&&document.removeEventListener("keydown",le)})},z=4,Me={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},xe=({move:e,size:o,bar:n})=>({[n.size]:o,transform:`translate${n.axis}(${e}%)`}),te=Symbol("scrollbarContextKey"),$e=ee({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),We="Thumb",Ve=U({__name:"thumb",props:$e,setup(e){const o=e,n=Ee(te),s=be("scrollbar");n||_e(We,"can not inject scrollbar context");const r=E(),f=E(),p=E({}),h=E(!1);let u=!1,g=!1,w=G?document.onselectstart:null;const l=N(()=>Me[o.vertical?"vertical":"horizontal"]),v=N(()=>xe({size:o.size,move:o.move,bar:l.value})),y=N(()=>r.value[l.value.offset]**2/n.wrapElement[l.value.scrollSize]/o.ratio/f.value[l.value.offset]),t=b=>{var T;if(b.stopPropagation(),b.ctrlKey||[1,2].includes(b.button))return;(T=window.getSelection())==null||T.removeAllRanges(),m(b);const _=b.currentTarget;_&&(p.value[l.value.axis]=_[l.value.offset]-(b[l.value.client]-_.getBoundingClientRect()[l.value.direction]))},i=b=>{if(!f.value||!r.value||!n.wrapElement)return;const T=Math.abs(b.target.getBoundingClientRect()[l.value.direction]-b[l.value.client]),_=f.value[l.value.offset]/2,C=(T-_)*100*y.value/r.value[l.value.offset];n.wrapElement[l.value.scroll]=C*n.wrapElement[l.value.scrollSize]/100},m=b=>{b.stopImmediatePropagation(),u=!0,document.addEventListener("mousemove",d),document.addEventListener("mouseup",c),w=document.onselectstart,document.onselectstart=()=>!1},d=b=>{if(!r.value||!f.value||u===!1)return;const T=p.value[l.value.axis];if(!T)return;const _=(r.value.getBoundingClientRect()[l.value.direction]-b[l.value.client])*-1,C=f.value[l.value.offset]-T,k=(_-C)*100*y.value/r.value[l.value.offset];n.wrapElement[l.value.scroll]=k*n.wrapElement[l.value.scrollSize]/100},c=()=>{u=!1,p.value[l.value.axis]=0,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",c),O(),g&&(h.value=!1)},a=()=>{g=!1,h.value=!!o.size},F=()=>{g=!0,h.value=u};W(()=>{O(),document.removeEventListener("mouseup",c)});const O=()=>{document.onselectstart!==w&&(document.onselectstart=w)};return X(ne(n,"scrollbarElement"),"mousemove",a),X(ne(n,"scrollbarElement"),"mouseleave",F),(b,T)=>(H(),J(Ce,{name:S(s).b("fade"),persisted:""},{default:he(()=>[Pe(Q("div",{ref_key:"instance",ref:r,class:B([S(s).e("bar"),S(s).is(S(l).key)]),onMousedown:i},[Q("div",{ref_key:"thumb",ref:f,class:B(S(s).e("thumb")),style:Z(S(v)),onMousedown:t},null,38)],34),[[Le,b.always||h.value]])]),_:1},8,["name"]))}});var ie=V(Ve,[["__file","thumb.vue"]]);const je=ee({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),qe=U({__name:"bar",props:je,setup(e,{expose:o}){const n=e,s=Ee(te),r=E(0),f=E(0),p=E(""),h=E(""),u=E(1),g=E(1);return o({handleScroll:v=>{if(v){const y=v.offsetHeight-z,t=v.offsetWidth-z;f.value=v.scrollTop*100/y*u.value,r.value=v.scrollLeft*100/t*g.value}},update:()=>{const v=s==null?void 0:s.wrapElement;if(!v)return;const y=v.offsetHeight-z,t=v.offsetWidth-z,i=y**2/v.scrollHeight,m=t**2/v.scrollWidth,d=Math.max(i,n.minSize),c=Math.max(m,n.minSize);u.value=i/(y-i)/(d/(y-d)),g.value=m/(t-m)/(c/(t-c)),h.value=d+z<y?`${d}px`:"",p.value=c+z<t?`${c}px`:""}}),(v,y)=>(H(),ye(ze,null,[ae(ie,{move:r.value,ratio:g.value,size:p.value,always:v.always},null,8,["move","ratio","size","always"]),ae(ie,{move:f.value,ratio:u.value,size:h.value,vertical:"",always:v.always},null,8,["move","ratio","size","always"])],64))}});var Ye=V(qe,[["__file","bar.vue"]]);const Xe=ee({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Re([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...Ke(["ariaLabel","ariaOrientation"])}),Ge={scroll:({scrollTop:e,scrollLeft:o})=>[e,o].every(A)},Je="ElScrollbar",Qe=U({name:Je}),Ze=U({...Qe,props:Xe,emits:Ge,setup(e,{expose:o,emit:n}){const s=e,r=be("scrollbar");let f,p;const h=E(),u=E(),g=E(),w=E(),l=N(()=>{const a={};return s.height&&(a.height=re(s.height)),s.maxHeight&&(a.maxHeight=re(s.maxHeight)),[s.wrapStyle,a]}),v=N(()=>[s.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!s.native}]),y=N(()=>[r.e("view"),s.viewClass]),t=()=>{var a;u.value&&((a=w.value)==null||a.handleScroll(u.value),n("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function i(a,F){He(a)?u.value.scrollTo(a):A(a)&&A(F)&&u.value.scrollTo(a,F)}const m=a=>{A(a)&&(u.value.scrollTop=a)},d=a=>{A(a)&&(u.value.scrollLeft=a)},c=()=>{var a;(a=w.value)==null||a.update()};return I(()=>s.noresize,a=>{a?(f==null||f(),p==null||p()):({stop:f}=Fe(g,c),p=X("resize",c))},{immediate:!0}),I(()=>[s.maxHeight,s.height],()=>{s.native||x(()=>{var a;c(),u.value&&((a=w.value)==null||a.handleScroll(u.value))})}),Se(te,Ne({scrollbarElement:h,wrapElement:u})),$(()=>{s.native||x(()=>{c()})}),Oe(()=>c()),o({wrapRef:u,update:c,scrollTo:i,setScrollTop:m,setScrollLeft:d,handleScroll:t}),(a,F)=>(H(),ye("div",{ref_key:"scrollbarRef",ref:h,class:B(S(r).b())},[Q("div",{ref_key:"wrapRef",ref:u,class:B(S(v)),style:Z(S(l)),onScroll:t},[(H(),J(ke(a.tag),{id:a.id,ref_key:"resizeRef",ref:g,class:B(S(y)),style:Z(a.viewStyle),role:a.role,"aria-label":a.ariaLabel,"aria-orientation":a.ariaOrientation},{default:he(()=>[ge(a.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),a.native?Ae("v-if",!0):(H(),J(Ye,{key:0,ref_key:"barRef",ref:w,always:a.always,"min-size":a.minSize},null,8,["always","min-size"]))],2))}});var et=V(Ze,[["__file","scrollbar.vue"]]);const St=Be(et),q="focus-trap.focus-after-trapped",Y="focus-trap.focus-after-released",tt="focus-trap.focusout-prevented",ce={cancelable:!0,bubbles:!1},st={cancelable:!0,bubbles:!1},ue="focusAfterTrapped",fe="focusAfterReleased",ot=Symbol("elFocusTrap"),se=E(),j=E(0),oe=E(0);let K=0;const we=e=>{const o=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)o.push(n.currentNode);return o},de=(e,o)=>{for(const n of e)if(!nt(n,o))return n},nt=(e,o)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(o&&e===o)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},at=e=>{const o=we(e),n=de(o,e),s=de(o.reverse(),e);return[n,s]},rt=e=>e instanceof HTMLInputElement&&"select"in e,L=(e,o)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),oe.value=window.performance.now(),e!==n&&rt(e)&&o&&e.select()}};function ve(e,o){const n=[...e],s=e.indexOf(o);return s!==-1&&n.splice(s,1),n}const lt=()=>{let e=[];return{push:s=>{const r=e[0];r&&s!==r&&r.pause(),e=ve(e,s),e.unshift(s)},remove:s=>{var r,f;e=ve(e,s),(f=(r=e[0])==null?void 0:r.resume)==null||f.call(r)}}},it=(e,o=!1)=>{const n=document.activeElement;for(const s of e)if(L(s,o),document.activeElement!==n)return},me=lt(),ct=()=>j.value>oe.value,D=()=>{se.value="pointer",j.value=window.performance.now()},pe=()=>{se.value="keyboard",j.value=window.performance.now()},ut=()=>($(()=>{K===0&&(document.addEventListener("mousedown",D),document.addEventListener("touchstart",D),document.addEventListener("keydown",pe)),K++}),W(()=>{K--,K<=0&&(document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D),document.removeEventListener("keydown",pe))}),{focusReason:se,lastUserFocusTimestamp:j,lastAutomatedFocusTimestamp:oe}),M=e=>new CustomEvent(tt,{...st,detail:e}),ft=U({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ue,fe,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:o}){const n=E();let s,r;const{focusReason:f}=ut();De(t=>{e.trapped&&!p.paused&&o("release-requested",t)});const p={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},h=t=>{if(!e.loop&&!e.trapped||p.paused)return;const{key:i,altKey:m,ctrlKey:d,metaKey:c,currentTarget:a,shiftKey:F}=t,{loop:O}=e,b=i===Te.tab&&!m&&!d&&!c,T=document.activeElement;if(b&&T){const _=a,[C,k]=at(_);if(C&&k){if(!F&&T===k){const P=M({focusReason:f.value});o("focusout-prevented",P),P.defaultPrevented||(t.preventDefault(),O&&L(C,!0))}else if(F&&[C,_].includes(T)){const P=M({focusReason:f.value});o("focusout-prevented",P),P.defaultPrevented||(t.preventDefault(),O&&L(k,!0))}}else if(T===_){const P=M({focusReason:f.value});o("focusout-prevented",P),P.defaultPrevented||t.preventDefault()}}};Se(ot,{focusTrapRef:n,onKeydown:h}),I(()=>e.focusTrapEl,t=>{t&&(n.value=t)},{immediate:!0}),I([n],([t],[i])=>{t&&(t.addEventListener("keydown",h),t.addEventListener("focusin",w),t.addEventListener("focusout",l)),i&&(i.removeEventListener("keydown",h),i.removeEventListener("focusin",w),i.removeEventListener("focusout",l))});const u=t=>{o(ue,t)},g=t=>o(fe,t),w=t=>{const i=S(n);if(!i)return;const m=t.target,d=t.relatedTarget,c=m&&i.contains(m);e.trapped||d&&i.contains(d)||(s=d),c&&o("focusin",t),!p.paused&&e.trapped&&(c?r=m:L(r,!0))},l=t=>{const i=S(n);if(!(p.paused||!i))if(e.trapped){const m=t.relatedTarget;!Ie(m)&&!i.contains(m)&&setTimeout(()=>{if(!p.paused&&e.trapped){const d=M({focusReason:f.value});o("focusout-prevented",d),d.defaultPrevented||L(r,!0)}},0)}else{const m=t.target;m&&i.contains(m)||o("focusout",t)}};async function v(){await x();const t=S(n);if(t){me.push(p);const i=t.contains(document.activeElement)?s:document.activeElement;if(s=i,!t.contains(i)){const d=new Event(q,ce);t.addEventListener(q,u),t.dispatchEvent(d),d.defaultPrevented||x(()=>{let c=e.focusStartEl;Ue(c)||(L(c),document.activeElement!==c&&(c="first")),c==="first"&&it(we(t),!0),(document.activeElement===i||c==="container")&&L(t)})}}}function y(){const t=S(n);if(t){t.removeEventListener(q,u);const i=new CustomEvent(Y,{...ce,detail:{focusReason:f.value}});t.addEventListener(Y,g),t.dispatchEvent(i),!i.defaultPrevented&&(f.value=="keyboard"||!ct()||t.contains(document.activeElement))&&L(s??document.body),t.removeEventListener(Y,g),me.remove(p)}}return $(()=>{e.trapped&&v(),I(()=>e.trapped,t=>{t?v():y()})}),W(()=>{e.trapped&&y()}),{onKeydown:h}}});function dt(e,o,n,s,r,f){return ge(e.$slots,"default",{handleKeydown:e.onKeydown})}var gt=V(ft,[["render",dt],["__file","focus-trap.vue"]]);export{gt as E,ot as F,St as a,yt as i};
