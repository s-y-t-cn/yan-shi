import{b as d,c as A}from"./index-C-RjJs20.js";import{d as E,N as H,c as o,l as s,g as c,w as g,e as y,W as D,ac as T,x as M,r as S,y as w,a0 as O,L as R,B as z,z as L,ag as x,G as k,f as V}from"./index-CVJ82-Av.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F=E({__name:"SytTableColumn",props:{thData:{type:Object}},setup(l){return(p,a)=>{const h=H("SytTableColumn",!0);return l.thData.children?(o(),s(c(d),{key:1,label:l.thData.title,align:"center"},{default:g(()=>[(o(!0),y(D,null,T(l.thData.children,i=>(o(),s(h,{key:i.dataIndex,"th-data":i},null,8,["th-data"]))),128))]),_:1},8,["label"])):(o(),s(c(d),{key:0,prop:l.thData.dataIndex,label:l.thData.title,align:"center",sortable:l.thData.sortable,"show-overflow-tooltip":l.thData.showOverflowTooltip},null,8,["prop","label","sortable","show-overflow-tooltip"]))}}}),G=1500,b=40,W={__name:"SytTable",props:{columns:{type:Array,default:()=>[{title:"名字",dataIndex:"name"},{title:"a列",children:[{title:"b列",dataIndex:"b",sortable:!0,showOverflowTooltip:!0},{title:"c列",dataIndex:"c"}]}]},data:{type:Array,default:()=>[{b:"1",c:"2"},{b:"3",c:"4"}]},height:[Number,String],selection:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},autoScroll:{type:Boolean,default:!1}},emits:["selection-change"],setup(l,{emit:p}){const a=l,h=p,i=M(),m=S(),C=w(()=>a.columns),I=e=>{h("selection-change",e)},B=O({"--el-table-bg-color":"transparent","--el-table-tr-bg-color":"transparent","--el-table-header-bg-color":"rgb(255 255 255 / 0.05)","--el-fill-color-light":"rgb(255 255 255 / 0.05)","--el-fill-color-lighter":"rgb(255 255 255 / 0.02)"});let f=null,n=S(!0);const N=w(()=>{if(a.autoScroll){const e=v(a.columns),r=b*e,t=typeof a.height=="string"?0:a.height-r;return b*a.data.length>t?a.data.concat(a.data):a.data}return a.data});function v(e,r=0){return(e==null?void 0:e.length)>0?Math.max(...e.map(t=>t.children?v(t.children,r+1):r+1)):r}const $=()=>{let e=0;return()=>{var u;if(!n.value)return;const r=a.data.length,t=e%(r+1)*b;(u=m.value)==null||u.scrollTo({left:0,top:t,behavior:t==0?"instant":"smooth"}),e++}};return R(()=>a.autoScroll,e=>{f&&clearInterval(f),e&&(f=setInterval($(),G))},{immediate:!0}),(e,r)=>(o(),y("div",{class:"table-container",onMouseover:r[0]||(r[0]=t=>x(n)?n.value=!1:n=!1),onMouseout:r[1]||(r[1]=t=>x(n)?n.value=!0:n=!0)},[z(c(A),{ref_key:"tableRef",ref:m,height:l.height||"auto",style:L(l.transparent?B:null),data:N.value,"row-key":"id",border:!1,stripe:"",onSelectionChange:I},{default:g(()=>[l.selection?(o(),s(c(d),{key:0,type:"selection","reserve-selection":"",width:55})):k("",!0),(o(!0),y(D,null,T(C.value,t=>(o(),s(F,{key:t.id,"th-data":t},null,8,["th-data"]))),128)),i.operations?(o(),s(c(d),{key:1,label:"操作",align:"center",fixed:"right",width:100},{default:g(({row:t,column:u})=>[V(e.$slots,"operations",{row:t,column:u},void 0,!0)]),_:3})):k("",!0)]),_:3},8,["height","style","data"])],32))}},P=j(W,[["__scopeId","data-v-117a6448"]]);export{P as S};
