import{b as u,c as E}from"./index-CQ3JoZQm.js";import{d as D,N as H,c as o,l as s,g as c,w as g,e as p,W as T,ac as C,x as M,r as S,y as w,a0 as O,L as R,B as z,z as L,ag as x,G as k,f as V}from"./index-DS8UErgR.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F=D({__name:"SytTableColumn",props:{thData:{type:Object}},setup(l){return(y,a)=>{const h=H("SytTableColumn",!0);return l.thData.children?(o(),s(c(u),{key:1,label:l.thData.title,align:"center"},{default:g(()=>[(o(!0),p(T,null,C(l.thData.children,i=>(o(),s(h,{key:i.dataIndex,"th-data":i},null,8,["th-data"]))),128))]),_:1},8,["label"])):(o(),s(c(u),{key:0,prop:l.thData.dataIndex,label:l.thData.title,align:"center",sortable:l.thData.sortable,"show-overflow-tooltip":l.thData.showOverflowTooltip},null,8,["prop","label","sortable","show-overflow-tooltip"]))}}}),G=1500,b=40,W=D({__name:"SytTable",props:{columns:{type:Array,default:()=>[{title:"名字",dataIndex:"name"},{title:"a列",children:[{title:"b列",dataIndex:"b",sortable:!0,showOverflowTooltip:!0},{title:"c列",dataIndex:"c"}]}]},data:{type:Array,default:()=>[{b:"1",c:"2"},{b:"3",c:"4"}]},height:[Number,String],selection:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},autoScroll:{type:Boolean,default:!1}},emits:["selection-change"],setup(l,{emit:y}){const a=l,h=y,i=M(),m=S(),I=w(()=>a.columns),B=e=>{h("selection-change",e)},N=O({"--el-table-bg-color":"transparent","--el-table-tr-bg-color":"transparent","--el-table-header-bg-color":"rgb(255 255 255 / 0.05)","--el-fill-color-light":"rgb(255 255 255 / 0.05)","--el-fill-color-lighter":"rgb(255 255 255 / 0.02)","--el-table-border":"1px solid transparent","--el-table-border-color":"transparent"});let f=null,n=S(!0);const $=w(()=>{if(a.autoScroll){const e=v(a.columns),r=b*e,t=typeof a.height=="string"?0:a.height-r;return b*a.data.length>t?a.data.concat(a.data):a.data}return a.data});function v(e,r=0){return(e==null?void 0:e.length)>0?Math.max(...e.map(t=>t.children?v(t.children,r+1):r+1)):r}const A=()=>{let e=0;return()=>{var d;if(!n.value)return;const r=a.data.length,t=e%(r+1)*b;(d=m.value)==null||d.scrollTo({left:0,top:t,behavior:t==0?"instant":"smooth"}),e++}};return R(()=>a.autoScroll,e=>{f&&clearInterval(f),e&&(f=setInterval(A(),G))},{immediate:!0}),(e,r)=>(o(),p("div",{class:"table-container",onMouseover:r[0]||(r[0]=t=>x(n)?n.value=!1:n=!1),onMouseout:r[1]||(r[1]=t=>x(n)?n.value=!0:n=!0)},[z(c(E),{ref_key:"tableRef",ref:m,height:l.height||"auto",style:L(l.transparent?N:null),data:$.value,"row-key":"id",border:!1,stripe:"",onSelectionChange:B},{default:g(()=>[l.selection?(o(),s(c(u),{key:0,type:"selection","reserve-selection":"",width:55})):k("",!0),(o(!0),p(T,null,C(I.value,t=>(o(),s(F,{key:t.id,"th-data":t},null,8,["th-data"]))),128)),i.operations?(o(),s(c(u),{key:1,label:"操作",align:"center",fixed:"right",width:100},{default:g(({row:t,column:d})=>[V(e.$slots,"operations",{row:t,column:d},void 0,!0)]),_:3})):k("",!0)]),_:3},8,["height","style","data"])],32))}}),P=j(W,[["__scopeId","data-v-5dfd237d"]]);export{P as S};
